var Mse=Object.create;var Ax=Object.defineProperty,Fse=Object.defineProperties,Pse=Object.getOwnPropertyDescriptor,$se=Object.getOwnPropertyDescriptors,Lse=Object.getOwnPropertyNames,Nx=Object.getOwnPropertySymbols,Vse=Object.getPrototypeOf,RD=Object.prototype.hasOwnProperty,Y$=Object.prototype.propertyIsEnumerable;var X$=(e,t,n)=>t in e?Ax(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xe=(e,t)=>{for(var n in t||={})RD.call(t,n)&&X$(e,n,t[n]);if(Nx)for(var n of Nx(t))Y$.call(t,n)&&X$(e,n,t[n]);return e},Tt=(e,t)=>Fse(e,$se(t));var Z$=(e,t)=>{var n={};for(var r in e)RD.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Nx)for(var r of Nx(e))t.indexOf(r)<0&&Y$.call(e,r)&&(n[r]=e[r]);return n};var $o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),tn=(e,t)=>{for(var n in t)Ax(e,n,{get:t[n],enumerable:!0})},Bse=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Lse(t))!RD.call(e,o)&&o!==n&&Ax(e,o,{get:()=>t[o],enumerable:!(r=Pse(t,o))||r.enumerable});return e};var sa=(e,t,n)=>(n=e!=null?Mse(Vse(e)):{},Bse(t||!e||!e.__esModule?Ax(n,"default",{value:e,enumerable:!0}):n,e));var ne=(e,t,n)=>new Promise((r,o)=>{var i=u=>{try{a(n.next(u))}catch(c){o(c)}},s=u=>{try{a(n.throw(u))}catch(c){o(c)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(i,s);a((n=n.apply(e,t)).next())});var W5=$o((dh,Yy)=>{"use strict";(function(){var e,t="4.17.21",n=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",i="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,u="__lodash_placeholder__",c=1,f=2,d=4,h=1,m=2,v=1,x=2,b=4,C=8,D=16,O=32,F=64,B=128,H=256,X=512,Z=30,te="...",J=800,ae=16,ye=1,ke=2,Ke=3,Me=1/0,Nt=9007199254740991,oe=17976931348623157e292,pe=NaN,ie=4294967295,Ce=ie-1,ve=ie>>>1,De=[["ary",B],["bind",v],["bindKey",x],["curry",C],["curryRight",D],["flip",X],["partial",O],["partialRight",F],["rearg",H]],Te="[object Arguments]",it="[object Array]",be="[object AsyncFunction]",ut="[object Boolean]",dt="[object Date]",Un="[object DOMException]",bn="[object Error]",Yt="[object Function]",pn="[object GeneratorFunction]",un="[object Map]",gt="[object Number]",Jt="[object Null]",cn="[object Object]",Qr="[object Promise]",fo="[object Proxy]",po="[object RegExp]",qn="[object Set]",Gr="[object String]",wr="[object Symbol]",Jr="[object Undefined]",eo="[object WeakMap]",Dr="[object WeakSet]",to="[object ArrayBuffer]",ho="[object DataView]",xs="[object Float32Array]",Qs="[object Float64Array]",Js="[object Int8Array]",mo="[object Int16Array]",xc="[object Int32Array]",ka="[object Uint8Array]",ea="[object Uint8ClampedArray]",ql="[object Uint16Array]",Bd="[object Uint32Array]",x2=/\b__p \+= '';/g,I0=/\b(__p \+=) '' \+/g,Qm=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oa=/&(?:amp|lt|gt|quot|#39);/g,bc=/[&<>"']/g,S0=RegExp(Oa.source),D0=RegExp(bc.source),Jm=/<%-([\s\S]+?)%>/g,N0=/<%([\s\S]+?)%>/g,Ma=/<%=([\s\S]+?)%>/g,eg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A0=/^\w*$/,Ud=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wc=/[\\^$.*+?()[\]{}|]/g,b2=RegExp(wc.source),Fa=/^\s+/,w2=/\s/,ta=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,bu=/\{\n\/\* \[wrapped with (.+)\] \*/,R0=/,? & /,Kn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,bs=/[()=,{}\[\]\/\s]/,tg=/\\(\\)?/g,E2=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Kl=/\w*$/,ng=/^[-+]0x[0-9a-f]+$/i,Gd=/^0b[01]+$/i,Xl=/^\[object .+?Constructor\]$/,k0=/^0o[0-7]+$/i,rg=/^(?:0|[1-9]\d*)$/,og=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yl=/($^)/,Fi=/['\n\r\u2028\u2029\\]/g,Ro="\\ud800-\\udfff",Zl="\\u0300-\\u036f",ig="\\ufe20-\\ufe2f",sg="\\u20d0-\\u20ff",ag=Zl+ig+sg,Ql="\\u2700-\\u27bf",Pi="a-z\\xdf-\\xf6\\xf8-\\xff",O0="\\xac\\xb1\\xd7\\xf7",jd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ws="\\u2000-\\u206f",zd=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",M0="A-Z\\xc0-\\xd6\\xd8-\\xde",ug="\\ufe0e\\ufe0f",Hd=O0+jd+ws+zd,cg="['\u2019]",C2="["+Ro+"]",lg="["+Hd+"]",Jl="["+ag+"]",fg="\\d+",F0="["+Ql+"]",no="["+Pi+"]",dg="[^"+Ro+Hd+fg+Ql+Pi+M0+"]",Wd="\\ud83c[\\udffb-\\udfff]",qd="(?:"+Jl+"|"+Wd+")",pg="[^"+Ro+"]",Kd="(?:\\ud83c[\\udde6-\\uddff]){2}",hg="[\\ud800-\\udbff][\\udc00-\\udfff]",Ec="["+M0+"]",mg="\\u200d",gg="(?:"+no+"|"+dg+")",Xd="(?:"+Ec+"|"+dg+")",yg="(?:"+cg+"(?:d|ll|m|re|s|t|ve))?",vg="(?:"+cg+"(?:D|LL|M|RE|S|T|VE))?",Cc=qd+"?",P0="["+ug+"]?",T2="(?:"+mg+"(?:"+[pg,Kd,hg].join("|")+")"+P0+Cc+")*",_2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",I2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Yd=P0+Cc+T2,ef="(?:"+[F0,Kd,hg].join("|")+")"+Yd,S2="(?:"+[pg+Jl+"?",Jl,Kd,hg,C2].join("|")+")",D2=RegExp(cg,"g"),N2=RegExp(Jl,"g"),xg=RegExp(Wd+"(?="+Wd+")|"+S2+Yd,"g"),bg=RegExp([Ec+"?"+no+"+"+yg+"(?="+[lg,Ec,"$"].join("|")+")",Xd+"+"+vg+"(?="+[lg,Ec+gg,"$"].join("|")+")",Ec+"?"+gg+"+"+yg,Ec+"+"+vg,I2,_2,fg,ef].join("|"),"g"),$0=RegExp("["+mg+Ro+ag+ug+"]"),L0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$i=-1,wn={};wn[xs]=wn[Qs]=wn[Js]=wn[mo]=wn[xc]=wn[ka]=wn[ea]=wn[ql]=wn[Bd]=!0,wn[Te]=wn[it]=wn[to]=wn[ut]=wn[ho]=wn[dt]=wn[bn]=wn[Yt]=wn[un]=wn[gt]=wn[cn]=wn[po]=wn[qn]=wn[Gr]=wn[eo]=!1;var hn={};hn[Te]=hn[it]=hn[to]=hn[ho]=hn[ut]=hn[dt]=hn[xs]=hn[Qs]=hn[Js]=hn[mo]=hn[xc]=hn[un]=hn[gt]=hn[cn]=hn[po]=hn[qn]=hn[Gr]=hn[wr]=hn[ka]=hn[ea]=hn[ql]=hn[Bd]=!0,hn[bn]=hn[Yt]=hn[eo]=!1;var V0={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},B0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Eg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tc=parseFloat,U0=parseInt,Zd=typeof global=="object"&&global&&global.Object===Object&&global,A2=typeof self=="object"&&self&&self.Object===Object&&self,pr=Zd||A2||Function("return this")(),Pa=typeof dh=="object"&&dh&&!dh.nodeType&&dh,$a=Pa&&typeof Yy=="object"&&Yy&&!Yy.nodeType&&Yy,Cg=$a&&$a.exports===Pa,Tg=Cg&&Zd.process,ko=function(){try{var K=$a&&$a.require&&$a.require("util").types;return K||Tg&&Tg.binding&&Tg.binding("util")}catch{}}(),nf=ko&&ko.isArrayBuffer,_g=ko&&ko.isDate,G0=ko&&ko.isMap,Ig=ko&&ko.isRegExp,Sg=ko&&ko.isSet,Dg=ko&&ko.isTypedArray;function go(K,se,re){switch(re.length){case 0:return K.call(se);case 1:return K.call(se,re[0]);case 2:return K.call(se,re[0],re[1]);case 3:return K.call(se,re[0],re[1],re[2])}return K.apply(se,re)}function Ng(K,se,re,Ae){for(var pt=-1,en=K==null?0:K.length;++pt<en;){var Rr=K[pt];se(Ae,Rr,re(Rr),K)}return Ae}function Oo(K,se){for(var re=-1,Ae=K==null?0:K.length;++re<Ae&&se(K[re],re,K)!==!1;);return K}function R2(K,se){for(var re=K==null?0:K.length;re--&&se(K[re],re,K)!==!1;);return K}function j0(K,se){for(var re=-1,Ae=K==null?0:K.length;++re<Ae;)if(!se(K[re],re,K))return!1;return!0}function La(K,se){for(var re=-1,Ae=K==null?0:K.length,pt=0,en=[];++re<Ae;){var Rr=K[re];se(Rr,re,K)&&(en[pt++]=Rr)}return en}function Qd(K,se){var re=K==null?0:K.length;return!!re&&wu(K,se,0)>-1}function Jd(K,se,re){for(var Ae=-1,pt=K==null?0:K.length;++Ae<pt;)if(re(se,K[Ae]))return!0;return!1}function Nn(K,se){for(var re=-1,Ae=K==null?0:K.length,pt=Array(Ae);++re<Ae;)pt[re]=se(K[re],re,K);return pt}function Va(K,se){for(var re=-1,Ae=se.length,pt=K.length;++re<Ae;)K[pt+re]=se[re];return K}function rf(K,se,re,Ae){var pt=-1,en=K==null?0:K.length;for(Ae&&en&&(re=K[++pt]);++pt<en;)re=se(re,K[pt],pt,K);return re}function k2(K,se,re,Ae){var pt=K==null?0:K.length;for(Ae&&pt&&(re=K[--pt]);pt--;)re=se(re,K[pt],pt,K);return re}function Ag(K,se){for(var re=-1,Ae=K==null?0:K.length;++re<Ae;)if(se(K[re],re,K))return!0;return!1}var O2=I("length");function ep(K){return K.split("")}function M2(K){return K.match(Kn)||[]}function z0(K,se,re){var Ae;return re(K,function(pt,en,Rr){if(se(pt,en,Rr))return Ae=en,!1}),Ae}function tp(K,se,re,Ae){for(var pt=K.length,en=re+(Ae?1:-1);Ae?en--:++en<pt;)if(se(K[en],en,K))return en;return-1}function wu(K,se,re){return se===se?P2(K,se,re):tp(K,g,re)}function H0(K,se,re,Ae){for(var pt=re-1,en=K.length;++pt<en;)if(Ae(K[pt],se))return pt;return-1}function g(K){return K!==K}function w(K,se){var re=K==null?0:K.length;return re?V(K,se)/re:pe}function I(K){return function(se){return se==null?e:se[K]}}function R(K){return function(se){return K==null?e:K[se]}}function L(K,se,re,Ae,pt){return pt(K,function(en,Rr,Cn){re=Ae?(Ae=!1,en):se(re,en,Rr,Cn)}),re}function G(K,se){var re=K.length;for(K.sort(se);re--;)K[re]=K[re].value;return K}function V(K,se){for(var re,Ae=-1,pt=K.length;++Ae<pt;){var en=se(K[Ae]);en!==e&&(re=re===e?en:re+en)}return re}function q(K,se){for(var re=-1,Ae=Array(K);++re<K;)Ae[re]=se(re);return Ae}function ee(K,se){return Nn(se,function(re){return[re,K[re]]})}function me(K){return K&&K.slice(0,iP(K)+1).replace(Fa,"")}function ge(K){return function(se){return K(se)}}function Ye(K,se){return Nn(se,function(re){return K[re]})}function Fe(K,se){return K.has(se)}function Ie(K,se){for(var re=-1,Ae=K.length;++re<Ae&&wu(se,K[re],0)>-1;);return re}function Je(K,se){for(var re=K.length;re--&&wu(se,K[re],0)>-1;);return re}function Et(K,se){for(var re=K.length,Ae=0;re--;)K[re]===se&&++Ae;return Ae}var En=R(V0),mn=R(B0);function Nr(K){return"\\"+Eg[K]}function ii(K,se){return K==null?e:K[se]}function hr(K){return $0.test(K)}function Ht(K){return L0.test(K)}function Ar(K){for(var se,re=[];!(se=K.next()).done;)re.push(se.value);return re}function Es(K){var se=-1,re=Array(K.size);return K.forEach(function(Ae,pt){re[++se]=[pt,Ae]}),re}function W0(K,se){return function(re){return K(se(re))}}function Ba(K,se){for(var re=-1,Ae=K.length,pt=0,en=[];++re<Ae;){var Rr=K[re];(Rr===se||Rr===u)&&(K[re]=u,en[pt++]=re)}return en}function np(K){var se=-1,re=Array(K.size);return K.forEach(function(Ae){re[++se]=Ae}),re}function F2(K){var se=-1,re=Array(K.size);return K.forEach(function(Ae){re[++se]=[Ae,Ae]}),re}function P2(K,se,re){for(var Ae=re-1,pt=K.length;++Ae<pt;)if(K[Ae]===se)return Ae;return-1}function rp(K,se,re){for(var Ae=re+1;Ae--;)if(K[Ae]===se)return Ae;return Ae}function op(K){return hr(K)?Cee(K):O2(K)}function na(K){return hr(K)?Tee(K):ep(K)}function iP(K){for(var se=K.length;se--&&w2.test(K.charAt(se)););return se}var Eee=R(wg);function Cee(K){for(var se=xg.lastIndex=0;xg.test(K);)++se;return se}function Tee(K){return K.match(xg)||[]}function _ee(K){return K.match(bg)||[]}var Iee=function K(se){se=se==null?pr:_c.defaults(pr.Object(),se,_c.pick(pr,tf));var re=se.Array,Ae=se.Date,pt=se.Error,en=se.Function,Rr=se.Math,Cn=se.Object,$2=se.RegExp,See=se.String,Cs=se.TypeError,q0=re.prototype,Dee=en.prototype,ip=Cn.prototype,K0=se["__core-js_shared__"],X0=Dee.toString,ln=ip.hasOwnProperty,Nee=0,sP=function(){var l=/[^.]+$/.exec(K0&&K0.keys&&K0.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Y0=ip.toString,Aee=X0.call(Cn),Ree=pr._,kee=$2("^"+X0.call(ln).replace(wc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z0=Cg?se.Buffer:e,Ic=se.Symbol,Q0=se.Uint8Array,aP=Z0?Z0.allocUnsafe:e,J0=W0(Cn.getPrototypeOf,Cn),uP=Cn.create,cP=ip.propertyIsEnumerable,ex=q0.splice,lP=Ic?Ic.isConcatSpreadable:e,Rg=Ic?Ic.iterator:e,of=Ic?Ic.toStringTag:e,tx=function(){try{var l=lf(Cn,"defineProperty");return l({},"",{}),l}catch{}}(),Oee=se.clearTimeout!==pr.clearTimeout&&se.clearTimeout,Mee=Ae&&Ae.now!==pr.Date.now&&Ae.now,Fee=se.setTimeout!==pr.setTimeout&&se.setTimeout,nx=Rr.ceil,rx=Rr.floor,L2=Cn.getOwnPropertySymbols,Pee=Z0?Z0.isBuffer:e,fP=se.isFinite,$ee=q0.join,Lee=W0(Cn.keys,Cn),kr=Rr.max,yo=Rr.min,Vee=Ae.now,Bee=se.parseInt,dP=Rr.random,Uee=q0.reverse,V2=lf(se,"DataView"),kg=lf(se,"Map"),B2=lf(se,"Promise"),sp=lf(se,"Set"),Og=lf(se,"WeakMap"),Mg=lf(Cn,"create"),ox=Og&&new Og,ap={},Gee=ff(V2),jee=ff(kg),zee=ff(B2),Hee=ff(sp),Wee=ff(Og),ix=Ic?Ic.prototype:e,Fg=ix?ix.valueOf:e,pP=ix?ix.toString:e;function P(l){if(or(l)&&!yt(l)&&!(l instanceof Pt)){if(l instanceof Ts)return l;if(ln.call(l,"__wrapped__"))return h$(l)}return new Ts(l)}var up=function(){function l(){}return function(p){if(!Xn(p))return{};if(uP)return uP(p);l.prototype=p;var y=new l;return l.prototype=e,y}}();function sx(){}function Ts(l,p){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=e}P.templateSettings={escape:Jm,evaluate:N0,interpolate:Ma,variable:"",imports:{_:P}},P.prototype=sx.prototype,P.prototype.constructor=P,Ts.prototype=up(sx.prototype),Ts.prototype.constructor=Ts;function Pt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function qee(){var l=new Pt(this.__wrapped__);return l.__actions__=si(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=si(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=si(this.__views__),l}function Kee(){if(this.__filtered__){var l=new Pt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function Xee(){var l=this.__wrapped__.value(),p=this.__dir__,y=yt(l),E=p<0,A=y?l.length:0,$=ane(0,A,this.__views__),j=$.start,W=$.end,Y=W-j,ue=E?W:j-1,ce=this.__iteratees__,he=ce.length,Se=0,Ve=yo(Y,this.__takeCount__);if(!y||!E&&A==Y&&Ve==Y)return $P(l,this.__actions__);var nt=[];e:for(;Y--&&Se<Ve;){ue+=p;for(var St=-1,rt=l[ue];++St<he;){var Mt=ce[St],Gt=Mt.iteratee,Bi=Mt.type,Po=Gt(rt);if(Bi==ke)rt=Po;else if(!Po){if(Bi==ye)continue e;break e}}nt[Se++]=rt}return nt}Pt.prototype=up(sx.prototype),Pt.prototype.constructor=Pt;function sf(l){var p=-1,y=l==null?0:l.length;for(this.clear();++p<y;){var E=l[p];this.set(E[0],E[1])}}function Yee(){this.__data__=Mg?Mg(null):{},this.size=0}function Zee(l){var p=this.has(l)&&delete this.__data__[l];return this.size-=p?1:0,p}function Qee(l){var p=this.__data__;if(Mg){var y=p[l];return y===s?e:y}return ln.call(p,l)?p[l]:e}function Jee(l){var p=this.__data__;return Mg?p[l]!==e:ln.call(p,l)}function ete(l,p){var y=this.__data__;return this.size+=this.has(l)?0:1,y[l]=Mg&&p===e?s:p,this}sf.prototype.clear=Yee,sf.prototype.delete=Zee,sf.prototype.get=Qee,sf.prototype.has=Jee,sf.prototype.set=ete;function Eu(l){var p=-1,y=l==null?0:l.length;for(this.clear();++p<y;){var E=l[p];this.set(E[0],E[1])}}function tte(){this.__data__=[],this.size=0}function nte(l){var p=this.__data__,y=ax(p,l);if(y<0)return!1;var E=p.length-1;return y==E?p.pop():ex.call(p,y,1),--this.size,!0}function rte(l){var p=this.__data__,y=ax(p,l);return y<0?e:p[y][1]}function ote(l){return ax(this.__data__,l)>-1}function ite(l,p){var y=this.__data__,E=ax(y,l);return E<0?(++this.size,y.push([l,p])):y[E][1]=p,this}Eu.prototype.clear=tte,Eu.prototype.delete=nte,Eu.prototype.get=rte,Eu.prototype.has=ote,Eu.prototype.set=ite;function Cu(l){var p=-1,y=l==null?0:l.length;for(this.clear();++p<y;){var E=l[p];this.set(E[0],E[1])}}function ste(){this.size=0,this.__data__={hash:new sf,map:new(kg||Eu),string:new sf}}function ate(l){var p=xx(this,l).delete(l);return this.size-=p?1:0,p}function ute(l){return xx(this,l).get(l)}function cte(l){return xx(this,l).has(l)}function lte(l,p){var y=xx(this,l),E=y.size;return y.set(l,p),this.size+=y.size==E?0:1,this}Cu.prototype.clear=ste,Cu.prototype.delete=ate,Cu.prototype.get=ute,Cu.prototype.has=cte,Cu.prototype.set=lte;function af(l){var p=-1,y=l==null?0:l.length;for(this.__data__=new Cu;++p<y;)this.add(l[p])}function fte(l){return this.__data__.set(l,s),this}function dte(l){return this.__data__.has(l)}af.prototype.add=af.prototype.push=fte,af.prototype.has=dte;function ra(l){var p=this.__data__=new Eu(l);this.size=p.size}function pte(){this.__data__=new Eu,this.size=0}function hte(l){var p=this.__data__,y=p.delete(l);return this.size=p.size,y}function mte(l){return this.__data__.get(l)}function gte(l){return this.__data__.has(l)}function yte(l,p){var y=this.__data__;if(y instanceof Eu){var E=y.__data__;if(!kg||E.length<n-1)return E.push([l,p]),this.size=++y.size,this;y=this.__data__=new Cu(E)}return y.set(l,p),this.size=y.size,this}ra.prototype.clear=pte,ra.prototype.delete=hte,ra.prototype.get=mte,ra.prototype.has=gte,ra.prototype.set=yte;function hP(l,p){var y=yt(l),E=!y&&df(l),A=!y&&!E&&Rc(l),$=!y&&!E&&!A&&dp(l),j=y||E||A||$,W=j?q(l.length,See):[],Y=W.length;for(var ue in l)(p||ln.call(l,ue))&&!(j&&(ue=="length"||A&&(ue=="offset"||ue=="parent")||$&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Su(ue,Y)))&&W.push(ue);return W}function mP(l){var p=l.length;return p?l[Z2(0,p-1)]:e}function vte(l,p){return bx(si(l),uf(p,0,l.length))}function xte(l){return bx(si(l))}function U2(l,p,y){(y!==e&&!oa(l[p],y)||y===e&&!(p in l))&&Tu(l,p,y)}function Pg(l,p,y){var E=l[p];(!(ln.call(l,p)&&oa(E,y))||y===e&&!(p in l))&&Tu(l,p,y)}function ax(l,p){for(var y=l.length;y--;)if(oa(l[y][0],p))return y;return-1}function bte(l,p,y,E){return Sc(l,function(A,$,j){p(E,A,y(A),j)}),E}function gP(l,p){return l&&Ga(p,jr(p),l)}function wte(l,p){return l&&Ga(p,ui(p),l)}function Tu(l,p,y){p=="__proto__"&&tx?tx(l,p,{configurable:!0,enumerable:!0,value:y,writable:!0}):l[p]=y}function G2(l,p){for(var y=-1,E=p.length,A=re(E),$=l==null;++y<E;)A[y]=$?e:ED(l,p[y]);return A}function uf(l,p,y){return l===l&&(y!==e&&(l=l<=y?l:y),p!==e&&(l=l>=p?l:p)),l}function _s(l,p,y,E,A,$){var j,W=p&c,Y=p&f,ue=p&d;if(y&&(j=A?y(l,E,A,$):y(l)),j!==e)return j;if(!Xn(l))return l;var ce=yt(l);if(ce){if(j=cne(l),!W)return si(l,j)}else{var he=vo(l),Se=he==Yt||he==pn;if(Rc(l))return BP(l,W);if(he==cn||he==Te||Se&&!A){if(j=Y||Se?{}:i$(l),!W)return Y?Qte(l,wte(j,l)):Zte(l,gP(j,l))}else{if(!hn[he])return A?l:{};j=lne(l,he,W)}}$||($=new ra);var Ve=$.get(l);if(Ve)return Ve;$.set(l,j),M$(l)?l.forEach(function(rt){j.add(_s(rt,p,y,rt,l,$))}):k$(l)&&l.forEach(function(rt,Mt){j.set(Mt,_s(rt,p,y,Mt,l,$))});var nt=ue?Y?uD:aD:Y?ui:jr,St=ce?e:nt(l);return Oo(St||l,function(rt,Mt){St&&(Mt=rt,rt=l[Mt]),Pg(j,Mt,_s(rt,p,y,Mt,l,$))}),j}function Ete(l){var p=jr(l);return function(y){return yP(y,l,p)}}function yP(l,p,y){var E=y.length;if(l==null)return!E;for(l=Cn(l);E--;){var A=y[E],$=p[A],j=l[A];if(j===e&&!(A in l)||!$(j))return!1}return!0}function vP(l,p,y){if(typeof l!="function")throw new Cs(o);return jg(function(){l.apply(e,y)},p)}function $g(l,p,y,E){var A=-1,$=Qd,j=!0,W=l.length,Y=[],ue=p.length;if(!W)return Y;y&&(p=Nn(p,ge(y))),E?($=Jd,j=!1):p.length>=n&&($=Fe,j=!1,p=new af(p));e:for(;++A<W;){var ce=l[A],he=y==null?ce:y(ce);if(ce=E||ce!==0?ce:0,j&&he===he){for(var Se=ue;Se--;)if(p[Se]===he)continue e;Y.push(ce)}else $(p,he,E)||Y.push(ce)}return Y}var Sc=HP(Ua),xP=HP(z2,!0);function Cte(l,p){var y=!0;return Sc(l,function(E,A,$){return y=!!p(E,A,$),y}),y}function ux(l,p,y){for(var E=-1,A=l.length;++E<A;){var $=l[E],j=p($);if(j!=null&&(W===e?j===j&&!Vi(j):y(j,W)))var W=j,Y=$}return Y}function Tte(l,p,y,E){var A=l.length;for(y=Ct(y),y<0&&(y=-y>A?0:A+y),E=E===e||E>A?A:Ct(E),E<0&&(E+=A),E=y>E?0:P$(E);y<E;)l[y++]=p;return l}function bP(l,p){var y=[];return Sc(l,function(E,A,$){p(E,A,$)&&y.push(E)}),y}function ro(l,p,y,E,A){var $=-1,j=l.length;for(y||(y=dne),A||(A=[]);++$<j;){var W=l[$];p>0&&y(W)?p>1?ro(W,p-1,y,E,A):Va(A,W):E||(A[A.length]=W)}return A}var j2=WP(),wP=WP(!0);function Ua(l,p){return l&&j2(l,p,jr)}function z2(l,p){return l&&wP(l,p,jr)}function cx(l,p){return La(p,function(y){return Du(l[y])})}function cf(l,p){p=Nc(p,l);for(var y=0,E=p.length;l!=null&&y<E;)l=l[ja(p[y++])];return y&&y==E?l:e}function EP(l,p,y){var E=p(l);return yt(l)?E:Va(E,y(l))}function Mo(l){return l==null?l===e?Jr:Jt:of&&of in Cn(l)?sne(l):xne(l)}function H2(l,p){return l>p}function _te(l,p){return l!=null&&ln.call(l,p)}function Ite(l,p){return l!=null&&p in Cn(l)}function Ste(l,p,y){return l>=yo(p,y)&&l<kr(p,y)}function W2(l,p,y){for(var E=y?Jd:Qd,A=l[0].length,$=l.length,j=$,W=re($),Y=1/0,ue=[];j--;){var ce=l[j];j&&p&&(ce=Nn(ce,ge(p))),Y=yo(ce.length,Y),W[j]=!y&&(p||A>=120&&ce.length>=120)?new af(j&&ce):e}ce=l[0];var he=-1,Se=W[0];e:for(;++he<A&&ue.length<Y;){var Ve=ce[he],nt=p?p(Ve):Ve;if(Ve=y||Ve!==0?Ve:0,!(Se?Fe(Se,nt):E(ue,nt,y))){for(j=$;--j;){var St=W[j];if(!(St?Fe(St,nt):E(l[j],nt,y)))continue e}Se&&Se.push(nt),ue.push(Ve)}}return ue}function Dte(l,p,y,E){return Ua(l,function(A,$,j){p(E,y(A),$,j)}),E}function Lg(l,p,y){p=Nc(p,l),l=c$(l,p);var E=l==null?l:l[ja(Ss(p))];return E==null?e:go(E,l,y)}function CP(l){return or(l)&&Mo(l)==Te}function Nte(l){return or(l)&&Mo(l)==to}function Ate(l){return or(l)&&Mo(l)==dt}function Vg(l,p,y,E,A){return l===p?!0:l==null||p==null||!or(l)&&!or(p)?l!==l&&p!==p:Rte(l,p,y,E,Vg,A)}function Rte(l,p,y,E,A,$){var j=yt(l),W=yt(p),Y=j?it:vo(l),ue=W?it:vo(p);Y=Y==Te?cn:Y,ue=ue==Te?cn:ue;var ce=Y==cn,he=ue==cn,Se=Y==ue;if(Se&&Rc(l)){if(!Rc(p))return!1;j=!0,ce=!1}if(Se&&!ce)return $||($=new ra),j||dp(l)?n$(l,p,y,E,A,$):one(l,p,Y,y,E,A,$);if(!(y&h)){var Ve=ce&&ln.call(l,"__wrapped__"),nt=he&&ln.call(p,"__wrapped__");if(Ve||nt){var St=Ve?l.value():l,rt=nt?p.value():p;return $||($=new ra),A(St,rt,y,E,$)}}return Se?($||($=new ra),ine(l,p,y,E,A,$)):!1}function kte(l){return or(l)&&vo(l)==un}function q2(l,p,y,E){var A=y.length,$=A,j=!E;if(l==null)return!$;for(l=Cn(l);A--;){var W=y[A];if(j&&W[2]?W[1]!==l[W[0]]:!(W[0]in l))return!1}for(;++A<$;){W=y[A];var Y=W[0],ue=l[Y],ce=W[1];if(j&&W[2]){if(ue===e&&!(Y in l))return!1}else{var he=new ra;if(E)var Se=E(ue,ce,Y,l,p,he);if(!(Se===e?Vg(ce,ue,h|m,E,he):Se))return!1}}return!0}function TP(l){if(!Xn(l)||hne(l))return!1;var p=Du(l)?kee:Xl;return p.test(ff(l))}function Ote(l){return or(l)&&Mo(l)==po}function Mte(l){return or(l)&&vo(l)==qn}function Fte(l){return or(l)&&Ix(l.length)&&!!wn[Mo(l)]}function _P(l){return typeof l=="function"?l:l==null?ci:typeof l=="object"?yt(l)?DP(l[0],l[1]):SP(l):q$(l)}function K2(l){if(!Gg(l))return Lee(l);var p=[];for(var y in Cn(l))ln.call(l,y)&&y!="constructor"&&p.push(y);return p}function Pte(l){if(!Xn(l))return vne(l);var p=Gg(l),y=[];for(var E in l)E=="constructor"&&(p||!ln.call(l,E))||y.push(E);return y}function X2(l,p){return l<p}function IP(l,p){var y=-1,E=ai(l)?re(l.length):[];return Sc(l,function(A,$,j){E[++y]=p(A,$,j)}),E}function SP(l){var p=lD(l);return p.length==1&&p[0][2]?a$(p[0][0],p[0][1]):function(y){return y===l||q2(y,l,p)}}function DP(l,p){return dD(l)&&s$(p)?a$(ja(l),p):function(y){var E=ED(y,l);return E===e&&E===p?CD(y,l):Vg(p,E,h|m)}}function lx(l,p,y,E,A){l!==p&&j2(p,function($,j){if(A||(A=new ra),Xn($))$te(l,p,j,y,lx,E,A);else{var W=E?E(hD(l,j),$,j+"",l,p,A):e;W===e&&(W=$),U2(l,j,W)}},ui)}function $te(l,p,y,E,A,$,j){var W=hD(l,y),Y=hD(p,y),ue=j.get(Y);if(ue){U2(l,y,ue);return}var ce=$?$(W,Y,y+"",l,p,j):e,he=ce===e;if(he){var Se=yt(Y),Ve=!Se&&Rc(Y),nt=!Se&&!Ve&&dp(Y);ce=Y,Se||Ve||nt?yt(W)?ce=W:mr(W)?ce=si(W):Ve?(he=!1,ce=BP(Y,!0)):nt?(he=!1,ce=UP(Y,!0)):ce=[]:zg(Y)||df(Y)?(ce=W,df(W)?ce=$$(W):(!Xn(W)||Du(W))&&(ce=i$(Y))):he=!1}he&&(j.set(Y,ce),A(ce,Y,E,$,j),j.delete(Y)),U2(l,y,ce)}function NP(l,p){var y=l.length;if(y)return p+=p<0?y:0,Su(p,y)?l[p]:e}function AP(l,p,y){p.length?p=Nn(p,function($){return yt($)?function(j){return cf(j,$.length===1?$[0]:$)}:$}):p=[ci];var E=-1;p=Nn(p,ge(et()));var A=IP(l,function($,j,W){var Y=Nn(p,function(ue){return ue($)});return{criteria:Y,index:++E,value:$}});return G(A,function($,j){return Yte($,j,y)})}function Lte(l,p){return RP(l,p,function(y,E){return CD(l,E)})}function RP(l,p,y){for(var E=-1,A=p.length,$={};++E<A;){var j=p[E],W=cf(l,j);y(W,j)&&Bg($,Nc(j,l),W)}return $}function Vte(l){return function(p){return cf(p,l)}}function Y2(l,p,y,E){var A=E?H0:wu,$=-1,j=p.length,W=l;for(l===p&&(p=si(p)),y&&(W=Nn(l,ge(y)));++$<j;)for(var Y=0,ue=p[$],ce=y?y(ue):ue;(Y=A(W,ce,Y,E))>-1;)W!==l&&ex.call(W,Y,1),ex.call(l,Y,1);return l}function kP(l,p){for(var y=l?p.length:0,E=y-1;y--;){var A=p[y];if(y==E||A!==$){var $=A;Su(A)?ex.call(l,A,1):eD(l,A)}}return l}function Z2(l,p){return l+rx(dP()*(p-l+1))}function Bte(l,p,y,E){for(var A=-1,$=kr(nx((p-l)/(y||1)),0),j=re($);$--;)j[E?$:++A]=l,l+=y;return j}function Q2(l,p){var y="";if(!l||p<1||p>Nt)return y;do p%2&&(y+=l),p=rx(p/2),p&&(l+=l);while(p);return y}function At(l,p){return mD(u$(l,p,ci),l+"")}function Ute(l){return mP(pp(l))}function Gte(l,p){var y=pp(l);return bx(y,uf(p,0,y.length))}function Bg(l,p,y,E){if(!Xn(l))return l;p=Nc(p,l);for(var A=-1,$=p.length,j=$-1,W=l;W!=null&&++A<$;){var Y=ja(p[A]),ue=y;if(Y==="__proto__"||Y==="constructor"||Y==="prototype")return l;if(A!=j){var ce=W[Y];ue=E?E(ce,Y,W):e,ue===e&&(ue=Xn(ce)?ce:Su(p[A+1])?[]:{})}Pg(W,Y,ue),W=W[Y]}return l}var OP=ox?function(l,p){return ox.set(l,p),l}:ci,jte=tx?function(l,p){return tx(l,"toString",{configurable:!0,enumerable:!1,value:_D(p),writable:!0})}:ci;function zte(l){return bx(pp(l))}function Is(l,p,y){var E=-1,A=l.length;p<0&&(p=-p>A?0:A+p),y=y>A?A:y,y<0&&(y+=A),A=p>y?0:y-p>>>0,p>>>=0;for(var $=re(A);++E<A;)$[E]=l[E+p];return $}function Hte(l,p){var y;return Sc(l,function(E,A,$){return y=p(E,A,$),!y}),!!y}function fx(l,p,y){var E=0,A=l==null?E:l.length;if(typeof p=="number"&&p===p&&A<=ve){for(;E<A;){var $=E+A>>>1,j=l[$];j!==null&&!Vi(j)&&(y?j<=p:j<p)?E=$+1:A=$}return A}return J2(l,p,ci,y)}function J2(l,p,y,E){var A=0,$=l==null?0:l.length;if($===0)return 0;p=y(p);for(var j=p!==p,W=p===null,Y=Vi(p),ue=p===e;A<$;){var ce=rx((A+$)/2),he=y(l[ce]),Se=he!==e,Ve=he===null,nt=he===he,St=Vi(he);if(j)var rt=E||nt;else ue?rt=nt&&(E||Se):W?rt=nt&&Se&&(E||!Ve):Y?rt=nt&&Se&&!Ve&&(E||!St):Ve||St?rt=!1:rt=E?he<=p:he<p;rt?A=ce+1:$=ce}return yo($,Ce)}function MP(l,p){for(var y=-1,E=l.length,A=0,$=[];++y<E;){var j=l[y],W=p?p(j):j;if(!y||!oa(W,Y)){var Y=W;$[A++]=j===0?0:j}}return $}function FP(l){return typeof l=="number"?l:Vi(l)?pe:+l}function Li(l){if(typeof l=="string")return l;if(yt(l))return Nn(l,Li)+"";if(Vi(l))return pP?pP.call(l):"";var p=l+"";return p=="0"&&1/l==-Me?"-0":p}function Dc(l,p,y){var E=-1,A=Qd,$=l.length,j=!0,W=[],Y=W;if(y)j=!1,A=Jd;else if($>=n){var ue=p?null:nne(l);if(ue)return np(ue);j=!1,A=Fe,Y=new af}else Y=p?[]:W;e:for(;++E<$;){var ce=l[E],he=p?p(ce):ce;if(ce=y||ce!==0?ce:0,j&&he===he){for(var Se=Y.length;Se--;)if(Y[Se]===he)continue e;p&&Y.push(he),W.push(ce)}else A(Y,he,y)||(Y!==W&&Y.push(he),W.push(ce))}return W}function eD(l,p){return p=Nc(p,l),l=c$(l,p),l==null||delete l[ja(Ss(p))]}function PP(l,p,y,E){return Bg(l,p,y(cf(l,p)),E)}function dx(l,p,y,E){for(var A=l.length,$=E?A:-1;(E?$--:++$<A)&&p(l[$],$,l););return y?Is(l,E?0:$,E?$+1:A):Is(l,E?$+1:0,E?A:$)}function $P(l,p){var y=l;return y instanceof Pt&&(y=y.value()),rf(p,function(E,A){return A.func.apply(A.thisArg,Va([E],A.args))},y)}function tD(l,p,y){var E=l.length;if(E<2)return E?Dc(l[0]):[];for(var A=-1,$=re(E);++A<E;)for(var j=l[A],W=-1;++W<E;)W!=A&&($[A]=$g($[A]||j,l[W],p,y));return Dc(ro($,1),p,y)}function LP(l,p,y){for(var E=-1,A=l.length,$=p.length,j={};++E<A;){var W=E<$?p[E]:e;y(j,l[E],W)}return j}function nD(l){return mr(l)?l:[]}function rD(l){return typeof l=="function"?l:ci}function Nc(l,p){return yt(l)?l:dD(l,p)?[l]:p$(on(l))}var Wte=At;function Ac(l,p,y){var E=l.length;return y=y===e?E:y,!p&&y>=E?l:Is(l,p,y)}var VP=Oee||function(l){return pr.clearTimeout(l)};function BP(l,p){if(p)return l.slice();var y=l.length,E=aP?aP(y):new l.constructor(y);return l.copy(E),E}function oD(l){var p=new l.constructor(l.byteLength);return new Q0(p).set(new Q0(l)),p}function qte(l,p){var y=p?oD(l.buffer):l.buffer;return new l.constructor(y,l.byteOffset,l.byteLength)}function Kte(l){var p=new l.constructor(l.source,Kl.exec(l));return p.lastIndex=l.lastIndex,p}function Xte(l){return Fg?Cn(Fg.call(l)):{}}function UP(l,p){var y=p?oD(l.buffer):l.buffer;return new l.constructor(y,l.byteOffset,l.length)}function GP(l,p){if(l!==p){var y=l!==e,E=l===null,A=l===l,$=Vi(l),j=p!==e,W=p===null,Y=p===p,ue=Vi(p);if(!W&&!ue&&!$&&l>p||$&&j&&Y&&!W&&!ue||E&&j&&Y||!y&&Y||!A)return 1;if(!E&&!$&&!ue&&l<p||ue&&y&&A&&!E&&!$||W&&y&&A||!j&&A||!Y)return-1}return 0}function Yte(l,p,y){for(var E=-1,A=l.criteria,$=p.criteria,j=A.length,W=y.length;++E<j;){var Y=GP(A[E],$[E]);if(Y){if(E>=W)return Y;var ue=y[E];return Y*(ue=="desc"?-1:1)}}return l.index-p.index}function jP(l,p,y,E){for(var A=-1,$=l.length,j=y.length,W=-1,Y=p.length,ue=kr($-j,0),ce=re(Y+ue),he=!E;++W<Y;)ce[W]=p[W];for(;++A<j;)(he||A<$)&&(ce[y[A]]=l[A]);for(;ue--;)ce[W++]=l[A++];return ce}function zP(l,p,y,E){for(var A=-1,$=l.length,j=-1,W=y.length,Y=-1,ue=p.length,ce=kr($-W,0),he=re(ce+ue),Se=!E;++A<ce;)he[A]=l[A];for(var Ve=A;++Y<ue;)he[Ve+Y]=p[Y];for(;++j<W;)(Se||A<$)&&(he[Ve+y[j]]=l[A++]);return he}function si(l,p){var y=-1,E=l.length;for(p||(p=re(E));++y<E;)p[y]=l[y];return p}function Ga(l,p,y,E){var A=!y;y||(y={});for(var $=-1,j=p.length;++$<j;){var W=p[$],Y=E?E(y[W],l[W],W,y,l):e;Y===e&&(Y=l[W]),A?Tu(y,W,Y):Pg(y,W,Y)}return y}function Zte(l,p){return Ga(l,fD(l),p)}function Qte(l,p){return Ga(l,r$(l),p)}function px(l,p){return function(y,E){var A=yt(y)?Ng:bte,$=p?p():{};return A(y,l,et(E,2),$)}}function cp(l){return At(function(p,y){var E=-1,A=y.length,$=A>1?y[A-1]:e,j=A>2?y[2]:e;for($=l.length>3&&typeof $=="function"?(A--,$):e,j&&Fo(y[0],y[1],j)&&($=A<3?e:$,A=1),p=Cn(p);++E<A;){var W=y[E];W&&l(p,W,E,$)}return p})}function HP(l,p){return function(y,E){if(y==null)return y;if(!ai(y))return l(y,E);for(var A=y.length,$=p?A:-1,j=Cn(y);(p?$--:++$<A)&&E(j[$],$,j)!==!1;);return y}}function WP(l){return function(p,y,E){for(var A=-1,$=Cn(p),j=E(p),W=j.length;W--;){var Y=j[l?W:++A];if(y($[Y],Y,$)===!1)break}return p}}function Jte(l,p,y){var E=p&v,A=Ug(l);function $(){var j=this&&this!==pr&&this instanceof $?A:l;return j.apply(E?y:this,arguments)}return $}function qP(l){return function(p){p=on(p);var y=hr(p)?na(p):e,E=y?y[0]:p.charAt(0),A=y?Ac(y,1).join(""):p.slice(1);return E[l]()+A}}function lp(l){return function(p){return rf(H$(z$(p).replace(D2,"")),l,"")}}function Ug(l){return function(){var p=arguments;switch(p.length){case 0:return new l;case 1:return new l(p[0]);case 2:return new l(p[0],p[1]);case 3:return new l(p[0],p[1],p[2]);case 4:return new l(p[0],p[1],p[2],p[3]);case 5:return new l(p[0],p[1],p[2],p[3],p[4]);case 6:return new l(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new l(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var y=up(l.prototype),E=l.apply(y,p);return Xn(E)?E:y}}function ene(l,p,y){var E=Ug(l);function A(){for(var $=arguments.length,j=re($),W=$,Y=fp(A);W--;)j[W]=arguments[W];var ue=$<3&&j[0]!==Y&&j[$-1]!==Y?[]:Ba(j,Y);if($-=ue.length,$<y)return QP(l,p,hx,A.placeholder,e,j,ue,e,e,y-$);var ce=this&&this!==pr&&this instanceof A?E:l;return go(ce,this,j)}return A}function KP(l){return function(p,y,E){var A=Cn(p);if(!ai(p)){var $=et(y,3);p=jr(p),y=function(W){return $(A[W],W,A)}}var j=l(p,y,E);return j>-1?A[$?p[j]:j]:e}}function XP(l){return Iu(function(p){var y=p.length,E=y,A=Ts.prototype.thru;for(l&&p.reverse();E--;){var $=p[E];if(typeof $!="function")throw new Cs(o);if(A&&!j&&vx($)=="wrapper")var j=new Ts([],!0)}for(E=j?E:y;++E<y;){$=p[E];var W=vx($),Y=W=="wrapper"?cD($):e;Y&&pD(Y[0])&&Y[1]==(B|C|O|H)&&!Y[4].length&&Y[9]==1?j=j[vx(Y[0])].apply(j,Y[3]):j=$.length==1&&pD($)?j[W]():j.thru($)}return function(){var ue=arguments,ce=ue[0];if(j&&ue.length==1&&yt(ce))return j.plant(ce).value();for(var he=0,Se=y?p[he].apply(this,ue):ce;++he<y;)Se=p[he].call(this,Se);return Se}})}function hx(l,p,y,E,A,$,j,W,Y,ue){var ce=p&B,he=p&v,Se=p&x,Ve=p&(C|D),nt=p&X,St=Se?e:Ug(l);function rt(){for(var Mt=arguments.length,Gt=re(Mt),Bi=Mt;Bi--;)Gt[Bi]=arguments[Bi];if(Ve)var Po=fp(rt),Ui=Et(Gt,Po);if(E&&(Gt=jP(Gt,E,A,Ve)),$&&(Gt=zP(Gt,$,j,Ve)),Mt-=Ui,Ve&&Mt<ue){var gr=Ba(Gt,Po);return QP(l,p,hx,rt.placeholder,y,Gt,gr,W,Y,ue-Mt)}var ia=he?y:this,Au=Se?ia[l]:l;return Mt=Gt.length,W?Gt=bne(Gt,W):nt&&Mt>1&&Gt.reverse(),ce&&Y<Mt&&(Gt.length=Y),this&&this!==pr&&this instanceof rt&&(Au=St||Ug(Au)),Au.apply(ia,Gt)}return rt}function YP(l,p){return function(y,E){return Dte(y,l,p(E),{})}}function mx(l,p){return function(y,E){var A;if(y===e&&E===e)return p;if(y!==e&&(A=y),E!==e){if(A===e)return E;typeof y=="string"||typeof E=="string"?(y=Li(y),E=Li(E)):(y=FP(y),E=FP(E)),A=l(y,E)}return A}}function iD(l){return Iu(function(p){return p=Nn(p,ge(et())),At(function(y){var E=this;return l(p,function(A){return go(A,E,y)})})})}function gx(l,p){p=p===e?" ":Li(p);var y=p.length;if(y<2)return y?Q2(p,l):p;var E=Q2(p,nx(l/op(p)));return hr(p)?Ac(na(E),0,l).join(""):E.slice(0,l)}function tne(l,p,y,E){var A=p&v,$=Ug(l);function j(){for(var W=-1,Y=arguments.length,ue=-1,ce=E.length,he=re(ce+Y),Se=this&&this!==pr&&this instanceof j?$:l;++ue<ce;)he[ue]=E[ue];for(;Y--;)he[ue++]=arguments[++W];return go(Se,A?y:this,he)}return j}function ZP(l){return function(p,y,E){return E&&typeof E!="number"&&Fo(p,y,E)&&(y=E=e),p=Nu(p),y===e?(y=p,p=0):y=Nu(y),E=E===e?p<y?1:-1:Nu(E),Bte(p,y,E,l)}}function yx(l){return function(p,y){return typeof p=="string"&&typeof y=="string"||(p=Ds(p),y=Ds(y)),l(p,y)}}function QP(l,p,y,E,A,$,j,W,Y,ue){var ce=p&C,he=ce?j:e,Se=ce?e:j,Ve=ce?$:e,nt=ce?e:$;p|=ce?O:F,p&=~(ce?F:O),p&b||(p&=~(v|x));var St=[l,p,A,Ve,he,nt,Se,W,Y,ue],rt=y.apply(e,St);return pD(l)&&l$(rt,St),rt.placeholder=E,f$(rt,l,p)}function sD(l){var p=Rr[l];return function(y,E){if(y=Ds(y),E=E==null?0:yo(Ct(E),292),E&&fP(y)){var A=(on(y)+"e").split("e"),$=p(A[0]+"e"+(+A[1]+E));return A=(on($)+"e").split("e"),+(A[0]+"e"+(+A[1]-E))}return p(y)}}var nne=sp&&1/np(new sp([,-0]))[1]==Me?function(l){return new sp(l)}:DD;function JP(l){return function(p){var y=vo(p);return y==un?Es(p):y==qn?F2(p):ee(p,l(p))}}function _u(l,p,y,E,A,$,j,W){var Y=p&x;if(!Y&&typeof l!="function")throw new Cs(o);var ue=E?E.length:0;if(ue||(p&=~(O|F),E=A=e),j=j===e?j:kr(Ct(j),0),W=W===e?W:Ct(W),ue-=A?A.length:0,p&F){var ce=E,he=A;E=A=e}var Se=Y?e:cD(l),Ve=[l,p,y,E,A,ce,he,$,j,W];if(Se&&yne(Ve,Se),l=Ve[0],p=Ve[1],y=Ve[2],E=Ve[3],A=Ve[4],W=Ve[9]=Ve[9]===e?Y?0:l.length:kr(Ve[9]-ue,0),!W&&p&(C|D)&&(p&=~(C|D)),!p||p==v)var nt=Jte(l,p,y);else p==C||p==D?nt=ene(l,p,W):(p==O||p==(v|O))&&!A.length?nt=tne(l,p,y,E):nt=hx.apply(e,Ve);var St=Se?OP:l$;return f$(St(nt,Ve),l,p)}function e$(l,p,y,E){return l===e||oa(l,ip[y])&&!ln.call(E,y)?p:l}function t$(l,p,y,E,A,$){return Xn(l)&&Xn(p)&&($.set(p,l),lx(l,p,e,t$,$),$.delete(p)),l}function rne(l){return zg(l)?e:l}function n$(l,p,y,E,A,$){var j=y&h,W=l.length,Y=p.length;if(W!=Y&&!(j&&Y>W))return!1;var ue=$.get(l),ce=$.get(p);if(ue&&ce)return ue==p&&ce==l;var he=-1,Se=!0,Ve=y&m?new af:e;for($.set(l,p),$.set(p,l);++he<W;){var nt=l[he],St=p[he];if(E)var rt=j?E(St,nt,he,p,l,$):E(nt,St,he,l,p,$);if(rt!==e){if(rt)continue;Se=!1;break}if(Ve){if(!Ag(p,function(Mt,Gt){if(!Fe(Ve,Gt)&&(nt===Mt||A(nt,Mt,y,E,$)))return Ve.push(Gt)})){Se=!1;break}}else if(!(nt===St||A(nt,St,y,E,$))){Se=!1;break}}return $.delete(l),$.delete(p),Se}function one(l,p,y,E,A,$,j){switch(y){case ho:if(l.byteLength!=p.byteLength||l.byteOffset!=p.byteOffset)return!1;l=l.buffer,p=p.buffer;case to:return!(l.byteLength!=p.byteLength||!$(new Q0(l),new Q0(p)));case ut:case dt:case gt:return oa(+l,+p);case bn:return l.name==p.name&&l.message==p.message;case po:case Gr:return l==p+"";case un:var W=Es;case qn:var Y=E&h;if(W||(W=np),l.size!=p.size&&!Y)return!1;var ue=j.get(l);if(ue)return ue==p;E|=m,j.set(l,p);var ce=n$(W(l),W(p),E,A,$,j);return j.delete(l),ce;case wr:if(Fg)return Fg.call(l)==Fg.call(p)}return!1}function ine(l,p,y,E,A,$){var j=y&h,W=aD(l),Y=W.length,ue=aD(p),ce=ue.length;if(Y!=ce&&!j)return!1;for(var he=Y;he--;){var Se=W[he];if(!(j?Se in p:ln.call(p,Se)))return!1}var Ve=$.get(l),nt=$.get(p);if(Ve&&nt)return Ve==p&&nt==l;var St=!0;$.set(l,p),$.set(p,l);for(var rt=j;++he<Y;){Se=W[he];var Mt=l[Se],Gt=p[Se];if(E)var Bi=j?E(Gt,Mt,Se,p,l,$):E(Mt,Gt,Se,l,p,$);if(!(Bi===e?Mt===Gt||A(Mt,Gt,y,E,$):Bi)){St=!1;break}rt||(rt=Se=="constructor")}if(St&&!rt){var Po=l.constructor,Ui=p.constructor;Po!=Ui&&"constructor"in l&&"constructor"in p&&!(typeof Po=="function"&&Po instanceof Po&&typeof Ui=="function"&&Ui instanceof Ui)&&(St=!1)}return $.delete(l),$.delete(p),St}function Iu(l){return mD(u$(l,e,y$),l+"")}function aD(l){return EP(l,jr,fD)}function uD(l){return EP(l,ui,r$)}var cD=ox?function(l){return ox.get(l)}:DD;function vx(l){for(var p=l.name+"",y=ap[p],E=ln.call(ap,p)?y.length:0;E--;){var A=y[E],$=A.func;if($==null||$==l)return A.name}return p}function fp(l){var p=ln.call(P,"placeholder")?P:l;return p.placeholder}function et(){var l=P.iteratee||ID;return l=l===ID?_P:l,arguments.length?l(arguments[0],arguments[1]):l}function xx(l,p){var y=l.__data__;return pne(p)?y[typeof p=="string"?"string":"hash"]:y.map}function lD(l){for(var p=jr(l),y=p.length;y--;){var E=p[y],A=l[E];p[y]=[E,A,s$(A)]}return p}function lf(l,p){var y=ii(l,p);return TP(y)?y:e}function sne(l){var p=ln.call(l,of),y=l[of];try{l[of]=e;var E=!0}catch{}var A=Y0.call(l);return E&&(p?l[of]=y:delete l[of]),A}var fD=L2?function(l){return l==null?[]:(l=Cn(l),La(L2(l),function(p){return cP.call(l,p)}))}:ND,r$=L2?function(l){for(var p=[];l;)Va(p,fD(l)),l=J0(l);return p}:ND,vo=Mo;(V2&&vo(new V2(new ArrayBuffer(1)))!=ho||kg&&vo(new kg)!=un||B2&&vo(B2.resolve())!=Qr||sp&&vo(new sp)!=qn||Og&&vo(new Og)!=eo)&&(vo=function(l){var p=Mo(l),y=p==cn?l.constructor:e,E=y?ff(y):"";if(E)switch(E){case Gee:return ho;case jee:return un;case zee:return Qr;case Hee:return qn;case Wee:return eo}return p});function ane(l,p,y){for(var E=-1,A=y.length;++E<A;){var $=y[E],j=$.size;switch($.type){case"drop":l+=j;break;case"dropRight":p-=j;break;case"take":p=yo(p,l+j);break;case"takeRight":l=kr(l,p-j);break}}return{start:l,end:p}}function une(l){var p=l.match(bu);return p?p[1].split(R0):[]}function o$(l,p,y){p=Nc(p,l);for(var E=-1,A=p.length,$=!1;++E<A;){var j=ja(p[E]);if(!($=l!=null&&y(l,j)))break;l=l[j]}return $||++E!=A?$:(A=l==null?0:l.length,!!A&&Ix(A)&&Su(j,A)&&(yt(l)||df(l)))}function cne(l){var p=l.length,y=new l.constructor(p);return p&&typeof l[0]=="string"&&ln.call(l,"index")&&(y.index=l.index,y.input=l.input),y}function i$(l){return typeof l.constructor=="function"&&!Gg(l)?up(J0(l)):{}}function lne(l,p,y){var E=l.constructor;switch(p){case to:return oD(l);case ut:case dt:return new E(+l);case ho:return qte(l,y);case xs:case Qs:case Js:case mo:case xc:case ka:case ea:case ql:case Bd:return UP(l,y);case un:return new E;case gt:case Gr:return new E(l);case po:return Kte(l);case qn:return new E;case wr:return Xte(l)}}function fne(l,p){var y=p.length;if(!y)return l;var E=y-1;return p[E]=(y>1?"& ":"")+p[E],p=p.join(y>2?", ":" "),l.replace(ta,`{
/* [wrapped with `+p+`] */
`)}function dne(l){return yt(l)||df(l)||!!(lP&&l&&l[lP])}function Su(l,p){var y=typeof l;return p=p??Nt,!!p&&(y=="number"||y!="symbol"&&rg.test(l))&&l>-1&&l%1==0&&l<p}function Fo(l,p,y){if(!Xn(y))return!1;var E=typeof p;return(E=="number"?ai(y)&&Su(p,y.length):E=="string"&&p in y)?oa(y[p],l):!1}function dD(l,p){if(yt(l))return!1;var y=typeof l;return y=="number"||y=="symbol"||y=="boolean"||l==null||Vi(l)?!0:A0.test(l)||!eg.test(l)||p!=null&&l in Cn(p)}function pne(l){var p=typeof l;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?l!=="__proto__":l===null}function pD(l){var p=vx(l),y=P[p];if(typeof y!="function"||!(p in Pt.prototype))return!1;if(l===y)return!0;var E=cD(y);return!!E&&l===E[0]}function hne(l){return!!sP&&sP in l}var mne=K0?Du:AD;function Gg(l){var p=l&&l.constructor,y=typeof p=="function"&&p.prototype||ip;return l===y}function s$(l){return l===l&&!Xn(l)}function a$(l,p){return function(y){return y==null?!1:y[l]===p&&(p!==e||l in Cn(y))}}function gne(l){var p=Tx(l,function(E){return y.size===a&&y.clear(),E}),y=p.cache;return p}function yne(l,p){var y=l[1],E=p[1],A=y|E,$=A<(v|x|B),j=E==B&&y==C||E==B&&y==H&&l[7].length<=p[8]||E==(B|H)&&p[7].length<=p[8]&&y==C;if(!($||j))return l;E&v&&(l[2]=p[2],A|=y&v?0:b);var W=p[3];if(W){var Y=l[3];l[3]=Y?jP(Y,W,p[4]):W,l[4]=Y?Ba(l[3],u):p[4]}return W=p[5],W&&(Y=l[5],l[5]=Y?zP(Y,W,p[6]):W,l[6]=Y?Ba(l[5],u):p[6]),W=p[7],W&&(l[7]=W),E&B&&(l[8]=l[8]==null?p[8]:yo(l[8],p[8])),l[9]==null&&(l[9]=p[9]),l[0]=p[0],l[1]=A,l}function vne(l){var p=[];if(l!=null)for(var y in Cn(l))p.push(y);return p}function xne(l){return Y0.call(l)}function u$(l,p,y){return p=kr(p===e?l.length-1:p,0),function(){for(var E=arguments,A=-1,$=kr(E.length-p,0),j=re($);++A<$;)j[A]=E[p+A];A=-1;for(var W=re(p+1);++A<p;)W[A]=E[A];return W[p]=y(j),go(l,this,W)}}function c$(l,p){return p.length<2?l:cf(l,Is(p,0,-1))}function bne(l,p){for(var y=l.length,E=yo(p.length,y),A=si(l);E--;){var $=p[E];l[E]=Su($,y)?A[$]:e}return l}function hD(l,p){if(!(p==="constructor"&&typeof l[p]=="function")&&p!="__proto__")return l[p]}var l$=d$(OP),jg=Fee||function(l,p){return pr.setTimeout(l,p)},mD=d$(jte);function f$(l,p,y){var E=p+"";return mD(l,fne(E,wne(une(E),y)))}function d$(l){var p=0,y=0;return function(){var E=Vee(),A=ae-(E-y);if(y=E,A>0){if(++p>=J)return arguments[0]}else p=0;return l.apply(e,arguments)}}function bx(l,p){var y=-1,E=l.length,A=E-1;for(p=p===e?E:p;++y<p;){var $=Z2(y,A),j=l[$];l[$]=l[y],l[y]=j}return l.length=p,l}var p$=gne(function(l){var p=[];return l.charCodeAt(0)===46&&p.push(""),l.replace(Ud,function(y,E,A,$){p.push(A?$.replace(tg,"$1"):E||y)}),p});function ja(l){if(typeof l=="string"||Vi(l))return l;var p=l+"";return p=="0"&&1/l==-Me?"-0":p}function ff(l){if(l!=null){try{return X0.call(l)}catch{}try{return l+""}catch{}}return""}function wne(l,p){return Oo(De,function(y){var E="_."+y[0];p&y[1]&&!Qd(l,E)&&l.push(E)}),l.sort()}function h$(l){if(l instanceof Pt)return l.clone();var p=new Ts(l.__wrapped__,l.__chain__);return p.__actions__=si(l.__actions__),p.__index__=l.__index__,p.__values__=l.__values__,p}function Ene(l,p,y){(y?Fo(l,p,y):p===e)?p=1:p=kr(Ct(p),0);var E=l==null?0:l.length;if(!E||p<1)return[];for(var A=0,$=0,j=re(nx(E/p));A<E;)j[$++]=Is(l,A,A+=p);return j}function Cne(l){for(var p=-1,y=l==null?0:l.length,E=0,A=[];++p<y;){var $=l[p];$&&(A[E++]=$)}return A}function Tne(){var l=arguments.length;if(!l)return[];for(var p=re(l-1),y=arguments[0],E=l;E--;)p[E-1]=arguments[E];return Va(yt(y)?si(y):[y],ro(p,1))}var _ne=At(function(l,p){return mr(l)?$g(l,ro(p,1,mr,!0)):[]}),Ine=At(function(l,p){var y=Ss(p);return mr(y)&&(y=e),mr(l)?$g(l,ro(p,1,mr,!0),et(y,2)):[]}),Sne=At(function(l,p){var y=Ss(p);return mr(y)&&(y=e),mr(l)?$g(l,ro(p,1,mr,!0),e,y):[]});function Dne(l,p,y){var E=l==null?0:l.length;return E?(p=y||p===e?1:Ct(p),Is(l,p<0?0:p,E)):[]}function Nne(l,p,y){var E=l==null?0:l.length;return E?(p=y||p===e?1:Ct(p),p=E-p,Is(l,0,p<0?0:p)):[]}function Ane(l,p){return l&&l.length?dx(l,et(p,3),!0,!0):[]}function Rne(l,p){return l&&l.length?dx(l,et(p,3),!0):[]}function kne(l,p,y,E){var A=l==null?0:l.length;return A?(y&&typeof y!="number"&&Fo(l,p,y)&&(y=0,E=A),Tte(l,p,y,E)):[]}function m$(l,p,y){var E=l==null?0:l.length;if(!E)return-1;var A=y==null?0:Ct(y);return A<0&&(A=kr(E+A,0)),tp(l,et(p,3),A)}function g$(l,p,y){var E=l==null?0:l.length;if(!E)return-1;var A=E-1;return y!==e&&(A=Ct(y),A=y<0?kr(E+A,0):yo(A,E-1)),tp(l,et(p,3),A,!0)}function y$(l){var p=l==null?0:l.length;return p?ro(l,1):[]}function One(l){var p=l==null?0:l.length;return p?ro(l,Me):[]}function Mne(l,p){var y=l==null?0:l.length;return y?(p=p===e?1:Ct(p),ro(l,p)):[]}function Fne(l){for(var p=-1,y=l==null?0:l.length,E={};++p<y;){var A=l[p];E[A[0]]=A[1]}return E}function v$(l){return l&&l.length?l[0]:e}function Pne(l,p,y){var E=l==null?0:l.length;if(!E)return-1;var A=y==null?0:Ct(y);return A<0&&(A=kr(E+A,0)),wu(l,p,A)}function $ne(l){var p=l==null?0:l.length;return p?Is(l,0,-1):[]}var Lne=At(function(l){var p=Nn(l,nD);return p.length&&p[0]===l[0]?W2(p):[]}),Vne=At(function(l){var p=Ss(l),y=Nn(l,nD);return p===Ss(y)?p=e:y.pop(),y.length&&y[0]===l[0]?W2(y,et(p,2)):[]}),Bne=At(function(l){var p=Ss(l),y=Nn(l,nD);return p=typeof p=="function"?p:e,p&&y.pop(),y.length&&y[0]===l[0]?W2(y,e,p):[]});function Une(l,p){return l==null?"":$ee.call(l,p)}function Ss(l){var p=l==null?0:l.length;return p?l[p-1]:e}function Gne(l,p,y){var E=l==null?0:l.length;if(!E)return-1;var A=E;return y!==e&&(A=Ct(y),A=A<0?kr(E+A,0):yo(A,E-1)),p===p?rp(l,p,A):tp(l,g,A,!0)}function jne(l,p){return l&&l.length?NP(l,Ct(p)):e}var zne=At(x$);function x$(l,p){return l&&l.length&&p&&p.length?Y2(l,p):l}function Hne(l,p,y){return l&&l.length&&p&&p.length?Y2(l,p,et(y,2)):l}function Wne(l,p,y){return l&&l.length&&p&&p.length?Y2(l,p,e,y):l}var qne=Iu(function(l,p){var y=l==null?0:l.length,E=G2(l,p);return kP(l,Nn(p,function(A){return Su(A,y)?+A:A}).sort(GP)),E});function Kne(l,p){var y=[];if(!(l&&l.length))return y;var E=-1,A=[],$=l.length;for(p=et(p,3);++E<$;){var j=l[E];p(j,E,l)&&(y.push(j),A.push(E))}return kP(l,A),y}function gD(l){return l==null?l:Uee.call(l)}function Xne(l,p,y){var E=l==null?0:l.length;return E?(y&&typeof y!="number"&&Fo(l,p,y)?(p=0,y=E):(p=p==null?0:Ct(p),y=y===e?E:Ct(y)),Is(l,p,y)):[]}function Yne(l,p){return fx(l,p)}function Zne(l,p,y){return J2(l,p,et(y,2))}function Qne(l,p){var y=l==null?0:l.length;if(y){var E=fx(l,p);if(E<y&&oa(l[E],p))return E}return-1}function Jne(l,p){return fx(l,p,!0)}function ere(l,p,y){return J2(l,p,et(y,2),!0)}function tre(l,p){var y=l==null?0:l.length;if(y){var E=fx(l,p,!0)-1;if(oa(l[E],p))return E}return-1}function nre(l){return l&&l.length?MP(l):[]}function rre(l,p){return l&&l.length?MP(l,et(p,2)):[]}function ore(l){var p=l==null?0:l.length;return p?Is(l,1,p):[]}function ire(l,p,y){return l&&l.length?(p=y||p===e?1:Ct(p),Is(l,0,p<0?0:p)):[]}function sre(l,p,y){var E=l==null?0:l.length;return E?(p=y||p===e?1:Ct(p),p=E-p,Is(l,p<0?0:p,E)):[]}function are(l,p){return l&&l.length?dx(l,et(p,3),!1,!0):[]}function ure(l,p){return l&&l.length?dx(l,et(p,3)):[]}var cre=At(function(l){return Dc(ro(l,1,mr,!0))}),lre=At(function(l){var p=Ss(l);return mr(p)&&(p=e),Dc(ro(l,1,mr,!0),et(p,2))}),fre=At(function(l){var p=Ss(l);return p=typeof p=="function"?p:e,Dc(ro(l,1,mr,!0),e,p)});function dre(l){return l&&l.length?Dc(l):[]}function pre(l,p){return l&&l.length?Dc(l,et(p,2)):[]}function hre(l,p){return p=typeof p=="function"?p:e,l&&l.length?Dc(l,e,p):[]}function yD(l){if(!(l&&l.length))return[];var p=0;return l=La(l,function(y){if(mr(y))return p=kr(y.length,p),!0}),q(p,function(y){return Nn(l,I(y))})}function b$(l,p){if(!(l&&l.length))return[];var y=yD(l);return p==null?y:Nn(y,function(E){return go(p,e,E)})}var mre=At(function(l,p){return mr(l)?$g(l,p):[]}),gre=At(function(l){return tD(La(l,mr))}),yre=At(function(l){var p=Ss(l);return mr(p)&&(p=e),tD(La(l,mr),et(p,2))}),vre=At(function(l){var p=Ss(l);return p=typeof p=="function"?p:e,tD(La(l,mr),e,p)}),xre=At(yD);function bre(l,p){return LP(l||[],p||[],Pg)}function wre(l,p){return LP(l||[],p||[],Bg)}var Ere=At(function(l){var p=l.length,y=p>1?l[p-1]:e;return y=typeof y=="function"?(l.pop(),y):e,b$(l,y)});function w$(l){var p=P(l);return p.__chain__=!0,p}function Cre(l,p){return p(l),l}function wx(l,p){return p(l)}var Tre=Iu(function(l){var p=l.length,y=p?l[0]:0,E=this.__wrapped__,A=function($){return G2($,l)};return p>1||this.__actions__.length||!(E instanceof Pt)||!Su(y)?this.thru(A):(E=E.slice(y,+y+(p?1:0)),E.__actions__.push({func:wx,args:[A],thisArg:e}),new Ts(E,this.__chain__).thru(function($){return p&&!$.length&&$.push(e),$}))});function _re(){return w$(this)}function Ire(){return new Ts(this.value(),this.__chain__)}function Sre(){this.__values__===e&&(this.__values__=F$(this.value()));var l=this.__index__>=this.__values__.length,p=l?e:this.__values__[this.__index__++];return{done:l,value:p}}function Dre(){return this}function Nre(l){for(var p,y=this;y instanceof sx;){var E=h$(y);E.__index__=0,E.__values__=e,p?A.__wrapped__=E:p=E;var A=E;y=y.__wrapped__}return A.__wrapped__=l,p}function Are(){var l=this.__wrapped__;if(l instanceof Pt){var p=l;return this.__actions__.length&&(p=new Pt(this)),p=p.reverse(),p.__actions__.push({func:wx,args:[gD],thisArg:e}),new Ts(p,this.__chain__)}return this.thru(gD)}function Rre(){return $P(this.__wrapped__,this.__actions__)}var kre=px(function(l,p,y){ln.call(l,y)?++l[y]:Tu(l,y,1)});function Ore(l,p,y){var E=yt(l)?j0:Cte;return y&&Fo(l,p,y)&&(p=e),E(l,et(p,3))}function Mre(l,p){var y=yt(l)?La:bP;return y(l,et(p,3))}var Fre=KP(m$),Pre=KP(g$);function $re(l,p){return ro(Ex(l,p),1)}function Lre(l,p){return ro(Ex(l,p),Me)}function Vre(l,p,y){return y=y===e?1:Ct(y),ro(Ex(l,p),y)}function E$(l,p){var y=yt(l)?Oo:Sc;return y(l,et(p,3))}function C$(l,p){var y=yt(l)?R2:xP;return y(l,et(p,3))}var Bre=px(function(l,p,y){ln.call(l,y)?l[y].push(p):Tu(l,y,[p])});function Ure(l,p,y,E){l=ai(l)?l:pp(l),y=y&&!E?Ct(y):0;var A=l.length;return y<0&&(y=kr(A+y,0)),Sx(l)?y<=A&&l.indexOf(p,y)>-1:!!A&&wu(l,p,y)>-1}var Gre=At(function(l,p,y){var E=-1,A=typeof p=="function",$=ai(l)?re(l.length):[];return Sc(l,function(j){$[++E]=A?go(p,j,y):Lg(j,p,y)}),$}),jre=px(function(l,p,y){Tu(l,y,p)});function Ex(l,p){var y=yt(l)?Nn:IP;return y(l,et(p,3))}function zre(l,p,y,E){return l==null?[]:(yt(p)||(p=p==null?[]:[p]),y=E?e:y,yt(y)||(y=y==null?[]:[y]),AP(l,p,y))}var Hre=px(function(l,p,y){l[y?0:1].push(p)},function(){return[[],[]]});function Wre(l,p,y){var E=yt(l)?rf:L,A=arguments.length<3;return E(l,et(p,4),y,A,Sc)}function qre(l,p,y){var E=yt(l)?k2:L,A=arguments.length<3;return E(l,et(p,4),y,A,xP)}function Kre(l,p){var y=yt(l)?La:bP;return y(l,_x(et(p,3)))}function Xre(l){var p=yt(l)?mP:Ute;return p(l)}function Yre(l,p,y){(y?Fo(l,p,y):p===e)?p=1:p=Ct(p);var E=yt(l)?vte:Gte;return E(l,p)}function Zre(l){var p=yt(l)?xte:zte;return p(l)}function Qre(l){if(l==null)return 0;if(ai(l))return Sx(l)?op(l):l.length;var p=vo(l);return p==un||p==qn?l.size:K2(l).length}function Jre(l,p,y){var E=yt(l)?Ag:Hte;return y&&Fo(l,p,y)&&(p=e),E(l,et(p,3))}var eoe=At(function(l,p){if(l==null)return[];var y=p.length;return y>1&&Fo(l,p[0],p[1])?p=[]:y>2&&Fo(p[0],p[1],p[2])&&(p=[p[0]]),AP(l,ro(p,1),[])}),Cx=Mee||function(){return pr.Date.now()};function toe(l,p){if(typeof p!="function")throw new Cs(o);return l=Ct(l),function(){if(--l<1)return p.apply(this,arguments)}}function T$(l,p,y){return p=y?e:p,p=l&&p==null?l.length:p,_u(l,B,e,e,e,e,p)}function _$(l,p){var y;if(typeof p!="function")throw new Cs(o);return l=Ct(l),function(){return--l>0&&(y=p.apply(this,arguments)),l<=1&&(p=e),y}}var vD=At(function(l,p,y){var E=v;if(y.length){var A=Ba(y,fp(vD));E|=O}return _u(l,E,p,y,A)}),I$=At(function(l,p,y){var E=v|x;if(y.length){var A=Ba(y,fp(I$));E|=O}return _u(p,E,l,y,A)});function S$(l,p,y){p=y?e:p;var E=_u(l,C,e,e,e,e,e,p);return E.placeholder=S$.placeholder,E}function D$(l,p,y){p=y?e:p;var E=_u(l,D,e,e,e,e,e,p);return E.placeholder=D$.placeholder,E}function N$(l,p,y){var E,A,$,j,W,Y,ue=0,ce=!1,he=!1,Se=!0;if(typeof l!="function")throw new Cs(o);p=Ds(p)||0,Xn(y)&&(ce=!!y.leading,he="maxWait"in y,$=he?kr(Ds(y.maxWait)||0,p):$,Se="trailing"in y?!!y.trailing:Se);function Ve(gr){var ia=E,Au=A;return E=A=e,ue=gr,j=l.apply(Au,ia),j}function nt(gr){return ue=gr,W=jg(Mt,p),ce?Ve(gr):j}function St(gr){var ia=gr-Y,Au=gr-ue,K$=p-ia;return he?yo(K$,$-Au):K$}function rt(gr){var ia=gr-Y,Au=gr-ue;return Y===e||ia>=p||ia<0||he&&Au>=$}function Mt(){var gr=Cx();if(rt(gr))return Gt(gr);W=jg(Mt,St(gr))}function Gt(gr){return W=e,Se&&E?Ve(gr):(E=A=e,j)}function Bi(){W!==e&&VP(W),ue=0,E=Y=A=W=e}function Po(){return W===e?j:Gt(Cx())}function Ui(){var gr=Cx(),ia=rt(gr);if(E=arguments,A=this,Y=gr,ia){if(W===e)return nt(Y);if(he)return VP(W),W=jg(Mt,p),Ve(Y)}return W===e&&(W=jg(Mt,p)),j}return Ui.cancel=Bi,Ui.flush=Po,Ui}var noe=At(function(l,p){return vP(l,1,p)}),roe=At(function(l,p,y){return vP(l,Ds(p)||0,y)});function ooe(l){return _u(l,X)}function Tx(l,p){if(typeof l!="function"||p!=null&&typeof p!="function")throw new Cs(o);var y=function(){var E=arguments,A=p?p.apply(this,E):E[0],$=y.cache;if($.has(A))return $.get(A);var j=l.apply(this,E);return y.cache=$.set(A,j)||$,j};return y.cache=new(Tx.Cache||Cu),y}Tx.Cache=Cu;function _x(l){if(typeof l!="function")throw new Cs(o);return function(){var p=arguments;switch(p.length){case 0:return!l.call(this);case 1:return!l.call(this,p[0]);case 2:return!l.call(this,p[0],p[1]);case 3:return!l.call(this,p[0],p[1],p[2])}return!l.apply(this,p)}}function ioe(l){return _$(2,l)}var soe=Wte(function(l,p){p=p.length==1&&yt(p[0])?Nn(p[0],ge(et())):Nn(ro(p,1),ge(et()));var y=p.length;return At(function(E){for(var A=-1,$=yo(E.length,y);++A<$;)E[A]=p[A].call(this,E[A]);return go(l,this,E)})}),xD=At(function(l,p){var y=Ba(p,fp(xD));return _u(l,O,e,p,y)}),A$=At(function(l,p){var y=Ba(p,fp(A$));return _u(l,F,e,p,y)}),aoe=Iu(function(l,p){return _u(l,H,e,e,e,p)});function uoe(l,p){if(typeof l!="function")throw new Cs(o);return p=p===e?p:Ct(p),At(l,p)}function coe(l,p){if(typeof l!="function")throw new Cs(o);return p=p==null?0:kr(Ct(p),0),At(function(y){var E=y[p],A=Ac(y,0,p);return E&&Va(A,E),go(l,this,A)})}function loe(l,p,y){var E=!0,A=!0;if(typeof l!="function")throw new Cs(o);return Xn(y)&&(E="leading"in y?!!y.leading:E,A="trailing"in y?!!y.trailing:A),N$(l,p,{leading:E,maxWait:p,trailing:A})}function foe(l){return T$(l,1)}function doe(l,p){return xD(rD(p),l)}function poe(){if(!arguments.length)return[];var l=arguments[0];return yt(l)?l:[l]}function hoe(l){return _s(l,d)}function moe(l,p){return p=typeof p=="function"?p:e,_s(l,d,p)}function goe(l){return _s(l,c|d)}function yoe(l,p){return p=typeof p=="function"?p:e,_s(l,c|d,p)}function voe(l,p){return p==null||yP(l,p,jr(p))}function oa(l,p){return l===p||l!==l&&p!==p}var xoe=yx(H2),boe=yx(function(l,p){return l>=p}),df=CP(function(){return arguments}())?CP:function(l){return or(l)&&ln.call(l,"callee")&&!cP.call(l,"callee")},yt=re.isArray,woe=nf?ge(nf):Nte;function ai(l){return l!=null&&Ix(l.length)&&!Du(l)}function mr(l){return or(l)&&ai(l)}function Eoe(l){return l===!0||l===!1||or(l)&&Mo(l)==ut}var Rc=Pee||AD,Coe=_g?ge(_g):Ate;function Toe(l){return or(l)&&l.nodeType===1&&!zg(l)}function _oe(l){if(l==null)return!0;if(ai(l)&&(yt(l)||typeof l=="string"||typeof l.splice=="function"||Rc(l)||dp(l)||df(l)))return!l.length;var p=vo(l);if(p==un||p==qn)return!l.size;if(Gg(l))return!K2(l).length;for(var y in l)if(ln.call(l,y))return!1;return!0}function Ioe(l,p){return Vg(l,p)}function Soe(l,p,y){y=typeof y=="function"?y:e;var E=y?y(l,p):e;return E===e?Vg(l,p,e,y):!!E}function bD(l){if(!or(l))return!1;var p=Mo(l);return p==bn||p==Un||typeof l.message=="string"&&typeof l.name=="string"&&!zg(l)}function Doe(l){return typeof l=="number"&&fP(l)}function Du(l){if(!Xn(l))return!1;var p=Mo(l);return p==Yt||p==pn||p==be||p==fo}function R$(l){return typeof l=="number"&&l==Ct(l)}function Ix(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=Nt}function Xn(l){var p=typeof l;return l!=null&&(p=="object"||p=="function")}function or(l){return l!=null&&typeof l=="object"}var k$=G0?ge(G0):kte;function Noe(l,p){return l===p||q2(l,p,lD(p))}function Aoe(l,p,y){return y=typeof y=="function"?y:e,q2(l,p,lD(p),y)}function Roe(l){return O$(l)&&l!=+l}function koe(l){if(mne(l))throw new pt(r);return TP(l)}function Ooe(l){return l===null}function Moe(l){return l==null}function O$(l){return typeof l=="number"||or(l)&&Mo(l)==gt}function zg(l){if(!or(l)||Mo(l)!=cn)return!1;var p=J0(l);if(p===null)return!0;var y=ln.call(p,"constructor")&&p.constructor;return typeof y=="function"&&y instanceof y&&X0.call(y)==Aee}var wD=Ig?ge(Ig):Ote;function Foe(l){return R$(l)&&l>=-Nt&&l<=Nt}var M$=Sg?ge(Sg):Mte;function Sx(l){return typeof l=="string"||!yt(l)&&or(l)&&Mo(l)==Gr}function Vi(l){return typeof l=="symbol"||or(l)&&Mo(l)==wr}var dp=Dg?ge(Dg):Fte;function Poe(l){return l===e}function $oe(l){return or(l)&&vo(l)==eo}function Loe(l){return or(l)&&Mo(l)==Dr}var Voe=yx(X2),Boe=yx(function(l,p){return l<=p});function F$(l){if(!l)return[];if(ai(l))return Sx(l)?na(l):si(l);if(Rg&&l[Rg])return Ar(l[Rg]());var p=vo(l),y=p==un?Es:p==qn?np:pp;return y(l)}function Nu(l){if(!l)return l===0?l:0;if(l=Ds(l),l===Me||l===-Me){var p=l<0?-1:1;return p*oe}return l===l?l:0}function Ct(l){var p=Nu(l),y=p%1;return p===p?y?p-y:p:0}function P$(l){return l?uf(Ct(l),0,ie):0}function Ds(l){if(typeof l=="number")return l;if(Vi(l))return pe;if(Xn(l)){var p=typeof l.valueOf=="function"?l.valueOf():l;l=Xn(p)?p+"":p}if(typeof l!="string")return l===0?l:+l;l=me(l);var y=Gd.test(l);return y||k0.test(l)?U0(l.slice(2),y?2:8):ng.test(l)?pe:+l}function $$(l){return Ga(l,ui(l))}function Uoe(l){return l?uf(Ct(l),-Nt,Nt):l===0?l:0}function on(l){return l==null?"":Li(l)}var Goe=cp(function(l,p){if(Gg(p)||ai(p)){Ga(p,jr(p),l);return}for(var y in p)ln.call(p,y)&&Pg(l,y,p[y])}),L$=cp(function(l,p){Ga(p,ui(p),l)}),Dx=cp(function(l,p,y,E){Ga(p,ui(p),l,E)}),joe=cp(function(l,p,y,E){Ga(p,jr(p),l,E)}),zoe=Iu(G2);function Hoe(l,p){var y=up(l);return p==null?y:gP(y,p)}var Woe=At(function(l,p){l=Cn(l);var y=-1,E=p.length,A=E>2?p[2]:e;for(A&&Fo(p[0],p[1],A)&&(E=1);++y<E;)for(var $=p[y],j=ui($),W=-1,Y=j.length;++W<Y;){var ue=j[W],ce=l[ue];(ce===e||oa(ce,ip[ue])&&!ln.call(l,ue))&&(l[ue]=$[ue])}return l}),qoe=At(function(l){return l.push(e,t$),go(V$,e,l)});function Koe(l,p){return z0(l,et(p,3),Ua)}function Xoe(l,p){return z0(l,et(p,3),z2)}function Yoe(l,p){return l==null?l:j2(l,et(p,3),ui)}function Zoe(l,p){return l==null?l:wP(l,et(p,3),ui)}function Qoe(l,p){return l&&Ua(l,et(p,3))}function Joe(l,p){return l&&z2(l,et(p,3))}function eie(l){return l==null?[]:cx(l,jr(l))}function tie(l){return l==null?[]:cx(l,ui(l))}function ED(l,p,y){var E=l==null?e:cf(l,p);return E===e?y:E}function nie(l,p){return l!=null&&o$(l,p,_te)}function CD(l,p){return l!=null&&o$(l,p,Ite)}var rie=YP(function(l,p,y){p!=null&&typeof p.toString!="function"&&(p=Y0.call(p)),l[p]=y},_D(ci)),oie=YP(function(l,p,y){p!=null&&typeof p.toString!="function"&&(p=Y0.call(p)),ln.call(l,p)?l[p].push(y):l[p]=[y]},et),iie=At(Lg);function jr(l){return ai(l)?hP(l):K2(l)}function ui(l){return ai(l)?hP(l,!0):Pte(l)}function sie(l,p){var y={};return p=et(p,3),Ua(l,function(E,A,$){Tu(y,p(E,A,$),E)}),y}function aie(l,p){var y={};return p=et(p,3),Ua(l,function(E,A,$){Tu(y,A,p(E,A,$))}),y}var uie=cp(function(l,p,y){lx(l,p,y)}),V$=cp(function(l,p,y,E){lx(l,p,y,E)}),cie=Iu(function(l,p){var y={};if(l==null)return y;var E=!1;p=Nn(p,function($){return $=Nc($,l),E||(E=$.length>1),$}),Ga(l,uD(l),y),E&&(y=_s(y,c|f|d,rne));for(var A=p.length;A--;)eD(y,p[A]);return y});function lie(l,p){return B$(l,_x(et(p)))}var fie=Iu(function(l,p){return l==null?{}:Lte(l,p)});function B$(l,p){if(l==null)return{};var y=Nn(uD(l),function(E){return[E]});return p=et(p),RP(l,y,function(E,A){return p(E,A[0])})}function die(l,p,y){p=Nc(p,l);var E=-1,A=p.length;for(A||(A=1,l=e);++E<A;){var $=l==null?e:l[ja(p[E])];$===e&&(E=A,$=y),l=Du($)?$.call(l):$}return l}function pie(l,p,y){return l==null?l:Bg(l,p,y)}function hie(l,p,y,E){return E=typeof E=="function"?E:e,l==null?l:Bg(l,p,y,E)}var U$=JP(jr),G$=JP(ui);function mie(l,p,y){var E=yt(l),A=E||Rc(l)||dp(l);if(p=et(p,4),y==null){var $=l&&l.constructor;A?y=E?new $:[]:Xn(l)?y=Du($)?up(J0(l)):{}:y={}}return(A?Oo:Ua)(l,function(j,W,Y){return p(y,j,W,Y)}),y}function gie(l,p){return l==null?!0:eD(l,p)}function yie(l,p,y){return l==null?l:PP(l,p,rD(y))}function vie(l,p,y,E){return E=typeof E=="function"?E:e,l==null?l:PP(l,p,rD(y),E)}function pp(l){return l==null?[]:Ye(l,jr(l))}function xie(l){return l==null?[]:Ye(l,ui(l))}function bie(l,p,y){return y===e&&(y=p,p=e),y!==e&&(y=Ds(y),y=y===y?y:0),p!==e&&(p=Ds(p),p=p===p?p:0),uf(Ds(l),p,y)}function wie(l,p,y){return p=Nu(p),y===e?(y=p,p=0):y=Nu(y),l=Ds(l),Ste(l,p,y)}function Eie(l,p,y){if(y&&typeof y!="boolean"&&Fo(l,p,y)&&(p=y=e),y===e&&(typeof p=="boolean"?(y=p,p=e):typeof l=="boolean"&&(y=l,l=e)),l===e&&p===e?(l=0,p=1):(l=Nu(l),p===e?(p=l,l=0):p=Nu(p)),l>p){var E=l;l=p,p=E}if(y||l%1||p%1){var A=dP();return yo(l+A*(p-l+Tc("1e-"+((A+"").length-1))),p)}return Z2(l,p)}var Cie=lp(function(l,p,y){return p=p.toLowerCase(),l+(y?j$(p):p)});function j$(l){return TD(on(l).toLowerCase())}function z$(l){return l=on(l),l&&l.replace(og,En).replace(N2,"")}function Tie(l,p,y){l=on(l),p=Li(p);var E=l.length;y=y===e?E:uf(Ct(y),0,E);var A=y;return y-=p.length,y>=0&&l.slice(y,A)==p}function _ie(l){return l=on(l),l&&D0.test(l)?l.replace(bc,mn):l}function Iie(l){return l=on(l),l&&b2.test(l)?l.replace(wc,"\\$&"):l}var Sie=lp(function(l,p,y){return l+(y?"-":"")+p.toLowerCase()}),Die=lp(function(l,p,y){return l+(y?" ":"")+p.toLowerCase()}),Nie=qP("toLowerCase");function Aie(l,p,y){l=on(l),p=Ct(p);var E=p?op(l):0;if(!p||E>=p)return l;var A=(p-E)/2;return gx(rx(A),y)+l+gx(nx(A),y)}function Rie(l,p,y){l=on(l),p=Ct(p);var E=p?op(l):0;return p&&E<p?l+gx(p-E,y):l}function kie(l,p,y){l=on(l),p=Ct(p);var E=p?op(l):0;return p&&E<p?gx(p-E,y)+l:l}function Oie(l,p,y){return y||p==null?p=0:p&&(p=+p),Bee(on(l).replace(Fa,""),p||0)}function Mie(l,p,y){return(y?Fo(l,p,y):p===e)?p=1:p=Ct(p),Q2(on(l),p)}function Fie(){var l=arguments,p=on(l[0]);return l.length<3?p:p.replace(l[1],l[2])}var Pie=lp(function(l,p,y){return l+(y?"_":"")+p.toLowerCase()});function $ie(l,p,y){return y&&typeof y!="number"&&Fo(l,p,y)&&(p=y=e),y=y===e?ie:y>>>0,y?(l=on(l),l&&(typeof p=="string"||p!=null&&!wD(p))&&(p=Li(p),!p&&hr(l))?Ac(na(l),0,y):l.split(p,y)):[]}var Lie=lp(function(l,p,y){return l+(y?" ":"")+TD(p)});function Vie(l,p,y){return l=on(l),y=y==null?0:uf(Ct(y),0,l.length),p=Li(p),l.slice(y,y+p.length)==p}function Bie(l,p,y){var E=P.templateSettings;y&&Fo(l,p,y)&&(p=e),l=on(l),p=Dx({},p,E,e$);var A=Dx({},p.imports,E.imports,e$),$=jr(A),j=Ye(A,$),W,Y,ue=0,ce=p.interpolate||Yl,he="__p += '",Se=$2((p.escape||Yl).source+"|"+ce.source+"|"+(ce===Ma?E2:Yl).source+"|"+(p.evaluate||Yl).source+"|$","g"),Ve="//# sourceURL="+(ln.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$i+"]")+`
`;l.replace(Se,function(rt,Mt,Gt,Bi,Po,Ui){return Gt||(Gt=Bi),he+=l.slice(ue,Ui).replace(Fi,Nr),Mt&&(W=!0,he+=`' +
__e(`+Mt+`) +
'`),Po&&(Y=!0,he+=`';
`+Po+`;
__p += '`),Gt&&(he+=`' +
((__t = (`+Gt+`)) == null ? '' : __t) +
'`),ue=Ui+rt.length,rt}),he+=`';
`;var nt=ln.call(p,"variable")&&p.variable;if(!nt)he=`with (obj) {
`+he+`
}
`;else if(bs.test(nt))throw new pt(i);he=(Y?he.replace(x2,""):he).replace(I0,"$1").replace(Qm,"$1;"),he="function("+(nt||"obj")+`) {
`+(nt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(W?", __e = _.escape":"")+(Y?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+he+`return __p
}`;var St=W$(function(){return en($,Ve+"return "+he).apply(e,j)});if(St.source=he,bD(St))throw St;return St}function Uie(l){return on(l).toLowerCase()}function Gie(l){return on(l).toUpperCase()}function jie(l,p,y){if(l=on(l),l&&(y||p===e))return me(l);if(!l||!(p=Li(p)))return l;var E=na(l),A=na(p),$=Ie(E,A),j=Je(E,A)+1;return Ac(E,$,j).join("")}function zie(l,p,y){if(l=on(l),l&&(y||p===e))return l.slice(0,iP(l)+1);if(!l||!(p=Li(p)))return l;var E=na(l),A=Je(E,na(p))+1;return Ac(E,0,A).join("")}function Hie(l,p,y){if(l=on(l),l&&(y||p===e))return l.replace(Fa,"");if(!l||!(p=Li(p)))return l;var E=na(l),A=Ie(E,na(p));return Ac(E,A).join("")}function Wie(l,p){var y=Z,E=te;if(Xn(p)){var A="separator"in p?p.separator:A;y="length"in p?Ct(p.length):y,E="omission"in p?Li(p.omission):E}l=on(l);var $=l.length;if(hr(l)){var j=na(l);$=j.length}if(y>=$)return l;var W=y-op(E);if(W<1)return E;var Y=j?Ac(j,0,W).join(""):l.slice(0,W);if(A===e)return Y+E;if(j&&(W+=Y.length-W),wD(A)){if(l.slice(W).search(A)){var ue,ce=Y;for(A.global||(A=$2(A.source,on(Kl.exec(A))+"g")),A.lastIndex=0;ue=A.exec(ce);)var he=ue.index;Y=Y.slice(0,he===e?W:he)}}else if(l.indexOf(Li(A),W)!=W){var Se=Y.lastIndexOf(A);Se>-1&&(Y=Y.slice(0,Se))}return Y+E}function qie(l){return l=on(l),l&&S0.test(l)?l.replace(Oa,Eee):l}var Kie=lp(function(l,p,y){return l+(y?" ":"")+p.toUpperCase()}),TD=qP("toUpperCase");function H$(l,p,y){return l=on(l),p=y?e:p,p===e?Ht(l)?_ee(l):M2(l):l.match(p)||[]}var W$=At(function(l,p){try{return go(l,e,p)}catch(y){return bD(y)?y:new pt(y)}}),Xie=Iu(function(l,p){return Oo(p,function(y){y=ja(y),Tu(l,y,vD(l[y],l))}),l});function Yie(l){var p=l==null?0:l.length,y=et();return l=p?Nn(l,function(E){if(typeof E[1]!="function")throw new Cs(o);return[y(E[0]),E[1]]}):[],At(function(E){for(var A=-1;++A<p;){var $=l[A];if(go($[0],this,E))return go($[1],this,E)}})}function Zie(l){return Ete(_s(l,c))}function _D(l){return function(){return l}}function Qie(l,p){return l==null||l!==l?p:l}var Jie=XP(),ese=XP(!0);function ci(l){return l}function ID(l){return _P(typeof l=="function"?l:_s(l,c))}function tse(l){return SP(_s(l,c))}function nse(l,p){return DP(l,_s(p,c))}var rse=At(function(l,p){return function(y){return Lg(y,l,p)}}),ose=At(function(l,p){return function(y){return Lg(l,y,p)}});function SD(l,p,y){var E=jr(p),A=cx(p,E);y==null&&!(Xn(p)&&(A.length||!E.length))&&(y=p,p=l,l=this,A=cx(p,jr(p)));var $=!(Xn(y)&&"chain"in y)||!!y.chain,j=Du(l);return Oo(A,function(W){var Y=p[W];l[W]=Y,j&&(l.prototype[W]=function(){var ue=this.__chain__;if($||ue){var ce=l(this.__wrapped__),he=ce.__actions__=si(this.__actions__);return he.push({func:Y,args:arguments,thisArg:l}),ce.__chain__=ue,ce}return Y.apply(l,Va([this.value()],arguments))})}),l}function ise(){return pr._===this&&(pr._=Ree),this}function DD(){}function sse(l){return l=Ct(l),At(function(p){return NP(p,l)})}var ase=iD(Nn),use=iD(j0),cse=iD(Ag);function q$(l){return dD(l)?I(ja(l)):Vte(l)}function lse(l){return function(p){return l==null?e:cf(l,p)}}var fse=ZP(),dse=ZP(!0);function ND(){return[]}function AD(){return!1}function pse(){return{}}function hse(){return""}function mse(){return!0}function gse(l,p){if(l=Ct(l),l<1||l>Nt)return[];var y=ie,E=yo(l,ie);p=et(p),l-=ie;for(var A=q(E,p);++y<l;)p(y);return A}function yse(l){return yt(l)?Nn(l,ja):Vi(l)?[l]:si(p$(on(l)))}function vse(l){var p=++Nee;return on(l)+p}var xse=mx(function(l,p){return l+p},0),bse=sD("ceil"),wse=mx(function(l,p){return l/p},1),Ese=sD("floor");function Cse(l){return l&&l.length?ux(l,ci,H2):e}function Tse(l,p){return l&&l.length?ux(l,et(p,2),H2):e}function _se(l){return w(l,ci)}function Ise(l,p){return w(l,et(p,2))}function Sse(l){return l&&l.length?ux(l,ci,X2):e}function Dse(l,p){return l&&l.length?ux(l,et(p,2),X2):e}var Nse=mx(function(l,p){return l*p},1),Ase=sD("round"),Rse=mx(function(l,p){return l-p},0);function kse(l){return l&&l.length?V(l,ci):0}function Ose(l,p){return l&&l.length?V(l,et(p,2)):0}return P.after=toe,P.ary=T$,P.assign=Goe,P.assignIn=L$,P.assignInWith=Dx,P.assignWith=joe,P.at=zoe,P.before=_$,P.bind=vD,P.bindAll=Xie,P.bindKey=I$,P.castArray=poe,P.chain=w$,P.chunk=Ene,P.compact=Cne,P.concat=Tne,P.cond=Yie,P.conforms=Zie,P.constant=_D,P.countBy=kre,P.create=Hoe,P.curry=S$,P.curryRight=D$,P.debounce=N$,P.defaults=Woe,P.defaultsDeep=qoe,P.defer=noe,P.delay=roe,P.difference=_ne,P.differenceBy=Ine,P.differenceWith=Sne,P.drop=Dne,P.dropRight=Nne,P.dropRightWhile=Ane,P.dropWhile=Rne,P.fill=kne,P.filter=Mre,P.flatMap=$re,P.flatMapDeep=Lre,P.flatMapDepth=Vre,P.flatten=y$,P.flattenDeep=One,P.flattenDepth=Mne,P.flip=ooe,P.flow=Jie,P.flowRight=ese,P.fromPairs=Fne,P.functions=eie,P.functionsIn=tie,P.groupBy=Bre,P.initial=$ne,P.intersection=Lne,P.intersectionBy=Vne,P.intersectionWith=Bne,P.invert=rie,P.invertBy=oie,P.invokeMap=Gre,P.iteratee=ID,P.keyBy=jre,P.keys=jr,P.keysIn=ui,P.map=Ex,P.mapKeys=sie,P.mapValues=aie,P.matches=tse,P.matchesProperty=nse,P.memoize=Tx,P.merge=uie,P.mergeWith=V$,P.method=rse,P.methodOf=ose,P.mixin=SD,P.negate=_x,P.nthArg=sse,P.omit=cie,P.omitBy=lie,P.once=ioe,P.orderBy=zre,P.over=ase,P.overArgs=soe,P.overEvery=use,P.overSome=cse,P.partial=xD,P.partialRight=A$,P.partition=Hre,P.pick=fie,P.pickBy=B$,P.property=q$,P.propertyOf=lse,P.pull=zne,P.pullAll=x$,P.pullAllBy=Hne,P.pullAllWith=Wne,P.pullAt=qne,P.range=fse,P.rangeRight=dse,P.rearg=aoe,P.reject=Kre,P.remove=Kne,P.rest=uoe,P.reverse=gD,P.sampleSize=Yre,P.set=pie,P.setWith=hie,P.shuffle=Zre,P.slice=Xne,P.sortBy=eoe,P.sortedUniq=nre,P.sortedUniqBy=rre,P.split=$ie,P.spread=coe,P.tail=ore,P.take=ire,P.takeRight=sre,P.takeRightWhile=are,P.takeWhile=ure,P.tap=Cre,P.throttle=loe,P.thru=wx,P.toArray=F$,P.toPairs=U$,P.toPairsIn=G$,P.toPath=yse,P.toPlainObject=$$,P.transform=mie,P.unary=foe,P.union=cre,P.unionBy=lre,P.unionWith=fre,P.uniq=dre,P.uniqBy=pre,P.uniqWith=hre,P.unset=gie,P.unzip=yD,P.unzipWith=b$,P.update=yie,P.updateWith=vie,P.values=pp,P.valuesIn=xie,P.without=mre,P.words=H$,P.wrap=doe,P.xor=gre,P.xorBy=yre,P.xorWith=vre,P.zip=xre,P.zipObject=bre,P.zipObjectDeep=wre,P.zipWith=Ere,P.entries=U$,P.entriesIn=G$,P.extend=L$,P.extendWith=Dx,SD(P,P),P.add=xse,P.attempt=W$,P.camelCase=Cie,P.capitalize=j$,P.ceil=bse,P.clamp=bie,P.clone=hoe,P.cloneDeep=goe,P.cloneDeepWith=yoe,P.cloneWith=moe,P.conformsTo=voe,P.deburr=z$,P.defaultTo=Qie,P.divide=wse,P.endsWith=Tie,P.eq=oa,P.escape=_ie,P.escapeRegExp=Iie,P.every=Ore,P.find=Fre,P.findIndex=m$,P.findKey=Koe,P.findLast=Pre,P.findLastIndex=g$,P.findLastKey=Xoe,P.floor=Ese,P.forEach=E$,P.forEachRight=C$,P.forIn=Yoe,P.forInRight=Zoe,P.forOwn=Qoe,P.forOwnRight=Joe,P.get=ED,P.gt=xoe,P.gte=boe,P.has=nie,P.hasIn=CD,P.head=v$,P.identity=ci,P.includes=Ure,P.indexOf=Pne,P.inRange=wie,P.invoke=iie,P.isArguments=df,P.isArray=yt,P.isArrayBuffer=woe,P.isArrayLike=ai,P.isArrayLikeObject=mr,P.isBoolean=Eoe,P.isBuffer=Rc,P.isDate=Coe,P.isElement=Toe,P.isEmpty=_oe,P.isEqual=Ioe,P.isEqualWith=Soe,P.isError=bD,P.isFinite=Doe,P.isFunction=Du,P.isInteger=R$,P.isLength=Ix,P.isMap=k$,P.isMatch=Noe,P.isMatchWith=Aoe,P.isNaN=Roe,P.isNative=koe,P.isNil=Moe,P.isNull=Ooe,P.isNumber=O$,P.isObject=Xn,P.isObjectLike=or,P.isPlainObject=zg,P.isRegExp=wD,P.isSafeInteger=Foe,P.isSet=M$,P.isString=Sx,P.isSymbol=Vi,P.isTypedArray=dp,P.isUndefined=Poe,P.isWeakMap=$oe,P.isWeakSet=Loe,P.join=Une,P.kebabCase=Sie,P.last=Ss,P.lastIndexOf=Gne,P.lowerCase=Die,P.lowerFirst=Nie,P.lt=Voe,P.lte=Boe,P.max=Cse,P.maxBy=Tse,P.mean=_se,P.meanBy=Ise,P.min=Sse,P.minBy=Dse,P.stubArray=ND,P.stubFalse=AD,P.stubObject=pse,P.stubString=hse,P.stubTrue=mse,P.multiply=Nse,P.nth=jne,P.noConflict=ise,P.noop=DD,P.now=Cx,P.pad=Aie,P.padEnd=Rie,P.padStart=kie,P.parseInt=Oie,P.random=Eie,P.reduce=Wre,P.reduceRight=qre,P.repeat=Mie,P.replace=Fie,P.result=die,P.round=Ase,P.runInContext=K,P.sample=Xre,P.size=Qre,P.snakeCase=Pie,P.some=Jre,P.sortedIndex=Yne,P.sortedIndexBy=Zne,P.sortedIndexOf=Qne,P.sortedLastIndex=Jne,P.sortedLastIndexBy=ere,P.sortedLastIndexOf=tre,P.startCase=Lie,P.startsWith=Vie,P.subtract=Rse,P.sum=kse,P.sumBy=Ose,P.template=Bie,P.times=gse,P.toFinite=Nu,P.toInteger=Ct,P.toLength=P$,P.toLower=Uie,P.toNumber=Ds,P.toSafeInteger=Uoe,P.toString=on,P.toUpper=Gie,P.trim=jie,P.trimEnd=zie,P.trimStart=Hie,P.truncate=Wie,P.unescape=qie,P.uniqueId=vse,P.upperCase=Kie,P.upperFirst=TD,P.each=E$,P.eachRight=C$,P.first=v$,SD(P,function(){var l={};return Ua(P,function(p,y){ln.call(P.prototype,y)||(l[y]=p)}),l}(),{chain:!1}),P.VERSION=t,Oo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){P[l].placeholder=P}),Oo(["drop","take"],function(l,p){Pt.prototype[l]=function(y){y=y===e?1:kr(Ct(y),0);var E=this.__filtered__&&!p?new Pt(this):this.clone();return E.__filtered__?E.__takeCount__=yo(y,E.__takeCount__):E.__views__.push({size:yo(y,ie),type:l+(E.__dir__<0?"Right":"")}),E},Pt.prototype[l+"Right"]=function(y){return this.reverse()[l](y).reverse()}}),Oo(["filter","map","takeWhile"],function(l,p){var y=p+1,E=y==ye||y==Ke;Pt.prototype[l]=function(A){var $=this.clone();return $.__iteratees__.push({iteratee:et(A,3),type:y}),$.__filtered__=$.__filtered__||E,$}}),Oo(["head","last"],function(l,p){var y="take"+(p?"Right":"");Pt.prototype[l]=function(){return this[y](1).value()[0]}}),Oo(["initial","tail"],function(l,p){var y="drop"+(p?"":"Right");Pt.prototype[l]=function(){return this.__filtered__?new Pt(this):this[y](1)}}),Pt.prototype.compact=function(){return this.filter(ci)},Pt.prototype.find=function(l){return this.filter(l).head()},Pt.prototype.findLast=function(l){return this.reverse().find(l)},Pt.prototype.invokeMap=At(function(l,p){return typeof l=="function"?new Pt(this):this.map(function(y){return Lg(y,l,p)})}),Pt.prototype.reject=function(l){return this.filter(_x(et(l)))},Pt.prototype.slice=function(l,p){l=Ct(l);var y=this;return y.__filtered__&&(l>0||p<0)?new Pt(y):(l<0?y=y.takeRight(-l):l&&(y=y.drop(l)),p!==e&&(p=Ct(p),y=p<0?y.dropRight(-p):y.take(p-l)),y)},Pt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Pt.prototype.toArray=function(){return this.take(ie)},Ua(Pt.prototype,function(l,p){var y=/^(?:filter|find|map|reject)|While$/.test(p),E=/^(?:head|last)$/.test(p),A=P[E?"take"+(p=="last"?"Right":""):p],$=E||/^find/.test(p);A&&(P.prototype[p]=function(){var j=this.__wrapped__,W=E?[1]:arguments,Y=j instanceof Pt,ue=W[0],ce=Y||yt(j),he=function(Mt){var Gt=A.apply(P,Va([Mt],W));return E&&Se?Gt[0]:Gt};ce&&y&&typeof ue=="function"&&ue.length!=1&&(Y=ce=!1);var Se=this.__chain__,Ve=!!this.__actions__.length,nt=$&&!Se,St=Y&&!Ve;if(!$&&ce){j=St?j:new Pt(this);var rt=l.apply(j,W);return rt.__actions__.push({func:wx,args:[he],thisArg:e}),new Ts(rt,Se)}return nt&&St?l.apply(this,W):(rt=this.thru(he),nt?E?rt.value()[0]:rt.value():rt)})}),Oo(["pop","push","shift","sort","splice","unshift"],function(l){var p=q0[l],y=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",E=/^(?:pop|shift)$/.test(l);P.prototype[l]=function(){var A=arguments;if(E&&!this.__chain__){var $=this.value();return p.apply(yt($)?$:[],A)}return this[y](function(j){return p.apply(yt(j)?j:[],A)})}}),Ua(Pt.prototype,function(l,p){var y=P[p];if(y){var E=y.name+"";ln.call(ap,E)||(ap[E]=[]),ap[E].push({name:p,func:y})}}),ap[hx(e,x).name]=[{name:"wrapper",func:e}],Pt.prototype.clone=qee,Pt.prototype.reverse=Kee,Pt.prototype.value=Xee,P.prototype.at=Tre,P.prototype.chain=_re,P.prototype.commit=Ire,P.prototype.next=Sre,P.prototype.plant=Nre,P.prototype.reverse=Are,P.prototype.toJSON=P.prototype.valueOf=P.prototype.value=Rre,P.prototype.first=P.prototype.head,Rg&&(P.prototype[Rg]=Dre),P},_c=Iee();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(pr._=_c,define(function(){return _c})):$a?(($a.exports=_c)._=_c,Pa._=_c):pr._=_c}).call(dh)});var sl=$o((Zy,Lk)=>{"use strict";(function(e,t){typeof Zy=="object"&&typeof Lk=="object"?Lk.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Zy=="object"?Zy.fp=t():e.fp=t()})(typeof self<"u"?self:Zy,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(r,o,i){n.o(r,o)||Object.defineProperty(r,o,{enumerable:!0,get:i})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,o){if(1&o&&(r=n(r)),8&o||4&o&&typeof r=="object"&&r&&r.__esModule)return r;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),2&o&&typeof r!="string")for(var s in r)n.d(i,s,function(a){return r[a]}.bind(null,s));return i},n.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(o,"a",o),o},n.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r={};function o(oe){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(oe)}n.r(r),n.d(r,"VictoryGesture",function(){return ae}),n.d(r,"ThumbsUpGesture",function(){return Nt});var i={Thumb:0,Index:1,Middle:2,Ring:3,Pinky:4,all:[0,1,2,3,4],nameMapping:{0:"Thumb",1:"Index",2:"Middle",3:"Ring",4:"Pinky"},pointsMapping:{0:[[0,1],[1,2],[2,3],[3,4]],1:[[0,5],[5,6],[6,7],[7,8]],2:[[0,9],[9,10],[10,11],[11,12]],3:[[0,13],[13,14],[14,15],[15,16]],4:[[0,17],[17,18],[18,19],[19,20]]},getName:function(oe){return o(this.nameMapping[oe])!==void 0&&this.nameMapping[oe]},getPoints:function(oe){return o(this.pointsMapping[oe])!==void 0&&this.pointsMapping[oe]}},s={NoCurl:0,HalfCurl:1,FullCurl:2,nameMapping:{0:"No Curl",1:"Half Curl",2:"Full Curl"},getName:function(oe){return o(this.nameMapping[oe])!==void 0&&this.nameMapping[oe]}},a={VerticalUp:0,VerticalDown:1,HorizontalLeft:2,HorizontalRight:3,DiagonalUpRight:4,DiagonalUpLeft:5,DiagonalDownRight:6,DiagonalDownLeft:7,nameMapping:{0:"Vertical Up",1:"Vertical Down",2:"Horizontal Left",3:"Horizontal Right",4:"Diagonal Up Right",5:"Diagonal Up Left",6:"Diagonal Down Right",7:"Diagonal Down Left"},getName:function(oe){return o(this.nameMapping[oe])!==void 0&&this.nameMapping[oe]}};function u(oe,pe){var ie=typeof Symbol<"u"&&oe[Symbol.iterator]||oe["@@iterator"];if(!ie){if(Array.isArray(oe)||(ie=function(be,ut){if(be){if(typeof be=="string")return c(be,ut);var dt=Object.prototype.toString.call(be).slice(8,-1);if(dt==="Object"&&be.constructor&&(dt=be.constructor.name),dt==="Map"||dt==="Set")return Array.from(be);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return c(be,ut)}}(oe))||pe&&oe&&typeof oe.length=="number"){ie&&(oe=ie);var Ce=0,ve=function(){};return{s:ve,n:function(){return Ce>=oe.length?{done:!0}:{done:!1,value:oe[Ce++]}},e:function(be){throw be},f:ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var De,Te=!0,it=!1;return{s:function(){ie=ie.call(oe)},n:function(){var be=ie.next();return Te=be.done,be},e:function(be){it=!0,De=be},f:function(){try{Te||ie.return==null||ie.return()}finally{if(it)throw De}}}}function c(oe,pe){(pe==null||pe>oe.length)&&(pe=oe.length);for(var ie=0,Ce=new Array(pe);ie<pe;ie++)Ce[ie]=oe[ie];return Ce}function f(oe,pe){var ie=Object.keys(oe);if(Object.getOwnPropertySymbols){var Ce=Object.getOwnPropertySymbols(oe);pe&&(Ce=Ce.filter(function(ve){return Object.getOwnPropertyDescriptor(oe,ve).enumerable})),ie.push.apply(ie,Ce)}return ie}function d(oe){for(var pe=1;pe<arguments.length;pe++){var ie=arguments[pe]!=null?arguments[pe]:{};pe%2?f(Object(ie),!0).forEach(function(Ce){h(oe,Ce,ie[Ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(ie)):f(Object(ie)).forEach(function(Ce){Object.defineProperty(oe,Ce,Object.getOwnPropertyDescriptor(ie,Ce))})}return oe}function h(oe,pe,ie){return pe in oe?Object.defineProperty(oe,pe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):oe[pe]=ie,oe}function m(oe,pe){for(var ie=0;ie<pe.length;ie++){var Ce=pe[ie];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(oe,Ce.key,Ce)}}var v=function(){function oe(ve){(function(De,Te){if(!(De instanceof Te))throw new TypeError("Cannot call a class as a function")})(this,oe),this.options=d(d({},{HALF_CURL_START_LIMIT:60,NO_CURL_START_LIMIT:130,DISTANCE_VOTE_POWER:1.1,SINGLE_ANGLE_VOTE_POWER:.9,TOTAL_ANGLE_VOTE_POWER:1.6}),ve)}var pe,ie,Ce;return pe=oe,(ie=[{key:"estimate",value:function(ve){var De,Te=[],it=[],be=u(i.all);try{for(be.s();!(De=be.n()).done;){var ut,dt=De.value,Un=i.getPoints(dt),bn=[],Yt=[],pn=u(Un);try{for(pn.s();!(ut=pn.n()).done;){var un=ut.value,gt=ve[un[0]],Jt=ve[un[1]],cn=this.getSlopes(gt,Jt),Qr=cn[0],fo=cn[1];bn.push(Qr),Yt.push(fo)}}catch(mo){pn.e(mo)}finally{pn.f()}Te.push(bn),it.push(Yt)}}catch(mo){be.e(mo)}finally{be.f()}var po,qn=[],Gr=[],wr=u(i.all);try{for(wr.s();!(po=wr.n()).done;){var Jr=po.value,eo=Jr==i.Thumb?1:0,Dr=i.getPoints(Jr),to=ve[Dr[eo][0]],ho=ve[Dr[eo+1][1]],xs=ve[Dr[3][1]],Qs=this.estimateFingerCurl(to,ho,xs),Js=this.calculateFingerDirection(to,ho,xs,Te[Jr].slice(eo));qn[Jr]=Qs,Gr[Jr]=Js}}catch(mo){wr.e(mo)}finally{wr.f()}return{curls:qn,directions:Gr}}},{key:"getSlopes",value:function(ve,De){var Te=this.calculateSlope(ve[0],ve[1],De[0],De[1]);return ve.length==2?Te:[Te,this.calculateSlope(ve[1],ve[2],De[1],De[2])]}},{key:"angleOrientationAt",value:function(ve){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Te=0,it=0,be=0;return ve>=75&&ve<=105?Te=1*De:ve>=25&&ve<=155?it=1*De:be=1*De,[Te,it,be]}},{key:"estimateFingerCurl",value:function(ve,De,Te){var it=ve[0]-De[0],be=ve[0]-Te[0],ut=De[0]-Te[0],dt=ve[1]-De[1],Un=ve[1]-Te[1],bn=De[1]-Te[1],Yt=ve[2]-De[2],pn=ve[2]-Te[2],un=De[2]-Te[2],gt=Math.sqrt(it*it+dt*dt+Yt*Yt),Jt=Math.sqrt(be*be+Un*Un+pn*pn),cn=Math.sqrt(ut*ut+bn*bn+un*un),Qr=(cn*cn+gt*gt-Jt*Jt)/(2*cn*gt);Qr>1?Qr=1:Qr<-1&&(Qr=-1);var fo=Math.acos(Qr);return(fo=57.2958*fo%180)>this.options.NO_CURL_START_LIMIT?s.NoCurl:fo>this.options.HALF_CURL_START_LIMIT?s.HalfCurl:s.FullCurl}},{key:"estimateHorizontalDirection",value:function(ve,De,Te,it){return it==Math.abs(ve)?ve>0?a.HorizontalLeft:a.HorizontalRight:it==Math.abs(De)?De>0?a.HorizontalLeft:a.HorizontalRight:Te>0?a.HorizontalLeft:a.HorizontalRight}},{key:"estimateVerticalDirection",value:function(ve,De,Te,it){return it==Math.abs(ve)?ve<0?a.VerticalDown:a.VerticalUp:it==Math.abs(De)?De<0?a.VerticalDown:a.VerticalUp:Te<0?a.VerticalDown:a.VerticalUp}},{key:"estimateDiagonalDirection",value:function(ve,De,Te,it,be,ut,dt,Un){var bn=this.estimateVerticalDirection(ve,De,Te,it),Yt=this.estimateHorizontalDirection(be,ut,dt,Un);return bn==a.VerticalUp?Yt==a.HorizontalLeft?a.DiagonalUpLeft:a.DiagonalUpRight:Yt==a.HorizontalLeft?a.DiagonalDownLeft:a.DiagonalDownRight}},{key:"calculateFingerDirection",value:function(ve,De,Te,it){var be=ve[0]-De[0],ut=ve[0]-Te[0],dt=De[0]-Te[0],Un=ve[1]-De[1],bn=ve[1]-Te[1],Yt=De[1]-Te[1],pn=Math.max(Math.abs(be),Math.abs(ut),Math.abs(dt)),un=Math.max(Math.abs(Un),Math.abs(bn),Math.abs(Yt)),gt=0,Jt=0,cn=0,Qr=un/(pn+1e-5);Qr>1.5?gt+=this.options.DISTANCE_VOTE_POWER:Qr>.66?Jt+=this.options.DISTANCE_VOTE_POWER:cn+=this.options.DISTANCE_VOTE_POWER;var fo=Math.sqrt(be*be+Un*Un),po=Math.sqrt(ut*ut+bn*bn),qn=Math.sqrt(dt*dt+Yt*Yt),Gr=Math.max(fo,po,qn),wr=ve[0],Jr=ve[1],eo=Te[0],Dr=Te[1];Gr==fo?(eo=Te[0],Dr=Te[1]):Gr==qn&&(wr=De[0],Jr=De[1]);var to=[wr,Jr],ho=[eo,Dr],xs=this.getSlopes(to,ho),Qs=this.angleOrientationAt(xs,this.options.TOTAL_ANGLE_VOTE_POWER);gt+=Qs[0],Jt+=Qs[1],cn+=Qs[2];var Js,mo=u(it);try{for(mo.s();!(Js=mo.n()).done;){var xc=Js.value,ka=this.angleOrientationAt(xc,this.options.SINGLE_ANGLE_VOTE_POWER);gt+=ka[0],Jt+=ka[1],cn+=ka[2]}}catch(ea){mo.e(ea)}finally{mo.f()}return gt==Math.max(gt,Jt,cn)?this.estimateVerticalDirection(bn,Un,Yt,un):cn==Math.max(Jt,cn)?this.estimateHorizontalDirection(ut,be,dt,pn):this.estimateDiagonalDirection(bn,Un,Yt,un,ut,be,dt,pn)}},{key:"calculateSlope",value:function(ve,De,Te,it){var be=(De-it)/(ve-Te),ut=180*Math.atan(be)/Math.PI;return ut<=0?ut=-ut:ut>0&&(ut=180-ut),ut}}])&&m(pe.prototype,ie),Ce&&m(pe,Ce),oe}();function x(oe,pe){var ie=typeof Symbol<"u"&&oe[Symbol.iterator]||oe["@@iterator"];if(!ie){if(Array.isArray(oe)||(ie=function(be,ut){if(be){if(typeof be=="string")return b(be,ut);var dt=Object.prototype.toString.call(be).slice(8,-1);if(dt==="Object"&&be.constructor&&(dt=be.constructor.name),dt==="Map"||dt==="Set")return Array.from(be);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return b(be,ut)}}(oe))||pe&&oe&&typeof oe.length=="number"){ie&&(oe=ie);var Ce=0,ve=function(){};return{s:ve,n:function(){return Ce>=oe.length?{done:!0}:{done:!1,value:oe[Ce++]}},e:function(be){throw be},f:ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var De,Te=!0,it=!1;return{s:function(){ie=ie.call(oe)},n:function(){var be=ie.next();return Te=be.done,be},e:function(be){it=!0,De=be},f:function(){try{Te||ie.return==null||ie.return()}finally{if(it)throw De}}}}function b(oe,pe){(pe==null||pe>oe.length)&&(pe=oe.length);for(var ie=0,Ce=new Array(pe);ie<pe;ie++)Ce[ie]=oe[ie];return Ce}function C(oe,pe){if(!(oe instanceof pe))throw new TypeError("Cannot call a class as a function")}function D(oe,pe){for(var ie=0;ie<pe.length;ie++){var Ce=pe[ie];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(oe,Ce.key,Ce)}}var O=function(){function oe(ve){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};C(this,oe),this.estimator=new v(De),this.gestures=ve}var pe,ie,Ce;return pe=oe,(ie=[{key:"estimate",value:function(ve,De){var Te,it=[],be=this.estimator.estimate(ve),ut=[],dt=x(i.all);try{for(dt.s();!(Te=dt.n()).done;){var Un=Te.value;ut.push([i.getName(Un),s.getName(be.curls[Un]),a.getName(be.directions[Un])])}}catch(gt){dt.e(gt)}finally{dt.f()}var bn,Yt=x(this.gestures);try{for(Yt.s();!(bn=Yt.n()).done;){var pn=bn.value,un=pn.matchAgainst(be.curls,be.directions);un>=De&&it.push({name:pn.name,score:un})}}catch(gt){Yt.e(gt)}finally{Yt.f()}return{poseData:ut,gestures:it}}}])&&D(pe.prototype,ie),Ce&&D(pe,Ce),oe}();function F(oe,pe){return function(ie){if(Array.isArray(ie))return ie}(oe)||function(ie,Ce){var ve=ie==null?null:typeof Symbol<"u"&&ie[Symbol.iterator]||ie["@@iterator"];if(ve!=null){var De,Te,it=[],be=!0,ut=!1;try{for(ve=ve.call(ie);!(be=(De=ve.next()).done)&&(it.push(De.value),!Ce||it.length!==Ce);be=!0);}catch(dt){ut=!0,Te=dt}finally{try{be||ve.return==null||ve.return()}finally{if(ut)throw Te}}return it}}(oe,pe)||H(oe,pe)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(oe,pe){var ie=typeof Symbol<"u"&&oe[Symbol.iterator]||oe["@@iterator"];if(!ie){if(Array.isArray(oe)||(ie=H(oe))||pe&&oe&&typeof oe.length=="number"){ie&&(oe=ie);var Ce=0,ve=function(){};return{s:ve,n:function(){return Ce>=oe.length?{done:!0}:{done:!1,value:oe[Ce++]}},e:function(be){throw be},f:ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var De,Te=!0,it=!1;return{s:function(){ie=ie.call(oe)},n:function(){var be=ie.next();return Te=be.done,be},e:function(be){it=!0,De=be},f:function(){try{Te||ie.return==null||ie.return()}finally{if(it)throw De}}}}function H(oe,pe){if(oe){if(typeof oe=="string")return X(oe,pe);var ie=Object.prototype.toString.call(oe).slice(8,-1);return ie==="Object"&&oe.constructor&&(ie=oe.constructor.name),ie==="Map"||ie==="Set"?Array.from(oe):ie==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ie)?X(oe,pe):void 0}}function X(oe,pe){(pe==null||pe>oe.length)&&(pe=oe.length);for(var ie=0,Ce=new Array(pe);ie<pe;ie++)Ce[ie]=oe[ie];return Ce}function Z(oe,pe){for(var ie=0;ie<pe.length;ie++){var Ce=pe[ie];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(oe,Ce.key,Ce)}}var te=function(){function oe(ve){(function(De,Te){if(!(De instanceof Te))throw new TypeError("Cannot call a class as a function")})(this,oe),this.name=ve,this.curls={},this.directions={}}var pe,ie,Ce;return pe=oe,(ie=[{key:"addCurl",value:function(ve,De){var Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;this.curls[ve]===void 0&&(this.curls[ve]=[]),this.curls[ve].push([De,Te])}},{key:"addDirection",value:function(ve,De){var Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;this.directions[ve]===void 0&&(this.directions[ve]=[]),this.directions[ve].push([De,Te])}},{key:"matchAgainst",value:function(ve,De){var Te=0,it=0;for(var be in ve){var ut=ve[be],dt=this.curls[be];if(dt!==void 0){it++;var Un,bn=!1,Yt=0,pn=B(dt);try{for(pn.s();!(Un=pn.n()).done;){var un=F(Un.value,2),gt=un[0],Jt=un[1];if(ut==gt){Te+=Jt,Yt=Math.max(Yt,Jt),bn=!0;break}}}catch(to){pn.e(to)}finally{pn.f()}bn||(Te-=Yt)}}for(var cn in De){var Qr=De[cn],fo=this.directions[cn];if(fo!==void 0){it++;var po,qn=!1,Gr=0,wr=B(fo);try{for(wr.s();!(po=wr.n()).done;){var Jr=F(po.value,2),eo=Jr[0],Dr=Jr[1];if(Qr==eo){Te+=Dr,Gr=Math.max(Gr,Dr),qn=!0;break}}}catch(to){wr.e(to)}finally{wr.f()}qn||(Te-=Gr)}}return Te/it*10}}])&&Z(pe.prototype,ie),Ce&&Z(pe,Ce),oe}(),J=new te("victory");J.addDirection(i.Thumb,a.VerticalUp,1),J.addDirection(i.Thumb,a.DiagonalUpLeft,1),J.addDirection(i.Thumb,a.DiagonalUpRight,1),J.addCurl(i.Index,s.NoCurl,1),J.addDirection(i.Index,a.VerticalUp,1),J.addDirection(i.Index,a.DiagonalUpLeft,1),J.addDirection(i.Index,a.DiagonalUpRight,1),J.addDirection(i.Index,a.HorizontalLeft,1),J.addDirection(i.Index,a.HorizontalRight,1),J.addCurl(i.Middle,s.NoCurl,1),J.addDirection(i.Middle,a.VerticalUp,1),J.addDirection(i.Middle,a.DiagonalUpLeft,1),J.addDirection(i.Middle,a.DiagonalUpRight,1),J.addDirection(i.Middle,a.HorizontalLeft,1),J.addDirection(i.Middle,a.HorizontalRight,1),J.addCurl(i.Ring,s.FullCurl,1),J.addCurl(i.Ring,s.HalfCurl,.9),J.addCurl(i.Pinky,s.FullCurl,1),J.addCurl(i.Pinky,s.HalfCurl,.9);var ae=J,ye=new te("thumbs_up");ye.addCurl(i.Thumb,s.NoCurl,1),ye.addDirection(i.Thumb,a.VerticalUp,1),ye.addDirection(i.Thumb,a.DiagonalUpLeft,.9),ye.addDirection(i.Thumb,a.DiagonalUpRight,.9);for(var ke=0,Ke=[i.Index,i.Middle,i.Ring,i.Pinky];ke<Ke.length;ke++){var Me=Ke[ke];ye.addCurl(Me,s.FullCurl,1),ye.addCurl(Me,s.HalfCurl,.9)}ye.addDirection(i.Index,a.DiagonalUpLeft,1),ye.addDirection(i.Index,a.HorizontalLeft,1),ye.addDirection(i.Index,a.HorizontalRight,1),ye.addDirection(i.Index,a.DiagonalUpRight,1);var Nt=ye;t.default={GestureEstimator:O,GestureDescription:te,Finger:i,FingerCurl:s,FingerDirection:a,Gestures:r}}]).default})});var oz=$o(rz=>{"use strict";(function(){"use strict";var e;function t(g){var w=0;return function(){return w<g.length?{done:!1,value:g[w++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,w,I){return g==Array.prototype||g==Object.prototype||(g[w]=I.value),g};function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var w=0;w<g.length;++w){var I=g[w];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var o=r(this);function i(g,w){if(w)e:{var I=o;g=g.split(".");for(var R=0;R<g.length-1;R++){var L=g[R];if(!(L in I))break e;I=I[L]}g=g[g.length-1],R=I[g],w=w(R),w!=R&&w!=null&&n(I,g,{configurable:!0,writable:!0,value:w})}}i("Symbol",function(g){function w(G){if(this instanceof w)throw new TypeError("Symbol is not a constructor");return new I(R+(G||"")+"_"+L++,G)}function I(G,V){this.h=G,n(this,"description",{configurable:!0,writable:!0,value:V})}if(g)return g;I.prototype.toString=function(){return this.h};var R="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",L=0;return w}),i("Symbol.iterator",function(g){if(g)return g;g=Symbol("Symbol.iterator");for(var w="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),I=0;I<w.length;I++){var R=o[w[I]];typeof R=="function"&&typeof R.prototype[g]!="function"&&n(R.prototype,g,{configurable:!0,writable:!0,value:function(){return s(t(this))}})}return g});function s(g){return g={next:g},g[Symbol.iterator]=function(){return this},g}function a(g){var w=typeof Symbol<"u"&&Symbol.iterator&&g[Symbol.iterator];return w?w.call(g):{next:t(g)}}function u(g){if(!(g instanceof Array)){g=a(g);for(var w,I=[];!(w=g.next()).done;)I.push(w.value);g=I}return g}var c=typeof Object.assign=="function"?Object.assign:function(g,w){for(var I=1;I<arguments.length;I++){var R=arguments[I];if(R)for(var L in R)Object.prototype.hasOwnProperty.call(R,L)&&(g[L]=R[L])}return g};i("Object.assign",function(g){return g||c});var f=typeof Object.create=="function"?Object.create:function(g){function w(){}return w.prototype=g,new w},d;if(typeof Object.setPrototypeOf=="function")d=Object.setPrototypeOf;else{var h;e:{var m={a:!0},v={};try{v.__proto__=m,h=v.a;break e}catch{}h=!1}d=h?function(g,w){if(g.__proto__=w,g.__proto__!==w)throw new TypeError(g+" is not extensible");return g}:null}var x=d;function b(g,w){if(g.prototype=f(w.prototype),g.prototype.constructor=g,x)x(g,w);else for(var I in w)if(I!="prototype")if(Object.defineProperties){var R=Object.getOwnPropertyDescriptor(w,I);R&&Object.defineProperty(g,I,R)}else g[I]=w[I];g.ya=w.prototype}function C(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function D(g){if(g.m)throw new TypeError("Generator is already running");g.m=!0}C.prototype.u=function(g){this.i=g};function O(g,w){g.l={ma:w,na:!0},g.h=g.s||g.v}C.prototype.return=function(g){this.l={return:g},this.h=this.v};function F(g,w,I){return g.h=I,{value:w}}function B(g){this.h=new C,this.i=g}function H(g,w){D(g.h);var I=g.h.j;return I?X(g,"return"in I?I.return:function(R){return{value:R,done:!0}},w,g.h.return):(g.h.return(w),Z(g))}function X(g,w,I,R){try{var L=w.call(g.h.j,I);if(!(L instanceof Object))throw new TypeError("Iterator result "+L+" is not an object");if(!L.done)return g.h.m=!1,L;var G=L.value}catch(V){return g.h.j=null,O(g.h,V),Z(g)}return g.h.j=null,R.call(g.h,G),Z(g)}function Z(g){for(;g.h.h;)try{var w=g.i(g.h);if(w)return g.h.m=!1,{value:w.value,done:!1}}catch(I){g.h.i=void 0,O(g.h,I)}if(g.h.m=!1,g.h.l){if(w=g.h.l,g.h.l=null,w.na)throw w.ma;return{value:w.return,done:!0}}return{value:void 0,done:!0}}function te(g){this.next=function(w){return D(g.h),g.h.j?w=X(g,g.h.j.next,w,g.h.u):(g.h.u(w),w=Z(g)),w},this.throw=function(w){return D(g.h),g.h.j?w=X(g,g.h.j.throw,w,g.h.u):(O(g.h,w),w=Z(g)),w},this.return=function(w){return H(g,w)},this[Symbol.iterator]=function(){return this}}function J(g){function w(R){return g.next(R)}function I(R){return g.throw(R)}return new Promise(function(R,L){function G(V){V.done?R(V.value):Promise.resolve(V.value).then(w,I).then(G,L)}G(g.next())})}function ae(g){return J(new te(new B(g)))}i("Promise",function(g){function w(V){this.i=0,this.j=void 0,this.h=[],this.u=!1;var q=this.l();try{V(q.resolve,q.reject)}catch(ee){q.reject(ee)}}function I(){this.h=null}function R(V){return V instanceof w?V:new w(function(q){q(V)})}if(g)return g;I.prototype.i=function(V){if(this.h==null){this.h=[];var q=this;this.j(function(){q.m()})}this.h.push(V)};var L=o.setTimeout;I.prototype.j=function(V){L(V,0)},I.prototype.m=function(){for(;this.h&&this.h.length;){var V=this.h;this.h=[];for(var q=0;q<V.length;++q){var ee=V[q];V[q]=null;try{ee()}catch(me){this.l(me)}}}this.h=null},I.prototype.l=function(V){this.j(function(){throw V})},w.prototype.l=function(){function V(me){return function(ge){ee||(ee=!0,me.call(q,ge))}}var q=this,ee=!1;return{resolve:V(this.I),reject:V(this.m)}},w.prototype.I=function(V){if(V===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(V instanceof w)this.L(V);else{e:switch(typeof V){case"object":var q=V!=null;break e;case"function":q=!0;break e;default:q=!1}q?this.F(V):this.s(V)}},w.prototype.F=function(V){var q=void 0;try{q=V.then}catch(ee){this.m(ee);return}typeof q=="function"?this.M(q,V):this.s(V)},w.prototype.m=function(V){this.v(2,V)},w.prototype.s=function(V){this.v(1,V)},w.prototype.v=function(V,q){if(this.i!=0)throw Error("Cannot settle("+V+", "+q+"): Promise already settled in state"+this.i);this.i=V,this.j=q,this.i===2&&this.K(),this.H()},w.prototype.K=function(){var V=this;L(function(){if(V.D()){var q=o.console;typeof q<"u"&&q.error(V.j)}},1)},w.prototype.D=function(){if(this.u)return!1;var V=o.CustomEvent,q=o.Event,ee=o.dispatchEvent;return typeof ee>"u"?!0:(typeof V=="function"?V=new V("unhandledrejection",{cancelable:!0}):typeof q=="function"?V=new q("unhandledrejection",{cancelable:!0}):(V=o.document.createEvent("CustomEvent"),V.initCustomEvent("unhandledrejection",!1,!0,V)),V.promise=this,V.reason=this.j,ee(V))},w.prototype.H=function(){if(this.h!=null){for(var V=0;V<this.h.length;++V)G.i(this.h[V]);this.h=null}};var G=new I;return w.prototype.L=function(V){var q=this.l();V.T(q.resolve,q.reject)},w.prototype.M=function(V,q){var ee=this.l();try{V.call(q,ee.resolve,ee.reject)}catch(me){ee.reject(me)}},w.prototype.then=function(V,q){function ee(Fe,Ie){return typeof Fe=="function"?function(Je){try{me(Fe(Je))}catch(Et){ge(Et)}}:Ie}var me,ge,Ye=new w(function(Fe,Ie){me=Fe,ge=Ie});return this.T(ee(V,me),ee(q,ge)),Ye},w.prototype.catch=function(V){return this.then(void 0,V)},w.prototype.T=function(V,q){function ee(){switch(me.i){case 1:V(me.j);break;case 2:q(me.j);break;default:throw Error("Unexpected state: "+me.i)}}var me=this;this.h==null?G.i(ee):this.h.push(ee),this.u=!0},w.resolve=R,w.reject=function(V){return new w(function(q,ee){ee(V)})},w.race=function(V){return new w(function(q,ee){for(var me=a(V),ge=me.next();!ge.done;ge=me.next())R(ge.value).T(q,ee)})},w.all=function(V){var q=a(V),ee=q.next();return ee.done?R([]):new w(function(me,ge){function Ye(Je){return function(Et){Fe[Je]=Et,Ie--,Ie==0&&me(Fe)}}var Fe=[],Ie=0;do Fe.push(void 0),Ie++,R(ee.value).T(Ye(Fe.length-1),ge),ee=q.next();while(!ee.done)})},w});function ye(g,w){g instanceof String&&(g+="");var I=0,R=!1,L={next:function(){if(!R&&I<g.length){var G=I++;return{value:w(G,g[G]),done:!1}}return R=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.keys",function(g){return g||function(){return ye(this,function(w){return w})}}),i("Array.prototype.fill",function(g){return g||function(w,I,R){var L=this.length||0;for(0>I&&(I=Math.max(0,L+I)),(R==null||R>L)&&(R=L),R=Number(R),0>R&&(R=Math.max(0,L+R)),I=Number(I||0);I<R;I++)this[I]=w;return this}});function ke(g){return g||Array.prototype.fill}i("Int8Array.prototype.fill",ke),i("Uint8Array.prototype.fill",ke),i("Uint8ClampedArray.prototype.fill",ke),i("Int16Array.prototype.fill",ke),i("Uint16Array.prototype.fill",ke),i("Int32Array.prototype.fill",ke),i("Uint32Array.prototype.fill",ke),i("Float32Array.prototype.fill",ke),i("Float64Array.prototype.fill",ke),i("Object.is",function(g){return g||function(w,I){return w===I?w!==0||1/w===1/I:w!==w&&I!==I}}),i("Array.prototype.includes",function(g){return g||function(w,I){var R=this;R instanceof String&&(R=String(R));var L=R.length;for(I=I||0,0>I&&(I=Math.max(I+L,0));I<L;I++){var G=R[I];if(G===w||Object.is(G,w))return!0}return!1}}),i("String.prototype.includes",function(g){return g||function(w,I){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(w instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(w,I||0)!==-1}});var Ke=this||self;function Me(g,w){g=g.split(".");var I=Ke;g[0]in I||typeof I.execScript>"u"||I.execScript("var "+g[0]);for(var R;g.length&&(R=g.shift());)g.length||w===void 0?I[R]&&I[R]!==Object.prototype[R]?I=I[R]:I=I[R]={}:I[R]=w}function Nt(g){var w;e:{if((w=Ke.navigator)&&(w=w.userAgent))break e;w=""}return w.indexOf(g)!=-1}var oe=Array.prototype.map?function(g,w){return Array.prototype.map.call(g,w,void 0)}:function(g,w){for(var I=g.length,R=Array(I),L=typeof g=="string"?g.split(""):g,G=0;G<I;G++)G in L&&(R[G]=w.call(void 0,L[G],G,g));return R},pe={},ie=null;function Ce(g){var w=g.length,I=3*w/4;I%3?I=Math.floor(I):"=.".indexOf(g[w-1])!=-1&&(I="=.".indexOf(g[w-2])!=-1?I-2:I-1);var R=new Uint8Array(I),L=0;return ve(g,function(G){R[L++]=G}),L!==I?R.subarray(0,L):R}function ve(g,w){function I(ee){for(;R<g.length;){var me=g.charAt(R++),ge=ie[me];if(ge!=null)return ge;if(!/^[\s\xa0]*$/.test(me))throw Error("Unknown base64 encoding at char: "+me)}return ee}De();for(var R=0;;){var L=I(-1),G=I(0),V=I(64),q=I(64);if(q===64&&L===-1)break;w(L<<2|G>>4),V!=64&&(w(G<<4&240|V>>2),q!=64&&w(V<<6&192|q))}}function De(){if(!ie){ie={};for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),w=["+/=","+/","-_=","-_.","-_"],I=0;5>I;I++){var R=g.concat(w[I].split(""));pe[I]=R;for(var L=0;L<R.length;L++){var G=R[L];ie[G]===void 0&&(ie[G]=L)}}}}var Te=typeof Uint8Array<"u",it=!(Nt("Trident")||Nt("MSIE"))&&typeof Ke.btoa=="function";function be(g){if(!it){var w;w===void 0&&(w=0),De(),w=pe[w];for(var I=Array(Math.floor(g.length/3)),R=w[64]||"",L=0,G=0;L<g.length-2;L+=3){var V=g[L],q=g[L+1],ee=g[L+2],me=w[V>>2];V=w[(V&3)<<4|q>>4],q=w[(q&15)<<2|ee>>6],ee=w[ee&63],I[G++]=me+V+q+ee}switch(me=0,ee=R,g.length-L){case 2:me=g[L+1],ee=w[(me&15)<<2]||R;case 1:g=g[L],I[G]=w[g>>2]+w[(g&3)<<4|me>>4]+ee+R}return I.join("")}for(w="";10240<g.length;)w+=String.fromCharCode.apply(null,g.subarray(0,10240)),g=g.subarray(10240);return w+=String.fromCharCode.apply(null,g),btoa(w)}var ut=RegExp("[-_.]","g");function dt(g){switch(g){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Un(g){if(!it)return Ce(g);ut.test(g)&&(g=g.replace(ut,dt)),g=atob(g);for(var w=new Uint8Array(g.length),I=0;I<g.length;I++)w[I]=g.charCodeAt(I);return w}var bn;function Yt(){return bn||(bn=new Uint8Array(0))}var pn={},un=typeof Uint8Array.prototype.slice=="function",gt=0,Jt=0;function cn(g){var w=0>g;g=Math.abs(g);var I=g>>>0;g=Math.floor((g-I)/4294967296),w&&(I=a(fo(I,g)),w=I.next().value,g=I.next().value,I=w),gt=I>>>0,Jt=g>>>0}var Qr=typeof BigInt=="function";function fo(g,w){return w=~w,g?g=~g+1:w+=1,[g,w]}function po(g,w){this.i=g>>>0,this.h=w>>>0}function qn(g){if(!g)return Gr||(Gr=new po(0,0));if(!/^-?\d+$/.test(g))return null;if(16>g.length)cn(Number(g));else if(Qr)g=BigInt(g),gt=Number(g&BigInt(4294967295))>>>0,Jt=Number(g>>BigInt(32)&BigInt(4294967295));else{var w=+(g[0]==="-");Jt=gt=0;for(var I=g.length,R=w,L=(I-w)%6+w;L<=I;R=L,L+=6)R=Number(g.slice(R,L)),Jt*=1e6,gt=1e6*gt+R,4294967296<=gt&&(Jt+=gt/4294967296|0,gt%=4294967296);w&&(w=a(fo(gt,Jt)),g=w.next().value,w=w.next().value,gt=g,Jt=w)}return new po(gt,Jt)}var Gr;function wr(g,w){return Error("Invalid wire type: "+g+" (at position "+w+")")}function Jr(){return Error("Failed to read varint, encoding is invalid.")}function eo(g,w){return Error("Tried to read past the end of the data "+w+" > "+g)}function Dr(){throw Error("Invalid UTF8")}function to(g,w){return w=String.fromCharCode.apply(null,w),g==null?w:g+w}var ho=void 0,xs,Qs=typeof TextDecoder<"u",Js,mo=typeof TextEncoder<"u",xc;function ka(g){if(g!==pn)throw Error("illegal external caller")}function ea(g,w){if(ka(w),this.V=g,g!=null&&g.length===0)throw Error("ByteString should be constructed with non-empty values")}function ql(){return xc||(xc=new ea(null,pn))}function Bd(g){ka(pn);var w=g.V;return w=w==null||Te&&w!=null&&w instanceof Uint8Array?w:typeof w=="string"?Un(w):null,w==null?w:g.V=w}function x2(g){if(typeof g=="string")return{buffer:Un(g),C:!1};if(Array.isArray(g))return{buffer:new Uint8Array(g),C:!1};if(g.constructor===Uint8Array)return{buffer:g,C:!1};if(g.constructor===ArrayBuffer)return{buffer:new Uint8Array(g),C:!1};if(g.constructor===ea)return{buffer:Bd(g)||Yt(),C:!0};if(g instanceof Uint8Array)return{buffer:new Uint8Array(g.buffer,g.byteOffset,g.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function I0(g,w){this.i=null,this.m=!1,this.h=this.j=this.l=0,Qm(this,g,w)}function Qm(g,w,I){I=I===void 0?{}:I,g.S=I.S===void 0?!1:I.S,w&&(w=x2(w),g.i=w.buffer,g.m=w.C,g.l=0,g.j=g.i.length,g.h=g.l)}I0.prototype.reset=function(){this.h=this.l};function Oa(g,w){if(g.h=w,w>g.j)throw eo(g.j,w)}function bc(g){var w=g.i,I=g.h,R=w[I++],L=R&127;if(R&128&&(R=w[I++],L|=(R&127)<<7,R&128&&(R=w[I++],L|=(R&127)<<14,R&128&&(R=w[I++],L|=(R&127)<<21,R&128&&(R=w[I++],L|=R<<28,R&128&&w[I++]&128&&w[I++]&128&&w[I++]&128&&w[I++]&128&&w[I++]&128)))))throw Jr();return Oa(g,I),L}function S0(g,w){if(0>w)throw Error("Tried to read a negative byte length: "+w);var I=g.h,R=I+w;if(R>g.j)throw eo(w,g.j-I);return g.h=R,I}var D0=[];function Jm(){this.h=[]}Jm.prototype.length=function(){return this.h.length},Jm.prototype.end=function(){var g=this.h;return this.h=[],g};function N0(g,w,I){for(;0<I||127<w;)g.h.push(w&127|128),w=(w>>>7|I<<25)>>>0,I>>>=7;g.h.push(w)}function Ma(g,w){for(;127<w;)g.h.push(w&127|128),w>>>=7;g.h.push(w)}function eg(g,w){if(D0.length){var I=D0.pop();Qm(I,g,w),g=I}else g=new I0(g,w);this.h=g,this.j=this.h.h,this.i=this.l=-1,this.setOptions(w)}eg.prototype.setOptions=function(g){g=g===void 0?{}:g,this.ca=g.ca===void 0?!1:g.ca},eg.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function A0(g){var w=g.h;if(w.h==w.j)return!1;g.j=g.h.h;var I=bc(g.h)>>>0;if(w=I>>>3,I&=7,!(0<=I&&5>=I))throw wr(I,g.j);if(1>w)throw Error("Invalid field number: "+w+" (at position "+g.j+")");return g.l=w,g.i=I,!0}function Ud(g){switch(g.i){case 0:if(g.i!=0)Ud(g);else e:{g=g.h;for(var w=g.h,I=w+10,R=g.i;w<I;)if(!(R[w++]&128)){Oa(g,w);break e}throw Jr()}break;case 1:g=g.h,Oa(g,g.h+8);break;case 2:g.i!=2?Ud(g):(w=bc(g.h)>>>0,g=g.h,Oa(g,g.h+w));break;case 5:g=g.h,Oa(g,g.h+4);break;case 3:w=g.l;do{if(!A0(g))throw Error("Unmatched start-group tag: stream EOF");if(g.i==4){if(g.l!=w)throw Error("Unmatched end-group tag");break}Ud(g)}while(!0);break;default:throw wr(g.i,g.j)}}var wc=[];function b2(){this.j=[],this.i=0,this.h=new Jm}function Fa(g,w){w.length!==0&&(g.j.push(w),g.i+=w.length)}function w2(g,w){if(w=w.R){Fa(g,g.h.end());for(var I=0;I<w.length;I++)Fa(g,Bd(w[I])||Yt())}}var ta=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function bu(g,w){return ta?g[ta]|=w:g.A!==void 0?g.A|=w:(Object.defineProperties(g,{A:{value:w,configurable:!0,writable:!0,enumerable:!1}}),w)}function R0(g,w){ta?g[ta]&&(g[ta]&=~w):g.A!==void 0&&(g.A&=~w)}function Kn(g){var w;return ta?w=g[ta]:w=g.A,w??0}function bs(g,w){ta?g[ta]=w:g.A!==void 0?g.A=w:Object.defineProperties(g,{A:{value:w,configurable:!0,writable:!0,enumerable:!1}})}function tg(g){return bu(g,1),g}function E2(g,w){bs(w,(g|0)&-51)}function Kl(g,w){bs(w,(g|18)&-41)}var ng={};function Gd(g){return g!==null&&typeof g=="object"&&!Array.isArray(g)&&g.constructor===Object}var Xl,k0=[];bs(k0,23),Xl=Object.freeze(k0);function rg(g){if(Kn(g.o)&2)throw Error("Cannot mutate an immutable Message")}function og(g){var w=g.length;(w=w?g[w-1]:void 0)&&Gd(w)?w.g=1:(w={},g.push((w.g=1,w)))}function Yl(g){var w=g.i+g.G;return g.B||(g.B=g.o[w]={})}function Fi(g,w){return w===-1?null:w>=g.i?g.B?g.B[w]:void 0:g.o[w+g.G]}function Ro(g,w,I,R){rg(g),Zl(g,w,I,R)}function Zl(g,w,I,R){g.j&&(g.j=void 0),w>=g.i||R?Yl(g)[w]=I:(g.o[w+g.G]=I,(g=g.B)&&w in g&&delete g[w])}function ig(g,w,I,R){var L=Fi(g,w);Array.isArray(L)||(L=Xl);var G=Kn(L);if(G&1||tg(L),R)G&2||bu(L,2),I&1||Object.freeze(L);else{R=!(I&2);var V=G&2;I&1||!V?R&&G&16&&!V&&R0(L,16):(L=tg(Array.prototype.slice.call(L)),Zl(g,w,L))}return L}function sg(g,w){var I=Fi(g,w),R=I==null?I:typeof I=="number"||I==="NaN"||I==="Infinity"||I==="-Infinity"?Number(I):void 0;return R!=null&&R!==I&&Zl(g,w,R),R}function ag(g,w,I,R,L){g.h||(g.h={});var G=g.h[I],V=ig(g,I,3,L);if(!G){var q=V;G=[];var ee=!!(Kn(g.o)&16);V=!!(Kn(q)&2);var me=q;!L&&V&&(q=Array.prototype.slice.call(q));for(var ge=V,Ye=0;Ye<q.length;Ye++){var Fe=q[Ye],Ie=w,Je=!1;if(Je=Je===void 0?!1:Je,Fe=Array.isArray(Fe)?new Ie(Fe):Je?new Ie:void 0,Fe!==void 0){Ie=Fe.o;var Et=Je=Kn(Ie);V&&(Et|=2),ee&&(Et|=16),Et!=Je&&bs(Ie,Et),Ie=Et,ge=ge||!!(2&Ie),G.push(Fe)}}return g.h[I]=G,ee=Kn(q),w=ee|33,w=ge?w&-9:w|8,ee!=w&&(ge=q,Object.isFrozen(ge)&&(ge=Array.prototype.slice.call(ge)),bs(ge,w),q=ge),me!==q&&Zl(g,I,q),(L||R&&V)&&bu(G,2),R&&Object.freeze(G),G}return L||(L=Object.isFrozen(G),R&&!L?Object.freeze(G):!R&&L&&(G=Array.prototype.slice.call(G),g.h[I]=G)),G}function Ql(g,w,I){var R=!!(Kn(g.o)&2);if(w=ag(g,w,I,R,R),g=ig(g,I,3,R),!(R||Kn(g)&8)){for(R=0;R<w.length;R++){if(I=w[R],Kn(I.o)&2){var L=F0(I,!1);L.j=I}else L=I;I!==L&&(w[R]=L,g[R]=L.o)}bu(g,8)}return w}function Pi(g,w,I){if(I!=null&&typeof I!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof I+": "+I);Ro(g,w,I)}function O0(g,w,I,R,L){rg(g);var G=ag(g,I,w,!1,!1);return I=R??new I,g=ig(g,w,2,!1),L!=null?(G.splice(L,0,I),g.splice(L,0,I.o)):(G.push(I),g.push(I.o)),I.C()&&R0(g,8),I}function jd(g,w){return g??w}function ws(g,w,I){return I=I===void 0?0:I,jd(sg(g,w),I)}var zd;function M0(g){switch(typeof g){case"number":return isFinite(g)?g:String(g);case"object":if(g)if(Array.isArray(g)){if(Kn(g)&128)return g=Array.prototype.slice.call(g),og(g),g}else{if(Te&&g!=null&&g instanceof Uint8Array)return be(g);if(g instanceof ea){var w=g.V;return w==null?"":typeof w=="string"?w:g.V=be(w)}}}return g}function ug(g,w,I,R){if(g!=null){if(Array.isArray(g))g=Hd(g,w,I,R!==void 0);else if(Gd(g)){var L={},G;for(G in g)L[G]=ug(g[G],w,I,R);g=L}else g=w(g,R);return g}}function Hd(g,w,I,R){var L=Kn(g);R=R?!!(L&16):void 0,g=Array.prototype.slice.call(g);for(var G=0;G<g.length;G++)g[G]=ug(g[G],w,I,R);return I(L,g),g}function cg(g){return g.ja===ng?g.toJSON():M0(g)}function C2(g,w){g&128&&og(w)}function lg(g,w,I){if(I=I===void 0?Kl:I,g!=null){if(Te&&g instanceof Uint8Array)return g.length?new ea(new Uint8Array(g),pn):ql();if(Array.isArray(g)){var R=Kn(g);return R&2?g:w&&!(R&32)&&(R&16||R===0)?(bs(g,R|2),g):(g=Hd(g,lg,R&4?Kl:I,!0),w=Kn(g),w&4&&w&2&&Object.freeze(g),g)}return g.ja===ng?fg(g):g}}function Jl(g,w,I,R,L,G,V){if(g=g.h&&g.h[I]){if(R=Kn(g),R&2?R=g:(G=oe(g,fg),Kl(R,G),Object.freeze(G),R=G),rg(w),V=R==null?Xl:tg([]),R!=null){for(G=!!R.length,g=0;g<R.length;g++){var q=R[g];G=G&&!(Kn(q.o)&2),V[g]=q.o}G=(G?8:0)|1,g=Kn(V),(g&G)!==G&&(Object.isFrozen(V)&&(V=Array.prototype.slice.call(V)),bs(V,g|G)),w.h||(w.h={}),w.h[I]=R}else w.h&&(w.h[I]=void 0);Zl(w,I,V,L)}else Ro(w,I,lg(R,G,V),L)}function fg(g){return Kn(g.o)&2||(g=F0(g,!0),bu(g.o,2)),g}function F0(g,w){var I=g.o,R=[];bu(R,16);var L=g.constructor.h;if(L&&R.push(L),L=g.B,L){R.length=I.length,R.fill(void 0,R.length,I.length);var G={};R[R.length-1]=G}Kn(I)&128&&og(R),w=w||g.C()?Kl:E2,G=g.constructor,zd=R,R=new G(R),zd=void 0,g.R&&(R.R=g.R.slice()),G=!!(Kn(I)&16);for(var V=L?I.length-1:I.length,q=0;q<V;q++)Jl(g,R,q-g.G,I[q],!1,G,w);if(L)for(var ee in L)Jl(g,R,+ee,L[ee],!0,G,w);return R}function no(g,w,I){g==null&&(g=zd),zd=void 0;var R=this.constructor.i||0,L=0<R,G=this.constructor.h,V=!1;if(g==null){g=G?[G]:[];var q=48,ee=!0;L&&(R=0,q|=128),bs(g,q)}else{if(!Array.isArray(g)||G&&G!==g[0])throw Error();var me=q=bu(g,0);if((ee=(16&me)!==0)&&((V=(32&me)!==0)||(me|=32)),L){if(128&me)R=0;else if(0<g.length){var ge=g[g.length-1];if(Gd(ge)&&"g"in ge){R=0,me|=128,delete ge.g;var Ye=!0,Fe;for(Fe in ge){Ye=!1;break}Ye&&g.pop()}}}else if(128&me)throw Error();q!==me&&bs(g,me)}this.G=(G?0:-1)-R,this.h=void 0,this.o=g;e:{if(G=this.o.length,R=G-1,G&&(G=this.o[R],Gd(G))){this.B=G,this.i=R-this.G;break e}w!==void 0&&-1<w?(this.i=Math.max(w,R+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!L&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(I){w=ee&&!V&&!0,L=this.i;var Ie;for(ee=0;ee<I.length;ee++)V=I[ee],V<L?(V+=this.G,(R=g[V])?dg(R,w):g[V]=Xl):(Ie||(Ie=Yl(this)),(R=Ie[V])?dg(R,w):Ie[V]=Xl)}}no.prototype.toJSON=function(){return Hd(this.o,cg,C2)},no.prototype.C=function(){return!!(Kn(this.o)&2)};function dg(g,w){if(Array.isArray(g)){var I=Kn(g),R=1;!w||I&2||(R|=16),(I&R)!==R&&bs(g,I|R)}}no.prototype.ja=ng,no.prototype.toString=function(){return this.o.toString()};function Wd(g,w,I){if(I){var R={},L;for(L in I){var G=I[L],V=G.qa;V||(R.J=G.wa||G.oa.W,G.ia?(R.aa=yg(G.ia),V=function(q){return function(ee,me,ge){return q.J(ee,me,ge,q.aa)}}(R)):G.ka?(R.Z=vg(G.da.P,G.ka),V=function(q){return function(ee,me,ge){return q.J(ee,me,ge,q.Z)}}(R)):V=R.J,G.qa=V),V(w,g,G.da),R={J:R.J,aa:R.aa,Z:R.Z}}}w2(w,g)}var qd=Symbol();function pg(g,w,I){return g[qd]||(g[qd]=function(R,L){return w(R,L,I)})}function Kd(g){var w=g[qd];if(!w){var I=bg(g);w=function(R,L){return $0(R,L,I)},g[qd]=w}return w}function hg(g){var w=g.ia;if(w)return Kd(w);if(w=g.va)return pg(g.da.P,w,g.ka)}function Ec(g){var w=hg(g),I=g.da,R=g.oa.U;return w?function(L,G){return R(L,G,I,w)}:function(L,G){return R(L,G,I)}}function mg(g,w){var I=g[w];return typeof I=="function"&&I.length===0&&(I=I(),g[w]=I),Array.isArray(I)&&(ef in I||Cc in I||0<I.length&&typeof I[0]=="function")?I:void 0}function gg(g,w,I,R,L,G){w.P=g[0];var V=1;if(g.length>V&&typeof g[V]!="number"){var q=g[V++];I(w,q)}for(;V<g.length;){I=g[V++];for(var ee=V+1;ee<g.length&&typeof g[ee]!="number";)ee++;switch(q=g[V++],ee-=V,ee){case 0:R(w,I,q);break;case 1:(ee=mg(g,V))?(V++,L(w,I,q,ee)):R(w,I,q,g[V++]);break;case 2:ee=V++,ee=mg(g,ee),L(w,I,q,ee,g[V++]);break;case 3:G(w,I,q,g[V++],g[V++],g[V++]);break;case 4:G(w,I,q,g[V++],g[V++],g[V++],g[V++]);break;default:throw Error("unexpected number of binary field arguments: "+ee)}}return w}var Xd=Symbol();function yg(g){var w=g[Xd];if(!w){var I=Yd(g);w=function(R,L){return L0(R,L,I)},g[Xd]=w}return w}function vg(g,w){var I=g[Xd];return I||(I=function(R,L){return Wd(R,L,w)},g[Xd]=I),I}var Cc=Symbol();function P0(g,w){g.push(w)}function T2(g,w,I){g.push(w,I.W)}function _2(g,w,I,R){var L=yg(R),G=Yd(R).P,V=I.W;g.push(w,function(q,ee,me){return V(q,ee,me,G,L)})}function I2(g,w,I,R,L,G){var V=vg(R,G),q=I.W;g.push(w,function(ee,me,ge){return q(ee,me,ge,R,V)})}function Yd(g){var w=g[Cc];return w||(w=gg(g,g[Cc]=[],P0,T2,_2,I2),ef in g&&Cc in g&&(g.length=0),w)}var ef=Symbol();function S2(g,w){g[0]=w}function D2(g,w,I,R){var L=I.U;g[w]=R?function(G,V,q){return L(G,V,q,R)}:L}function N2(g,w,I,R,L){var G=I.U,V=Kd(R),q=bg(R).P;g[w]=function(ee,me,ge){return G(ee,me,ge,q,V,L)}}function xg(g,w,I,R,L,G,V){var q=I.U,ee=pg(R,L,G);g[w]=function(me,ge,Ye){return q(me,ge,Ye,R,ee,V)}}function bg(g){var w=g[ef];return w||(w=gg(g,g[ef]={},S2,D2,N2,xg),ef in g&&Cc in g&&(g.length=0),w)}function $0(g,w,I){for(;A0(w)&&w.i!=4;){var R=w.l,L=I[R];if(!L){var G=I[0];G&&(G=G[R])&&(L=I[R]=Ec(G))}if(!L||!L(w,g,R)){L=w,R=g,G=L.j,Ud(L);var V=L;if(!V.ca){if(L=V.h.h-G,V.h.h=G,V=V.h,L==0)L=ql();else{if(G=S0(V,L),V.S&&V.m)L=V.i.subarray(G,G+L);else{V=V.i;var q=G;L=G+L,L=q===L?Yt():un?V.slice(q,L):new Uint8Array(V.subarray(q,L))}L=L.length==0?ql():new ea(L,pn)}(G=R.R)?G.push(L):R.R=[L]}}}return g}function L0(g,w,I){for(var R=I.length,L=R%2==1,G=L?1:0;G<R;G+=2)(0,I[G+1])(w,g,I[G]);Wd(g,w,L?I[0]:void 0)}function tf(g,w){return{U:g,W:w}}var $i=tf(function(g,w,I){if(g.i!==5)return!1;g=g.h;var R=g.i,L=g.h,G=R[L],V=R[L+1],q=R[L+2];return R=R[L+3],Oa(g,g.h+4),V=(G<<0|V<<8|q<<16|R<<24)>>>0,g=2*(V>>31)+1,G=V>>>23&255,V&=8388607,Ro(w,I,G==255?V?NaN:1/0*g:G==0?g*Math.pow(2,-149)*V:g*Math.pow(2,G-150)*(V+Math.pow(2,23))),!0},function(g,w,I){if(w=sg(w,I),w!=null){Ma(g.h,8*I+5),g=g.h;var R=+w;R===0?0<1/R?gt=Jt=0:(Jt=0,gt=2147483648):isNaN(R)?(Jt=0,gt=2147483647):(R=(I=0>R?-2147483648:0)?-R:R,34028234663852886e22<R?(Jt=0,gt=(I|2139095040)>>>0):11754943508222875e-54>R?(R=Math.round(R/Math.pow(2,-149)),Jt=0,gt=(I|R)>>>0):(w=Math.floor(Math.log(R)/Math.LN2),R*=Math.pow(2,-w),R=Math.round(8388608*R),16777216<=R&&++w,Jt=0,gt=(I|w+127<<23|R&8388607)>>>0)),I=gt,g.h.push(I>>>0&255),g.h.push(I>>>8&255),g.h.push(I>>>16&255),g.h.push(I>>>24&255)}}),wn=tf(function(g,w,I){if(g.i!==0)return!1;var R=g.h,L=0,G=g=0,V=R.i,q=R.h;do{var ee=V[q++];L|=(ee&127)<<G,G+=7}while(32>G&&ee&128);for(32<G&&(g|=(ee&127)>>4),G=3;32>G&&ee&128;G+=7)ee=V[q++],g|=(ee&127)<<G;if(Oa(R,q),128>ee)R=L>>>0,ee=g>>>0,(g=ee&2147483648)&&(R=~R+1>>>0,ee=~ee>>>0,R==0&&(ee=ee+1>>>0)),R=4294967296*ee+(R>>>0);else throw Jr();return Ro(w,I,g?-R:R),!0},function(g,w,I){w=Fi(w,I),w!=null&&(typeof w=="string"&&qn(w),w!=null&&(Ma(g.h,8*I),typeof w=="number"?(g=g.h,cn(w),N0(g,gt,Jt)):(I=qn(w),N0(g.h,I.i,I.h))))}),hn=tf(function(g,w,I){return g.i!==0?!1:(Ro(w,I,bc(g.h)),!0)},function(g,w,I){if(w=Fi(w,I),w!=null&&w!=null)if(Ma(g.h,8*I),g=g.h,I=w,0<=I)Ma(g,I);else{for(w=0;9>w;w++)g.h.push(I&127|128),I>>=7;g.h.push(1)}}),V0=tf(function(g,w,I){if(g.i!==2)return!1;var R=bc(g.h)>>>0;g=g.h;var L=S0(g,R);if(g=g.i,Qs){var G=g,V;(V=xs)||(V=xs=new TextDecoder("utf-8",{fatal:!0})),g=L+R,G=L===0&&g===G.length?G:G.subarray(L,g);try{var q=V.decode(G)}catch(Ye){if(ho===void 0){try{V.decode(new Uint8Array([128]))}catch{}try{V.decode(new Uint8Array([97])),ho=!0}catch{ho=!1}}throw!ho&&(xs=void 0),Ye}}else{q=L,R=q+R,L=[];for(var ee=null,me,ge;q<R;)me=g[q++],128>me?L.push(me):224>me?q>=R?Dr():(ge=g[q++],194>me||(ge&192)!==128?(q--,Dr()):L.push((me&31)<<6|ge&63)):240>me?q>=R-1?Dr():(ge=g[q++],(ge&192)!==128||me===224&&160>ge||me===237&&160<=ge||((G=g[q++])&192)!==128?(q--,Dr()):L.push((me&15)<<12|(ge&63)<<6|G&63)):244>=me?q>=R-2?Dr():(ge=g[q++],(ge&192)!==128||(me<<28)+(ge-144)>>30||((G=g[q++])&192)!==128||((V=g[q++])&192)!==128?(q--,Dr()):(me=(me&7)<<18|(ge&63)<<12|(G&63)<<6|V&63,me-=65536,L.push((me>>10&1023)+55296,(me&1023)+56320))):Dr(),8192<=L.length&&(ee=to(ee,L),L.length=0);q=to(ee,L)}return Ro(w,I,q),!0},function(g,w,I){if(w=Fi(w,I),w!=null){var R=!1;if(R=R===void 0?!1:R,mo){if(R&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(w))throw Error("Found an unpaired surrogate");w=(Js||(Js=new TextEncoder)).encode(w)}else{for(var L=0,G=new Uint8Array(3*w.length),V=0;V<w.length;V++){var q=w.charCodeAt(V);if(128>q)G[L++]=q;else{if(2048>q)G[L++]=q>>6|192;else{if(55296<=q&&57343>=q){if(56319>=q&&V<w.length){var ee=w.charCodeAt(++V);if(56320<=ee&&57343>=ee){q=1024*(q-55296)+ee-56320+65536,G[L++]=q>>18|240,G[L++]=q>>12&63|128,G[L++]=q>>6&63|128,G[L++]=q&63|128;continue}else V--}if(R)throw Error("Found an unpaired surrogate");q=65533}G[L++]=q>>12|224,G[L++]=q>>6&63|128}G[L++]=q&63|128}}w=L===G.length?G:G.subarray(0,L)}Ma(g.h,8*I+2),Ma(g.h,w.length),Fa(g,g.h.end()),Fa(g,w)}}),B0=tf(function(g,w,I,R,L){if(g.i!==2)return!1;w=O0(w,I,R),I=g.h.j,R=bc(g.h)>>>0;var G=g.h.h+R,V=G-I;if(0>=V&&(g.h.j=G,L(w,g,void 0,void 0,void 0),V=G-g.h.h),V)throw Error("Message parsing ended unexpectedly. Expected to read "+(R+" bytes, instead read "+(R-V)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return g.h.h=G,g.h.j=I,!0},function(g,w,I,R,L){if(w=Ql(w,R,I),w!=null)for(R=0;R<w.length;R++){var G=g;Ma(G.h,8*I+2);var V=G.h.end();Fa(G,V),V.push(G.i),G=V,L(w[R],g),V=g;var q=G.pop();for(q=V.i+V.h.length()-q;127<q;)G.push(q&127|128),q>>>=7,V.i++;G.push(q),V.i++}});function wg(g){return function(w,I){e:{if(wc.length){var R=wc.pop();R.setOptions(I),Qm(R.h,w,I),w=R}else w=new eg(w,I);try{var L=bg(g),G=$0(new L.P,w,L);break e}finally{L=w.h,L.i=null,L.m=!1,L.l=0,L.j=0,L.h=0,L.S=!1,w.l=-1,w.i=-1,100>wc.length&&wc.push(w)}G=void 0}return G}}function Eg(g){return function(){var w=new b2;L0(this,w,Yd(g)),Fa(w,w.h.end());for(var I=new Uint8Array(w.i),R=w.j,L=R.length,G=0,V=0;V<L;V++){var q=R[V];I.set(q,G),G+=q.length}return w.j=[I],I}}function Tc(g){no.call(this,g)}b(Tc,no);var U0=[Tc,1,hn,2,$i,3,V0,4,V0];Tc.prototype.l=Eg(U0);function Zd(g){no.call(this,g,-1,A2)}b(Zd,no),Zd.prototype.addClassification=function(g,w){return O0(this,1,Tc,g,w),this};var A2=[1],pr=wg([Zd,1,B0,U0]);function Pa(g){no.call(this,g)}b(Pa,no);var $a=[Pa,1,$i,2,$i,3,$i,4,$i,5,$i];Pa.prototype.l=Eg($a);function Cg(g){no.call(this,g,-1,Tg)}b(Cg,no);var Tg=[1],ko=wg([Cg,1,B0,$a]);function nf(g){no.call(this,g)}b(nf,no);var _g=[nf,1,$i,2,$i,3,$i,4,$i,5,$i,6,wn],G0=wg(_g);nf.prototype.l=Eg(_g);function Ig(g,w,I){if(I=g.createShader(I===0?g.VERTEX_SHADER:g.FRAGMENT_SHADER),g.shaderSource(I,w),g.compileShader(I),!g.getShaderParameter(I,g.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+g.getShaderInfoLog(I));return I}function Sg(g){return Ql(g,Tc,1).map(function(w){var I=Fi(w,1);return{index:I??0,score:ws(w,2),label:Fi(w,3)!=null?jd(Fi(w,3),""):void 0,displayName:Fi(w,4)!=null?jd(Fi(w,4),""):void 0}})}function Dg(g){return{x:ws(g,1),y:ws(g,2),z:ws(g,3),visibility:sg(g,4)!=null?ws(g,4):void 0}}function go(g){return g.map(function(w){return Ql(ko(w),Pa,1).map(Dg)})}function Ng(g,w){this.i=g,this.h=w,this.m=0}function Oo(g,w,I){return R2(g,w),typeof g.h.canvas.transferToImageBitmap=="function"?Promise.resolve(g.h.canvas.transferToImageBitmap()):I?Promise.resolve(g.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(g.h.canvas):(g.j===void 0&&(g.j=document.createElement("canvas")),new Promise(function(R){g.j.height=g.h.canvas.height,g.j.width=g.h.canvas.width,g.j.getContext("2d",{}).drawImage(g.h.canvas,0,0,g.h.canvas.width,g.h.canvas.height),R(g.j)}))}function R2(g,w){var I=g.h;if(g.s===void 0){var R=Ig(I,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),L=Ig(I,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),G=I.createProgram();if(I.attachShader(G,R),I.attachShader(G,L),I.linkProgram(G),!I.getProgramParameter(G,I.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+I.getProgramInfoLog(G));R=g.s=G,I.useProgram(R),L=I.getUniformLocation(R,"sampler0"),g.l={O:I.getAttribLocation(R,"aVertex"),N:I.getAttribLocation(R,"aTex"),xa:L},g.v=I.createBuffer(),I.bindBuffer(I.ARRAY_BUFFER,g.v),I.enableVertexAttribArray(g.l.O),I.vertexAttribPointer(g.l.O,2,I.FLOAT,!1,0,0),I.bufferData(I.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),I.STATIC_DRAW),I.bindBuffer(I.ARRAY_BUFFER,null),g.u=I.createBuffer(),I.bindBuffer(I.ARRAY_BUFFER,g.u),I.enableVertexAttribArray(g.l.N),I.vertexAttribPointer(g.l.N,2,I.FLOAT,!1,0,0),I.bufferData(I.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),I.STATIC_DRAW),I.bindBuffer(I.ARRAY_BUFFER,null),I.uniform1i(L,0)}R=g.l,I.useProgram(g.s),I.canvas.width=w.width,I.canvas.height=w.height,I.viewport(0,0,w.width,w.height),I.activeTexture(I.TEXTURE0),g.i.bindTexture2d(w.glName),I.enableVertexAttribArray(R.O),I.bindBuffer(I.ARRAY_BUFFER,g.v),I.vertexAttribPointer(R.O,2,I.FLOAT,!1,0,0),I.enableVertexAttribArray(R.N),I.bindBuffer(I.ARRAY_BUFFER,g.u),I.vertexAttribPointer(R.N,2,I.FLOAT,!1,0,0),I.bindFramebuffer(I.DRAW_FRAMEBUFFER?I.DRAW_FRAMEBUFFER:I.FRAMEBUFFER,null),I.clearColor(0,0,0,0),I.clear(I.COLOR_BUFFER_BIT),I.colorMask(!0,!0,!0,!0),I.drawArrays(I.TRIANGLE_FAN,0,4),I.disableVertexAttribArray(R.O),I.disableVertexAttribArray(R.N),I.bindBuffer(I.ARRAY_BUFFER,null),g.i.bindTexture2d(0)}function j0(g){this.h=g}var La=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Qd(g,w){return w+g}function Jd(g,w){window[g]=w}function Nn(g){var w=document.createElement("script");return w.setAttribute("src",g),w.setAttribute("crossorigin","anonymous"),new Promise(function(I){w.addEventListener("load",function(){I()},!1),w.addEventListener("error",function(){I()},!1),document.body.appendChild(w)})}function Va(){return ae(function(g){switch(g.h){case 1:return g.s=2,F(g,WebAssembly.instantiate(La),4);case 4:g.h=3,g.s=0;break;case 2:return g.s=0,g.l=null,g.return(!1);case 3:return g.return(!0)}})}function rf(g){if(this.h=g,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=g&&g.locateFile||Qd,typeof window=="object")var w=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")w=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=w,g.options){w=a(Object.keys(g.options));for(var I=w.next();!I.done;I=w.next()){I=I.value;var R=g.options[I].default;R!==void 0&&(this.l[I]=typeof R=="function"?R():R)}}}e=rf.prototype,e.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function k2(g){var w,I,R,L,G,V,q,ee,me,ge,Ye;return ae(function(Fe){switch(Fe.h){case 1:return g.ga?(w=g.h.files===void 0?[]:typeof g.h.files=="function"?g.h.files(g.l):g.h.files,F(Fe,Va(),2)):Fe.return();case 2:if(I=Fe.i,typeof window=="object")return Jd("createMediapipeSolutionsWasm",{locateFile:g.locateFile}),Jd("createMediapipeSolutionsPackedAssets",{locateFile:g.locateFile}),V=w.filter(function(Ie){return Ie.data!==void 0}),q=w.filter(function(Ie){return Ie.data===void 0}),ee=Promise.all(V.map(function(Ie){var Je=ep(g,Ie.url);if(Ie.path!==void 0){var Et=Ie.path;Je=Je.then(function(En){return g.overrideFile(Et,En),Promise.resolve(En)})}return Je})),me=Promise.all(q.map(function(Ie){return Ie.simd===void 0||Ie.simd&&I||!Ie.simd&&!I?Nn(g.locateFile(Ie.url,g.ha)):Promise.resolve()})).then(function(){var Ie,Je,Et;return ae(function(En){if(En.h==1)return Ie=window.createMediapipeSolutionsWasm,Je=window.createMediapipeSolutionsPackedAssets,Et=g,F(En,Ie(Je),2);Et.i=En.i,En.h=0})}),ge=function(){return ae(function(Ie){return g.h.graph&&g.h.graph.url?Ie=F(Ie,ep(g,g.h.graph.url),0):(Ie.h=0,Ie=void 0),Ie})}(),F(Fe,Promise.all([me,ee,ge]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return R=w.filter(function(Ie){return Ie.simd===void 0||Ie.simd&&I||!Ie.simd&&!I}).map(function(Ie){return g.locateFile(Ie.url,g.ha)}),importScripts.apply(null,u(R)),L=g,F(Fe,createMediapipeSolutionsWasm(Module),6);case 6:L.i=Fe.i,g.m=new OffscreenCanvas(1,1),g.i.canvas=g.m,G=g.i.GL.createContext(g.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),g.i.GL.makeContextCurrent(G),Fe.h=4;break;case 7:if(g.m=document.createElement("canvas"),Ye=g.m.getContext("webgl2",{}),!Ye&&(Ye=g.m.getContext("webgl",{}),!Ye))return alert("Failed to create WebGL canvas context when passing video frame."),Fe.return();g.K=Ye,g.i.canvas=g.m,g.i.createContext(g.m,!0,!0,{});case 4:g.j=new g.i.SolutionWasm,g.ga=!1,Fe.h=0}})}function Ag(g){var w,I,R,L,G,V,q,ee;return ae(function(me){if(me.h==1){if(g.h.graph&&g.h.graph.url&&g.fa===g.h.graph.url)return me.return();if(g.u=!0,!g.h.graph||!g.h.graph.url){me.h=2;return}return g.fa=g.h.graph.url,F(me,ep(g,g.h.graph.url),3)}for(me.h!=2&&(w=me.i,g.j.loadGraph(w)),I=a(Object.keys(g.D)),R=I.next();!R.done;R=I.next())L=R.value,g.j.overrideFile(L,g.D[L]);if(g.D={},g.h.listeners)for(G=a(g.h.listeners),V=G.next();!V.done;V=G.next())q=V.value,tp(g,q);ee=g.l,g.l={},g.setOptions(ee),me.h=0})}e.reset=function(){var g=this;return ae(function(w){g.j&&(g.j.reset(),g.s={},g.v={}),w.h=0})},e.setOptions=function(g,w){var I=this;if(w=w||this.h.options){for(var R=[],L=[],G={},V=a(Object.keys(g)),q=V.next();!q.done;G={X:G.X,Y:G.Y},q=V.next())if(q=q.value,!(q in this.l&&this.l[q]===g[q])){this.l[q]=g[q];var ee=w[q];ee!==void 0&&(ee.onChange&&(G.X=ee.onChange,G.Y=g[q],R.push(function(me){return function(){var ge;return ae(function(Ye){if(Ye.h==1)return F(Ye,me.X(me.Y),2);ge=Ye.i,ge===!0&&(I.u=!0),Ye.h=0})}}(G))),ee.graphOptionXref&&(q=Object.assign({},{calculatorName:"",calculatorIndex:0},ee.graphOptionXref,{valueNumber:ee.type===1?g[q]:0,valueBoolean:ee.type===0?g[q]:!1,valueString:ee.type===2?g[q]:""}),L.push(q)))}(R.length!==0||L.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(L),this.F=(this.F===void 0?[]:this.F).concat(R))}};function O2(g){var w,I,R,L,G,V,q;return ae(function(ee){switch(ee.h){case 1:if(!g.u)return ee.return();if(!g.F){ee.h=2;break}w=a(g.F),I=w.next();case 3:if(I.done){ee.h=5;break}return R=I.value,F(ee,R(),4);case 4:I=w.next(),ee.h=3;break;case 5:g.F=void 0;case 2:if(g.H){for(L=new g.i.GraphOptionChangeRequestList,G=a(g.H),V=G.next();!V.done;V=G.next())q=V.value,L.push_back(q);g.j.changeOptions(L),L.delete(),g.H=void 0}g.u=!1,ee.h=0}})}e.initialize=function(){var g=this;return ae(function(w){return w.h==1?F(w,k2(g),2):w.h!=3?F(w,Ag(g),3):F(w,O2(g),0)})};function ep(g,w){var I,R;return ae(function(L){return w in g.L?L.return(g.L[w]):(I=g.locateFile(w,""),R=fetch(I).then(function(G){return G.arrayBuffer()}),g.L[w]=R,L.return(R))})}e.overrideFile=function(g,w){this.j?this.j.overrideFile(g,w):this.D[g]=w},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(g,w){var I=this,R,L,G,V,q,ee,me,ge,Ye;return ae(function(Fe){switch(Fe.h){case 1:return I.h.inputs?(R=1e3*(w??performance.now()),F(Fe,I.I,2)):Fe.return();case 2:return F(Fe,I.initialize(),3);case 3:for(L=new I.i.PacketDataList,G=a(Object.keys(g)),V=G.next();!V.done;V=G.next())if(q=V.value,ee=I.h.inputs[q]){e:{var Ie=g[q];switch(ee.type){case"video":var Je=I.s[ee.stream];if(Je||(Je=new Ng(I.i,I.K),I.s[ee.stream]=Je),Je.m===0&&(Je.m=Je.i.createTexture()),typeof HTMLVideoElement<"u"&&Ie instanceof HTMLVideoElement)var Et=Ie.videoWidth,En=Ie.videoHeight;else typeof HTMLImageElement<"u"&&Ie instanceof HTMLImageElement?(Et=Ie.naturalWidth,En=Ie.naturalHeight):(Et=Ie.width,En=Ie.height);En={glName:Je.m,width:Et,height:En},Et=Je.h,Et.canvas.width=En.width,Et.canvas.height=En.height,Et.activeTexture(Et.TEXTURE0),Je.i.bindTexture2d(Je.m),Et.texImage2D(Et.TEXTURE_2D,0,Et.RGBA,Et.RGBA,Et.UNSIGNED_BYTE,Ie),Je.i.bindTexture2d(0),Je=En;break e;case"detections":for(Je=I.s[ee.stream],Je||(Je=new j0(I.i),I.s[ee.stream]=Je),Je.data||(Je.data=new Je.h.DetectionListData),Je.data.reset(Ie.length),En=0;En<Ie.length;++En){Et=Ie[En];var mn=Je.data,Nr=mn.setBoundingBox,ii=En,hr=Et.la,Ht=new nf;if(Pi(Ht,1,hr.ra),Pi(Ht,2,hr.sa),Pi(Ht,3,hr.height),Pi(Ht,4,hr.width),Pi(Ht,5,hr.rotation),Ro(Ht,6,hr.pa),hr=Ht.l(),Nr.call(mn,ii,hr),Et.ea)for(mn=0;mn<Et.ea.length;++mn){Ht=Et.ea[mn],Nr=Je.data,ii=Nr.addNormalizedLandmark,hr=En,Ht=Object.assign({},Ht,{visibility:Ht.visibility?Ht.visibility:0});var Ar=new Pa;Pi(Ar,1,Ht.x),Pi(Ar,2,Ht.y),Pi(Ar,3,Ht.z),Ht.visibility&&Pi(Ar,4,Ht.visibility),Ht=Ar.l(),ii.call(Nr,hr,Ht)}if(Et.ba)for(mn=0;mn<Et.ba.length;++mn)Nr=Je.data,ii=Nr.addClassification,hr=En,Ht=Et.ba[mn],Ar=new Tc,Pi(Ar,2,Ht.score),Ht.index&&Ro(Ar,1,Ht.index),Ht.label&&Ro(Ar,3,Ht.label),Ht.displayName&&Ro(Ar,4,Ht.displayName),Ht=Ar.l(),ii.call(Nr,hr,Ht)}Je=Je.data;break e;default:Je={}}}switch(me=Je,ge=ee.stream,ee.type){case"video":L.pushTexture2d(Object.assign({},me,{stream:ge,timestamp:R}));break;case"detections":Ye=me,Ye.stream=ge,Ye.timestamp=R,L.pushDetectionList(Ye);break;default:throw Error("Unknown input config type: '"+ee.type+"'")}}return I.j.send(L),F(Fe,I.I,4);case 4:L.delete(),Fe.h=0}})};function M2(g,w,I){var R,L,G,V,q,ee,me,ge,Ye,Fe,Ie,Je,Et,En;return ae(function(mn){switch(mn.h){case 1:if(!I)return mn.return(w);for(R={},L=0,G=a(Object.keys(I)),V=G.next();!V.done;V=G.next())q=V.value,ee=I[q],typeof ee!="string"&&ee.type==="texture"&&w[ee.stream]!==void 0&&++L;1<L&&(g.M=!1),me=a(Object.keys(I)),V=me.next();case 2:if(V.done){mn.h=4;break}if(ge=V.value,Ye=I[ge],typeof Ye=="string")return Et=R,En=ge,F(mn,z0(g,ge,w[Ye]),14);if(Fe=w[Ye.stream],Ye.type==="detection_list"){if(Fe){for(var Nr=Fe.getRectList(),ii=Fe.getLandmarksList(),hr=Fe.getClassificationsList(),Ht=[],Ar=0;Ar<Nr.size();++Ar){var Es=G0(Nr.get(Ar)),W0=ws(Es,1),Ba=ws(Es,2),np=ws(Es,3),F2=ws(Es,4),P2=ws(Es,5,0),rp=void 0;rp=rp===void 0?0:rp,Es={la:{ra:W0,sa:Ba,height:np,width:F2,rotation:P2,pa:jd(Fi(Es,6),rp)},ea:Ql(ko(ii.get(Ar)),Pa,1).map(Dg),ba:Sg(pr(hr.get(Ar)))},Ht.push(Es)}Nr=Ht}else Nr=[];R[ge]=Nr,mn.h=7;break}if(Ye.type==="proto_list"){if(Fe){for(Nr=Array(Fe.size()),ii=0;ii<Fe.size();ii++)Nr[ii]=Fe.get(ii);Fe.delete()}else Nr=[];R[ge]=Nr,mn.h=7;break}if(Fe===void 0){mn.h=3;break}if(Ye.type==="float_list"){R[ge]=Fe,mn.h=7;break}if(Ye.type==="proto"){R[ge]=Fe,mn.h=7;break}if(Ye.type!=="texture")throw Error("Unknown output config type: '"+Ye.type+"'");return Ie=g.v[ge],Ie||(Ie=new Ng(g.i,g.K),g.v[ge]=Ie),F(mn,Oo(Ie,Fe,g.M),13);case 13:Je=mn.i,R[ge]=Je;case 7:Ye.transform&&R[ge]&&(R[ge]=Ye.transform(R[ge])),mn.h=3;break;case 14:Et[En]=mn.i;case 3:V=me.next(),mn.h=2;break;case 4:return mn.return(R)}})}function z0(g,w,I){var R;return ae(function(L){return typeof I=="number"||I instanceof Uint8Array||I instanceof g.i.Uint8BlobList?L.return(I):I instanceof g.i.Texture2dDataOut?(R=g.v[w],R||(R=new Ng(g.i,g.K),g.v[w]=R),L.return(Oo(R,I,g.M))):L.return(void 0)})}function tp(g,w){for(var I=w.name||"$",R=[].concat(u(w.wants)),L=new g.i.StringList,G=a(w.wants),V=G.next();!V.done;V=G.next())L.push_back(V.value);G=g.i.PacketListener.implement({onResults:function(q){for(var ee={},me=0;me<w.wants.length;++me)ee[R[me]]=q.get(me);var ge=g.listeners[I];ge&&(g.I=M2(g,ee,w.outs).then(function(Ye){Ye=ge(Ye);for(var Fe=0;Fe<w.wants.length;++Fe){var Ie=ee[R[Fe]];typeof Ie=="object"&&Ie.hasOwnProperty&&Ie.hasOwnProperty("delete")&&Ie.delete()}Ye&&(g.I=Ye)}))}}),g.j.attachMultiListener(L,G),L.delete()}e.onResults=function(g,w){this.listeners[w||"$"]=g},Me("Solution",rf),Me("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function wu(g){return g===void 0&&(g=0),g===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function H0(g){var w=this;g=g||{},this.h=new rf({locateFile:g.locateFile,files:function(I){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:wu(I.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:go},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:go},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(I){return I.map(function(R){return Sg(pr(R))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(I){var R,L,G;return ae(function(V){return V.h==1?(R=wu(I),L="third_party/mediapipe/modules/hand_landmark/"+R,F(V,ep(w.h,R),2)):(G=V.i,w.h.overrideFile(L,G),V.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}e=H0.prototype,e.close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(g){this.h.onResults(g)},e.initialize=function(){var g=this;return ae(function(w){return F(w,g.h.initialize(),0)})},e.reset=function(){this.h.reset()},e.send=function(g){var w=this;return ae(function(I){return F(I,w.h.send(g),0)})},e.setOptions=function(g){this.h.setOptions(g)},Me("Hands",H0),Me("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Me("VERSION","0.4.1675469240")}).call(rz)});var Mz=$o((jBe,Oz)=>{"use strict";Oz.exports=kn;var zs=null;try{zs=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function kn(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}kn.prototype.__isLong__;Object.defineProperty(kn.prototype,"__isLong__",{value:!0});function Ii(e){return(e&&e.__isLong__)===!0}kn.isLong=Ii;var Tz={},_z={};function od(e,t){var n,r,o;return t?(e>>>=0,(o=0<=e&&e<256)&&(r=_z[e],r)?r:(n=On(e,(e|0)<0?-1:0,!0),o&&(_z[e]=n),n)):(e|=0,(o=-128<=e&&e<128)&&(r=Tz[e],r)?r:(n=On(e,e<0?-1:0,!1),o&&(Tz[e]=n),n))}kn.fromInt=od;function Hs(e,t){if(isNaN(e))return t?rd:Ws;if(t){if(e<0)return rd;if(e>=Nz)return kz}else{if(e<=-Sz)return _i;if(e+1>=Sz)return Rz}return e<0?Hs(-e,t).neg():On(e%pm|0,e/pm|0,t)}kn.fromNumber=Hs;function On(e,t,n){return new kn(e,t,n)}kn.fromBits=On;var BT=Math.pow;function kM(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return Ws;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return kM(e.substring(1),t,n).neg();for(var o=Hs(BT(n,8)),i=Ws,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),n);if(a<8){var c=Hs(BT(n,a));i=i.mul(c).add(Hs(u))}else i=i.mul(o),i=i.add(Hs(u))}return i.unsigned=t,i}kn.fromString=kM;function wa(e,t){return typeof e=="number"?Hs(e,t):typeof e=="string"?kM(e,t):On(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}kn.fromValue=wa;var Iz=65536,H0e=1<<24,pm=Iz*Iz,Nz=pm*pm,Sz=Nz/2,Dz=od(H0e),Ws=od(0);kn.ZERO=Ws;var rd=od(0,!0);kn.UZERO=rd;var dm=od(1);kn.ONE=dm;var Az=od(1,!0);kn.UONE=Az;var RM=od(-1);kn.NEG_ONE=RM;var Rz=On(-1,2147483647,!1);kn.MAX_VALUE=Rz;var kz=On(-1,-1,!0);kn.MAX_UNSIGNED_VALUE=kz;var _i=On(0,-2147483648,!1);kn.MIN_VALUE=_i;var we=kn.prototype;we.toInt=function(){return this.unsigned?this.low>>>0:this.low};we.toNumber=function(){return this.unsigned?(this.high>>>0)*pm+(this.low>>>0):this.high*pm+(this.low>>>0)};we.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(_i)){var n=Hs(t),r=this.div(n),o=r.mul(n).sub(this);return r.toString(t)+o.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var i=Hs(BT(t,6),this.unsigned),s=this,a="";;){var u=s.div(i),c=s.sub(u.mul(i)).toInt()>>>0,f=c.toString(t);if(s=u,s.isZero())return f+a;for(;f.length<6;)f="0"+f;a=""+f+a}};we.getHighBits=function(){return this.high};we.getHighBitsUnsigned=function(){return this.high>>>0};we.getLowBits=function(){return this.low};we.getLowBitsUnsigned=function(){return this.low>>>0};we.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_i)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&!(t&1<<n);n--);return this.high!=0?n+33:n+1};we.isZero=function(){return this.high===0&&this.low===0};we.eqz=we.isZero;we.isNegative=function(){return!this.unsigned&&this.high<0};we.isPositive=function(){return this.unsigned||this.high>=0};we.isOdd=function(){return(this.low&1)===1};we.isEven=function(){return(this.low&1)===0};we.equals=function(t){return Ii(t)||(t=wa(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};we.eq=we.equals;we.notEquals=function(t){return!this.eq(t)};we.neq=we.notEquals;we.ne=we.notEquals;we.lessThan=function(t){return this.comp(t)<0};we.lt=we.lessThan;we.lessThanOrEqual=function(t){return this.comp(t)<=0};we.lte=we.lessThanOrEqual;we.le=we.lessThanOrEqual;we.greaterThan=function(t){return this.comp(t)>0};we.gt=we.greaterThan;we.greaterThanOrEqual=function(t){return this.comp(t)>=0};we.gte=we.greaterThanOrEqual;we.ge=we.greaterThanOrEqual;we.compare=function(t){if(Ii(t)||(t=wa(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};we.comp=we.compare;we.negate=function(){return!this.unsigned&&this.eq(_i)?_i:this.not().add(dm)};we.neg=we.negate;we.add=function(t){Ii(t)||(t=wa(t));var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,i=this.low&65535,s=t.high>>>16,a=t.high&65535,u=t.low>>>16,c=t.low&65535,f=0,d=0,h=0,m=0;return m+=i+c,h+=m>>>16,m&=65535,h+=o+u,d+=h>>>16,h&=65535,d+=r+a,f+=d>>>16,d&=65535,f+=n+s,f&=65535,On(h<<16|m,f<<16|d,this.unsigned)};we.subtract=function(t){return Ii(t)||(t=wa(t)),this.add(t.neg())};we.sub=we.subtract;we.multiply=function(t){if(this.isZero())return Ws;if(Ii(t)||(t=wa(t)),zs){var n=zs.mul(this.low,this.high,t.low,t.high);return On(n,zs.get_high(),this.unsigned)}if(t.isZero())return Ws;if(this.eq(_i))return t.isOdd()?_i:Ws;if(t.eq(_i))return this.isOdd()?_i:Ws;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Dz)&&t.lt(Dz))return Hs(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=t.high>>>16,u=t.high&65535,c=t.low>>>16,f=t.low&65535,d=0,h=0,m=0,v=0;return v+=s*f,m+=v>>>16,v&=65535,m+=i*f,h+=m>>>16,m&=65535,m+=s*c,h+=m>>>16,m&=65535,h+=o*f,d+=h>>>16,h&=65535,h+=i*c,d+=h>>>16,h&=65535,h+=s*u,d+=h>>>16,h&=65535,d+=r*f+o*c+i*u+s*a,d&=65535,On(m<<16|v,d<<16|h,this.unsigned)};we.mul=we.multiply;we.divide=function(t){if(Ii(t)||(t=wa(t)),t.isZero())throw Error("division by zero");if(zs){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?zs.div_u:zs.div_s)(this.low,this.high,t.low,t.high);return On(n,zs.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?rd:Ws;var r,o,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return rd;if(t.gt(this.shru(1)))return Az;i=rd}else{if(this.eq(_i)){if(t.eq(dm)||t.eq(RM))return _i;if(t.eq(_i))return dm;var s=this.shr(1);return r=s.div(t).shl(1),r.eq(Ws)?t.isNegative()?dm:RM:(o=this.sub(t.mul(r)),i=r.add(o.div(t)),i)}else if(t.eq(_i))return this.unsigned?rd:Ws;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=Ws}for(o=this;o.gte(t);){r=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:BT(2,a-48),c=Hs(r),f=c.mul(t);f.isNegative()||f.gt(o);)r-=u,c=Hs(r,this.unsigned),f=c.mul(t);c.isZero()&&(c=dm),i=i.add(c),o=o.sub(f)}return i};we.div=we.divide;we.modulo=function(t){if(Ii(t)||(t=wa(t)),zs){var n=(this.unsigned?zs.rem_u:zs.rem_s)(this.low,this.high,t.low,t.high);return On(n,zs.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};we.mod=we.modulo;we.rem=we.modulo;we.not=function(){return On(~this.low,~this.high,this.unsigned)};we.and=function(t){return Ii(t)||(t=wa(t)),On(this.low&t.low,this.high&t.high,this.unsigned)};we.or=function(t){return Ii(t)||(t=wa(t)),On(this.low|t.low,this.high|t.high,this.unsigned)};we.xor=function(t){return Ii(t)||(t=wa(t)),On(this.low^t.low,this.high^t.high,this.unsigned)};we.shiftLeft=function(t){return Ii(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?On(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):On(0,this.low<<t-32,this.unsigned)};we.shl=we.shiftLeft;we.shiftRight=function(t){return Ii(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?On(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):On(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};we.shr=we.shiftRight;we.shiftRightUnsigned=function(t){if(Ii(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var r=this.low;return On(r>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?On(n,0,this.unsigned):On(n>>>t-32,0,this.unsigned)};we.shru=we.shiftRightUnsigned;we.shr_u=we.shiftRightUnsigned;we.toSigned=function(){return this.unsigned?On(this.low,this.high,!1):this};we.toUnsigned=function(){return this.unsigned?this:On(this.low,this.high,!0)};we.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};we.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};we.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};kn.fromBytes=function(t,n,r){return r?kn.fromBytesLE(t,n):kn.fromBytesBE(t,n)};kn.fromBytesLE=function(t,n){return new kn(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};kn.fromBytesBE=function(t,n){return new kn(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)}});var IH=$o((wm,_H)=>{"use strict";var Axe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pd=Axe();_H.exports=wm=pd.fetch;pd.fetch&&(wm.default=pd.fetch.bind(pd));wm.Headers=pd.Headers;wm.Request=pd.Request;wm.Response=pd.Response});var SH=$o(()=>{"use strict"});var t7=$o((e7,nF)=>{"use strict";(function(e,t,n){function r(a){var u=this,c=s();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(a),u.s0<0&&(u.s0+=1),u.s1-=c(a),u.s1<0&&(u.s1+=1),u.s2-=c(a),u.s2<0&&(u.s2+=1),c=null}function o(a,u){return u.c=a.c,u.s0=a.s0,u.s1=a.s1,u.s2=a.s2,u}function i(a,u){var c=new r(a),f=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&o(f,c),d.state=function(){return o(c,{})}),d}function s(){var a=4022871197,u=function(c){c=String(c);for(var f=0;f<c.length;f++){a+=c.charCodeAt(f);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.alea=i})(e7,typeof nF=="object"&&nF,typeof define=="function"&&define)});var r7=$o((n7,rF)=>{"use strict";(function(e,t,n){function r(s){var a=this,u="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var f=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^f^f>>>8},s===(s|0)?a.x=s:u+=s;for(var c=0;c<u.length+64;c++)a.x^=u.charCodeAt(c)|0,a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function i(s,a){var u=new r(s),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xor128=i})(n7,typeof rF=="object"&&rF,typeof define=="function"&&define)});var i7=$o((o7,oF)=>{"use strict";(function(e,t,n){function r(s){var a=this,u="";a.next=function(){var f=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(f^f<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:u+=s;for(var c=0;c<u.length+64;c++)a.x^=u.charCodeAt(c)|0,c==u.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function i(s,a){var u=new r(s),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xorwow=i})(o7,typeof oF=="object"&&oF,typeof define=="function"&&define)});var a7=$o((s7,iF)=>{"use strict";(function(e,t,n){function r(s){var a=this;a.next=function(){var c=a.x,f=a.i,d,h,m;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,a.i=f+1&7,h};function u(c,f){var d,h,m=[];if(f===(f|0))h=m[0]=f;else for(f=""+f,d=0;d<f.length;++d)m[d&7]=m[d&7]<<15^f.charCodeAt(d)+m[d+1&7]<<13;for(;m.length<8;)m.push(0);for(d=0;d<8&&m[d]===0;++d);for(d==8?h=m[7]=-1:h=m[d],c.x=m,c.i=0,d=256;d>0;--d)c.next()}u(a,s)}function o(s,a){return a.x=s.x.slice(),a.i=s.i,a}function i(s,a){s==null&&(s=+new Date);var u=new r(s),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.x&&o(c,u),f.state=function(){return o(u,{})}),f}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xorshift7=i})(s7,typeof iF=="object"&&iF,typeof define=="function"&&define)});var c7=$o((u7,sF)=>{"use strict";(function(e,t,n){function r(s){var a=this;a.next=function(){var c=a.w,f=a.X,d=a.i,h,m;return a.w=c=c+1640531527|0,m=f[d+34&127],h=f[d=d+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=f[d]=m^h,a.i=d,m+(c^c>>>16)|0};function u(c,f){var d,h,m,v,x,b=[],C=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,C=Math.max(C,f.length)),m=0,v=-32;v<C;++v)f&&(h^=f.charCodeAt((v+32)%f.length)),v===0&&(x=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(x=x+1640531527|0,d=b[v&127]^=h+x,m=d==0?m+1:0);for(m>=128&&(b[(f&&f.length||0)&127]=-1),m=127,v=4*128;v>0;--v)h=b[m+34&127],d=b[m=m+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,b[m]=h^d;c.w=x,c.X=b,c.i=m}u(a,s)}function o(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function i(s,a){s==null&&(s=+new Date);var u=new r(s),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(c.X&&o(c,u),f.state=function(){return o(u,{})}),f}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xor4096=i})(u7,typeof sF=="object"&&sF,typeof define=="function"&&define)});var f7=$o((l7,aF)=>{"use strict";(function(e,t,n){function r(s){var a=this,u="";a.next=function(){var f=a.b,d=a.c,h=a.d,m=a.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^m,m=m-f|0,a.b=f=f<<20^f>>>12^d,a.c=d=d-h|0,a.d=h<<16^d>>>16^m,a.a=m-f|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)a.b^=u.charCodeAt(c)|0,a.next()}function o(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function i(s,a){var u=new r(s),c=a&&a.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var d=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=u.next,f.quick=f,c&&(typeof c=="object"&&o(c,u),f.state=function(){return o(u,{})}),f}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.tychei=i})(l7,typeof aF=="object"&&aF,typeof define=="function"&&define)});var d7=$o(()=>{"use strict"});var h7=$o((p7,I_)=>{"use strict";(function(e,t,n){var r=256,o=6,i=52,s="random",a=n.pow(r,o),u=n.pow(2,i),c=u*2,f=r-1,d;function h(O,F,B){var H=[];F=F==!0?{entropy:!0}:F||{};var X=b(x(F.entropy?[O,D(t)]:O??C(),3),H),Z=new m(H),te=function(){for(var J=Z.g(o),ae=a,ye=0;J<u;)J=(J+ye)*r,ae*=r,ye=Z.g(1);for(;J>=c;)J/=2,ae/=2,ye>>>=1;return(J+ye)/ae};return te.int32=function(){return Z.g(4)|0},te.quick=function(){return Z.g(4)/4294967296},te.double=te,b(D(Z.S),t),(F.pass||B||function(J,ae,ye,ke){return ke&&(ke.S&&v(ke,Z),J.state=function(){return v(Z,{})}),ye?(n[s]=J,ae):J})(te,X,"global"in F?F.global:this==n,F.state)}function m(O){var F,B=O.length,H=this,X=0,Z=H.i=H.j=0,te=H.S=[];for(B||(O=[B++]);X<r;)te[X]=X++;for(X=0;X<r;X++)te[X]=te[Z=f&Z+O[X%B]+(F=te[X])],te[Z]=F;(H.g=function(J){for(var ae,ye=0,ke=H.i,Ke=H.j,Me=H.S;J--;)ae=Me[ke=f&ke+1],ye=ye*r+Me[f&(Me[ke]=Me[Ke=f&Ke+ae])+(Me[Ke]=ae)];return H.i=ke,H.j=Ke,ye})(r)}function v(O,F){return F.i=O.i,F.j=O.j,F.S=O.S.slice(),F}function x(O,F){var B=[],H=typeof O,X;if(F&&H=="object")for(X in O)try{B.push(x(O[X],F-1))}catch{}return B.length?B:H=="string"?O:O+"\0"}function b(O,F){for(var B=O+"",H,X=0;X<B.length;)F[f&X]=f&(H^=F[f&X]*19)+B.charCodeAt(X++);return D(F)}function C(){try{var O;return d&&(O=d.randomBytes)?O=O(r):(O=new Uint8Array(r),(e.crypto||e.msCrypto).getRandomValues(O)),D(O)}catch{var F=e.navigator,B=F&&F.plugins;return[+new Date,e,B,e.screen,D(t)]}}function D(O){return String.fromCharCode.apply(0,O)}if(b(n.random(),t),typeof I_=="object"&&I_.exports){I_.exports=h;try{d=d7()}catch{}}else typeof define=="function"&&define.amd?define(function(){return h}):n["seed"+s]=h})(typeof self<"u"?self:p7,[],Math)});var g7=$o((AQe,m7)=>{"use strict";var xwe=t7(),bwe=r7(),wwe=i7(),Ewe=a7(),Cwe=c7(),Twe=f7(),wd=h7();wd.alea=xwe;wd.xor128=bwe;wd.xorwow=wwe;wd.xorshift7=Ewe;wd.xor4096=Cwe;wd.tychei=Twe;m7.exports=wd});function FD(e,t){return Object.is(e,t)}var Or=null,Rx=!1,PD=1,Gi=Symbol("SIGNAL");function Kt(e){let t=Or;return Or=e,t}function Q$(){return Or}var Wg={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ox(e){if(Rx)throw new Error("");if(Or===null)return;Or.consumerOnSignalRead(e);let t=Or.nextProducerIndex++;if(Px(Or),t<Or.producerNode.length&&Or.producerNode[t]!==e&&Hg(Or)){let n=Or.producerNode[t];Fx(n,Or.producerIndexOfThis[t])}Or.producerNode[t]!==e&&(Or.producerNode[t]=e,Or.producerIndexOfThis[t]=Hg(Or)?t4(e,Or,t):0),Or.producerLastReadVersion[t]=e.version}function Use(){PD++}function $D(e){if(!(Hg(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===PD)){if(!e.producerMustRecompute(e)&&!VD(e)){MD(e);return}e.producerRecomputeValue(e),MD(e)}}function J$(e){if(e.liveConsumerNode===void 0)return;let t=Rx;Rx=!0;try{for(let n of e.liveConsumerNode)n.dirty||Gse(n)}finally{Rx=t}}function e4(){return Or?.consumerAllowSignalWrites!==!1}function Gse(e){e.dirty=!0,J$(e),e.consumerMarkedDirty?.(e)}function MD(e){e.dirty=!1,e.lastCleanEpoch=PD}function Mx(e){return e&&(e.nextProducerIndex=0),Kt(e)}function LD(e,t){if(Kt(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Hg(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Fx(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function VD(e){Px(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||($D(n),r!==n.version))return!0}return!1}function BD(e){if(Px(e),Hg(e))for(let t=0;t<e.producerNode.length;t++)Fx(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function t4(e,t,n){if(n4(e),e.liveConsumerNode.length===0&&r4(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=t4(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function Fx(e,t){if(n4(e),e.liveConsumerNode.length===1&&r4(e))for(let r=0;r<e.producerNode.length;r++)Fx(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],o=e.liveConsumerNode[t];Px(o),o.producerIndexOfThis[r]=t}}function Hg(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Px(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function n4(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function r4(e){return e.producerNode!==void 0}function o4(e){let t=Object.create(jse);t.computation=e;let n=()=>{if($D(t),Ox(t),t.value===kx)throw t.error;return t.value};return n[Gi]=t,n}var kD=Symbol("UNSET"),OD=Symbol("COMPUTING"),kx=Symbol("ERRORED"),jse=Tt(xe({},Wg),{value:kD,dirty:!0,error:null,equal:FD,producerMustRecompute(e){return e.value===kD||e.value===OD},producerRecomputeValue(e){if(e.value===OD)throw new Error("Detected cycle in computations.");let t=e.value;e.value=OD;let n=Mx(e),r;try{r=e.computation()}catch(o){r=kx,e.error=o}finally{LD(e,n)}if(t!==kD&&t!==kx&&r!==kx&&e.equal(t,r)){e.value=t;return}e.value=r,e.version++}});function zse(){throw new Error}var i4=zse;function s4(){i4()}function a4(e){i4=e}var Hse=null;function u4(e){let t=Object.create(UD);t.value=e;let n=()=>(Ox(t),t.value);return n[Gi]=t,n}function $x(e,t){e4()||s4(),e.equal(e.value,t)||(e.value=t,Wse(e))}function c4(e,t){e4()||s4(),$x(e,t(e.value))}var UD=Tt(xe({},Wg),{equal:FD,value:void 0});function Wse(e){e.version++,Use(),J$(e),Hse?.()}function tt(e){return typeof e=="function"}function hp(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Lx=hp(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function pf(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ir=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(tt(r))try{r()}catch(i){t=i instanceof Lx?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{l4(i)}catch(s){t=t??[],s instanceof Lx?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Lx(t)}}add(t){var n;if(t&&t!==this)if(this.closed)l4(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&pf(n,t)}remove(t){let{_finalizers:n}=this;n&&pf(n,t),t instanceof e&&t._removeParent(this)}};ir.EMPTY=(()=>{let e=new ir;return e.closed=!0,e})();var GD=ir.EMPTY;function Vx(e){return e instanceof ir||e&&"closed"in e&&tt(e.remove)&&tt(e.add)&&tt(e.unsubscribe)}function l4(e){tt(e)?e():e.unsubscribe()}var aa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var mp={setTimeout(e,t,...n){let{delegate:r}=mp;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=mp;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Bx(e){mp.setTimeout(()=>{let{onUnhandledError:t}=aa;if(t)t(e);else throw e})}function qg(){}var f4=jD("C",void 0,void 0);function d4(e){return jD("E",void 0,e)}function p4(e){return jD("N",e,void 0)}function jD(e,t,n){return{kind:e,value:t,error:n}}var hf=null;function gp(e){if(aa.useDeprecatedSynchronousErrorHandling){let t=!hf;if(t&&(hf={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=hf;if(hf=null,n)throw r}}else e()}function h4(e){aa.useDeprecatedSynchronousErrorHandling&&hf&&(hf.errorThrown=!0,hf.error=e)}var mf=class extends ir{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Vx(t)&&t.add(this)):this.destination=Xse}static create(t,n,r){return new yp(t,n,r)}next(t){this.isStopped?HD(p4(t),this):this._next(t)}error(t){this.isStopped?HD(d4(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?HD(f4,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qse=Function.prototype.bind;function zD(e,t){return qse.call(e,t)}var WD=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ux(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ux(r)}else Ux(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ux(n)}}},yp=class extends mf{constructor(t,n,r){super();let o;if(tt(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&aa.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&zD(t.next,i),error:t.error&&zD(t.error,i),complete:t.complete&&zD(t.complete,i)}):o=t}this.destination=new WD(o)}};function Ux(e){aa.useDeprecatedSynchronousErrorHandling?h4(e):Bx(e)}function Kse(e){throw e}function HD(e,t){let{onStoppedNotification:n}=aa;n&&mp.setTimeout(()=>n(e,t))}var Xse={closed:!0,next:qg,error:Kse,complete:qg};var vp=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Lo(e){return e}function qD(...e){return KD(e)}function KD(e){return e.length===0?Lo:e.length===1?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}var jt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=Zse(n)?n:new yp(n,r,o);return gp(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=m4(r),new r((o,i)=>{let s=new yp({next:a=>{try{n(a)}catch(u){i(u),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[vp](){return this}pipe(...n){return KD(n)(this)}toPromise(n){return n=m4(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return e.create=t=>new e(t),e})();function m4(e){var t;return(t=e??aa.Promise)!==null&&t!==void 0?t:Promise}function Yse(e){return e&&tt(e.next)&&tt(e.error)&&tt(e.complete)}function Zse(e){return e&&e instanceof mf||Yse(e)&&Vx(e)}function XD(e){return tt(e?.lift)}function kt(e){return t=>{if(XD(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _t(e,t,n,r,o){return new YD(e,t,n,r,o)}var YD=class extends mf{constructor(t,n,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){t.error(u)}}:super._next,this._error=o?function(a){try{o(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function xp(){return kt((e,t)=>{let n=null;e._refCount++;let r=_t(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let o=e._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var bp=class extends jt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,XD(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ir;let n=this.getSubject();t.add(this.source.subscribe(_t(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ir.EMPTY)}return t}refCount(){return xp()(this)}};var g4=hp(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Er=(()=>{class e extends jt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Gx(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new g4}next(n){gp(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){gp(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){gp(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?GD:(this.currentObservers=null,i.push(n),new ir(()=>{this.currentObservers=null,pf(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new jt;return n.source=this,n}}return e.create=(t,n)=>new Gx(t,n),e})(),Gx=class extends Er{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:GD}};var Mr=class extends Er{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var ZD={now(){return(ZD.delegate||Date).now()},delegate:void 0};var jx=class extends ir{constructor(t,n){super()}schedule(t,n=0){return this}};var Kg={setInterval(e,t,...n){let{delegate:r}=Kg;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=Kg;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var zx=class extends jx{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,n),this}requestAsyncId(t,n,r=0){return Kg.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Kg.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,o;try{this.work(t)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,pf(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var wp=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};wp.now=ZD.now;var Hx=class extends wp{constructor(t,n=wp.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var Xg=new Hx(zx),y4=Xg;var ji=new jt(e=>e.complete());function Wx(e){return e&&tt(e.schedule)}function v4(e){return e[e.length-1]}function qx(e){return tt(v4(e))?e.pop():void 0}function kc(e){return Wx(v4(e))?e.pop():void 0}function b4(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(f){try{c(r.next(f))}catch(d){s(d)}}function u(f){try{c(r.throw(f))}catch(d){s(d)}}function c(f){f.done?i(f.value):o(f.value).then(a,u)}c((r=r.apply(e,t||[])).next())})}function x4(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function gf(e){return this instanceof gf?(this.v=e,this):new gf(e)}function w4(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(v){return Promise.resolve(v).then(m,d)}}function a(m,v){r[m]&&(o[m]=function(x){return new Promise(function(b,C){i.push([m,x,b,C])>1||u(m,x)})},v&&(o[m]=v(o[m])))}function u(m,v){try{c(r[m](v))}catch(x){h(i[0][3],x)}}function c(m){m.value instanceof gf?Promise.resolve(m.value.v).then(f,d):h(i[0][2],m)}function f(m){u("next",m)}function d(m){u("throw",m)}function h(m,v){m(v),i.shift(),i.length&&u(i[0][0],i[0][1])}}function E4(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof x4=="function"?x4(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,u){s=e[i](s),o(a,u,s.done,s.value)})}}function o(i,s,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},s)}}var Ep=e=>e&&typeof e.length=="number"&&typeof e!="function";function Kx(e){return tt(e?.then)}function Xx(e){return tt(e[vp])}function Yx(e){return Symbol.asyncIterator&&tt(e?.[Symbol.asyncIterator])}function Zx(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Qse(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Qx=Qse();function Jx(e){return tt(e?.[Qx])}function e1(e){return w4(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:o}=yield gf(n.read());if(o)return yield gf(void 0);yield yield gf(r)}}finally{n.releaseLock()}})}function t1(e){return tt(e?.getReader)}function Gn(e){if(e instanceof jt)return e;if(e!=null){if(Xx(e))return Jse(e);if(Ep(e))return eae(e);if(Kx(e))return tae(e);if(Yx(e))return C4(e);if(Jx(e))return nae(e);if(t1(e))return rae(e)}throw Zx(e)}function Jse(e){return new jt(t=>{let n=e[vp]();if(tt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function eae(e){return new jt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function tae(e){return new jt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Bx)})}function nae(e){return new jt(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function C4(e){return new jt(t=>{oae(e,t).catch(n=>t.error(n))})}function rae(e){return C4(e1(e))}function oae(e,t){var n,r,o,i;return b4(this,void 0,void 0,function*(){try{for(n=E4(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})}function li(e,t,n,r=0,o=!1){let i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function n1(e,t=0){return kt((n,r)=>{n.subscribe(_t(r,o=>li(r,e,()=>r.next(o),t),()=>li(r,e,()=>r.complete(),t),o=>li(r,e,()=>r.error(o),t)))})}function r1(e,t=0){return kt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function T4(e,t){return Gn(e).pipe(r1(t),n1(t))}function _4(e,t){return Gn(e).pipe(r1(t),n1(t))}function I4(e,t){return new jt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function S4(e,t){return new jt(n=>{let r;return li(n,t,()=>{r=e[Qx](),li(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>tt(r?.return)&&r.return()})}function o1(e,t){if(!e)throw new Error("Iterable cannot be null");return new jt(n=>{li(n,t,()=>{let r=e[Symbol.asyncIterator]();li(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function D4(e,t){return o1(e1(e),t)}function N4(e,t){if(e!=null){if(Xx(e))return T4(e,t);if(Ep(e))return I4(e,t);if(Kx(e))return _4(e,t);if(Yx(e))return o1(e,t);if(Jx(e))return S4(e,t);if(t1(e))return D4(e,t)}throw Zx(e)}function Mn(e,t){return t?N4(e,t):Gn(e)}function ot(...e){let t=kc(e);return Mn(e,t)}function Cp(e,t){let n=tt(e)?e:()=>e,r=o=>o.error(n());return new jt(t?o=>t.schedule(r,0,o):r)}function QD(e){return!!e&&(e instanceof jt||tt(e.lift)&&tt(e.subscribe))}var Ru=hp(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function A4(e){return e instanceof Date&&!isNaN(e)}function vt(e,t){return kt((n,r)=>{let o=0;n.subscribe(_t(r,i=>{r.next(e.call(t,i,o++))}))})}var{isArray:iae}=Array;function sae(e,t){return iae(t)?e(...t):e(t)}function Tp(e){return vt(t=>sae(e,t))}var{isArray:aae}=Array,{getPrototypeOf:uae,prototype:cae,keys:lae}=Object;function i1(e){if(e.length===1){let t=e[0];if(aae(t))return{args:t,keys:null};if(fae(t)){let n=lae(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function fae(e){return e&&typeof e=="object"&&uae(e)===cae}function s1(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}function Yg(...e){let t=kc(e),n=qx(e),{args:r,keys:o}=i1(e);if(r.length===0)return Mn([],t);let i=new jt(dae(r,t,o?s=>s1(o,s):Lo));return n?i.pipe(Tp(n)):i}function dae(e,t,n=Lo){return r=>{R4(t,()=>{let{length:o}=e,i=new Array(o),s=o,a=o;for(let u=0;u<o;u++)R4(t,()=>{let c=Mn(e[u],t),f=!1;c.subscribe(_t(r,d=>{i[u]=d,f||(f=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function R4(e,t,n){e?li(n,e,t):t()}function k4(e,t,n,r,o,i,s,a){let u=[],c=0,f=0,d=!1,h=()=>{d&&!u.length&&!c&&t.complete()},m=x=>c<r?v(x):u.push(x),v=x=>{i&&t.next(x),c++;let b=!1;Gn(n(x,f++)).subscribe(_t(t,C=>{o?.(C),i?m(C):t.next(C)},()=>{b=!0},void 0,()=>{if(b)try{for(c--;u.length&&c<r;){let C=u.shift();s?li(t,s,()=>v(C)):v(C)}h()}catch(C){t.error(C)}}))};return e.subscribe(_t(t,m,()=>{d=!0,h()})),()=>{a?.()}}function sr(e,t,n=1/0){return tt(t)?sr((r,o)=>vt((i,s)=>t(r,i,o,s))(Gn(e(r,o))),n):(typeof t=="number"&&(n=t),kt((r,o)=>k4(r,o,e,n)))}function Oc(e=1/0){return sr(Lo,e)}function O4(){return Oc(1)}function _p(...e){return O4()(Mn(e,kc(e)))}function a1(e){return new jt(t=>{Gn(e()).subscribe(t)})}function JD(...e){let t=qx(e),{args:n,keys:r}=i1(e),o=new jt(i=>{let{length:s}=n;if(!s){i.complete();return}let a=new Array(s),u=s,c=s;for(let f=0;f<s;f++){let d=!1;Gn(n[f]).subscribe(_t(i,h=>{d||(d=!0,c--),a[f]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||i.next(r?s1(r,a):a),i.complete())}))}});return t?o.pipe(Tp(t)):o}var pae=["addListener","removeListener"],hae=["addEventListener","removeEventListener"],mae=["on","off"];function Zg(e,t,n,r){if(tt(n)&&(r=n,n=void 0),r)return Zg(e,t,n).pipe(Tp(r));let[o,i]=vae(e)?hae.map(s=>a=>e[s](t,a,n)):gae(e)?pae.map(M4(e,t)):yae(e)?mae.map(M4(e,t)):[];if(!o&&Ep(e))return sr(s=>Zg(s,t,n))(Gn(e));if(!o)throw new TypeError("Invalid event target");return new jt(s=>{let a=(...u)=>s.next(1<u.length?u:u[0]);return o(a),()=>i(a)})}function M4(e,t){return n=>r=>e[n](t,r)}function gae(e){return tt(e.addListener)&&tt(e.removeListener)}function yae(e){return tt(e.on)&&tt(e.off)}function vae(e){return tt(e.addEventListener)&&tt(e.removeEventListener)}function u1(e=0,t,n=y4){let r=-1;return t!=null&&(Wx(t)?n=t:r=t),new jt(o=>{let i=A4(e)?+e-n.now():e;i<0&&(i=0);let s=0;return n.schedule(function(){o.closed||(o.next(s++),0<=r?this.schedule(void 0,r):o.complete())},i)})}function eN(e=0,t=Xg){return e<0&&(e=0),u1(e,e,t)}function Vo(e,t){return kt((n,r)=>{let o=0;n.subscribe(_t(r,i=>e.call(t,i,o++)&&r.next(i)))})}function Mc(e){return kt((t,n)=>{let r=null,o=!1,i;r=t.subscribe(_t(n,void 0,void 0,s=>{i=Gn(e(s,Mc(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function F4(e,t,n,r,o){return(i,s)=>{let a=n,u=t,c=0;i.subscribe(_t(s,f=>{let d=c++;u=a?e(u,f,d):(a=!0,f),r&&s.next(u)},o&&(()=>{a&&s.next(u),s.complete()})))}}function Fc(e,t){return tt(t)?sr(e,t,1):sr(e,1)}function Pc(e){return kt((t,n)=>{let r=!1;t.subscribe(_t(n,o=>{r=!0,n.next(o)},()=>{r||n.next(e),n.complete()}))})}function ku(e){return e<=0?()=>ji:kt((t,n)=>{let r=0;t.subscribe(_t(n,o=>{++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function tN(e){return vt(()=>e)}function nN(e,t=Lo){return e=e??xae,kt((n,r)=>{let o,i=!0;n.subscribe(_t(r,s=>{let a=t(s);(i||!e(o,a))&&(i=!1,o=a,r.next(s))}))})}function xae(e,t){return e===t}function c1(e=bae){return kt((t,n)=>{let r=!1;t.subscribe(_t(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(e())))})}function bae(){return new Ru}function Ip(e){return kt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function za(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Vo((o,i)=>e(o,i,r)):Lo,ku(1),n?Pc(t):c1(()=>new Ru))}function Sp(e){return e<=0?()=>ji:kt((t,n)=>{let r=[];t.subscribe(_t(n,o=>{r.push(o),e<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function rN(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Vo((o,i)=>e(o,i,r)):Lo,Sp(1),n?Pc(t):c1(()=>new Ru))}function oN(e,t){return kt(F4(e,t,arguments.length>=2,!0))}function iN(e){return Vo((t,n)=>e<=n)}function sN(...e){let t=kc(e);return kt((n,r)=>{(t?_p(e,n,t):_p(e,n)).subscribe(r)})}function xo(e,t){return kt((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(_t(r,u=>{o?.unsubscribe();let c=0,f=i++;Gn(e(u,f)).subscribe(o=_t(r,d=>r.next(t?t(u,d,f,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function aN(e){return kt((t,n)=>{Gn(e).subscribe(_t(n,()=>n.complete(),qg)),!n.closed&&t.subscribe(n)})}function Yn(e,t,n){let r=tt(e)||t||n?{next:e,error:t,complete:n}:e;return r?kt((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(_t(i,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),i.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),i.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),i.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Lo}function P4(e,t){return kt((n,r)=>{let{leading:o=!0,trailing:i=!1}=t??{},s=!1,a=null,u=null,c=!1,f=()=>{u?.unsubscribe(),u=null,i&&(m(),c&&r.complete())},d=()=>{u=null,c&&r.complete()},h=v=>u=Gn(e(v)).subscribe(_t(r,f,d)),m=()=>{if(s){s=!1;let v=a;a=null,r.next(v),!c&&h(v)}};n.subscribe(_t(r,v=>{s=!0,a=v,!(u&&!u.closed)&&(o?m():h(v))},()=>{c=!0,!(i&&s&&u&&!u.closed)&&r.complete()}))})}function uN(e,t=Xg,n){let r=u1(e,t);return P4(()=>r,n)}var pN={JSACTION:"jsaction"},hN={JSACTION:"__jsaction",OWNER:"__owner"},B4={};function wae(e){return e[hN.JSACTION]}function $4(e,t){e[hN.JSACTION]=t}function Eae(e){return B4[e]}function Cae(e,t){B4[e]=t}var Ze={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},Tae=[Ze.MOUSEENTER,Ze.MOUSELEAVE,"pointerenter","pointerleave"],qPe=[Ze.CLICK,Ze.DBLCLICK,Ze.FOCUSIN,Ze.FOCUSOUT,Ze.KEYDOWN,Ze.KEYUP,Ze.KEYPRESS,Ze.MOUSEOVER,Ze.MOUSEOUT,Ze.SUBMIT,Ze.TOUCHSTART,Ze.TOUCHEND,Ze.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],_ae=[Ze.FOCUS,Ze.BLUR,Ze.ERROR,Ze.LOAD,Ze.TOGGLE],mN=e=>_ae.indexOf(e)>=0;var Iae=3,Sae=13,Dae=32,zi={MAC_ENTER:Iae,ENTER:Sae,SPACE:Dae};function Nae(e){return e===Ze.MOUSEENTER?Ze.MOUSEOVER:e===Ze.MOUSELEAVE?Ze.MOUSEOUT:e===Ze.POINTERENTER?Ze.POINTEROVER:e===Ze.POINTERLEAVE?Ze.POINTEROUT:e}function Aae(e,t,n,r){let o=!1;mN(t)&&(o=!0);let i=typeof r=="boolean"?{capture:o,passive:r}:o;return e.addEventListener(t,n,i),{eventType:t,handler:n,capture:o,passive:r}}function Rae(e,t){if(e.removeEventListener){let n=typeof t.passive=="boolean"?{capture:t.capture}:t.capture;e.removeEventListener(t.eventType,t.handler,n)}else e.detachEvent&&e.detachEvent(`on${t.eventType}`,t.handler)}function kae(e){e.preventDefault?e.preventDefault():e.returnValue=!1}var L4=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function Oae(e){return e.which===2||e.which==null&&e.button===4}function Mae(e){return L4&&e.metaKey||!L4&&e.ctrlKey||Oae(e)||e.shiftKey}var KPe=typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&/WebKit/.test(navigator.userAgent),XPe=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident/.test(navigator.userAgent)),YPe=typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&/Gecko/.test(navigator.product);function Fae(e,t,n){let r=e.relatedTarget;return(e.type===Ze.MOUSEOVER&&t===Ze.MOUSEENTER||e.type===Ze.MOUSEOUT&&t===Ze.MOUSELEAVE||e.type===Ze.POINTEROVER&&t===Ze.POINTERENTER||e.type===Ze.POINTEROUT&&t===Ze.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function Pae(e,t){let n={};for(let r in e){if(r==="srcElement"||r==="target")continue;let o=r,i=e[o];typeof i!="function"&&(n[o]=i)}return e.type===Ze.MOUSEOVER?n.type=Ze.MOUSEENTER:e.type===Ze.MOUSEOUT?n.type=Ze.MOUSELEAVE:e.type===Ze.POINTEROVER?n.type=Ze.POINTERENTER:n.type=Ze.POINTERLEAVE,n.target=n.srcElement=t,n.bubbles=!1,n}var ZPe={Enter:zi.ENTER," ":zi.SPACE},QPe={A:zi.ENTER,BUTTON:0,CHECKBOX:zi.SPACE,COMBOBOX:zi.ENTER,FILE:0,GRIDCELL:zi.ENTER,LINK:zi.ENTER,LISTBOX:zi.ENTER,MENU:0,MENUBAR:0,MENUITEM:0,MENUITEMCHECKBOX:0,MENUITEMRADIO:0,OPTION:0,RADIO:zi.SPACE,RADIOGROUP:zi.SPACE,RESET:0,SUBMIT:0,SWITCH:zi.SPACE,TAB:0,TREE:zi.ENTER,TREEITEM:zi.ENTER};var $ae=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),p1=class{element;handlerInfos=[];constructor(t){this.element=t}addEventListener(t,n,r){$ae&&(this.element.style.cursor="pointer"),this.handlerInfos.push(Aae(this.element,t,n(this.element),r))}cleanUp(){for(let t=0;t<this.handlerInfos.length;t++)Rae(this.element,this.handlerInfos[t]);this.handlerInfos=[]}},Lae={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function $c(e){return e.eventType}function gN(e,t){e.eventType=t}function f1(e){return e.event}function U4(e,t){e.event=t}function G4(e){return e.targetElement}function j4(e,t){e.targetElement=t}function z4(e){return e.eic}function Vae(e,t){e.eic=t}function Bae(e){return e.timeStamp}function Uae(e,t){e.timeStamp=t}function d1(e){return e.eia}function H4(e,t,n){e.eia=[t,n]}function cN(e){e.eia=void 0}function l1(e){return e[1]}function Gae(e){return e.eirp}function W4(e,t){e.eirp=t}function q4(e){return e.eir}function K4(e,t){e.eir=t}function X4(e){return{eventType:e.eventType,event:e.event,targetElement:e.targetElement,eic:e.eic,eia:e.eia,timeStamp:e.timeStamp,eirp:e.eirp,eiack:e.eiack,eir:e.eir}}function jae(e,t,n,r,o,i,s,a){return{eventType:e,event:t,targetElement:n,eic:r,timeStamp:o,eia:i,eirp:s,eiack:a}}var lN=class e{eventInfo;constructor(t){this.eventInfo=t}getEventType(){return $c(this.eventInfo)}setEventType(t){gN(this.eventInfo,t)}getEvent(){return f1(this.eventInfo)}setEvent(t){U4(this.eventInfo,t)}getTargetElement(){return G4(this.eventInfo)}setTargetElement(t){j4(this.eventInfo,t)}getContainer(){return z4(this.eventInfo)}setContainer(t){Vae(this.eventInfo,t)}getTimestamp(){return Bae(this.eventInfo)}setTimestamp(t){Uae(this.eventInfo,t)}getAction(){let t=d1(this.eventInfo);if(t)return{name:t[0],element:t[1]}}setAction(t){if(!t){cN(this.eventInfo);return}H4(this.eventInfo,t.name,t.element)}getIsReplay(){return Gae(this.eventInfo)}setIsReplay(t){W4(this.eventInfo,t)}getResolved(){return q4(this.eventInfo)}setResolved(t){K4(this.eventInfo,t)}clone(){return new e(X4(this.eventInfo))}},zae={},Hae=/\s*;\s*/,Wae=Ze.CLICK,fN=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:t=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=t,this.clickModSupport=n}resolveEventType(t){this.clickModSupport&&$c(t)===Ze.CLICK&&Mae(f1(t))?gN(t,Ze.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(t)}resolveAction(t){q4(t)||(this.populateAction(t,G4(t)),K4(t,!0))}resolveParentAction(t){let n=d1(t),r=n&&l1(n);cN(t);let o=r&&this.getParentNode(r);o&&this.populateAction(t,o)}populateAction(t,n){let r=n;for(;r&&r!==z4(t)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,t),!d1(t));)r=this.getParentNode(r);let o=d1(t);if(o&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(t),this.syntheticMouseEventSupport&&($c(t)===Ze.MOUSEENTER||$c(t)===Ze.MOUSELEAVE||$c(t)===Ze.POINTERENTER||$c(t)===Ze.POINTERLEAVE)))if(Fae(f1(t),$c(t),l1(o))){let i=Pae(f1(t),l1(o));U4(t,i),j4(t,l1(o))}else cN(t)}getParentNode(t){let n=t[hN.OWNER];if(n)return n;let r=t.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(t,n){let r=this.parseActions(t),o=r[$c(n)];o!==void 0&&H4(n,o,t),this.a11yClickSupport&&this.populateClickOnlyAction(t,n,r)}parseActions(t){let n=wae(t);if(!n){let r=t.getAttribute(pN.JSACTION);if(!r)n=zae,$4(t,n);else{if(n=Eae(r),!n){n={};let o=r.split(Hae);for(let i=0;i<o.length;i++){let s=o[i];if(!s)continue;let a=s.indexOf(Lae.EVENT_ACTION_SEPARATOR),u=a!==-1,c=u?s.substr(0,a).trim():Wae,f=u?s.substr(a+1).trim():s;n[c]=f}Cae(r,n)}$4(t,n)}}return n}addA11yClickSupport(t,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=t,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},Y4=function(e){return e[e.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",e}(Y4||{}),dN=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(t,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=t,this.actionResolver=n,this.eventReplayer=r}dispatch(t){let n=new lN(t);this.actionResolver?.resolveEventType(t),this.actionResolver?.resolveAction(t);let r=n.getAction();if(r&&qae(r.element,n)&&kae(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(t){this.replayEventInfoWrappers.push(t),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function qae(e,t){return e.tagName==="A"&&(t.getEventType()===Ze.CLICK||t.getEventType()===Ze.CLICKMOD)}var Z4=Symbol.for("propagationStopped"),yN={REPLAY:101};var Kae="`preventDefault` called during event replay.";var Xae="`composedPath` called during event replay.",h1=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(t,n=!0){this.dispatchDelegate=t,this.clickModSupport=n,this.actionResolver=new fN({clickModSupport:n}),this.dispatcher=new dN(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(t){this.dispatcher.dispatch(t)}dispatchToDelegate(t){for(t.getIsReplay()&&Qae(t),Yae(t);t.getAction();){if(Jae(t),mN(t.getEventType())&&t.getAction().element!==t.getTargetElement()||(this.dispatchDelegate(t.getEvent(),t.getAction().name),Zae(t)))return;this.actionResolver.resolveParentAction(t.eventInfo)}}};function Yae(e){let t=e.getEvent(),n=e.getEvent().stopPropagation.bind(t),r=()=>{t[Z4]=!0,n()};yf(t,"stopPropagation",r),yf(t,"stopImmediatePropagation",r)}function Zae(e){return!!e.getEvent()[Z4]}function Qae(e){let t=e.getEvent(),n=e.getTargetElement(),r=t.preventDefault.bind(t);yf(t,"target",n),yf(t,"eventPhase",yN.REPLAY),yf(t,"preventDefault",()=>{throw r(),new Error(Kae+"")}),yf(t,"composedPath",()=>{throw new Error(Xae+"")})}function Jae(e){let t=e.getEvent(),n=e.getAction()?.element;n&&yf(t,"currentTarget",n,{configurable:!0})}function yf(e,t,n,{configurable:r=!1}={}){Object.defineProperty(e,t,{value:n,configurable:r})}function Q4(e,t){e.ecrd(n=>{t.dispatch(n)},Y4.I_AM_THE_JSACTION_FRAMEWORK)}function eue(e){return e?.q??[]}function tue(e){e&&(V4(e.c,e.et,e.h),V4(e.c,e.etc,e.h,!0))}function V4(e,t,n,r){for(let o=0;o<t.length;o++)e.removeEventListener(t[o],n,r)}var nue=!1,J4=(()=>{class e{static MOUSE_SPECIAL_SUPPORT=nue;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,o){let i=jae(n,r,r.target,o,Date.now());this.handleEventInfo(i)}handleEventInfo(n){if(!this.dispatcher){W4(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,o){if(n in this.eventHandlers||!this.containerManager||!e.MOUSE_SPECIAL_SUPPORT&&Tae.indexOf(n)>=0)return;let i=(a,u,c)=>{this.handleEvent(a,u,c)};this.eventHandlers[n]=i;let s=Nae(r||n);if(s!==n){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(n),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>u=>{i(n,u,a)},o)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),tue(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let o=n[r],i=this.getEventTypesForBrowserEventType(o.eventType);for(let s=0;s<i.length;s++){let a=X4(o);gN(a,i[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let o=0;o<this.queuedEventInfos.length;o++)this.handleEventInfo(this.queuedEventInfos[o]);this.queuedEventInfos=null}}}return e})();function eL(e,t=window){return eue(t._ejsas?.[e])}function tL(e,t=window){t._ejsas&&(t._ejsas[e]=void 0)}var ZL="https://g.co/ng/security#xss",Ge=class extends Error{code;constructor(t,n){super(ib(t,n)),this.code=t}};function ib(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var QL=Symbol("InputSignalNode#UNSET"),rue=Tt(xe({},UD),{transformFn:void 0,applyValueToInputSignal(e,t){$x(e,t)}});function JL(e,t){let n=Object.create(rue);n.value=e,n.transformFn=t?.transform;function r(){if(Ox(n),n.value===QL)throw new Ge(-950,!1);return n.value}return r[Gi]=n,r}function ay(e){return{toString:e}.toString()}var m1="__parameters__";function oue(e){return function(...n){if(e){let r=e(...n);for(let o in r)this[o]=r[o]}}}function eV(e,t,n){return ay(()=>{let r=oue(t);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(u,c,f){let d=u.hasOwnProperty(m1)?u[m1]:Object.defineProperty(u,m1,{value:[]})[m1];for(;d.length<=f;)d.push(null);return(d[f]=d[f]||[]).push(s),u}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}var ON=globalThis;function Tn(e){for(let t in e)if(e[t]===Tn)return t;throw Error("Could not find renamed property on target object.")}function iue(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Uo(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Uo).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function nL(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var sue=Tn({__forward_ref__:Tn});function uy(e){return e.__forward_ref__=uy,e.toString=function(){return Uo(this())},e}function Bo(e){return tV(e)?e():e}function tV(e){return typeof e=="function"&&e.hasOwnProperty(sue)&&e.__forward_ref__===uy}function He(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function zc(e){return{providers:e.providers||[],imports:e.imports||[]}}function sb(e){return rL(e,rV)||rL(e,oV)}function nV(e){return sb(e)!==null}function rL(e,t){return e.hasOwnProperty(t)?e[t]:null}function aue(e){let t=e&&(e[rV]||e[oV]);return t||null}function oL(e){return e&&(e.hasOwnProperty(iL)||e.hasOwnProperty(uue))?e[iL]:null}var rV=Tn({\u0275prov:Tn}),iL=Tn({\u0275inj:Tn}),oV=Tn({ngInjectableDef:Tn}),uue=Tn({ngInjectorDef:Tn}),Pe=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=He({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function iV(e){return e&&!!e.\u0275providers}var cue=Tn({\u0275cmp:Tn}),lue=Tn({\u0275dir:Tn}),fue=Tn({\u0275pipe:Tn}),due=Tn({\u0275mod:Tn}),A1=Tn({\u0275fac:Tn}),ey=Tn({__NG_ELEMENT_ID__:Tn}),sL=Tn({__NG_ENV_ID__:Tn});function $p(e){return typeof e=="string"?e:e==null?"":String(e)}function pue(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():$p(e)}function hue(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Ge(-200,e)}function RA(e,t){throw new Ge(-201,!1)}var Rt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Rt||{}),MN;function sV(){return MN}function Ns(e){let t=MN;return MN=e,t}function aV(e,t,n){let r=sb(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Rt.Optional)return null;if(t!==void 0)return t;RA(e,"Injector")}var mue={},ty=mue,FN="__NG_DI_FLAG__",R1="ngTempTokenPath",gue="ngTokenPath",yue=/\n/gm,vue="\u0275",aL="__source",Op;function xue(){return Op}function Lc(e){let t=Op;return Op=e,t}function bue(e,t=Rt.Default){if(Op===void 0)throw new Ge(-203,!1);return Op===null?aV(e,void 0,t):Op.get(e,t&Rt.Optional?null:void 0,t)}function xt(e,t=Rt.Default){return(sV()||bue)(Bo(e),t)}function de(e,t=Rt.Default){return xt(e,ab(t))}function ab(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function PN(e){let t=[];for(let n=0;n<e.length;n++){let r=Bo(e[n]);if(Array.isArray(r)){if(r.length===0)throw new Ge(900,!1);let o,i=Rt.Default;for(let s=0;s<r.length;s++){let a=r[s],u=wue(a);typeof u=="number"?u===-1?o=a.token:i|=u:o=a}t.push(xt(o,i))}else t.push(xt(r))}return t}function uV(e,t){return e[FN]=t,e.prototype[FN]=t,e}function wue(e){return e[FN]}function Eue(e,t,n,r){let o=e[R1];throw t[aL]&&o.unshift(t[aL]),e.message=Cue(`
`+e.message,o,n,r),e[gue]=o,e[R1]=null,e}function Cue(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==vue?e.slice(2):e;let o=Uo(t);if(Array.isArray(t))o=t.map(Uo).join(" -> ");else if(typeof t=="object"){let i=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):Uo(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${e.replace(yue,`
  `)}`}var ub=uV(eV("Optional"),8);var kA=uV(eV("SkipSelf"),4);function Lp(e,t){let n=e.hasOwnProperty(A1);return n?e[A1]:null}function Tue(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let o=e[r],i=t[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}function _ue(e){return e.flat(Number.POSITIVE_INFINITY)}function OA(e,t){e.forEach(n=>Array.isArray(n)?OA(n,t):t(n))}function cV(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function k1(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Iue(e,t,n,r){let o=e.length;if(o==t)e.push(n,r);else if(o===1)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){let i=o-2;e[o]=e[i],o--}e[t]=n,e[t+1]=r}}function Sue(e,t,n){let r=cy(e,t);return r>=0?e[r|1]=n:(r=~r,Iue(e,r,t,n)),r}function vN(e,t){let n=cy(e,t);if(n>=0)return e[n|1]}function cy(e,t){return Due(e,t,1)}function Due(e,t,n){let r=0,o=e.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}var Vp={},As=[],Bc=new Pe(""),lV=new Pe("",-1),fV=new Pe(""),O1=class{get(t,n=ty){if(n===ty){let r=new Error(`NullInjectorError: No provider for ${Uo(t)}!`);throw r.name="NullInjectorError",r}return n}};function dV(e,t){let n=e[due]||null;if(!n&&t===!0)throw new Error(`Type ${Uo(e)} does not have '\u0275mod' property.`);return n}function Mu(e){return e[cue]||null}function MA(e){return e[lue]||null}function FA(e){return e[fue]||null}function pV(e){let t=Mu(e)||MA(e)||FA(e);return t!==null?t.standalone:!1}function Nf(e){return{\u0275providers:e}}function Nue(...e){return{\u0275providers:PA(!0,e),\u0275fromNgModule:!0}}function PA(e,...t){let n=[],r=new Set,o,i=s=>{n.push(s)};return OA(t,s=>{let a=s;$N(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&hV(o,i),n}function hV(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:o}=e[n];$A(o,i=>{t(i,r)})}}function $N(e,t,n,r){if(e=Bo(e),!e)return!1;let o=null,i=oL(e),s=!i&&Mu(e);if(!i&&!s){let u=e.ngModule;if(i=oL(u),i)o=u;else return!1}else{if(s&&!s.standalone)return!1;o=e}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of u)$N(c,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let c;try{OA(i.imports,f=>{$N(f,t,n,r)&&(c||=[],c.push(f))})}finally{}c!==void 0&&hV(c,t)}if(!a){let c=Lp(o)||(()=>new o);t({provide:o,useFactory:c,deps:As},o),t({provide:fV,useValue:o,multi:!0},o),t({provide:Bc,useValue:()=>xt(o),multi:!0},o)}let u=i.providers;if(u!=null&&!a){let c=e;$A(u,f=>{t(f,c)})}}else return!1;return o!==e&&e.providers!==void 0}function $A(e,t){for(let n of e)iV(n)&&(n=n.\u0275providers),Array.isArray(n)?$A(n,t):t(n)}var Aue=Tn({provide:String,useValue:Tn});function mV(e){return e!==null&&typeof e=="object"&&Aue in e}function Rue(e){return!!(e&&e.useExisting)}function kue(e){return!!(e&&e.useFactory)}function Bp(e){return typeof e=="function"}function Oue(e){return!!e.useClass}var cb=new Pe(""),E1={},Mue={},xN;function LA(){return xN===void 0&&(xN=new O1),xN}var di=class{},ny=class extends di{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,VN(t,s=>this.processProvider(s)),this.records.set(lV,Dp(void 0,this)),o.has("environment")&&this.records.set(di,Dp(void 0,this));let i=this.records.get(cb);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(fV,As,Rt.Self))}destroy(){Qg(this),this._destroyed=!0;let t=Kt(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Kt(t)}}onDestroy(t){return Qg(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Qg(this);let n=Lc(this),r=Ns(void 0),o;try{return t()}finally{Lc(n),Ns(r)}}get(t,n=ty,r=Rt.Default){if(Qg(this),t.hasOwnProperty(sL))return t[sL](this);r=ab(r);let o,i=Lc(this),s=Ns(void 0);try{if(!(r&Rt.SkipSelf)){let u=this.records.get(t);if(u===void 0){let c=Vue(t)&&sb(t);c&&this.injectableDefInScope(c)?u=Dp(LN(t),E1):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u)}let a=r&Rt.Self?LA():this.parent;return n=r&Rt.Optional&&n===ty?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[R1]=a[R1]||[]).unshift(Uo(t)),i)throw a;return Eue(a,t,"R3InjectorError",this.source)}else throw a}finally{Ns(s),Lc(i)}}resolveInjectorInitializers(){let t=Kt(null),n=Lc(this),r=Ns(void 0),o;try{let i=this.get(Bc,As,Rt.Self);for(let s of i)s()}finally{Lc(n),Ns(r),Kt(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Uo(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Bo(t);let n=Bp(t)?t:Bo(t&&t.provide),r=Pue(t);if(!Bp(t)&&t.multi===!0){let o=this.records.get(n);o||(o=Dp(void 0,E1,!0),o.factory=()=>PN(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=Kt(null);try{return n.value===E1&&(n.value=Mue,n.value=n.factory()),typeof n.value=="object"&&n.value&&Lue(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Kt(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Bo(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function LN(e){let t=sb(e),n=t!==null?t.factory:Lp(e);if(n!==null)return n;if(e instanceof Pe)throw new Ge(204,!1);if(e instanceof Function)return Fue(e);throw new Ge(204,!1)}function Fue(e){if(e.length>0)throw new Ge(204,!1);let n=aue(e);return n!==null?()=>n.factory(e):()=>new e}function Pue(e){if(mV(e))return Dp(void 0,e.useValue);{let t=gV(e);return Dp(t,E1)}}function gV(e,t,n){let r;if(Bp(e)){let o=Bo(e);return Lp(o)||LN(o)}else if(mV(e))r=()=>Bo(e.useValue);else if(kue(e))r=()=>e.useFactory(...PN(e.deps||[]));else if(Rue(e))r=()=>xt(Bo(e.useExisting));else{let o=Bo(e&&(e.useClass||e.provide));if($ue(e))r=()=>new o(...PN(e.deps));else return Lp(o)||LN(o)}return r}function Qg(e){if(e.destroyed)throw new Ge(205,!1)}function Dp(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function $ue(e){return!!e.deps}function Lue(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function Vue(e){return typeof e=="function"||typeof e=="object"&&e instanceof Pe}function VN(e,t){for(let n of e)Array.isArray(n)?VN(n,t):n&&iV(n)?VN(n.\u0275providers,t):t(n)}function Xi(e,t){e instanceof ny&&Qg(e);let n,r=Lc(e),o=Ns(void 0);try{return t()}finally{Lc(r),Ns(o)}}function yV(){return sV()!==void 0||xue()!=null}function Bue(e){if(!yV())throw new Ge(-203,!1)}function Uue(e){return typeof e=="function"}var qi=0,at=1,st=2,zr=3,ca=4,pa=5,qa=6,M1=7,fa=8,Fu=9,Pu=10,jn=11,ry=12,uL=13,qp=14,Rs=15,xf=16,Np=17,$u=18,lb=19,vV=20,Vc=21,bN=22,F1=23,Wi=24,bo=25,xV=1,Ou=6,Lu=7,P1=8,Up=9,fi=10,$1=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}($1||{});function la(e){return Array.isArray(e)&&typeof e[xV]=="object"}function Xa(e){return Array.isArray(e)&&e[xV]===!0}function bV(e){return(e.flags&4)!==0}function ly(e){return e.componentOffset>-1}function VA(e){return(e.flags&1)===1}function Uc(e){return!!e.template}function L1(e){return(e[st]&512)!==0}function Gue(e){return(e[st]&256)===256}var BN=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function wV(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var Uu=(()=>{let e=()=>EV;return e.ngInherit=!0,e})();function EV(e){return e.type.prototype.ngOnChanges&&(e.setInput=zue),jue}function jue(){let e=TV(this),t=e?.current;if(t){let n=e.previous;if(n===Vp)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function zue(e,t,n,r,o){let i=this.declaredInputs[r],s=TV(e)||Hue(e,{previous:Vp,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[i];a[i]=new BN(c&&c.currentValue,n,u===Vp),wV(e,t,o,n)}var CV="__ngSimpleChanges__";function TV(e){return e[CV]||null}function Hue(e,t){return e[CV]=t}var cL=null;var Ha=function(e,t,n){cL?.(e,t,n)},Wue="svg",que="math";function da(e){for(;Array.isArray(e);)e=e[qi];return e}function _V(e,t){return da(t[e])}function Yi(e,t){return da(t[e.index])}function fb(e,t){return e.data[t]}function Hc(e,t){let n=t[e];return la(n)?n:n[qi]}function Kue(e){return(e[st]&4)===4}function BA(e){return(e[st]&128)===128}function Xue(e){return Xa(e[zr])}function V1(e,t){return t==null?null:e[t]}function IV(e){e[Np]=0}function UA(e){e[st]&1024||(e[st]|=1024,BA(e)&&pb(e))}function Yue(e,t){for(;e>0;)t=t[qp],e--;return t}function db(e){return!!(e[st]&9216||e[Wi]?.dirty)}function UN(e){e[Pu].changeDetectionScheduler?.notify(9),e[st]&64&&(e[st]|=1024),db(e)&&pb(e)}function pb(e){e[Pu].changeDetectionScheduler?.notify(0);let t=bf(e);for(;t!==null&&!(t[st]&8192||(t[st]|=8192,!BA(t)));)t=bf(t)}function SV(e,t){if((e[st]&256)===256)throw new Ge(911,!1);e[Vc]===null&&(e[Vc]=[]),e[Vc].push(t)}function Zue(e,t){if(e[Vc]===null)return;let n=e[Vc].indexOf(t);n!==-1&&e[Vc].splice(n,1)}function bf(e){let t=e[zr];return Xa(t)?t[zr]:t}var Dt={lFrame:PV(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var GN=!1;function Que(){return Dt.lFrame.elementDepthCount}function Jue(){Dt.lFrame.elementDepthCount++}function ece(){Dt.lFrame.elementDepthCount--}function DV(){return Dt.bindingsEnabled}function fy(){return Dt.skipHydrationRootTNode!==null}function tce(e){return Dt.skipHydrationRootTNode===e}function nce(e){Dt.skipHydrationRootTNode=e}function rce(){Dt.skipHydrationRootTNode=null}function nn(){return Dt.lFrame.lView}function wo(){return Dt.lFrame.tView}function Wc(e){return Dt.lFrame.contextLView=e,e[fa]}function qc(e){return Dt.lFrame.contextLView=null,e}function Eo(){let e=NV();for(;e!==null&&e.type===64;)e=e.parent;return e}function NV(){return Dt.lFrame.currentTNode}function oce(){let e=Dt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function dy(e,t){let n=Dt.lFrame;n.currentTNode=e,n.isParent=t}function AV(){return Dt.lFrame.isParent}function ice(){Dt.lFrame.isParent=!1}function RV(){return GN}function lL(e){let t=GN;return GN=e,t}function sce(){let e=Dt.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function ace(){return Dt.lFrame.bindingIndex}function uce(e){return Dt.lFrame.bindingIndex=e}function hb(){return Dt.lFrame.bindingIndex++}function kV(e){let t=Dt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function cce(){return Dt.lFrame.inI18n}function lce(e,t){let n=Dt.lFrame;n.bindingIndex=n.bindingRootIndex=e,jN(t)}function fce(){return Dt.lFrame.currentDirectiveIndex}function jN(e){Dt.lFrame.currentDirectiveIndex=e}function dce(e){let t=Dt.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function OV(){return Dt.lFrame.currentQueryIndex}function GA(e){Dt.lFrame.currentQueryIndex=e}function pce(e){let t=e[at];return t.type===2?t.declTNode:t.type===1?e[pa]:null}function MV(e,t,n){if(n&Rt.SkipSelf){let o=t,i=e;for(;o=o.parent,o===null&&!(n&Rt.Host);)if(o=pce(i),o===null||(i=i[qp],o.type&10))break;if(o===null)return!1;t=o,e=i}let r=Dt.lFrame=FV();return r.currentTNode=t,r.lView=e,!0}function jA(e){let t=FV(),n=e[at];Dt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function FV(){let e=Dt.lFrame,t=e===null?null:e.child;return t===null?PV(e):t}function PV(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function $V(){let e=Dt.lFrame;return Dt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var LV=$V;function zA(){let e=$V();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function hce(e){return(Dt.lFrame.contextLView=Yue(e,Dt.lFrame.contextLView))[fa]}function Af(){return Dt.lFrame.selectedIndex}function wf(e){Dt.lFrame.selectedIndex=e}function HA(){let e=Dt.lFrame;return fb(e.tView,e.selectedIndex)}function VV(){return Dt.lFrame.currentNamespace}var BV=!0;function WA(){return BV}function Kc(e){BV=e}function mce(e,t,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){let s=EV(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function qA(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:f}=i;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),u&&(e.viewHooks??=[]).push(-n,u),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),f!=null&&(e.destroyHooks??=[]).push(n,f)}}function C1(e,t,n){UV(e,t,3,n)}function T1(e,t,n,r){(e[st]&3)===n&&UV(e,t,n,r)}function wN(e,t){let n=e[st];(n&3)===t&&(n&=16383,n+=1,e[st]=n)}function UV(e,t,n,r){let o=r!==void 0?e[Np]&65535:0,i=r??-1,s=t.length-1,a=0;for(let u=o;u<s;u++)if(typeof t[u+1]=="number"){if(a=t[u],r!=null&&a>=r)break}else t[u]<0&&(e[Np]+=65536),(a<i||i==-1)&&(gce(e,n,t,u),e[Np]=(e[Np]&4294901760)+u+2),u++}function fL(e,t){Ha(4,e,t);let n=Kt(null);try{t.call(e)}finally{Kt(n),Ha(5,e,t)}}function gce(e,t,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=e[s];o?e[st]>>14<e[Np]>>16&&(e[st]&3)===t&&(e[st]+=16384,fL(a,i)):fL(a,i)}var Mp=-1,Ef=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r){this.factory=t,this.canSeeViewProviders=n,this.injectImpl=r}};function yce(e){return e instanceof Ef}function vce(e){return(e.flags&8)!==0}function xce(e){return(e.flags&16)!==0}function zN(e,t,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,i)}else{let i=o,s=n[++r];bce(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),r++}}return r}function GV(e){return e===3||e===4||e===6}function bce(e){return e.charCodeAt(0)===64}function oy(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?dL(e,n,o,null,t[++r]):dL(e,n,o,null,null))}}return e}function dL(e,t,n,r,o){let i=0,s=e.length;if(t===-1)s=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){if(r===null){o!==null&&(e[i+1]=o);return}else if(r===e[i+1]){e[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),r!==null&&e.splice(i++,0,r),o!==null&&e.splice(i++,0,o)}var EN={},Fp=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=ab(r);let o=this.injector.get(t,EN,r);return o!==EN||n===EN?o:this.parentInjector.get(t,n,r)}};function jV(e){return e!==Mp}function B1(e){return e&32767}function wce(e){return e>>16}function U1(e,t){let n=wce(e),r=t;for(;n>0;)r=r[qp],n--;return r}var HN=!0;function pL(e){let t=HN;return HN=e,t}var Ece=256,zV=Ece-1,HV=5,Cce=0,Wa={};function Tce(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ey)&&(r=n[ey]),r==null&&(r=n[ey]=Cce++);let o=r&zV,i=1<<o;t.data[e+(o>>HV)]|=i}function G1(e,t){let n=WV(e,t);if(n!==-1)return n;let r=t[at];r.firstCreatePass&&(e.injectorIndex=t.length,CN(r.data,e),CN(t,null),CN(r.blueprint,null));let o=KA(e,t),i=e.injectorIndex;if(jV(o)){let s=B1(o),a=U1(o,t),u=a[at].data;for(let c=0;c<8;c++)t[i+c]=a[s+c]|u[s+c]}return t[i+8]=o,i}function CN(e,t){e.push(0,0,0,0,0,0,0,0,t)}function WV(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function KA(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;o!==null;){if(r=ZV(o),r===null)return Mp;if(n++,o=o[qp],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Mp}function WN(e,t,n){Tce(e,t,n)}function _ce(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,o=0;for(;o<r;){let i=n[o];if(GV(i))break;if(i===0)o=o+2;else if(typeof i=="number")for(o++;o<r&&typeof n[o]=="string";)o++;else{if(i===t)return n[o+1];o=o+2}}}return null}function qV(e,t,n){if(n&Rt.Optional||e!==void 0)return e;RA(t,"NodeInjector")}function KV(e,t,n,r){if(n&Rt.Optional&&r===void 0&&(r=null),!(n&(Rt.Self|Rt.Host))){let o=e[Fu],i=Ns(void 0);try{return o?o.get(t,r,n&Rt.Optional):aV(t,r,n&Rt.Optional)}finally{Ns(i)}}return qV(r,t,n)}function XV(e,t,n,r=Rt.Default,o){if(e!==null){if(t[st]&2048&&!(r&Rt.Self)){let s=Nce(e,t,n,r,Wa);if(s!==Wa)return s}let i=YV(e,t,n,r,Wa);if(i!==Wa)return i}return KV(t,n,r,o)}function YV(e,t,n,r,o){let i=Sce(n);if(typeof i=="function"){if(!MV(t,e,r))return r&Rt.Host?qV(o,n,r):KV(t,n,r,o);try{let s;if(s=i(r),s==null&&!(r&Rt.Optional))RA(n);else return s}finally{LV()}}else if(typeof i=="number"){let s=null,a=WV(e,t),u=Mp,c=r&Rt.Host?t[Rs][pa]:null;for((a===-1||r&Rt.SkipSelf)&&(u=a===-1?KA(e,t):t[a+8],u===Mp||!mL(r,!1)?a=-1:(s=t[at],a=B1(u),t=U1(u,t)));a!==-1;){let f=t[at];if(hL(i,a,f.data)){let d=Ice(a,t,n,s,r,c);if(d!==Wa)return d}u=t[a+8],u!==Mp&&mL(r,t[at].data[a+8]===c)&&hL(i,a,t)?(s=f,a=B1(u),t=U1(u,t)):a=-1}}return o}function Ice(e,t,n,r,o,i){let s=t[at],a=s.data[e+8],u=r==null?ly(a)&&HN:r!=s&&(a.type&3)!==0,c=o&Rt.Host&&i===a,f=_1(a,s,n,u,c);return f!==null?Cf(t,s,f,a):Wa}function _1(e,t,n,r,o){let i=e.providerIndexes,s=t.data,a=i&1048575,u=e.directiveStart,c=e.directiveEnd,f=i>>20,d=r?a:a+f,h=o?a+f:c;for(let m=d;m<h;m++){let v=s[m];if(m<u&&n===v||m>=u&&v.type===n)return m}if(o){let m=s[u];if(m&&Uc(m)&&m.type===n)return u}return null}function Cf(e,t,n,r){let o=e[n],i=t.data;if(yce(o)){let s=o;s.resolving&&hue(pue(i[n]));let a=pL(s.canSeeViewProviders);s.resolving=!0;let u,c=s.injectImpl?Ns(s.injectImpl):null,f=MV(e,r,Rt.Default);try{o=e[n]=s.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&mce(n,i[n],t)}finally{c!==null&&Ns(c),pL(a),s.resolving=!1,LV()}}return o}function Sce(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(ey)?e[ey]:void 0;return typeof t=="number"?t>=0?t&zV:Dce:t}function hL(e,t,n){let r=1<<e;return!!(n[t+(e>>HV)]&r)}function mL(e,t){return!(e&Rt.Self)&&!(e&Rt.Host&&t)}var vf=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return XV(this._tNode,this._lView,t,ab(r),n)}};function Dce(){return new vf(Eo(),nn())}function py(e){return ay(()=>{let t=e.prototype.constructor,n=t[A1]||qN(t),r=Object.prototype,o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){let i=o[A1]||qN(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function qN(e){return tV(e)?()=>{let t=qN(Bo(e));return t&&t()}:Lp(e)}function Nce(e,t,n,r,o){let i=e,s=t;for(;i!==null&&s!==null&&s[st]&2048&&!(s[st]&512);){let a=YV(i,s,n,r|Rt.Self,Wa);if(a!==Wa)return a;let u=i.parent;if(!u){let c=s[vV];if(c){let f=c.get(n,Wa,r);if(f!==Wa)return f}u=ZV(s),s=s[qp]}i=u}return o}function ZV(e){let t=e[at],n=t.type;return n===2?t.declTNode:n===1?e[pa]:null}function XA(e){return _ce(Eo(),e)}function gL(e,t=null,n=null,r){let o=QV(e,t,n,r);return o.resolveInjectorInitializers(),o}function QV(e,t=null,n=null,r,o=new Set){let i=[n||As,Nue(e)];return r=r||(typeof e=="object"?void 0:Uo(e)),new ny(i,t||LA(),r||null,o)}var pi=class e{static THROW_IF_NOT_FOUND=ty;static NULL=new O1;static create(t,n){if(Array.isArray(t))return gL({name:""},n,t,"");{let r=t.name??"";return gL({name:r},t.parent,t.providers,r)}}static \u0275prov=He({token:e,providedIn:"any",factory:()=>xt(lV)});static __NG_ELEMENT_ID__=-1};var Ace=new Pe("");Ace.__NG_ELEMENT_ID__=e=>{let t=Eo();if(t===null)throw new Ge(204,!1);if(t.type&2)return t.value;if(e&Rt.Optional)return null;throw new Ge(204,!1)};var JV=!1,YA=(()=>{class e{static __NG_ELEMENT_ID__=Rce;static __NG_ENV_ID__=n=>n}return e})(),KN=class extends YA{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return SV(this._lView,t),()=>Zue(this._lView,t)}};function Rce(){return new KN(nn())}var Gp=class{},mb=new Pe("",{providedIn:"root",factory:()=>!1});var eB=new Pe(""),tB=new Pe(""),Gu=(()=>{class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Mr(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=He({token:e,providedIn:"root",factory:()=>new e})}return e})();var XN=class extends Er{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,yV()&&(this.destroyRef=de(YA,{optional:!0})??void 0,this.pendingTasks=de(Gu,{optional:!0})??void 0)}emit(t){let n=Kt(null);try{super.next(t)}finally{Kt(n)}}subscribe(t,n,r){let o=t,i=n||(()=>null),s=r;if(t&&typeof t=="object"){let u=t;o=u.next?.bind(u),i=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return t instanceof ir&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ar=XN;function j1(...e){}function nB(e){let t,n;function r(){e=j1;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function yL(e){return queueMicrotask(()=>e()),()=>{e=j1}}var ZA="isAngularZone",z1=ZA+"_ID",kce=0,Zn=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ar(!1);onMicrotaskEmpty=new ar(!1);onStable=new ar(!1);onError=new ar(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=JV}=t;if(typeof Zone>"u")throw new Ge(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,Fce(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ZA)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Ge(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Ge(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,Oce,j1,j1);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},Oce={};function QA(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Mce(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){nB(()=>{e.callbackScheduled=!1,YN(e),e.isCheckStableRunning=!0,QA(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),YN(e)}function Fce(e){let t=()=>{Mce(e)},n=kce++;e._inner=e._inner.fork({name:"angular",properties:{[ZA]:!0,[z1]:n,[z1+n]:!0},onInvokeTask:(r,o,i,s,a,u)=>{if(Pce(u))return r.invokeTask(i,s,a,u);try{return vL(e),r.invokeTask(i,s,a,u)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),xL(e)}},onInvoke:(r,o,i,s,a,u,c)=>{try{return vL(e),r.invoke(i,s,a,u,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!$ce(u)&&t(),xL(e)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,YN(e),QA(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function YN(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function vL(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function xL(e){e._nesting--,QA(e)}var ZN=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ar;onMicrotaskEmpty=new ar;onStable=new ar;onError=new ar;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}};function Pce(e){return rB(e,"__ignore_ng_zone__")}function $ce(e){return rB(e,"__scheduler_tick__")}function rB(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Vu=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Lce=new Pe("",{providedIn:"root",factory:()=>{let e=de(Zn),t=de(Vu);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function bL(e,t){return JL(e,t)}function Vce(e){return JL(QL,e)}var oB=(bL.required=Vce,bL);function Bce(){return Kp(Eo(),nn())}function Kp(e,t){return new hi(Yi(e,t))}var hi=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Bce}return e})();function Uce(e){return e instanceof hi?e.nativeElement:e}function Gce(){return this._results[Symbol.iterator]()}var QN=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Er}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=_ue(t);(this._changesDetected=!Tue(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Gce},jce="ngSkipHydration",zce="ngskiphydration";function iB(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let r=t[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===zce)return!0}return!1}function sB(e){return e.hasAttribute(jce)}function H1(e){return(e.flags&128)===128}function Hce(e){if(H1(e))return!0;let t=e.parent;for(;t;){if(H1(e)||iB(t))return!0;t=t.parent}return!1}var aB=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(aB||{}),uB=new Map,Wce=0;function qce(){return Wce++}function Kce(e){uB.set(e[lb],e)}function JN(e){uB.delete(e[lb])}var wL="__ngContext__";function Tf(e,t){la(t)?(e[wL]=t[lb],Kce(t)):e[wL]=t}function cB(e){return fB(e[ry])}function lB(e){return fB(e[ca])}function fB(e){for(;e!==null&&!Xa(e);)e=e[ca];return e}var eA;function dB(e){eA=e}function gb(){if(eA!==void 0)return eA;if(typeof document<"u")return document;throw new Ge(210,!1)}var Xp=new Pe("",{providedIn:"root",factory:()=>Xce}),Xce="ng",JA=new Pe(""),ks=new Pe("",{providedIn:"platform",factory:()=>"unknown"});var eR=new Pe("",{providedIn:"root",factory:()=>gb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Yce(){let e=new Rf;return de(ks)==="browser"&&(e.store=Zce(gb(),de(Xp))),e}var Rf=(()=>{class e{static \u0275prov=He({token:e,providedIn:"root",factory:Yce});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function Zce(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+t,r)}return{}}var pB="h",hB="b",tA=function(e){return e.FirstChild="f",e.NextSibling="n",e}(tA||{}),Qce="e",Jce="t",tR="c",mB="x",W1="r",ele="i",tle="n",gB="d";var nle="di",rle="s",ole="p";var g1=new Pe(""),yB=!1,vB=new Pe("",{providedIn:"root",factory:()=>yB});var xB=new Pe(""),ile=!1,sle=new Pe(""),EL=new Pe("",{providedIn:"root",factory:()=>new Map}),nR=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(nR||{}),yb=new Pe(""),CL=new Set;function Ya(e){CL.has(e)||(CL.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var Ap=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Ap||{}),bB=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=He({token:e,providedIn:"root",factory:()=>new e})}return e})(),ale=[Ap.EarlyRead,Ap.Write,Ap.MixedReadWrite,Ap.Read],ule=(()=>{class e{ngZone=de(Zn);scheduler=de(Gp);errorHandler=de(Vu,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){de(yb,{optional:!0})}execute(){this.executing=!0;for(let n of ale)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[n]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>r.hooks[n](r.pipelinedValue),r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&(this.sequences.delete(n),n.destroy());for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(7))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?.run(nR.AFTER_NEXT_RENDER,n)??n()}static \u0275prov=He({token:e,providedIn:"root",factory:()=>new e})}return e})(),nA=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,o,i=null){this.impl=t,this.hooks=n,this.once=r,this.snapshot=i,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function vb(e,t){!t?.injector&&Bue(vb);let n=t?.injector??de(pi);return Ya("NgAfterNextRender"),lle(e,n,t,!0)}function cle(e,t){if(e instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[t]=e,n}else return[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function lle(e,t,n,r){let o=t.get(bB);o.impl??=t.get(ule);let i=t.get(yb,null,{optional:!0}),s=n?.phase??Ap.MixedReadWrite,a=n?.manualCleanup!==!0?t.get(YA):null,u=new nA(o.impl,cle(e,s),r,a,i?.snapshot(null));return o.impl.register(u),u}var Hi=function(e){return e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.COMPLETE=2]="COMPLETE",e[e.FAILED=3]="FAILED",e}(Hi||{}),TL=0,fle=1,oo=function(e){return e[e.Placeholder=0]="Placeholder",e[e.Loading=1]="Loading",e[e.Complete=2]="Complete",e[e.Error=3]="Error",e}(oo||{});var dle=0,rR=1;var ple=4,hle=5;var mle=7,Pp=8,gle=9,wB=function(e){return e[e.Manual=0]="Manual",e[e.Playthrough=1]="Playthrough",e}(wB||{});function I1(e,t){let n=vle(e),r=t[n];if(r!==null){for(let o of r)o();t[n]=null}}function yle(e){I1(1,e),I1(0,e),I1(2,e)}function vle(e){let t=ple;return e===1?t=hle:e===2&&(t=gle),t}function EB(e){return e+1}function xb(e,t){let n=e[at],r=EB(t.index);return e[r]}function bb(e,t){let n=EB(t.index);return e.data[n]}function xle(e,t,n){let r=t[at],o=bb(r,n);switch(e){case oo.Complete:return o.primaryTmplIndex;case oo.Loading:return o.loadingTmplIndex;case oo.Error:return o.errorTmplIndex;case oo.Placeholder:return o.placeholderTmplIndex;default:return null}}function _L(e,t){return t===oo.Placeholder?e.placeholderBlockConfig?.[TL]??null:t===oo.Loading?e.loadingBlockConfig?.[TL]??null:null}function ble(e){return e.loadingBlockConfig?.[fle]??null}function IL(e,t){if(!e||e.length===0)return t;let n=new Set(e);for(let r of t)n.add(r);return e.length===n.size?e:Array.from(n)}function wle(e,t){let n=t.primaryTmplIndex+bo;return fb(e,n)}var wb="ngb";var Ele=(e,t,n)=>{let r=e,o=r.__jsaction_fns??new Map,i=o.get(t)??[];i.push(n),o.set(t,i),r.__jsaction_fns=o},Cle=(e,t)=>{let n=e.getAttribute(wb)??"",r=e,o=t.get(n)??new Set;o.has(r)||o.add(r),t.set(n,o)};var Tle=e=>{e.removeAttribute(pN.JSACTION),e.removeAttribute(wb),e.__jsaction_fns=void 0},_le=new Pe("",{providedIn:"root",factory:()=>({})});function CB(e,t){let n=t?.__jsaction_fns?.get(e.type);if(n)for(let r of n)r(e)}var TB=new Pe("");var Ile="__nghData__",_B=Ile,Sle="__nghDeferData__",IB=Sle,TN="ngh",Dle="nghm",SB=()=>null;function Nle(e,t,n=!1){let r=e.getAttribute(TN);if(r==null)return null;let[o,i]=r.split("|");if(r=n?i:o,!r)return null;let s=i?`|${i}`:"",a=n?o:s,u={},c;if(r!==""){let d=t.get(Rf,null,{optional:!0});if(d!==null){let h=d.get(_B,[]);c=d.get(IB,{}),u=h[Number(r)]}}let f={data:u,firstChild:e.firstChild??null};return n&&(f.firstChild=e,Eb(f,0,e.nextSibling)),a?e.setAttribute(TN,a):e.removeAttribute(TN),f}function Ale(){SB=Nle}function oR(e,t,n=!1){return SB(e,t,n)}function Rle(e){let t=e._lView;return t[at].type===2?null:(L1(t)&&(t=t[bo]),t)}function kle(e){return e.textContent?.replace(/\s/gm,"")}function Ole(e){let t=gb(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(i){let s=kle(i);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,o=[];for(;r=n.nextNode();)o.push(r);for(let i of o)i.textContent==="ngetn"?i.replaceWith(t.createTextNode("")):i.remove()}function Eb(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function rA(e,t){return e.segmentHeads?.[t]??null}function Mle(e){return e.get(sle,!1,{optional:!0})}function Fle(e,t){let n=e.data,r=n[Qce]?.[t]??null;return r===null&&n[tR]?.[t]&&(r=iR(e,t)),r}function DB(e,t){return e.data[tR]?.[t]??null}function iR(e,t){let n=DB(e,t)??[],r=0;for(let o of n)r+=o[W1]*(o[mB]??1);return r}function Ple(e){if(typeof e.disconnectedNodes>"u"){let t=e.data[gB];e.disconnectedNodes=t?new Set(t):null}return e.disconnectedNodes}function hy(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[gB];e.disconnectedNodes=n?new Set(n):null}return!!Ple(e)?.has(t)}function $le(e,t){let n=t.get(TB),o=t.get(Rf).get(IB,{}),i=!1,s=e,a=null,u=[];for(;!i&&s;){i=n.has(s);let c=n.hydrating.get(s);if(a===null&&c!=null){a=c.promise;break}u.unshift(s),s=o[s][ole]}return{parentBlockPromise:a,hydrationQueue:u}}var Ka=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Ka||{});var y1;function Lle(){if(y1===void 0&&(y1=null,ON.trustedTypes))try{y1=ON.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return y1}function SL(e){return Lle()?.createScriptURL(e)||e}var q1=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ZL})`}};function my(e){return e instanceof q1?e.changingThisBreaksApplicationSecurity:e}function sR(e,t){let n=Vle(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${ZL})`)}return n===t}function Vle(e){return e instanceof q1&&e.getTypeName()||null}var Ble=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function NB(e){return e=String(e),e.match(Ble)?e:"unsafe:"+e}var Cb=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Cb||{});function Ule(e){let t=RB();return t?t.sanitize(Cb.URL,e)||"":sR(e,"URL")?my(e):NB($p(e))}function Gle(e){let t=RB();if(t)return SL(t.sanitize(Cb.RESOURCE_URL,e)||"");if(sR(e,"ResourceURL"))return SL(my(e));throw new Ge(904,!1)}function jle(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?Gle:Ule}function AB(e,t,n){return jle(t,n)(e)}function RB(){let e=nn();return e&&e[Pu].sanitizer}var zle=/^>|^->|<!--|-->|--!>|<!-$/g,Hle=/(<|>)/g,Wle="\u200B$1\u200B";function qle(e){return e.replace(zle,t=>t.replace(Hle,Wle))}function Kle(e){return e.ownerDocument.body}function kB(e){return e instanceof Function?e():e}var Gc=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Gc||{}),Bu=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Bu||{}),Xle;function aR(e,t){return Xle(e,t)}function Rp(e,t,n,r,o){if(r!=null){let i,s=!1;Xa(r)?i=r:la(r)&&(s=!0,r=r[qi]);let a=da(r);e===0&&n!==null?o==null?$B(t,n,a):X1(t,n,a,o||null,!0):e===1&&n!==null?X1(t,n,a,o||null,!0):e===2?dR(t,a,s):e===3&&t.destroyNode(a),i!=null&&lfe(t,e,i,n,o)}}function OB(e,t){return e.createText(t)}function Yle(e,t,n){e.setValue(t,n)}function MB(e,t){return e.createComment(qle(t))}function uR(e,t,n){return e.createElement(t,n)}function Zle(e,t){FB(e,t),t[qi]=null,t[pa]=null}function Qle(e,t,n,r,o,i){r[qi]=o,r[pa]=t,Tb(e,r,n,1,o,i)}function FB(e,t){t[Pu].changeDetectionScheduler?.notify(10),Tb(e,t,t[jn],2,null,null)}function Jle(e){let t=e[ry];if(!t)return _N(e[at],e);for(;t;){let n=null;if(la(t))n=t[ry];else{let r=t[fi];r&&(n=r)}if(!n){for(;t&&!t[ca]&&t!==e;)la(t)&&_N(t[at],t),t=t[zr];t===null&&(t=e),la(t)&&_N(t[at],t),n=t&&t[ca]}t=n}}function efe(e,t,n,r){let o=fi+r,i=n.length;r>0&&(n[o-1][ca]=t),r<i-fi?(t[ca]=n[o],cV(n,fi+r,t)):(n.push(t),t[ca]=null),t[zr]=n;let s=t[xf];s!==null&&n!==s&&PB(s,t);let a=t[$u];a!==null&&a.insertView(e),UN(t),t[st]|=128}function PB(e,t){let n=e[Up],r=t[zr];if(la(r))e[st]|=$1.HasTransplantedViews;else{let o=r[zr][Rs];t[Rs]!==o&&(e[st]|=$1.HasTransplantedViews)}n===null?e[Up]=[t]:n.push(t)}function cR(e,t){let n=e[Up],r=n.indexOf(t);n.splice(r,1)}function K1(e,t){if(e.length<=fi)return;let n=fi+t,r=e[n];if(r){let o=r[xf];o!==null&&o!==e&&cR(o,r),t>0&&(e[n-1][ca]=r[ca]);let i=k1(e,fi+t);Zle(r[at],r);let s=i[$u];s!==null&&s.detachView(i[at]),r[zr]=null,r[ca]=null,r[st]&=-129}return r}function lR(e,t){if(!(t[st]&256)){let n=t[jn];n.destroyNode&&Tb(e,t,n,3,null,null),Jle(t)}}function _N(e,t){if(t[st]&256)return;let n=Kt(null);try{t[st]&=-129,t[st]|=256,t[Wi]&&BD(t[Wi]),nfe(e,t),tfe(e,t),t[at].type===1&&t[jn].destroy();let r=t[xf];if(r!==null&&Xa(t[zr])){r!==t[zr]&&cR(r,t);let o=t[$u];o!==null&&o.detachView(e)}JN(t)}finally{Kt(n)}}function tfe(e,t){let n=e.cleanup,r=t[M1];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[M1]=null);let o=t[Vc];if(o!==null){t[Vc]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=t[F1];if(i!==null){t[F1]=null;for(let s of i)s.destroy()}}function nfe(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=t[n[r]];if(!(o instanceof Ef)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],u=i[s+1];Ha(4,a,u);try{u.call(a)}finally{Ha(5,a,u)}}else{Ha(4,o,i);try{i.call(o)}finally{Ha(5,o,i)}}}}}function rfe(e,t,n){return ofe(e,t.parent,n)}function ofe(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[qi];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:i}=e.data[r.directiveStart+o];if(i===Ka.None||i===Ka.Emulated)return null}return Yi(r,n)}}function X1(e,t,n,r,o){e.insertBefore(t,n,r,o)}function $B(e,t,n){e.appendChild(t,n)}function DL(e,t,n,r,o){r!==null?X1(e,t,n,r,o):$B(e,t,n)}function LB(e,t){return e.parentNode(t)}function ife(e,t){return e.nextSibling(t)}function sfe(e,t,n){return ufe(e,t,n)}function afe(e,t,n){return e.type&40?Yi(e,n):null}var ufe=afe,NL;function fR(e,t,n,r){let o=rfe(e,r,t),i=t[jn],s=r.parent||t[pa],a=sfe(s,r,t);if(o!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)DL(i,o,n[u],a,!1);else DL(i,o,n,a,!1);NL!==void 0&&NL(i,r,t,n,o)}function Jg(e,t){if(t!==null){let n=t.type;if(n&3)return Yi(t,e);if(n&4)return oA(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Jg(e,r);{let o=e[t.index];return Xa(o)?oA(-1,o):da(o)}}else{if(n&128)return Jg(e,t.next);if(n&32)return aR(t,e)()||da(e[t.index]);{let r=VB(e,t);if(r!==null){if(Array.isArray(r))return r[0];let o=bf(e[Rs]);return Jg(o,r)}else return Jg(e,t.next)}}}return null}function VB(e,t){if(t!==null){let r=e[Rs][pa],o=t.projection;return r.projection[o]}return null}function oA(e,t){let n=fi+e+1;if(n<t.length){let r=t[n],o=r[at].firstChild;if(o!==null)return Jg(r,o)}return t[Lu]}function dR(e,t,n){e.removeChild(null,t,n)}function BB(e){e.textContent=""}function pR(e,t,n,r,o,i,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&t===0&&(a&&Tf(da(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)pR(e,t,n.child,r,o,i,!1),Rp(t,e,o,a,i);else if(u&32){let c=aR(n,r),f;for(;f=c();)Rp(t,e,o,f,i);Rp(t,e,o,a,i)}else u&16?cfe(e,t,r,n,o,i):Rp(t,e,o,a,i);n=s?n.projectionNext:n.next}}function Tb(e,t,n,r,o,i){pR(n,r,e.firstChild,t,o,i,!1)}function cfe(e,t,n,r,o,i){let s=n[Rs],u=s[pa].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let f=u[c];Rp(t,e,o,f,i)}else{let c=u,f=s[zr];H1(r)&&(c.flags|=128),pR(e,t,c,f,o,i,!0)}}function lfe(e,t,n,r,o){let i=n[Lu],s=da(n);i!==s&&Rp(t,e,r,i,o);for(let a=fi;a<n.length;a++){let u=n[a];Tb(u[at],u,e,t,r,i)}}function ffe(e,t,n,r,o){if(t)o?e.addClass(n,r):e.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:Bu.DashCase;o==null?e.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Bu.Important),e.setStyle(n,r,o,i))}}function dfe(e,t,n){e.setAttribute(t,"style",n)}function UB(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function GB(e,t,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&zN(e,t,r),o!==null&&UB(e,t,o),i!==null&&dfe(e,t,i)}function pfe(e,t,n){let r=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}var jB="ng-template";function hfe(e,t,n,r){let o=0;if(r){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&pfe(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(hR(e))return!1;if(o=t.indexOf(1,o),o>-1){let i;for(;++o<t.length&&typeof(i=t[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function hR(e){return e.type===4&&e.value!==jB}function mfe(e,t,n){let r=e.type===4&&!n?jB:e.value;return t===r}function gfe(e,t,n){let r=4,o=e.attrs,i=o!==null?xfe(o):0,s=!1;for(let a=0;a<t.length;a++){let u=t[a];if(typeof u=="number"){if(!s&&!ua(r)&&!ua(u))return!1;if(s&&ua(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!mfe(e,u,n)||u===""&&t.length===1){if(ua(r))return!1;s=!0}}else if(r&8){if(o===null||!hfe(e,o,u,n)){if(ua(r))return!1;s=!0}}else{let c=t[++a],f=yfe(u,o,hR(e),n);if(f===-1){if(ua(r))return!1;s=!0;continue}if(c!==""){let d;if(f>i?d="":d=o[f+1].toLowerCase(),r&2&&c!==d){if(ua(r))return!1;s=!0}}}}return ua(r)||s}function ua(e){return(e&1)===0}function yfe(e,t,n,r){if(t===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){let s=t[o];if(s===e)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return bfe(t,e)}function vfe(e,t,n=!1){for(let r=0;r<t.length;r++)if(gfe(e,t[r],n))return!0;return!1}function xfe(e){for(let t=0;t<e.length;t++){let n=e[t];if(GV(n))return t}return e.length}function bfe(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function AL(e,t){return e?":not("+t.trim()+")":t}function wfe(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!ua(s)&&(t+=AL(i,o),o=""),r=s,i=i||!ua(r);n++}return o!==""&&(t+=AL(i,o)),t}function Efe(e){return e.map(wfe).join(",")}function Cfe(e){let t=[],n=[],r=1,o=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")o===2?i!==""&&t.push(i,e[++r]):o===8&&n.push(i);else{if(!ua(o))break;o=i}r++}return{attrs:t,classes:n}}var ju={};function gn(e=1){zB(wo(),nn(),Af()+e,!1)}function zB(e,t,n,r){if(!r)if((t[st]&3)===3){let i=e.preOrderCheckHooks;i!==null&&C1(t,i,n)}else{let i=e.preOrderHooks;i!==null&&T1(t,i,0,n)}wf(n)}function ht(e,t=Rt.Default){let n=nn();if(n===null)return xt(e,t);let r=Eo();return XV(r,n,Bo(e),t)}function HB(){let e="invalid";throw new Error(e)}function WB(e,t,n,r,o,i){let s=Kt(null);try{let a=null;o&Gc.SignalBased&&(a=t[r][Gi]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),o&Gc.HasDecoratorInputTransform&&(i=e.inputTransforms[r].call(t,i)),e.setInput!==null?e.setInput(t,a,i,n,r):wV(t,a,r,i)}finally{Kt(s)}}function Tfe(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)wf(~o);else{let i=o,s=n[++r],a=n[++r];lce(s,i);let u=t[i];a(2,u)}}}finally{wf(-1)}}function _b(e,t,n,r,o,i,s,a,u,c,f){let d=t.blueprint.slice();return d[qi]=o,d[st]=r|4|128|8|64|1024,(c!==null||e&&e[st]&2048)&&(d[st]|=2048),IV(d),d[zr]=d[qp]=e,d[fa]=n,d[Pu]=s||e&&e[Pu],d[jn]=a||e&&e[jn],d[Fu]=u||e&&e[Fu]||null,d[pa]=i,d[lb]=qce(),d[qa]=f,d[vV]=c,d[Rs]=t.type==2?e[Rs]:d,d}function Ib(e,t,n,r,o){let i=e.data[t];if(i===null)i=_fe(e,t,n,r,o),cce()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=oce();i.injectorIndex=s===null?-1:s.injectorIndex}return dy(i,!0),i}function _fe(e,t,n,r,o){let i=NV(),s=AV(),a=s?i:i&&i.parent,u=e.data[t]=kfe(e,a,n,t,r,o);return e.firstChild===null&&(e.firstChild=u),i!==null&&(s?i.child==null&&u.parent!==null&&(i.child=u):i.next===null&&(i.next=u,u.prev=i)),u}function qB(e,t,n,r){if(n===0)return-1;let o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function KB(e,t,n,r,o){let i=Af(),s=r&2;try{wf(-1),s&&t.length>bo&&zB(e,t,bo,!1),Ha(s?2:0,o),n(r,o)}finally{wf(i),Ha(s?3:1,o)}}function XB(e,t,n){if(bV(t)){let r=Kt(null);try{let o=t.directiveStart,i=t.directiveEnd;for(let s=o;s<i;s++){let a=e.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Kt(r)}}}function YB(e,t,n){DV()&&(Lfe(e,t,n,Yi(n,t)),(n.flags&64)===64&&rU(e,t,n))}function ZB(e,t,n=Yi){let r=t.localNames;if(r!==null){let o=t.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(t,e):e[s];e[o++]=a}}}function QB(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=mR(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function mR(e,t,n,r,o,i,s,a,u,c,f){let d=bo+r,h=d+o,m=Ife(d,h),v=typeof c=="function"?c():c;return m[at]={type:e,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:t,data:m.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:v,incompleteFirstPass:!1,ssrId:f}}function Ife(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:ju);return n}function Sfe(e,t,n,r){let i=r.get(vB,yB)||n===Ka.ShadowDom,s=e.selectRootElement(t,i);return Dfe(s),s}function Dfe(e){JB(e)}var JB=()=>null;function Nfe(e){sB(e)?BB(e):Ole(e)}function Afe(){JB=Nfe}function Rfe(e,t,n,r){let o=aU(t);o.push(n),e.firstCreatePass&&uU(e).push(r,o.length-1)}function kfe(e,t,n,r,o,i){let s=t?t.injectorIndex:-1,a=0;return fy()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function RL(e,t,n,r,o){for(let i in t){if(!t.hasOwnProperty(i))continue;let s=t[i];if(s===void 0)continue;r??={};let a,u=Gc.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=i;if(o!==null){if(!o.hasOwnProperty(i))continue;c=o[i]}e===0?kL(r,n,c,a,u):kL(r,n,c,a)}return r}function kL(e,t,n,r,o){let i;e.hasOwnProperty(n)?(i=e[n]).push(t,r):i=e[n]=[t,r],o!==void 0&&i.push(o)}function Ofe(e,t,n){let r=t.directiveStart,o=t.directiveEnd,i=e.data,s=t.attrs,a=[],u=null,c=null;for(let f=r;f<o;f++){let d=i[f],h=n?n.get(d):null,m=h?h.inputs:null,v=h?h.outputs:null;u=RL(0,d.inputs,f,u,m),c=RL(1,d.outputs,f,c,v);let x=u!==null&&s!==null&&!hR(t)?Xfe(u,f,s):null;a.push(x)}u!==null&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=u,t.outputs=c}function Mfe(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function eU(e,t,n,r,o,i,s,a){let u=Yi(t,n),c=t.inputs,f;!a&&c!=null&&(f=c[r])?(gR(e,n,f,r,o),ly(t)&&Ffe(n,t.index)):t.type&3?(r=Mfe(r),o=s!=null?s(o,t.value||"",r):o,i.setProperty(u,r,o)):t.type&12}function Ffe(e,t){let n=Hc(t,e);n[st]&16||(n[st]|=64)}function tU(e,t,n,r){if(DV()){let o=r===null?null:{"":-1},i=Bfe(e,n),s,a;i===null?s=a=null:[s,a]=i,s!==null&&nU(e,t,n,s,o,a),o&&Ufe(n,r,o)}n.mergedAttrs=oy(n.mergedAttrs,n.attrs)}function nU(e,t,n,r,o,i){for(let c=0;c<r.length;c++)WN(G1(n,t),e,r[c].type);jfe(n,e.data.length,r.length);for(let c=0;c<r.length;c++){let f=r[c];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,u=qB(e,t,r.length,null);for(let c=0;c<r.length;c++){let f=r[c];n.mergedAttrs=oy(n.mergedAttrs,f.hostAttrs),zfe(e,n,t,u,f),Gfe(u,f,o),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let d=f.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}Ofe(e,n,i)}function Pfe(e,t,n,r,o){let i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;$fe(s)!=a&&s.push(a),s.push(n,r,i)}}function $fe(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function Lfe(e,t,n,r){let o=n.directiveStart,i=n.directiveEnd;ly(n)&&Hfe(t,n,e.data[o+n.componentOffset]),e.firstCreatePass||G1(n,t),Tf(r,t);let s=n.initialInputs;for(let a=o;a<i;a++){let u=e.data[a],c=Cf(t,e,a,n);if(Tf(c,t),s!==null&&Kfe(t,a-o,c,u,n,s),Uc(u)){let f=Hc(n.index,t);f[fa]=Cf(t,e,a,n)}}}function rU(e,t,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=fce();try{wf(i);for(let a=r;a<o;a++){let u=e.data[a],c=t[a];jN(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Vfe(u,c)}}finally{wf(-1),jN(s)}}function Vfe(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Bfe(e,t){let n=e.directiveRegistry,r=null,o=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(vfe(t,s.selectors,!1))if(r||(r=[]),Uc(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s);let u=a.length;iA(e,t,u)}else r.unshift(s),iA(e,t,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return r===null?null:[r,o]}function iA(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Ufe(e,t,n){if(t){let r=e.localNames=[];for(let o=0;o<t.length;o+=2){let i=n[t[o+1]];if(i==null)throw new Ge(-301,!1);r.push(t[o],i)}}}function Gfe(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Uc(t)&&(n[""]=e)}}function jfe(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function zfe(e,t,n,r,o){e.data[r]=o;let i=o.factory||(o.factory=Lp(o.type,!0)),s=new Ef(i,Uc(o),ht);e.blueprint[r]=s,n[r]=s,Pfe(e,t,r,qB(e,n,o.hostVars,ju),o)}function oU(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function Hfe(e,t,n){let r=Yi(t,e),o=QB(n),i=e[Pu].rendererFactory,s=Sb(e,_b(e,o,null,oU(n),r,t,null,i.createRenderer(r,n),null,null,null));e[t.index]=s}function Wfe(e,t,n,r,o,i){let s=Yi(e,t);qfe(t[jn],s,i,e.value,n,r,o)}function qfe(e,t,n,r,o,i,s){if(i==null)e.removeAttribute(t,o,n);else{let a=s==null?$p(i):s(i,r||"",o);e.setAttribute(t,o,a,n)}}function Kfe(e,t,n,r,o,i){let s=i[t];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],c=s[a++],f=s[a++],d=s[a++];WB(r,n,u,c,f,d)}}function Xfe(e,t,n){let r=null,o=0;for(;o<n.length;){let i=n[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(e.hasOwnProperty(i)){r===null&&(r=[]);let s=e[i];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(i,s[a+1],s[a+2],n[o+1]);break}}o+=2}return r}function iU(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function sU(e,t){let n=e.contentQueries;if(n!==null){let r=Kt(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=e.data[s];GA(i),a.contentQueries(2,t[s],s)}}}finally{Kt(r)}}}function Sb(e,t){return e[ry]?e[uL][ca]=t:e[ry]=t,e[uL]=t,t}function sA(e,t,n){GA(0);let r=Kt(null);try{t(e,n)}finally{Kt(r)}}function aU(e){return e[M1]??=[]}function uU(e){return e.cleanup??=[]}function Db(e,t){let n=e[Fu],r=n?n.get(Vu,null):null;r&&r.handleError(t)}function gR(e,t,n,r,o){for(let i=0;i<n.length;){let s=n[i++],a=n[i++],u=n[i++],c=t[s],f=e.data[s];WB(f,c,r,a,u,o)}}function cU(e,t,n){let r=_V(t,e);Yle(e[jn],r,n)}function Yfe(e,t){let n=Hc(t,e),r=n[at];Zfe(r,n);let o=n[qi];o!==null&&n[qa]===null&&(n[qa]=oR(o,n[Fu])),yR(r,n,n[fa])}function Zfe(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function yR(e,t,n){jA(t);try{let r=e.viewQuery;r!==null&&sA(1,r,n);let o=e.template;o!==null&&KB(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[$u]?.finishViewCreation(e),e.staticContentQueries&&sU(e,t),e.staticViewQueries&&sA(2,e.viewQuery,n);let i=e.components;i!==null&&Qfe(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[st]&=-5,zA()}}function Qfe(e,t){for(let n=0;n<t.length;n++)Yfe(e,t[n])}function lU(e,t,n,r){let o=Kt(null);try{let i=t.tView,a=e[st]&4096?4096:16,u=_b(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=e[t.index];u[xf]=c;let f=e[$u];return f!==null&&(u[$u]=f.createEmbeddedView(i)),yR(i,u,n),u}finally{Kt(o)}}function aA(e,t){return!t||t.firstChild===null||H1(e)}function fU(e,t,n,r=!0){let o=t[at];if(efe(o,t,e,n),r){let s=oA(n,e),a=t[jn],u=LB(a,e[Lu]);u!==null&&Qle(o,e[pa],a,t,u,s)}let i=t[qa];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Jfe(e,t){let n=K1(e,t);return n!==void 0&&lR(n[at],n),n}function Y1(e,t,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let i=t[n.index];i!==null&&r.push(da(i)),Xa(i)&&ede(i,r);let s=n.type;if(s&8)Y1(e,t,n.child,r);else if(s&32){let a=aR(n,t),u;for(;u=a();)r.push(u)}else if(s&16){let a=VB(t,n);if(Array.isArray(a))r.push(...a);else{let u=bf(t[Rs]);Y1(u[at],u,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function ede(e,t){for(let n=fi;n<e.length;n++){let r=e[n],o=r[at].firstChild;o!==null&&Y1(r[at],r,o,t)}e[Lu]!==e[qi]&&t.push(e[Lu])}var dU=[];function tde(e){return e[Wi]??nde(e)}function nde(e){let t=dU.pop()??Object.create(ode);return t.lView=e,t}function rde(e){e.lView[Wi]!==e&&(e.lView=null,dU.push(e))}var ode=Tt(xe({},Wg),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{pb(e.lView)},consumerOnSignalRead(){this.lView[Wi]=this}});function ide(e){let t=e[Wi]??Object.create(sde);return t.lView=e,t}var sde=Tt(xe({},Wg),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=bf(e.lView);for(;t&&!pU(t[at]);)t=bf(t);t&&UA(t)},consumerOnSignalRead(){this.lView[Wi]=this}});function pU(e){return e.type!==2}function hU(e){if(e[F1]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[F1])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[st]&8192)}}var ade=100;function mU(e,t=!0,n=0){let o=e[Pu].rendererFactory,i=!1;i||o.begin?.();try{ude(e,n)}catch(s){throw t&&Db(e,s),s}finally{i||o.end?.()}}function ude(e,t){let n=RV();try{lL(!0),uA(e,t);let r=0;for(;db(e);){if(r===ade)throw new Ge(103,!1);r++,uA(e,1)}}finally{lL(n)}}function cde(e,t,n,r){let o=t[st];if((o&256)===256)return;let i=!1,s=!1;jA(t);let a=!0,u=null,c=null;i||(pU(e)?(c=tde(t),u=Mx(c)):Q$()===null?(a=!1,c=ide(t),u=Mx(c)):t[Wi]&&(BD(t[Wi]),t[Wi]=null));try{IV(t),uce(e.bindingStartIndex),n!==null&&KB(e,t,n,2,r);let f=(o&3)===3;if(!i)if(f){let m=e.preOrderCheckHooks;m!==null&&C1(t,m,null)}else{let m=e.preOrderHooks;m!==null&&T1(t,m,0,null),wN(t,0)}if(s||lde(t),hU(t),gU(t,0),e.contentQueries!==null&&sU(e,t),!i)if(f){let m=e.contentCheckHooks;m!==null&&C1(t,m)}else{let m=e.contentHooks;m!==null&&T1(t,m,1),wN(t,1)}Tfe(e,t);let d=e.components;d!==null&&vU(t,d,0);let h=e.viewQuery;if(h!==null&&sA(2,h,r),!i)if(f){let m=e.viewCheckHooks;m!==null&&C1(t,m)}else{let m=e.viewHooks;m!==null&&T1(t,m,2),wN(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[bN]){for(let m of t[bN])m();t[bN]=null}i||(t[st]&=-73)}catch(f){throw i||pb(t),f}finally{c!==null&&(LD(c,u),a&&rde(c)),zA()}}function gU(e,t){for(let n=cB(e);n!==null;n=lB(n))for(let r=fi;r<n.length;r++){let o=n[r];yU(o,t)}}function lde(e){for(let t=cB(e);t!==null;t=lB(t)){if(!(t[st]&$1.HasTransplantedViews))continue;let n=t[Up];for(let r=0;r<n.length;r++){let o=n[r];UA(o)}}}function fde(e,t,n){let r=Hc(t,e);yU(r,n)}function yU(e,t){BA(e)&&uA(e,t)}function uA(e,t){let r=e[at],o=e[st],i=e[Wi],s=!!(t===0&&o&16);if(s||=!!(o&64&&t===0),s||=!!(o&1024),s||=!!(i?.dirty&&VD(i)),s||=!1,i&&(i.dirty=!1),e[st]&=-9217,s)cde(r,e,r.template,e[fa]);else if(o&8192){hU(e),gU(e,1);let a=r.components;a!==null&&vU(e,a,1)}}function vU(e,t,n){for(let r=0;r<t.length;r++)fde(e,t[r],n)}function Nb(e,t){let n=RV()?64:1088;for(e[Pu].changeDetectionScheduler?.notify(t);e;){e[st]|=n;let r=bf(e);if(L1(e)&&!r)return e;e=r}return null}var _f=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,n=t[at];return Y1(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[fa]}get dirty(){return!!(this._lView[st]&9280)||!!this._lView[Wi]?.dirty}set context(t){this._lView[fa]=t}get destroyed(){return(this._lView[st]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[zr];if(Xa(t)){let n=t[P1],r=n?n.indexOf(this):-1;r>-1&&(K1(t,r),k1(n,r))}this._attachedToViewContainer=!1}lR(this._lView[at],this._lView)}onDestroy(t){SV(this._lView,t)}markForCheck(){Nb(this._cdRefInjectingView||this._lView,4)}markForRefresh(){UA(this._cdRefInjectingView||this._lView)}detach(){this._lView[st]&=-129}reattach(){UN(this._lView),this._lView[st]|=128}detectChanges(){this._lView[st]|=1024,mU(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=L1(this._lView),n=this._lView[xf];n!==null&&!t&&cR(n,this._lView),FB(this._lView[at],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ge(902,!1);this._appRef=t;let n=L1(this._lView),r=this._lView[xf];r!==null&&!n&&PB(r,this._lView),UN(this._lView)}},If=(()=>{class e{static __NG_ELEMENT_ID__=hde}return e})(),dde=If,pde=class extends dde{_declarationLView;_declarationTContainer;elementRef;constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let o=lU(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new _f(o)}};function hde(){return vR(Eo(),nn())}function vR(e,t){return e.type&4?new pde(t,e,Kp(e,t)):null}var mde=new RegExp(`^(\\d+)*(${hB}|${pB})*(.*)`);function gde(e){let t=e.match(mde),[n,r,o,i]=t,s=r?parseInt(r,10):o,a=[];for(let[u,c,f]of i.matchAll(/(f|n)(\d*)/g)){let d=parseInt(f,10)||1;a.push(c,d)}return[s,...a]}function yde(e){return!e.prev&&e.parent?.type===8}function IN(e){return e.index-bo}function vde(e,t){let n=e.i18nNodes;if(n)return n.get(t)}function Ab(e,t,n,r){let o=IN(r),i=vde(e,o);if(i===void 0){let s=e.data[tle];if(s?.[o])i=bde(s[o],n);else if(t.firstChild===r)i=e.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(yde(r)){let c=IN(r.parent);i=rA(e,c)}else{let c=Yi(u,n);if(a)i=c.firstChild;else{let f=IN(u),d=rA(e,f);if(u.type===2&&d){let m=iR(e,f)+1;i=Rb(m,d)}else i=c.nextSibling}}}}return i}function Rb(e,t){let n=t;for(let r=0;r<e;r++)n=n.nextSibling;return n}function xde(e,t){let n=e;for(let r=0;r<t.length;r+=2){let o=t[r],i=t[r+1];for(let s=0;s<i;s++)switch(o){case tA.FirstChild:n=n.firstChild;break;case tA.NextSibling:n=n.nextSibling;break}}return n}function bde(e,t){let[n,...r]=gde(e),o;if(n===pB)o=t[Rs][qi];else if(n===hB)o=Kle(t[Rs][qi]);else{let i=Number(n);o=da(t[i+bo])}return xde(o,r)}var wde=!1;function Ede(e){wde=e}function Cde(e){let t=e[qa];if(t){let{i18nNodes:n,dehydratedIcuData:r}=t;if(n&&r){let o=e[jn];for(let i of r.values())Tde(o,n,i)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function Tde(e,t,n){for(let r of n.node.cases[n.case]){let o=t.get(r.index-bo);o&&dR(e,o,!1)}}function xU(e){let t=e[Ou]??[],r=e[zr][jn],o=[];for(let i of t)i.data[nle]!==void 0?o.push(i):_de(i,r);e[Ou]=o}function _de(e,t){let n=0,r=e.firstChild;if(r){let o=e.data[W1];for(;n<o;){let i=r.nextSibling;dR(t,r,!1),r=i,n++}}}function xR(e){xU(e);let t=e[qi];la(t)&&Z1(t);for(let n=fi;n<e.length;n++)Z1(e[n])}function Z1(e){Cde(e);let t=e[at];for(let n=bo;n<t.bindingStartIndex;n++)if(Xa(e[n])){let r=e[n];xR(r)}else la(e[n])&&Z1(e[n])}function bU(e){let t=e._views;for(let n of t){let r=Rle(n);r!==null&&r[qi]!==null&&(la(r)?Z1(r):xR(r))}}function Ide(e,t,n,r){e!==null&&(n.cleanup(t),xR(e.lContainer),bU(r))}function Sde(e,t){let n=[];for(let r of t)for(let o=0;o<(r[mB]??1);o++){let i={data:r,firstChild:null};r[W1]>0&&(i.firstChild=e,e=Rb(r[W1],e)),n.push(i)}return[e,n]}var wU=()=>null;function Dde(e,t){let n=e[Ou];return!t||n===null||n.length===0?null:n[0].data[ele]===t?n.shift():(xU(e),null)}function Nde(){wU=Dde}function OL(e,t){return wU(e,t)}var cA=class{},Q1=class{},lA=class{resolveComponentFactory(t){throw Error(`No component factory found for ${Uo(t)}.`)}},jp=class{static NULL=new lA},zp=class{},Za=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>Ade()}return e})();function Ade(){let e=nn(),t=Eo(),n=Hc(t.index,e);return(la(n)?n:e)[jn]}var Rde=(()=>{class e{static \u0275prov=He({token:e,providedIn:"root",factory:()=>null})}return e})();function fA(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")i=a;else if(i==1)o=nL(o,a);else if(i==2){let u=a,c=t[++s];r=nL(r,u+": "+c+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}var J1=class extends jp{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Mu(t);return new Hp(n,this.ngModule)}};function ML(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let o=e[r];if(o===void 0)continue;let i=Array.isArray(o),s=i?o[0]:o,a=i?o[1]:Gc.None;t?n.push({propName:s,templateName:r,isSignal:(a&Gc.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function kde(e){let t=e.toLowerCase();return t==="svg"?Wue:t==="math"?que:null}var Hp=class extends Q1{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let t=this.componentDef,n=t.inputTransforms,r=ML(t.inputs,!0);if(n!==null)for(let o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return ML(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Efe(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,o){let i=Kt(null);try{o=o||this.ngModule;let s=o instanceof di?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Fp(t,s):t,u=a.get(zp,null);if(u===null)throw new Ge(407,!1);let c=a.get(Rde,null),f=a.get(Gp,null),d={rendererFactory:u,sanitizer:c,changeDetectionScheduler:f},h=u.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",v=r?Sfe(h,r,this.componentDef.encapsulation,a):uR(h,m,kde(m)),x=512;this.componentDef.signals?x|=4096:this.componentDef.onPush||(x|=16);let b=null;v!==null&&(b=oR(v,a,!0));let C=mR(0,null,null,1,0,null,null,null,null,null,null),D=_b(null,C,null,x,null,null,d,h,a,null,b);jA(D);let O,F,B=null;try{let H=this.componentDef,X,Z=null;H.findHostDirectiveDefs?(X=[],Z=new Map,H.findHostDirectiveDefs(H,X,Z),X.push(H)):X=[H];let te=Ode(D,v);B=Mde(te,v,H,X,D,d,h),F=fb(C,bo),v&&$de(h,H,v,r),n!==void 0&&Lde(F,this.ngContentSelectors,n),O=Pde(B,H,X,Z,D,[Vde]),yR(C,D,null)}catch(H){throw B!==null&&JN(B),JN(D),H}finally{zA()}return new dA(this.componentType,O,Kp(F,D),D,F)}finally{Kt(i)}}},dA=class extends cA{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(t,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=n,this.hostView=this.changeDetectorRef=new _f(o,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,o;if(r!==null&&(o=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView;gR(i[at],i,o,t,n),this.previousInputValues.set(t,n);let s=Hc(this._tNode.index,i);Nb(s,1)}}get injector(){return new vf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Ode(e,t){let n=e[at],r=bo;return e[r]=t,Ib(n,r,2,"#host",null)}function Mde(e,t,n,r,o,i,s){let a=o[at];Fde(r,e,t,s);let u=null;t!==null&&(u=oR(t,o[Fu]));let c=i.rendererFactory.createRenderer(t,n),f=_b(o,QB(n),null,oU(n),o[e.index],e,i,c,null,null,u);return a.firstCreatePass&&iA(a,e,r.length-1),Sb(o,f),o[e.index]=f}function Fde(e,t,n,r){for(let o of e)t.mergedAttrs=oy(t.mergedAttrs,o.hostAttrs);t.mergedAttrs!==null&&(fA(t,t.mergedAttrs,!0),n!==null&&GB(r,n,t))}function Pde(e,t,n,r,o,i){let s=Eo(),a=o[at],u=Yi(s,o);nU(a,o,s,n,null,r);for(let f=0;f<n.length;f++){let d=s.directiveStart+f,h=Cf(o,a,d,s);Tf(h,o)}rU(a,o,s),u&&Tf(u,o);let c=Cf(o,a,s.directiveStart+s.componentOffset,s);if(e[fa]=o[fa]=c,i!==null)for(let f of i)f(c,t);return XB(a,s,o),c}function $de(e,t,n,r){if(r)zN(e,n,["ng-version","19.0.1"]);else{let{attrs:o,classes:i}=Cfe(t.selectors[0]);o&&zN(e,n,o),i&&i.length>0&&UB(e,n,i.join(" "))}}function Lde(e,t,n){let r=e.projection=[];for(let o=0;o<t.length;o++){let i=n[o];r.push(i!=null&&i.length?Array.from(i):null)}}function Vde(){let e=Eo();qA(nn()[at],e)}var Xc=(()=>{class e{static __NG_ELEMENT_ID__=Bde}return e})();function Bde(){let e=Eo();return CU(e,nn())}var Ude=Xc,EU=class extends Ude{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Kp(this._hostTNode,this._hostLView)}get injector(){return new vf(this._hostTNode,this._hostLView)}get parentInjector(){let t=KA(this._hostTNode,this._hostLView);if(jV(t)){let n=U1(t,this._hostLView),r=B1(t),o=n[at].data[r+8];return new vf(o,n)}else return new vf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=FL(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-fi}createEmbeddedView(t,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=OL(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,aA(this._hostTNode,s)),a}createComponent(t,n,r,o,i){let s=t&&!Uue(t),a;if(s)a=n;else{let v=n||{};a=v.index,r=v.injector,o=v.projectableNodes,i=v.environmentInjector||v.ngModuleRef}let u=s?t:new Hp(Mu(t)),c=r||this.parentInjector;if(!i&&u.ngModule==null){let x=(s?c:this.parentInjector).get(di,null);x&&(i=x)}let f=Mu(u.componentType??{}),d=OL(this._lContainer,f?.id??null),h=d?.firstChild??null,m=u.create(c,o,h,i);return this.insertImpl(m.hostView,a,aA(this._hostTNode,d)),m}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let o=t._lView;if(Xue(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let u=o[zr],c=new EU(u,u[pa],u[zr]);c.detach(c.indexOf(t))}}let i=this._adjustIndex(n),s=this._lContainer;return fU(s,o,i,r),t.attachToViewContainerRef(),cV(SN(s),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=FL(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=K1(this._lContainer,n);r&&(k1(SN(this._lContainer),n),lR(r[at],r))}detach(t){let n=this._adjustIndex(t,-1),r=K1(this._lContainer,n);return r&&k1(SN(this._lContainer),n)!=null?new _f(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function FL(e){return e[P1]}function SN(e){return e[P1]||(e[P1]=[])}function CU(e,t){let n,r=t[e.index];return Xa(r)?n=r:(n=iU(r,t,null,e),t[e.index]=n,Sb(t,n)),TU(n,t,e,r),new EU(n,e,t)}function Gde(e,t){let n=e[jn],r=n.createComment(""),o=Yi(t,e),i=LB(n,o);return X1(n,i,r,ife(n,o),!1),r}var TU=_U,bR=()=>!1;function jde(e,t,n){return bR(e,t,n)}function _U(e,t,n,r){if(e[Lu])return;let o;n.type&8?o=da(r):o=Gde(t,n),e[Lu]=o}function zde(e,t,n){if(e[Lu]&&e[Ou])return!0;let r=n[qa],o=t.index-bo;if(!r||Hce(t)||hy(r,o))return!1;let s=rA(r,o),a=r.data[tR]?.[o],[u,c]=Sde(s,a);return e[Lu]=u,e[Ou]=c,!0}function Hde(e,t,n,r){bR(e,n,t)||_U(e,t,n,r)}function Wde(){TU=Hde,bR=zde}var pA=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},hA=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){let s=n.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new e(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)wR(t,n).matches!==null&&this.queries[n].setDirty()}},eb=class{flags;read;predicate;constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=epe(t):this.predicate=t}},mA=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(t,o);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},gA=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(t,n,qde(n,i)),this.matchTNodeWithReadOption(t,n,_1(n,t,i,!1,!1))}else r===If?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,_1(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===hi||o===Xc||o===If&&n.type&4)this.addMatch(n.index,-2);else{let i=_1(n,t,o,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function qde(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function Kde(e,t){return e.type&11?Kp(e,t):e.type&4?vR(e,t):null}function Xde(e,t,n,r){return n===-1?Kde(t,e):n===-2?Yde(e,t,r):Cf(e,e[at],n,t)}function Yde(e,t,n){if(n===hi)return Kp(t,e);if(n===If)return vR(t,e);if(n===Xc)return CU(t,e)}function IU(e,t,n,r){let o=t[$u].queries[r];if(o.matches===null){let i=e.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let c=s[u];if(c<0)a.push(null);else{let f=i[c];a.push(Xde(t,f,s[u+1],n.metadata.read))}}o.matches=a}return o.matches}function yA(e,t,n,r){let o=e.queries.getByIndex(n),i=o.matches;if(i!==null){let s=IU(e,t,o,n);for(let a=0;a<i.length;a+=2){let u=i[a];if(u>0)r.push(s[a/2]);else{let c=i[a+1],f=t[-u];for(let d=fi;d<f.length;d++){let h=f[d];h[xf]===h[zr]&&yA(h[at],h,c,r)}if(f[Up]!==null){let d=f[Up];for(let h=0;h<d.length;h++){let m=d[h];yA(m[at],m,c,r)}}}}}return r}function Zde(e,t){return e[$u].queries[t].queryList}function SU(e,t,n){let r=new QN((n&4)===4);return Rfe(e,t,r,r.destroy),(t[$u]??=new hA).queries.push(new pA(r))-1}function Qde(e,t,n){let r=wo();return r.firstCreatePass&&(DU(r,new eb(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),SU(r,nn(),t)}function Jde(e,t,n,r){let o=wo();if(o.firstCreatePass){let i=Eo();DU(o,new eb(t,n,r),i.index),tpe(o,e),(n&2)===2&&(o.staticContentQueries=!0)}return SU(o,nn(),n)}function epe(e){return e.split(",").map(t=>t.trim())}function DU(e,t,n){e.queries===null&&(e.queries=new mA),e.queries.track(new gA(t,n))}function tpe(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function wR(e,t){return e.queries.getByIndex(t)}function npe(e,t){let n=e[at],r=wR(n,t);return r.crossesNgTemplate?yA(n,e,t,[]):IU(n,e,r,t)}function rpe(e){return typeof e=="function"&&e[Gi]!==void 0}function kb(e,t){Ya("NgSignals");let n=u4(e),r=n[Gi];return t?.equal&&(r.equal=t.equal),n.set=o=>$x(r,o),n.update=o=>c4(r,o),n.asReadonly=ope.bind(n),n}function ope(){let e=this[Gi];if(e.readonlyFn===void 0){let t=()=>this();t[Gi]=e,e.readonlyFn=t}return e.readonlyFn}function NU(e){return rpe(e)&&typeof e.set=="function"}var jc=class{},iy=class{};var vA=class extends jc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new J1(this);constructor(t,n,r,o=!0){super(),this.ngModuleType=t,this._parent=n;let i=dV(t);this._bootstrapComponents=kB(i.bootstrap),this._r3Injector=QV(t,n,[{provide:jc,useValue:this},{provide:jp,useValue:this.componentFactoryResolver},...r],Uo(t),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},xA=class extends iy{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new vA(this.moduleType,t,[])}};var tb=class extends jc{injector;componentFactoryResolver=new J1(this);instance=null;constructor(t){super();let n=new ny([...t.providers,{provide:jc,useValue:this},{provide:jp,useValue:this.componentFactoryResolver}],t.parent||LA(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function gy(e,t,n=null){return new tb({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var ipe=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=PA(!1,n.type),o=r.length>0?gy([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=He({token:e,providedIn:"environment",factory:()=>new e(xt(di))})}return e})();function Cr(e){return ay(()=>{let t=AU(e),n=Tt(xe({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===aB.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?o=>o.get(ipe).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Ka.Emulated,styles:e.styles||As,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Ya("NgStandalone"),RU(n);let r=e.dependencies;return n.directiveDefs=$L(r,!1),n.pipeDefs=$L(r,!0),n.id=upe(n),n})}function spe(e){return Mu(e)||MA(e)}function ape(e){return e!==null}function Yc(e){return ay(()=>({type:e.type,bootstrap:e.bootstrap||As,declarations:e.declarations||As,imports:e.imports||As,exports:e.exports||As,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function PL(e,t){if(e==null)return Vp;let n={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r],i,s,a=Gc.None;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i):(i=o,s=o),t?(n[i]=a!==Gc.None?[r,a]:r,t[i]=s):n[i]=r}return n}function Zi(e){return ay(()=>{let t=AU(e);return RU(t),t})}function AU(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Vp,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||As,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:PL(e.inputs,t),outputs:PL(e.outputs),debugInfo:null}}function RU(e){e.features?.forEach(t=>t(e))}function $L(e,t){if(!e)return null;let n=t?FA:spe;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(ape)}function upe(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let i of r.join("|"))t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function cpe(e){return Object.getPrototypeOf(e.prototype).constructor}function Yp(e){let t=cpe(e.type),n=!0,r=[e];for(;t;){let o;if(Uc(e))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Ge(903,!1);o=t.\u0275dir}if(o){if(n){r.push(o);let s=e;s.inputs=v1(e.inputs),s.inputTransforms=v1(e.inputTransforms),s.declaredInputs=v1(e.declaredInputs),s.outputs=v1(e.outputs);let a=o.hostBindings;a&&hpe(e,a);let u=o.viewQuery,c=o.contentQueries;if(u&&dpe(e,u),c&&ppe(e,c),lpe(e,o),iue(e.outputs,o.outputs),Uc(o)&&o.data.animation){let f=e.data;f.animation=(f.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(e),a===Yp&&(n=!1)}}t=Object.getPrototypeOf(t)}fpe(r)}function lpe(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let o=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(o))continue;e.inputTransforms??={},e.inputTransforms[o]=t.inputTransforms[o]}}}function fpe(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let o=e[r];o.hostVars=t+=o.hostVars,o.hostAttrs=oy(o.hostAttrs,n=oy(n,o.hostAttrs))}}function v1(e){return e===Vp?{}:e===As?[]:e}function dpe(e,t){let n=e.viewQuery;n?e.viewQuery=(r,o)=>{t(r,o),n(r,o)}:e.viewQuery=t}function ppe(e,t){let n=e.contentQueries;n?e.contentQueries=(r,o,i)=>{t(r,o,i),n(r,o,i)}:e.contentQueries=t}function hpe(e,t){let n=e.hostBindings;n?e.hostBindings=(r,o)=>{t(r,o),n(r,o)}:e.hostBindings=t}function ER(e){let t=e.inputConfig,n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)&&o[3]&&(n[r]=o[3])}e.inputTransforms=n}function kU(e){return gpe(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function mpe(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function gpe(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function ype(e,t,n){return e[t]=n}function vpe(e,t){return e[t]}function Sf(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function xpe(e,t,n,r){let o=Sf(e,t,n);return Sf(e,t+1,r)||o}function yy(e){return(e.flags&32)===32}function bpe(e,t,n,r,o,i,s,a,u){let c=t.consts,f=Ib(t,e,4,s||null,a||null);tU(t,n,f,V1(c,u)),qA(t,f);let d=f.tView=mR(2,f,r,o,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,f),d.queries=t.queries.embeddedTView(f)),f}function wpe(e,t,n,r,o,i,s,a,u,c){let f=n+bo,d=t.firstCreatePass?bpe(f,t,e,r,o,i,s,a,u):t.data[f];dy(d,!1);let h=OU(t,e,d,n);WA()&&fR(t,e,h,d),Tf(h,e);let m=iU(h,e,h,d);return e[f]=m,Sb(e,m),jde(m,d,e),VA(d)&&YB(t,e,d),u!=null&&ZB(e,d,c),d}function mi(e,t,n,r,o,i,s,a){let u=nn(),c=wo(),f=V1(c.consts,i);return wpe(u,c,e,t,n,r,o,f,s,a),mi}var OU=MU;function MU(e,t,n,r){return Kc(!0),t[jn].createComment("")}function Epe(e,t,n,r){let o=t[qa],i=!o||fy()||yy(n)||hy(o,r);if(Kc(i),i)return MU(e,t,n,r);let s=o.data[Jce]?.[r]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=Ab(o,e,t,n);Eb(o,r,a);let u=iR(o,r);return Rb(u,a)}function Cpe(){OU=Epe}var Tpe=(()=>{class e{cachedInjectors=new Map;getOrCreateInjector(n,r,o,i){if(!this.cachedInjectors.has(n)){let s=o.length>0?gy(o,r,i):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=He({token:e,providedIn:"environment",factory:()=>new e})}return e})();var _pe=new Pe("");function DN(e,t,n){return e.get(Tpe).getOrCreateInjector(t,e,n,"")}function Ipe(e,t,n){if(e instanceof Fp){let o=e.injector,i=e.parentInjector,s=DN(i,t,n);return new Fp(o,s)}let r=e.get(di);if(r!==e){let o=DN(r,t,n);return new Fp(e,o)}return DN(e,t,n)}function kp(e,t,n,r=!1){let o=n[zr],i=o[at];if(Gue(o))return;let s=xb(o,t),a=s[rR],u=s[mle];if(!(u!==null&&e<u)&&LL(a,e)&&LL(s[dle]??-1,e)){let c=bb(i,t),d=!r&&!0&&(ble(c)!==null||_L(c,oo.Loading)!==null||_L(c,oo.Placeholder))?Npe:Dpe;try{d(e,s,n,t,o)}catch(h){Db(o,h)}}}function Spe(e,t){let n=e[Ou];return n===null||n.length===0?null:n.find(r=>r.data[rle]===t[rR])??null}function Dpe(e,t,n,r,o){let i=xle(e,o,r);if(i!==null){t[rR]=e;let s=o[at],a=i+bo,u=fb(s,a),c=0;Jfe(n,c);let f;if(e===oo.Complete){let m=bb(s,r),v=m.providers;v&&v.length>0&&(f=Ipe(o[Fu],m,v))}let d=Spe(n,t);if(n[Ou]===null||n[Ou].length===0||d){n[Ou]=null;let m=lU(o,u,null,{injector:f,dehydratedView:d});fU(n,m,c,aA(u,d)),Nb(m,2)}if(e===oo.Complete&&Array.isArray(t[Pp])){for(let m of t[Pp])m();t[Pp]=null}}}function LL(e,t){return e<t}function VL(e,t,n){e.loadingPromise.then(()=>{e.loadingState===Hi.COMPLETE?kp(oo.Complete,t,n):e.loadingState===Hi.FAILED&&kp(oo.Error,t,n)})}var Npe=null;var Ob=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var FU=new Pe("");function kf(e){return!!e&&typeof e.then=="function"}function PU(e){return!!e&&typeof e.subscribe=="function"}var Mb=new Pe("");var $U=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=de(Mb,{optional:!0})??[];injector=de(pi);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let i=Xi(this.injector,o);if(kf(i))n.push(i);else if(PU(i)){let s=new Promise((a,u)=>{i.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ape=(()=>{class e{static \u0275prov=He({token:e,providedIn:"root",factory:()=>new bA})}return e})(),bA=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,n]of this.queues)t===null?this.flushQueue(n):t.run(()=>this.flushQueue(n))}flushQueue(t){for(let n of t)t.delete(n),this.queuedEffectCount--,n.run()}},Zc=new Pe("");function Rpe(){a4(()=>{throw new Ge(600,!1)})}function kpe(e){return e.isBoundToModule}var Ope=10;function Mpe(e,t,n){try{let r=n();return kf(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Ki=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=de(Lce);afterRenderManager=de(bB);zonelessEnabled=de(mb);rootEffectScheduler=de(Ape);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Er;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=de(Gu).hasPendingTasks.pipe(vt(n=>!n));constructor(){de(yb,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=de(di);get injector(){return this._injector}bootstrap(n,r){let o=n instanceof Q1;if(!this._injector.get($U).done){let h=!o&&pV(n),m=!1;throw new Ge(405,m)}let s;o?s=n:s=this._injector.get(jp).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=kpe(s)?void 0:this._injector.get(jc),u=r||s.selector,c=s.create(pi.NULL,[],u,a),f=c.location.nativeElement,d=c.injector.get(FU,null);return d?.registerApplication(f),c.onDestroy(()=>{this.detachView(c.hostView),S1(this.components,c),d?.unregisterApplication(f)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(nR.CHANGE_DETECTION,this._tick);return}if(this._runningTick)throw new Ge(101,!1);let n=Kt(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Kt(n),this.afterTick.next()}};synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(zp,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Ope;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o,notifyErrorHandler:i}of this.allViews)Fpe(o,i,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>db(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;S1(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Zc,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>S1(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Ge(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function S1(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Fpe(e,t,n,r){if(!n&&!db(e))return;mU(e,t,n&&!r?0:1)}function Ppe(e,t,n){let r=t[Fu],o=t[at];if(e.loadingState!==Hi.NOT_STARTED)return e.loadingPromise??Promise.resolve();let i=xb(t,n),s=wle(o,e);e.loadingState=Hi.IN_PROGRESS,I1(1,i);let a=e.dependencyResolverFn,u=r.get(Gu),c=u.add();return a?(e.loadingPromise=Promise.allSettled(a()).then(f=>{let d=!1,h=[],m=[];for(let v of f)if(v.status==="fulfilled"){let x=v.value,b=Mu(x)||MA(x);if(b)h.push(b);else{let C=FA(x);C&&m.push(C)}}else{d=!0;break}if(e.loadingPromise=null,u.remove(c),d){if(e.loadingState=Hi.FAILED,e.errorTmplIndex===null){let v="",x=new Ge(750,!1);Db(t,x)}}else{e.loadingState=Hi.COMPLETE;let v=s.tView;if(h.length>0){v.directiveRegistry=IL(v.directiveRegistry,h);let x=h.map(C=>C.type),b=PA(!1,...x);e.providers=b}m.length>0&&(v.pipeRegistry=IL(v.pipeRegistry,m))}}),e.loadingPromise):(e.loadingPromise=Promise.resolve().then(()=>{e.loadingPromise=null,e.loadingState=Hi.COMPLETE,u.remove(c)}),e.loadingPromise)}function $pe(e,t){let n=e[at],r=e[t.index],o=e[Fu],i=xb(e,t),s=bb(n,t);if(jpe(o,s))switch(yle(i),s.loadingState){case Hi.NOT_STARTED:kp(oo.Loading,t,r),Ppe(s,e,t),s.loadingState===Hi.IN_PROGRESS&&VL(s,t,r);break;case Hi.IN_PROGRESS:kp(oo.Loading,t,r),VL(s,t,r);break;case Hi.COMPLETE:kp(oo.Complete,t,r);break;case Hi.FAILED:kp(oo.Error,t,r);break;default:}}function Lpe(e,t,n){return ne(this,null,function*(){let r=e.get(TB),o=r.hydrating;if(o.has(t))return;let{parentBlockPromise:i,hydrationQueue:s}=$le(t,e);Vpe(r,s);let a=e.get(Gu),u=a.add();i!==null&&(yield i);for(let c of s)yield Upe(c,r),yield Bpe(e),o.get(c).resolve();yield o.get(t)?.promise,a.remove(u),n&&n(s),Ide(r.get(t),s,r,e.get(Ki))})}function Vpe(e,t){for(let n of t)e.hydrating.set(n,Promise.withResolvers())}function Bpe(e){let t,n=new Promise(r=>{t=r});return vb(()=>t(),{injector:e}),n}function Upe(e,t){let n,r=new Promise(i=>n=i),o=t.get(e);if(o!==null){let{tNode:i,lView:s}=o,a=xb(s,i);Gpe(a,()=>n()),$pe(s,i)}return r}function Gpe(e,t){Array.isArray(e[Pp])||(e[Pp]=[]),e[Pp].push(t)}function jpe(e,t){return e.get(_pe,null,{optional:!0})?.behavior!==wB.Manual}function Fb(e,t,n,r){let o=nn(),i=hb();if(Sf(o,i,t)){let s=wo(),a=HA();Wfe(a,o,e,t,n,r)}return Fb}function zpe(e,t,n,r){return Sf(e,hb(),n)?t+$p(n)+r:ju}function Hpe(e,t,n,r,o,i){let s=ace(),a=xpe(e,s,n,o);return kV(2),a?t+$p(n)+r+$p(o)+i:ju}function x1(e,t){return e<<17|t<<2}function Df(e){return e>>17&32767}function Wpe(e){return(e&2)==2}function qpe(e,t){return e&131071|t<<17}function wA(e){return e|2}function Wp(e){return(e&131068)>>2}function NN(e,t){return e&-131069|t<<2}function Kpe(e){return(e&1)===1}function EA(e){return e|1}function Xpe(e,t,n,r,o,i){let s=i?t.classBindings:t.styleBindings,a=Df(s),u=Wp(s);e[r]=n;let c=!1,f;if(Array.isArray(n)){let d=n;f=d[1],(f===null||cy(d,f)>0)&&(c=!0)}else f=n;if(o)if(u!==0){let h=Df(e[a+1]);e[r+1]=x1(h,a),h!==0&&(e[h+1]=NN(e[h+1],r)),e[a+1]=qpe(e[a+1],r)}else e[r+1]=x1(a,0),a!==0&&(e[a+1]=NN(e[a+1],r)),a=r;else e[r+1]=x1(u,0),a===0?a=r:e[u+1]=NN(e[u+1],r),u=r;c&&(e[r+1]=wA(e[r+1])),BL(e,f,r,!0),BL(e,f,r,!1),Ype(t,f,e,r,i),s=x1(a,u),i?t.classBindings=s:t.styleBindings=s}function Ype(e,t,n,r,o){let i=o?e.residualClasses:e.residualStyles;i!=null&&typeof t=="string"&&cy(i,t)>=0&&(n[r+1]=EA(n[r+1]))}function BL(e,t,n,r){let o=e[n+1],i=t===null,s=r?Df(o):Wp(o),a=!1;for(;s!==0&&(a===!1||i);){let u=e[s],c=e[s+1];Zpe(u,t)&&(a=!0,e[s+1]=r?EA(c):wA(c)),s=r?Df(c):Wp(c)}a&&(e[n+1]=r?wA(o):EA(o))}function Zpe(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?cy(e,t)>=0:!1}function Fn(e,t,n){let r=nn(),o=hb();if(Sf(r,o,t)){let i=wo(),s=HA();eU(i,s,r,e,t,r[jn],n,!1)}return Fn}function UL(e,t,n,r,o){let i=t.inputs,s=o?"class":"style";gR(e,n,i[s],s,r)}function Pb(e,t,n){return LU(e,t,n,!1),Pb}function Qi(e,t){return LU(e,t,null,!0),Qi}function LU(e,t,n,r){let o=nn(),i=wo(),s=kV(2);if(i.firstUpdatePass&&Jpe(i,e,s,r),t!==ju&&Sf(o,s,t)){let a=i.data[Af()];ohe(i,a,o,o[jn],e,o[s+1]=ihe(t,n),r,s)}}function Qpe(e,t){return t>=e.expandoStartIndex}function Jpe(e,t,n,r){let o=e.data;if(o[n+1]===null){let i=o[Af()],s=Qpe(e,n);she(i,r)&&t===null&&!s&&(t=!1),t=ehe(o,i,t,r),Xpe(o,i,t,n,s,r)}}function ehe(e,t,n,r){let o=dce(e),i=r?t.residualClasses:t.residualStyles;if(o===null)(r?t.classBindings:t.styleBindings)===0&&(n=AN(null,e,t,n,r),n=sy(n,t.attrs,r),i=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==o)if(n=AN(o,e,t,n,r),i===null){let u=the(e,t,r);u!==void 0&&Array.isArray(u)&&(u=AN(null,e,t,u[1],r),u=sy(u,t.attrs,r),nhe(e,t,r,u))}else i=rhe(e,t,r)}return i!==void 0&&(r?t.residualClasses=i:t.residualStyles=i),n}function the(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Wp(r)!==0)return e[Df(r)]}function nhe(e,t,n,r){let o=n?t.classBindings:t.styleBindings;e[Df(o)]=r}function rhe(e,t,n){let r,o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++){let s=e[i].hostAttrs;r=sy(r,s,n)}return sy(r,t.attrs,n)}function AN(e,t,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=t[a],r=sy(r,i.hostAttrs,o),i!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function sy(e,t,n){let r=n?1:2,o=-1;if(t!==null)for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?o=s:o===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Sue(e,s,n?!0:t[++i]))}return e===void 0?null:e}function ohe(e,t,n,r,o,i,s,a){if(!(t.type&3))return;let u=e.data,c=u[a+1],f=Kpe(c)?GL(u,t,n,o,Wp(c),s):void 0;if(!nb(f)){nb(i)||Wpe(c)&&(i=GL(u,null,n,o,a,s));let d=_V(Af(),n);ffe(r,s,d,o,i)}}function GL(e,t,n,r,o,i){let s=t===null,a;for(;o>0;){let u=e[o],c=Array.isArray(u),f=c?u[1]:u,d=f===null,h=n[o+1];h===ju&&(h=d?As:void 0);let m=d?vN(h,r):f===r?h:void 0;if(c&&!nb(m)&&(m=vN(u,r)),nb(m)&&(a=m,s))return a;let v=e[o+1];o=s?Df(v):Wp(v)}if(t!==null){let u=i?t.residualClasses:t.residualStyles;u!=null&&(a=vN(u,r))}return a}function nb(e){return e!==void 0}function ihe(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Uo(my(e)))),e}function she(e,t){return(e.flags&(t?8:16))!==0}function ahe(e,t,n,r,o,i){let s=t.consts,a=V1(s,o),u=Ib(t,e,2,r,a);return tU(t,n,u,V1(s,i)),u.attrs!==null&&fA(u,u.attrs,!1),u.mergedAttrs!==null&&fA(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function ct(e,t,n,r){let o=nn(),i=wo(),s=bo+e,a=o[jn],u=i.firstCreatePass?ahe(s,i,o,t,n,r):i.data[s],c=VU(i,o,u,a,t,e);o[s]=c;let f=VA(u);return dy(u,!0),GB(a,c,u),!yy(u)&&WA()&&fR(i,o,c,u),Que()===0&&Tf(c,o),Jue(),f&&(YB(i,o,u),XB(i,u,o)),r!==null&&ZB(o,u),ct}function lt(){let e=Eo();AV()?ice():(e=e.parent,dy(e,!1));let t=e;tce(t)&&rce(),ece();let n=wo();return n.firstCreatePass&&(qA(n,e),bV(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&vce(t)&&UL(n,t,nn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&xce(t)&&UL(n,t,nn(),t.stylesWithoutHost,!1),lt}function Tr(e,t,n,r){return ct(e,t,n,r),lt(),Tr}var VU=(e,t,n,r,o,i)=>(Kc(!0),uR(r,o,VV()));function uhe(e,t,n,r,o,i){let s=t[qa],a=!s||fy()||yy(n)||hy(s,i);if(Kc(a),a)return uR(r,o,VV());let u=Ab(s,e,t,n);return DB(s,i)&&Eb(s,i,u.nextSibling),s&&(iB(n)||sB(u))&&ly(n)&&(nce(n),BB(u)),u}function che(){VU=uhe}var lhe=(e,t,n,r)=>(Kc(!0),MB(t[jn],""));function fhe(e,t,n,r){let o,i=t[qa],s=!i||fy()||hy(i,r)||yy(n);if(Kc(s),s)return MB(t[jn],"");let a=Ab(i,e,t,n),u=Fle(i,r);return Eb(i,r,a),o=Rb(u,a),o}function dhe(){lhe=fhe}function Qc(){return nn()}var rb="en-US";var phe=rb;function hhe(e){typeof e=="string"&&(phe=e.toLowerCase().replace(/_/g,"-"))}var BU=(e,t,n)=>{};function mhe(e){BU=e}function io(e,t,n,r){let o=nn(),i=wo(),s=Eo();return UU(i,o,o[jn],s,e,t,r),io}function ghe(e,t,n,r){let o=e.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=t[M1],u=o[i+2];return a.length>u?a[u]:null}typeof s=="string"&&(i+=2)}return null}function UU(e,t,n,r,o,i,s){let a=VA(r),c=e.firstCreatePass&&uU(e),f=t[fa],d=aU(t),h=!0;if(r.type&3||s){let x=Yi(r,t),b=s?s(x):x,C=d.length,D=s?F=>s(da(F[r.index])):r.index,O=null;if(!s&&a&&(O=ghe(e,t,o,r.index)),O!==null){let F=O.__ngLastListenerFn__||O;F.__ngNextListenerFn__=i,O.__ngLastListenerFn__=i,h=!1}else{i=zL(r,t,f,i),BU(x,o,i);let F=n.listen(b,o,i);d.push(i,F),c&&c.push(o,D,C,C+1)}}else i=zL(r,t,f,i);let m=r.outputs,v;if(h&&m!==null&&(v=m[o])){let x=v.length;if(x)for(let b=0;b<x;b+=2){let C=v[b],D=v[b+1],B=t[C][D].subscribe(i),H=d.length;d.push(i,B),c&&c.push(o,r.index,H,-(H+1))}}}function jL(e,t,n,r){let o=Kt(null);try{return Ha(6,t,n),n(r)!==!1}catch(i){return Db(e,i),!1}finally{Ha(7,t,n),Kt(o)}}function zL(e,t,n,r){return function o(i){if(i===Function)return r;let s=e.componentOffset>-1?Hc(e.index,t):t;Nb(s,5);let a=jL(t,n,r,i),u=o.__ngNextListenerFn__;for(;u;)a=jL(t,n,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function Ji(e=1){return hce(e)}function GU(e,t,n,r){Jde(e,t,n,r)}function vy(e,t,n){Qde(e,t,n)}function Of(e){let t=nn(),n=wo(),r=OV();GA(r+1);let o=wR(n,r);if(e.dirty&&Kue(t)===((o.metadata.flags&2)===2)){if(o.matches===null)e.reset([]);else{let i=npe(t,r);e.reset(i,Uce),e.notifyOnChanges()}return!0}return!1}function Mf(){return Zde(nn(),OV())}function $t(e,t=""){let n=nn(),r=wo(),o=e+bo,i=r.firstCreatePass?Ib(r,o,1,t,null):r.data[o],s=jU(r,n,i,t,e);n[o]=s,WA()&&fR(r,n,s,i),dy(i,!1)}var jU=(e,t,n,r,o)=>(Kc(!0),OB(t[jn],r));function yhe(e,t,n,r,o){let i=t[qa],s=!i||fy()||yy(n)||hy(i,o);return Kc(s),s?OB(t[jn],r):Ab(i,e,t,n)}function vhe(){jU=yhe}function $b(e){return xy("",e,""),$b}function xy(e,t,n){let r=nn(),o=zpe(r,e,t,n);return o!==ju&&cU(r,Af(),o),xy}function CR(e,t,n,r,o){let i=nn(),s=Hpe(i,e,t,n,r,o);return s!==ju&&cU(i,Af(),s),CR}function TR(e,t,n){NU(t)&&(t=t());let r=nn(),o=hb();if(Sf(r,o,t)){let i=wo(),s=HA();eU(i,s,r,e,t,r[jn],n,!1)}return TR}function zU(e,t){let n=NU(e);return n&&e.set(t),n}function _R(e,t){let n=nn(),r=wo(),o=Eo();return UU(r,n,n[jn],o,e,t),_R}function xhe(e,t,n){let r=wo();if(r.firstCreatePass){let o=Uc(e);CA(n,r.data,r.blueprint,o,!0),CA(t,r.data,r.blueprint,o,!1)}}function CA(e,t,n,r,o){if(e=Bo(e),Array.isArray(e))for(let i=0;i<e.length;i++)CA(e[i],t,n,r,o);else{let i=wo(),s=nn(),a=Eo(),u=Bp(e)?e:Bo(e.provide),c=gV(e),f=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Bp(e)||!e.multi){let m=new Ef(c,o,ht),v=kN(u,t,o?f:f+h,d);v===-1?(WN(G1(a,s),i,u),RN(i,e,t.length),t.push(u),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[v]=m,s[v]=m)}else{let m=kN(u,t,f+h,d),v=kN(u,t,f,f+h),x=m>=0&&n[m],b=v>=0&&n[v];if(o&&!b||!o&&!x){WN(G1(a,s),i,u);let C=Ehe(o?whe:bhe,n.length,o,r,c);!o&&b&&(n[v].providerFactory=C),RN(i,e,t.length,0),t.push(u),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(C),s.push(C)}else{let C=HU(n[o?v:m],c,!o&&r);RN(i,e,m>-1?m:v,C)}!o&&r&&b&&n[v].componentProviders++}}}function RN(e,t,n,r){let o=Bp(t),i=Oue(t);if(o||i){let u=(i?Bo(t.useClass):t).prototype.ngOnDestroy;if(u){let c=e.destroyHooks||(e.destroyHooks=[]);if(!o&&t.multi){let f=c.indexOf(n);f===-1?c.push(n,[r,u]):c[f+1].push(r,u)}else c.push(n,u)}}}function HU(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function kN(e,t,n,r){for(let o=n;o<r;o++)if(t[o]===e)return o;return-1}function bhe(e,t,n,r){return TA(this.multi,[])}function whe(e,t,n,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Cf(n,n[at],this.providerFactory.index,r);i=a.slice(0,s),TA(o,i);for(let u=s;u<a.length;u++)i.push(a[u])}else i=[],TA(o,i);return i}function TA(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function Ehe(e,t,n,r,o){let i=new Ef(e,n,ht);return i.multi=[],i.index=t,i.componentProviders=0,HU(i,o,r&&!n),i}function IR(e,t=[]){return n=>{n.providersResolver=(r,o)=>xhe(r,o?o(e):e,t)}}function Lb(e,t,n){let r=sce()+e,o=nn();return o[r]===ju?ype(o,r,n?t.call(n):t()):vpe(o,r)}var _A=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Vb=(()=>{class e{compileModuleSync(n){return new xA(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=dV(n),i=kB(o.declarations).reduce((s,a)=>{let u=Mu(a);return u&&s.push(new Hp(u)),s},[]);return new _A(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Che=(()=>{class e{zone=de(Zn);changeDetectionScheduler=de(Gp);applicationRef=de(Ki);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),The=new Pe("",{factory:()=>!1});function WU({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Zn(Tt(xe({},KU()),{scheduleInRootZone:n})),[{provide:Zn,useFactory:e},{provide:Bc,multi:!0,useFactory:()=>{let r=de(Che,{optional:!0});return()=>r.initialize()}},{provide:Bc,multi:!0,useFactory:()=>{let r=de(_he);return()=>{r.initialize()}}},t===!0?{provide:eB,useValue:!0}:[],{provide:tB,useValue:n??JV}]}function qU(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=WU({ngZoneFactory:()=>{let o=KU(e);return o.scheduleInRootZone=n,o.shouldCoalesceEventChangeDetection&&Ya("NgZone_CoalesceEvent"),new Zn(o)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return Nf([{provide:The,useValue:!0},{provide:mb,useValue:!1},r])}function KU(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var _he=(()=>{class e{subscription=new ir;initialized=!1;zone=de(Zn);pendingTasks=de(Gu);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Zn.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Zn.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ihe=(()=>{class e{appRef=de(Ki);taskService=de(Gu);ngZone=de(Zn);zonelessEnabled=de(mb);tracing=de(yb,{optional:!0});disableScheduling=de(eB,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ir;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(z1):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(de(tB,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ZN||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?yL:nB;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(z1+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yL(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function She(){return typeof $localize<"u"&&$localize.locale||rb}var SR=new Pe("",{providedIn:"root",factory:()=>de(SR,Rt.Optional|Rt.SkipSelf)||She()});var IA=new Pe("");function b1(e){return!e.moduleRef}function Dhe(e){let t=b1(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Zn);return n.run(()=>{b1(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Vu,null),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:i=>{r.handleError(i)}})}),b1(e)){let i=()=>t.destroy(),s=e.platformInjector.get(IA);s.add(i),t.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>e.moduleRef.destroy(),s=e.platformInjector.get(IA);s.add(i),e.moduleRef.onDestroy(()=>{S1(e.allPlatformModules,e.moduleRef),o.unsubscribe(),s.delete(i)})}return Mpe(r,n,()=>{let i=t.get($U);return i.runInitializers(),i.donePromise.then(()=>{let s=t.get(SR,rb);if(hhe(s||rb),b1(e)){let a=t.get(Ki);return e.rootComponent!==void 0&&a.bootstrap(e.rootComponent),a}else return Nhe(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function Nhe(e,t){let n=e.injector.get(Ki);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new Ge(-403,!1);t.push(e)}var D1=null;function Ahe(e=[],t){return pi.create({name:t,providers:[{provide:cb,useValue:"platform"},{provide:IA,useValue:new Set([()=>D1=null])},...e]})}function Rhe(e=[]){if(D1)return D1;let t=Ahe(e);return D1=t,Rpe(),khe(t),t}function khe(e){let t=e.get(JA,null);Xi(e,()=>{t?.forEach(n=>n())})}var Jc=(()=>{class e{static __NG_ELEMENT_ID__=Ohe}return e})();function Ohe(e){return Mhe(Eo(),nn(),(e&16)===16)}function Mhe(e,t,n){if(ly(e)&&!n){let r=Hc(e.index,t);return new _f(r,r)}else if(e.type&175){let r=t[Rs];return new _f(r,t)}return null}var SA=class{constructor(){}supports(t){return kU(t)}create(t){return new DA(t)}},Fhe=(e,t)=>t,DA=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||Fhe}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){let s=!r||n&&n.currentIndex<HL(r,o,i)?n:r,a=HL(s,o,i),u=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)o++;else{i||(i=[]);let c=a-o,f=u-o;if(c!=f){for(let h=0;h<c;h++){let m=h<i.length?i[h]:i[h]=0,v=m+h;f<=v&&v<c&&(i[h]=m+1)}let d=s.previousIndex;i[d]=f-c}}a!==u&&t(s,a,u)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!kU(t))throw new Ge(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,o,i,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],s=this._trackByFn(a,i),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,i,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)),n=n._next}else o=0,mpe(t,a=>{s=this._trackByFn(o,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,o),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,o){let i;return t===null?i=this._itTail:(i=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,i,o)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,o),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,i,o)):t=this._addAfter(new NA(n,r),i,o)),t}_verifyReinsertion(t,n,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?t=this._reinsertAfter(i,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let o=t._prevRemoved,i=t._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let o=n===null?this._itHead:n._next;return t._next=o,t._prev=n,o===null?this._itTail=t:o._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new ob),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ob),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},NA=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},AA=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},ob=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new AA,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,o=this.map.get(r);return o?o.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function HL(e,t,n){let r=e.previousIndex;if(r===null)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}function WL(){return new DR([new SA])}var DR=(()=>{class e{factories;static \u0275prov=He({token:e,providedIn:"root",factory:WL});constructor(n){this.factories=n}static create(n,r){if(r!=null){let o=r.factories.slice();n=n.concat(o)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||WL()),deps:[[e,new kA,new ub]]}}find(n){let r=this.factories.find(o=>o.supports(n));if(r!=null)return r;throw new Ge(901,!1)}}return e})();function XU(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,o=Rhe(r),i=[WU({}),{provide:Gp,useExisting:Ihe},...n||[]],s=new tb({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1});return Dhe({r3Injector:s.injector,platformInjector:o,rootComponent:t})}catch(t){return Promise.reject(t)}}var w1=new WeakSet,qL="",N1=[];function KL(e){return e.get(xB,ile)}function YU(){let e=[{provide:xB,useFactory:()=>{let t=!0;{let n=de(Xp);t=!!window._ejsas?.[n]}return t&&Ya("NgEventReplay"),t}}];return e.push({provide:Bc,useValue:()=>{let t=de(pi),n=t.get(Ki);if(!w1.has(n)){let r=de(EL);KL(t)&&mhe((o,i,s)=>{Ele(o,i,s),Cle(o,r)})}},multi:!0},{provide:Zc,useFactory:()=>{let t=de(pi),n=de(Ki);return()=>{!KL(t)||w1.has(n)||(w1.add(n),n.onDestroy(()=>w1.delete(n)),n.whenStable().then(()=>{let r=t.get(_le);Phe(r,t);let o=t.get(EL);o.get(qL)?.forEach(Tle),o.delete(qL);let i=r.instance;Mle(t)?n.onDestroy(()=>i.cleanUp()):i.cleanUp()}))}},multi:!0}),e}var Phe=(e,t)=>{let n=t.get(Xp),r=window._ejsas[n],o=e.instance=new J4(new p1(r.c));for(let a of r.et)o.addEvent(a);for(let a of r.etc)o.addEvent(a);let i=eL(n);o.replayEarlyEventInfos(i),tL(n);let s=new h1(a=>{$he(t,a,a.currentTarget)});Q4(o,s)};function $he(e,t,n){let r=(n&&n.getAttribute(wb))??"";/d\d+/.test(r)?Lhe(r,e,t,n):t.eventPhase===yN.REPLAY&&CB(t,n)}function Lhe(e,t,n,r){N1.push({event:n,currentTarget:r}),Lpe(t,e,Vhe)}function Vhe(e){let t=[...N1],n=new Set(e);N1=[];for(let{event:r,currentTarget:o}of t){let i=o.getAttribute(wb);n.has(i)?CB(r,o):N1.push({event:r,currentTarget:o})}}var XL=!1;function Bhe(){XL||(XL=!0,Ale(),che(),vhe(),dhe(),Cpe(),Wde(),Nde(),Afe())}function Uhe(e,t){return e.whenStable()}function ZU(){let e=[{provide:g1,useFactory:()=>{let t=!0;return t=!!de(Rf,{optional:!0})?.get(_B,null),t&&Ya("NgHydration"),t}},{provide:Bc,useValue:()=>{Ede(!1),de(g1)&&(Ghe(),Bhe())},multi:!0}];return e.push({provide:vB,useFactory:()=>de(g1)},{provide:Zc,useFactory:()=>{if(de(g1)){let t=de(Ki),n=de(pi);return()=>{Uhe(t,n).then(()=>{bU(t)})}}return()=>{}},multi:!0}),Nf(e)}function Ghe(){let e=gb(),t;for(let n of e.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===Dle){t=n;break}if(!t)throw new Ge(-507,!1)}function Ff(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Bb(e,t){Ya("NgSignals");let n=o4(e);return t?.equal&&(n[Gi].equal=t.equal),n}function el(e){let t=Kt(null);try{return e()}finally{Kt(t)}}var YL=class{[Gi];constructor(t){this[Gi]=t}destroy(){this[Gi].destroy()}};function QU(e){let t=Mu(e);if(!t)return null;let n=new Hp(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var r6=null;function Hu(){return r6}function o6(e){r6??=e}var Ub=class{};var Go=new Pe(""),MR=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>de(jhe),providedIn:"platform"})}return e})(),i6=new Pe(""),jhe=(()=>{class e extends MR{_location;_history;_doc=de(Go);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hu().getBaseHref(this._doc)}onPopState(n){let r=Hu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Hu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function FR(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function JU(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function zu(e){return e&&e[0]!=="?"?"?"+e:e}var Wu=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>de(PR),providedIn:"root"})}return e})(),s6=new Pe(""),PR=(()=>{class e extends Wu{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??de(Go).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return FR(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+zu(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+zu(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+zu(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(xt(MR),xt(s6,8))};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),a6=(()=>{class e extends Wu{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=FR(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+zu(i));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+zu(i));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(xt(MR),xt(s6,8))};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})(),Zp=(()=>{class e{_subject=new Er;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Whe(JU(e6(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+zu(r))}normalize(n){return e.stripTrailingSlash(Hhe(this._basePath,e6(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+zu(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+zu(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=zu;static joinWithSlash=FR;static stripTrailingSlash=JU;static \u0275fac=function(r){return new(r||e)(xt(Wu))};static \u0275prov=He({token:e,factory:()=>zhe(),providedIn:"root"})}return e})();function zhe(){return new Zp(xt(Wu))}function Hhe(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function e6(e){return e.replace(/\/index.html$/,"")}function Whe(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function $R(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}var NR=class{$implicit;ngForOf;index;count;constructor(t,n,r,o){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},jb=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((o,i,s)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new NR(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(i===null?void 0:i);else if(i!==null){let a=r.get(i);r.move(a,s),t6(a,o)}});for(let o=0,i=r.length;o<i;o++){let a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{let i=r.get(o.currentIndex);t6(i,o)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(ht(Xc),ht(If),ht(DR))};static \u0275dir=Zi({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function t6(e,t){e.context.$implicit=t.item}var tl=(()=>{class e{_viewContainer;_context=new AR;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){n6("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){n6("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(ht(Xc),ht(If))};static \u0275dir=Zi({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),AR=class{$implicit=null;ngIf=null};function n6(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Uo(t)}'.`)}var es=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Yc({type:e});static \u0275inj=zc({})}return e})(),LR="browser",qhe="server";function VR(e){return e===LR}function by(e){return e===qhe}var u6=(()=>{class e{static \u0275prov=He({token:e,providedIn:"root",factory:()=>VR(de(ks))?new RR(de(Go),window):new kR})}return e})(),RR=class{document;window;offset=()=>[0,0];constructor(t,n){this.document=t,this.window=n}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let n=Khe(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}};function Khe(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(t)||i.querySelector(`[name="${t}"]`);if(s)return s}o=r.nextNode()}}return null}var kR=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},Gb=class{};var Hb=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let o=n.slice(0,r),i=n.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let o=(t.op==="a"?this.headers.get(n):void 0)||[];o.push(...r),this.headers.set(n,o);break;case"d":let i=t.value;if(!i)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),o=t.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(t,o)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var g6=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(g6||{}),BR=class{headers;status;statusText;url;ok;type;constructor(t,n=200,r="OK"){this.headers=t.headers||new Hb,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var Wb=class e extends BR{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=g6.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var Xhe=new Pe("");var Yhe=new Pe(""),c6="b",l6="h",f6="s",d6="st",p6="u",h6="rt",zb=new Pe(""),Zhe=["GET","HEAD"];function Qhe(e,t){let m=de(zb),{isCacheActive:n}=m,r=Z$(m,["isCacheActive"]),{transferCache:o,method:i}=e;if(!n||o===!1||i==="POST"&&!r.includePostRequests&&!o||i!=="POST"&&!Zhe.includes(i)||!r.includeRequestsWithAuthHeaders&&Jhe(e)||r.filter?.(e)===!1)return t(e);let s=de(Rf),a=de(Yhe,{optional:!0}),u=by(de(ks));if(a&&!u)throw new Ge(2803,!1);let c=u&&a?rme(e.url,a):e.url,f=tme(e,c),d=s.get(f,null),h=r.includeHeaders;if(typeof o=="object"&&o.includeHeaders&&(h=o.includeHeaders),d){let{[c6]:v,[h6]:x,[l6]:b,[f6]:C,[d6]:D,[p6]:O}=d,F=v;switch(x){case"arraybuffer":F=new TextEncoder().encode(v).buffer;break;case"blob":F=new Blob([v]);break}let B=new Hb(b);return ot(new Wb({body:F,headers:B,status:C,statusText:D,url:O}))}return t(e).pipe(Yn(v=>{v instanceof Wb&&u&&s.set(f,{[c6]:v.body,[l6]:eme(v.headers,h),[f6]:v.status,[d6]:v.statusText,[p6]:c,[h6]:e.responseType})}))}function Jhe(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function eme(e,t){if(!t)return{};let n={};for(let r of t){let o=e.getAll(r);o!==null&&(n[r]=o)}return n}function m6(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function tme(e,t){let{params:n,method:r,responseType:o}=e,i=m6(n),s=e.serializeBody();s instanceof URLSearchParams?s=m6(s):typeof s!="string"&&(s="");let a=[r,o,t,s,i].join("|"),u=nme(a);return u}function nme(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function y6(e){return[{provide:zb,useFactory:()=>(Ya("NgHttpTransferCache"),xe({isCacheActive:!0},e))},{provide:Xhe,useValue:Qhe,multi:!0,deps:[Rf,zb]},{provide:Zc,multi:!0,useFactory:()=>{let t=de(Ki),n=de(zb);return()=>{t.whenStable().then(()=>{n.isCacheActive=!1})}}}]}function rme(e,t){let n=new URL(e,"resolve://").origin,r=t[n];return r?e.replace(n,r):e}var GR=class extends Ub{supportsDOMEvents=!0},jR=class e extends GR{static makeCurrent(){o6(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=ome();return n==null?null:ime(n)}resetBaseElement(){wy=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return $R(document.cookie,t)}},wy=null;function ome(){return wy=wy||document.querySelector("base"),wy?wy.getAttribute("href"):null}function ime(e){return new URL(e,document.baseURI).pathname}var sme=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})(),zR=new Pe(""),C6=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new Ge(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(xt(zR),xt(Zn))};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})(),qb=class{_doc;constructor(t){this._doc=t}manager},HR="ng-app-id";function v6(e){for(let t of e)t.remove()}function x6(e,t){let n=t.createElement("style");return n.textContent=e,n}function ame(e,t,n){let r=e.head?.querySelectorAll(`style[${HR}="${t}"]`);if(r)for(let o of r)o.textContent&&(o.removeAttribute(HR),n.set(o.textContent,{usage:0,elements:[o]}))}function WR(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var T6=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,this.isServer=by(i),ame(n,r,this.inline),this.hosts.add(n.head)}addStyles(n,r){for(let o of n)this.addUsage(o,this.inline,x6);r?.forEach(o=>this.addUsage(o,this.external,WR))}removeStyles(n,r){for(let o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,r){let o=r.get(n);o&&(o.usage--,o.usage<=0&&(v6(o.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])v6(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(n,x6(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(n,WR(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(HR,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(xt(Go),xt(Xp),xt(eR,8),xt(ks))};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})(),UR={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},KR=/%COMP%/g,_6="%COMP%",ume=`_nghost-${_6}`,cme=`_ngcontent-${_6}`,lme=!0,fme=new Pe("",{providedIn:"root",factory:()=>lme});function dme(e){return cme.replace(KR,e)}function pme(e){return ume.replace(KR,e)}function I6(e,t){return t.map(n=>n.replace(KR,e))}var b6=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,o,i,s,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=c,this.platformIsServer=by(a),this.defaultRenderer=new Ey(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ka.ShadowDom&&(r=Tt(xe({},r),{encapsulation:Ka.Emulated}));let o=this.getOrCreateRenderer(n,r);return o instanceof Kb?o.applyToHost(n):o instanceof Cy&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Ka.Emulated:i=new Kb(u,c,r,this.appId,f,s,a,d);break;case Ka.ShadowDom:return new qR(u,c,n,r,s,a,this.nonce,d);default:i=new Cy(u,c,r,f,s,a,d);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(r){return new(r||e)(xt(C6),xt(T6),xt(Xp),xt(fme),xt(Go),xt(ks),xt(Zn),xt(eR))};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})(),Ey=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(UR[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(w6(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(w6(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new Ge(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;let i=UR[o];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let o=UR[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(Bu.DashCase|Bu.Important)?t.style.setProperty(n,r,o&Bu.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Bu.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Hu().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function w6(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var qR=class extends Ey{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,o,i,s,a,u){super(t,i,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=I6(o.id,o.styles);for(let d of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}let f=o.getExternalStyles?.();if(f)for(let d of f){let h=WR(d,i);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cy=class extends Ey{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,o,i,s,a,u){super(t,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=u?I6(u,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Kb=class extends Cy{contentAttr;hostAttr;constructor(t,n,r,o,i,s,a,u){let c=o+"-"+r.id;super(t,n,r,i,s,a,u,c),this.contentAttr=dme(c),this.hostAttr=pme(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},hme=(()=>{class e extends qb{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}static \u0275fac=function(r){return new(r||e)(xt(Go))};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})(),E6=["alt","control","meta","shift"],mme={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gme={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},yme=(()=>{class e extends qb{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,o){let i=e.parseEventName(r),s=e.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hu().onAndCancel(n,i.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),E6.forEach(c=>{let f=r.indexOf(c);f>-1&&(r.splice(f,1),s+=c+".")}),s+=i,r.length!=0||i.length===0)return null;let u={};return u.domEventName=o,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let o=mme[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),E6.forEach(s=>{if(s!==o){let a=gme[s];a(n)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{e.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(xt(Go))};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})();function S6(e,t){return XU(xe({rootComponent:e},vme(t)))}function vme(e){return{appProviders:[...Cme,...e?.providers??[]],platformProviders:Eme}}function xme(){jR.makeCurrent()}function bme(){return new Vu}function wme(){return dB(document),document}var Eme=[{provide:ks,useValue:LR},{provide:JA,useValue:xme,multi:!0},{provide:Go,useFactory:wme,deps:[]}];var Cme=[{provide:cb,useValue:"root"},{provide:Vu,useFactory:bme,deps:[]},{provide:zR,useClass:hme,multi:!0,deps:[Go,Zn,ks]},{provide:zR,useClass:yme,multi:!0,deps:[Go]},b6,T6,C6,{provide:zp,useExisting:b6},{provide:Gb,useClass:sme,deps:[]},[]];var D6=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(xt(Go))};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Xb=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e[e.IncrementalHydration=4]="IncrementalHydration",e}(Xb||{});function Tme(e,t=[],n={}){return{\u0275kind:e,\u0275providers:t}}function N6(){return Tme(Xb.EventReplay,YU())}function A6(...e){let t=[],n=new Set,r=n.has(Xb.HttpTransferCacheOptions);for(let{\u0275providers:o,\u0275kind:i}of e)n.add(i),o.length&&t.push(o);return Nf([[],ZU(),n.has(Xb.NoHttpTransferCache)||r?[]:y6({}),t])}var It="primary",Ly=Symbol("RouteTitle"),JR=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function rh(e){return new JR(e)}function Ime(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=e[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:o}}function Sme(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Qa(e[n],t[n]))return!1;return!0}function Qa(e,t){let n=e?ek(e):void 0,r=t?ek(t):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!U6(e[o],t[o]))return!1;return!0}function ek(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function U6(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((o,i)=>r[i]===o)}else return e===t}function G6(e){return e.length>0?e[e.length-1]:null}function ol(e){return QD(e)?e:kf(e)?Mn(Promise.resolve(e)):ot(e)}var Dme={exact:z6,subset:H6},j6={exact:Nme,subset:Ame,ignored:()=>!0};function R6(e,t,n){return Dme[n.paths](e.root,t.root,n.matrixParams)&&j6[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function Nme(e,t){return Qa(e,t)}function z6(e,t,n){if(!Lf(e.segments,t.segments)||!Qb(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!z6(e.children[r],t.children[r],n))return!1;return!0}function Ame(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>U6(e[n],t[n]))}function H6(e,t,n){return W6(e,t,t.segments,n)}function W6(e,t,n,r){if(e.segments.length>n.length){let o=e.segments.slice(0,n.length);return!(!Lf(o,n)||t.hasChildren()||!Qb(o,n,r))}else if(e.segments.length===n.length){if(!Lf(e.segments,n)||!Qb(e.segments,n,r))return!1;for(let o in t.children)if(!e.children[o]||!H6(e.children[o],t.children[o],r))return!1;return!0}else{let o=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!Lf(e.segments,o)||!Qb(e.segments,o,r)||!e.children[It]?!1:W6(e.children[It],t,i,r)}}function Qb(e,t,n){return t.every((r,o)=>j6[n](e[o].parameters,r.parameters))}var Ku=class{root;queryParams;fragment;_queryParamMap;constructor(t=new sn([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=rh(this.queryParams),this._queryParamMap}toString(){return Ome.serialize(this)}},sn=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jb(this)}},$f=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=rh(this.parameters),this._parameterMap}toString(){return K6(this)}};function Rme(e,t){return Lf(e,t)&&e.every((n,r)=>Qa(n.parameters,t[r].parameters))}function Lf(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function kme(e,t){let n=[];return Object.entries(e.children).forEach(([r,o])=>{r===It&&(n=n.concat(t(o,r)))}),Object.entries(e.children).forEach(([r,o])=>{r!==It&&(n=n.concat(t(o,r)))}),n}var Vy=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>new oh,providedIn:"root"})}return e})(),oh=class{parse(t){let n=new nk(t);return new Ku(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Ty(t.root,!0)}`,r=Pme(t.queryParams),o=typeof t.fragment=="string"?`#${Mme(t.fragment)}`:"";return`${n}${r}${o}`}},Ome=new oh;function Jb(e){return e.segments.map(t=>K6(t)).join("/")}function Ty(e,t){if(!e.hasChildren())return Jb(e);if(t){let n=e.children[It]?Ty(e.children[It],!1):"",r=[];return Object.entries(e.children).forEach(([o,i])=>{o!==It&&r.push(`${o}:${Ty(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=kme(e,(r,o)=>o===It?[Ty(e.children[It],!1)]:[`${o}:${Ty(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[It]!=null?`${Jb(e)}/${n[0]}`:`${Jb(e)}/(${n.join("//")})`}}function q6(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yb(e){return q6(e).replace(/%3B/gi,";")}function Mme(e){return encodeURI(e)}function tk(e){return q6(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ew(e){return decodeURIComponent(e)}function k6(e){return ew(e.replace(/\+/g,"%20"))}function K6(e){return`${tk(e.path)}${Fme(e.parameters)}`}function Fme(e){return Object.entries(e).map(([t,n])=>`;${tk(t)}=${tk(n)}`).join("")}function Pme(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(o=>`${Yb(n)}=${Yb(o)}`).join("&"):`${Yb(n)}=${Yb(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var $me=/^[^\/()?;#]+/;function XR(e){let t=e.match($me);return t?t[0]:""}var Lme=/^[^\/()?;=#]+/;function Vme(e){let t=e.match(Lme);return t?t[0]:""}var Bme=/^[^=?&#]+/;function Ume(e){let t=e.match(Bme);return t?t[0]:""}var Gme=/^[^&#]+/;function jme(e){let t=e.match(Gme);return t?t[0]:""}var nk=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[It]=new sn(t,n)),r}parseSegment(){let t=XR(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Ge(4009,!1);return this.capture(t),new $f(ew(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=Vme(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=XR(this.remaining);o&&(r=o,this.capture(r))}t[ew(n)]=ew(r)}parseQueryParam(t){let n=Ume(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=jme(this.remaining);s&&(r=s,this.capture(r))}let o=k6(n),i=k6(r);if(t.hasOwnProperty(o)){let s=t[o];Array.isArray(s)||(s=[s],t[o]=s),s.push(i)}else t[o]=i}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=XR(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new Ge(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=It);let s=this.parseChildren();n[i]=Object.keys(s).length===1?s[It]:new sn([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Ge(4011,!1)}};function X6(e){return e.segments.length>0?new sn([],{[It]:e}):e}function Y6(e){let t={};for(let[r,o]of Object.entries(e.children)){let i=Y6(o);if(r===It&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))t[s]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}let n=new sn(e.segments,t);return zme(n)}function zme(e){if(e.numberOfChildren===1&&e.children[It]){let t=e.children[It];return new sn(e.segments.concat(t.segments),t.children)}return e}function Vf(e){return e instanceof Ku}function Hme(e,t,n=null,r=null){let o=Z6(e);return Q6(o,t,n,r)}function Z6(e){let t;function n(i){let s={};for(let u of i.children){let c=n(u);s[u.outlet]=c}let a=new sn(i.url,s);return i===e&&(t=a),a}let r=n(e.root),o=X6(r);return t??o}function Q6(e,t,n,r){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return YR(o,o,o,n,r);let i=Wme(t);if(i.toRoot())return YR(o,o,new sn([],{}),n,r);let s=qme(i,o,e),a=s.processChildren?Sy(s.segmentGroup,s.index,i.commands):e5(s.segmentGroup,s.index,i.commands);return YR(o,s.segmentGroup,a,n,r)}function tw(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Ay(e){return typeof e=="object"&&e!=null&&e.outlets}function YR(e,t,n,r,o){let i={};r&&Object.entries(r).forEach(([u,c])=>{i[u]=Array.isArray(c)?c.map(f=>`${f}`):`${c}`});let s;e===t?s=n:s=J6(e,t,n);let a=X6(Y6(s));return new Ku(a,i,o)}function J6(e,t,n){let r={};return Object.entries(e.children).forEach(([o,i])=>{i===t?r[o]=n:r[o]=J6(i,t,n)}),new sn(e.segments,r)}var nw=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&tw(r[0]))throw new Ge(4003,!1);let o=r.find(Ay);if(o&&o!==G6(r))throw new Ge(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Wme(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new nw(!0,0,e);let t=0,n=!1,r=e.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?t++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new nw(n,t,r)}var eh=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function qme(e,t,n){if(e.isAbsolute)return new eh(t,!0,0);if(!n)return new eh(t,!1,NaN);if(n.parent===null)return new eh(n,!0,0);let r=tw(e.commands[0])?0:1,o=n.segments.length-1+r;return Kme(n,o,e.numberOfDoubleDots)}function Kme(e,t,n){let r=e,o=t,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new Ge(4005,!1);o=r.segments.length}return new eh(r,!1,o-i)}function Xme(e){return Ay(e[0])?e[0].outlets:{[It]:e}}function e5(e,t,n){if(e??=new sn([],{}),e.segments.length===0&&e.hasChildren())return Sy(e,t,n);let r=Yme(e,t,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let i=new sn(e.segments.slice(0,r.pathIndex),{});return i.children[It]=new sn(e.segments.slice(r.pathIndex),e.children),Sy(i,0,o)}else return r.match&&o.length===0?new sn(e.segments,{}):r.match&&!e.hasChildren()?rk(e,t,n):r.match?Sy(e,0,o):rk(e,t,n)}function Sy(e,t,n){if(n.length===0)return new sn(e.segments,{});{let r=Xme(n),o={};if(Object.keys(r).some(i=>i!==It)&&e.children[It]&&e.numberOfChildren===1&&e.children[It].segments.length===0){let i=Sy(e.children[It],t,n);return new sn(e.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=e5(e.children[i],t,s))}),Object.entries(e.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new sn(e.segments,o)}}function Yme(e,t,n){let r=0,o=t,i={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(r>=n.length)return i;let s=e.segments[o],a=n[r];if(Ay(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(o>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!M6(u,c,s))return i;r+=2}else{if(!M6(u,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function rk(e,t,n){let r=e.segments.slice(0,t),o=0;for(;o<n.length;){let i=n[o];if(Ay(i)){let u=Zme(i.outlets);return new sn(r,u)}if(o===0&&tw(n[0])){let u=e.segments[t];r.push(new $f(u.path,O6(n[0]))),o++;continue}let s=Ay(i)?i.outlets[It]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&tw(a)?(r.push(new $f(s,O6(a))),o+=2):(r.push(new $f(s,{})),o++)}return new sn(r,{})}function Zme(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=rk(new sn([],{}),0,r))}),t}function O6(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function M6(e,t,n){return e==n.path&&Qa(t,n.parameters)}var Dy="imperative",Hr=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Hr||{}),Os=class{id;url;constructor(t,n){this.id=t,this.url=n}},ih=class extends Os{type=Hr.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",o=null){super(t,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},rs=class extends Os{urlAfterRedirects;type=Hr.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ns=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(ns||{}),rw=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(rw||{}),qu=class extends Os{reason;code;type=Hr.NavigationCancel;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},nl=class extends Os{reason;code;type=Hr.NavigationSkipped;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}},Ry=class extends Os{error;target;type=Hr.NavigationError;constructor(t,n,r,o){super(t,n),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ow=class extends Os{urlAfterRedirects;state;type=Hr.RoutesRecognized;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ok=class extends Os{urlAfterRedirects;state;type=Hr.GuardsCheckStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ik=class extends Os{urlAfterRedirects;state;shouldActivate;type=Hr.GuardsCheckEnd;constructor(t,n,r,o,i){super(t,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sk=class extends Os{urlAfterRedirects;state;type=Hr.ResolveStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ak=class extends Os{urlAfterRedirects;state;type=Hr.ResolveEnd;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uk=class{route;type=Hr.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ck=class{route;type=Hr.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lk=class{snapshot;type=Hr.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fk=class{snapshot;type=Hr.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dk=class{snapshot;type=Hr.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pk=class{snapshot;type=Hr.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},iw=class{routerEvent;position;anchor;type=Hr.Scroll;constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},ky=class{},sh=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function Qme(e,t){return e.providers&&!e._injector&&(e._injector=gy(e.providers,t,`Route: ${e.path}`)),e._injector??t}function ha(e){return e.outlet||It}function Jme(e,t){let n=e.filter(r=>ha(r)===t);return n.push(...e.filter(r=>ha(r)!==t)),n}function By(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var hk=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return By(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Uy(this.rootInjector)}},Uy=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new hk(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(xt(di))};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),sw=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=mk(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=mk(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=gk(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return gk(t,this._root).map(n=>n.value)}};function mk(e,t){if(e===t.value)return t;for(let n of t.children){let r=mk(e,n);if(r)return r}return null}function gk(e,t){if(e===t.value)return[t];for(let n of t.children){let r=gk(e,n);if(r.length)return r.unshift(t),r}return[]}var ts=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Jp(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var aw=class extends sw{snapshot;constructor(t,n){super(t),this.snapshot=n,_k(this,t)}toString(){return this.snapshot.toString()}};function t5(e){let t=ege(e),n=new Mr([new $f("",{})]),r=new Mr({}),o=new Mr({}),i=new Mr({}),s=new Mr(""),a=new rl(n,r,i,s,o,It,e,t.root);return a.snapshot=t.root,new aw(new ts(a,[]),t)}function ege(e){let t={},n={},r={},o="",i=new th([],t,r,o,n,It,e,null,{});return new cw("",new ts(i,[]))}var rl=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,o,i,s,a,u){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(vt(c=>c[Ly]))??ot(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(vt(t=>rh(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(vt(t=>rh(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function uw(e,t,n="emptyOnly"){let r,{routeConfig:o}=e;return t!==null&&(n==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:xe(xe({},t.params),e.params),data:xe(xe({},t.data),e.data),resolve:xe(xe(xe(xe({},e.data),t.data),o?.data),e._resolvedData)}:r={params:xe({},e.params),data:xe({},e.data),resolve:xe(xe({},e.data),e._resolvedData??{})},o&&r5(o)&&(r.resolve[Ly]=o.title),r}var th=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ly]}constructor(t,n,r,o,i,s,a,u,c){this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=rh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=rh(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},cw=class extends sw{url;constructor(t,n){super(n),this.url=t,_k(this,n)}toString(){return n5(this._root)}};function _k(e,t){t.value._routerState=e,t.children.forEach(n=>_k(e,n))}function n5(e){let t=e.children.length>0?` { ${e.children.map(n5).join(", ")} } `:"";return`${e.value}${t}`}function ZR(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Qa(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Qa(t.params,n.params)||e.paramsSubject.next(n.params),Sme(t.url,n.url)||e.urlSubject.next(n.url),Qa(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function yk(e,t){let n=Qa(e.params,t.params)&&Rme(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||yk(e.parent,t.parent))}function r5(e){return typeof e.title=="string"||e.title===null}var tge=new Pe(""),Ik=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=It;activateEvents=new ar;deactivateEvents=new ar;attachEvents=new ar;detachEvents=new ar;routerOutletData=oB(void 0);parentContexts=de(Uy);location=de(Xc);changeDetector=de(Jc);inputBinder=de(hw,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ge(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ge(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ge(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Ge(4013,!1);this._activatedRoute=n;let o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new vk(n,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Zi({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Uu]})}return e})(),vk=class e{route;childContexts;parent;outletData;__ngOutletInjector(t){return new e(this.route,this.childContexts,t,this.outletData)}constructor(t,n,r,o){this.route=t,this.childContexts=n,this.parent=r,this.outletData=o}get(t,n){return t===rl?this.route:t===Uy?this.childContexts:t===tge?this.outletData:this.parent.get(t,n)}},hw=new Pe(""),F6=(()=>{class e{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,o=Yg([r.queryParams,r.params,r.data]).pipe(xo(([i,s,a],u)=>(a=xe(xe(xe({},i),s),a),u===0?ot(a):Promise.resolve(a)))).subscribe(i=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=QU(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,i[a])});this.outletDataSubscriptions.set(n,o)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})();function nge(e,t,n){let r=Oy(e,t._root,n?n._root:void 0);return new aw(r,t)}function Oy(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let o=rge(e,t,n);return new ts(r,o)}else{if(e.shouldAttach(t.value)){let i=e.retrieve(t.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Oy(e,a)),s}}let r=oge(t.value),o=t.children.map(i=>Oy(e,i));return new ts(r,o)}}function rge(e,t,n){return t.children.map(r=>{for(let o of n.children)if(e.shouldReuseRoute(r.value,o.value.snapshot))return Oy(e,r,o);return Oy(e,r)})}function oge(e){return new rl(new Mr(e.url),new Mr(e.params),new Mr(e.queryParams),new Mr(e.fragment),new Mr(e.data),e.outlet,e.component,e)}var My=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},o5="ngNavigationCancelingError";function lw(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Vf(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=i5(!1,ns.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function i5(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[o5]=!0,n.cancellationCode=t,n}function ige(e){return s5(e)&&Vf(e.url)}function s5(e){return!!e&&e[o5]}var sge=(e,t,n,r)=>vt(o=>(new xk(t,o.targetRouterState,o.currentRouterState,n,r).activate(e),o)),xk=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,o,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),ZR(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let o=Jp(n);t.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,n,r){let o=t.value,i=n?n.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=Jp(t);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=Jp(t);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let o=Jp(n);t.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new pk(i.value.snapshot))}),t.children.length&&this.forwardEvent(new fk(t.value.snapshot))}activateRoutes(t,n,r){let o=t.value,i=n?n.value:null;if(ZR(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ZR(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},fw=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},nh=class{component;route;constructor(t,n){this.component=t,this.route=n}};function age(e,t,n){let r=e._root,o=t?t._root:null;return _y(r,o,n,[r.value])}function uge(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function uh(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!nV(e)?e:t.get(e):r}function _y(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=Jp(t);return e.children.forEach(s=>{cge(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>Ny(a,n.getContext(s),o)),o}function cge(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let u=lge(s,i,i.routeConfig.runGuardsAndResolvers);u?o.canActivateChecks.push(new fw(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?_y(e,t,a?a.children:null,r,o):_y(e,t,n,r,o),u&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new nh(a.outlet.component,s))}else s&&Ny(t,a,o),o.canActivateChecks.push(new fw(r)),i.component?_y(e,null,a?a.children:null,r,o):_y(e,null,n,r,o);return o}function lge(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Lf(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Lf(e.url,t.url)||!Qa(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yk(e,t)||!Qa(e.queryParams,t.queryParams);case"paramsChange":default:return!yk(e,t)}}function Ny(e,t,n){let r=Jp(e),o=e.value;Object.entries(r).forEach(([i,s])=>{o.component?t?Ny(s,t.children.getContext(i),n):Ny(s,null,n):Ny(s,t,n)}),o.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new nh(t.outlet.component,o)):n.canDeactivateChecks.push(new nh(null,o)):n.canDeactivateChecks.push(new nh(null,o))}function Gy(e){return typeof e=="function"}function fge(e){return typeof e=="boolean"}function dge(e){return e&&Gy(e.canLoad)}function pge(e){return e&&Gy(e.canActivate)}function hge(e){return e&&Gy(e.canActivateChild)}function mge(e){return e&&Gy(e.canDeactivate)}function gge(e){return e&&Gy(e.canMatch)}function a5(e){return e instanceof Ru||e?.name==="EmptyError"}var Zb=Symbol("INITIAL_VALUE");function ah(){return xo(e=>Yg(e.map(t=>t.pipe(ku(1),sN(Zb)))).pipe(vt(t=>{for(let n of t)if(n!==!0){if(n===Zb)return Zb;if(n===!1||yge(n))return n}return!0}),Vo(t=>t!==Zb),ku(1)))}function yge(e){return Vf(e)||e instanceof My}function vge(e,t){return sr(n=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return s.length===0&&i.length===0?ot(Tt(xe({},n),{guardsResult:!0})):xge(s,r,o,e).pipe(sr(a=>a&&fge(a)?bge(r,i,e,t):ot(a)),vt(a=>Tt(xe({},n),{guardsResult:a})))})}function xge(e,t,n,r){return Mn(e).pipe(sr(o=>_ge(o.component,o.route,n,t,r)),za(o=>o!==!0,!0))}function bge(e,t,n,r){return Mn(t).pipe(Fc(o=>_p(Ege(o.route.parent,r),wge(o.route,r),Tge(e,o.path,n),Cge(e,o.route,n))),za(o=>o!==!0,!0))}function wge(e,t){return e!==null&&t&&t(new dk(e)),ot(!0)}function Ege(e,t){return e!==null&&t&&t(new lk(e)),ot(!0)}function Cge(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return ot(!0);let o=r.map(i=>a1(()=>{let s=By(t)??n,a=uh(i,s),u=pge(a)?a.canActivate(t,e):Xi(s,()=>a(t,e));return ol(u).pipe(za())}));return ot(o).pipe(ah())}function Tge(e,t,n){let r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(s=>uge(s)).filter(s=>s!==null).map(s=>a1(()=>{let a=s.guards.map(u=>{let c=By(s.node)??n,f=uh(u,c),d=hge(f)?f.canActivateChild(r,e):Xi(c,()=>f(r,e));return ol(d).pipe(za())});return ot(a).pipe(ah())}));return ot(i).pipe(ah())}function _ge(e,t,n,r,o){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return ot(!0);let s=i.map(a=>{let u=By(t)??o,c=uh(a,u),f=mge(c)?c.canDeactivate(e,t,n,r):Xi(u,()=>c(e,t,n,r));return ol(f).pipe(za())});return ot(s).pipe(ah())}function Ige(e,t,n,r){let o=t.canLoad;if(o===void 0||o.length===0)return ot(!0);let i=o.map(s=>{let a=uh(s,e),u=dge(a)?a.canLoad(t,n):Xi(e,()=>a(t,n));return ol(u)});return ot(i).pipe(ah(),u5(r))}function u5(e){return qD(Yn(t=>{if(typeof t!="boolean")throw lw(e,t)}),vt(t=>t===!0))}function Sge(e,t,n,r){let o=t.canMatch;if(!o||o.length===0)return ot(!0);let i=o.map(s=>{let a=uh(s,e),u=gge(a)?a.canMatch(t,n):Xi(e,()=>a(t,n));return ol(u)});return ot(i).pipe(ah(),u5(r))}var Fy=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Py=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Qp(e){return Cp(new Fy(e))}function Dge(e){return Cp(new Ge(4e3,!1))}function Nge(e){return Cp(i5(!1,ns.GuardRejected))}var bk=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return ot(r);if(o.numberOfChildren>1||!o.children[It])return Dge(`${t.redirectTo}`);o=o.children[It]}}applyRedirectCommands(t,n,r,o,i){if(typeof n!="string"){let a=n,{queryParams:u,fragment:c,routeConfig:f,url:d,outlet:h,params:m,data:v,title:x}=o,b=Xi(i,()=>a({params:m,data:v,queryParams:u,fragment:c,routeConfig:f,url:d,outlet:h,title:x}));if(b instanceof Ku)throw new Py(b);n=b}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new Py(s);return s}applyRedirectCreateUrlTree(t,n,r,o){let i=this.createSegmentGroup(t,n.root,r,o);return new Ku(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(t,n,r,o){let i=this.createSegments(t,n.segments,r,o),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(t,u,r,o)}),new sn(i,s)}createSegments(t,n,r,o){return n.map(i=>i.path[0]===":"?this.findPosParam(t,i,o):this.findOrReturn(i,r))}findPosParam(t,n,r){let o=r[n.path.substring(1)];if(!o)throw new Ge(4001,!1);return o}findOrReturn(t,n){let r=0;for(let o of n){if(o.path===t.path)return n.splice(r),o;r++}return t}},wk={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Age(e,t,n,r,o){let i=c5(e,t,n);return i.matched?(r=Qme(t,r),Sge(r,t,n,o).pipe(vt(s=>s===!0?i:xe({},wk)))):ot(i)}function c5(e,t,n){if(t.path==="**")return Rge(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?xe({},wk):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(t.matcher||Ime)(n,e,t);if(!o)return xe({},wk);let i={};Object.entries(o.posParams??{}).forEach(([a,u])=>{i[a]=u.path});let s=o.consumed.length>0?xe(xe({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Rge(e){return{matched:!0,parameters:e.length>0?G6(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function P6(e,t,n,r){return n.length>0&&Mge(e,n,r)?{segmentGroup:new sn(t,Oge(r,new sn(n,e.children))),slicedSegments:[]}:n.length===0&&Fge(e,n,r)?{segmentGroup:new sn(e.segments,kge(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new sn(e.segments,e.children),slicedSegments:n}}function kge(e,t,n,r){let o={};for(let i of n)if(mw(e,t,i)&&!r[ha(i)]){let s=new sn([],{});o[ha(i)]=s}return xe(xe({},r),o)}function Oge(e,t){let n={};n[It]=t;for(let r of e)if(r.path===""&&ha(r)!==It){let o=new sn([],{});n[ha(r)]=o}return n}function Mge(e,t,n){return n.some(r=>mw(e,t,r)&&ha(r)!==It)}function Fge(e,t,n){return n.some(r=>mw(e,t,r))}function mw(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Pge(e,t,n){return t.length===0&&!e.children[n]}var Ek=class{};function $ge(e,t,n,r,o,i,s="emptyOnly"){return new Ck(e,t,n,r,o,s,i).recognize()}var Lge=31,Ck=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,o,i,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new bk(this.urlSerializer,this.urlTree)}noMatchError(t){return new Ge(4002,`'${t.segmentGroup}'`)}recognize(){let t=P6(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(vt(({children:n,rootSnapshot:r})=>{let o=new ts(r,n),i=new cw("",o),s=Hme(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(t){let n=new th([],Object.freeze({}),Object.freeze(xe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),It,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,It,n).pipe(vt(r=>({children:r,rootSnapshot:n})),Mc(r=>{if(r instanceof Py)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Fy?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,i):this.processSegment(t,n,r,r.segments,o,!0,i).pipe(vt(s=>s instanceof ts?[s]:[]))}processChildren(t,n,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Mn(i).pipe(Fc(s=>{let a=r.children[s],u=Jme(n,s);return this.processSegmentGroup(t,u,a,s,o)}),oN((s,a)=>(s.push(...a),s)),Pc(null),rN(),sr(s=>{if(s===null)return Qp(r);let a=l5(s);return Vge(a),ot(a)}))}processSegment(t,n,r,o,i,s,a){return Mn(n).pipe(Fc(u=>this.processSegmentAgainstRoute(u._injector??t,n,u,r,o,i,s,a).pipe(Mc(c=>{if(c instanceof Fy)return ot(null);throw c}))),za(u=>!!u),Mc(u=>{if(a5(u))return Pge(r,o,i)?ot(new Ek):Qp(r);throw u}))}processSegmentAgainstRoute(t,n,r,o,i,s,a,u){return ha(r)!==s&&(s===It||!mw(o,i,r))?Qp(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,o,r,i,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,o,n,r,i,s,u):Qp(o)}expandSegmentAgainstRouteUsingRedirect(t,n,r,o,i,s,a){let{matched:u,parameters:c,consumedSegments:f,positionalParamSegments:d,remainingSegments:h}=c5(n,o,i);if(!u)return Qp(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Lge&&(this.allowRedirects=!1));let m=new th(i,c,Object.freeze(xe({},this.urlTree.queryParams)),this.urlTree.fragment,$6(o),ha(o),o.component??o._loadedComponent??null,o,L6(o)),v=uw(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(v.params),m.data=Object.freeze(v.data);let x=this.applyRedirects.applyRedirectCommands(f,o.redirectTo,d,m,t);return this.applyRedirects.lineralizeSegments(o,x).pipe(sr(b=>this.processSegment(t,r,n,b.concat(h),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,o,i,s){let a=Age(n,r,o,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(xo(u=>u.matched?(t=r._injector??t,this.getChildConfig(t,r,o).pipe(xo(({routes:c})=>{let f=r._loadedInjector??t,{parameters:d,consumedSegments:h,remainingSegments:m}=u,v=new th(h,d,Object.freeze(xe({},this.urlTree.queryParams)),this.urlTree.fragment,$6(r),ha(r),r.component??r._loadedComponent??null,r,L6(r)),x=uw(v,s,this.paramsInheritanceStrategy);v.params=Object.freeze(x.params),v.data=Object.freeze(x.data);let{segmentGroup:b,slicedSegments:C}=P6(n,h,m,c);if(C.length===0&&b.hasChildren())return this.processChildren(f,c,b,v).pipe(vt(O=>new ts(v,O)));if(c.length===0&&C.length===0)return ot(new ts(v,[]));let D=ha(r)===i;return this.processSegment(f,c,b,C,D?It:i,!0,v).pipe(vt(O=>new ts(v,O instanceof ts?[O]:[])))}))):Qp(n)))}getChildConfig(t,n,r){return n.children?ot({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?ot({routes:n._loadedRoutes,injector:n._loadedInjector}):Ige(t,n,r,this.urlSerializer).pipe(sr(o=>o?this.configLoader.loadChildren(t,n).pipe(Yn(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):Nge(n))):ot({routes:[],injector:t})}};function Vge(e){e.sort((t,n)=>t.value.outlet===It?-1:n.value.outlet===It?1:t.value.outlet.localeCompare(n.value.outlet))}function Bge(e){let t=e.value.routeConfig;return t&&t.path===""}function l5(e){let t=[],n=new Set;for(let r of e){if(!Bge(r)){t.push(r);continue}let o=t.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):t.push(r)}for(let r of n){let o=l5(r.children);t.push(new ts(r.value,o))}return t.filter(r=>!n.has(r))}function $6(e){return e.data||{}}function L6(e){return e.resolve||{}}function Uge(e,t,n,r,o,i){return sr(s=>$ge(e,t,n,r,s.extractedUrl,o,i).pipe(vt(({state:a,tree:u})=>Tt(xe({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function Gge(e,t){return sr(n=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return ot(n);let i=new Set(o.map(u=>u.route)),s=new Set;for(let u of i)if(!s.has(u))for(let c of f5(u))s.add(c);let a=0;return Mn(s).pipe(Fc(u=>i.has(u)?jge(u,r,e,t):(u.data=uw(u,u.parent,e).resolve,ot(void 0))),Yn(()=>a++),Sp(1),sr(u=>a===s.size?ot(n):ji))})}function f5(e){let t=e.children.map(n=>f5(n)).flat();return[e,...t]}function jge(e,t,n,r){let o=e.routeConfig,i=e._resolve;return o?.title!==void 0&&!r5(o)&&(i[Ly]=o.title),zge(i,e,t,r).pipe(vt(s=>(e._resolvedData=s,e.data=uw(e,e.parent,n).resolve,null)))}function zge(e,t,n,r){let o=ek(e);if(o.length===0)return ot({});let i={};return Mn(o).pipe(sr(s=>Hge(e[s],t,n,r).pipe(za(),Yn(a=>{if(a instanceof My)throw lw(new oh,a);i[s]=a}))),Sp(1),tN(i),Mc(s=>a5(s)?ji:Cp(s)))}function Hge(e,t,n,r){let o=By(t)??r,i=uh(e,o),s=i.resolve?i.resolve(t,n):Xi(o,()=>i(t,n));return ol(s)}function QR(e){return xo(t=>{let n=e(t);return n?Mn(n).pipe(vt(()=>t)):ot(t)})}var d5=(()=>{class e{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===It);return r}getResolvedTitleForRoute(n){return n.data[Ly]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>de(Wge),providedIn:"root"})}return e})(),Wge=(()=>{class e extends d5{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(xt(D6))};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),jy=new Pe("",{providedIn:"root",factory:()=>({})}),qge=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Cr({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,o){r&1&&Tr(0,"router-outlet")},dependencies:[Ik],encapsulation:2})}return e})();function Sk(e){let t=e.children&&e.children.map(Sk),n=t?Tt(xe({},e),{children:t}):xe({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==It&&(n.component=qge),n}var $y=new Pe(""),Dk=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=de(Vb);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ot(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=ol(n.loadComponent()).pipe(vt(p5),Yn(i=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=i}),Ip(()=>{this.componentLoaders.delete(n)})),o=new bp(r,()=>new Er).pipe(xp());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ot({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=Kge(r,this.compiler,n,this.onLoadEndListener).pipe(Ip(()=>{this.childrenLoaders.delete(r)})),s=new bp(i,()=>new Er).pipe(xp());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Kge(e,t,n,r){return ol(e.loadChildren()).pipe(vt(p5),sr(o=>o instanceof iy||Array.isArray(o)?ot(o):Mn(t.compileModuleAsync(o))),vt(o=>{r&&r(e);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(n).injector,s=i.get($y,[],{optional:!0,self:!0}).flat()),{routes:s.map(Sk),injector:i}}))}function Xge(e){return e&&typeof e=="object"&&"default"in e}function p5(e){return Xge(e)?e.default:e}var Nk=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>de(Yge),providedIn:"root"})}return e})(),Yge=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),h5=new Pe(""),m5=new Pe("");function Zge(e,t,n){let r=e.get(m5),o=e.get(Go);return e.get(Zn).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let i,s=new Promise(c=>{i=c}),a=o.startViewTransition(()=>(i(),Qge(e))),{onViewTransitionCreated:u}=r;return u&&Xi(e,()=>u({transition:a,from:t,to:n})),s})}function Qge(e){return new Promise(t=>{vb({read:()=>setTimeout(t)},{injector:e})})}var g5=new Pe(""),Ak=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Er;transitionAbortSubject=new Er;configLoader=de(Dk);environmentInjector=de(di);urlSerializer=de(Vy);rootContexts=de(Uy);location=de(Zp);inputBindingEnabled=de(hw,{optional:!0})!==null;titleStrategy=de(d5);options=de(jy,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=de(Nk);createViewTransition=de(h5,{optional:!0});navigationErrorHandler=de(g5,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ot(void 0);rootComponentType=null;constructor(){let n=o=>this.events.next(new uk(o)),r=o=>this.events.next(new ck(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Tt(xe(xe({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,o){return this.transitions=new Mr({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Dy,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Vo(i=>i.id!==0),vt(i=>Tt(xe({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),xo(i=>{let s=!1,a=!1;return ot(i).pipe(xo(u=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",ns.SupersededByNewNavigation),ji;this.currentTransition=i,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Tt(xe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&f!=="reload"){let d="";return this.events.next(new nl(u.id,this.urlSerializer.serialize(u.rawUrl),d,rw.IgnoredSameUrlNavigation)),u.resolve(!1),ji}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ot(u).pipe(xo(d=>{let h=this.transitions?.getValue();return this.events.next(new ih(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?ji:Promise.resolve(d)}),Uge(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Yn(d=>{i.targetSnapshot=d.targetSnapshot,i.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=Tt(xe({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new ow(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:d,extractedUrl:h,source:m,restoredState:v,extras:x}=u,b=new ih(d,this.urlSerializer.serialize(h),m,v);this.events.next(b);let C=t5(this.rootComponentType).snapshot;return this.currentTransition=i=Tt(xe({},u),{targetSnapshot:C,urlAfterRedirects:h,extras:Tt(xe({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,ot(i)}else{let d="";return this.events.next(new nl(u.id,this.urlSerializer.serialize(u.extractedUrl),d,rw.IgnoredByUrlHandlingStrategy)),u.resolve(!1),ji}}),Yn(u=>{let c=new ok(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),vt(u=>(this.currentTransition=i=Tt(xe({},u),{guards:age(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),i)),vge(this.environmentInjector,u=>this.events.next(u)),Yn(u=>{if(i.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw lw(this.urlSerializer,u.guardsResult);let c=new ik(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(c)}),Vo(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",ns.GuardRejected),!1)),QR(u=>{if(u.guards.canActivateChecks.length)return ot(u).pipe(Yn(c=>{let f=new sk(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),xo(c=>{let f=!1;return ot(c).pipe(Gge(this.paramsInheritanceStrategy,this.environmentInjector),Yn({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(c,"",ns.NoDataFromResolver)}}))}),Yn(c=>{let f=new ak(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}))}),QR(u=>{let c=f=>{let d=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(f.routeConfig).pipe(Yn(h=>{f.component=h}),vt(()=>{})));for(let h of f.children)d.push(...c(h));return d};return Yg(c(u.targetSnapshot.root)).pipe(Pc(null),ku(1))}),QR(()=>this.afterPreactivation()),xo(()=>{let{currentSnapshot:u,targetSnapshot:c}=i,f=this.createViewTransition?.(this.environmentInjector,u.root,c.root);return f?Mn(f).pipe(vt(()=>i)):ot(i)}),vt(u=>{let c=nge(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=i=Tt(xe({},u),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,i}),Yn(()=>{this.events.next(new ky)}),sge(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ku(1),Yn({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new rs(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),aN(this.transitionAbortSubject.pipe(Yn(u=>{throw u}))),Ip(()=>{!s&&!a&&this.cancelNavigationTransition(i,"",ns.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Mc(u=>{if(a=!0,s5(u))this.events.next(new qu(i.id,this.urlSerializer.serialize(i.extractedUrl),u.message,u.cancellationCode)),ige(u)?this.events.next(new sh(u.url,u.navigationBehaviorOptions)):i.resolve(!1);else{let c=new Ry(i.id,this.urlSerializer.serialize(i.extractedUrl),u,i.targetSnapshot??void 0);try{let f=Xi(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(f instanceof My){let{message:d,cancellationCode:h}=lw(this.urlSerializer,f);this.events.next(new qu(i.id,this.urlSerializer.serialize(i.extractedUrl),d,h)),this.events.next(new sh(f.redirectTo,f.navigationBehaviorOptions))}else throw this.events.next(c),u}catch(f){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(f)}}return ji}))}))}cancelNavigationTransition(n,r,o){let i=new qu(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Jge(e){return e!==Dy}var eye=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>de(tye),providedIn:"root"})}return e})(),Tk=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},tye=(()=>{class e extends Tk{static \u0275fac=(()=>{let n;return function(o){return(n||(n=py(e)))(o||e)}})();static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),y5=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>de(nye),providedIn:"root"})}return e})(),nye=(()=>{class e extends y5{location=de(Zp);urlSerializer=de(Vy);options=de(jy,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=de(Nk);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ku;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=t5(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ih)this.stateMemento=this.createStateMemento();else if(n instanceof nl)this.rawUrlTree=r.initialUrl;else if(n instanceof ow){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??o,r)}}else n instanceof ky?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof qu&&(n.code===ns.GuardRejected||n.code===ns.NoDataFromResolver)?this.restoreHistory(r):n instanceof Ry?this.restoreHistory(r,!0):n instanceof rs&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let o=n instanceof Ku?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let i=this.browserPageId,s=xe(xe({},r.extras.state),this.generateNgRouterState(r.id,i));this.location.replaceState(o,"",s)}else{let i=xe(xe({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",i)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.currentUrlTree===n.finalUrl&&i===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=py(e)))(o||e)}})();static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Iy=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Iy||{});function v5(e,t){e.events.pipe(Vo(n=>n instanceof rs||n instanceof qu||n instanceof Ry||n instanceof nl),vt(n=>n instanceof rs||n instanceof nl?Iy.COMPLETE:(n instanceof qu?n.code===ns.Redirect||n.code===ns.SupersededByNewNavigation:!1)?Iy.REDIRECTING:Iy.FAILED),Vo(n=>n!==Iy.REDIRECTING),ku(1)).subscribe(()=>{t()})}var rye={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oye={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Co=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=de(Ob);stateManager=de(y5);options=de(jy,{optional:!0})||{};pendingTasks=de(Gu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=de(Ak);urlSerializer=de(Vy);location=de(Zp);urlHandlingStrategy=de(Nk);_events=new Er;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=de(eye);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=de($y,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!de(hw,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ir;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof qu&&r.code!==ns.Redirect&&r.code!==ns.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof rs)this.navigated=!0;else if(r instanceof sh){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),u=xe({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Jge(o.source)},s);this.scheduleNavigation(a,Dy,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}sye(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Dy,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let u=xe({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(i.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Sk),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=xe(xe({},this.currentUrlTree.queryParams),i);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=i||null}f!==null&&(f=this.removeEmptyProps(f));let d;try{let h=o?o.snapshot:this.routerState.snapshot.root;d=Z6(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return Q6(d,n,f,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){let o=Vf(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Dy,null,r)}navigate(n,r={skipLocationChange:!1}){return iye(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=xe({},rye):r===!1?o=xe({},oye):o=r,Vf(n))return R6(this.currentUrlTree,n,o);let i=this.parseUrl(n);return R6(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,u,c;s?(a=s.resolve,u=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,u=h});let f=this.pendingTasks.add();return v5(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function iye(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new Ge(4008,!1)}function sye(e){return!(e instanceof ky)&&!(e instanceof sh)}var dw=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Er;constructor(n,r,o,i,s,a){this.router=n,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(c=>{c instanceof rs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Vf(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,o,i,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||o||i||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:AB(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let o=this.renderer,i=this.el.nativeElement;r!==null?o.setAttribute(i,n,r):o.removeAttribute(i,n)}get urlTree(){return this.routerLinkInput===null?null:Vf(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(ht(Co),ht(rl),XA("tabindex"),ht(Za),ht(hi),ht(Wu))};static \u0275dir=Zi({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&io("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Fb("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ff],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ff],replaceUrl:[2,"replaceUrl","replaceUrl",Ff],routerLink:"routerLink"},features:[ER,Uu]})}return e})(),x5=(()=>{class e{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new ar;constructor(n,r,o,i,s){this.router=n,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof rs&&this.update()})}ngAfterContentInit(){ot(this.links.changes,ot(null)).pipe(Oc()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Mn(n).pipe(Oc()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=aye(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let i=o.urlTree;return i?n.isActive(i,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||e)(ht(Co),ht(hi),ht(Za),ht(Jc),ht(dw,8))};static \u0275dir=Zi({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,o,i){if(r&1&&GU(i,dw,5),r&2){let s;Of(s=Mf())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Uu]})}return e})();function aye(e){return!!e.paths}var pw=class{};var uye=(()=>{class e{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,o,i,s){this.router=n,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Vo(n=>n instanceof rs),Fc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let o=[];for(let i of r){i.providers&&!i._injector&&(i._injector=gy(i.providers,n,`Route: ${i.path}`));let s=i._injector??n,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return Mn(o).pipe(Oc())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(n,r):o=ot(null);let i=o.pipe(sr(s=>s===null?ot(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Mn([i,s]).pipe(Oc())}else return i})}static \u0275fac=function(r){return new(r||e)(xt(Co),xt(Vb),xt(di),xt(pw),xt(Dk))};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),b5=new Pe(""),cye=(()=>{class e{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(n,r,o,i,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ih?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof rs?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof nl&&n.code===rw.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof iw&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new iw(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){HB()};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})();function w5(e,...t){return Nf([{provide:$y,multi:!0,useValue:e},[],{provide:rl,useFactory:E5,deps:[Co]},{provide:Zc,multi:!0,useFactory:C5},t.map(n=>n.\u0275providers)])}function E5(e){return e.routerState.root}function zy(e,t){return{\u0275kind:e,\u0275providers:t}}function C5(){let e=de(pi);return t=>{let n=e.get(Ki);if(t!==n.components[0])return;let r=e.get(Co),o=e.get(T5);e.get(Rk)===1&&r.initialNavigation(),e.get(_5,null,Rt.Optional)?.setUpPreloading(),e.get(b5,null,Rt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var T5=new Pe("",{factory:()=>new Er}),Rk=new Pe("",{providedIn:"root",factory:()=>1});function lye(){return zy(2,[{provide:Rk,useValue:0},{provide:Mb,multi:!0,deps:[pi],useFactory:t=>{let n=t.get(i6,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let o=t.get(Co),i=t.get(T5);v5(o,()=>{r(!0)}),t.get(Ak).afterPreactivation=()=>(r(!0),i.closed?ot(void 0):i),o.initialNavigation()}))}}])}function fye(){return zy(3,[{provide:Mb,multi:!0,useFactory:()=>{let t=de(Co);return()=>{t.setUpLocationChangeListener()}}},{provide:Rk,useValue:2}])}var _5=new Pe("");function dye(e){return zy(0,[{provide:_5,useExisting:uye},{provide:pw,useExisting:e}])}function pye(){return zy(8,[F6,{provide:hw,useExisting:F6}])}function hye(e){let t=[{provide:h5,useValue:Zge},{provide:m5,useValue:xe({skipNextTransition:!!e?.skipInitialTransition},e)}];return zy(9,t)}var V6=new Pe("ROUTER_FORROOT_GUARD"),mye=[Zp,{provide:Vy,useClass:oh},Co,Uy,{provide:rl,useFactory:E5,deps:[Co]},Dk,[]],gw=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[mye,[],{provide:$y,multi:!0,useValue:n},{provide:V6,useFactory:xye,deps:[[Co,new ub,new kA]]},r?.errorHandler?{provide:g5,useValue:r.errorHandler}:[],{provide:jy,useValue:r||{}},r?.useHash?yye():vye(),gye(),r?.preloadingStrategy?dye(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?bye(r):[],r?.bindToComponentInputs?pye().\u0275providers:[],r?.enableViewTransitions?hye().\u0275providers:[],wye()]}}static forChild(n){return{ngModule:e,providers:[{provide:$y,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||e)(xt(V6,8))};static \u0275mod=Yc({type:e});static \u0275inj=zc({})}return e})();function gye(){return{provide:b5,useFactory:()=>{let e=de(u6),t=de(Zn),n=de(jy),r=de(Ak),o=de(Vy);return n.scrollOffset&&e.setOffset(n.scrollOffset),new cye(o,r,e,t,n)}}}function yye(){return{provide:Wu,useClass:a6}}function vye(){return{provide:Wu,useClass:PR}}function xye(e){return"guarded"}function bye(e){return[e.initialNavigation==="disabled"?fye().\u0275providers:[],e.initialNavigation==="enabledBlocking"?lye().\u0275providers:[]]}var B6=new Pe("");function wye(){return[{provide:B6,useFactory:C5},{provide:Zc,multi:!0,useExisting:B6}]}var O5=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(ht(Za),ht(hi))};static \u0275dir=Zi({type:e})}return e})(),Eye=(()=>{class e extends O5{static \u0275fac=(()=>{let n;return function(o){return(n||(n=py(e)))(o||e)}})();static \u0275dir=Zi({type:e,features:[Yp]})}return e})(),M5=new Pe("");var Cye={provide:M5,useExisting:uy(()=>Ew),multi:!0};function Tye(){let e=Hu()?Hu().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var _ye=new Pe(""),Ew=(()=>{class e extends O5{_compositionMode;_composing=!1;constructor(n,r,o){super(n,r),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!Tye())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(ht(Za),ht(hi),ht(_ye,8))};static \u0275dir=Zi({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&io("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[IR([Cye]),Yp]})}return e})();var Iye=new Pe(""),Sye=new Pe("");function F5(e){return e!=null}function P5(e){return kf(e)?Mn(e):e}function $5(e){let t={};return e.forEach(n=>{t=n!=null?xe(xe({},t),n):t}),Object.keys(t).length===0?null:t}function L5(e,t){return t.map(n=>n(e))}function Dye(e){return!e.validate}function V5(e){return e.map(t=>Dye(t)?t:n=>t.validate(n))}function Nye(e){if(!e)return null;let t=e.filter(F5);return t.length==0?null:function(n){return $5(L5(n,t))}}function B5(e){return e!=null?Nye(V5(e)):null}function Aye(e){if(!e)return null;let t=e.filter(F5);return t.length==0?null:function(n){let r=L5(n,t).map(P5);return JD(r).pipe(vt($5))}}function U5(e){return e!=null?Aye(V5(e)):null}function I5(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Rye(e){return e._rawValidators}function kye(e){return e._rawAsyncValidators}function kk(e){return e?Array.isArray(e)?e:[e]:[]}function xw(e,t){return Array.isArray(e)?e.includes(t):e===t}function S5(e,t){let n=kk(t);return kk(e).forEach(o=>{xw(n,o)||n.push(o)}),n}function D5(e,t){return kk(t).filter(n=>!xw(e,n))}var bw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=B5(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=U5(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Ok=class extends bw{name;get formDirective(){return null}get path(){return null}},Xy=class extends bw{_parent=null;name=null;valueAccessor=null},Mk=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Oye={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},vLe=Tt(xe({},Oye),{"[class.ng-submitted]":"isSubmitted"}),G5=(()=>{class e extends Mk{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(ht(Xy,2))};static \u0275dir=Zi({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Qi("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[Yp]})}return e})();var Hy="VALID",vw="INVALID",ch="PENDING",Wy="DISABLED",fh=class{},ww=class extends fh{value;source;constructor(t,n){super(),this.value=t,this.source=n}},qy=class extends fh{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Ky=class extends fh{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},lh=class extends fh{status;source;constructor(t,n){super(),this.status=t,this.source=n}};function Mye(e){return(Cw(e)?e.validators:e)||null}function Fye(e){return Array.isArray(e)?B5(e):e||null}function Pye(e,t){return(Cw(t)?t.asyncValidators:e)||null}function $ye(e){return Array.isArray(e)?U5(e):e||null}function Cw(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var Fk=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return el(this.statusReactive)}set status(t){el(()=>this.statusReactive.set(t))}_status=Bb(()=>this.statusReactive());statusReactive=kb(void 0);get valid(){return this.status===Hy}get invalid(){return this.status===vw}get pending(){return this.status==ch}get disabled(){return this.status===Wy}get enabled(){return this.status!==Wy}errors;get pristine(){return el(this.pristineReactive)}set pristine(t){el(()=>this.pristineReactive.set(t))}_pristine=Bb(()=>this.pristineReactive());pristineReactive=kb(!0);get dirty(){return!this.pristine}get touched(){return el(this.touchedReactive)}set touched(t){el(()=>this.touchedReactive.set(t))}_touched=Bb(()=>this.touchedReactive());touchedReactive=kb(!1);get untouched(){return!this.touched}_events=new Er;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(S5(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(S5(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(D5(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(D5(t,this._rawAsyncValidators))}hasValidator(t){return xw(this._rawValidators,t)}hasAsyncValidator(t){return xw(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Tt(xe({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Ky(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new Ky(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Tt(xe({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new qy(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new qy(!0,r))}markAsPending(t={}){this.status=ch;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new lh(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Tt(xe({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Wy,this.errors=null,this._forEachChild(o=>{o.disable(Tt(xe({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ww(this.value,r)),this._events.next(new lh(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Tt(xe({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Hy,this._forEachChild(r=>{r.enable(Tt(xe({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Tt(xe({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hy||this.status===ch)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ww(this.value,n)),this._events.next(new lh(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Tt(xe({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wy:Hy}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=ch,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=P5(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,o)=>r&&r._find(o),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new lh(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new ar,this.statusChanges=new ar}_calculateStatus(){return this._allControlsDisabled()?Wy:this.errors?vw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ch)?ch:this._anyControlsHaveStatus(vw)?vw:Hy}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),o&&this._events.next(new qy(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Ky(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Cw(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Fye(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=$ye(this._rawAsyncValidators)}};var j5=new Pe("CallSetDisabledState",{providedIn:"root",factory:()=>Pk}),Pk="always";function Lye(e,t){return[...t.path,e]}function Vye(e,t,n=Pk){Uye(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),Gye(e,t),zye(e,t),jye(e,t),Bye(e,t)}function N5(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function Bye(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Uye(e,t){let n=Rye(e);t.validator!==null?e.setValidators(I5(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=kye(e);t.asyncValidator!==null?e.setAsyncValidators(I5(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let o=()=>e.updateValueAndValidity();N5(t._rawValidators,o),N5(t._rawAsyncValidators,o)}function Gye(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&z5(e,t)})}function jye(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&z5(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function z5(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function zye(e,t){let n=(r,o)=>{t.valueAccessor.writeValue(r),o&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function Hye(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function Wye(e){return Object.getPrototypeOf(e.constructor)===Eye}function qye(e,t){if(!t)return null;Array.isArray(t);let n,r,o;return t.forEach(i=>{i.constructor===Ew?n=i:Wye(i)?r=i:o=i}),o||r||n||null}function A5(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function R5(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var Kye=class extends Fk{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(Mye(n),Pye(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cw(n)&&(n.nonNullable||n.initialValueIsDefault)&&(R5(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){A5(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){A5(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){R5(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Xye={provide:Xy,useExisting:uy(()=>$k)},k5=Promise.resolve(),$k=(()=>{class e extends Xy{_changeDetectorRef;callSetDisabledState;control=new Kye;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ar;constructor(n,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=qye(this,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),Hye(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Vye(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){k5.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,o=r!==0&&Ff(r);k5.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?Lye(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(ht(Ok,9),ht(Iye,10),ht(Sye,10),ht(M5,10),ht(Jc,8),ht(j5,8))};static \u0275dir=Zi({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[IR([Xye]),Yp,Uu]})}return e})();var Yye=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Yc({type:e});static \u0275inj=zc({})}return e})();var H5=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:j5,useValue:n.callSetDisabledState??Pk}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Yc({type:e});static \u0275inj=zc({imports:[Yye]})}return e})();var Tw=class e{constructor(t){this.router=t}name;enterGame(){this.router.navigate(["/hello-friend"])}static \u0275fac=function(n){return new(n||e)(ht(Co))};static \u0275cmp=Cr({type:e,selectors:[["app-welcome"]],decls:8,vars:4,consts:[[1,"glass-container"],["type","text","placeholder","Name",3,"ngModelChange","ngModel"],[3,"click","disabled"]],template:function(n,r){n&1&&(ct(0,"div",0)(1,"h1"),$t(2,"Welcome"),lt(),ct(3,"p"),$t(4,"Welcome to join the 2024 IDPwD event. Please enter your name to continue."),lt(),ct(5,"input",1),_R("ngModelChange",function(i){return zU(r.name,i)||(r.name=i),i}),lt(),ct(6,"button",2),io("click",function(){return r.enterGame()}),$t(7,"Continue"),lt()()),n&2&&(gn(5),TR("ngModel",r.name),gn(),Qi("disabled",!(r.name!=null&&r.name.length)),Fn("disabled",!(r.name!=null&&r.name.length)))},dependencies:[H5,Ew,G5,$k],encapsulation:2})};var Bf=class e{static ANCHOR_POINTS=[[0,0,0],[0,.1,0],[-.1,0,0],[-.1,-.1,0]];static fingerLookupIndices={thumb:[0,1,2,3,4],indexFinger:[0,5,6,7,8],middleFinger:[0,9,10,11,12],ringFinger:[0,13,14,15,16],pinky:[0,17,18,19,20]};static connections=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20]];static isHandSimilar(t,n,r=.005){if(t.handedness!==n.handedness)return!1;let o=e.calculateKeyPointsDifference(t.keypoints3D??[],n.keypoints3D??[]);return console.log("MAE",o),o<r}static calculateKeyPointsDifference(t,n){let r=[];return t.forEach((i,s)=>{r.push(this.calculatePointDIfference(i,n[s]))}),this.removeOutliers(r),r.reduce((i,s)=>i+s,0)/r.length}static calculatePointDIfference(t,n){let r=t.x&&n.x?Math.abs(t.x-n.x):0,o=t.y&&n.y?Math.abs(t.y-n.y):0,i=t.z&&n.z?Math.abs(t.z-n.z):0;return(r+o+i)/3}static removeOutliers(t){let n=t.indexOf(Math.max(...t));t.splice(n,1);let r=t.indexOf(Math.min(...t));t.splice(r,1)}static convertHandLandmarkResultToHand(t,n,r,o=!0){let i=[],{handedness:s,landmarks:a,worldLandmarks:u}=t,c=s.find(d=>d?.[0]?.categoryName==="Left"),f=s.find(d=>d?.[0]?.categoryName==="Right");if(c?.length){let d=c[0],h=d.index<t.landmarks.length?d.index:t.landmarks.length-1;i.push(this.convertHandnessToHand(d,t.landmarks[h],n,r,o))}if(f?.length){let d=f[0],h=d.index<t.landmarks.length?d.index:t.landmarks.length-1;i.push(this.convertHandnessToHand(d,t.landmarks[h],n,r,o))}return i}static convertHandnessToHand(t,n,r,o,i=!0){let s=i?n.map(u=>({x:(1-u.x)*r,y:u.y*o})):n.map(u=>({x:u.x*r,y:u.y*o})),a=i?n.map(u=>Tt(xe({},u),{x:1-u.x,y:u.y})):n;return{handedness:t.categoryName,score:t.score,keypoints:s,keypoints3D:a}}static drawHandLandmarks(t,n,r=!1){let o=t.getContext("2d");if(!o)return;let{width:i,height:s}=t;for(let u=0;u<n.length;u++){let c=r?n[u].x*i:n[u].x,f=r?n[u].y*s:n[u].y;this.drawPoint(o,c,f,2,"#ff0000")}let a=Object.keys(e.fingerLookupIndices);for(let u=0;u<a.length;u++){let c=a[u],f=e.fingerLookupIndices[c].map(d=>n[d]);this.drawPath(t,f,!1,"#0014dc",r)}}static drawPoint(t,n,r,o,i){t.beginPath(),t.arc(n,r,o,0,2*Math.PI),t.fillStyle=i,t.fill()}static drawPath(t,n,r,o,i=!1){let s=t.getContext("2d");if(!s)return;s.strokeStyle=o||"#000000";let a=new Path2D,{width:u,height:c}=t,f=i?n[0].x*u:n[0].x,d=i?n[0].y*c:n[0].y;a.moveTo(f,d);for(let h=1;h<n.length;h++){let{x:m,y:v}=n[h];m=i?m*u:m,v=i?v*c:v,a.lineTo(m,v)}r&&a.closePath(),s.stroke(a)}static isContinuousGesture(t,n){if(t?.length!==n?.length)return!1;let r=!0;for(let o=0;o<t.length;o++)r&&=t[o].handedness===n[o].handedness,r&&=!!t[o].handpose,r&&=t[o].handpose===n[o].handpose;return r}static getMove3DVector(t,n){let r=t.keypoints3D?.[4],o=n.keypoints3D?.[4];if(!r||!o)return[0,0,0];let i=(o?.x||0)-(r?.x||0),s=(o?.y||0)-(r?.y||0),a=(o?.z||0)-(r?.z||0);return console.log(i,s,a),[i,s,a]}static getMove2DVector(t,n){let r=t.keypoints[4],o=n.keypoints[4],i=o.x-r.x,s=o.y-r.y;return[i,s]}};var vee=sa(W5()),xee=sa(sl());var Ms=sa(sl());var Qy=new Ms.GestureDescription("point_to_other");for(let e of[Ms.Finger.Thumb,Ms.Finger.Middle,Ms.Finger.Ring,Ms.Finger.Pinky])Qy.addCurl(e,Ms.FingerCurl.FullCurl,1),Qy.addCurl(e,Ms.FingerCurl.HalfCurl,1);Qy.addCurl(Ms.Finger.Index,Ms.FingerCurl.NoCurl,1);var so=sa(sl());var ul=new so.GestureDescription("thumbs_up");ul.addCurl(so.Finger.Thumb,so.FingerCurl.NoCurl,1);ul.addDirection(so.Finger.Thumb,so.FingerDirection.VerticalUp,1);ul.addCurl(so.Finger.Index,so.FingerCurl.FullCurl,1);ul.addCurl(so.Finger.Middle,so.FingerCurl.FullCurl,1);ul.addCurl(so.Finger.Ring,so.FingerCurl.FullCurl,1);ul.addCurl(so.Finger.Pinky,so.FingerCurl.FullCurl,1);var yr=sa(sl());var Ja=new yr.GestureDescription("half_thumb_up");Ja.addCurl(yr.Finger.Thumb,yr.FingerCurl.NoCurl,.8);Ja.addCurl(yr.Finger.Thumb,yr.FingerCurl.HalfCurl,1);Ja.addCurl(yr.Finger.Thumb,yr.FingerCurl.FullCurl,1);Ja.addDirection(yr.Finger.Thumb,yr.FingerDirection.VerticalUp,1);Ja.addCurl(yr.Finger.Index,yr.FingerCurl.FullCurl,1);Ja.addCurl(yr.Finger.Middle,yr.FingerCurl.FullCurl,1);Ja.addCurl(yr.Finger.Ring,yr.FingerCurl.FullCurl,1);Ja.addCurl(yr.Finger.Pinky,yr.FingerCurl.FullCurl,1);var Wr=sa(sl());var Xu=new Wr.GestureDescription("two_fingers");Xu.addCurl(Wr.Finger.Thumb,Wr.FingerCurl.NoCurl,.7);Xu.addCurl(Wr.Finger.Thumb,Wr.FingerCurl.HalfCurl,.7);Xu.addCurl(Wr.Finger.Thumb,Wr.FingerCurl.FullCurl,.2);Xu.addCurl(Wr.Finger.Index,Wr.FingerCurl.NoCurl,1);Xu.addCurl(Wr.Finger.Middle,Wr.FingerCurl.NoCurl,1);Xu.addCurl(Wr.Finger.Ring,Wr.FingerCurl.FullCurl,1);Xu.addCurl(Wr.Finger.Pinky,Wr.FingerCurl.FullCurl,1);var os=sa(sl());var Jy=new os.GestureDescription("point_diagonal_up");for(let e of[os.Finger.Thumb,os.Finger.Index,os.Finger.Middle,os.Finger.Ring,os.Finger.Pinky])Jy.addCurl(e,os.FingerCurl.NoCurl,1),Jy.addDirection(e,os.FingerDirection.DiagonalUpRight,.8),Jy.addDirection(e,os.FingerDirection.DiagonalUpLeft,.8);var is=sa(sl());var ev=new is.GestureDescription("point_diagonal_down");for(let e of[is.Finger.Thumb,is.Finger.Index,is.Finger.Middle,is.Finger.Ring,is.Finger.Pinky])ev.addCurl(e,is.FingerCurl.NoCurl,1),ev.addDirection(e,is.FingerDirection.DiagonalDownRight,1),ev.addDirection(e,is.FingerDirection.DiagonalDownLeft,1);var Wf=typeof self<"u"?self:{};function Qk(e,t){e:{for(var n=["CLOSURE_FLAGS"],r=Wf,o=0;o<n.length;o++)if((r=r[n[o]])==null){n=null;break e}n=r}return(e=n&&n[e])!=null?e:t}function Uf(){throw Error("Invalid UTF8")}function q5(e,t){return t=String.fromCharCode.apply(null,t),e==null?t:e+t}var _w,Vk,Qye=typeof TextDecoder<"u",Jye,eve=typeof TextEncoder<"u";function sG(e){if(eve)e=(Jye||=new TextEncoder).encode(e);else{let n=0,r=new Uint8Array(3*e.length);for(let o=0;o<e.length;o++){var t=e.charCodeAt(o);if(t<128)r[n++]=t;else{if(t<2048)r[n++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&o<e.length){let i=e.charCodeAt(++o);if(i>=56320&&i<=57343){t=1024*(t-55296)+i-56320+65536,r[n++]=t>>18|240,r[n++]=t>>12&63|128,r[n++]=t>>6&63|128,r[n++]=63&t|128;continue}o--}t=65533}r[n++]=t>>12|224,r[n++]=t>>6&63|128}r[n++]=63&t|128}}e=n===r.length?r:r.subarray(0,n)}return e}var dv,aG=Qk(610401301,!1),tve=Qk(653718497,Qk(1,!0)),K5=Wf.navigator;function Jk(e){return!!aG&&!!dv&&dv.brands.some(({brand:t})=>t&&t.indexOf(e)!=-1)}function Ls(e){var t;return(t=Wf.navigator)&&(t=t.userAgent)||(t=""),t.indexOf(e)!=-1}function fl(){return!!aG&&!!dv&&dv.brands.length>0}function Bk(){return fl()?Jk("Chromium"):(Ls("Chrome")||Ls("CriOS"))&&!(!fl()&&Ls("Edge"))||Ls("Silk")}function xO(e){return xO[" "](e),e}dv=K5&&K5.userAgentData||null,xO[" "]=function(){};var nve=!fl()&&(Ls("Trident")||Ls("MSIE"));!Ls("Android")||Bk(),Bk(),Ls("Safari")&&(Bk()||!fl()&&Ls("Coast")||!fl()&&Ls("Opera")||!fl()&&Ls("Edge")||(fl()?Jk("Microsoft Edge"):Ls("Edg/"))||fl()&&Jk("Opera"));var uG={},iv=null;function rve(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):"=.".indexOf(e[t-1])!=-1&&(n="=.".indexOf(e[t-2])!=-1?n-2:n-1);var r=new Uint8Array(n),o=0;return function(i,s){function a(m){for(;u<i.length;){var v=i.charAt(u++),x=iv[v];if(x!=null)return x;if(!/^[\s\xa0]*$/.test(v))throw Error("Unknown base64 encoding at char: "+v)}return m}cG();for(var u=0;;){var c=a(-1),f=a(0),d=a(64),h=a(64);if(h===64&&c===-1)break;s(c<<2|f>>4),d!=64&&(s(f<<4&240|d>>2),h!=64&&s(d<<6&192|h))}}(e,function(i){r[o++]=i}),o!==n?r.subarray(0,o):r}function cG(){if(!iv){iv={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++){var r=e.concat(t[n].split(""));uG[n]=r;for(var o=0;o<r.length;o++){var i=r[o];iv[i]===void 0&&(iv[i]=o)}}}}var lG=typeof Uint8Array<"u",fG=!nve&&typeof btoa=="function";function X5(e){if(!fG){var t;t===void 0&&(t=0),cG(),t=uG[t];var n=Array(Math.floor(e.length/3)),r=t[64]||"";let u=0,c=0;for(;u<e.length-2;u+=3){var o=e[u],i=e[u+1],s=e[u+2],a=t[o>>2];o=t[(3&o)<<4|i>>4],i=t[(15&i)<<2|s>>6],s=t[63&s],n[c++]=a+o+i+s}switch(a=0,s=r,e.length-u){case 2:s=t[(15&(a=e[u+1]))<<2]||r;case 1:e=e[u],n[c]=t[e>>2]+t[(3&e)<<4|a>>4]+s+r}return n.join("")}for(t="",n=0,r=e.length-10240;n<r;)t+=String.fromCharCode.apply(null,e.subarray(n,n+=10240));return t+=String.fromCharCode.apply(null,n?e.subarray(n):e),btoa(t)}var Y5=/[-_.]/g,ove={"-":"+",_:"/",".":"="};function ive(e){return ove[e]||""}function dG(e){if(!fG)return rve(e);Y5.test(e)&&(e=e.replace(Y5,ive)),e=atob(e);let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function vv(e){return lG&&e!=null&&e instanceof Uint8Array}var vh={},sve;function pG(e){if(e!==vh)throw Error("illegal external caller")}function qf(){return sve||=new ec(null,vh)}function bO(e){pG(vh);var t=e.g;return(t=t==null||vv(t)?t:typeof t=="string"?dG(t):null)==null?t:e.g=t}var ec=class{constructor(e,t){if(pG(t),this.g=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}h(){return new Uint8Array(bO(this)||0)}};function hG(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}var ave;function xv(){let e=Error();hG(e,"incident"),function(t){Wf.setTimeout(()=>{throw t},0)}(e)}function eO(e){return hG(e=Error(e),"warning"),e}function wO(){return typeof BigInt=="function"}function cs(e){return Array.prototype.slice.call(e)}var Sh=typeof Symbol=="function"&&typeof Symbol()=="symbol";function bv(e){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():e}var wv=bv(),Z5=bv("0di"),Uk=bv("2ex"),tv=bv("1oa"),Q5=bv("0dg"),Xw=Sh?(e,t)=>{e[wv]|=t}:(e,t)=>{e.G!==void 0?e.G|=t:Object.defineProperties(e,{G:{value:t,configurable:!0,writable:!0,enumerable:!1}})},Pw=Sh?(e,t)=>{e[wv]&=~t}:(e,t)=>{e.G!==void 0&&(e.G&=~t)},er=Sh?e=>0|e[wv]:e=>0|e.G,dn=Sh?e=>e[wv]:e=>e.G,Jn=Sh?(e,t)=>{e[wv]=t}:(e,t)=>{e.G!==void 0?e.G=t:Object.defineProperties(e,{G:{value:t,configurable:!0,writable:!0,enumerable:!1}})};function Xf(e){return Xw(e,34),e}function uve(e,t){Jn(t,-30975&(0|e))}function tO(e,t){Jn(t,-30941&(34|e))}var EO,Ev={},mG={};function J5(e){return!(!e||typeof e!="object"||e.Ja!==mG)}function Yw(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function CO(e,t,n){if(e!=null){if(typeof e=="string")e=e?new ec(e,vh):qf();else if(e.constructor!==ec)if(vv(e))e=e.length?new ec(n?e:new Uint8Array(e),vh):qf();else{if(!t)throw Error();e=void 0}}return e}function $w(e){return!(!Array.isArray(e)||e.length)&&!!(1&er(e))}var e8=[];function nc(e){if(2&e)throw Error()}Jn(e8,55),EO=Object.freeze(e8);var Lw=class e{constructor(t,n,r){this.l=0,this.g=t,this.h=n,this.m=r}next(){if(this.l<this.g.length){let t=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,t):t}}return{done:!0,value:void 0}}[Symbol.iterator](){return new e(this.g,this.h,this.m)}},pl;function gG(e,t){(t=pl?t[pl]:void 0)&&(e[pl]=cs(t))}var cve=Object.freeze({}),lve=Object.freeze({}),fve=Object.freeze({});function Zw(e){return e.Qa=!0,e}var dve=Zw(e=>typeof e=="number"),t8=Zw(e=>typeof e=="string"),pve=Zw(e=>typeof e=="boolean"),Qw=typeof Wf.BigInt=="function"&&typeof Wf.BigInt(0)=="bigint",nO=Zw(e=>Qw?e>=mve&&e<=yve:e[0]==="-"?n8(e,hve):n8(e,gve)),hve=Number.MIN_SAFE_INTEGER.toString(),mve=Qw?BigInt(Number.MIN_SAFE_INTEGER):void 0,gve=Number.MAX_SAFE_INTEGER.toString(),yve=Qw?BigInt(Number.MAX_SAFE_INTEGER):void 0;function n8(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let n=0;n<e.length;n++){let r=e[n],o=t[n];if(r>o)return!1;if(r<o)return!0}}var vve=typeof Uint8Array.prototype.slice=="function",yG,_n=0,cr=0;function r8(e){let t=e>>>0;_n=t,cr=(e-t)/4294967296>>>0}function xh(e){if(e<0){r8(-e);let[t,n]=SO(_n,cr);_n=t>>>0,cr=n>>>0}else r8(e)}function TO(e){let t=yG||=new DataView(new ArrayBuffer(8));t.setFloat32(0,+e,!0),cr=0,_n=t.getUint32(0,!0)}function _O(e,t){return 4294967296*t+(e>>>0)}function IO(e,t){let n=2147483648&t;return n&&(t=~t>>>0,(e=1+~e>>>0)==0&&(t=t+1>>>0)),e=_O(e,t),n?-e:e}function Vw(e,t){if(e>>>=0,(t>>>=0)<=2097151)var n=""+(4294967296*t+e);else wO()?n=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(n=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),n+=8147497*t,t*=2,e>=1e7&&(n+=e/1e7>>>0,e%=1e7),n>=1e7&&(t+=n/1e7>>>0,n%=1e7),n=t+o8(n)+o8(e));return n}function o8(e){return e=String(e),"0000000".slice(e.length)+e}function Jw(e){if(e.length<16)xh(Number(e));else if(wO())e=BigInt(e),_n=Number(e&BigInt(4294967295))>>>0,cr=Number(e>>BigInt(32)&BigInt(4294967295));else{let t=+(e[0]==="-");cr=_n=0;let n=e.length;for(let r=t,o=(n-t)%6+t;o<=n;r=o,o+=6){let i=Number(e.slice(r,o));cr*=1e6,_n=1e6*_n+i,_n>=4294967296&&(cr+=Math.trunc(_n/4294967296),cr>>>=0,_n>>>=0)}if(t){let[r,o]=SO(_n,cr);_n=r,cr=o}}}function SO(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function wl(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function vG(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}var xve=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function eE(e){let t=typeof e;switch(t){case"bigint":return!0;case"number":return Number.isFinite(e)}return t==="string"&&xve.test(e)}function Dh(e){if(e==null)return e;if(typeof e=="string"){if(!e)return;e=+e}return typeof e=="number"&&Number.isFinite(e)?0|e:void 0}function bve(e){if(e==null)return e;if(typeof e=="string"){if(!e)return;e=+e}return typeof e=="number"&&Number.isFinite(e)?e>>>0:void 0}function i8(e){return e[0]!=="-"&&(e.length<20||e.length===20&&Number(e.substring(0,6))<184467)}function DO(e){return e=Math.trunc(e),Number.isSafeInteger(e)||(xh(e),e=IO(_n,cr)),e}function NO(e){var t=Math.trunc(Number(e));if(Number.isSafeInteger(t))return String(t);if((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),!(e[0]==="-"?e.length<20||e.length===20&&Number(e.substring(0,7))>-922337:e.length<19||e.length===19&&Number(e.substring(0,6))<922337))if(Jw(e),e=_n,2147483648&(t=cr))if(wO())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{let[n,r]=SO(e,t);e="-"+Vw(n,r)}else e=Vw(e,t);return e}function Bw(e){return e==null?e:typeof e=="bigint"?(nO(e)?e=Number(e):(e=BigInt.asIntN(64,e),e=nO(e)?Number(e):String(e)),e):eE(e)?typeof e=="number"?DO(e):NO(e):void 0}function wve(e){if(e==null)return e;var t=typeof e;if(t==="bigint")return String(BigInt.asUintN(64,e));if(eE(e)){if(t==="string")return t=Math.trunc(Number(e)),Number.isSafeInteger(t)&&t>=0?e=String(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),i8(e)||(Jw(e),e=Vw(_n,cr))),e;if(t==="number")return(e=Math.trunc(e))>=0&&Number.isSafeInteger(e)?e:function(n){if(n<0){xh(n);let r=Vw(_n,cr);return n=Number(r),Number.isSafeInteger(n)?n:r}return i8(String(n))?n:(xh(n),_O(_n,cr))}(e)}}function xG(e){if(typeof e!="string")throw Error();return e}function Nh(e){if(e!=null&&typeof e!="string")throw Error();return e}function hl(e){return e==null||typeof e=="string"?e:void 0}function AO(e,t,n,r){if(e!=null&&typeof e=="object"&&e.X===Ev)return e;if(!Array.isArray(e))return n?2&r?(e=t[Z5])?t=e:(Xf((e=new t).u),t=t[Z5]=e):t=new t:t=void 0,t;let o=n=er(e);return o===0&&(o|=32&r),o|=2&r,o!==n&&Jn(e,o),new t(e)}function Eve(e,t,n){if(t)e:{if(!eE(t=e))throw eO("int64");switch(typeof t){case"string":t=NO(t);break e;case"bigint":if(e=t=BigInt.asIntN(64,t),t8(e)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(e))throw Error(String(e))}else if(dve(e)&&!Number.isSafeInteger(e))throw Error(String(e));t=Qw?BigInt(t):pve(t)?t?"1":"0":t8(t)?t.trim()||"0":String(t);break e;default:t=DO(t)}}else t=Bw(e);return typeof(n=(e=t)==null?n?0:void 0:e)=="string"&&(t=+n,Number.isSafeInteger(t))?t:n}function bG(e){if(nv===void 0&&(nv=typeof Proxy=="function"?TG(Proxy):null),!nv||!CG())return e;let t=bh?.get(e);return t||(Math.random()>.01?e:(function(n){if(Gk===void 0){let r=new nv([],{});Gk=Array.prototype.concat.call([],r).length===1}Gk&&typeof Symbol=="function"&&Symbol.isConcatSpreadable&&(n[Symbol.isConcatSpreadable]=!0)}(e),t=new nv(e,{set:(n,r,o)=>(xv(),n[r]=o,!0)}),function(n,r){(bh||=new zf).set(n,r),(wG||=new zf).set(r,n)}(e,t),t))}var bh,wG,nv,zf,Gk,pv,Uw,EG,Cve;function CG(){return zf===void 0&&(zf=typeof WeakMap=="function"?TG(WeakMap):null),zf}function TG(e){try{return e.toString().indexOf("[native code]")!==-1?e:null}catch{return null}}function RO(e,t,n){if(CG()){if(pv?.get(t)?.get(e)){if(n)return}else if(Math.random()>.01)return;var r=e.length;n={length:r};for(var o=0;o<Math.min(r,10);o++){if(r<=10)var i=o;else{i=r/10;let s=Math.floor(o*i);i=s+Math.floor(Math.random()*(Math.floor((o+1)*i)-s))}n[i]=e[i]}_G(e,n)?((o=(r=pv||=new zf).get(t))||(o=new zf,r.set(t,o)),o.set(e,n)):(xv(),hv(e,t))}}function Gw(e,t){let n=pv?.get(t)?.get(e);n&&!_G(e,n)&&(xv(),hv(e,t))}function _G(e,t){if(e.length!==t.length)return!1;for(let o in t){var n,r=Number(o);if((n=Number.isInteger(r))&&(n=e[r],r=t[r],n=!(Number.isNaN(n)?Number.isNaN(r):n===r)),n)return!1}return!0}function tE(e){if(e&&pv?.has(e)){var t=e.u;if(t)for(let n=0;n<t.length;n++){let r=t[n];if(n===t.length-1&&Yw(r))for(let o in r){let i=r[o];Array.isArray(i)&&Gw(i,e)}else Array.isArray(r)&&Gw(r,e)}}}function hv(e,t){pv?.get(t)?.delete(e)}function ml(e,t,n){return e=IG(e,t[0],t[1],n?1:2),t!==EG&&n&&Xw(e,16384),e}function IG(e,t,n,r){if(r=r??0,e==null&&(e=Uw),Uw=void 0,e==null){var o=96;n?(e=[n],o|=512):e=[],t&&(o=-33521665&o|(1023&t)<<15)}else{if(!Array.isArray(e))throw Error("narr");if(2048&(o=er(e)))throw Error("farr");if(64&o)return e;if(r===1||r===2||(o|=64),n&&(o|=512,n!==e[0]))throw Error("mid");e:{if(r=(n=e).length){let i=r-1;if(Yw(n[i])){if((t=i-(+!!(512&(o|=256))-1))>=1024)throw Error("pvtlmt");o=-33521665&o|(1023&t)<<15;break e}}if(t){if((t=Math.max(t,r-(+!!(512&o)-1)))>1024)throw Error("spvt");o=-33521665&o|(1023&t)<<15}}}return Jn(e,o),e}var Tve={},_ve=function(){try{return xO(new class extends Map{constructor(){super()}}),!1}catch{return!0}}(),av=class{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,n){return this.g.set(t,n),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,n){return this.g.forEach(t,n)}[Symbol.iterator](){return this.entries()}},Ive=_ve?(Object.setPrototypeOf(av.prototype,Map.prototype),Object.defineProperties(av.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),av):class extends Map{constructor(){super()}};function s8(e){return e}function jk(e){if(2&e.M)throw Error("Cannot mutate an immutable Map")}var Bs=class extends Ive{constructor(e,t,n=s8,r=s8){super();let o=er(e);o|=64,Jn(e,o),this.M=o,this.T=t,this.S=n,this.Z=this.T?Sve:r;for(let i=0;i<e.length;i++){let s=e[i],a=n(s[0],!1,!0),u=s[1];t?u===void 0&&(u=null):u=r(s[1],!1,!0,void 0,void 0,o),super.set(a,u)}}pa(e=a8){if(this.size!==0)return this.Y(e)}Y(e=a8){let t=[],n=super.entries();for(var r;!(r=n.next()).done;)(r=r.value)[0]=e(r[0]),r[1]=e(r[1]),t.push(r);return t}clear(){jk(this),super.clear()}delete(e){return jk(this),super.delete(this.S(e,!0,!1))}entries(){var e=this.oa();return new Lw(e,Dve,this)}keys(){return this.Ia()}values(){var e=this.oa();return new Lw(e,Bs.prototype.get,this)}forEach(e,t){super.forEach((n,r)=>{e.call(t,this.get(r),r,this)})}set(e,t){return jk(this),(e=this.S(e,!0,!1))==null?this:t==null?(super.delete(e),this):super.set(e,this.Z(t,!0,!0,this.T,!1,this.M))}Oa(e){let t=this.S(e[0],!1,!0);e=e[1],e=this.T?e===void 0?null:e:this.Z(e,!1,!0,void 0,!1,this.M),super.set(t,e)}has(e){return super.has(this.S(e,!1,!1))}get(e){e=this.S(e,!1,!1);let t=super.get(e);if(t!==void 0){var n=this.T;return n?((n=this.Z(t,!1,!0,n,this.ta,this.M))!==t&&super.set(e,n),n):t}}oa(){return Array.from(super.keys())}Ia(){return super.keys()}[Symbol.iterator](){return this.entries()}};function Sve(e,t,n,r,o,i){return e=AO(e,r,n,i),o&&(e=rE(e)),e}function a8(e){return e}function Dve(e){return[e,this.get(e)]}var Nve;function u8(){return Nve||=new Bs(Xf([]),void 0,void 0,void 0,Tve)}function kO(e,t,n,r,o){if(e!=null){if(Array.isArray(e))e=$w(e)?void 0:o&&2&er(e)?e:nE(e,t,n,r!==void 0,o);else if(Yw(e)){let i={};for(let s in e)i[s]=kO(e[s],t,n,r,o);e=i}else e=t(e,r);return e}}function nE(e,t,n,r,o){let i=r||n?er(e):0;r=r?!!(32&i):void 0;let s=cs(e);for(let a=0;a<s.length;a++)s[a]=kO(s[a],t,n,r,o);return n&&(gG(s,e),n(i,s)),s}function Ave(e){return kO(e,OO,void 0,void 0,!1)}function OO(e){return e.X===Ev?e.toJSON():e instanceof Bs?e.pa(Ave):function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"bigint":return nO(t)?Number(t):String(t);case"boolean":return t?1:0;case"object":if(t)if(Array.isArray(t)){if($w(t))return}else{if(vv(t))return X5(t);if(t instanceof ec){let n=t.g;return n==null?"":typeof n=="string"?n:t.g=X5(n)}if(t instanceof Bs)return t.pa()}}return t}(e)}function rO(e,t,n=tO){if(e!=null){if(lG&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var r=er(e);return 2&r?e:(t&&=r===0||!!(32&r)&&!(64&r||!(16&r)),t?(Jn(e,-12293&(34|r)),e):nE(e,rO,4&r?tO:n,!0,!0))}return e.X===Ev?(n=e.u,e=2&(r=dn(n))?e:MO(e,n,r,!0)):e instanceof Bs&&!(2&e.M)&&(n=Xf(e.Y(rO)),e=new Bs(n,e.T,e.S,e.Z)),e}}function MO(e,t,n,r){return tE(e),e=e.constructor,Uw=t=SG(t,n,r),t=new e(t),Uw=void 0,t}function SG(e,t,n){let r=n||2&t?tO:uve,o=!!(32&t);return e=function(i,s,a){let u=cs(i);var c=u.length;let f=256&s?u[c-1]:void 0;for(c+=f?-1:0,s=512&s?1:0;s<c;s++)u[s]=a(u[s]);if(f){s=u[s]={};for(let d in f)s[d]=a(f[d])}return gG(u,i),u}(e,t,i=>rO(i,o,r)),Xw(e,32|(n?2:0)),e}function rE(e){let t=e.u,n=dn(t);return 2&n?MO(e,t,n,!1):e}function DG(e,t,n,r){return!(4&t)||n!=null&&(!r&&n===0&&(4096&t||8192&t)&&(e.constructor[Q5]=1+(0|e.constructor[Q5]))<5&&xv(),n!==0&&!(n&t))}function gl(e,t){return su(e=e.u,dn(e),t)}function c8(e,t,n,r){if(!((t=r+(+!!(512&t)-1))<0||t>=e.length||t>=n))return e[t]}function su(e,t,n,r){if(n===-1)return null;let o=t>>15&1023||536870912;if(!(n>=o)){var i=e.length;return r&&256&t&&(r=e[i-1][n])!=null?(c8(e,t,o,n)&&Uk!=null&&((t=(e=ave??={})[Uk]||0)>=4||(e[Uk]=t+1,xv())),r):c8(e,t,o,n)}return 256&t?e[e.length-1][n]:void 0}function An(e,t,n){let r=e.u,o=dn(r);return nc(o),Hn(r,o,t,n),e}function Hn(e,t,n,r){let o=t>>15&1023||536870912;if(n>=o){let i,s=t;if(256&t)i=e[e.length-1];else{if(r==null)return s;i=e[o+(+!!(512&t)-1)]={},s|=256}return i[n]=r,n<o&&(e[n+(+!!(512&t)-1)]=void 0),s!==t&&Jn(e,s),s}return e[n+(+!!(512&t)-1)]=r,256&t&&n in(e=e[e.length-1])&&delete e[n],t}function Ah(e,t,n,r,o){var i=2&t;o=su(e,t,n,o),Array.isArray(o)||(o=EO);let s=!(2&r);r=!(1&r);let a=!!(32&t),u=er(o);return u!==0||!a||i||s?1&u||(u|=1,Jn(o,u)):(u|=33,Jn(o,u)),i?(e=!1,2&u||(Xf(o),e=!!(4&u)),(r||e)&&Object.freeze(o)):(i=!!(2&u)||!!(2048&u),r&&i?(o=cs(o),i=1,a&&!s&&(i|=32),Jn(o,i),Hn(e,t,n,o)):s&&32&u&&!i&&Pw(o,32)),o}function Aw(e,t){e=e.u;let n=dn(e),r=su(e,n,t),o=wl(r);return o!=null&&o!==r&&Hn(e,n,t,o),o}function NG(e){e=e.u;let t=dn(e),n=su(e,t,1),r=CO(n,!0,!!(34&t));return r!=null&&r!==n&&Hn(e,t,1,r),r}function Gf(){return cve===void 0?2:5}function jf(e,t,n,r,o,i){let s=e.u,a=dn(s);r=2&a?1:r,i=!!i,o=AG(s,a,t,o);var u=er(o),c=o;if(Gw(c,e),r!==2&&r!==1||hv(c,e),DG(e,u,void 0,i)){4&u&&(o=cs(o),u=Kf(u,a),a=Hn(s,a,t,o));let d=c=0;for(;c<o.length;c++){let h=n(o[c]);h!=null&&(o[d++]=h)}d<c&&(o.length=d),u=-4097&(20|(u=RG(u,a))),Jn(o,u&=-8193),2&u&&Object.freeze(o)}let f;return r===1||r===4&&32&u?Qu(u)||(e=u,(u|=2)!==e&&Jn(o,u),Object.freeze(o)):(n=r===5&&(!!(32&u)||Qu(u)||!!bh?.get(o)),(r===2||n)&&Qu(u)&&(o=cs(o),u=wh(u=Kf(u,a),a,i),Jn(o,u),a=Hn(s,a,t,o)),Qu(u)||(t=u,(u=wh(u,a,i))!==t&&Jn(o,u)),n?(f=bG(o),RO(o,e,!0)):r!==2||i||bh?.delete(o)),f||o}function AG(e,t,n,r){return e=su(e,t,n,r),Array.isArray(e)?e:EO}function RG(e,t){return e===0&&(e=Kf(e,t)),1|e}function Qu(e){return!!(2&e)&&!!(4&e)||!!(2048&e)}function kG(e){e=cs(e);for(let t=0;t<e.length;t++){let n=e[t]=cs(e[t]);Array.isArray(n[1])&&(n[1]=Xf(n[1]))}return e}function oO(e,t,n,r){e=e.u;let o=dn(e);nc(o),Hn(e,o,t,(r==="0"?Number(n)===0:n===r)?void 0:n)}function zk(e,t){var n=bj;return PO(FO(e=e.u),e,dn(e),n)===t?t:-1}function FO(e){if(Sh)return e[tv]??(e[tv]=new Map);if(tv in e)return e[tv];let t=new Map;return Object.defineProperty(e,tv,{value:t}),t}function OG(e,t,n,r){let o=FO(e),i=PO(o,e,t,n);return i!==r&&(i&&(t=Hn(e,t,i)),o.set(n,r)),t}function PO(e,t,n,r){let o=e.get(r);if(o!=null)return o;o=0;for(let i=0;i<r.length;i++){let s=r[i];su(t,n,s)!=null&&(o!==0&&(n=Hn(t,n,o)),o=s)}return e.set(r,o),o}function $O(e,t,n,r){let o,i=dn(e);if((r=su(e,i,n,r))!=null&&r.X===Ev)return(t=rE(r))!==r&&Hn(e,i,n,t),t.u;if(Array.isArray(r)){let s=er(r);o=2&s?ml(SG(r,s,!1),t,!0):64&s?r:ml(o,t,!0)}else o=ml(void 0,t,!0);return o!==r&&Hn(e,i,n,o),o}function MG(e,t,n,r){e=e.u;let o=dn(e);return(t=AO(r=su(e,o,n,r),t,!1,o))!==r&&t!=null&&Hn(e,o,n,t),t}function Xt(e,t,n,r=!1){if((t=MG(e,t,n,r))==null)return t;if(e=e.u,!(2&(r=dn(e)))){let o=rE(t);o!==t&&Hn(e,r,n,t=o)}return t}function FG(e,t,n,r,o,i,s){let a=e.u;var u=!!(2&t);o=u?1:o,i=!!i,s&&=!u,u=AG(a,t,r);var c=er(u),f=u;if(Gw(f,e),o!==2&&o!==1||hv(f,e),!(f=!!(4&c))){var d=u,h=t;let v=!!(2&(c=RG(c,t)));v&&(h|=2);let x=!v,b=!0,C=0,D=0;for(;C<d.length;C++){let O=AO(d[C],n,!1,h);if(O instanceof n){if(!v){let F=!!(2&er(O.u));x&&=!F,b&&=F}d[D++]=O}}D<C&&(d.length=D),c|=4,c=b?16|c:-17&c,Jn(d,c=x?8|c:-9&c),v&&Object.freeze(d)}if(s&&!(8&c||!u.length&&(o===1||o===4&&32&c))){for(Qu(c)?(u=cs(u),c=Kf(c,t),t=Hn(a,t,r,u)):hv(u,e),n=u,s=c,d=0;d<n.length;d++)(c=n[d])!==(h=rE(c))&&(n[d]=h);s|=8,s=n.length?-17&s:16|s,Jn(n,s),c=s}let m;return o===1||o===4&&32&c?Qu(c)||(e=c,(c|=!u.length||16&c&&(!f||32&c)?2:2048)!==e&&Jn(u,c),Object.freeze(u)):(f=o===5&&(!!(32&c)||Qu(c)||!!bh?.get(u)),(o===2||f)&&Qu(c)&&(u=cs(u),c=wh(c=Kf(c,t),t,i),Jn(u,c),t=Hn(a,t,r,u)),Qu(c)||(r=c,(c=wh(c,t,i))!==r&&Jn(u,c)),f?(m=bG(u),RO(u,e,!0)):o!==2||i||bh?.delete(u)),m||u}function tc(e,t,n){let r=dn(e.u);return FG(e,r,t,n,Gf(),!1,!(2&r))}function qe(e,t,n,r){return r==null&&(r=void 0),An(e,n,r)}function uv(e,t,n,r){r==null&&(r=void 0);e:{e=e.u;let o=dn(e);if(nc(o),r==null){let i=FO(e);if(PO(i,e,o,n)!==t)break e;i.set(n,0)}else o=OG(e,o,n,t);Hn(e,o,t,r)}}function Kf(e,t){return-2049&(e=32|(2&t?2|e:-3&e))}function wh(e,t,n){return 32&t&&n||(e&=-33),e}function jw(e,t,n,r){let o=dn(e.u);nc(o),e=FG(e,o,n,t,2,!0),r=r??new n,e.push(r),2&er(r.u)?Pw(e,8):Pw(e,16)}function ma(e,t){return e??t}function Vs(e,t){return Dh(gl(e,t))}function vr(e,t){return ma(Aw(e,t),0)}function ou(e,t){return ma(hl(gl(e,t)),"")}function mv(e,t,n){if(n!=null&&typeof n!="boolean")throw e=typeof n,Error(`Expected boolean but got ${e!="object"?e:n?Array.isArray(n)?"array":e:"null"}: ${n}`);An(e,t,n)}function iu(e,t,n){if(n!=null){if(typeof n!="number"||!Number.isFinite(n))throw eO("int32");n|=0}An(e,t,n)}function Be(e,t,n){if(n!=null&&typeof n!="number")throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);An(e,t,n)}function zw(e,t,n){{let a=e.u,u=dn(a);if(nc(u),n==null)Hn(a,u,t);else{n=wG?.get(n)||n;var r,o=er(n),i=o,s=!!(2&o)||Object.isFrozen(n);if((r=!s)&&((r=fve===void 0)||(r=!!tve&&lve!==void 0)),DG(e,o)){o=21,s&&(n=cs(n),i=0,o=wh(o=Kf(o,u),u,!0));for(let c=0;c<n.length;c++)n[c]=xG(n[c])}r?(n=cs(n),i=0,o=wh(o=Kf(o,u),u,!0)):s||RO(n,e),o!==i&&Jn(n,o),Hn(a,u,t,n)}}}function oE(e,t,n){nc(dn(e.u)),jf(e,t,hl,2,void 0,!0).push(xG(n))}function PG(e,t){return Error(`Invalid wire type: ${e} (at position ${t})`)}function LO(){return Error("Failed to read varint, encoding is invalid.")}function $G(e,t){return Error(`Tried to read past the end of the data ${t} > ${e}`)}function VO(e){if(typeof e=="string")return{buffer:dG(e),O:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),O:!1};if(e.constructor===Uint8Array)return{buffer:e,O:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),O:!1};if(e.constructor===ec)return{buffer:bO(e)||new Uint8Array(0),O:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),O:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function BO(e,t){let n,r=0,o=0,i=0,s=e.h,a=e.g;do n=s[a++],r|=(127&n)<<i,i+=7;while(i<32&&128&n);for(i>32&&(o|=(127&n)>>4),i=3;i<32&&128&n;i+=7)n=s[a++],o|=(127&n)<<i;if(Hf(e,a),n<128)return t(r>>>0,o>>>0);throw LO()}function UO(e){let t=0,n=e.g,r=n+10,o=e.h;for(;n<r;){let i=o[n++];if(t|=i,(128&i)==0)return Hf(e,n),!!(127&t)}throw LO()}function yl(e){let t=e.h,n=e.g,r=t[n++],o=127&r;if(128&r&&(r=t[n++],o|=(127&r)<<7,128&r&&(r=t[n++],o|=(127&r)<<14,128&r&&(r=t[n++],o|=(127&r)<<21,128&r&&(r=t[n++],o|=r<<28,128&r&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++])))))throw LO();return Hf(e,n),o}function vl(e){return yl(e)>>>0}function iO(e){var t=e.h;let n=e.g,r=t[n],o=t[n+1],i=t[n+2];return t=t[n+3],Hf(e,e.g+4),(r<<0|o<<8|i<<16|t<<24)>>>0}function sO(e){var t=iO(e);e=2*(t>>31)+1;let n=t>>>23&255;return t&=8388607,n==255?t?NaN:e*(1/0):n==0?1401298464324817e-60*e*t:e*Math.pow(2,n-150)*(t+8388608)}function Rve(e){return yl(e)}function Hk(e,t,{ca:n=!1}={}){e.ca=n,t&&(t=VO(t),e.h=t.buffer,e.m=t.O,e.j=0,e.l=e.h.length,e.g=e.j)}function Hf(e,t){if(e.g=t,t>e.l)throw $G(e.l,t)}function LG(e,t){if(t<0)throw Error(`Tried to read a negative byte length: ${t}`);let n=e.g,r=n+t;if(r>e.l)throw $G(t,e.l-n);return e.g=r,n}function VG(e,t){if(t==0)return qf();var n=LG(e,t);return e.ca&&e.m?n=e.h.subarray(n,n+t):(e=e.h,n=n===(t=n+t)?new Uint8Array(0):vve?e.slice(n,t):new Uint8Array(e.subarray(n,t))),n.length==0?qf():new ec(n,vh)}Bs.prototype.toJSON=void 0,Bs.prototype.Ja=mG;var l8=[];function BG(e){var t=e.g;if(t.g==t.l)return!1;e.l=e.g.g;var n=vl(e.g);if(t=n>>>3,!((n&=7)>=0&&n<=5))throw PG(n,e.l);if(t<1)throw Error(`Invalid field number: ${t} (at position ${e.l})`);return e.m=t,e.h=n,!0}function Rw(e){switch(e.h){case 0:e.h!=0?Rw(e):UO(e.g);break;case 1:Hf(e=e.g,e.g+8);break;case 2:if(e.h!=2)Rw(e);else{var t=vl(e.g);Hf(e=e.g,e.g+t)}break;case 5:Hf(e=e.g,e.g+4);break;case 3:for(t=e.m;;){if(!BG(e))throw Error("Unmatched start-group tag: stream EOF");if(e.h==4){if(e.m!=t)throw Error("Unmatched end-group tag");break}Rw(e)}break;default:throw PG(e.h,e.l)}}function Cv(e,t,n){let r=e.g.l,o=vl(e.g),i=e.g.g+o,s=i-r;if(s<=0&&(e.g.l=i,n(t,e,void 0,void 0,void 0),s=i-e.g.g),s)throw Error(`Message parsing ended unexpectedly. Expected to read ${o} bytes, instead read ${o-s} bytes, either the data ended unexpectedly or the message misreported its own length`);return e.g.g=i,e.g.l=r,t}function GO(e){var t=vl(e.g),n=LG(e=e.g,t);if(e=e.h,Qye){var r,o=e;(r=Vk)||(r=Vk=new TextDecoder("utf-8",{fatal:!0})),t=n+t,o=n===0&&t===o.length?o:o.subarray(n,t);try{var i=r.decode(o)}catch(a){if(_w===void 0){try{r.decode(new Uint8Array([128]))}catch{}try{r.decode(new Uint8Array([97])),_w=!0}catch{_w=!1}}throw!_w&&(Vk=void 0),a}}else{t=(i=n)+t,n=[];let a,u=null;for(;i<t;){var s=e[i++];s<128?n.push(s):s<224?i>=t?Uf():(a=e[i++],s<194||(192&a)!=128?(i--,Uf()):n.push((31&s)<<6|63&a)):s<240?i>=t-1?Uf():(a=e[i++],(192&a)!=128||s===224&&a<160||s===237&&a>=160||(192&(r=e[i++]))!=128?(i--,Uf()):n.push((15&s)<<12|(63&a)<<6|63&r)):s<=244?i>=t-2?Uf():(a=e[i++],(192&a)!=128||a-144+(s<<28)>>30||(192&(r=e[i++]))!=128||(192&(o=e[i++]))!=128?(i--,Uf()):(s=(7&s)<<18|(63&a)<<12|(63&r)<<6|63&o,s-=65536,n.push(55296+(s>>10&1023),56320+(1023&s)))):Uf(),n.length>=8192&&(u=q5(u,n),n.length=0)}i=q5(u,n)}return i}function UG(e){let t=vl(e.g);return VG(e.g,t)}function iE(e,t,n){var r=vl(e.g);for(r=e.g.g+r;e.g.g<r;)n.push(t(e.g))}var Iw=[],Hw;function ya(e,t,n){t.g?t.m(e,t.g,t.h,n,!0):t.m(e,t.h,n,!0)}var $e=class{constructor(e,t){this.u=IG(e,t)}toJSON(){return GG(this)}l(){var e=f0e;return e.g?e.l(this,e.g,e.h,!0):e.l(this,e.h,e.defaultValue,!0)}clone(){let e=this.u;return MO(this,e,dn(e),!1)}O(){return!!(2&er(this.u))}};function GG(e){tE(e),e=Hw?e.u:nE(e.u,OO,void 0,void 0,!1);{var t=!Hw;let c=e.length;if(c){var n=e[c-1],r=Yw(n);r?c--:n=void 0;var o=e;if(r){e:{var i,s=n,a=!1;if(s)for(let f in s)isNaN(+f)?(i??={})[f]=s[f]:(r=s[f],Array.isArray(r)&&($w(r)||J5(r)&&r.size===0)&&(r=null),r==null&&(a=!0),r!=null&&((i??={})[f]=r));if(a||(i=s),i)for(let f in i){a=i;break e}a=null}s=a==null?n!=null:a!==n}for(;c>0&&((i=o[c-1])==null||$w(i)||J5(i)&&i.size===0);c--)var u=!0;(o!==e||s||u)&&(t?(u||s||a)&&(o.length=c):o=Array.prototype.slice.call(o,0,c),a&&o.push(a)),u=o}else u=e}return u}function f8(e){return e?/^\d+$/.test(e)?(Jw(e),new aO(_n,cr)):null:kve||=new aO(0,0)}$e.prototype.X=Ev,$e.prototype.toString=function(){try{return Hw=!0,GG(this).toString()}finally{Hw=!1}};var aO=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}},kve;function d8(e){return e?/^-?\d+$/.test(e)?(Jw(e),new uO(_n,cr)):null:Ove||=new uO(0,0)}var uO=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}},Ove;function gh(e,t,n){for(;n>0||t>127;)e.g.push(127&t|128),t=(t>>>7|n<<25)>>>0,n>>>=7;e.g.push(t)}function Tv(e,t){for(;t>127;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function sE(e,t){if(t>=0)Tv(e,t);else{for(let n=0;n<9;n++)e.g.push(127&t|128),t>>=7;e.g.push(1)}}function gv(e,t){e.g.push(t>>>0&255),e.g.push(t>>>8&255),e.g.push(t>>>16&255),e.g.push(t>>>24&255)}function Eh(e,t){t.length!==0&&(e.l.push(t),e.h+=t.length)}function Us(e,t,n){Tv(e.g,8*t+n)}function jO(e,t){return Us(e,t,2),t=e.g.end(),Eh(e,t),t.push(e.h),t}function zO(e,t){var n=t.pop();for(n=e.h+e.g.length()-n;n>127;)t.push(127&n|128),n>>>=7,e.h++;t.push(n),e.h++}function aE(e,t,n){Us(e,t,2),Tv(e.g,n.length),Eh(e,e.g.end()),Eh(e,n)}function Ww(e,t,n,r){n!=null&&(t=jO(e,t),r(n,e),zO(e,t))}function va(){let e=class{constructor(){throw Error()}};return Object.setPrototypeOf(e,e.prototype),e}var HO=va(),jG=va(),WO=va(),qO=va(),zG=va(),KO=va(),HG=va(),WG=va(),Rh=class{constructor(e,t,n){this.g=e,this.h=t,e=HO,this.l=!!e&&n===e||!1}};function uE(e,t){return new Rh(e,t,HO)}function qG(e,t,n,r,o){Ww(e,n,ZG(t,r),o)}var Mve=uE(function(e,t,n,r,o){return e.h===2&&(Cv(e,$O(t,r,n),o),!0)},qG),Fve=uE(function(e,t,n,r,o){return e.h===2&&(Cv(e,$O(t,r,n,!0),o),!0)},qG),cE=Symbol(),XO=Symbol(),p8=Symbol(),h8=Symbol(),KG,XG;function Yf(e,t,n,r){var o=r[e];if(o)return o;(o={}).W=function(d){switch(typeof d){case"boolean":return EG||=[0,void 0,!0];case"number":return d>0?void 0:d===0?Cve||=[0,void 0]:[-d,void 0];case"string":return[0,d];case"object":return d}}(r[0]);var i=r[1];let s=1;i&&i.constructor===Object&&(o.ia=i,typeof(i=r[++s])=="function"&&(o.na=!0,KG??=i,XG??=r[s+1],i=r[s+=2]));let a={};for(;i&&Array.isArray(i)&&i.length&&typeof i[0]=="number"&&i[0]>0;){for(var u=0;u<i.length;u++)a[i[u]]=i;i=r[++s]}for(u=1;i!==void 0;){let d;typeof i=="number"&&(u+=i,i=r[++s]);var c=void 0;if(i instanceof Rh?d=i:(d=Mve,s--),d?.l){i=r[++s],c=r;var f=s;typeof i=="function"&&(i=i(),c[f]=i),c=i}for(f=u+1,typeof(i=r[++s])=="number"&&i<0&&(f-=i,i=r[++s]);u<f;u++){let h=a[u];c?n(o,u,d,c,h):t(o,u,d,h)}}return r[e]=o}function YG(e){return Array.isArray(e)?e[0]instanceof Rh?e:[Fve,e]:[e,void 0]}function ZG(e,t){return e instanceof $e?(tE(e),e.u):Array.isArray(e)?ml(e,t,!1):void 0}function YO(e,t,n,r){let o=n.g;e[t]=r?(i,s,a)=>o(i,s,a,r):o}function ZO(e,t,n,r,o){let i=n.g,s,a;e[t]=(u,c,f)=>i(u,c,f,a||=Yf(XO,YO,ZO,r).W,s||=QO(r),o)}function QO(e){let t=e[p8];if(t!=null)return t;let n=Yf(XO,YO,ZO,e);return t=n.na?(r,o)=>KG(r,o,n):(r,o)=>{let i=dn(r);for(;BG(o)&&o.h!=4;){var s=o.m,a=n[s];if(a==null){var u=n.ia;u&&(u=u[s])&&(u=Pve(u))!=null&&(a=n[s]=u)}a!=null&&a(o,r,s)||(s=(a=o).l,Rw(a),a.ha?a=void 0:(u=a.g.g-s,a.g.g=s,a=VG(a.g,u)),s=r,a&&(pl||=Symbol(),(u=s[pl])?u.push(a):s[pl]=[a]))}return 16384&i&&Xf(r),!0},e[p8]=t}function Pve(e){let t=(e=YG(e))[0].g;if(e=e[1]){let n=QO(e),r=Yf(XO,YO,ZO,e).W;return(o,i,s)=>t(o,i,s,r,n)}return t}function lE(e,t,n){e[t]=n.h}function fE(e,t,n,r){let o,i,s=n.h;e[t]=(a,u,c)=>s(a,u,c,i||=Yf(cE,lE,fE,r).W,o||=QG(r))}function QG(e){let t=e[h8];if(!t){let n=Yf(cE,lE,fE,e);t=(r,o)=>JG(r,o,n),e[h8]=t}return t}function JG(e,t,n){for(var r=er(e),o=+!!(512&r)-1,i=e.length,s=512&r?1:0,a=i+(256&r?-1:0);s<a;s++){let u=e[s];if(u==null)continue;let c=s-o,f=m8(n,c);f&&f(t,u,c)}if(256&r){r=e[i-1];for(let u in r)o=+u,Number.isNaN(o)||(i=r[o])!=null&&(a=m8(n,o))&&a(t,i,o)}if(e=pl?e[pl]:void 0)for(Eh(t,t.g.end()),n=0;n<e.length;n++)Eh(t,bO(e[n])||new Uint8Array(0))}function m8(e,t){var n=e[t];if(n)return n;if((n=e.ia)&&(n=n[t])){var r=(n=YG(n))[0].h;if(n=n[1]){let o=QG(n),i=Yf(cE,lE,fE,n).W;n=e.na?XG(i,o):(s,a,u)=>r(s,a,u,i,o)}else n=r;return e[t]=n}}function kh(e,t){if(Array.isArray(t)){var n=er(t);if(4&n)return t;for(var r=0,o=0;r<t.length;r++){let i=e(t[r]);i!=null&&(t[o++]=i)}return o<r&&(t.length=o),Jn(t,-12289&(5|n)),2&n&&Object.freeze(t),t}}function bi(e,t,n){return new Rh(e,t,n)}function Oh(e,t,n){return new Rh(e,t,n)}function wi(e,t,n){Hn(e,dn(e),t,n)}var $ve=uE(function(e,t,n,r,o){return e.h===2&&(e=Cv(e,ml([void 0,void 0],r,!0),o),nc(r=dn(t)),(o=su(t,r,n))instanceof Bs?2&o.M?((o=o.Y()).push(e),Hn(t,r,n,o)):o.Oa(e):Array.isArray(o)?(2&er(o)&&Hn(t,r,n,o=kG(o)),o.push(e)):Hn(t,r,n,[e]),!0)},function(e,t,n,r,o){if(t instanceof Bs)t.forEach((i,s)=>{Ww(e,n,ml([s,i],r,!1),o)});else if(Array.isArray(t))for(let i=0;i<t.length;i++){let s=t[i];Array.isArray(s)&&Ww(e,n,ml(s,r,!1),o)}});function ej(e,t,n){if(t=function(r){if(r==null)return r;let o=typeof r;if(o==="bigint")return String(BigInt.asIntN(64,r));if(eE(r)){if(o==="string")return NO(r);if(o==="number")return DO(r)}}(t),t!=null&&(typeof t=="string"&&d8(t),t!=null))switch(Us(e,n,0),typeof t){case"number":e=e.g,xh(t),gh(e,_n,cr);break;case"bigint":n=BigInt.asUintN(64,t),n=new uO(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),gh(e.g,n.h,n.g);break;default:n=d8(t),gh(e.g,n.h,n.g)}}function tj(e,t,n){(t=Dh(t))!=null&&t!=null&&(Us(e,n,0),sE(e.g,t))}function nj(e,t,n){(t=vG(t))!=null&&(Us(e,n,0),e.g.g.push(t?1:0))}function rj(e,t,n){(t=hl(t))!=null&&aE(e,n,sG(t))}function oj(e,t,n,r,o){Ww(e,n,ZG(t,r),o)}function ij(e,t,n){(t=t==null||typeof t=="string"||vv(t)||t instanceof ec?t:void 0)!=null&&aE(e,n,VO(t).buffer)}function sj(e,t,n){return(e.h===5||e.h===2)&&(t=Ah(t,dn(t),n,2,!1),e.h==2?iE(e,sO,t):t.push(sO(e.g)),!0)}var Zu=bi(function(e,t,n){if(e.h!==1)return!1;var r=e.g;e=iO(r);let o=iO(r);r=2*(o>>31)+1;let i=o>>>20&2047;return e=4294967296*(1048575&o)+e,wi(t,n,i==2047?e?NaN:r*(1/0):i==0?5e-324*r*e:r*Math.pow(2,i-1075)*(e+4503599627370496)),!0},function(e,t,n){(t=wl(t))!=null&&(Us(e,n,1),e=e.g,(n=yG||=new DataView(new ArrayBuffer(8))).setFloat64(0,+t,!0),_n=n.getUint32(0,!0),cr=n.getUint32(4,!0),gv(e,_n),gv(e,cr))},va()),$r=bi(function(e,t,n){return e.h===5&&(wi(t,n,sO(e.g)),!0)},function(e,t,n){(t=wl(t))!=null&&(Us(e,n,5),e=e.g,TO(t),gv(e,_n))},KO),Lve=Oh(sj,function(e,t,n){if((t=kh(wl,t))!=null)for(let s=0;s<t.length;s++){var r=e,o=n,i=t[s];i!=null&&(Us(r,o,5),r=r.g,TO(i),gv(r,_n))}},KO),JO=Oh(sj,function(e,t,n){if((t=kh(wl,t))!=null&&t.length){Us(e,n,2),Tv(e.g,4*t.length);for(let r=0;r<t.length;r++)n=e.g,TO(t[r]),gv(n,_n)}},KO),xl=bi(function(e,t,n){return e.h===0&&(wi(t,n,BO(e.g,IO)),!0)},ej,zG),Wk=bi(function(e,t,n){return e.h===0&&(wi(t,n,(e=BO(e.g,IO))===0?void 0:e),!0)},ej,zG),Vve=bi(function(e,t,n){return e.h===0&&(wi(t,n,BO(e.g,_O)),!0)},function(e,t,n){if((t=wve(t))!=null&&(typeof t=="string"&&f8(t),t!=null))switch(Us(e,n,0),typeof t){case"number":e=e.g,xh(t),gh(e,_n,cr);break;case"bigint":n=BigInt.asUintN(64,t),n=new aO(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),gh(e.g,n.h,n.g);break;default:n=f8(t),gh(e.g,n.h,n.g)}},va()),lr=bi(function(e,t,n){return e.h===0&&(wi(t,n,yl(e.g)),!0)},tj,qO),dE=Oh(function(e,t,n){return(e.h===0||e.h===2)&&(t=Ah(t,dn(t),n,2,!1),e.h==2?iE(e,yl,t):t.push(yl(e.g)),!0)},function(e,t,n){if((t=kh(Dh,t))!=null&&t.length){n=jO(e,n);for(let r=0;r<t.length;r++)sE(e.g,t[r]);zO(e,n)}},qO),mh=bi(function(e,t,n){return e.h===0&&(wi(t,n,(e=yl(e.g))===0?void 0:e),!0)},tj,qO),Qn=bi(function(e,t,n){return e.h===0&&(wi(t,n,UO(e.g)),!0)},nj,jG),cv=bi(function(e,t,n){return e.h===0&&(wi(t,n,(e=UO(e.g))===!1?void 0:e),!0)},nj,jG),To=Oh(function(e,t,n){if(e.h!==2)return!1;e=GO(e);let r=dn(t);return nc(r),Ah(t,r,n,2).push(e),!0},function(e,t,n){if((t=kh(hl,t))!=null)for(let s=0;s<t.length;s++){var r=e,o=n,i=t[s];i!=null&&aE(r,o,sG(i))}},WO),dl=bi(function(e,t,n){return e.h===2&&(wi(t,n,(e=GO(e))===""?void 0:e),!0)},rj,WO),fn=bi(function(e,t,n){return e.h===2&&(wi(t,n,GO(e)),!0)},rj,WO),Pr=function(e,t,n=HO){return new Rh(e,t,n)}(function(e,t,n,r,o){if(e.h!==2)return!1;r=ml(void 0,r,!0);let i=dn(t);nc(i);let s=Ah(t,i,n,3);return i=dn(t),4&er(s)&&(s=cs(s),Jn(s,-2079&(1|er(s))),Hn(t,i,n,s)),s.push(r),Cv(e,r,o),!0},function(e,t,n,r,o){if(Array.isArray(t))for(let i=0;i<t.length;i++)oj(e,t[i],n,r,o)}),yn=uE(function(e,t,n,r,o,i){return e.h===2&&(OG(t,er(t),i,n),Cv(e,t=$O(t,r,n),o),!0)},oj),aj=bi(function(e,t,n){return e.h===2&&(wi(t,n,UG(e)),!0)},ij,HG),Bve=Oh(function(e,t,n){return(e.h===0||e.h===2)&&(t=Ah(t,dn(t),n,2,!1),e.h==2?iE(e,vl,t):t.push(vl(e.g)),!0)},function(e,t,n){if((t=kh(bve,t))!=null)for(let s=0;s<t.length;s++){var r=e,o=n,i=t[s];i!=null&&(Us(r,o,0),Tv(r.g,i))}},va()),ga=bi(function(e,t,n){return e.h===0&&(wi(t,n,yl(e.g)),!0)},function(e,t,n){(t=Dh(t))!=null&&(t=parseInt(t,10),Us(e,n,0),sE(e.g,t))},WG),cO=class{constructor(t,n){this.h=t,this.g=n,this.l=Xt,this.m=qe,this.defaultValue=void 0}};function xa(e,t){return new cO(e,t)}function El(e,t){return(n,r)=>{if(Iw.length){let i=Iw.pop();i.o(r),Hk(i.g,n,r),n=i}else n=new class{constructor(i,s){if(l8.length){let a=l8.pop();Hk(a,i,s),i=a}else i=new class{constructor(a,u){this.h=null,this.m=!1,this.g=this.l=this.j=0,Hk(this,a,u)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.ca=!1}}(i,s);this.g=i,this.l=this.g.g,this.h=this.m=-1,this.o(s)}o({ha:i=!1}={}){this.ha=i}}(n,r);try{let i=new e,s=i.u;QO(t)(s,n);var o=i}finally{n.g.clear(),n.m=-1,n.h=-1,Iw.length<100&&Iw.push(n)}return o}}function pE(e){return function(){tE(this);let t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){let s=this.g;return this.g=[],s}}}};JG(this.u,t,Yf(cE,lE,fE,e)),Eh(t,t.g.end());let n=new Uint8Array(t.h),r=t.l,o=r.length,i=0;for(let s=0;s<o;s++){let a=r[s];n.set(a,i),i+=a.length}return t.l=[n],n}}var g8=class extends $e{constructor(e){super(e)}},y8=[0,dl,bi(function(e,t,n){return e.h===2&&(wi(t,n,(e=UG(e))===qf()?void 0:e),!0)},function(e,t,n){if(t!=null){if(t instanceof $e){let r=t.Ra;return void(r&&(t=r(t),t!=null&&aE(e,n,VO(t).buffer)))}if(Array.isArray(t))return}ij(e,t,n)},HG)],qk,v8=globalThis.trustedTypes;function x8(e){qk===void 0&&(qk=function(){let n=null;if(!v8)return n;try{let r=o=>o;n=v8.createPolicy("goog#html",{createHTML:r,createScript:r,createScriptURL:r})}catch{}return n}());var t=qk;return new class{constructor(n){this.g=n}toString(){return this.g+""}}(t?t.createScriptURL(e):e)}function Uve(e,...t){if(t.length===0)return x8(e[0]);let n=e[0];for(let r=0;r<t.length;r++)n+=encodeURIComponent(t[r])+e[r+1];return x8(n)}var uj=[0,lr,ga,Qn,-1,dE,ga,-1],Gve=class extends $e{constructor(){super()}},cj=[0,Qn,fn,Qn,ga,-1,Oh(function(e,t,n){return(e.h===0||e.h===2)&&(t=Ah(t,dn(t),n,2,!1),e.h==2?iE(e,Rve,t):t.push(yl(e.g)),!0)},function(e,t,n){if((t=kh(Dh,t))!=null&&t.length){n=jO(e,n);for(let r=0;r<t.length;r++)sE(e.g,t[r]);zO(e,n)}},WG),fn,-1,[0,Qn,-1],ga,Qn,-1],lj=[0,fn,-2],b8=class extends $e{constructor(){super()}},fj=[0],dj=[0,lr,Qn,1,Qn,-3],ls=class extends $e{constructor(e){super(e,2)}},_r={};_r[336783863]=[0,fn,Qn,-1,lr,[0,[1,2,3,4,5,6,7],yn,fj,yn,cj,yn,lj,yn,dj,yn,uj,yn,[0,fn,-2],yn,[0,fn,ga]],[0,fn],Qn,[0,[1,3],[2,4],yn,[0,dE],-1,yn,[0,To],-1,Pr,[0,fn,-1]],fn];var w8=[0,Wk,-1,cv,-3,Wk,dE,dl,mh,Wk,-1,cv,mh,cv,-2,dl];function fs(e,t){oO(e,2,Nh(t),"")}function Rn(e,t){oE(e,3,t)}function zt(e,t){oE(e,4,t)}var Ho=class extends $e{constructor(e){super(e,500)}o(e){return qe(this,0,7,e)}},lv=[-1,{}],E8=[0,fn,1,lv],C8=[0,fn,To,lv];function ds(e,t){jw(e,1,Ho,t)}function Pn(e,t){oE(e,10,t)}function Zt(e,t){oE(e,15,t)}var Ei=class extends $e{constructor(e){super(e,500)}o(e){return qe(this,0,1001,e)}},pj=[-500,Pr,[-500,dl,-1,To,-3,[-2,_r,Qn],Pr,y8,mh,-1,E8,C8,Pr,[0,dl,cv],dl,w8,mh,To,987,To],4,Pr,[-500,fn,-1,[-1,{}],998,fn],Pr,[-500,fn,To,-1,[-2,{},Qn],997,To,-1],mh,Pr,[-500,fn,To,lv,998,To],To,mh,E8,C8,Pr,[0,dl,-1,lv],To,-2,w8,dl,-1,cv,979,lv,Pr,y8];Ei.prototype.g=pE(pj);var jve=El(Ei,pj),zve=class extends $e{constructor(e){super(e)}},hj=class extends $e{constructor(e){super(e)}g(){return tc(this,zve,1)}},mj=[0,Pr,[0,lr,$r,fn,-1]],hE=El(hj,mj),Hve=class extends $e{constructor(e){super(e)}},Wve=class extends $e{constructor(e){super(e)}},Kk=class extends $e{constructor(e){super(e)}h(){return Xt(this,Hve,2)}g(){return tc(this,Wve,5)}},gj=El(class extends $e{constructor(e){super(e)}},[0,To,dE,JO,[0,ga,[0,lr,-3],[0,$r,-3],[0,lr,-1,[0,Pr,[0,lr,-2]]],Pr,[0,$r,-1,fn,$r]],fn,-1,xl,Pr,[0,lr,$r],To,xl]),yj=class extends $e{constructor(e){super(e)}},yh=El(class extends $e{constructor(e){super(e)}},[0,Pr,[0,$r,-4]]),vj=class extends $e{constructor(e){super(e)}},_v=El(class extends $e{constructor(e){super(e)}},[0,Pr,[0,$r,-4]]),qve=class extends $e{constructor(e){super(e)}},Kve=[0,lr,-1,JO,ga],xj=class extends $e{constructor(){super()}};xj.prototype.g=pE([0,$r,-4,xl]);var Xve=class extends $e{constructor(e){super(e)}},Yve=El(class extends $e{constructor(e){super(e)}},[0,Pr,[0,1,lr,fn,mj],xl]),T8=class extends $e{constructor(e){super(e)}},Zve=class extends $e{constructor(e){super(e)}qa(){let e=NG(this);return e??qf()}},Qve=class extends $e{constructor(e){super(e)}},bj=[1,2],Jve=El(class extends $e{constructor(e){super(e)}},[0,Pr,[0,bj,yn,[0,JO],yn,[0,aj],lr,fn],xl]),eM=class extends $e{constructor(e){super(e)}},wj=[0,fn,lr,$r,To,-1],_8=class extends $e{constructor(e){super(e)}},e0e=[0,Qn,-1],I8=class extends $e{constructor(e){super(e)}},kw=[1,2,3,4,5],qw=class extends $e{constructor(e){super(e)}g(){return NG(this)!=null}h(){return hl(gl(this,2))!=null}},Wn=class extends $e{constructor(e){super(e)}g(){return vG(gl(this,2))??!1}},Ej=[0,aj,fn,[0,lr,xl,-1],[0,Vve,xl]],xr=[0,Ej,Qn,[0,kw,yn,dj,yn,cj,yn,uj,yn,fj,yn,lj],ga],mE=class extends $e{constructor(e){super(e)}},tM=[0,xr,$r,-1,lr],t0e=xa(502141897,mE);_r[502141897]=tM;var n0e=El(class extends $e{constructor(e){super(e)}},[0,[0,ga,-1,Lve,Bve],Kve]),Cj=class extends $e{constructor(e){super(e)}},Tj=class extends $e{constructor(e){super(e)}},nM=[0,xr,$r,[0,xr],Qn],_j=[0,xr,tM,nM,$r,[0,[0,Ej]]],r0e=xa(508968150,Tj);_r[508968150]=_j,_r[508968149]=nM;var Ij=class extends $e{constructor(e){super(e)}},o0e=xa(513916220,Ij);_r[513916220]=[0,xr,_j,lr];var ph=class extends $e{constructor(e){super(e)}h(){return Xt(this,eM,2)}g(){An(this,2)}},Sj=[0,xr,wj];_r[478825465]=Sj;var i0e=class extends $e{constructor(e){super(e)}},Dj=class extends $e{constructor(e){super(e)}},rM=class extends $e{constructor(e){super(e)}},oM=class extends $e{constructor(e){super(e)}},Nj=class extends $e{constructor(e){super(e)}},S8=[0,xr,[0,xr],Sj,-1],Aj=[0,xr,$r,lr],iM=[0,xr,$r],Rj=[0,xr,Aj,iM,$r],s0e=xa(479097054,Nj);_r[479097054]=[0,xr,Rj,S8],_r[463370452]=S8,_r[464864288]=Aj;var a0e=xa(462713202,oM);_r[462713202]=Rj,_r[474472470]=iM;var u0e=class extends $e{constructor(e){super(e)}},kj=class extends $e{constructor(e){super(e)}},Oj=class extends $e{constructor(e){super(e)}},Mj=class extends $e{constructor(){super()}},sM=[0,xr,$r,-1,lr],lO=[0,xr,$r,Qn];Mj.prototype.g=pE([0,xr,iM,[0,xr],tM,nM,sM,lO]);var Fj=class extends $e{constructor(e){super(e)}},c0e=xa(456383383,Fj);_r[456383383]=[0,xr,wj];var Pj=class extends $e{constructor(e){super(e)}},l0e=xa(476348187,Pj);_r[476348187]=[0,xr,e0e];var $j=class extends $e{constructor(e){super(e)}},D8=class extends $e{constructor(e){super(e)}},Lj=[0,ga,-1],f0e=xa(458105876,class extends $e{constructor(e){super(e)}g(){var e=this.u;let t=dn(e),n=2&t;return e=function(r,o,i){var s=D8;let a=2&o,u=!1;if(i==null){if(a)return u8();i=[]}else if(i.constructor===Bs){if(!(2&i.M)||a)return i;i=i.Y()}else Array.isArray(i)?u=!!(2&er(i)):i=[];if(a){if(!i.length)return u8();u||(u=!0,Xf(i))}else u&&(u=!1,i=kG(i));return u||(64&er(i)?Pw(i,32):32&o&&Xw(i,32)),Hn(r,o,2,s=new Bs(i,s,Eve,void 0)),s}(e,t,su(e,t,2)),!n&&D8&&(e.ta=!0),e}});_r[458105876]=[0,Lj,$ve,[!0,xl,[0,fn,-1,To]]];var aM=class extends $e{constructor(e){super(e)}},Vj=xa(458105758,aM);_r[458105758]=[0,xr,fn,Lj];var Bj=class extends $e{constructor(e){super(e)}},d0e=xa(443442058,Bj);_r[443442058]=[0,xr,fn,lr,$r,To,-1],_r[514774813]=sM;var Uj=class extends $e{constructor(e){super(e)}},p0e=xa(516587230,Uj);function fO(e,t){return t=t?t.clone():new eM,e.displayNamesLocale!==void 0?An(t,1,Nh(e.displayNamesLocale)):e.displayNamesLocale===void 0&&An(t,1),e.maxResults!==void 0?iu(t,2,e.maxResults):"maxResults"in e&&An(t,2),e.scoreThreshold!==void 0?Be(t,3,e.scoreThreshold):"scoreThreshold"in e&&An(t,3),e.categoryAllowlist!==void 0?zw(t,4,e.categoryAllowlist):"categoryAllowlist"in e&&An(t,4),e.categoryDenylist!==void 0?zw(t,5,e.categoryDenylist):"categoryDenylist"in e&&An(t,5),t}function uM(e,t=-1,n=""){return{categories:e.map(r=>({index:ma(Vs(r,1),0)??-1,score:vr(r,2)??0,categoryName:ou(r,3)??"",displayName:ou(r,4)??""})),headIndex:t,headName:n}}function Gj(e){var t=jf(e,3,wl,Gf()),n=jf(e,2,Dh,Gf()),r=jf(e,1,hl,Gf()),o=jf(e,9,hl,Gf());let i={categories:[],keypoints:[]};for(let s=0;s<t.length;s++)i.categories.push({score:t[s],index:n[s]??-1,categoryName:r[s]??"",displayName:o[s]??""});if((t=Xt(e,Kk,4)?.h())&&(i.boundingBox={originX:Vs(t,1)??0,originY:Vs(t,2)??0,width:Vs(t,3)??0,height:Vs(t,4)??0,angle:0}),Xt(e,Kk,4)?.g().length)for(let s of Xt(e,Kk,4).g())i.keypoints.push({x:Aw(s,1)??0,y:Aw(s,2)??0,score:Aw(s,4)??0,label:hl(gl(s,3))??""});return i}function gE(e){let t=[];for(let n of tc(e,vj,1))t.push({x:vr(n,1)??0,y:vr(n,2)??0,z:vr(n,3)??0,visibility:vr(n,4)??0});return t}function fv(e){let t=[];for(let n of tc(e,yj,1))t.push({x:vr(n,1)??0,y:vr(n,2)??0,z:vr(n,3)??0,visibility:vr(n,4)??0});return t}function N8(e){return Array.from(e,t=>t>127?t-256:t)}function A8(e,t){if(e.length!==t.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);let n=0,r=0,o=0;for(let i=0;i<e.length;i++)n+=e[i]*t[i],r+=e[i]*e[i],o+=t[i]*t[i];if(r<=0||o<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(r*o)}var Sw;_r[516587230]=[0,xr,sM,lO,$r],_r[518928384]=lO;var h0e=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);function jj(){return ne(this,null,function*(){if(Sw===void 0)try{yield WebAssembly.instantiate(h0e),Sw=!0}catch{Sw=!1}return Sw})}function rv(n){return ne(this,arguments,function*(e,t=Uve``){let r=(yield jj())?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${r}.js`,wasmBinaryPath:`${t}/${e}_${r}.wasm`}})}var ll=class{};function zj(){var e=navigator;return typeof OffscreenCanvas<"u"&&(!function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")}(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}function R8(e){return ne(this,null,function*(){if(typeof importScripts!="function"){let t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise((n,r)=>{t.addEventListener("load",()=>{n()},!1),t.addEventListener("error",o=>{r(o)},!1),document.body.appendChild(t)})}importScripts(e.toString())})}function Hj(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function je(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(t=e.i.stringToNewUTF8(t)),e.i._free(t)}function k8(e,t,n){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(n?e.i._bindTextureToStream(n):e.i._bindTextureToCanvas(),!(n=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);let[r,o]=Hj(t);return!e.l||r===e.i.canvas.width&&o===e.i.canvas.height||(e.i.canvas.width=r,e.i.canvas.height=o),[r,o]}function O8(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");let r=new Uint32Array(t.length);for(let o=0;o<t.length;o++)r[o]=e.i.stringToNewUTF8(t[o]);t=e.i._malloc(4*r.length),e.i.HEAPU32.set(r,t>>2),n(t);for(let o of r)e.i._free(o);e.i._free(t)}function eu(e,t,n){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=n}function cl(e,t,n){let r=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=(o,i,s)=>{i?(n(r,s),r=[]):r.push(o)}}ll.forVisionTasks=function(e){return rv("vision",e)},ll.forTextTasks=function(e){return rv("text",e)},ll.forGenAiExperimentalTasks=function(e){return rv("genai_experimental",e)},ll.forGenAiTasks=function(e){return rv("genai",e)},ll.forAudioTasks=function(e){return rv("audio",e)},ll.isSimdSupported=function(){return jj()};function m0e(e,t,n,r){return ne(this,null,function*(){return e=yield((o,i,s,a,u)=>ne(this,null,function*(){if(i&&(yield R8(i)),!self.ModuleFactory||s&&(yield R8(s),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&u&&((i=self.Module).locateFile=u.locateFile,u.mainScriptUrlOrBlob&&(i.mainScriptUrlOrBlob=u.mainScriptUrlOrBlob)),u=yield self.ModuleFactory(self.Module||u),self.ModuleFactory=self.Module=void 0,new o(u,a)}))(e,n.wasmLoaderPath,n.assetLoaderPath,t,{locateFile:o=>o.endsWith(".wasm")?n.wasmBinaryPath.toString():n.assetBinaryPath&&o.endsWith(".data")?n.assetBinaryPath.toString():o}),yield e.o(r),e})}function Xk(e,t){let n=Xt(e.baseOptions,qw,1)||new qw;typeof t=="string"?(An(n,2,Nh(t)),An(n,1)):t instanceof Uint8Array&&(An(n,1,CO(t,!1,!1)),An(n,2)),qe(e.baseOptions,0,1,n)}function M8(e){try{let t=e.H.length;if(t===1)throw Error(e.H[0].message);if(t>1)throw Error("Encountered multiple errors: "+e.H.map(n=>n.message).join(", "))}finally{e.H=[]}}function Re(e,t){e.B=Math.max(e.B,t)}function yE(e,t){e.A=new Ho,fs(e.A,"PassThroughCalculator"),Rn(e.A,"free_memory"),zt(e.A,"free_memory_unused_out"),Pn(t,"free_memory"),ds(t,e.A)}function Ch(e,t){Rn(e.A,t),zt(e.A,t+"_unused_out")}function vE(e){e.g.addBoolToStream(!0,"free_memory",e.B)}var Ow=class{constructor(e){this.g=e,this.H=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(e,t=!0){if(t){let n=e.baseOptions||{};if(e.baseOptions?.modelAssetBuffer&&e.baseOptions?.modelAssetPath)throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(Xt(this.baseOptions,qw,1)?.g()||Xt(this.baseOptions,qw,1)?.h()||e.baseOptions?.modelAssetBuffer||e.baseOptions?.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(r,o){let i=Xt(r.baseOptions,I8,3);if(!i){var s=i=new I8,a=new b8;uv(s,4,kw,a)}"delegate"in o&&(o.delegate==="GPU"?(o=i,s=new Gve,uv(o,2,kw,s)):(o=i,s=new b8,uv(o,4,kw,s))),qe(r.baseOptions,0,3,i)}(this,n),n.modelAssetPath)return fetch(n.modelAssetPath.toString()).then(r=>{if(r.ok)return r.arrayBuffer();throw Error(`Failed to fetch model: ${n.modelAssetPath} (${r.status})`)}).then(r=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(r),!0,!1,!1),Xk(this,"/model.dat"),this.m(),this.J()});if(n.modelAssetBuffer instanceof Uint8Array)Xk(this,n.modelAssetBuffer);else if(n.modelAssetBuffer)return function(r){return ne(this,null,function*(){let o=[];for(var i=0;;){let{done:s,value:a}=yield r.read();if(s)break;o.push(a),i+=a.length}if(o.length===0)return new Uint8Array(0);if(o.length===1)return o[0];r=new Uint8Array(i),i=0;for(let s of o)r.set(s,i),i+=s.length;return r})}(n.modelAssetBuffer).then(r=>{Xk(this,r),this.m(),this.J()})}return this.m(),this.J(),Promise.resolve()}J(){}ea(){let e;if(this.g.ea(t=>{e=jve(t)}),!e)throw Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,t){this.g.attachErrorListener((n,r)=>{this.H.push(Error(r))}),this.g.Ma(),this.g.setGraph(e,t),this.A=void 0,M8(this)}finishProcessing(){this.g.finishProcessing(),M8(this)}close(){this.A=void 0,this.g.closeGraph()}};function zo(e,t){if(!e)throw Error(`Unable to obtain required WebGL resource: ${t}`);return e}Ow.prototype.close=Ow.prototype.close,function(e,t){e=e.split(".");var n,r=Wf;for((e[0]in r)||r.execScript===void 0||r.execScript("var "+e[0]);e.length&&(n=e.shift());)e.length||t===void 0?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}("TaskRunner",Ow);var dO=class{constructor(t,n,r,o){this.g=t,this.h=n,this.m=r,this.l=o}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}};function F8(e,t,n){let r=e.g;if(n=zo(r.createShader(n),"Failed to create WebGL shader"),r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${r.getShaderInfoLog(n)}`);return r.attachShader(e.h,n),n}function P8(e,t){let n=e.g,r=zo(n.createVertexArray(),"Failed to create vertex array");n.bindVertexArray(r);let o=zo(n.createBuffer(),"Failed to create buffer");n.bindBuffer(n.ARRAY_BUFFER,o),n.enableVertexAttribArray(e.P),n.vertexAttribPointer(e.P,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW);let i=zo(n.createBuffer(),"Failed to create buffer");return n.bindBuffer(n.ARRAY_BUFFER,i),n.enableVertexAttribArray(e.J),n.vertexAttribPointer(e.J,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindVertexArray(null),new dO(n,r,o,i)}function cM(e,t){if(e.g){if(t!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=t}function Iv(e,t,n,r){return cM(e,t),e.h||(e.m(),e.C()),n?(e.s||(e.s=P8(e,!0)),n=e.s):(e.v||(e.v=P8(e,!1)),n=e.v),t.useProgram(e.h),n.bind(),e.l(),e=r(),n.g.bindVertexArray(null),e}function bl(e,t,n){return cM(e,t),e=zo(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n??t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n??t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),e}function xE(e,t,n){cM(e,t),e.A||(e.A=zo(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,e.A),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}function lM(e){e.g?.bindFramebuffer(e.g.FRAMEBUFFER,null)}var Mh=class{H(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){let e=this.g;if(this.h=zo(e.createProgram(),"Failed to create WebGL program"),this.ba=F8(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,e.VERTEX_SHADER),this.aa=F8(this,this.H(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);this.P=e.getAttribLocation(this.h,"aVertex"),this.J=e.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){let e=this.g;e.deleteProgram(this.h),e.deleteShader(this.ba),e.deleteShader(this.aa)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}},g0e=class extends Mh{H(){return`
  precision mediump float;
  uniform sampler2D backgroundTexture;
  uniform sampler2D maskTexture;
  uniform sampler2D colorMappingTexture;
  varying vec2 vTex;
  void main() {
    vec4 backgroundColor = texture2D(backgroundTexture, vTex);
    float category = texture2D(maskTexture, vTex).r;
    vec4 categoryColor = texture2D(colorMappingTexture, vec2(category, 0.0));
    gl_FragColor = mix(backgroundColor, categoryColor, categoryColor.a);
  }
 `}C(){let e=this.g;e.activeTexture(e.TEXTURE1),this.B=bl(this,e,e.LINEAR),e.activeTexture(e.TEXTURE2),this.j=bl(this,e,e.NEAREST)}m(){super.m();let e=this.g;this.L=zo(e.getUniformLocation(this.h,"backgroundTexture"),"Uniform location"),this.U=zo(e.getUniformLocation(this.h,"colorMappingTexture"),"Uniform location"),this.K=zo(e.getUniformLocation(this.h,"maskTexture"),"Uniform location")}l(){super.l();let e=this.g;e.uniform1i(this.K,0),e.uniform1i(this.L,1),e.uniform1i(this.U,2)}close(){this.B&&this.g.deleteTexture(this.B),this.j&&this.g.deleteTexture(this.j),super.close()}},y0e=class extends Mh{H(){return`
  precision mediump float;
  uniform sampler2D maskTexture;
  uniform sampler2D defaultTexture;
  uniform sampler2D overlayTexture;
  varying vec2 vTex;
  void main() {
    float confidence = texture2D(maskTexture, vTex).r;
    vec4 defaultColor = texture2D(defaultTexture, vTex);
    vec4 overlayColor = texture2D(overlayTexture, vTex);
    // Apply the alpha from the overlay and merge in the default color
    overlayColor = mix(defaultColor, overlayColor, overlayColor.a);
    gl_FragColor = mix(defaultColor, overlayColor, confidence);
  }
 `}C(){let e=this.g;e.activeTexture(e.TEXTURE1),this.j=bl(this,e),e.activeTexture(e.TEXTURE2),this.B=bl(this,e)}m(){super.m();let e=this.g;this.K=zo(e.getUniformLocation(this.h,"defaultTexture"),"Uniform location"),this.L=zo(e.getUniformLocation(this.h,"overlayTexture"),"Uniform location"),this.I=zo(e.getUniformLocation(this.h,"maskTexture"),"Uniform location")}l(){super.l();let e=this.g;e.uniform1i(this.I,0),e.uniform1i(this.K,1),e.uniform1i(this.L,2)}close(){this.j&&this.g.deleteTexture(this.j),this.B&&this.g.deleteTexture(this.B),super.close()}};function Ju(e,t){switch(t){case 0:return e.g.find(n=>n instanceof Uint8Array);case 1:return e.g.find(n=>n instanceof Float32Array);case 2:return e.g.find(n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture);default:throw Error(`Type is not supported: ${t}`)}}function pO(e){var t=Ju(e,1);if(!t){if(t=Ju(e,0))t=new Float32Array(t).map(r=>r/255);else{t=new Float32Array(e.width*e.height);let r=Th(e);var n=fM(e);if(xE(n,r,Wj(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){n=new Float32Array(e.width*e.height*4),r.readPixels(0,0,e.width,e.height,r.RGBA,r.FLOAT,n);for(let o=0,i=0;o<t.length;++o,i+=4)t[o]=n[i]}else r.readPixels(0,0,e.width,e.height,r.RED,r.FLOAT,t)}e.g.push(t)}return t}function Wj(e){let t=Ju(e,2);if(!t){let n=Th(e);t=Kj(e);let r=pO(e),o=qj(e);n.texImage2D(n.TEXTURE_2D,0,o,e.width,e.height,0,n.RED,n.FLOAT,r),hO(e)}return t}function Th(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=zo(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function qj(e){if(e=Th(e),!Dw)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))Dw=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");Dw=e.R16F}return Dw}function fM(e){return e.l||(e.l=new Mh),e.l}function Kj(e){let t=Th(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=Ju(e,2);return n||(n=bl(fM(e),t,e.m?t.LINEAR:t.NEAREST),e.g.push(n),e.j=!0),t.bindTexture(t.TEXTURE_2D,n),n}function hO(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var Dw,Fr=class{constructor(e,t,n,r,o,i,s){this.g=e,this.m=t,this.j=n,this.canvas=r,this.l=o,this.width=i,this.height=s,this.j&&--$8===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Ha(){return!!Ju(this,0)}la(){return!!Ju(this,1)}R(){return!!Ju(this,2)}ka(){return(t=Ju(e=this,0))||(t=pO(e),t=new Uint8Array(t.map(n=>255*n)),e.g.push(t)),t;var e,t}ja(){return pO(this)}N(){return Wj(this)}clone(){let e=[];for(let t of this.g){let n;if(t instanceof Uint8Array)n=new Uint8Array(t);else if(t instanceof Float32Array)n=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error(`Type is not supported: ${t}`);{let r=Th(this),o=fM(this);r.activeTexture(r.TEXTURE1),n=bl(o,r,this.m?r.LINEAR:r.NEAREST),r.bindTexture(r.TEXTURE_2D,n);let i=qj(this);r.texImage2D(r.TEXTURE_2D,0,i,this.width,this.height,0,r.RED,r.FLOAT,null),r.bindTexture(r.TEXTURE_2D,null),xE(o,r,n),Iv(o,r,!1,()=>{Kj(this),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),hO(this)}),lM(o),hO(this)}}e.push(n)}return new Fr(e,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Th(this).deleteTexture(Ju(this,2)),$8=-1}};Fr.prototype.close=Fr.prototype.close,Fr.prototype.clone=Fr.prototype.clone,Fr.prototype.getAsWebGLTexture=Fr.prototype.N,Fr.prototype.getAsFloat32Array=Fr.prototype.ja,Fr.prototype.getAsUint8Array=Fr.prototype.ka,Fr.prototype.hasWebGLTexture=Fr.prototype.R,Fr.prototype.hasFloat32Array=Fr.prototype.la,Fr.prototype.hasUint8Array=Fr.prototype.Ha;var $8=250,v0e={color:"white",lineWidth:4,radius:6};function Yk(e){return xe(Tt(xe({},v0e),{fillColor:(e=e||{}).color}),e)}function Yu(e,t){return e instanceof Function?e(t):e}function L8(e,t,n){return Math.max(Math.min(t,n),Math.min(Math.max(t,n),e))}function ov(e){if(!e.l)throw Error("CPU rendering requested but CanvasRenderingContext2D not provided.");return e.l}function yv(e){if(!e.j)throw Error("GPU rendering requested but WebGL2RenderingContext not provided.");return e.j}function V8(e,t,n){if(t.R())n(t.N());else{let r=t.la()?t.ja():t.ka();e.m=e.m??new Mh;let o=yv(e);n((e=new Fr([r],t.m,!1,o.canvas,e.m,t.width,t.height)).N()),e.close()}}function B8(e,t,n,r){let o=function(a){return a.g||(a.g=new g0e),a.g}(e),i=yv(e),s=Array.isArray(n)?new ImageData(new Uint8ClampedArray(n),1,1):n;Iv(o,i,!0,()=>{(function(u,c,f,d){let h=u.g;if(h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,c),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,u.B),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,f),u.I&&function(m,v){if(m!==v)return!1;m=m.entries(),v=v.entries();for(let[b,C]of m){m=b;let D=C;var x=v.next();if(x.done)return!1;let[O,F]=x.value;if(x=F,m!==O||D[0]!==x[0]||D[1]!==x[1]||D[2]!==x[2]||D[3]!==x[3])return!1}return!!v.next().done}(u.I,d))h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,u.j);else{u.I=d;let m=Array(1024).fill(0);d.forEach((v,x)=>{if(v.length!==4)throw Error(`Color at index ${x} is not a four-channel value.`);m[4*x]=v[0],m[4*x+1]=v[1],m[4*x+2]=v[2],m[4*x+3]=v[3]}),h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,u.j),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,256,1,0,h.RGBA,h.UNSIGNED_BYTE,new Uint8Array(m))}})(o,t,s,r),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4);let a=o.g;a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,null)})}function U8(e,t,n,r){let o=yv(e),i=function(u){return u.h||(u.h=new y0e),u.h}(e),s=Array.isArray(n)?new ImageData(new Uint8ClampedArray(n),1,1):n,a=Array.isArray(r)?new ImageData(new Uint8ClampedArray(r),1,1):r;Iv(i,o,!0,()=>{var u=i.g;u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,t),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,i.j),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,s),u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,i.B),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,a),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.drawArrays(o.TRIANGLE_FAN,0,4),o.bindTexture(o.TEXTURE_2D,null),(u=i.g).activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,null),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,null),u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,null)})}var yi=class{constructor(e,t){e instanceof CanvasRenderingContext2D||e instanceof OffscreenCanvasRenderingContext2D?(this.l=e,this.j=t):this.j=e}Aa(e,t){if(e){var n=ov(this);t=Yk(t),n.save();var r=n.canvas,o=0;for(let i of e)n.fillStyle=Yu(t.fillColor,{index:o,from:i}),n.strokeStyle=Yu(t.color,{index:o,from:i}),n.lineWidth=Yu(t.lineWidth,{index:o,from:i}),(e=new Path2D).arc(i.x*r.width,i.y*r.height,Yu(t.radius,{index:o,from:i}),0,2*Math.PI),n.fill(e),n.stroke(e),++o;n.restore()}}za(e,t,n){if(e&&t){var r=ov(this);n=Yk(n),r.save();var o=r.canvas,i=0;for(let s of t){r.beginPath(),t=e[s.start];let a=e[s.end];t&&a&&(r.strokeStyle=Yu(n.color,{index:i,from:t,to:a}),r.lineWidth=Yu(n.lineWidth,{index:i,from:t,to:a}),r.moveTo(t.x*o.width,t.y*o.height),r.lineTo(a.x*o.width,a.y*o.height)),++i,r.stroke()}r.restore()}}wa(e,t){let n=ov(this);t=Yk(t),n.save(),n.beginPath(),n.lineWidth=Yu(t.lineWidth,{}),n.strokeStyle=Yu(t.color,{}),n.fillStyle=Yu(t.fillColor,{}),n.moveTo(e.originX,e.originY),n.lineTo(e.originX+e.width,e.originY),n.lineTo(e.originX+e.width,e.originY+e.height),n.lineTo(e.originX,e.originY+e.height),n.lineTo(e.originX,e.originY),n.stroke(),n.fill(),n.restore()}xa(e,t,n=[0,0,0,255]){this.l?function(r,o,i,s){let a=yv(r);V8(r,o,u=>{B8(r,u,i,s),(u=ov(r)).drawImage(a.canvas,0,0,u.canvas.width,u.canvas.height)})}(this,e,n,t):B8(this,e.N(),n,t)}ya(e,t,n){this.l?function(r,o,i,s){let a=yv(r);V8(r,o,u=>{U8(r,u,i,s),(u=ov(r)).drawImage(a.canvas,0,0,u.canvas.width,u.canvas.height)})}(this,e,t,n):U8(this,e.N(),t,n)}close(){this.g?.close(),this.g=void 0,this.h?.close(),this.h=void 0,this.m?.close(),this.m=void 0}};function ru(e,t){switch(t){case 0:return e.g.find(n=>n instanceof ImageData);case 1:return e.g.find(n=>typeof ImageBitmap<"u"&&n instanceof ImageBitmap);case 2:return e.g.find(n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture);default:throw Error(`Type is not supported: ${t}`)}}function Xj(e){var t=ru(e,0);if(!t){t=_h(e);let n=bE(e),r=new Uint8Array(e.width*e.height*4);xE(n,t,Mw(e)),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,r),lM(n),t=new ImageData(new Uint8ClampedArray(r.buffer),e.width,e.height),e.g.push(t)}return t}function Mw(e){let t=ru(e,2);if(!t){let n=_h(e);t=Fw(e);let r=ru(e,1)||Xj(e);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),sv(e)}return t}function _h(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return e.h||(e.h=zo(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function bE(e){return e.l||(e.l=new Mh),e.l}function Fw(e){let t=_h(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=ru(e,2);return n||(n=bl(bE(e),t),e.g.push(n),e.m=!0),t.bindTexture(t.TEXTURE_2D,n),n}function sv(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}function G8(e){let t=_h(e);return Iv(bE(e),t,!0,()=>function(n,r){let o=n.canvas;if(o.width===n.width&&o.height===n.height)return r();let i=o.width,s=o.height;return o.width=n.width,o.height=n.height,n=r(),o.width=i,o.height=s,n}(e,()=>{if(t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),!(e.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return e.canvas.transferToImageBitmap()}))}yi.prototype.close=yi.prototype.close,yi.prototype.drawConfidenceMask=yi.prototype.ya,yi.prototype.drawCategoryMask=yi.prototype.xa,yi.prototype.drawBoundingBox=yi.prototype.wa,yi.prototype.drawConnectors=yi.prototype.za,yi.prototype.drawLandmarks=yi.prototype.Aa,yi.lerp=function(e,t,n,r,o){return L8(r*(1-(e-t)/(n-t))+o*(1-(n-e)/(n-t)),r,o)},yi.clamp=L8;var qr=class{constructor(e,t,n,r,o,i,s){this.g=e,this.j=t,this.m=n,this.canvas=r,this.l=o,this.width=i,this.height=s,(this.j||this.m)&&--j8===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ga(){return!!ru(this,0)}ma(){return!!ru(this,1)}R(){return!!ru(this,2)}Ea(){return Xj(this)}Da(){var e=ru(this,1);return e||(Mw(this),Fw(this),e=G8(this),sv(this),this.g.push(e),this.j=!0),e}N(){return Mw(this)}clone(){let e=[];for(let t of this.g){let n;if(t instanceof ImageData)n=new ImageData(t.data,this.width,this.height);else if(t instanceof WebGLTexture){let r=_h(this),o=bE(this);r.activeTexture(r.TEXTURE1),n=bl(o,r),r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindTexture(r.TEXTURE_2D,null),xE(o,r,n),Iv(o,r,!1,()=>{Fw(this),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),sv(this)}),lM(o),sv(this)}else{if(!(t instanceof ImageBitmap))throw Error(`Type is not supported: ${t}`);Mw(this),Fw(this),n=G8(this),sv(this)}e.push(n)}return new qr(e,this.ma(),this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&ru(this,1).close(),this.m&&_h(this).deleteTexture(ru(this,2)),j8=-1}};qr.prototype.close=qr.prototype.close,qr.prototype.clone=qr.prototype.clone,qr.prototype.getAsWebGLTexture=qr.prototype.N,qr.prototype.getAsImageBitmap=qr.prototype.Da,qr.prototype.getAsImageData=qr.prototype.Ea,qr.prototype.hasWebGLTexture=qr.prototype.R,qr.prototype.hasImageBitmap=qr.prototype.ma,qr.prototype.hasImageData=qr.prototype.Ga;var j8=250;function ba(...e){return e.map(([t,n])=>({start:t,end:n}))}var x0e=function(e){return class extends e{Ma(){this.i._registerModelResourcesGraphService()}}}((z8=class{constructor(e,t){this.l=!0,this.i=e,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",t!==void 0?this.i.canvas=t:zj()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}initializeGraph(e){return ne(this,null,function*(){let t=yield(yield fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)})}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){let n=e.length,r=this.i._malloc(n);this.i.HEAPU8.set(e,r),t?this.i._changeBinaryGraph(n,r):this.i._changeTextGraph(n,r),this.i._free(r)}configureAudio(e,t,n,r,o){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),je(this,r||"input_audio",i=>{je(this,o=o||"audio_header",s=>{this.i._configureAudio(i,s,e,t??0,n)})})}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}ea(e){eu(this,"__graph_config__",t=>{e(t)}),je(this,"__graph_config__",t=>{this.i._getGraphConfig(t,void 0)}),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=t}addAudioToStream(e,t,n){this.addAudioToStreamWithShape(e,0,0,t,n)}addAudioToStreamWithShape(e,t,n,r,o){let i=4*e.length;this.h!==i&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(i),this.h=i),this.i.HEAPF32.set(e,this.g/4),je(this,r,s=>{this.i._addAudioToInputStream(this.g,t,n,s,o)})}addGpuBufferToStream(e,t,n){je(this,t,r=>{let[o,i]=k8(this,e,r);this.i._addBoundTextureToStream(r,o,i,n)})}addBoolToStream(e,t,n){je(this,t,r=>{this.i._addBoolToInputStream(e,r,n)})}addDoubleToStream(e,t,n){je(this,t,r=>{this.i._addDoubleToInputStream(e,r,n)})}addFloatToStream(e,t,n){je(this,t,r=>{this.i._addFloatToInputStream(e,r,n)})}addIntToStream(e,t,n){je(this,t,r=>{this.i._addIntToInputStream(e,r,n)})}addUintToStream(e,t,n){je(this,t,r=>{this.i._addUintToInputStream(e,r,n)})}addStringToStream(e,t,n){je(this,t,r=>{je(this,e,o=>{this.i._addStringToInputStream(o,r,n)})})}addStringRecordToStream(e,t,n){je(this,t,r=>{O8(this,Object.keys(e),o=>{O8(this,Object.values(e),i=>{this.i._addFlatHashMapToInputStream(o,i,Object.keys(e).length,r,n)})})})}addProtoToStream(e,t,n,r){je(this,n,o=>{je(this,t,i=>{let s=this.i._malloc(e.length);this.i.HEAPU8.set(e,s),this.i._addProtoToInputStream(s,e.length,i,o,r),this.i._free(s)})})}addEmptyPacketToStream(e,t){je(this,e,n=>{this.i._addEmptyPacketToInputStream(n,t)})}addBoolVectorToStream(e,t,n){je(this,t,r=>{let o=this.i._allocateBoolVector(e.length);if(!o)throw Error("Unable to allocate new bool vector on heap.");for(let i of e)this.i._addBoolVectorEntry(o,i);this.i._addBoolVectorToInputStream(o,r,n)})}addDoubleVectorToStream(e,t,n){je(this,t,r=>{let o=this.i._allocateDoubleVector(e.length);if(!o)throw Error("Unable to allocate new double vector on heap.");for(let i of e)this.i._addDoubleVectorEntry(o,i);this.i._addDoubleVectorToInputStream(o,r,n)})}addFloatVectorToStream(e,t,n){je(this,t,r=>{let o=this.i._allocateFloatVector(e.length);if(!o)throw Error("Unable to allocate new float vector on heap.");for(let i of e)this.i._addFloatVectorEntry(o,i);this.i._addFloatVectorToInputStream(o,r,n)})}addIntVectorToStream(e,t,n){je(this,t,r=>{let o=this.i._allocateIntVector(e.length);if(!o)throw Error("Unable to allocate new int vector on heap.");for(let i of e)this.i._addIntVectorEntry(o,i);this.i._addIntVectorToInputStream(o,r,n)})}addUintVectorToStream(e,t,n){je(this,t,r=>{let o=this.i._allocateUintVector(e.length);if(!o)throw Error("Unable to allocate new unsigned int vector on heap.");for(let i of e)this.i._addUintVectorEntry(o,i);this.i._addUintVectorToInputStream(o,r,n)})}addStringVectorToStream(e,t,n){je(this,t,r=>{let o=this.i._allocateStringVector(e.length);if(!o)throw Error("Unable to allocate new string vector on heap.");for(let i of e)je(this,i,s=>{this.i._addStringVectorEntry(o,s)});this.i._addStringVectorToInputStream(o,r,n)})}addBoolToInputSidePacket(e,t){je(this,t,n=>{this.i._addBoolToInputSidePacket(e,n)})}addDoubleToInputSidePacket(e,t){je(this,t,n=>{this.i._addDoubleToInputSidePacket(e,n)})}addFloatToInputSidePacket(e,t){je(this,t,n=>{this.i._addFloatToInputSidePacket(e,n)})}addIntToInputSidePacket(e,t){je(this,t,n=>{this.i._addIntToInputSidePacket(e,n)})}addUintToInputSidePacket(e,t){je(this,t,n=>{this.i._addUintToInputSidePacket(e,n)})}addStringToInputSidePacket(e,t){je(this,t,n=>{je(this,e,r=>{this.i._addStringToInputSidePacket(r,n)})})}addProtoToInputSidePacket(e,t,n){je(this,n,r=>{je(this,t,o=>{let i=this.i._malloc(e.length);this.i.HEAPU8.set(e,i),this.i._addProtoToInputSidePacket(i,e.length,o,r),this.i._free(i)})})}addBoolVectorToInputSidePacket(e,t){je(this,t,n=>{let r=this.i._allocateBoolVector(e.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(let o of e)this.i._addBoolVectorEntry(r,o);this.i._addBoolVectorToInputSidePacket(r,n)})}addDoubleVectorToInputSidePacket(e,t){je(this,t,n=>{let r=this.i._allocateDoubleVector(e.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(let o of e)this.i._addDoubleVectorEntry(r,o);this.i._addDoubleVectorToInputSidePacket(r,n)})}addFloatVectorToInputSidePacket(e,t){je(this,t,n=>{let r=this.i._allocateFloatVector(e.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(let o of e)this.i._addFloatVectorEntry(r,o);this.i._addFloatVectorToInputSidePacket(r,n)})}addIntVectorToInputSidePacket(e,t){je(this,t,n=>{let r=this.i._allocateIntVector(e.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(let o of e)this.i._addIntVectorEntry(r,o);this.i._addIntVectorToInputSidePacket(r,n)})}addUintVectorToInputSidePacket(e,t){je(this,t,n=>{let r=this.i._allocateUintVector(e.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(let o of e)this.i._addUintVectorEntry(r,o);this.i._addUintVectorToInputSidePacket(r,n)})}addStringVectorToInputSidePacket(e,t){je(this,t,n=>{let r=this.i._allocateStringVector(e.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(let o of e)je(this,o,i=>{this.i._addStringVectorEntry(r,i)});this.i._addStringVectorToInputSidePacket(r,n)})}attachBoolListener(e,t){eu(this,e,t),je(this,e,n=>{this.i._attachBoolListener(n)})}attachBoolVectorListener(e,t){cl(this,e,t),je(this,e,n=>{this.i._attachBoolVectorListener(n)})}attachIntListener(e,t){eu(this,e,t),je(this,e,n=>{this.i._attachIntListener(n)})}attachIntVectorListener(e,t){cl(this,e,t),je(this,e,n=>{this.i._attachIntVectorListener(n)})}attachUintListener(e,t){eu(this,e,t),je(this,e,n=>{this.i._attachUintListener(n)})}attachUintVectorListener(e,t){cl(this,e,t),je(this,e,n=>{this.i._attachUintVectorListener(n)})}attachDoubleListener(e,t){eu(this,e,t),je(this,e,n=>{this.i._attachDoubleListener(n)})}attachDoubleVectorListener(e,t){cl(this,e,t),je(this,e,n=>{this.i._attachDoubleVectorListener(n)})}attachFloatListener(e,t){eu(this,e,t),je(this,e,n=>{this.i._attachFloatListener(n)})}attachFloatVectorListener(e,t){cl(this,e,t),je(this,e,n=>{this.i._attachFloatVectorListener(n)})}attachStringListener(e,t){eu(this,e,t),je(this,e,n=>{this.i._attachStringListener(n)})}attachStringVectorListener(e,t){cl(this,e,t),je(this,e,n=>{this.i._attachStringVectorListener(n)})}attachProtoListener(e,t,n){eu(this,e,t),je(this,e,r=>{this.i._attachProtoListener(r,n||!1)})}attachProtoVectorListener(e,t,n){cl(this,e,t),je(this,e,r=>{this.i._attachProtoVectorListener(r,n||!1)})}attachAudioListener(e,t,n){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),eu(this,e,(r,o)=>{r=new Float32Array(r.buffer,r.byteOffset,r.length/4),t(r,o)}),je(this,e,r=>{this.i._attachAudioListener(r,n||!1)})}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends z8{get ga(){return this.i}sa(e,t,n){je(this,t,r=>{let[o,i]=k8(this,e,r);this.ga._addBoundTextureAsImageToStream(r,o,i,n)})}V(e,t){eu(this,e,t),je(this,e,n=>{this.ga._attachImageListener(n)})}da(e,t){cl(this,e,t),je(this,e,n=>{this.ga._attachImageVectorListener(n)})}})),z8,Gs=class extends x0e{};function Lt(e,t,n){return ne(this,null,function*(){return function(r,o,i,s){return ne(this,null,function*(){return m0e(r,o,i,s)})}(e,n.canvas??(zj()?void 0:document.createElement("canvas")),t,n)})}function Yj(e,t,n,r){if(e.U){let i=new xj;if(n?.regionOfInterest){if(!e.ra)throw Error("This task doesn't support region-of-interest.");var o=n.regionOfInterest;if(o.left>=o.right||o.top>=o.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(o.left<0||o.top<0||o.right>1||o.bottom>1)throw Error("Expected RectF values to be in [0,1].");Be(i,1,(o.left+o.right)/2),Be(i,2,(o.top+o.bottom)/2),Be(i,4,o.right-o.left),Be(i,3,o.bottom-o.top)}else Be(i,1,.5),Be(i,2,.5),Be(i,4,1),Be(i,3,1);if(n?.rotationDegrees){if(n?.rotationDegrees%90!=0)throw Error("Expected rotation to be a multiple of 90\xB0.");if(Be(i,5,-Math.PI*n.rotationDegrees/180),n?.rotationDegrees%180!=0){let[s,a]=Hj(t);n=vr(i,3)*a/s,o=vr(i,4)*s/a,Be(i,4,n),Be(i,3,o)}}e.g.addProtoToStream(i.g(),"mediapipe.NormalizedRect",e.U,r)}e.g.sa(t,e.ba,r??performance.now()),e.finishProcessing()}function js(e,t,n){if(e.baseOptions?.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");Yj(e,t,n,e.B+1)}function au(e,t,n,r){if(!e.baseOptions?.g())throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");Yj(e,t,n,r)}function Ih(e,t,n,r){var o=t.data;let i=t.width,s=i*(t=t.height);if((o instanceof Uint8Array||o instanceof Float32Array)&&o.length!==s)throw Error("Unsupported channel count: "+o.length/s);return e=new Fr([o],n,!1,e.g.i.canvas,e.P,i,t),r?e.clone():e}var xi=class extends Ow{constructor(e,t,n,r){super(e),this.g=e,this.ba=t,this.U=n,this.ra=r,this.P=new Mh}l(e,t=!0){if("runningMode"in e&&mv(this.baseOptions,2,!!e.runningMode&&e.runningMode!=="IMAGE"),e.canvas!==void 0&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,t)}close(){this.P.close(),super.close()}};xi.prototype.close=xi.prototype.close;var Fs=class extends xi{constructor(e,t){super(new Gs(e,t),"image_in","norm_rect_in",!1),this.j={detections:[]},qe(e=this.h=new mE,0,1,t=new Wn),Be(this.h,2,.5),Be(this.h,3,.3)}get baseOptions(){return Xt(this.h,Wn,1)}set baseOptions(e){qe(this.h,0,1,e)}o(e){return"minDetectionConfidence"in e&&Be(this.h,2,e.minDetectionConfidence??.5),"minSuppressionThreshold"in e&&Be(this.h,3,e.minSuppressionThreshold??.3),this.l(e)}D(e,t){return this.j={detections:[]},js(this,e,t),this.j}F(e,t,n){return this.j={detections:[]},au(this,e,n,t),this.j}m(){var e=new Ei;Pn(e,"image_in"),Pn(e,"norm_rect_in"),Zt(e,"detections");let t=new ls;ya(t,t0e,this.h);let n=new Ho;fs(n,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect_in"),zt(n,"DETECTIONS:detections"),n.o(t),ds(e,n),this.g.attachProtoVectorListener("detections",(r,o)=>{for(let i of r)r=gj(i),this.j.detections.push(Gj(r));Re(this,o)}),this.g.attachEmptyPacketListener("detections",r=>{Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Fs.prototype.detectForVideo=Fs.prototype.F,Fs.prototype.detect=Fs.prototype.D,Fs.prototype.setOptions=Fs.prototype.o,Fs.createFromModelPath=function(e,t){return ne(this,null,function*(){return Lt(Fs,e,{baseOptions:{modelAssetPath:t}})})},Fs.createFromModelBuffer=function(e,t){return Lt(Fs,e,{baseOptions:{modelAssetBuffer:t}})},Fs.createFromOptions=function(e,t){return Lt(Fs,e,t)};var dM=ba([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),pM=ba([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),hM=ba([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),Zj=ba([474,475],[475,476],[476,477],[477,474]),mM=ba([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),gM=ba([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),Qj=ba([469,470],[470,471],[471,472],[472,469]),yM=ba([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),Jj=[...dM,...pM,...hM,...mM,...gM,...yM],ez=ba([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function H8(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var ur=class extends xi{constructor(e,t){super(new Gs(e,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,qe(e=this.h=new Tj,0,1,t=new Wn),this.v=new Cj,qe(this.h,0,3,this.v),this.s=new mE,qe(this.h,0,2,this.s),iu(this.s,4,1),Be(this.s,2,.5),Be(this.v,2,.5),Be(this.h,4,.5)}get baseOptions(){return Xt(this.h,Wn,1)}set baseOptions(e){qe(this.h,0,1,e)}o(e){return"numFaces"in e&&iu(this.s,4,e.numFaces??1),"minFaceDetectionConfidence"in e&&Be(this.s,2,e.minFaceDetectionConfidence??.5),"minTrackingConfidence"in e&&Be(this.h,4,e.minTrackingConfidence??.5),"minFacePresenceConfidence"in e&&Be(this.v,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}D(e,t){return H8(this),js(this,e,t),this.j}F(e,t,n){return H8(this),au(this,e,n,t),this.j}m(){var e=new Ei;Pn(e,"image_in"),Pn(e,"norm_rect"),Zt(e,"face_landmarks");let t=new ls;ya(t,r0e,this.h);let n=new Ho;fs(n,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),zt(n,"NORM_LANDMARKS:face_landmarks"),n.o(t),ds(e,n),this.g.attachProtoVectorListener("face_landmarks",(r,o)=>{for(let i of r)r=_v(i),this.j.faceLandmarks.push(gE(r));Re(this,o)}),this.g.attachEmptyPacketListener("face_landmarks",r=>{Re(this,r)}),this.outputFaceBlendshapes&&(Zt(e,"blendshapes"),zt(n,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",(r,o)=>{if(this.outputFaceBlendshapes)for(let i of r)r=hE(i),this.j.faceBlendshapes.push(uM(r.g()??[]));Re(this,o)}),this.g.attachEmptyPacketListener("blendshapes",r=>{Re(this,r)})),this.outputFacialTransformationMatrixes&&(Zt(e,"face_geometry"),zt(n,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",(r,o)=>{if(this.outputFacialTransformationMatrixes)for(let i of r)(r=Xt(n0e(i),qve,2))&&this.j.facialTransformationMatrixes.push({rows:ma(Vs(r,1),0)??0,columns:ma(Vs(r,2),0)??0,data:jf(r,3,wl,Gf()).slice()??[]});Re(this,o)}),this.g.attachEmptyPacketListener("face_geometry",r=>{Re(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ur.prototype.detectForVideo=ur.prototype.F,ur.prototype.detect=ur.prototype.D,ur.prototype.setOptions=ur.prototype.o,ur.createFromModelPath=function(e,t){return Lt(ur,e,{baseOptions:{modelAssetPath:t}})},ur.createFromModelBuffer=function(e,t){return Lt(ur,e,{baseOptions:{modelAssetBuffer:t}})},ur.createFromOptions=function(e,t){return Lt(ur,e,t)},ur.FACE_LANDMARKS_LIPS=dM,ur.FACE_LANDMARKS_LEFT_EYE=pM,ur.FACE_LANDMARKS_LEFT_EYEBROW=hM,ur.FACE_LANDMARKS_LEFT_IRIS=Zj,ur.FACE_LANDMARKS_RIGHT_EYE=mM,ur.FACE_LANDMARKS_RIGHT_EYEBROW=gM,ur.FACE_LANDMARKS_RIGHT_IRIS=Qj,ur.FACE_LANDMARKS_FACE_OVAL=yM,ur.FACE_LANDMARKS_CONTOURS=Jj,ur.FACE_LANDMARKS_TESSELATION=ez;var tu=class extends xi{constructor(e,t){super(new Gs(e,t),"image_in","norm_rect",!0),qe(e=this.j=new Ij,0,1,t=new Wn)}get baseOptions(){return Xt(this.j,Wn,1)}set baseOptions(e){qe(this.j,0,1,e)}o(e){return super.l(e)}Pa(e,t,n){let r=typeof t!="function"?t:{};if(this.h=typeof t=="function"?t:n,js(this,e,r??{}),!this.h)return this.s}m(){var e=new Ei;Pn(e,"image_in"),Pn(e,"norm_rect"),Zt(e,"stylized_image");let t=new ls;ya(t,o0e,this.j);let n=new Ho;fs(n,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),zt(n,"STYLIZED_IMAGE:stylized_image"),n.o(t),ds(e,n),this.g.V("stylized_image",(r,o)=>{var i=!this.h,s=r.data,a=r.width;let u=a*(r=r.height);if(s instanceof Uint8Array)if(s.length===3*u){let c=new Uint8ClampedArray(4*u);for(let f=0;f<u;++f)c[4*f]=s[3*f],c[4*f+1]=s[3*f+1],c[4*f+2]=s[3*f+2],c[4*f+3]=255;s=new ImageData(c,a,r)}else{if(s.length!==4*u)throw Error("Unsupported channel count: "+s.length/u);s=new ImageData(new Uint8ClampedArray(s.buffer,s.byteOffset,s.length),a,r)}else if(!(s instanceof WebGLTexture))throw Error(`Unsupported format: ${s.constructor.name}`);a=new qr([s],!1,!1,this.g.i.canvas,this.P,a,r),this.s=i=i?a.clone():a,this.h&&this.h(i),Re(this,o)}),this.g.attachEmptyPacketListener("stylized_image",r=>{this.s=null,this.h&&this.h(null),Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};tu.prototype.stylize=tu.prototype.Pa,tu.prototype.setOptions=tu.prototype.o,tu.createFromModelPath=function(e,t){return Lt(tu,e,{baseOptions:{modelAssetPath:t}})},tu.createFromModelBuffer=function(e,t){return Lt(tu,e,{baseOptions:{modelAssetBuffer:t}})},tu.createFromOptions=function(e,t){return Lt(tu,e,t)};var vM=ba([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function W8(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function q8(e){return e.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function K8(e,t=!0){let n=[];for(let o of e){var r=hE(o);e=[];for(let i of r.g())r=t&&Vs(i,1)!=null?ma(Vs(i,1),0):-1,e.push({score:vr(i,2)??0,index:r,categoryName:ou(i,3)??"",displayName:ou(i,4)??""});n.push(e)}return n}var ss=class extends xi{constructor(e,t){super(new Gs(e,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],qe(e=this.j=new Nj,0,1,t=new Wn),this.s=new oM,qe(this.j,0,2,this.s),this.C=new rM,qe(this.s,0,3,this.C),this.v=new Dj,qe(this.s,0,2,this.v),this.h=new i0e,qe(this.j,0,3,this.h),Be(this.v,2,.5),Be(this.s,4,.5),Be(this.C,2,.5)}get baseOptions(){return Xt(this.j,Wn,1)}set baseOptions(e){qe(this.j,0,1,e)}o(e){if(iu(this.v,3,e.numHands??1),"minHandDetectionConfidence"in e&&Be(this.v,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&Be(this.s,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&Be(this.C,2,e.minHandPresenceConfidence??.5),e.cannedGesturesClassifierOptions){var t=new ph,n=t,r=fO(e.cannedGesturesClassifierOptions,Xt(this.h,ph,3)?.h());qe(n,0,2,r),qe(this.h,0,3,t)}else e.cannedGesturesClassifierOptions===void 0&&Xt(this.h,ph,3)?.g();return e.customGesturesClassifierOptions?(qe(n=t=new ph,0,2,r=fO(e.customGesturesClassifierOptions,Xt(this.h,ph,4)?.h())),qe(this.h,0,4,t)):e.customGesturesClassifierOptions===void 0&&Xt(this.h,ph,4)?.g(),this.l(e)}Ka(e,t){return W8(this),js(this,e,t),q8(this)}La(e,t,n){return W8(this),au(this,e,n,t),q8(this)}m(){var e=new Ei;Pn(e,"image_in"),Pn(e,"norm_rect"),Zt(e,"hand_gestures"),Zt(e,"hand_landmarks"),Zt(e,"world_hand_landmarks"),Zt(e,"handedness");let t=new ls;ya(t,s0e,this.j);let n=new Ho;fs(n,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),zt(n,"HAND_GESTURES:hand_gestures"),zt(n,"LANDMARKS:hand_landmarks"),zt(n,"WORLD_LANDMARKS:world_hand_landmarks"),zt(n,"HANDEDNESS:handedness"),n.o(t),ds(e,n),this.g.attachProtoVectorListener("hand_landmarks",(r,o)=>{for(let i of r){r=_v(i);let s=[];for(let a of tc(r,vj,1))s.push({x:vr(a,1)??0,y:vr(a,2)??0,z:vr(a,3)??0,visibility:vr(a,4)??0});this.landmarks.push(s)}Re(this,o)}),this.g.attachEmptyPacketListener("hand_landmarks",r=>{Re(this,r)}),this.g.attachProtoVectorListener("world_hand_landmarks",(r,o)=>{for(let i of r){r=yh(i);let s=[];for(let a of tc(r,yj,1))s.push({x:vr(a,1)??0,y:vr(a,2)??0,z:vr(a,3)??0,visibility:vr(a,4)??0});this.worldLandmarks.push(s)}Re(this,o)}),this.g.attachEmptyPacketListener("world_hand_landmarks",r=>{Re(this,r)}),this.g.attachProtoVectorListener("hand_gestures",(r,o)=>{this.gestures.push(...K8(r,!1)),Re(this,o)}),this.g.attachEmptyPacketListener("hand_gestures",r=>{Re(this,r)}),this.g.attachProtoVectorListener("handedness",(r,o)=>{this.handedness.push(...K8(r)),Re(this,o)}),this.g.attachEmptyPacketListener("handedness",r=>{Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function X8(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}ss.prototype.recognizeForVideo=ss.prototype.La,ss.prototype.recognize=ss.prototype.Ka,ss.prototype.setOptions=ss.prototype.o,ss.createFromModelPath=function(e,t){return Lt(ss,e,{baseOptions:{modelAssetPath:t}})},ss.createFromModelBuffer=function(e,t){return Lt(ss,e,{baseOptions:{modelAssetBuffer:t}})},ss.createFromOptions=function(e,t){return Lt(ss,e,t)},ss.HAND_CONNECTIONS=vM;var jo=class extends xi{constructor(e,t){super(new Gs(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],qe(e=this.h=new oM,0,1,t=new Wn),this.s=new rM,qe(this.h,0,3,this.s),this.j=new Dj,qe(this.h,0,2,this.j),iu(this.j,3,1),Be(this.j,2,.5),Be(this.s,2,.5),Be(this.h,4,.5)}get baseOptions(){return Xt(this.h,Wn,1)}set baseOptions(e){qe(this.h,0,1,e)}o(e){return"numHands"in e&&iu(this.j,3,e.numHands??1),"minHandDetectionConfidence"in e&&Be(this.j,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&Be(this.h,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&Be(this.s,2,e.minHandPresenceConfidence??.5),this.l(e)}D(e,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],js(this,e,t),X8(this)}F(e,t,n){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],au(this,e,n,t),X8(this)}m(){var e=new Ei;Pn(e,"image_in"),Pn(e,"norm_rect"),Zt(e,"hand_landmarks"),Zt(e,"world_hand_landmarks"),Zt(e,"handedness");let t=new ls;ya(t,a0e,this.h);let n=new Ho;fs(n,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),zt(n,"LANDMARKS:hand_landmarks"),zt(n,"WORLD_LANDMARKS:world_hand_landmarks"),zt(n,"HANDEDNESS:handedness"),n.o(t),ds(e,n),this.g.attachProtoVectorListener("hand_landmarks",(r,o)=>{for(let i of r)r=_v(i),this.landmarks.push(gE(r));Re(this,o)}),this.g.attachEmptyPacketListener("hand_landmarks",r=>{Re(this,r)}),this.g.attachProtoVectorListener("world_hand_landmarks",(r,o)=>{for(let i of r)r=yh(i),this.worldLandmarks.push(fv(r));Re(this,o)}),this.g.attachEmptyPacketListener("world_hand_landmarks",r=>{Re(this,r)}),this.g.attachProtoVectorListener("handedness",(r,o)=>{var i=this.handedness,s=i.push;let a=[];for(let u of r){r=hE(u);let c=[];for(let f of r.g())c.push({score:vr(f,2)??0,index:ma(Vs(f,1),0)??-1,categoryName:ou(f,3)??"",displayName:ou(f,4)??""});a.push(c)}s.call(i,...a),Re(this,o)}),this.g.attachEmptyPacketListener("handedness",r=>{Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};jo.prototype.detectForVideo=jo.prototype.F,jo.prototype.detect=jo.prototype.D,jo.prototype.setOptions=jo.prototype.o,jo.createFromModelPath=function(e,t){return Lt(jo,e,{baseOptions:{modelAssetPath:t}})},jo.createFromModelBuffer=function(e,t){return Lt(jo,e,{baseOptions:{modelAssetBuffer:t}})},jo.createFromOptions=function(e,t){return Lt(jo,e,t)},jo.HAND_CONNECTIONS=vM;var tz=ba([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function Y8(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function Z8(e){try{if(!e.C)return e.h;e.C(e.h)}finally{vE(e)}}function Nw(e,t){e=_v(e),t.push(gE(e))}var zn=class extends xi{constructor(e,t){super(new Gs(e,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,qe(e=this.j=new Mj,0,1,t=new Wn),this.K=new rM,qe(this.j,0,2,this.K),this.aa=new u0e,qe(this.j,0,3,this.aa),this.s=new mE,qe(this.j,0,4,this.s),this.I=new Cj,qe(this.j,0,5,this.I),this.v=new kj,qe(this.j,0,6,this.v),this.L=new Oj,qe(this.j,0,7,this.L),Be(this.s,2,.5),Be(this.s,3,.3),Be(this.I,2,.5),Be(this.v,2,.5),Be(this.v,3,.3),Be(this.L,2,.5),Be(this.K,2,.5)}get baseOptions(){return Xt(this.j,Wn,1)}set baseOptions(e){qe(this.j,0,1,e)}o(e){return"minFaceDetectionConfidence"in e&&Be(this.s,2,e.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in e&&Be(this.s,3,e.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in e&&Be(this.I,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&Be(this.v,2,e.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in e&&Be(this.v,3,e.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in e&&Be(this.L,2,e.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&Be(this.K,2,e.minHandLandmarksConfidence??.5),this.l(e)}D(e,t,n){let r=typeof t!="function"?t:{};return this.C=typeof t=="function"?t:n,Y8(this),js(this,e,r),Z8(this)}F(e,t,n,r){let o=typeof n!="function"?n:{};return this.C=typeof n=="function"?n:r,Y8(this),au(this,e,o,t),Z8(this)}m(){var e=new Ei;Pn(e,"input_frames_image"),Zt(e,"pose_landmarks"),Zt(e,"pose_world_landmarks"),Zt(e,"face_landmarks"),Zt(e,"left_hand_landmarks"),Zt(e,"left_hand_world_landmarks"),Zt(e,"right_hand_landmarks"),Zt(e,"right_hand_world_landmarks");let t=new ls,n=new g8;oO(n,1,Nh("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),function(o,i){if(i!=null)if(Array.isArray(i))An(o,2,nE(i,OO,void 0,void 0,!1));else{if(!(typeof i=="string"||i instanceof ec||vv(i)))throw Error("invalid value in Any.value field: "+i+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");oO(o,2,CO(i,!1,!1),qf())}}(n,this.j.g());let r=new Ho;fs(r,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),jw(r,8,g8,n),Rn(r,"IMAGE:input_frames_image"),zt(r,"POSE_LANDMARKS:pose_landmarks"),zt(r,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),zt(r,"FACE_LANDMARKS:face_landmarks"),zt(r,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),zt(r,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),zt(r,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),zt(r,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),r.o(t),ds(e,r),yE(this,e),this.g.attachProtoListener("pose_landmarks",(o,i)=>{Nw(o,this.h.poseLandmarks),Re(this,i)}),this.g.attachEmptyPacketListener("pose_landmarks",o=>{Re(this,o)}),this.g.attachProtoListener("pose_world_landmarks",(o,i)=>{var s=this.h.poseWorldLandmarks;o=yh(o),s.push(fv(o)),Re(this,i)}),this.g.attachEmptyPacketListener("pose_world_landmarks",o=>{Re(this,o)}),this.outputPoseSegmentationMasks&&(zt(r,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),Ch(this,"pose_segmentation_mask"),this.g.V("pose_segmentation_mask",(o,i)=>{this.h.poseSegmentationMasks=[Ih(this,o,!0,!this.C)],Re(this,i)}),this.g.attachEmptyPacketListener("pose_segmentation_mask",o=>{this.h.poseSegmentationMasks=[],Re(this,o)})),this.g.attachProtoListener("face_landmarks",(o,i)=>{Nw(o,this.h.faceLandmarks),Re(this,i)}),this.g.attachEmptyPacketListener("face_landmarks",o=>{Re(this,o)}),this.outputFaceBlendshapes&&(Zt(e,"extra_blendshapes"),zt(r,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",(o,i)=>{var s=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(o=hE(o),s.push(uM(o.g()??[]))),Re(this,i)}),this.g.attachEmptyPacketListener("extra_blendshapes",o=>{Re(this,o)})),this.g.attachProtoListener("left_hand_landmarks",(o,i)=>{Nw(o,this.h.leftHandLandmarks),Re(this,i)}),this.g.attachEmptyPacketListener("left_hand_landmarks",o=>{Re(this,o)}),this.g.attachProtoListener("left_hand_world_landmarks",(o,i)=>{var s=this.h.leftHandWorldLandmarks;o=yh(o),s.push(fv(o)),Re(this,i)}),this.g.attachEmptyPacketListener("left_hand_world_landmarks",o=>{Re(this,o)}),this.g.attachProtoListener("right_hand_landmarks",(o,i)=>{Nw(o,this.h.rightHandLandmarks),Re(this,i)}),this.g.attachEmptyPacketListener("right_hand_landmarks",o=>{Re(this,o)}),this.g.attachProtoListener("right_hand_world_landmarks",(o,i)=>{var s=this.h.rightHandWorldLandmarks;o=yh(o),s.push(fv(o)),Re(this,i)}),this.g.attachEmptyPacketListener("right_hand_world_landmarks",o=>{Re(this,o)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};zn.prototype.detectForVideo=zn.prototype.F,zn.prototype.detect=zn.prototype.D,zn.prototype.setOptions=zn.prototype.o,zn.createFromModelPath=function(e,t){return Lt(zn,e,{baseOptions:{modelAssetPath:t}})},zn.createFromModelBuffer=function(e,t){return Lt(zn,e,{baseOptions:{modelAssetBuffer:t}})},zn.createFromOptions=function(e,t){return Lt(zn,e,t)},zn.HAND_CONNECTIONS=vM,zn.POSE_CONNECTIONS=tz,zn.FACE_LANDMARKS_LIPS=dM,zn.FACE_LANDMARKS_LEFT_EYE=pM,zn.FACE_LANDMARKS_LEFT_EYEBROW=hM,zn.FACE_LANDMARKS_LEFT_IRIS=Zj,zn.FACE_LANDMARKS_RIGHT_EYE=mM,zn.FACE_LANDMARKS_RIGHT_EYEBROW=gM,zn.FACE_LANDMARKS_RIGHT_IRIS=Qj,zn.FACE_LANDMARKS_FACE_OVAL=yM,zn.FACE_LANDMARKS_CONTOURS=Jj,zn.FACE_LANDMARKS_TESSELATION=ez;var Ps=class extends xi{constructor(e,t){super(new Gs(e,t),"input_image","norm_rect",!0),this.j={classifications:[]},qe(e=this.h=new Fj,0,1,t=new Wn)}get baseOptions(){return Xt(this.h,Wn,1)}set baseOptions(e){qe(this.h,0,1,e)}o(e){return qe(this.h,0,2,fO(e,Xt(this.h,eM,2))),this.l(e)}ua(e,t){return this.j={classifications:[]},js(this,e,t),this.j}va(e,t,n){return this.j={classifications:[]},au(this,e,n,t),this.j}m(){var e=new Ei;Pn(e,"input_image"),Pn(e,"norm_rect"),Zt(e,"classifications");let t=new ls;ya(t,c0e,this.h);let n=new Ho;fs(n,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),Rn(n,"IMAGE:input_image"),Rn(n,"NORM_RECT:norm_rect"),zt(n,"CLASSIFICATIONS:classifications"),n.o(t),ds(e,n),this.g.attachProtoListener("classifications",(r,o)=>{this.j=function(i){let s={classifications:tc(i,Xve,1).map(a=>uM(Xt(a,hj,4)?.g()??[],ma(Vs(a,2),0),ou(a,3)))};return Bw(gl(i,2))!=null&&(s.timestampMs=ma(Bw(gl(i,2)),0)),s}(Yve(r)),Re(this,o)}),this.g.attachEmptyPacketListener("classifications",r=>{Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ps.prototype.classifyForVideo=Ps.prototype.va,Ps.prototype.classify=Ps.prototype.ua,Ps.prototype.setOptions=Ps.prototype.o,Ps.createFromModelPath=function(e,t){return Lt(Ps,e,{baseOptions:{modelAssetPath:t}})},Ps.createFromModelBuffer=function(e,t){return Lt(Ps,e,{baseOptions:{modelAssetBuffer:t}})},Ps.createFromOptions=function(e,t){return Lt(Ps,e,t)};var as=class extends xi{constructor(e,t){super(new Gs(e,t),"image_in","norm_rect",!0),this.h=new Pj,this.embeddings={embeddings:[]},qe(e=this.h,0,1,t=new Wn)}get baseOptions(){return Xt(this.h,Wn,1)}set baseOptions(e){qe(this.h,0,1,e)}o(e){var t=this.h,n=Xt(this.h,_8,2);return n=n?n.clone():new _8,e.l2Normalize!==void 0?mv(n,1,e.l2Normalize):"l2Normalize"in e&&An(n,1),e.quantize!==void 0?mv(n,2,e.quantize):"quantize"in e&&An(n,2),qe(t,0,2,n),this.l(e)}Ba(e,t){return js(this,e,t),this.embeddings}Ca(e,t,n){return au(this,e,n,t),this.embeddings}m(){var e=new Ei;Pn(e,"image_in"),Pn(e,"norm_rect"),Zt(e,"embeddings_out");let t=new ls;ya(t,l0e,this.h);let n=new Ho;fs(n,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),zt(n,"EMBEDDINGS:embeddings_out"),n.o(t),ds(e,n),this.g.attachProtoListener("embeddings_out",(r,o)=>{r=Jve(r),this.embeddings=function(i){return{embeddings:tc(i,Qve,1).map(s=>{let a={headIndex:ma(Vs(s,3),0)??-1,headName:ou(s,4)??""};if(MG(s,T8,zk(s,1))!==void 0)s=jf(s=Xt(s,T8,zk(s,1)),1,wl,Gf()),a.floatEmbedding=s.slice();else{let u=new Uint8Array(0);a.quantizedEmbedding=Xt(s,Zve,zk(s,2))?.qa()?.h()??u}return a}),timestampMs:ma(Bw(gl(i,2)),0)}}(r),Re(this,o)}),this.g.attachEmptyPacketListener("embeddings_out",r=>{Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};as.cosineSimilarity=function(e,t){if(e.floatEmbedding&&t.floatEmbedding)e=A8(e.floatEmbedding,t.floatEmbedding);else{if(!e.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=A8(N8(e.quantizedEmbedding),N8(t.quantizedEmbedding))}return e},as.prototype.embedForVideo=as.prototype.Ca,as.prototype.embed=as.prototype.Ba,as.prototype.setOptions=as.prototype.o,as.createFromModelPath=function(e,t){return Lt(as,e,{baseOptions:{modelAssetPath:t}})},as.createFromModelBuffer=function(e,t){return Lt(as,e,{baseOptions:{modelAssetBuffer:t}})},as.createFromOptions=function(e,t){return Lt(as,e,t)};var mO=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){this.confidenceMasks?.forEach(e=>{e.close()}),this.categoryMask?.close()}};function Q8(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function J8(e){try{let t=new mO(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return t;e.j(t)}finally{vE(e)}}mO.prototype.close=mO.prototype.close;var vi=class extends xi{constructor(e,t){super(new Gs(e,t),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new aM,this.v=new $j,qe(this.h,0,3,this.v),qe(e=this.h,0,1,t=new Wn)}get baseOptions(){return Xt(this.h,Wn,1)}set baseOptions(e){qe(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?An(this.h,2,Nh(e.displayNamesLocale)):"displayNamesLocale"in e&&An(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}J(){(function(e){let t=tc(e.ea(),Ho,1).filter(n=>ou(n,1).includes("mediapipe.tasks.TensorsToSegmentationCalculator"));if(e.s=[],t.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");t.length===1&&(Xt(t[0],ls,7)?.l()?.g()??new Map).forEach((n,r)=>{e.s[Number(r)]=ou(n,1)})})(this)}fa(e,t,n){let r=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:n,Q8(this),js(this,e,r),J8(this)}Na(e,t,n,r){let o=typeof n!="function"?n:{};return this.j=typeof n=="function"?n:r,Q8(this),au(this,e,o,t),J8(this)}Fa(){return this.s}m(){var e=new Ei;Pn(e,"image_in"),Pn(e,"norm_rect");let t=new ls;ya(t,Vj,this.h);let n=new Ho;fs(n,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),n.o(t),ds(e,n),yE(this,e),this.outputConfidenceMasks&&(Zt(e,"confidence_masks"),zt(n,"CONFIDENCE_MASKS:confidence_masks"),Ch(this,"confidence_masks"),this.g.da("confidence_masks",(r,o)=>{this.confidenceMasks=r.map(i=>Ih(this,i,!0,!this.j)),Re(this,o)}),this.g.attachEmptyPacketListener("confidence_masks",r=>{this.confidenceMasks=[],Re(this,r)})),this.outputCategoryMask&&(Zt(e,"category_mask"),zt(n,"CATEGORY_MASK:category_mask"),Ch(this,"category_mask"),this.g.V("category_mask",(r,o)=>{this.categoryMask=Ih(this,r,!1,!this.j),Re(this,o)}),this.g.attachEmptyPacketListener("category_mask",r=>{this.categoryMask=void 0,Re(this,r)})),Zt(e,"quality_scores"),zt(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(r,o)=>{this.qualityScores=r,Re(this,o)}),this.g.attachEmptyPacketListener("quality_scores",r=>{this.categoryMask=void 0,Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};vi.prototype.getLabels=vi.prototype.Fa,vi.prototype.segmentForVideo=vi.prototype.Na,vi.prototype.segment=vi.prototype.fa,vi.prototype.setOptions=vi.prototype.o,vi.createFromModelPath=function(e,t){return Lt(vi,e,{baseOptions:{modelAssetPath:t}})},vi.createFromModelBuffer=function(e,t){return Lt(vi,e,{baseOptions:{modelAssetBuffer:t}})},vi.createFromOptions=function(e,t){return Lt(vi,e,t)};var gO=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){this.confidenceMasks?.forEach(e=>{e.close()}),this.categoryMask?.close()}};gO.prototype.close=gO.prototype.close;var b0e=class extends $e{constructor(e){super(e)}},hh=[0,lr,-2],Kw=[0,Zu,-3,Qn,Zu,-1],eG=[0,Kw],tG=[0,Kw,lr,-1],Zk=class extends $e{constructor(e){super(e)}},nG=[0,Zu,-1,Qn],w0e=class extends $e{constructor(){super()}},rG=class extends $e{constructor(e){super(e)}},yO=[1,2,3,4,5,6,7,8,9,10,14,15],nz=class extends $e{constructor(){super()}};nz.prototype.g=pE([0,Pr,[0,yO,yn,Kw,yn,[0,Kw,hh],yn,eG,yn,[0,eG,hh],yn,nG,yn,[0,Zu,-3,Qn,ga],yn,[0,Zu,-3,Qn],yn,[0,fn,Zu,-2,Qn,lr,Qn,-1,2,Zu,hh],yn,tG,yn,[0,tG,hh],Zu,hh,fn,yn,[0,Zu,-3,Qn,hh,-1],yn,[0,Pr,nG]],fn,[0,fn,lr,-1,Qn]]);var nu=class extends xi{constructor(e,t){super(new Gs(e,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new aM,this.s=new $j,qe(this.h,0,3,this.s),qe(e=this.h,0,1,t=new Wn)}get baseOptions(){return Xt(this.h,Wn,1)}set baseOptions(e){qe(this.h,0,1,e)}o(e){return"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}fa(e,t,n,r){let o=typeof n!="function"?n:{};this.j=typeof n=="function"?n:r,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,n=this.B+1,r=new nz;let i=new rG;var s=new b0e;if(iu(s,1,255),qe(i,0,12,s),t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var a=new Zk;mv(a,3,!0),Be(a,1,t.keypoint.x),Be(a,2,t.keypoint.y),uv(i,5,yO,a)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");for(a of(s=new w0e,t.scribble))mv(t=new Zk,3,!0),Be(t,1,a.x),Be(t,2,a.y),jw(s,1,Zk,t);uv(i,15,yO,s)}jw(r,1,rG,i),this.g.addProtoToStream(r.g(),"drishti.RenderData","roi_in",n),js(this,e,o);e:{try{let c=new gO(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var u=c;break e}this.j(c)}finally{vE(this)}u=void 0}return u}m(){var e=new Ei;Pn(e,"image_in"),Pn(e,"roi_in"),Pn(e,"norm_rect_in");let t=new ls;ya(t,Vj,this.h);let n=new Ho;fs(n,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"ROI:roi_in"),Rn(n,"NORM_RECT:norm_rect_in"),n.o(t),ds(e,n),yE(this,e),this.outputConfidenceMasks&&(Zt(e,"confidence_masks"),zt(n,"CONFIDENCE_MASKS:confidence_masks"),Ch(this,"confidence_masks"),this.g.da("confidence_masks",(r,o)=>{this.confidenceMasks=r.map(i=>Ih(this,i,!0,!this.j)),Re(this,o)}),this.g.attachEmptyPacketListener("confidence_masks",r=>{this.confidenceMasks=[],Re(this,r)})),this.outputCategoryMask&&(Zt(e,"category_mask"),zt(n,"CATEGORY_MASK:category_mask"),Ch(this,"category_mask"),this.g.V("category_mask",(r,o)=>{this.categoryMask=Ih(this,r,!1,!this.j),Re(this,o)}),this.g.attachEmptyPacketListener("category_mask",r=>{this.categoryMask=void 0,Re(this,r)})),Zt(e,"quality_scores"),zt(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(r,o)=>{this.qualityScores=r,Re(this,o)}),this.g.attachEmptyPacketListener("quality_scores",r=>{this.categoryMask=void 0,Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};nu.prototype.segment=nu.prototype.fa,nu.prototype.setOptions=nu.prototype.o,nu.createFromModelPath=function(e,t){return Lt(nu,e,{baseOptions:{modelAssetPath:t}})},nu.createFromModelBuffer=function(e,t){return Lt(nu,e,{baseOptions:{modelAssetBuffer:t}})},nu.createFromOptions=function(e,t){return Lt(nu,e,t)};var $s=class extends xi{constructor(e,t){super(new Gs(e,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},qe(e=this.h=new Bj,0,1,t=new Wn)}get baseOptions(){return Xt(this.h,Wn,1)}set baseOptions(e){qe(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?An(this.h,2,Nh(e.displayNamesLocale)):"displayNamesLocale"in e&&An(this.h,2),e.maxResults!==void 0?iu(this.h,3,e.maxResults):"maxResults"in e&&An(this.h,3),e.scoreThreshold!==void 0?Be(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&An(this.h,4),e.categoryAllowlist!==void 0?zw(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&An(this.h,5),e.categoryDenylist!==void 0?zw(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&An(this.h,6),this.l(e)}D(e,t){return this.j={detections:[]},js(this,e,t),this.j}F(e,t,n){return this.j={detections:[]},au(this,e,n,t),this.j}m(){var e=new Ei;Pn(e,"input_frame_gpu"),Pn(e,"norm_rect"),Zt(e,"detections");let t=new ls;ya(t,d0e,this.h);let n=new Ho;fs(n,"mediapipe.tasks.vision.ObjectDetectorGraph"),Rn(n,"IMAGE:input_frame_gpu"),Rn(n,"NORM_RECT:norm_rect"),zt(n,"DETECTIONS:detections"),n.o(t),ds(e,n),this.g.attachProtoVectorListener("detections",(r,o)=>{for(let i of r)r=gj(i),this.j.detections.push(Gj(r));Re(this,o)}),this.g.attachEmptyPacketListener("detections",r=>{Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};$s.prototype.detectForVideo=$s.prototype.F,$s.prototype.detect=$s.prototype.D,$s.prototype.setOptions=$s.prototype.o,$s.createFromModelPath=function(e,t){return ne(this,null,function*(){return Lt($s,e,{baseOptions:{modelAssetPath:t}})})},$s.createFromModelBuffer=function(e,t){return Lt($s,e,{baseOptions:{modelAssetBuffer:t}})},$s.createFromOptions=function(e,t){return Lt($s,e,t)};var vO=class{constructor(e,t,n){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=n}close(){this.segmentationMasks?.forEach(e=>{e.close()})}};function oG(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function iG(e){try{let t=new vO(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.s)return t;e.s(t)}finally{vE(e)}}vO.prototype.close=vO.prototype.close;var us=class extends xi{constructor(e,t){super(new Gs(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,qe(e=this.h=new Uj,0,1,t=new Wn),this.v=new Oj,qe(this.h,0,3,this.v),this.j=new kj,qe(this.h,0,2,this.j),iu(this.j,4,1),Be(this.j,2,.5),Be(this.v,2,.5),Be(this.h,4,.5)}get baseOptions(){return Xt(this.h,Wn,1)}set baseOptions(e){qe(this.h,0,1,e)}o(e){return"numPoses"in e&&iu(this.j,4,e.numPoses??1),"minPoseDetectionConfidence"in e&&Be(this.j,2,e.minPoseDetectionConfidence??.5),"minTrackingConfidence"in e&&Be(this.h,4,e.minTrackingConfidence??.5),"minPosePresenceConfidence"in e&&Be(this.v,2,e.minPosePresenceConfidence??.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=e.outputSegmentationMasks??!1),this.l(e)}D(e,t,n){let r=typeof t!="function"?t:{};return this.s=typeof t=="function"?t:n,oG(this),js(this,e,r),iG(this)}F(e,t,n,r){let o=typeof n!="function"?n:{};return this.s=typeof n=="function"?n:r,oG(this),au(this,e,o,t),iG(this)}m(){var e=new Ei;Pn(e,"image_in"),Pn(e,"norm_rect"),Zt(e,"normalized_landmarks"),Zt(e,"world_landmarks"),Zt(e,"segmentation_masks");let t=new ls;ya(t,p0e,this.h);let n=new Ho;fs(n,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),Rn(n,"IMAGE:image_in"),Rn(n,"NORM_RECT:norm_rect"),zt(n,"NORM_LANDMARKS:normalized_landmarks"),zt(n,"WORLD_LANDMARKS:world_landmarks"),n.o(t),ds(e,n),yE(this,e),this.g.attachProtoVectorListener("normalized_landmarks",(r,o)=>{this.landmarks=[];for(let i of r)r=_v(i),this.landmarks.push(gE(r));Re(this,o)}),this.g.attachEmptyPacketListener("normalized_landmarks",r=>{this.landmarks=[],Re(this,r)}),this.g.attachProtoVectorListener("world_landmarks",(r,o)=>{this.worldLandmarks=[];for(let i of r)r=yh(i),this.worldLandmarks.push(fv(r));Re(this,o)}),this.g.attachEmptyPacketListener("world_landmarks",r=>{this.worldLandmarks=[],Re(this,r)}),this.outputSegmentationMasks&&(zt(n,"SEGMENTATION_MASK:segmentation_masks"),Ch(this,"segmentation_masks"),this.g.da("segmentation_masks",(r,o)=>{this.segmentationMasks=r.map(i=>Ih(this,i,!0,!this.s)),Re(this,o)}),this.g.attachEmptyPacketListener("segmentation_masks",r=>{this.segmentationMasks=[],Re(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};us.prototype.detectForVideo=us.prototype.F,us.prototype.detect=us.prototype.D,us.prototype.setOptions=us.prototype.o,us.createFromModelPath=function(e,t){return Lt(us,e,{baseOptions:{modelAssetPath:t}})},us.createFromModelBuffer=function(e,t){return Lt(us,e,{baseOptions:{modelAssetBuffer:t}})},us.createFromOptions=function(e,t){return Lt(us,e,t)},us.POSE_CONNECTIONS=tz;var nK=sa(oz());var Sv=class{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}},Zf=class{refCount(t){return Ci("refCount")}incRef(t){return Ci("incRef")}timerAvailable(){return!0}time(t){return Ci("time")}read(t){return Ci("read")}readSync(t){return Ci("readSync")}readToGPU(t,n){return Ci("readToGPU")}numDataIds(){return Ci("numDataIds")}disposeData(t,n){return Ci("disposeData")}write(t,n,r){return Ci("write")}move(t,n,r,o,i){return Ci("move")}createTensorFromGPUData(t,n,r){return Ci("createTensorFromGPUData")}memory(){return Ci("memory")}floatPrecision(){return Ci("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Ci("dispose")}};function Ci(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function iz(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,wE(e,t,n)}function E0e(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,wE(e,n,r),wE(t,n,r)}function Fh(e,t,n){return Math.max(e,Math.min(t,n))}function C0e(e){return e%2===0?e:e+1}function wE(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function T0e(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function _0e(e,t){let n=Math.random();return t*n+(1-n)*e}function I0e(e,t){let n=0;for(let r=0;r<e.length;r++){let o=Number(e[r])-Number(t[r]);n+=o*o}return n}function M(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function $n(e,t,n=""){M(Ti(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function ps(e){M(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function mt(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function S0e(e){return e.length===0}function xM(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==null&&t[n]!==null&&e[n]!==t[n])return!1;return!0}function Ti(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function rc(e){return e%1===0}function D0e(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function N0e(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function A0e(e){let t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return iz(t),t}function Jf(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function R0e(e,t=o=>0,n,r){return new Promise((o,i)=>{let s=0,a=()=>{if(e()){o();return}s++;let u=t(s);if(n!=null&&s>=n){i();return}r!=null?r(a,u):setTimeout(a,u)};a()})}function k0e(e,t){let n=1,r=-1;for(let i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(e[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(e[i]<0)throw Error(`Shapes can not be < 0. Found ${e[i]} at dim ${i}`);if(r===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);let o=e.slice();return o[r]=t/n,o}function Cl(e,t){let n=t.length;return e=e==null?t.map((r,o)=>o):[].concat(e),M(e.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),M(e.every(r=>rc(r)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(r=>r<0?n+r:r)}function bM(e,t){let n=[],r=[],o=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||o?null:Cl(t,e).sort(),s=0;for(let a=0;a<e.length;++a){if(i!=null){if(i[s]===a&&e[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${e[a]}' is not 1`);(i[s]==null||i[s]>a)&&e[a]===1&&(n.push(e[a]),r.push(a)),i[s]<=a&&s++}e[a]!==1&&(n.push(e[a]),r.push(a))}return{newShape:n,keptDims:r}}function wM(e,t){return EE(e,t)}function EE(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function EM(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function CM(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function O0e(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function Ph(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function TM(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function $h(e){return typeof e=="string"||e instanceof String}function sz(e){return typeof e=="boolean"}function az(e){return typeof e=="number"}function Tl(e){return Array.isArray(e)?Tl(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":az(e)?"float32":$h(e)?"string":sz(e)?"bool":"float32"}function Lh(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Vh(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function uu(e){let t=e.length;if(t<2)return[];let n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function uz(e,t,n,r=!1){let o=new Array;if(t.length===1){let i=t[0]*(r?2:1);for(let s=0;s<i;s++)o[s]=n[e+s]}else{let i=t[0],s=t.slice(1),a=s.reduce((u,c)=>u*c)*(r?2:1);for(let u=0;u<i;u++)o[u]=uz(e+u*a,s,n,r)}return o}function Qf(e,t,n=!1){if(e.length===0)return t[0];let r=e.reduce((o,i)=>o*i)*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return uz(0,e,t,n)}function M0e(e,t){if(Array.isArray(e))return e;if(t==="float32")return e instanceof Float32Array?e:new Float32Array(e);if(t==="int32")return e instanceof Int32Array?e:new Int32Array(e);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}function Dv(e,t){let n=Bh(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function Bh(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function F0e(e,t){let n=e.reduce((r,o)=>r*o,1);if(t==null||t==="float32")return Qf(e,new Float32Array(n));if(t==="int32")return Qf(e,new Int32Array(n));if(t==="bool")return Qf(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function In(e){e.forEach(t=>{M(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function P0e(e,t,n){if(t===0)return 0;if(t===1)return e[0];let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function $0e(e,t,n){if(t===0)return[];if(t===1)return[e];let r=new Array(t);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}function ed(e){return e&&e.then&&typeof e.then=="function"}var cz="tfjsflags",Nv=class{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=V0e,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(z().getBool("IS_TEST")||z().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){let o=this.urlFlags[t];z().getBool("IS_TEST")||z().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${o}.`),this.set(t,o)}}getAsync(t){return ne(this,null,function*(){return t in this.flags?this.flags[t]:(this.flags[t]=yield this.evaluateFlag(t),this.flags[t])})}get(t){if(t in this.flags)return this.flags[t];let n=this.evaluateFlag(t);if(ed(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let t=this.getQueryParams(this.global.location.search);cz in t&&t[cz].split(",").forEach(r=>{let[o,i]=r.split(":");this.urlFlags[o]=U0e(o,i)})}};function V0e(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(B0e(t,r[0],r[1]),r.join("="))),t}function B0e(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function U0e(e,t){let n=t.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:t}function z(){return _M}var _M=null;function lz(e){_M=e}var IM;function SM(){if(IM==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");IM=e}return IM}function G0e(){let e=SM();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function Av(e,t){let n=G0e();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}var Rv="Abs",CE="Acos",TE="Acosh",_l="Add",_E="AddN",IE="All",SE="Any",DE="ArgMax",NE="ArgMin",AE="Asin",RE="Asinh",kE="Atan",OE="Atanh",ME="Atan2",FE="AvgPool",fz="AvgPoolGrad",PE="AvgPool3D",dz="AvgPool3DGrad",$E="BatchMatMul",LE="BatchToSpaceND",VE="Bincount",Uh="BitwiseAnd";var BE="BroadcastArgs",td="Cast",Gh="Ceil",UE="ClipByValue",kv="Complex",GE="ComplexAbs",jE="Concat",zE="Conv2D",HE="Conv2DBackpropFilter",WE="Conv2DBackpropInput",qE="Conv3D",pz="Conv3DBackpropFilterV2",KE="Conv3DBackpropInputV2",XE="Cos",YE="Cosh",ZE="Cumprod",QE="Cumsum",JE="CropAndResize",eC="DenseBincount",tC="DepthToSpace",nC="DepthwiseConv2dNative",rC="DepthwiseConv2dNativeBackpropFilter",oC="DepthwiseConv2dNativeBackpropInput",iC="Diag",sC="Dilation2D";var DM="Draw",aC="RealDiv",uC="Einsum",cC="Elu",hz="EluGrad",lC="Erf",jh="Equal",zh="Exp",fC="ExpandDims",Hh="Expm1",dC="FFT",pC="Fill",hC="FlipLeftRight",Wh="Floor",qh="FloorDiv",mC="FusedBatchNorm",gC="GatherV2",yC="GatherNd",Kh="Greater",Xh="GreaterEqual",nd="Identity",vC="IFFT",xC="Imag",bC="IsFinite",wC="IsInf",EC="IsNan",CC="LeakyRelu",Yh="Less",Zh="LessEqual",TC="LinSpace",Qh="Log",_C="Log1p",IC="LogicalAnd",SC="LogicalNot",DC="LogicalOr";var NC="LRN",mz="LRNGrad";var AC="Max",Jh="Maximum",RC="MaxPool",gz="MaxPoolGrad",kC="MaxPool3D",yz="MaxPool3DGrad",OC="MaxPoolWithArgmax",MC="Mean",FC="Min",em="Minimum",PC="MirrorPad",$C="Mod",LC="Multinomial",tm="Multiply",Ov="Neg",nm="NotEqual",VC="NonMaxSuppressionV3",BC="NonMaxSuppressionV4",UC="NonMaxSuppressionV5",GC="OnesLike",jC="OneHot",zC="Pack",HC="PadV2";var WC="Pow",qC="Prelu",Mv="Prod",KC="RaggedGather",XC="RaggedRange",YC="RaggedTensorToTensor",ZC="Range",Fv="Real",QC="Reciprocal",JC="Relu",eT="Reshape",tT="ResizeNearestNeighbor",vz="ResizeNearestNeighborGrad",nT="ResizeBilinear",xz="ResizeBilinearGrad",rT="Relu6",oT="Reverse",iT="Round",rm="Rsqrt",sT="ScatterNd",aT="TensorScatterUpdate",uT="SearchSorted",cT="Select",lT="Selu",Pv="Slice",fT="Sin",dT="Sinh",pT="Sign",om="Sigmoid",hT="Softplus",im="Sqrt",mT="Sum",gT="SpaceToBatchND",yT="SplitV",vT="Softmax",xT="SparseFillEmptyRows",bT="SparseReshape",wT="SparseSegmentMean",ET="SparseSegmentSum",CT="SparseToDense",sm="SquaredDifference",bz="Square",am="StaticRegexReplace",TT="StridedSlice",_T="StringNGrams",IT="StringSplit",ST="StringToHashBucketFast",um="Sub",DT="Tan",NT="Tanh",cm="Tile",AT="TopK",RT="Transform",lm="Transpose",kT="Unique",OT="Unpack",MT="UnsortedSegmentSum";var FT="ZerosLike",PT="Step",$v="FromPixels",$T="RotateWithOffset",Lv="_FusedMatMul",Vv="FusedConv2D",Bv="FusedDepthwiseConv2D";function oc(...e){z().getBool("IS_TEST")||z().getBool("PROD")||console.warn(...e)}function j0e(...e){z().getBool("IS_TEST")||z().getBool("PROD")||console.log(...e)}var LT=Av("kernelRegistry",()=>new Map),z0e=Av("gradRegistry",()=>new Map);function fm(e,t){let n=Cz(e,t);return LT.get(n)}function NM(e){return z0e.get(e)}function AM(e){let t=LT.entries(),n=[];for(;;){let{done:r,value:o}=t.next();if(r)break;let[i,s]=o,[a]=i.split("_");a===e&&n.push(s)}return n}function Ez(e){let{kernelName:t,backendName:n}=e,r=Cz(t,n);LT.has(r)&&oc(`The kernel '${t}' for backend '${n}' is already registered`),LT.set(r,e)}function Cz(e,t){return`${t}_${e}`}var N={};tn(N,{arraysEqual:()=>Ti,arraysEqualWithNull:()=>xM,assert:()=>M,assertNonNegativeIntegerDimensions:()=>In,assertNonNull:()=>ps,assertShapesMatch:()=>$n,bytesFromStringArray:()=>TM,bytesPerElement:()=>Ph,checkConversionForErrors:()=>EM,clamp:()=>Fh,computeStrides:()=>uu,convertBackendValuesAndArrayBuffer:()=>M0e,createScalarValue:()=>Z0e,createShuffledIndices:()=>A0e,decodeString:()=>gm,distSquared:()=>I0e,encodeString:()=>mm,fetch:()=>J0e,fingerPrint64:()=>Y0e,flatten:()=>Sl,getArrayFromDType:()=>EE,getTypedArrayFromDType:()=>wM,hasEncodingLoss:()=>O0e,hexToLong:()=>Uv,indexToLoc:()=>$0e,inferDtype:()=>Tl,inferFromImplicitShape:()=>k0e,isBoolean:()=>sz,isFunction:()=>Lh,isInt:()=>rc,isNumber:()=>az,isPromise:()=>ed,isScalarShape:()=>S0e,isString:()=>$h,isTypedArray:()=>ao,isValidDtype:()=>CM,locToIndex:()=>P0e,makeOnesTypedArray:()=>Dv,makeZerosNestedTypedArray:()=>F0e,makeZerosTypedArray:()=>Bh,nearestDivisor:()=>Vh,nearestLargerEven:()=>C0e,now:()=>ad,parseAxisParam:()=>Cl,randUniform:()=>_0e,repeatedTry:()=>R0e,rightPad:()=>Jf,shuffle:()=>iz,shuffleCombo:()=>E0e,sizeFromShape:()=>mt,sizeToSquarishShape:()=>N0e,squeezeShape:()=>bM,sum:()=>T0e,swap:()=>wE,tanh:()=>D0e,toNestedArray:()=>Qf,toTypedArray:()=>hm});function VT(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var MM=sa(Mz());var sd=MM.default||MM;function Uv(e){return sd.fromString(e,!0,16)}var Pz=Uv("c3a5c85c97cb3127"),id=Uv("b492b66fbe98f273"),_o=Uv("9ae16a3b2f90404f");function OM(e){return e.xor(e.shru(47))}function $z(e,t,n){let r=e.slice(t,t+n);return sd.fromBytes(Array.from(r),!0,!0)}function Sn(e,t){return $z(e,t,8)}function Fz(e,t){return $z(e,t,4)}function Lr(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function Il(e,t,n=Uv("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let o=t.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function W0e(e,t,n,r,o,i){o=o.add(e),i=Lr(i.add(o).add(r),21);let s=o;return o=o.add(t),o=o.add(n),i=i.add(Lr(o,44)),[o.add(r),i.add(s)]}function UT(e,t,n,r){return W0e(Sn(e,t),Sn(e,t+8),Sn(e,t+16),Sn(e,t+24),n,r)}function q0e(e,t=e.length){if(t>=8){let n=_o.add(t*2),r=Sn(e,0).add(_o),o=Sn(e,t-8),i=Lr(o,37).mul(n).add(r),s=Lr(r,25).add(o).mul(n);return Il(i,s,n)}if(t>=4){let n=_o.add(t*2),r=Fz(e,0);return Il(r.shl(3).add(t),Fz(e,t-4),n)}if(t>0){let n=e[0],r=e[t>>1],o=e[t-1],i=n+(r<<8),s=t+(o<<2);return OM(_o.mul(i).xor(Pz.mul(s))).mul(_o)}return _o}function K0e(e,t=e.length){let n=_o.add(t*2),r=Sn(e,0).mul(id),o=Sn(e,8),i=Sn(e,t-8).mul(n),s=Sn(e,t-16).mul(_o);return Il(Lr(r.add(o),43).add(Lr(i,30)).add(s),r.add(Lr(o.add(_o),18)).add(i),n)}function X0e(e,t=e.length){let n=_o.add(t*2),r=Sn(e,0).mul(_o),o=Sn(e,8),i=Sn(e,t-8).mul(n),s=Sn(e,t-16).mul(_o),a=Lr(r.add(o),43).add(Lr(i,30)).add(s),u=Il(a,r.add(Lr(o.add(_o),18)).add(i),n),c=Sn(e,16).mul(n),f=Sn(e,24),d=a.add(Sn(e,t-32)).mul(n),h=u.add(Sn(e,t-24)).mul(n);return Il(Lr(c.add(f),43).add(Lr(d,30)).add(h),c.add(Lr(f.add(r),18)).add(d),n)}function Y0e(e,t=e.length){let n=sd.fromNumber(81,!0);if(t<=32)return t<=16?q0e(e,t):K0e(e,t);if(t<=64)return X0e(e,t);let r=n,o=n.mul(id).add(113),i=OM(o.mul(_o).add(113)).mul(_o),s=[sd.UZERO,sd.UZERO],a=[sd.UZERO,sd.UZERO];r=r.mul(_o).add(Sn(e,0));let u=0,c=(t-1>>6)*64,f=c+(t-1&63)-63;do r=Lr(r.add(o).add(s[0]).add(Sn(e,u+8)),37).mul(id),o=Lr(o.add(s[1]).add(Sn(e,u+48)),42).mul(id),r=r.xor(a[1]),o=o.add(s[0]).add(Sn(e,u+40)),i=Lr(i.add(a[0]),33).mul(id),s=UT(e,u,s[1].mul(id),r.add(a[0])),a=UT(e,u+32,i.add(a[1]),o.add(Sn(e,u+16))),[i,r]=[r,i],u+=64;while(u!==c);let d=id.add(i.and(255).shl(1));return u=f,a[0]=a[0].add(t-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),r=Lr(r.add(o).add(s[0]).add(Sn(e,u+8)),37).mul(d),o=Lr(o.add(s[1]).add(Sn(e,u+48)),42).mul(d),r=r.xor(a[1].mul(9)),o=o.add(s[0].mul(9).add(Sn(e,u+40))),i=Lr(i.add(a[0]),33).mul(d),s=UT(e,u,s[1].mul(d),r.add(a[0])),a=UT(e,u+32,i.add(a[1]),o.add(Sn(e,u+16))),[i,r]=[r,i],Il(Il(s[0],a[0],d).add(OM(o).mul(Pz)).add(i),Il(s[1],a[1],d).add(r),d)}function Z0e(e,t){return t==="string"?mm(e):hm([e],t)}function Q0e(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function hm(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Sl(e)),z().getBool("DEBUG")&&EM(e,t),Q0e(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){let n=new Uint8Array(e.length);for(let r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${t}`)}function ad(){return z().platform.now()}function J0e(e,t){return z().platform.fetch(e,t)}function mm(e,t="utf-8"){return t=t||"utf-8",z().platform.encode(e,t)}function gm(e,t="utf-8"){return t=t||"utf-8",z().platform.decode(e,t)}function ao(e){return z().platform.isTypedArray!=null?z().platform.isTypedArray(e):VT(e)}function Sl(e,t=[],n=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||ed(e)||e==null||ao(e)&&n)t.push(e);else if(Array.isArray(e)||ao(e))for(let r=0;r<e.length;++r)Sl(e[r],t,n);else{let r=-1;for(let o of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)Sl(e[o],t,n)}return t}var GT=class{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new FM)}profileKernel(t,n,r){let o,i=()=>{o=r()},s,a=ad();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(let c of o)c.dataSync();s=Promise.resolve({kernelMs:ad()-a})}if(z().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){let f=o[c];f.data().then(d=>{exe(d,f.dtype,t)})}return{kernelName:t,outputs:o,inputs:n,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(t){let{kernelName:n,outputs:r,timeMs:o,inputs:i,extraInfo:s}=t;r.forEach(a=>{Promise.all([a.data(),o,s]).then(u=>{this.logger.logKernelProfile(n,a,u[0],u[1],i,u[2])})})}};function exe(e,t,n){if(t!=="float32")return!1;for(let r=0;r<e.length;r++){let o=e[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}var FM=class{logKernelProfile(t,n,r,o,i,s){let a=typeof o=="number"?Jf(`${o}ms`,9):o.error,u=Jf(t,25),c=n.rank,f=n.size,d=Jf(n.shape.toString(),14),h="";for(let m in i){let v=i[m];if(v!=null){let x=v.shape||n.shape,b=x.length;h+=`${m}: ${b}D ${b>0?x:""} `}}console.log(`%c${u}	%c${a}	%c${c}D ${d}	%c${f}	%c${h}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function Lz(e,t,n){let r={},o={};for(let u=0;u<t.length;u++)r[t[u].id]=!0;for(let u=0;u<e.length;u++){let c=e[u],f=c.inputs;for(let d in f){let h=f[d],m=!1;for(let v=0;v<t.length;v++)if(r[h.id]){c.outputs.forEach(x=>r[x.id]=!0),m=!0,o[c.id]=!0;break}if(m)break}}let i={};i[n.id]=!0;let s={};for(let u=e.length-1;u>=0;u--){let c=e[u],f=c.inputs;for(let d=0;d<c.outputs.length;d++)if(i[c.outputs[d].id]){for(let h in f)i[f[h].id]=!0,s[c.id]=!0;break}}let a=[];for(let u=0;u<e.length;u++){let c=e[u];if(o[c.id]&&s[c.id]){let f={};for(let h in c.inputs){let m=c.inputs[h];r[m.id]&&(f[h]=m)}let d=Object.assign({},c);d.inputs=f,d.outputs=c.outputs,a.push(d)}}return a}function Vz(e,t,n,r){for(let o=t.length-1;o>=0;o--){let i=t[o],s=[];if(i.outputs.forEach(u=>{let c=e[u.id];c!=null?s.push(c):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let a=i.gradient(s);for(let u in i.inputs){if(!(u in a))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(a)}.`);let c=n(()=>a[u]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${c.dtype}'`);let f=i.inputs[u];if(!Ti(c.shape,f.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${u}' has shape '${c.shape}', which does not match the shape of the input '${f.shape}'`);if(e[f.id]==null)e[f.id]=c;else{let d=e[f.id];e[f.id]=r(d,c),d.dispose()}}}}var Bz=20,Gv=3,PM=7;function Uz(e,t,n,r){let o=uu(t),i=txe(e,t,n,o),s=t.length,a=jT(e,t,n,o,i),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${s}`),u.push(`  shape: [${t}]`),u.push("  values:")),u.push(a.map(c=>"    "+c).join(`
`)),u.join(`
`)}function txe(e,t,n,r){let o=mt(t),i=r[r.length-1],s=new Array(i).fill(0),a=t.length,u=n==="complex64"?zv(e):e;if(a>1)for(let c=0;c<o/i;c++){let f=c*i;for(let d=0;d<i;d++)s[d]=Math.max(s[d],jv(u[f+d],0,n).length)}return s}function jv(e,t,n){let r;return Array.isArray(e)?r=`${parseFloat(e[0].toFixed(PM))} + ${parseFloat(e[1].toFixed(PM))}j`:$h(e)?r=`'${e}'`:n==="bool"?r=Gz(e):r=parseFloat(e.toFixed(PM)).toString(),Jf(r,t)}function Gz(e){return e===0?"false":"true"}function jT(e,t,n,r,o,i=!0){let s=n==="complex64"?2:1,a=t[0],u=t.length;if(u===0){if(n==="complex64"){let x=zv(e);return[jv(x[0],0,n)]}return n==="bool"?[Gz(e[0])]:[e[0].toString()]}if(u===1){if(a>Bz){let b=Gv*s,C=Array.from(e.slice(0,b)),D=Array.from(e.slice((a-Gv)*s,a*s));return n==="complex64"&&(C=zv(C),D=zv(D)),["["+C.map((O,F)=>jv(O,o[F],n)).join(", ")+", ..., "+D.map((O,F)=>jv(O,o[a-Gv+F],n)).join(", ")+"]"]}return["["+(n==="complex64"?zv(e):Array.from(e)).map((b,C)=>jv(b,o[C],n)).join(", ")+"]"]}let c=t.slice(1),f=r.slice(1),d=r[0]*s,h=[];if(a>Bz){for(let x=0;x<Gv;x++){let b=x*d,C=b+d;h.push(...jT(e.slice(b,C),c,n,f,o,!1))}h.push("...");for(let x=a-Gv;x<a;x++){let b=x*d,C=b+d;h.push(...jT(e.slice(b,C),c,n,f,o,x===a-1))}}else for(let x=0;x<a;x++){let b=x*d,C=b+d;h.push(...jT(e.slice(b,C),c,n,f,o,x===a-1))}let m=u===2?",":"";h[0]="["+(a>0?h[0]+m:"");for(let x=1;x<h.length-1;x++)h[x]=" "+h[x]+m;let v=`,
`;for(let x=2;x<u;x++)v+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":v),h}function zv(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var hs=class{constructor(t,n,r){if(this.dtype=n,this.shape=t.slice(),this.size=mt(t),r!=null){let o=r.length;M(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||EE(n,this.size),this.strides=uu(t)}set(t,...n){n.length===0&&(n=[0]),M(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);let r=this.locToIndex(n);this.values[r]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(let o of t){if(o<0||o>=this.shape[n]){let i=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=this.strides[o]*t[o];return this.values[r]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];let n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return Ea().makeTensor(this.values,this.shape,this.dtype)}},Ea=null,ym=null,nxe=null;function jz(e){Ea=e}function zz(e){ym=e}function Hz(e){nxe=e}var Qt=class{constructor(t,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=mt(t),this.strides=uu(t),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return ne(this,null,function*(){let t=yield this.data();return ym.buffer(this.shape,this.dtype,t)})}bufferSync(){return ym.buffer(this.shape,this.dtype,this.dataSync())}array(){return ne(this,null,function*(){let t=yield this.data();return Qf(this.shape,t,this.dtype==="complex64")})}arraySync(){return Qf(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return ne(this,null,function*(){this.throwIfDisposed();let t=Ea().read(this.dataId);if(this.dtype==="string"){let n=yield t;try{return n.map(r=>gm(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t})}dataToGPU(t){return this.throwIfDisposed(),Ea().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();let t=Ea().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>gm(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}bytes(){return ne(this,null,function*(){this.throwIfDisposed();let t=yield Ea().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ea().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return ym.print(this,t)}clone(){return this.throwIfDisposed(),ym.clone(this)}toString(t=!1){let n=this.dataSync();return Uz(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),ym.cast(this,t)}variable(t=!0,n,r){return this.throwIfDisposed(),Ea().makeVariable(this,t,n,r)}};Object.defineProperty(Qt,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function $M(){return Av("Tensor",()=>Qt)}$M();var ic=class extends Qt{constructor(t,n,r,o){super(t.shape,t.dtype,t.dataId,o),this.trainable=n,this.name=r}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!Ti(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);Ea().disposeTensor(this),this.dataId=t.dataId,Ea().incRef(this,null)}dispose(){Ea().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(ic,Symbol.hasInstance,{value:e=>e instanceof Qt&&e.assign!=null&&e.assign instanceof Function});var Wz=function(e){return e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64",e}(Wz||{}),qz=function(e){return e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64",e}(qz||{}),Kz=function(e){return e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64",e}(Kz||{}),Xz=function(e){return e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64",e}(Xz||{}),rxe={float32:Kz,int32:Wz,bool:qz,complex64:Xz};function uo(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return rxe[e][t]}function ud(e){return uo(e,"int32")}function zT(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function HT(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}function ft(e,t){if(e.dtype===t.dtype)return[e,t];let n=uo(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Yz(e,t){M(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function WT(e){let t=[];return Zz(e,t,new Set),t}function Zz(e,t,n){if(e==null)return;if(e instanceof Qt){t.push(e);return}if(!oxe(e))return;let r=e;for(let o in r){let i=r[o];n.has(i)||(n.add(i),Zz(i,t,n))}}function oxe(e){return Array.isArray(e)||typeof e=="object"}function LM(e){return e.kernelName!=null}var qT=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(let t in this.registeredVariables)this.registeredVariables[t].dispose()}},ixe=(()=>{class e{constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new qT}ready(){return ne(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r];if(yield this.initializeBackend(o).success){yield this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:n,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry))if(n in this.registryFactory){let{asyncInit:r}=this.initializeBackend(n);if(r)return null}else return null;return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,r,o=1){return n in this.registryFactory?(oc(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:r,priority:o},!0)}setBackend(n){return ne(this,null,function*(){if(this.registryFactory[n]==null)throw new Error(`Backend name '${n}' not found in registry`);if(this.backendName=n,this.registry[n]==null){this.backendInstance=null;let{success:r,asyncInit:o}=this.initializeBackend(n);if(!(o?yield r:r))return!1}return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new GT(this.backendInstance),!0})}setupRegisteredKernels(){AM(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){AM(n).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[n])})}initializeBackend(n){let r=this.registryFactory[n];if(r==null)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{let o=r.factory();if(o&&!(o instanceof Zf)&&typeof o.then=="function"){let i=++this.pendingBackendInitId,s=o.then(a=>i<this.pendingBackendInitId?!1:(this.registry[n]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,oc(`Initialization of backend ${n} failed`),oc(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[n]=o,{success:!0,asyncInit:!1}}catch(o){return oc(`Initialization of backend ${n} failed`),oc(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,r)=>this.registryFactory[r].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r],{success:i,asyncInit:s}=this.initializeBackend(o);if(s||i)return{name:o,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,r){let o=this.state.tensorInfo.get(r),i=o.backend,s=this.readSync(r),a=i.refCount(r);i.disposeData(r,!0),o.backend=n,n.move(r,s,o.shape,o.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,r){let o=null;if(r==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");r=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}let i;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(i),()=>(i=r(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(n,r,o){n();try{let i=o();return r(),i}catch(i){throw r(),i}}nextTensorId(){return e.nextTensorId++}nextVariableId(){return e.nextVariableId++}clone(n){let r=k.runKernel(nd,{x:n}),o={x:n},i=a=>({x:()=>{let u="float32",c={x:a},f={dtype:u};return k.runKernel(td,c,f)}}),s=[];return this.addTapeNode(this.state.activeScope.name,o,[r],i,s,{}),r}runKernel(n,r,o){if(this.backendName==null&&this.backend,!(fm(n,this.backendName)!=null))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:r,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,r,o){let i=this.backend.numDataIds(),s=0;o.forEach(c=>{s+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=i-r-s-a;if(u>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${u} data ids) after running '${n}'`)}runKernelFunc(n){let r,o=[],i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let u;this.backendName==null&&this.backend;let c,f=LM(n)?n.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(LM(n)){let{kernelName:x,inputs:b,attrs:C}=n;this.backendName==null&&this.backend;let D=fm(x,this.backendName);M(D!=null,()=>`Cannot find registered kernel '${x}' for backend '${this.backendName}'`),u=()=>{let O=this.backend.numDataIds();c=D.kernelFunc({inputs:b,attrs:C,backend:this.backend});let F=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(x,O,F);let B=F.map(H=>H.rank!=null?H:this.makeTensorFromTensorInfo(H));if(i){let H=this.getTensorsForGradient(x,b,B);o=this.saveTensorsForBackwardMode(H)}return B}}else{let{forwardFunc:x}=n,b=C=>{i&&(o=C.map(D=>this.keep(this.clone(D))))};u=()=>{let C=this.backend.numDataIds();c=this.tidy(()=>x(this.backend,b));let D=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(f,C,D),D}}let{inputs:d,attrs:h}=n,m=LM(n)?null:n.backwardsFunc,v;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?r=u():(v=this.profiler.profileKernel(f,d,()=>u()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(v),r=v.outputs)}),i&&this.addTapeNode(f,d,r,m,o,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:f,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(x=>d[x]!=null?d[x].shape:null),outputShapes:r.map(x=>x.shape),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(c)?r:r[0]}saveTensorsForBackwardMode(n){return n.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(n,r,o){let i=NM(n);if(i!=null){let s=i.inputsToSave||[],a=i.outputsToSave||[],u;i.saveAllInputs?(M(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),u=Object.keys(r).map(f=>r[f])):u=s.map(f=>r[f]);let c=o.filter((f,d)=>a[d]);return u.concat(c)}return[]}makeTensor(n,r,o,i){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",i=i||this.backend;let s=n;o==="string"&&$h(n[0])&&(s=n.map(c=>mm(c)));let a=i.write(s,r,o),u=new Qt(r,o,a,this.nextTensorId());if(this.trackTensor(u,i),o==="string"){let c=this.state.tensorInfo.get(a),f=TM(s);this.state.numBytes+=f-c.bytes,c.bytes=f}return u}makeTensorFromDataId(n,r,o,i){o=o||"float32";let s={dataId:n,shape:r,dtype:o};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(n,r){let{dataId:o,shape:i,dtype:s}=n,a=new Qt(i,s,o,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(n,r=!0,o,i){o=o||this.nextVariableId().toString(),i!=null&&i!==n.dtype&&(n=n.cast(i));let s=new ic(n,r,o,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(n,r){this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++;let o=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(o=n.size*Ph(n.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:r||this.backend,dtype:n.dtype,shape:n.shape,bytes:o})),n instanceof ic||this.track(n)}incRef(n,r){this.trackTensor(n,r),this.backend.incRef(n.dataId)}removeDataId(n,r){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===r&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;let r=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,n.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),n.dtype!=="complex64"&&n.dtype!=="string"){let o=n.size*Ph(n.dtype);this.state.numBytes-=o}r.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,r.backend)}disposeVariables(){for(let n in this.state.registeredVariables){let r=this.state.registeredVariables[n];this.disposeVariable(r)}}disposeVariable(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]}memory(){let n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}profile(n){return ne(this,null,function*(){this.state.profiling=!0;let r=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-o;for(let i of this.state.activeProfile.kernels)i.kernelTimeMs=yield i.kernelTimeMs,i.extraInfo=yield i.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(n,r,o,i,s,a){let u={id:this.state.nextTapeNodeId++,kernelName:n,inputs:r,outputs:o,saved:s},c=NM(n);c!=null&&(i=c.gradFunc),i!=null&&(u.gradient=f=>(f=f.map((d,h)=>{if(d==null){let m=o[h],v=Bh(m.size,m.dtype);return this.makeTensor(v,m.shape,m.dtype)}return d}),i(f.length>1?f:f[0],s,a))),this.state.activeTape.push(u)}keep(n){return n.kept=!0,n}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){let r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(r.name=n),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(n){let r=WT(n),o=new Set(r.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let a=this.state.activeScope.track[s];!a.kept&&!o.has(a.id)&&a.dispose()}let i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(n,r,o,i=!1){if(M(r.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${o.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));M(s instanceof Qt,()=>"The result y returned by f() must be a tensor.");let a=Lz(this.state.activeTape,r,s);if(!i&&a.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let u={};u[s.id]=o??sxe(s.shape),Vz(u,a,f=>this.tidy(f),axe);let c=r.map(f=>u[f.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(f=>{for(let d of f.saved)d.dispose()}),this.state.activeTape=null),{value:s,grads:c}})}customGrad(n){return M(Lh(n),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{M(r.every(u=>u instanceof Qt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o,i={};r.forEach((u,c)=>{i[c]=u});let s=(u,c)=>(o=n(...r,c),M(o.value instanceof Qt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),M(Lh(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),a=(u,c)=>{let f=o.gradFunc(u,c),d=Array.isArray(f)?f:[f];M(d.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),M(d.every(m=>m instanceof Qt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let h={};return d.forEach((m,v)=>{h[v]=()=>m}),h};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,r){return this.state.tensorInfo.get(n).backend.readToGPU(n,r)}time(n){return ne(this,null,function*(){let r=ad(),o=yield this.backend.time(n);return o.wallMs=ad()-r,o})}track(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new qT;for(let n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return e.nextTensorId=0,e.nextVariableId=0,e})();function sxe(e){let t=Dv(mt(e),"float32");return k.makeTensor(t,e,"float32")}function VM(){let e=SM();if(e._tfengine==null){let t=new Nv(e);e._tfengine=new ixe(t)}return lz(e._tfengine.ENV),jz(()=>e._tfengine),e._tfengine}var k=VM();function axe(e,t){let n={a:e,b:t};return k.runKernel(_l,n)}var Dl={};tn(Dl,{isBrowser:()=>UM,isMobile:()=>lxe,mockIsMobile:()=>cxe});function uxe(){return typeof navigator<"u"&&navigator!=null}var BM;function cxe(e){BM=e}function lxe(e){if(BM!==void 0)return BM;if(e||uxe()){if(e||(e=navigator),e.product==="ReactNative")return!0;let t=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");if(!t){let n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function UM(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Wo=z();Wo.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Wo.registerFlag("IS_BROWSER",()=>UM());Wo.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Wo.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Wo.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Wo.registerFlag("PROD",()=>!1);Wo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Wo.getBool("DEBUG"));Wo.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Wo.registerFlag("IS_TEST",()=>!1);Wo.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Wo.getBool("DEBUG"));Wo.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Wo.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Wo.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function qo(e,t){let n=e;if(ao(e))return t==="string"?[]:[e.length];if(zT(e)){let o=e.channels||"RGBA";return[e.height,e.width*o.length]}else if(HT(e))return[e.buffer.size/(t==null?4:Ph(t))];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||ao(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&z().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Jz(e,r,[]),r}function Jz(e,t,n){if(n=n||[],!Array.isArray(e)&&!ao(e)){M(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}M(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),M(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);let r=t.slice(1);for(let o=0;o<e.length;++o)Jz(e[o],r,n.concat(o))}function Qz(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function _(e,t,n,r="numeric"){if(e instanceof $M())return Qz(r,e.dtype,t,n),e;let o=Tl(e);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),Qz(r,o,t,n),e==null||!ao(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){let u=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}let i=qo(e,o);!ao(e)&&!Array.isArray(e)&&(e=[e]);let a=o!=="string"?hm(e,o):Sl(e,[],!0);return k.makeTensor(a,i,o)}function cd(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((i,s)=>_(i,`${t}[${s}]`,n,r))}var GM="__op";function S(e){let t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+GM;let o=(...i)=>{k.startScope(n);try{let s=r(...i);return ed(s)&&console.error("Cannot return a Promise inside of tidy."),k.endScope(s),s}catch(s){throw k.endScope(null),s}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}function fxe(e,t){let n=_(e,"real","complex"),r=_(t,"imag","complex");$n(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);let o={real:n,imag:r};return k.runKernel(kv,o)}var Ko=S({complex_:fxe});function Io(e,t,n,r){if(r==null)r=Tl(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(HT(e)||zT(e)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return k.backend.createTensorFromGPUData(e,t||n,r)}if(!ao(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){In(t);let o=mt(t),i=mt(n);M(o===i,()=>`Based on the provided shape, [${t}], the tensor should have ${o} values but has ${i}`);for(let s=0;s<n.length;++s){let a=n[s],u=s===n.length-1?a!==mt(t.slice(s)):!0;M(n[s]===t[s]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!ao(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?hm(e,r):Sl(e,[],!0),k.makeTensor(e,t,r)}function So(e,t,n){let r=qo(e,n);return Io(e,t,r,n)}var sc={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var Kr=class e{static join(t){return new e(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(r=>ao(r)?r.buffer:r),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let n=0;for(let r=0;r<t.length;r++){let o=t[r];r!==t.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=n+o.byteLength;this.shards.push({buffer:o,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);let r=this.findShardForByte(t);if(r===-1)throw new Error(`Could not find start shard for byte ${t}`);let o=n-t,i=new ArrayBuffer(o),s=new Uint8Array(i),a=0;for(let u=r;u<this.shards.length;u++){let c=this.shards[u],d=t+a-c.start,h=a,v=Math.min(n,c.end)-c.start,x=new Uint8Array(c.buffer,d,v-d);if(s.set(x,h),a+=x.length,n<c.end)break}return i}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(o){return t<o.start?-1:t>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=dxe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function dxe(e,t){let n=0,r=e.length;for(;n<=r;){let o=Math.floor((r-n)/2)+n,i=t(e[o]);if(i===0)return o;i<0?r=o:n=o+1}return-1}function pxe(e){z().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}Hz(pxe);function ac(){return k}function ze(e,t){return k.tidy(e,t)}function Wt(e){WT(e).forEach(n=>n.dispose())}function Xo(e){return k.keep(e)}function eH(){return k.backendName}function tH(e,t,n=1){return k.registerBackend(e,t,n)}function nH(){return k.backend}var Nl=4;function iH(e,t){return ne(this,null,function*(){let n=[],r=[],o=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);for(let s=0;s<o.length;++s){let a=o[s],u=Array.isArray(e)?e[s].tensor:e[a];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${u.dtype}`);let c={name:a,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){let f=new Promise(d=>ne(this,null,function*(){let h=yield u.bytes(),m=h.reduce((b,C)=>b+C.length,0)+Nl*h.length,v=new Uint8Array(m),x=0;for(let b=0;b<h.length;b++){let C=h[b],D=new Uint8Array(new Uint32Array([C.length]).buffer);v.set(D,x),x+=Nl,v.set(C,x),x+=C.length}d(v)}));r.push(f)}else r.push(u.data());t!=null&&(c.group=t),n.push(c)}let i=yield Promise.all(r);return{data:gxe(i),specs:n}})}function KT(e,t){let n=new Kr(e),r={},o=0;for(let i of t){let s=hxe(i,(a,u)=>n.slice(o+a,o+u));r[i.name]=sH(i,n.slice(o,o+s)),o+=s}return r}function hxe(e,t){let n=mt(e.shape),r;if("quantization"in e){let o=e.quantization;r=sc[o.dtype]}else if(e.dtype==="string"){let o=0;for(let i=0;i<n;i++)o+=Nl+new Uint32Array(t(o,o+Nl))[0];return o}else r=sc[e.dtype];return n*r}function mxe(e,t){return ne(this,null,function*(){let n=mt(e.shape),r;if("quantization"in e){let o=e.quantization;r=sc[o.dtype]}else if(e.dtype==="string"){let o=0;for(let i=0;i<n;i++)o+=Nl+new Uint32Array(yield t(o,o+Nl))[0];return o}else r=sc[e.dtype];return n*r})}function sH(e,t){let n=e.name,r=e.dtype,o=e.shape,i=mt(o),s,a=0;if("quantization"in e){let u=e.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${e.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${e.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${e.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=sc[u.dtype],f=u.dtype==="uint8"?new Uint8Array(t):new Uint16Array(t);if(r==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){s=new Float32Array(f.length);for(let d=0;d<f.length;d++){let h=f[d];s[d]=h*u.scale+u.min}}else if(u.dtype==="float16")s=bxe()(f);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(r==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);s=new Int32Array(f.length);for(let d=0;d<f.length;d++){let h=f[d];s[d]=Math.round(h*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*c}else if(r==="string"){let u=mt(e.shape);s=[];for(let c=0;c<u;c++){let f=new Uint32Array(t.slice(a,a+Nl))[0];a+=Nl;let d=new Uint8Array(t.slice(a,a+f));s.push(d),a+=f}}else{let u=sc[r];if(r==="float32")s=new Float32Array(t);else if(r==="int32")s=new Int32Array(t);else if(r==="bool")s=new Uint8Array(t);else if(r==="complex64"){s=new Float32Array(t);let c=new Float32Array(s.length/2),f=new Float32Array(s.length/2);for(let v=0;v<c.length;v++)c[v]=s[v*2],f[v]=s[v*2+1];let d=So(c,o,"float32"),h=So(f,o,"float32"),m=Ko(d,h);return d.dispose(),h.dispose(),m}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*u}return So(s,o,r)}function rH(e,t,n){return ne(this,null,function*(){let r=new Uint8Array(t);for(;r.byteLength<n;){let{done:o,value:i}=yield e.read();if(o&&i==null){let a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let s=new Uint8Array(r.length+i.byteLength);s.set(r,0),s.set(new Uint8Array(i),r.length),r=s}return r.buffer})}function XT(e,t){return ne(this,null,function*(){let n={},r=e.getReader(),o=new ArrayBuffer(0);for(let i of t){let s=yield mxe(i,(c,f)=>ne(this,null,function*(){return o=yield rH(r,o,f),o.slice(c,f)}));o=yield rH(r,o,s);let a=o.slice(0,s);o=o.slice(s);let u=sH(i,a);if(n[i.name]=u,eH()==="webgpu"){let c=nH();"uploadToGPU"in c&&mt(u.shape)>=z().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(u.dataId)}}return n})}function gxe(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0,n=[];e.forEach(i=>{if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});let r=new Uint8Array(t),o=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}var jM=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function oH(e){return jM?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function aH(e){if(jM)return Buffer.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let r=0,o=t.length;r<o;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function uH(e){if(jM){let r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function cH(e){return Kr.join(e)}function zM(e){let t="/";for(e=e.trim();e.endsWith(t);)e=e.slice(0,e.length-1);let n=e.split(t);return n[n.length-1]}function YT(e,t){let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function HM(e,t,n){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}function vm(e,t){return ne(this,null,function*(){let n,r;return e.weightsManifest!=null&&([n,r]=yield t(e.weightsManifest)),HM(e,n,r)})}function cu(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:oH(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:oH(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new Kr(e.weightData).byteLength}}function Hv(e){let t=[];for(let n of e)t.push(...n.weights);return t}function yxe(){let e=n=>{let r=n<<13,o=0;for(;!(r&8388608);)o-=8388608,r<<=1;return r&=-8388609,o+=947912704,r|o},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function vxe(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function xxe(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function bxe(){let e=yxe(),t=vxe(),n=xxe();return r=>{let o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let s=0;s<r.length;s++){let a=r[s],u=e[n[a>>10]+(a&1023)]+t[a>>10];i[s]=u}return new Float32Array(o)}}var Ir=class e{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return e.instance==null&&(e.instance=new e),e.instance}static registerSaveRouter(t){e.getInstance().saveRouters.push(t)}static registerLoadRouter(t){e.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return e.getHandlers(t,"save")}static getLoadHandlers(t,n){return e.getHandlers(t,"load",n)}static getHandlers(t,n,r){let o=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(s=>{let a=s(t,r);a!==null&&o.push(a)}),o}},lH=e=>Ir.registerSaveRouter(e),fH=e=>Ir.registerLoadRouter(e),dH=e=>Ir.getSaveHandlers(e),pH=(e,t)=>Ir.getLoadHandlers(e,t);var WM="tensorflowjs",qM=1,ld="models_store",Al="model_info_store";function hH(){if(!z().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function KM(e){let t=e.result;t.createObjectStore(ld,{keyPath:"modelPath"}),t.createObjectStore(Al,{keyPath:"modelPath"})}var fd=(()=>{class e{constructor(n){if(this.indexedDB=hH(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}save(n){return ne(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,n)})}load(){return ne(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(n,r){return new Promise((o,i)=>{let s=this.indexedDB.open(WM,qM);s.onupgradeneeded=()=>KM(s),s.onsuccess=()=>{let a=s.result;if(r==null){let u=a.transaction(ld,"readonly"),f=u.objectStore(ld).get(this.modelPath);f.onsuccess=()=>{if(f.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(f.result.modelArtifacts)},f.onerror=d=>(a.close(),i(f.error)),u.oncomplete=()=>a.close()}else{r.weightData=Kr.join(r.weightData);let u=cu(r),c=a.transaction(Al,"readwrite"),f=c.objectStore(Al),d;try{d=f.put({modelPath:this.modelPath,modelArtifactsInfo:u})}catch(m){return i(m)}let h;d.onsuccess=()=>{h=a.transaction(ld,"readwrite");let m=h.objectStore(ld),v;try{v=m.put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:u})}catch(x){return i(x)}v.onsuccess=()=>o({modelArtifactsInfo:u}),v.onerror=x=>{f=c.objectStore(Al);let b=f.delete(this.modelPath);b.onsuccess=()=>(a.close(),i(v.error)),b.onerror=C=>(a.close(),i(v.error))}},d.onerror=m=>(a.close(),i(d.error)),c.oncomplete=()=>{h==null?a.close():h.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}return e.URL_SCHEME="indexeddb://",e})();var mH=e=>z().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(fd.URL_SCHEME)?wxe(e.slice(fd.URL_SCHEME.length)):null;Ir.registerSaveRouter(mH);Ir.registerLoadRouter(mH);function wxe(e){return new fd(e)}function Exe(e){return e.startsWith(fd.URL_SCHEME)?e.slice(fd.URL_SCHEME.length):e}var ZT=class{constructor(){this.indexedDB=hH()}listModels(){return ne(this,null,function*(){return new Promise((t,n)=>{let r=this.indexedDB.open(WM,qM);r.onupgradeneeded=()=>KM(r),r.onsuccess=()=>{let o=r.result,i=o.transaction(Al,"readonly"),a=i.objectStore(Al).getAll();a.onsuccess=()=>{let u={};for(let c of a.result)u[c.modelPath]=c.modelArtifactsInfo;t(u)},a.onerror=u=>(o.close(),n(a.error)),i.oncomplete=()=>o.close()},r.onerror=o=>n(r.error)})})}removeModel(t){return ne(this,null,function*(){return t=Exe(t),new Promise((n,r)=>{let o=this.indexedDB.open(WM,qM);o.onupgradeneeded=()=>KM(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(Al,"readwrite"),a=s.objectStore(Al),u=a.get(t),c;u.onsuccess=()=>{if(u.result==null)return i.close(),r(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{let f=a.delete(t),d=()=>{c=i.transaction(ld,"readwrite");let m=c.objectStore(ld).delete(t);m.onsuccess=()=>n(u.result.modelArtifactsInfo),m.onerror=v=>r(u.error)};f.onsuccess=d,f.onerror=h=>(d(),i.close(),r(u.error))}},u.onerror=f=>(i.close(),r(u.error)),s.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},o.onerror=i=>r(o.error)})})}};var uc="/",xm="tensorflowjs_models",gH="info",Cxe="model_topology",Txe="weight_specs",_xe="weight_data",Ixe="model_metadata";function yH(e){return{info:[xm,e,gH].join(uc),topology:[xm,e,Cxe].join(uc),weightSpecs:[xm,e,Txe].join(uc),weightData:[xm,e,_xe].join(uc),modelMetadata:[xm,e,Ixe].join(uc)}}function vH(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}function Sxe(e){let t=e.split(uc);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(uc)}function Dxe(e){return e.startsWith(dd.URL_SCHEME)?e.slice(dd.URL_SCHEME.length):e}var dd=(()=>{class e{constructor(n){if(!z().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=yH(this.modelPath)}save(n){return ne(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let r=JSON.stringify(n.modelTopology),o=JSON.stringify(n.weightSpecs),i=cu(n),s=Kr.join(n.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,aH(s));let a={format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,signature:n.signature!=null?n.signature:void 0,userDefinedMetadata:n.userDefinedMetadata!=null?n.userDefinedMetadata:void 0,modelInitializer:n.modelInitializer!=null?n.modelInitializer:void 0,initializerSignature:n.initializerSignature!=null?n.initializerSignature:void 0,trainingConfig:n.trainingConfig!=null?n.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw vH(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}})}load(){return ne(this,null,function*(){let n=JSON.parse(this.LS.getItem(this.keys.info));if(n==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let r={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=o;let i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=i;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let u=JSON.parse(s);r.format=u.format,r.generatedBy=u.generatedBy,r.convertedBy=u.convertedBy,u.signature!=null&&(r.signature=u.signature),u.userDefinedMetadata!=null&&(r.userDefinedMetadata=u.userDefinedMetadata),u.modelInitializer!=null&&(r.modelInitializer=u.modelInitializer),u.initializerSignature!=null&&(r.initializerSignature=u.initializerSignature),u.trainingConfig!=null&&(r.trainingConfig=u.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=uH(a),r})}}return e.URL_SCHEME="localstorage://",e})();var xH=e=>z().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(dd.URL_SCHEME)?Nxe(e.slice(dd.URL_SCHEME.length)):null;Ir.registerSaveRouter(xH);Ir.registerLoadRouter(xH);function Nxe(e){return new dd(e)}var QT=class{constructor(){M(z().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),M(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return ne(this,null,function*(){let t={},n=xm+uc,r=uc+gH;for(let o=0;o<this.LS.length;++o){let i=this.LS.key(o);if(i.startsWith(n)&&i.endsWith(r)){let s=Sxe(i);t[s]=JSON.parse(this.LS.getItem(i))}}return t})}removeModel(t){return ne(this,null,function*(){t=Dxe(t);let n=yH(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);let r=JSON.parse(this.LS.getItem(n.info));return vH(n),r})}};var bm="://",Ca=class e{constructor(){this.managers={}}static getInstance(){return e.instance==null&&(e.instance=new e),e.instance}static registerManager(t,n){M(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(bm)&&(t=t.slice(0,t.indexOf(bm))),M(t.length>0,()=>"scheme must not be an empty string.");let r=e.getInstance();M(r.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),r.managers[t]=n}static getManager(t){let n=e.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(e.getInstance().managers)}};function JT(e){if(e.indexOf(bm)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ca.getSchemes().join(",")}`);return{scheme:e.split(bm)[0],path:e.split(bm)[1]}}function bH(e,t,n=!1){return ne(this,null,function*(){M(e!==t,()=>`Old path and new path are the same: '${e}'`);let r=Ir.getLoadHandlers(e);M(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),M(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);let o=r[0],i=Ir.getSaveHandlers(t);M(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),M(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);let s=i[0],a=JT(e).scheme,u=JT(e).path,c=a===JT(e).scheme,f=yield o.load();n&&c&&(yield Ca.getManager(a).removeModel(u));let d=yield s.save(f);return n&&!c&&(yield Ca.getManager(a).removeModel(u)),d.modelArtifactsInfo})}function wH(){return ne(this,null,function*(){let e=Ca.getSchemes(),t={};for(let n of e){let r=yield Ca.getManager(n).listModels();for(let o in r){let i=n+bm+o;t[i]=r[o]}}return t})}function EH(e){return ne(this,null,function*(){let t=JT(e);return Ca.getManager(t.scheme).removeModel(t.path)})}function CH(e,t){return ne(this,null,function*(){return bH(e,t,!1)})}function TH(e,t){return ne(this,null,function*(){return bH(e,t,!0)})}var XM=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}setTimeoutCustom(t,n){if(typeof window>"u"||!z().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,n);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();let o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return VT(t)}};if(z().get("IS_BROWSER")){z().setPlatform("browser",new XM);try{Ca.registerManager(dd.URL_SCHEME,new QT)}catch{}try{Ca.registerManager(fd.URL_SCHEME,new ZT)}catch{}}var Rxe={importFetch:()=>IH()},YM;var ZM=class{constructor(){this.util=SH(),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return z().global.fetch!=null?z().global.fetch(t,n):(YM==null&&(YM=Rxe.importFetch()),YM(t,n))}now(){let t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}};z().get("IS_NODE")&&!z().get("IS_BROWSER")&&z().setPlatform("node",new ZM);function bt(e,t="float32",n){return t=t||"float32",In(e),new hs(e,t,n)}function kxe(e,t){let n=_(e,"x","cast");if(!CM(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:n},o={dtype:t};return k.runKernel(td,r,o)}var wt=S({cast_:kxe});function Oxe(e){let n={x:_(e,"x","clone","string_or_numeric")};return k.runKernel(nd,n)}var Si=S({clone_:Oxe});function e_(e,t=!1){console.log(e.toString(t))}VM();var Mxe={buffer:bt,cast:wt,clone:Si,print:e_};zz(Mxe);function Fxe(e,t){let n=_(e,"a","add"),r=_(t,"b","add");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(_l,o)}var _e=S({add_:Fxe});function Pxe(e,t){let n=_(e,"a","floorDiv"),r=_(t,"b","floorDiv");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(qh,o)}var t_=S({floorDiv_:Pxe});function $xe(e,t){let n=_(e,"a","div"),r=_(t,"b","div");if([n,r]=ft(n,r),n.dtype==="int32"&&r.dtype==="int32")return t_(n,r);let o={a:n,b:r},i={};return k.runKernel(aC,o,i)}var Xe=S({div_:$xe});function Lxe(e,t){let n=_(e,"a","mul"),r=_(t,"b","mul");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(tm,o)}var le=S({mul_:Lxe});function Vxe(e){let t=_(e,"x","abs");if(t.dtype==="complex64"){let n={x:t};return k.runKernel(GE,n)}else{let n={x:t};return k.runKernel(Rv,n)}}var Vr=S({abs_:Vxe});function Bxe(e){let n={x:_(e,"x","acos")};return k.runKernel(CE,n)}var DH=S({acos_:Bxe});function Uxe(e){let n={x:_(e,"x","acosh")};return k.runKernel(TE,n)}var NH=S({acosh_:Uxe});function Gxe(e){M(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),M(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);let t=e.map((o,i)=>_(o,`tensors${i}`,"addN")),n=t[0];t.forEach(o=>{if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(o=>{if(!Ti(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=t;return k.runKernel(_E,r)}var AH=S({addN_:Gxe});function jxe(e,t=null,n=!1){let o={x:_(e,"x","all","bool")},i={axis:t,keepDims:n};return k.runKernel(IE,o,i)}var RH=S({all_:jxe});function zxe(e,t=null,n=!1){let o={x:_(e,"x","any","bool")},i={axis:t,keepDims:n};return k.runKernel(SE,o,i)}var kH=S({any_:zxe});function Hxe(e,t=0){let r={x:_(e,"x","argMax")},o={axis:t};return k.runKernel(DE,r,o)}var OH=S({argMax_:Hxe});function Wxe(e,t=0){let r={x:_(e,"x","argMin")},o={axis:t};return k.runKernel(NE,r,o)}var MH=S({argMin_:Wxe});function qxe(e){let n={x:_(e,"x","asin")};return k.runKernel(AE,n)}var FH=S({asin_:qxe});function Kxe(e){let n={x:_(e,"x","asinh")};return k.runKernel(RE,n)}var PH=S({asinh_:Kxe});function Xxe(e){let n={x:_(e,"x","atan")};return k.runKernel(kE,n)}var $H=S({atan_:Xxe});function Yxe(e,t){let n=_(e,"a","atan2"),r=_(t,"b","atan2");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(ME,o)}var LH=S({atan2_:Yxe});function Zxe(e){let n={x:_(e,"x","atanh")};return k.runKernel(OE,n)}var VH=S({atanh_:Zxe});function Qxe(e,t,n,r,o="NHWC",i){let s=e[3],a=[...t,s],u=UH(o);return md(e,a,n,i,r,null,null,u)}function JM(e,t,n,r,o,i,s="channelsLast"){let[a,u]=Wv(t),c;if(s==="channelsLast")c=[a,u,e[3],e[3]];else if(s==="channelsFirst")c=[a,u,e[1],e[1]];else throw new Error(`Unknown dataFormat ${s}`);return md(e,c,n,r,o,i,!1,s)}function Jxe(e,t,n,r,o,i,s="NDHWC"){let[a,u,c]=QM(t),f,d;if(s==="NDHWC")d="channelsLast",f=[a,u,c,e[4],e[4]];else if(s==="NCDHW")d="channelsFirst",f=[a,u,c,e[1],e[1]];else throw new Error(`Unknown dataFormat ${s}`);return BH(e,f,n,r,o,!1,d,i)}function md(e,t,n,r,o,i,s=!1,a="channelsLast"){let[u,c,f,d]=[-1,-1,-1,-1];if(a==="channelsLast")[u,c,f,d]=e;else if(a==="channelsFirst")[u,d,c,f]=e;else throw new Error(`Unknown dataFormat ${a}`);let[h,m,,v]=t,[x,b]=Wv(n),[C,D]=Wv(r),O=Em(h,C),F=Em(m,D),{padInfo:B,outHeight:H,outWidth:X}=n1e(o,c,f,x,b,O,F,i,a),Z=s?v*d:v,te;return a==="channelsFirst"?te=[u,Z,H,X]:a==="channelsLast"&&(te=[u,H,X,Z]),{batchSize:u,dataFormat:a,inHeight:c,inWidth:f,inChannels:d,outHeight:H,outWidth:X,outChannels:Z,padInfo:B,strideHeight:x,strideWidth:b,filterHeight:h,filterWidth:m,effectiveFilterHeight:O,effectiveFilterWidth:F,dilationHeight:C,dilationWidth:D,inShape:e,outShape:te,filterShape:t}}function BH(e,t,n,r,o,i=!1,s="channelsLast",a){let[u,c,f,d,h]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[u,c,f,d,h]=e;else if(s==="channelsFirst")[u,h,c,f,d]=e;else throw new Error(`Unknown dataFormat ${s}`);let[m,v,x,,b]=t,[C,D,O]=QM(n),[F,B,H]=QM(r),X=Em(m,F),Z=Em(v,B),te=Em(x,H),{padInfo:J,outDepth:ae,outHeight:ye,outWidth:ke}=r1e(o,c,f,d,C,D,O,X,Z,te,a),Ke=i?b*h:b,Me;return s==="channelsFirst"?Me=[u,Ke,ae,ye,ke]:s==="channelsLast"&&(Me=[u,ae,ye,ke,Ke]),{batchSize:u,dataFormat:s,inDepth:c,inHeight:f,inWidth:d,inChannels:h,outDepth:ae,outHeight:ye,outWidth:ke,outChannels:Ke,padInfo:J,strideDepth:C,strideHeight:D,strideWidth:O,filterDepth:m,filterHeight:v,filterWidth:x,effectiveFilterDepth:X,effectiveFilterHeight:Z,effectiveFilterWidth:te,dilationDepth:F,dilationHeight:B,dilationWidth:H,inShape:e,outShape:Me,filterShape:t}}function e1e(e,t,n,r,o){r==null&&(r=eF(e,t,n));let i=e[0],s=e[1],a=qv((i-t+2*r)/n+1,o),u=qv((s-t+2*r)/n+1,o);return[a,u]}function t1e(e,t,n,r,o,i){o==null&&(o=eF(e,t[0],r[0]));let s=[0,0,0,n];for(let a=0;a<3;a++)e[a]+2*o>=t[a]&&(s[a]=qv((e[a]-t[a]+2*o)/r[a]+1,i));return s}function eF(e,t,n,r=1){let o=Em(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function Wv(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function QM(e){return typeof e=="number"?[e,e,e]:e}function Em(e,t){return t<=1?e:e+(e-1)*(t-1)}function n1e(e,t,n,r,o,i,s,a,u){let c,f,d;if(typeof e=="number"){c={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};let m=e1e([t,n],i,r,e,a);f=m[0],d=m[1]}else if(e==="same"){f=Math.ceil(t/r),d=Math.ceil(n/o);let h=Math.max(0,(f-1)*r+i-t),m=Math.max(0,(d-1)*o+s-n),v=Math.floor(h/2),x=h-v,b=Math.floor(m/2),C=m-b;c={top:v,bottom:x,left:b,right:C,type:"SAME"}}else if(e==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((t-i+1)/r),d=Math.ceil((n-s+1)/o);else if(typeof e=="object"){let h=u==="channelsLast"?e[1][0]:e[2][0],m=u==="channelsLast"?e[1][1]:e[2][1],v=u==="channelsLast"?e[2][0]:e[3][0],x=u==="channelsLast"?e[2][1]:e[3][1];c={top:h,bottom:m,left:v,right:x,type:h===0&&m===0&&v===0&&x===0?"VALID":"EXPLICIT"},f=qv((t-i+h+m)/r+1,a),d=qv((n-s+v+x)/o+1,a)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:c,outHeight:f,outWidth:d}}function r1e(e,t,n,r,o,i,s,a,u,c,f){let d,h,m,v;if(e==="valid"&&(e=0),typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};let b=t1e([t,n,r,1],[a,u,c],1,[o,i,s],e,f);h=b[0],m=b[1],v=b[2]}else if(e==="same"){h=Math.ceil(t/o),m=Math.ceil(n/i),v=Math.ceil(r/s);let x=(h-1)*o+a-t,b=(m-1)*i+u-n,C=(v-1)*s+c-r,D=Math.floor(x/2),O=x-D,F=Math.floor(b/2),B=b-F,H=Math.floor(C/2),X=C-H;d={top:F,bottom:B,left:H,right:X,front:D,back:O,type:"SAME"}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:h,outHeight:m,outWidth:v}}function qv(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function hd(e){let[t,n,r]=Wv(e);return t===1&&n===1&&r===1}function co(e,t){return hd(e)||hd(t)}function lu(e){return Wv(e).every(t=>t>0)}function UH(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function tr(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")M(rc(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(r=>{r.forEach(o=>{M(rc(o),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}function o1e(e,t){let r={x:_(e,"x","reshape","string_or_numeric")},o={shape:t};return k.runKernel(eT,r,o)}var Q=S({reshape_:o1e});function i1e(e,t,n,r,o){let i=_(e,"x","avgPool","float32"),s=1;M(co(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let a=i,u=!1;i.rank===3&&(u=!0,a=Q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),M(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),tr("avgPool",r,o);let c={x:a},f={filterSize:t,strides:n,pad:r,dimRoundingMode:o},d=k.runKernel(FE,c,f);return d=wt(d,i.dtype),u?Q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var n_=S({avgPool_:i1e});function s1e(e,t,n,r,o,i="NDHWC"){let s=_(e,"x","avgPool3d","float32"),a=s,u=!1;s.rank===4&&(u=!0,a=Q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),M(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),M(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),M(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),tr("avgPool3d",r,o);let c={x:a},f={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},d=k.runKernel(PE,c,f);return d=wt(d,a.dtype),u?Q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var GH=S({avgPool3d_:s1e});function a1e(e,t=0){M(e.length>=1,()=>"Pass at least one tensor to concat");let n=cd(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Si(n[0]);let r=n,o={axis:t};return k.runKernel(jE,r,o)}var rn=S({concat_:a1e});function u1e(e,t,n=!1,r=!1){let o=_(e,"a","matMul"),i=_(t,"b","matMul");[o,i]=ft(o,i);let s={a:o,b:i},a={transposeA:n,transposeB:r};return k.runKernel($E,s,a)}var Vt=S({matMul_:u1e});function c1e(e){let n={x:_(e,"x","sigmoid","float32")};return k.runKernel(om,n)}var qs=S({sigmoid_:c1e});function l1e(e,t,n){let r=_(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let o={x:r},i={begin:t,size:n};return k.runKernel(Pv,o,i)}var We=S({slice_:l1e});function f1e(e){let n={x:_(e,"x","tanh","float32")};return k.runKernel(NT,n)}var Kv=S({tanh_:f1e});function d1e(e,t,n,r,o,i){let s=_(e,"forgetBias","basicLSTMCell"),a=_(t,"lstmKernel","basicLSTMCell"),u=_(n,"lstmBias","basicLSTMCell"),c=_(r,"data","basicLSTMCell"),f=_(o,"c","basicLSTMCell"),d=_(i,"h","basicLSTMCell"),h=rn([c,d],1),m=Vt(h,a),v=_e(m,u),x=v.shape[0],b=v.shape[1]/4,C=[x,b],D=We(v,[0,0],C),O=We(v,[0,b],C),F=We(v,[0,b*2],C),B=We(v,[0,b*3],C),H=_e(le(qs(D),Kv(O)),le(f,qs(_e(s,F)))),X=le(Kv(H),qs(B));return[H,X]}var jH=S({basicLSTMCell_:d1e});function p1e(e,t,n){let r=_(e,"x","batchToSpaceND"),o=t.reduce((a,u)=>a*u);M(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),M(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),M(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`);let i={x:r},s={blockShape:t,crops:n};return k.runKernel(LE,i,s)}var r_=S({batchToSpaceND_:p1e});function zH(e){let t;return e.rank===0||e.rank===1?t=Q(e,[1,1,1,e.size]):e.rank===2?t=Q(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}function h1e(e,t,n,r,o,i){i==null&&(i=.001);let s=_(e,"x","batchNorm"),a=_(t,"mean","batchNorm"),u=_(n,"variance","batchNorm"),c;o!=null&&(c=_(o,"scale","batchNorm"));let f;r!=null&&(f=_(r,"offset","batchNorm")),M(a.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M(f==null||a.rank===f.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let h={x:zH(s),scale:c,offset:f,mean:a,variance:u},m={varianceEpsilon:i},v=k.runKernel(mC,h,m);return Q(v,s.shape)}var Rl=S({batchNorm_:h1e});function m1e(e,t,n,r,o,i){let s=_(e,"x","batchNorm"),a=_(t,"mean","batchNorm"),u=_(n,"variance","batchNorm"),c;o!=null&&(c=_(o,"scale","batchNorm"));let f;return r!=null&&(f=_(r,"offset","batchNorm")),M(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),M(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),M(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&M(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),f!=null&&M(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${f.rank}.`),Rl(s,a,u,f,c,i)}var HH=S({batchNorm2d_:m1e});function g1e(e,t,n,r,o,i){let s=_(e,"x","batchNorm"),a=_(t,"mean","batchNorm"),u=_(n,"variance","batchNorm"),c;o!=null&&(c=_(o,"scale","batchNorm"));let f;return r!=null&&(f=_(r,"offset","batchNorm")),M(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),M(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),M(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&M(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),f!=null&&M(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${f.rank}.`),Rl(s,a,u,f,c,i)}var WH=S({batchNorm3d_:g1e});function y1e(e,t,n,r,o,i){let s=_(e,"x","batchNorm"),a=_(t,"mean","batchNorm"),u=_(n,"variance","batchNorm"),c;o!=null&&(c=_(o,"scale","batchNorm"));let f;return r!=null&&(f=_(r,"offset","batchNorm")),M(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),M(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),M(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&M(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),f!=null&&M(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${f.rank}.`),Rl(s,a,u,f,c,i)}var qH=S({batchNorm4d_:y1e});function v1e(e,t,n){let r=_(e,"x","bincount"),o=_(t,"weights","bincount");M(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),M(n>=0,()=>`size must be non-negative, but got ${n}.`),M(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);let i={x:r,weights:o},s={size:n};return k.runKernel(VE,i,s)}var o_=S({bincount_:v1e});function x1e(e,t){let n=_(e,"x","bitwiseAnd"),r=_(t,"y","bitwiseAnd");if(!Ti(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);let o={a:n,b:r};return k.runKernel(Uh,o)}var KH=S({bitwiseAnd_:x1e});function b1e(e,t){let n=_(e,"s0","broadcastArgs","int32"),r=_(t,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);let o={s0:n,s1:r};return k.runKernel(BE,o)}var XH=S({broadcastArgs_:b1e});function w1e(e,t){let n=_(e,"broadcastTo","x"),r=n.shape;if(In(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){let c=n.shape.slice();for(;c.length<t.length;)c.unshift(1);n=Q(n,c)}let o=n.shape,i=Array.from(t);for(let c=t.length-1;c>=0;c--)if(o[c]===t[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(i.map((c,f)=>c>1?f:-1).filter(c=>c>=0).length===0)return Si(n);let a={x:n},u={reps:i};return k.runKernel(cm,a,u)}var kl=S({broadcastTo_:w1e});function E1e(e){let n={x:_(e,"x","ceil","float32")};return k.runKernel(Gh,n)}var YH=S({ceil_:E1e});function du(e,t,n){In(e),n=n||Tl(t);let r={shape:e,value:t,dtype:n};return k.runKernel(pC,{},r)}function C1e(e,t,n){let r=_(e,"x","clipByValue");if(M(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)return du(r.shape,t,r.dtype);let o={x:r},i={clipValueMin:t,clipValueMax:n};return k.runKernel(UE,o,i)}var i_=S({clipByValue_:C1e});function T1e(e){return rn(e,0)}var ZH=S({concat1d_:T1e});function _1e(e,t){return rn(e,t)}var QH=S({concat2d_:_1e});function I1e(e,t){return rn(e,t)}var JH=S({concat3d_:I1e});function S1e(e,t){return rn(e,t)}var eW=S({concat4d_:S1e});function D1e(e,t,n,r,o="NHWC",i=[1,1],s){let a=_(e,"x","conv2d","float32"),u=_(t,"filter","conv2d","float32"),c=a,f=!1;a.rank===3&&(f=!0,c=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),M(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),tr("conv2d",r,s);let d=o==="NHWC"?c.shape[3]:c.shape[1];M(d===u.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${u.shape[2]}.`),M(co(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),M(lu(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),M(lu(n),()=>"Error in conv2D: Strides should be larger than 0.");let h={x:c,filter:u},m={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},v=k.runKernel(zE,h,m);return f?Q(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var Ol=S({conv2d_:D1e});function N1e(e,t,n,r,o="NWC",i=1,s){let a=_(e,"x","conv1d"),u=_(t,"filter","conv1d"),c=a,f=!1;a.rank===2&&(f=!0,c=Q(a,[1,a.shape[0],a.shape[1]])),M(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),M(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),tr("conv1d",r,s),M(c.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${u.shape[1]}.`),M(co(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),M(lu(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),M(lu(n),()=>"Error in conv1D: Stride should be larger than 0."),M(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);let d=Q(u,[1,u.shape[0],u.shape[1],u.shape[2]]),h=Q(c,[c.shape[0],1,c.shape[1],c.shape[2]]),b=Ol(h,d,[1,n],r,"NHWC",[1,i],s);return f?Q(b,[b.shape[2],b.shape[3]]):Q(b,[b.shape[0],b.shape[2],b.shape[3]])}var tW=S({conv1d_:N1e});function A1e(e,t,n,r,o,i="NHWC",s){M(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let a=e,u=t,c=!1;t.rank===3&&(c=!0,u=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]]),a=[1,e[0],e[1],e[2]]),M(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),M(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),M(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let f=i==="NHWC"?a[3]:a[1],d=i==="NHWC"?u.shape[3]:u.shape[1];M(f===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`),M(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),tr("conv2dDerInput",o,s);let h={dy:u,filter:n},m={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,inputShape:a},v=k.runKernel(WE,h,m);return c?Q(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var s_=S({conv2DBackpropInput_:A1e});function R1e(e,t,n,r,o,i){let s=_(e,"x","conv2dTranspose"),a=_(t,"filter","conv2dTranspose");return s_(n,s,a,r,o,"NHWC",i)}var nW=S({conv2dTranspose_:R1e});function k1e(e,t,n,r,o="NDHWC",i=[1,1,1]){let s=_(e,"x","conv3d"),a=_(t,"filter","conv3d"),u=s,c=!1;s.rank===4&&(c=!0,u=Q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),M(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),M(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),M(u.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${a.shape[3]}.`),M(co(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),M(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),M(lu(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),M(lu(n),()=>"Error in conv3D: Strides should be larger than 0.");let f={x:u,filter:a},d={strides:n,pad:r,dataFormat:o,dilations:i},h=k.runKernel(qE,f,d);return c?Q(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var rW=S({conv3d_:k1e});function O1e(e,t,n,r,o){M(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let i=e,s=t,a=!1;t.rank===4&&(a=!0,s=Q(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);let u=i[4],c=s.shape[4];M(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),M(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),M(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),M(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),M(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);let f={dy:s,filter:n},d={pad:o,strides:r,inputShape:i},h=k.runKernel(KE,f,d);return a?Q(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var oW=S({conv3DBackpropInput_:O1e});function M1e(e,t,n,r,o){let i=_(e,"x","conv3dTranspose"),s=_(t,"filter","conv3dTranspose");return oW(n,i,s,r,o)}var iW=S({conv3dTranspose_:M1e});function F1e(e){let n={x:_(e,"x","cos","float32")};return k.runKernel(XE,n)}var sW=S({cos_:F1e});function P1e(e){let n={x:_(e,"x","cosh","float32")};return k.runKernel(YE,n)}var aW=S({cosh_:P1e});function $1e(e,t=0,n=!1,r=!1){let i={x:_(e,"x","cumprod")},s={axis:t,exclusive:n,reverse:r};return k.runKernel(ZE,i,s)}var uW=S({cumprod_:$1e});function L1e(e,t=0,n=!1,r=!1){let i={x:_(e,"x","cumsum")},s={axis:t,exclusive:n,reverse:r};return k.runKernel(QE,i,s)}var cW=S({cumsum_:L1e});function V1e(e,t,n,r=!1){let o=_(e,"x","denseBincount"),i=_(t,"weights","denseBincount");M(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),M(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),M(n>=0,()=>`size must be non-negative, but got ${n}.`),M(i.size===o.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:n,binaryOutput:r};return k.runKernel(eC,s,a)}var lW=S({denseBincount_:V1e});function B1e(e,t,n="NHWC"){let r=_(e,"x","depthToSpace","float32"),o=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];M(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),M(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t}  for depthToSpace with input shape
    ${r.shape}`),M(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${t} for depthToSpace with input shape
        ${r.shape}`),M(s%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${s} for depthToSpace with input shape ${r.shape}`);let a={x:r},u={blockSize:t,dataFormat:n};return k.runKernel(tC,a,u)}var fW=S({depthToSpace_:B1e});function U1e(e,t,n,r,o="NHWC",i=[1,1],s){let a=_(e,"x","depthwiseConv2d","float32"),u=_(t,"filter","depthwiseConv2d","float32"),c=a,f=!1;a.rank===3&&(f=!0,c=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),M(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);let d=o==="NHWC"?c.shape[3]:c.shape[1];M(d===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${u.shape[2]}.`),tr("depthwiseConv2d",r,s);let h={x:c,filter:u},m={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},v=k.runKernel(nC,h,m);return f?Q(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var Cm=S({depthwiseConv2d_:U1e});function G1e(e){let n={x:_(e,"x","diag")};return k.runKernel(iC,n)}var dW=S({diag_:G1e});function j1e(e,t,n,r,o=[1,1],i="NHWC"){let s=_(e,"x","dilation2d"),a=_(t,"filter","dilation2d");M(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),M(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),M(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let u=s,c=!1;s.rank===3&&(u=Q(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),M(u.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${a.shape[2]}`);let f={x:u,filter:a},d={strides:n,pad:r,dilations:o},h=k.runKernel(sC,f,d);return c?Q(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var pW=S({dilation2d_:j1e});var Ml={};tn(Ml,{assertAndGetBroadcastShape:()=>Ft,getBroadcastDims:()=>hW,getReductionAxes:()=>a_});function hW(e,t){let n=e.length,r=[];for(let o=0;o<n;o++){let i=n-1-o,s=e[i]||1;(t[t.length-1-o]||1)>1&&s===1&&r.unshift(i)}return r}function a_(e,t){let n=[];for(let r=0;r<t.length;r++){let o=e[e.length-r-1],i=t.length-r-1,s=t[i];(o==null||o===1&&s>1)&&n.unshift(i)}return n}function Ft(e,t){let n=Math.max(e.length,t.length),r=new Array(n);for(let o=0;o<n;o++){let i=e[e.length-o-1];i==null&&(i=1);let s=t[t.length-o-1];if(s==null&&(s=1),i===1)r[n-o-1]=s;else if(s===1)r[n-o-1]=i;else if(i!==s){let a=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(a)}else r[n-o-1]=i}return r}function z1e(e,t){let n=_(e,"a","equal","string_or_numeric"),r=_(t,"b","equal","string_or_numeric");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(jh,o)}var u_=S({equal_:z1e});function H1e(e,t,n){let r=_(t,"a","where"),o=_(n,"b","where"),i=_(e,"condition","where","bool"),s=Ft(Ft(i.shape,r.shape),o.shape),a=kl(i,s),u=kl(r,s),c=kl(o,s),f={condition:a,t:u,e:c};return k.runKernel(cT,f)}var ms=S({where_:H1e});function W1e(e){let n={x:_(e,"x","zerosLike")};return k.runKernel(FT,n)}var br=S({zerosLike_:W1e});function q1e(e,t){let n=_(e,"a","div"),r=_(t,"b","div");[n,r]=ft(n,r);let o=Xe(n,r),i=br(o),s=u_(r,i);return ms(s,i,o)}var mW=S({divNoNan_:q1e});function K1e(e,t){let n=_(e,"t1","dot"),r=_(t,"t2","dot");M((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let o=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(M(o===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${i}.`),n.rank===1&&r.rank===1){let s=Q(n,[1,-1]),a=Q(r,[-1,1]),u=Vt(s,a);return Q(u,[])}else if(n.rank===1&&r.rank===2){let s=Q(n,[1,-1]),a=Q(r,[r.shape[0],r.shape[1]]),u=Vt(s,a);return Q(u,[u.size])}else if(n.rank===2&&r.rank===1){let s=Q(r,[-1,1]),a=Vt(n,s);return Q(a,[a.size])}else{let s=Q(r,[r.shape[0],r.shape[1]]);return Vt(n,s)}}var gW=S({dot_:K1e});function X1e(e,...t){let n=t.map((o,i)=>_(o,`tensors${i}`,"einsum")),r={equation:e};return k.runKernel(uC,n,r)}var Fl=S({einsum_:X1e});function Y1e(e){let n={x:_(e,"x","elu","float32")};return k.runKernel(cC,n)}var c_=S({elu_:Y1e});function Z1e(e,t){let n=_(e,"x","ensureShape","string_or_numeric");if(!xM(n.shape,t))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${t}`);return e}var yW=S({ensureShape_:Z1e});function Q1e(e){let t=_(e,"x","erf");M(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=wt(t,"float32"));let n={x:t};return k.runKernel(lC,n)}var vW=S({erf_:Q1e});function tF(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function xW(e,t,n){let r=e.length+t.length,o=[],i=0,s=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?o.push(e[i++]):o.push(t[s++]);return o}function J1e(e,t){let n=[],r=e.length;for(let i=0;i<r;i++)t.indexOf(i)===-1&&n.push(e[i]);let o=t.map(i=>e[i]);return[n,o]}function cc(e,t){let n=t.map(r=>1);return xW(e,n,t)}function ebe(e,t,n){M(tF(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function tbe(e,t){if(tF(e,t))return null;let n=[];for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(r=>n.push(r)),n}function nbe(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function rbe(e,t){let n=[];for(let r=t-e;r<t;++r)n.push(r);return n}function ibe(e,t=null,n=!1){let o={x:_(e,"x","max")},i={reductionIndices:t,keepDims:n};return k.runKernel(AC,o,i)}var pu=S({max_:ibe});function sbe(e,t=null,n=!1){let o={x:_(e,"x","min")},i={axis:t,keepDims:n};return k.runKernel(FC,o,i)}var Xv=S({min_:sbe});function abe(e,t){let n=_(e,"base","pow"),r=_(t,"exp","pow");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(WC,o)}var lc=S({pow_:abe});function Ue(e,t){if((ao(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&ao(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Io(e,[],[],t)}function ube(e){let n={x:_(e,"x","sqrt","float32")};return k.runKernel(im,n)}var Yo=S({sqrt_:ube});function cbe(e){let t=_(e,"x","square"),n={};return k.runKernel("Square",{x:t},n)}var Br=S({square_:cbe});function lbe(e,t=null,n=!1){let r=_(e,"x","sum");r.dtype==="bool"&&(r=wt(r,"int32"));let o={x:r},i={axis:t,keepDims:n};return k.runKernel(mT,o,i)}var Bt=S({sum_:lbe});function fbe(e,t="euclidean",n=null,r=!1){e=_(e,"x","norm");let o=bW(e,t,n),i=o.shape;if(r){let s=Cl(n,e.shape);i=cc(o.shape,s)}return Q(o,i)}function bW(e,t,n=null){if(e.rank===0)return Vr(e);if(e.rank!==1&&n===null)return bW(Q(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Bt(Vr(e),n);if(t===1/0)return pu(Vr(e),n);if(t===-1/0)return Xv(Vr(e),n);if(t==="euclidean"||t===2)return Yo(Bt(lc(Vr(e),Ue(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return pu(Bt(Vr(e),n[0]),n[1]-1);if(t===1/0)return pu(Bt(Vr(e),n[1]),n[0]);if(t===-1/0)return Xv(Bt(Vr(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return Yo(Bt(Br(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var gd=S({norm_:fbe});function dbe(e,t=null,n=!1){return gd(e,"euclidean",t,n)}var wW=S({euclideanNorm_:dbe});function pbe(e){let n={x:_(e,"x","exp")};return k.runKernel(zh,n)}var Zo=S({exp_:pbe});function hbe(e,t=0){let n=_(e,"x","expandDims","string_or_numeric");M(t<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},o={dim:t};return k.runKernel(fC,r,o)}var Di=S({expandDims_:hbe});function mbe(e){let n={x:_(e,"x","expm1")};return k.runKernel(Hh,n)}var EW=S({expm1_:mbe});function gbe(e,t){let n=_(e,"x","tile","string_or_numeric");M(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);let r={x:n},o={reps:t};return k.runKernel(cm,r,o)}var Pl=S({tile_:gbe});function ybe(e,t,n,r="float32"){t==null&&(t=e);let o=bt([e,t],r),i=e<=t?e:t;for(let a=0;a<i;++a)o.set(1,a,a);let s=Q(o.toTensor(),[e,t]);if(n==null)return s;if(n.length===1)return Pl(Di(s,0),[n[0],1,1]);if(n.length===2)return Pl(Di(Di(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Pl(Di(Di(Di(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}var l_=S({eye_:ybe});function vbe(e){let n={x:_(e,"x","floor","float32")};return k.runKernel(Wh,n)}var f_=S({floor_:vbe});function xbe(e,t,n=0,r=0){let o=_(e,"x","gather"),i=_(t,"indices","gather","int32"),s={x:o,indices:i},a={axis:n,batchDims:r};return k.runKernel(gC,s,a)}var d_=S({gather_:xbe});function bbe(e,t){let n=_(e,"a","greater","string_or_numeric"),r=_(t,"b","greater","string_or_numeric");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(Kh,o)}var yd=S({greater_:bbe});function wbe(e,t){let n=_(e,"a","greaterEqual","string_or_numeric"),r=_(t,"b","greaterEqual","string_or_numeric");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(Xh,o)}var p_=S({greaterEqual_:wbe});function Ebe(e){let n={input:_(e,"input","imag")};return k.runKernel(xC,n)}var $l=S({imag_:Ebe});function Cbe(e){let n={x:_(e,"x","isFinite")};return k.runKernel(bC,n)}var CW=S({isFinite_:Cbe});function Tbe(e){let n={x:_(e,"x","isInf")};return k.runKernel(wC,n)}var TW=S({isInf_:Tbe});function _be(e){let n={x:_(e,"x","isNaN")};return k.runKernel(EC,n)}var _W=S({isNaN_:_be});function Ibe(e,t=.2){let r={x:_(e,"x","leakyRelu")},o={alpha:t};return k.runKernel(CC,r,o)}var h_=S({leakyRelu_:Ibe});function Sbe(e,t){let n=_(e,"a","less","string_or_numeric"),r=_(t,"b","less","string_or_numeric");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(Yh,o)}var Yv=S({less_:Sbe});function Dbe(e,t){let n=_(e,"a","lessEqual","string_or_numeric"),r=_(t,"b","lessEqual","string_or_numeric");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(Zh,o)}var Tm=S({lessEqual_:Dbe});function IW(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");let r={start:e,stop:t,num:n};return k.runKernel(TC,{},r)}function Nbe(e,t=5,n=1,r=1,o=.5){let i=_(e,"x","localResponseNormalization");M(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),M(rc(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let s=i,a=!1;i.rank===3&&(a=!0,s=Q(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let u={x:s},c={depthRadius:t,bias:n,alpha:r,beta:o},f=k.runKernel(NC,u,c);return a?Q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var SW=S({localResponseNormalization_:Nbe});function Abe(e){let n={x:_(e,"x","log","float32")};return k.runKernel(Qh,n)}var fc=S({log_:Abe});function Rbe(e){let n={x:_(e,"x","log1p")};return k.runKernel(_C,n)}var m_=S({log1p_:Rbe});function DW(e,t){M(Lh(e),()=>"The f passed in variableGrads(f) must be a function"),M(t==null||Array.isArray(t)&&t.every(c=>c instanceof ic),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=t!=null;if(!n){t=[];for(let c in k.registeredVariables)t.push(k.registeredVariables[c])}let r=n?t.filter(c=>!c.trainable):null,o=t.length;t=t.filter(c=>c.trainable),M(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);let i=!0,{value:s,grads:a}=k.gradients(e,t,null,i);M(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),M(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let u={};return t.forEach((c,f)=>{a[f]!=null&&(u[c.name]=a[f])}),r?.forEach(c=>u[c.name]=null),{value:s,grads:u}}function Qo(e){return k.customGrad(e)}function kbe(e){let n={x:_(e,"x","neg")};return k.runKernel(Ov,n)}var Xr=S({neg_:kbe});function Obe(e){let n={x:_(e,"x","softplus")};return k.runKernel(hT,n)}var g_=S({softplus_:Obe});function Mbe(e){let t=_(e,"x","logSigmoid");return Qo(r=>({value:Xr(g_(Xr(r))),gradFunc:s=>le(s,qs(Xr(r)))}))(t)}var NW=S({logSigmoid_:Mbe});function Fbe(e,t){let n=_(e,"a","sub"),r=_(t,"b","sub");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(um,o)}var Le=S({sub_:Fbe});function Pbe(e,t=-1){let n=_(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Qo((o,i)=>{let a=pu(o,t,!0),u=Le(o,a),c=Le(wt(u,"float32"),fc(Bt(Zo(u),t,!0)));return i([c]),{value:c,gradFunc:(d,h)=>{let[m]=h,v=!0,x=Zo(m);return Le(d,le(Bt(d,t,v),x))}}})(n)}var AW=S({logSoftmax_:Pbe});function $be(e,t=null,n=!1){let r=_(e,"x","logSumExp"),o=Cl(t,r.shape),i=pu(r,o,!0),s=Le(r,i),a=Zo(s),u=Bt(a,o),c=fc(u),f=_e(Q(i,c.shape),c);if(n){let d=cc(f.shape,o);return Q(f,d)}return f}var y_=S({logSumExp_:$be});function Lbe(e,t){let n=_(e,"a","logicalAnd","bool"),r=_(t,"b","logicalAnd","bool");Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(IC,o)}var vd=S({logicalAnd_:Lbe});function Vbe(e){let n={x:_(e,"x","logicalNot","bool")};return k.runKernel(SC,n)}var v_=S({logicalNot_:Vbe});function Bbe(e,t){let n=_(e,"a","logicalOr","bool"),r=_(t,"b","logicalOr","bool");Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(DC,o)}var x_=S({logicalOr_:Bbe});function Ube(e,t){let n=_(e,"a","logicalXor","bool"),r=_(t,"b","logicalXor","bool");return Ft(n.shape,r.shape),vd(x_(e,t),v_(vd(e,t)))}var RW=S({logicalXor_:Ube});var b_=2147483648;function Gbe(e,t,n="left"){let r=_(e,"sortedSequence","searchSorted"),o=_(t,"values","searchSorted"),i=r.shape[r.shape.length-1],s=o.shape[o.shape.length-1],a=Q(r,[-1,i]),u=Q(o,[-1,s]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(mt(u.shape)>=b_)throw new Error(`values tensor size must less than ${b_}`);if(a.shape[1]>=b_)throw new Error(`trailing dim_size must less than ${b_} for int32 output type, was ${a.shape[1]}`);let c={sortedSequence:a,values:u},f={side:n};return k.runKernel(uT,c,f)}var Zv=S({searchSorted_:Gbe});function kW(e,t){return Zv(e,t,"left")}function jbe(e,t,n,r,o){let i=_(e,"x","maxPool"),s=1,a=i,u=!1;i.rank===3&&(u=!0,a=Q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),M(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),M(co(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),tr("maxPool",r,o);let c={x:a},f={filterSize:t,strides:n,pad:r,dimRoundingMode:o},d=k.runKernel(RC,c,f);return u?Q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var w_=S({maxPool_:jbe});function zbe(e,t=[1,1,1],n,r,o,i="NDHWC"){let s=_(e,"x","maxPool3d"),a=s,u=!1;s.rank===4&&(u=!0,a=Q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),M(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),M(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),tr("maxPool3d",r,o);let c={x:a},f={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},d=k.runKernel(kC,c,f);return u?Q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var OW=S({maxPool3d_:zbe});function Hbe(e,t,n,r,o=!1){let s={x:_(e,"x","maxPoolWithArgmax")},a={filterSize:t,strides:n,pad:r,includeBatchInIndex:o},u=k.runKernel(OC,s,a);return{result:u[0],indexes:u[1]}}var MW=S({maxPoolWithArgmax_:Hbe});function Wbe(e,t){let n=_(e,"a","maximum"),r=_(t,"b","maximum");[n,r]=ft(n,r),n.dtype==="bool"&&(n=wt(n,"int32"),r=wt(r,"int32")),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(Jh,o)}var E_=S({maximum_:Wbe});function qbe(e,t=null,n=!1){let o={x:_(e,"x","mean")},i={axis:t,keepDims:n};return k.runKernel(MC,o,i)}var xd=S({mean_:qbe});function Ks(e,t="float32"){if(In(e),t==="complex64"){let r=Ks(e,"float32"),o=Ks(e,"float32");return Ko(r,o)}let n=Bh(mt(e),t);return k.makeTensor(n,e,t)}function hu(e,t="float32"){if(In(e),t==="complex64"){let r=hu(e,"float32"),o=Ks(e,"float32");return Ko(r,o)}let n=Dv(mt(e),t);return k.makeTensor(n,e,t)}function FW(e,t,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(e===void 0)return[];let r=_(e,"x","meshgrid",e instanceof Qt?e.dtype:"float32");if(t===void 0)return[r];let o=_(t,"y","meshgrid",t instanceof Qt?t.dtype:"float32"),i=mt(r.shape),s=mt(o.shape);return n==="xy"?(r=Q(r,[1,-1]),o=Q(o,[-1,1]),[Vt(hu([s,1],r.dtype),r),Vt(o,hu([1,i],o.dtype))]):(r=Q(r,[-1,1]),o=Q(o,[1,-1]),[Vt(r,hu([1,s],r.dtype)),Vt(hu([i,1],o.dtype),o)])}function Kbe(e,t){let n=_(e,"a","minimum"),r=_(t,"b","minimum");[n,r]=ft(n,r),n.dtype==="bool"&&(n=wt(n,"int32"),r=wt(r,"int32")),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(em,o)}var bd=S({minimum_:Kbe});function Xbe(e,t,n){M(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=_(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");M(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);let o=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)M(t[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),M(t[a][0]>=0&&t[a][0]<=r.shape[a]-o&&t[a][1]>=0&&t[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);let i={paddings:t,mode:n},s={x:r};return k.runKernel(PC,s,i)}var PW=S({mirrorPad_:Xbe});function Ybe(e,t){let n=_(e,"a","mod"),r=_(t,"b","mod");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel($C,o)}var $W=S({mod_:Ybe});function Zbe(e,t=null,n=!1){e=_(e,"x","moments");let r=Cl(t,e.shape),o=xd(e,r,n),i=o.shape;n||(i=cc(o.shape,r));let s=Br(Le(wt(e,"float32"),Q(o,i))),a=xd(s,r,n);return{mean:o,variance:a}}var LW=S({moments_:Zbe});function Qbe(e,t,n,r){let o=_(t,"data","multiRNNCell"),i=cd(n,"c","multiRNNCell"),s=cd(r,"h","multiRNNCell"),a=o,u=[];for(let d=0;d<e.length;d++){let h=e[d](a,i[d],s[d]);u.push(h[0]),u.push(h[1]),a=h[1]}let c=[],f=[];for(let d=0;d<u.length;d+=2)c.push(u[d]),f.push(u[d+1]);return[c,f]}var VW=S({multiRNNCell_:Qbe});function Jbe(e,t,n,r=!1){let o=_(e,"logits","multinomial"),i=o.size,s=o.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);n=n||Math.random();let u={logits:s===1?Q(o,[1,-1]):o},c={numSamples:t,seed:n,normalized:r},f=k.runKernel(LC,u,c);return s===1?Q(f,[f.size]):f}var BW=S({multinomial_:Jbe});function ewe(e,t){let n=_(e,"a","notEqual","string_or_numeric"),r=_(t,"b","notEqual","string_or_numeric");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(nm,o)}var C_=S({notEqual_:ewe});function twe(e,t,n=1,r=0,o="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);let s={indices:_(e,"indices","oneHot","int32")},a={dtype:o,depth:t,onValue:n,offValue:r};return k.runKernel(jC,s,a)}var UW=S({oneHot_:twe});function nwe(e){let n={x:_(e,"x","onesLike")};return k.runKernel(GC,n)}var GW=S({onesLike_:nwe});function rwe(e,t){let n=_(e,"v1","outerProduct"),r=_(t,"v2","outerProduct");M(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let o=Q(n,[-1,1]),i=Q(r,[1,-1]);return Vt(o,i)}var jW=S({outerProduct_:rwe});function owe(e,t,n=0){let r=_(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let o={paddings:t,constantValue:n},i={x:r};return k.runKernel(HC,i,o)}var mu=S({pad_:owe});function iwe(e,t,n=0){return M(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),mu(e,[t],n)}var zW=S({pad1d_:iwe});function swe(e,t,n=0){return M(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),mu(e,t,n)}var HW=S({pad2d_:swe});function awe(e,t,n=0){return M(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),mu(e,t,n)}var WW=S({pad3d_:awe});function uwe(e,t,n=0){return M(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),mu(e,t,n)}var qW=S({pad4d_:uwe});function cwe(e,t,n){let r=_(e,"x","spaceToBatchND");M(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),M(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),M(r.shape.reduce((s,a,u)=>u>0&&u<=t.length?s&&(a+n[u-1][0]+n[u-1][1])%t[u-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);let o={x:r},i={blockShape:t,paddings:n};return k.runKernel(gT,o,i)}var T_=S({spaceToBatchND_:cwe});function lwe(e,t,n,r,o,i,s){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");let a=_(e,"x","maxPool"),u=a,c=!1;a.rank===3&&(c=!0,u=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(co(i,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`);let f=JM(u.shape,t,i,o,r),d=[f.dilationHeight,f.dilationWidth],h;r==="same"?h=dwe([f.filterHeight,f.filterWidth],d):h=[[0,0],[0,0]];let m=d[0]===1&&d[1]===1,[v,x]=fwe([f.inHeight,f.inWidth],d,h),b=m?r:"valid",C=m?u:T_(u,d,v),O=(n==="avg"?()=>n_(C,t,i,b,s):()=>w_(C,t,i,b,s))(),F=m?O:r_(O,d,x);return c?Q(F,[F.shape[1],F.shape[2],F.shape[3]]):F}function fwe(e,t,n){let r=n.map(f=>f[0]),o=n.map(f=>f[1]),i=e.concat(r,o),s=t.map((f,d)=>(f-i[d]%f)%f),a=o.map((f,d)=>f+s[d]),u=t.map((f,d)=>[r[d],a[d]]),c=t.map((f,d)=>[0,s[d]]);return[u,c]}function dwe(e,t){let r=e.map((s,a)=>s+(s-1)*(t[a]-1)).map(s=>s-1),o=r.map(s=>Math.floor(s/2)),i=r.map((s,a)=>s-o[a]);return r.map((s,a)=>[o[a],i[a]])}var KW=S({pool_:lwe});function pwe(e,t){let n=_(e,"x","prelu"),r=_(t,"alpha","prelu"),o={x:n,alpha:r};return k.runKernel(qC,o)}var __=S({prelu_:pwe});function hwe(e,t=null,n=!1){let r=_(e,"x","prod");r.dtype==="bool"&&(r=wt(r,"int32"));let o={x:r},i={axis:t,keepDims:n};return k.runKernel(Mv,o,i)}var XW=S({prod_:hwe});function mwe(e,t,n,r){let o=e.map((f,d)=>_(f,`tensors${d}`,"raggedGather","int32")),i=_(t,"paramsDenseValues","raggedGather"),s=_(n,"indices","raggedGather","int32"),a={paramsNestedSplits:o,paramsDenseValues:i,indices:s},u={outputRaggedRank:r},c=k.runKernel(KC,a,u);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var YW=S({raggedGather_:mwe});function gwe(e,t,n){let r=_(e,"starts","raggedRange"),o=_(t,"limits","raggedRange",r.dtype),i=_(n,"deltas","raggedRange",r.dtype),s={starts:r,limits:o,deltas:i},a=k.runKernel(XC,s);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}var ZW=S({raggedRange_:gwe});function ywe(e,t,n,r,o){let i=_(e,"shape","raggedTensorToTensor","int32"),s=_(t,"values","raggedTensorToTensor"),a=_(n,"defaultValue","raggedTensorToTensor",s.dtype),u=r.map((d,h)=>_(d,`tensors${h}`,"raggedTensorToTensor","int32")),c={shape:i,values:s,defaultValue:a,rowPartitionTensors:u},f={rowPartitionTypes:o};return k.runKernel(YC,c,f)}var QW=S({raggedTensorToTensor_:ywe});function vwe(e,t,n){In(e);let r=mt(e),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else if(n==="bool")o=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)o[i]=t();return k.makeTensor(o,e,n)}var JW=S({rand_:vwe});var N_=sa(g7());var Ed=class{constructor(t,n,r,o,i){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=i||Math.random();this.random=N_.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let o=this.nextVal;return this.nextVal=NaN,o}let t,n,r=!1;for(;!r;){let o,i,s;do o=2*this.random()-1,i=2*this.random()-1,s=o*o+i*i;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}},S_=class{constructor(t,n,r,o){this.alpha=t,this.beta=1/n,this.dtype=r;let i=o||Math.random();this.randu=N_.alea(i.toString()),this.randn=new Ed(0,1,r,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,n,r,o,i,s;for(;;){do o=this.randn.nextValue(),s=1+this.c*o;while(s<=0);if(s*=s*s,t=o*o,n=1-.331*t*t,r=.5*t+this.d*(1-s+Math.log(s)),i=this.randu(),i<n||Math.log(i)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(t){return this.dtype==="float32"?t:Math.round(t)}},D_=class{constructor(t=0,n=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=N_.alea(o)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function _we(e,t,n=1,r="float32",o){if(In(e),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);let i=new S_(t,n,r,o),s=bt(e,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var y7=S({randomGamma_:_we});function Iwe(e,t=0,n=1,r,o){if(In(e),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);let i=new Ed(t,n,r,!1,o),s=bt(e,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var A_=S({randomNormal_:Iwe});function Swe(e,t,n){if(t!=null&&t==="bool")throw new Error(`Unsupported data type ${t}`);return A_(e,0,1,t,n)}var v7=S({randomStandardNormal_:Swe});function Dwe(e,t=0,n=1,r="float32",o){In(e);let i=bt(e,r),s=new D_(t,n,null,o);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var _m=S({randomUniform_:Dwe});function Nwe(e,t,n,r){return _m(e,t,n,"int32",r)}var x7=S({randomUniformInt_:Nwe});function Ll(e,t,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");let o={start:e,stop:t,step:n,dtype:r};return k.runKernel(ZC,{},o)}function Awe(e){let n={input:_(e,"input","real")};return k.runKernel(Fv,n)}var dc=S({real_:Awe});function Rwe(e){let n={x:_(e,"x","reciprocal")};return k.runKernel(QC,n)}var b7=S({reciprocal_:Rwe});function kwe(e){let n={x:_(e,"x","relu")};return k.runKernel(JC,n)}var Vl=S({relu_:kwe});function Owe(e){let n={x:_(e,"x","relu6")};return k.runKernel(rT,n)}var R_=S({relu6_:Owe});function Mwe(e,t){let r={x:_(e,"x","reverse")},o={dims:t};return k.runKernel(oT,r,o)}var gs=S({reverse_:Mwe});function Fwe(e){let t=_(e,"x","reverse");return M(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),gs(t,0)}var w7=S({reverse1d_:Fwe});function Pwe(e,t){let n=_(e,"x","reverse");return M(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),gs(n,t)}var E7=S({reverse2d_:Pwe});function $we(e,t){let n=_(e,"x","reverse");return M(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),gs(n,t)}var C7=S({reverse3d_:$we});function Lwe(e,t){let n=_(e,"x","reverse");return M(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),gs(n,t)}var T7=S({reverse4d_:Lwe});function Vwe(e){let n={x:_(e,"x","round")};return k.runKernel(iT,n)}var k_=S({round_:Vwe});function Bwe(e){let n={x:_(e,"x","rsqrt","float32")};return k.runKernel(rm,n)}var _7=S({rsqrt_:Bwe});function Uwe(e){let n={x:_(e,"x","selu")};return k.runKernel(lT,n)}var I7=S({selu_:Uwe});function Gwe(e,t,n,r,o,i=[1,1],s="NHWC"){let a=_(e,"x","separableConv2d"),u=_(t,"depthwiseFilter","separableConv2d"),c=_(n,"pointwiseFilter","separableConv2d"),f=a,d=!1;if(a.rank===3&&(d=!0,f=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");M(f.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${f.rank}.`),M(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),M(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),M(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),M(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let h=u.shape[2],m=u.shape[3];M(c.shape[2]===h*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*m}, but got ${c.shape[2]}.`);let v=Cm(f,u,r,o,s,i),b=Ol(v,c,1,"valid",s);return d?Q(b,[b.shape[1],b.shape[2],b.shape[3]]):b}var S7=S({separableConv2d_:Gwe});function jwe(e,t){return ne(this,null,function*(){let n=_(e,"x","setdiff1d"),r=_(t,"y","setdiff1d");M(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),M(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),M(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);let o=yield n.data(),i=yield r.data(),s=new Set(i),a=0;for(let f=0;f<o.length;f++)s.has(o[f])||a++;let u=new hs([a],n.dtype),c=new hs([a],"int32");for(let f=0,d=0;f<o.length;f++)s.has(o[f])||(u.values[d]=o[f],c.values[d]=f,d++);return[u.toTensor(),c.toTensor()]})}var D7=jwe;function zwe(e){let n={x:_(e,"x","sign")};return k.runKernel(pT,n)}var N7=S({sign_:zwe});function Hwe(e){let n={x:_(e,"x","sin","float32")};return k.runKernel(fT,n)}var A7=S({sin_:Hwe});function Wwe(e){let n={x:_(e,"x","sinh")};return k.runKernel(dT,n)}var R7=S({sinh_:Wwe});function qwe(e,t,n){let r=_(e,"x","slice1d");return M(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),We(r,[t],[n])}var k7=S({slice1d_:qwe});function Kwe(e,t,n){let r=_(e,"x","slice2d");return M(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),We(r,t,n)}var O7=S({slice2d_:Kwe});function Xwe(e,t,n){let r=_(e,"x","slice3d");return M(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),We(r,t,n)}var M7=S({slice3d_:Xwe});function Ywe(e,t,n){let r=_(e,"x","slice4d");return M(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),We(r,t,n)}var F7=S({slice4d_:Ywe});function Zwe(e,t=-1){let n=_(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);let r={logits:n},o={dim:t};return k.runKernel(vT,r,o)}var P7=S({softmax_:Zwe});function Qwe(e){M(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);let t={input:e};return k.runKernel(dC,t)}var Im=S({fft_:Qwe});function Jwe(e){M(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);let t={input:e};return k.runKernel(vC,t)}var Cd=S({ifft_:Jwe});function eEe(e){let t=e.shape[e.shape.length-1],n=e.size/t,r;if(t<=2){let o=Q(e,[n,t]);r=Cd(o)}else{let o=[n,2*(t-1)],i=Q(dc(e),[n,t]),s=Q($l(e),[n,t]),a=gs(We(i,[0,1],[n,t-2]),1),u=le(gs(We(s,[0,1],[n,t-2]),1),Ue(-1)),c=rn([i,a],1),f=rn([s,u],1),d=Q(Ko(c,f),[o[0],o[1]]);r=Cd(d)}if(r=dc(r),e.rank===3&&e.shape[0]!==0){let o=r,i=e.shape[0];r=Q(r,[i,r.shape[0]/i,r.shape[1]]),o.dispose()}return r}var O_=S({irfft_:eEe});function tEe(e,t,n=0){let o={x:_(e,"x","split")},i={numOrSizeSplits:t,axis:n};return k.runKernel(yT,o,i)}var pc=S({split_:tEe});function nEe(e,t){M(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1],r=e.size/n,o;if(t!=null&&t<n){let v=e.shape.map(b=>0),x=e.shape.map(b=>b);x[e.shape.length-1]=t,o=We(e,v,x),n=t}else if(t!=null&&t>n){let v=e.shape.map(x=>x);v[e.shape.length-1]=t-n,o=rn([e,Ks(v)],e.shape.length-1),n=t}else o=e;let i=br(o),s=Q(Ko(o,i),[r,n]),a=Im(s),u=Math.floor(n/2)+1,c=dc(a),f=$l(a),d=pc(c,[u,n-u],c.shape.length-1),h=pc(f,[u,n-u],f.shape.length-1),m=o.shape.slice();return m[o.shape.length-1]=u,Q(Ko(d[0],h[0]),m)}var Sm=S({rfft_:nEe});function rEe(e,t){let n=_(e,"a","squaredDifference"),r=_(t,"b","squaredDifference");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r},i={};return k.runKernel(sm,o,i)}var M_=S({squaredDifference_:rEe});function oEe(e,t){let n=_(e,"x","squeeze","string_or_numeric");return Q(n,bM(n.shape,t).newShape)}var fr=S({squeeze_:oEe});function iEe(e,t=0){let n=cd(e,"tensors","stack","string_or_numeric");M(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&M(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,o={axis:t};return k.runKernel(zC,r,o)}var Do=S({stack_:iEe});function sEe(e,t=0){let r={x:_(e,"x","step")},o={alpha:t};return k.runKernel(PT,r,o)}var F_=S({step_:sEe});function aEe(e,t,n,r,o=0,i=0,s=0,a=0,u=0){let f={x:_(e,"x","stridedSlice","string_or_numeric")},d={begin:t,end:n,strides:r,beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:u};return k.runKernel(TT,f,d)}var $7=S({stridedSlice_:aEe});function uEe(e){let n={x:_(e,"x","tan","float32")};return k.runKernel(DT,n)}var L7=S({tan_:uEe});function Ln(e,t){ps(e);let n=qo(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Io(e,null,n,t)}function Ta(e,t,n){if(ps(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=qo(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Io(e,t,r,n)}function P_(e,t,n){if(ps(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=qo(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Io(e,t,r,n)}function V7(e,t,n){if(ps(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=qo(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Io(e,t,r,n)}function B7(e,t,n){if(ps(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=qo(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Io(e,t,r,n)}function U7(e,t,n){if(ps(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=qo(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Io(e,t,r,n)}function G7(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(i+` update.rank < ${o}. `);if(e.length<r+(n.rank-o))throw new Error(i+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+e.length-r)throw new Error(i+` update.rank != ${o+e.length-r}`);for(let s=0;s<o;++s)if(n.shape[s]!==t.shape[s])throw new Error(i+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${t.shape[s]}).`);for(let s=0;s<n.rank-o;++s)if(n.shape[s+o]!==e[s+r])throw new Error(i+` updates.shape[${s+o}] (${n.shape[s+o]}) != shape[${s+o}] (${e[s+o]})`)}function Qv(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}G7(n,t,e)}function cEe(e,t,n){let r=t.shape.length,o=r>1?t.shape[r-1]:1,i=n.length,s=1;for(let d=o;d<i;++d)s*=n[d];let a=o<1?1:o,u=mt(t.shape)/a,c=[...uu(n.slice(0,o)),1],f=mt(n);return{sliceRank:o,numUpdates:u,sliceSize:s,strides:c,outputSize:f}}function lEe(e,t,n){let r=_(e,"tensor","tensorScatterupdate"),o=_(t,"indices","tensorScatterupdate","int32"),i=_(n,"updates","tensorScatterupdate");if(Qv(i,o,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);let s={tensor:r,indices:o,updates:i},a={};return k.runKernel(aT,s,a)}var z7=S({tensorScatterUpdate_:lEe});function fEe(e,t=1,n=!0){let r=_(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let o=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);let i={x:r},s={k:t,sorted:n},[a,u]=k.runKernel(AT,i,s);return{values:a,indices:u}}var H7=S({topk_:fEe});function dEe(e,t=0,n=1,r,o){if(In(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new Ed(t,n,r,!0,o),s=bt(e,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var W7=S({truncatedNormal_:dEe});function pEe(e,t=0){let n=_(e,"x","unique","string_or_numeric");M(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},o={axis:t},[i,s]=k.runKernel(kT,r,o);return{values:i,indices:s}}var q7=S({unique_:pEe});function hEe(e,t,n){let r=_(e,"x","unsortedSegmentSum"),o=_(t,"segmentIds","unsortedSegmentSum","int32");M(rc(n),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:o},s={numSegments:n};return k.runKernel(MT,i,s)}var K7=S({unsortedSegmentSum_:hEe});function mEe(e,t=0){let n=_(e,"x","unstack","string_or_numeric");M(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);let r={value:n},o={axis:t};return k.runKernel(OT,r,o)}var ys=S({unstack_:mEe});function X7(e,t){return Zv(e,t,"right")}function Y7(e,t=!0,n,r){return k.makeVariable(e,t,n,r)}function $_(e,t){let n=[];for(let i=0;i<t.length;i++)t[i]&&n.push(i);let r=bt(e,"int32"),o=bt([n.length,e.length],"int32");for(let i=0;i<n.length;i++){let s=r.indexToLoc(n[i]),a=i*e.length;o.values.set(s,a)}return o.toTensor()}function gEe(e){return ne(this,null,function*(){let t=_(e,"condition","whereAsync","bool"),n=yield t.data(),r=$_(t.shape,n);return e!==t&&t.dispose(),r})}var L_=gEe;function yEe(e,t,n){return ne(this,null,function*(){let r=_(e,"tensor","boolMask"),o=_(t,"mask","boolMask","bool"),i=n??0,s=o.rank,a=r.shape;M(s>0,()=>"mask cannot be scalar"),$n(a.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let x=i;x<i+s;x++)u*=a[x];let c=a.slice(0,i).concat([u],a.slice(i+s)),f=Q(r,c),d=Q(o,[-1]),h=yield L_(d),m=fr(h,[1]),v=d_(f,m,i);return e!==r&&r.dispose(),t!==o&&o.dispose(),m.dispose(),f.dispose(),d.dispose(),h.dispose(),v})}var vEe=yEe;function xEe(e,t,n){let r=_(e,"x","transpose");if(t==null&&(t=r.shape.map((s,a)=>a).reverse()),M(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(s=>{M(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();let o={x:r},i={perm:t};return r.dtype==="complex64"?ze(()=>{let s=dc(r),a=$l(r);return s=k.runKernel(lm,{x:s},i),a=k.runKernel(lm,{x:a},i),n&&(a=Xr(a)),Ko(s,a)}):k.runKernel(lm,o,i)}var V_=S({transpose_:xEe});function bEe(e,t,n,r,o=!0){let i=_(e,"v","movingAverage"),s=_(t,"x","movingAverage"),a=_(n,"decay","movingAverage");Yz(i,s),M(Ti(i.shape,s.shape),()=>"Shape mismatch in v and x");let u=Ue(1),c=Le(u,a),f=le(Le(s,i),c);if(o){M(r!=null,()=>"When using zeroDebias: true, step is required.");let d=_(r,"step","movingAverage");f=Xe(f,Le(u,lc(a,d)))}return _e(i,f)}var wEe=S({movingAverage_:bEe});function EEe(e,t,n){In(n);let r=_(e,"indices","scatterND","int32"),o=_(t,"updates","scatterND");Qv(o,r,n);let i={indices:r,updates:o},s={shape:n};return k.runKernel(sT,i,s)}var CEe=S({scatterND_:EEe});function Z7(e,t,n,r){if(e.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);let o=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);let s=t.size;if(!(t.rank===0||t.rank===1&&s===o))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${o}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function _Ee(e,t,n,r=0){In(n);let o=_(e,"sparseIndices","sparseToDense","int32"),i=_(t,"sparseValues","sparseToDense","string_or_numeric"),s=_(r,"defaultValue","sparseToDense",i.dtype);Z7(o,i,n,s);let a={sparseIndices:o,sparseValues:i,defaultValue:s},u={outputShape:n};return k.runKernel(CT,a,u)}var IEe=S({sparseToDense_:_Ee});function SEe(e,t){let n=_(t,"indices","gatherND","int32"),o={params:_(e,"x","gatherND","string_or_numeric"),indices:n};return k.runKernel(yC,o)}var DEe=S({gatherND_:SEe});function Q7(e,t){if(t==null)return e.shape.slice();if(Ti(e.shape,t))return t;if(e.shape.length===t.length){let n=[];for(let r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}function NEe(e,t,n,r){let o=_(e,"x","dropout");if(M(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),M(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof Qt?o.clone():o;let i=Q7(o,n),s=1-t,a=Xe(f_(_e(_m(i,0,1,"float32",r),s)),s);return le(o,a)}var AEe=S({dropout_:NEe});function uF(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Jv(e,t,n){let r=1-e%2,o=new Float32Array(e);for(let i=0;i<e;++i){let s=2*Math.PI*i/(e+r-1);o[i]=t-n*Math.cos(s)}return Ln(o,"float32")}function REe(e,t,n=1){return ne(this,null,function*(){let r=_(e,"predictions","inTopK"),o=_(t,"targets","inTopK");M(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),M(r.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`),$n(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];M(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);let s=yield r.data(),a=yield o.data(),[u,c]=[s.length/i,i],f=wM("bool",u);for(let d=0;d<u;d++){let h=d*c,m=s.subarray(h,h+c),v=[];for(let x=0;x<m.length;x++)v.push({value:m[x],index:x});v.sort((x,b)=>b.value-x.value),f[d]=0;for(let x=0;x<n;x++)if(v[x].index===a[d]){f[d]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),So(f,o.shape,"bool")})}var kEe=REe;var cF={};tn(cF,{conv2d:()=>e9,depthwiseConv2d:()=>r9,matMul:()=>o9});function OEe(e,t,n,r,o,i="NHWC",s){let a=e;e.rank===3&&(a=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;u.rank===3&&(u=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]])),M(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),M(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),M(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let c=i==="NHWC"?a.shape[3]:a.shape[1],f=i==="NHWC"?u.shape[3]:u.shape[1];M(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),M(f===n[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must match output depth for filter (${n[3]}).`),tr("conv2dDerFilter",o,s);let d={x:a,dy:u},h={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,filterShape:n};return k.runKernel(HE,d,h)}var J7=S({conv2DBackpropFilter_:OEe});function Td(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return le(e,F_(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function _d(e,t){let n=t,r=a_(e.shape,t.shape);return r.length>0&&(n=Bt(n,r)),Q(n,e.shape)}function Id(e,t,n,r){if(t==="linear")return e;if(t==="relu")return Vl(e);if(t==="elu")return c_(e);if(t==="relu6")return R_(e);if(t==="prelu")return __(e,n);if(t==="leakyrelu")return h_(e,r);if(t==="sigmoid")return qs(e);throw new Error(`Unknown fused activation ${t}.`)}var Sd=(e,t)=>!(e>0)||t==="linear";function MEe({x:e,filter:t,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(u=u||"linear",Sd(k.state.gradientDepth,u)===!1){M(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let H=Ol(e,t,n,r,o,i,s);return a!=null&&(H=_e(H,a)),Id(H,u,c,f)}let d=_(e,"x","conv2d","float32"),h=_(t,"filter","conv2d","float32"),m=d,v=!1;d.rank===3&&(v=!0,m=Q(d,[1,d.shape[0],d.shape[1],d.shape[2]])),M(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),M(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),tr("fused conv2d",r,s);let x=o==="NHWC"?m.shape[3]:m.shape[1];M(h.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${h.shape[2]}.`),M(co(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let b=md(m.shape,h.shape,n,i,r,s),C;a!=null&&(C=_(a,"bias","fused conv2d"),[C]=ft(C,d),o==="NHWC"?Ft(b.outShape,C.shape):(M(C.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${C.shape.length}.`),M(C.shape.length===0||C.shape[0]===b.outChannels||C.shape[0]===1,()=>`Error in fused conv2d: bias shape (${C.shape}) is not compatible with the number of output channels (${b.outChannels})`)));let D;if(c!=null){let H=c.shape;if(M(H.length<=1||H.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${H.length}.`),H.length===1)M(H[0]===1||H[0]===b.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${H}) is not compatible with the number of output channels (${b.outChannels}).`);else if(H.length===3)try{Ft(H,b.outShape)}catch{let Z=`Error in fused conv2d: PReLU activation weights (${H}) is not compatible with the output shape of the conv2d (${b.outShape}).`;throw Error(Z)}D=_(c,"prelu weights","fused conv2d")}let O=(H,X)=>{M(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);let[Z,te,J,ae]=X,ye=Td(H,J,u);M(hd(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let ke=s_(te.shape,ye,Z,n,r),Ke=J7(te,ye,Z.shape,n,r),Me=[ke,Ke];if(ae!=null){let Nt=_d(ae,ye);Me.push(Nt)}return Me},F={x:m,filter:h,bias:C,preluActivationWeights:D},B={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:f};return a==null?Qo((X,Z,te)=>{let J=k.runKernel(Vv,F,B);return te([Z,X,J]),v&&(J=Q(J,[J.shape[1],J.shape[2],J.shape[3]])),{value:J,gradFunc:O}})(m,h):Qo((X,Z,te,J)=>{let ae=k.runKernel(Vv,F,B);return J([Z,X,ae,te]),v&&(ae=Q(ae,[ae.shape[1],ae.shape[2],ae.shape[3]])),{value:ae,gradFunc:O}})(m,h,C)}var e9=S({fusedConv2d_:MEe});function FEe(e,t,n,r,o,i=[1,1],s){let a=e;e.rank===3&&(a=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;u.rank===3&&(u=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c={x:a,dy:u},f={strides:r,pad:o,dimRoundingMode:s,dilations:i,filterShape:n};return k.runKernel(rC,c,f)}var t9=S({depthwiseConv2dNativeBackpropFilter_:FEe});function PEe(e,t,n,r,o,i=[1,1],s){let a=t,u=!1;t.rank===3&&(u=!0,a=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c={dy:a,filter:n},f={strides:r,pad:o,dimRoundingMode:s,dilations:i,inputShape:e},d=k.runKernel(oC,c,f);return u?Q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var n9=S({depthwiseConv2dNativeBackpropInput_:PEe});function $Ee({x:e,filter:t,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(Sd(k.state.gradientDepth,u)===!1){let B=Cm(e,t,n,r,o,i,s);return a!=null&&(B=_e(B,a)),Id(B,u,c,f)}let d=_(e,"x","depthwiseConv2d","float32"),h=_(t,"filter","depthwiseConv2d","float32"),m=d,v=!1;d.rank===3&&(v=!0,m=Q(d,[1,d.shape[0],d.shape[1],d.shape[2]])),M(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),M(h.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),M(m.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),i==null&&(i=[1,1]),M(co(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),tr("fused depthwiseConv2d",r,s);let x=md(m.shape,h.shape,n,i,r,s,!0),b;a!=null&&(b=_(a,"bias","fused conv2d"),[b]=ft(b,d),Ft(x.outShape,b.shape));let C;c!=null&&(C=_(c,"prelu weights","fused depthwiseConv2d"));let D=(B,H)=>{M(hd(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);let[X,Z,te,J]=H,ae=Td(B,te,u),ye=n9(Z.shape,ae,X,n,r,i,s),ke=t9(Z,ae,X.shape,n,r,i,s);if(J!=null){let Ke=_d(b,ae);return[ye,ke,Ke]}return[ye,ke]},O={x:m,filter:h,bias:b,preluActivationWeights:C},F={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:f};return a==null?Qo((H,X,Z)=>{let te=k.runKernel(Bv,O,F);return Z([X,H,te]),v&&(te=Q(te,[te.shape[1],te.shape[2],te.shape[3]])),{value:te,gradFunc:D}})(m,h):Qo((H,X,Z,te)=>{let J=k.runKernel(Bv,O,F);return te([X,H,J,Z]),v&&(J=Q(J,[J.shape[1],J.shape[2],J.shape[3]])),{value:J,gradFunc:D}})(m,h,b)}var r9=S({fusedDepthwiseConv2d_:$Ee});function LEe({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(Sd(k.state.gradientDepth,i)===!1){let ae=Vt(e,t,n,r);return o!=null&&(ae=_e(ae,o)),Id(ae,i,s,a)}let u=_(e,"a","fused matMul"),c=_(t,"b","fused matMul");[u,c]=ft(u,c);let f=n?u.shape[u.rank-2]:u.shape[u.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],h=n?u.shape[u.rank-1]:u.shape[u.rank-2],m=r?c.shape[c.rank-2]:c.shape[c.rank-1],v=u.shape.slice(0,-2),x=c.shape.slice(0,-2),b=mt(v),C=mt(x);M(f===d,()=>`Error in fused matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);let O=Ft(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([h,m]),F=n?Q(u,[b,f,h]):Q(u,[b,h,f]),B=r?Q(c,[C,m,d]):Q(c,[C,d,m]),H;o!=null&&(H=_(o,"bias","fused matMul"),[H]=ft(H,u),Ft(O,H.shape));let X;s!=null&&(X=_(s,"prelu weights","fused matMul"));let Z=(ae,ye)=>{let[ke,Ke,Me,Nt]=ye,oe=Td(Q(ae,Me.shape),Me,i),pe,ie;if(!n&&!r?(pe=Vt(oe,Ke,!1,!0),ie=Vt(ke,oe,!0,!1)):!n&&r?(pe=Vt(oe,Ke,!1,!1),ie=Vt(oe,ke,!0,!1)):n&&!r?(pe=Vt(Ke,oe,!1,!0),ie=Vt(ke,oe,!1,!1)):(pe=Vt(Ke,oe,!0,!0),ie=Vt(oe,ke,!0,!0)),o!=null){let Ce=_d(Nt,oe);return[pe,ie,Ce]}else return[pe,ie]},te={a:F,b:B,bias:H,preluActivationWeights:X},J={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return o==null?Qo((ye,ke,Ke)=>{let Me=k.runKernel(Lv,te,J);return Ke([ye,ke,Me]),{value:Q(Me,O),gradFunc:Z}})(F,B):Qo((ye,ke,Ke,Me)=>{let Nt=k.runKernel(Lv,te,J);return Me([ye,ke,Nt,Ke]),{value:Q(Nt,O),gradFunc:Z}})(F,B,H)}var o9=S({fusedMatMul_:LEe});function VEe(e){return Jv(e,.54,.46)}var i9=S({hammingWindow_:VEe});function BEe(e){return Jv(e,.5,.5)}var B_=S({hannWindow_:BEe});function UEe(e,t,n,r=!1,o=0){let i=0,s=[];for(;i+t<=e.size;)s.push(We(e,i,t)),i+=n;if(r)for(;i<e.size;){let a=i+t-e.size,u=rn([We(e,i,t-a),du([a],o)]);s.push(u),i+=n}return s.length===0?Ta([],[0,t]):Q(rn(s),[s.length,t])}var U_=S({frame_:UEe});function GEe(e,t,n,r,o=B_){r==null&&(r=uF(t));let i=U_(e,t,n),s=le(i,o(t));return Sm(s,r)}var s9=S({stft_:GEe});function jEe(e,t,n,r,o="bilinear",i=0){let s=_(e,"image","cropAndResize"),a=_(t,"boxes","cropAndResize","float32"),u=_(n,"boxInd","cropAndResize","int32"),c=a.shape[0];M(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),M(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),M(u.rank===1&&u.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),M(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),M(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),M(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);let f={image:s,boxes:a,boxInd:u},d={method:o,extrapolationValue:i,cropSize:r};return k.runKernel(JE,f,d)}var a9=S({cropAndResize_:jEe});function zEe(e){let t=_(e,"image","flipLeftRight","float32");M(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);let n={image:t};return k.runKernel(hC,n,{})}var u9=S({flipLeftRight_:zEe});function HEe(e){let t=_(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];M(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),M(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,Pl(t,o)}var c9=S({grayscaleToRGB_:HEe});function WEe(e){let t=_(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];M(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),M(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let o=t.dtype,i=wt(t,"float32"),s=Ln([.2989,.587,.114]),a;switch(t.rank){case 2:a=Fl("ij,j->i",i,s);break;case 3:a=Fl("ijk,k->ij",i,s);break;case 4:a=Fl("ijkl,l->ijk",i,s);break;case 5:a=Fl("ijklm,m->ijkl",i,s);break;case 6:a=Fl("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return a=Di(a,-1),wt(a,o)}var l9=S({rgbToGrayscale_:WEe});function qEe(e,t,n=0,r=.5){let o=_(e,"image","rotateWithOffset","float32");M(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);let i={image:o},s={radians:t,fillValue:n,center:r};return k.runKernel($T,i,s)}var f9=S({rotateWithOffset_:qEe});function Xs(e,t,n,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=e.shape[0];return n=Math.min(n,s),M(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),M(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),M(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),M(t.rank===1,()=>"scores must be a 1D tensor"),M(t.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${t.shape[0]}`),M(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}function KEe(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY){let i=_(e,"boxes","nonMaxSuppression","float32"),s=_(t,"scores","nonMaxSuppression","float32"),a=Xs(i,s,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return k.runKernel(VC,{boxes:i,scores:s},u)}var d9=S({nonMaxSuppression_:KEe});function p9(e,t,n){let r=XEe(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function XEe(e,t,n){return ZEe(e,t,n||YEe)}function YEe(e,t){return e>t?1:e<t?-1:0}function ZEe(e,t,n){let r=0,o=e.length,i=0,s=!1;for(;r<o;){i=r+(o-r>>>1);let a=n(t,e[i]);a>0?r=i+1:(o=i,s=!a)}return s?r:-r-1}function G_(e,t,n,r,o){return lF(e,t,n,r,o,0)}function j_(e,t,n,r,o,i){return lF(e,t,n,r,o,0,!1,i,!0)}function z_(e,t,n,r,o,i){return lF(e,t,n,r,o,i,!0)}function lF(e,t,n,r,o,i,s=!1,a=!1,u=!1){let c=[];for(let b=0;b<t.length;b++)t[b]>o&&c.push({score:t[b],boxIndex:b,suppressBeginIndex:0});c.sort(h9);let f=i>0?-.5/i:0,d=[],h=[];for(;d.length<n&&c.length>0;){let b=c.pop(),{score:C,boxIndex:D,suppressBeginIndex:O}=b;if(C<o)break;let F=!1;for(let B=d.length-1;B>=O;--B){let H=QEe(e,D,d[B]);if(H>=r){F=!0;break}if(b.score=b.score*JEe(r,f,H),b.score<=o)break}b.suppressBeginIndex=d.length,F||(b.score===C?(d.push(D),h.push(b.score)):b.score>o&&p9(c,b,h9))}let m=d.length,v=n-m;a&&v>0&&(d.push(...new Array(v).fill(0)),h.push(...new Array(v).fill(0)));let x={selectedIndices:d};return s&&(x.selectedScores=h),u&&(x.validOutputs=m),x}function QEe(e,t,n){let r=e.subarray(t*4,t*4+4),o=e.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),f=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),m=(a-i)*(u-s),v=(d-c)*(h-f);if(m<=0||v<=0)return 0;let x=Math.max(i,c),b=Math.max(s,f),C=Math.min(a,d),D=Math.min(u,h),O=Math.max(C-x,0)*Math.max(D-b,0);return O/(m+v-O)}function JEe(e,t,n){let r=Math.exp(t*n*n);return n<=e?r:0}function h9(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function eCe(i,s,a){return ne(this,arguments,function*(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY){let u=_(e,"boxes","nonMaxSuppressionAsync"),c=_(t,"scores","nonMaxSuppressionAsync"),f=Xs(u,c,n,r,o);n=f.maxOutputSize,r=f.iouThreshold,o=f.scoreThreshold;let d=yield Promise.all([u.data(),c.data()]),h=d[0],m=d[1],{selectedIndices:v}=G_(h,m,n,r,o);return u!==e&&u.dispose(),c!==t&&c.dispose(),Ln(v,"int32")})}var m9=eCe;function tCe(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=_(e,"boxes","nonMaxSuppression"),a=_(t,"scores","nonMaxSuppression"),u=Xs(s,a,n,r,o,i);n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,i=u.softNmsSigma;let c={boxes:s,scores:a},f={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i},d=k.runKernel(UC,c,f);return{selectedIndices:d[0],selectedScores:d[1]}}var g9=S({nonMaxSuppressionWithScore_:tCe});function nCe(s,a,u){return ne(this,arguments,function*(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let c=_(e,"boxes","nonMaxSuppressionAsync"),f=_(t,"scores","nonMaxSuppressionAsync"),d=Xs(c,f,n,r,o,i);n=d.maxOutputSize,r=d.iouThreshold,o=d.scoreThreshold,i=d.softNmsSigma;let h=yield Promise.all([c.data(),f.data()]),m=h[0],v=h[1],{selectedIndices:x,selectedScores:b}=z_(m,v,n,r,o,i);return c!==e&&c.dispose(),f!==t&&f.dispose(),{selectedIndices:Ln(x,"int32"),selectedScores:Ln(b)}})}var y9=nCe;function rCe(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=_(e,"boxes","nonMaxSuppression"),a=_(t,"scores","nonMaxSuppression"),u=Xs(s,a,n,r,o,null),c=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,h={boxes:s,scores:a},m={maxOutputSize:c,iouThreshold:f,scoreThreshold:d,padToMaxOutputSize:i},v=k.runKernel(BC,h,m);return{selectedIndices:v[0],validOutputs:v[1]}}var v9=S({nonMaxSuppressionPadded_:rCe});function oCe(s,a,u){return ne(this,arguments,function*(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let c=_(e,"boxes","nonMaxSuppressionAsync"),f=_(t,"scores","nonMaxSuppressionAsync"),d=Xs(c,f,n,r,o,null),h=d.maxOutputSize,m=d.iouThreshold,v=d.scoreThreshold,[x,b]=yield Promise.all([c.data(),f.data()]),{selectedIndices:C,validOutputs:D}=j_(x,b,h,m,v,i);return c!==e&&c.dispose(),f!==t&&f.dispose(),{selectedIndices:Ln(C,"int32"),validOutputs:Ue(D,"int32")}})}var x9=oCe;function iCe(e,t,n=!1,r=!1){let o=_(e,"images","resizeBilinear");M(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),M(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),M(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=Q(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=t,a={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=k.runKernel(nT,a,u);return s?Q(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var b9=S({resizeBilinear_:iCe});function sCe(e,t,n=!1,r=!1){let o=_(e,"images","resizeNearestNeighbor");M(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),M(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),M(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),M(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=Q(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=t,a={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=k.runKernel(tT,a,u);return s?Q(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var w9=S({resizeNearestNeighbor_:sCe});function aCe(e,t="binary",n=!1,r=.5){let o=_(e,"image","threshold"),i=.2989,s=.587,a=.114,u=o.shape[0]*o.shape[1],c=le(Ln([r]),255),f,d,h,m;if(M(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),M(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),M(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),M(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),o.shape[2]===3){[f,d,h]=pc(o,[1,1,1],-1);let b=le(f,i),C=le(d,s),D=le(h,a);m=_e(_e(b,C),D)}else m=e;if(t==="otsu"){let b=o_(wt(k_(m),"int32"),So([]),256);c=uCe(b,u)}let v=n?Tm(m,c):yd(m,c);return wt(le(v,255),"int32")}function uCe(e,t){let n=Ln([-1]),r=Ln([0]),o=Ln([0]),i,s,a,u,c,f;for(let d=0;d<e.size-1;d++){i=We(e,0,d+1),s=We(e,d+1),c=Xe(Bt(i),t),f=Xe(Bt(s),t);let h=Bt(le(i,Ll(0,i.size)));a=Xe(h,Bt(i));let m=du(s.shape,i.size),v=_e(Ll(0,s.size),m),x=le(s,v);u=Xe(Bt(x),Bt(s));let b=Le(a,u),C=Le(a,u),D=le(c,f);o=le(le(D,b),C);let O=yd(o,r);r=ms(O,o,r),n=ms(O,Ln([d]),n)}return n}var E9=S({threshold_:aCe});function cCe(e,t,n="nearest",r="constant",o=0,i){let s=_(e,"image","transform","float32"),a=_(t,"transforms","transform","float32");M(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),M(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),M(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);let u={image:s,transforms:a},c={interpolation:n,fillMode:r,fillValue:o,outputShape:i};return k.runKernel(RT,u,c)}var C9=S({transform_:cCe});function lCe(e,t,n){let r=_(e,"a","bandPart");M(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let o=r.shape,[i,s]=r.shape.slice(-2),a,u;typeof t=="number"?(M(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),M(t<=i,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${i}).`),a=_(t<0?i:t,"numLower","bandPart")):(M(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=ms(Yv(t,0),i,bd(t,i))),typeof n=="number"?(M(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),M(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),u=_(n<0?s:n,"numUpper","bandPart")):(M(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=ms(Yv(n,0),s,bd(n,s)));let c=Q(Ll(0,i,1,"int32"),[-1,1]),f=Ll(0,s,1,"int32"),d=Le(c,f),h=vd(Tm(d,a),p_(d,Xr(u))),m=Ks([i,s],r.dtype);return Q(Do(ys(Q(r,[-1,i,s])).map(v=>ms(h,v,m))),o)}var T9=S({bandPart_:lCe});function fCe(e){let t;if(Array.isArray(e)){t=!1,M(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let o=e[0].shape[0];for(let i=1;i<e.length;++i)M(e[i].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[i].shape[0]} vs. ${o})`)}else t=!0,e=pc(e,e.shape[0],0).map(o=>fr(o,[0]));M(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);let n=[],r=e;for(let o=0;o<e.length;++o)n.push(k.tidy(()=>{let i=r[o];if(o>0)for(let s=0;s<o;++s){let a=le(Bt(le(n[s],i)),n[s]);i=Le(i,a)}return Xe(i,gd(i,"euclidean"))}));return t?Do(n,0):n}var _9=S({gramSchmidt_:fCe});function dCe(e,t=!1){if(M(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return I9(e,t);{let n=e.shape.slice(0,e.shape.length-2).reduce((u,c)=>u*c),r=ys(Q(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],i=[];r.forEach(u=>{let[c,f]=I9(u,t);o.push(c),i.push(f)});let s=Q(Do(o,0),e.shape),a=Q(Do(i,0),e.shape);return[s,a]}}function I9(e,t=!1){return k.tidy(()=>{M(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);let n=e.shape[0],r=e.shape[1],o=l_(n),i=Si(e),s=Ta([[1]],[1,1]),a=Si(s),u=n>=r?r:n;for(let c=0;c<u;++c){let f=i,d=a,h=o;[a,i,o]=k.tidy(()=>{let m=We(i,[c,c],[n-c,1]),v=gd(m),x=We(i,[c,c],[1,1]),b=ms(yd(x,0),Ta([[-1]]),Ta([[1]])),C=Le(x,le(b,v)),D=Xe(m,C);D.shape[0]===1?a=Si(s):a=rn([s,We(D,[1,0],[D.shape[0]-1,D.shape[1]])],0);let O=Xr(Xe(Vt(b,C),v)),F=We(i,[c,0],[n-c,r]),B=le(O,a),H=V_(a);if(c===0)i=Le(F,Vt(B,Vt(H,F)));else{let te=Le(F,Vt(B,Vt(H,F)));i=rn([We(i,[0,0],[c,r]),te],0)}let X=V_(B),Z=We(o,[0,c],[n,o.shape[1]-c]);if(c===0)o=Le(Z,Vt(Vt(Z,a),X));else{let te=Le(Z,Vt(Vt(Z,a),X));o=rn([We(o,[0,0],[n,c]),te],1)}return[a,i,o]}),Wt([f,d,h])}return!t&&n>r&&(o=We(o,[0,0],[n,r]),i=We(i,[0,0],[r,r])),[o,i]})}var S9=S({qr_:dCe});var nr=function(e){return e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",e}(nr||{});function pCe(e,t,n=nr.SUM_BY_NONZERO_WEIGHTS){let r=_(e,"losses","computeWeightedLoss"),o=null;t!=null&&(o=_(t,"weights","computeWeightedLoss"));let i=o==null?r:le(r,o);if(n===nr.NONE)return i;if(n===nr.SUM)return Bt(i);if(n===nr.MEAN){if(o==null)return xd(i);{let s=r.size/o.size,a=Xe(Bt(i),Bt(o));return s>1?Xe(a,Ue(s)):a}}if(n===nr.SUM_BY_NONZERO_WEIGHTS){if(o==null)return Xe(Bt(i),Ue(r.size));{let s=le(o,hu(r.shape)),a=wt(Bt(C_(s,Ue(0))),"float32");return Xe(Bt(i),a)}}throw Error(`Unknown reduction: ${n}`)}var Yr=S({computeWeightedLoss_:pCe});function hCe(e,t,n,r=nr.SUM_BY_NONZERO_WEIGHTS){let o=_(e,"labels","absoluteDifference"),i=_(t,"predictions","absoluteDifference"),s=null;n!=null&&(s=_(n,"weights","absoluteDifference")),$n(o.shape,i.shape,"Error in absoluteDifference: ");let a=Vr(Le(o,i));return Yr(a,s,r)}var D9=S({absoluteDifference_:hCe});function mCe(e,t,n,r,o=nr.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"labels","cosineDistance"),s=_(t,"predictions","cosineDistance"),a=null;r!=null&&(a=_(r,"weights","cosineDistance")),$n(i.shape,s.shape,"Error in cosineDistance: ");let u=Ue(1),c=Le(u,Bt(le(i,s),n,!0));return Yr(c,a,o)}var N9=S({cosineDistance_:mCe});function gCe(e,t,n,r=nr.SUM_BY_NONZERO_WEIGHTS){let o=_(e,"labels","hingeLoss"),i=_(t,"predictions","hingeLoss"),s=null;n!=null&&(s=_(n,"weights","hingeLoss")),$n(o.shape,i.shape,"Error in hingeLoss: ");let a=Ue(1);o=Le(le(Ue(2),o),a);let u=Vl(Le(a,le(o,i)));return Yr(u,s,r)}var A9=S({hingeLoss_:gCe});function yCe(e,t,n,r=1,o=nr.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"labels","huberLoss"),s=_(t,"predictions","huberLoss"),a=null;n!=null&&(a=_(n,"weights","huberLoss")),$n(i.shape,s.shape,"Error in huberLoss: ");let u=Ue(r),c=Vr(Le(s,i)),f=bd(c,u),d=Le(c,f),h=_e(le(Ue(.5),Br(f)),le(u,d));return Yr(h,a,o)}var R9=S({huberLoss_:yCe});function vCe(e,t,n,r=1e-7,o=nr.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"labels","logLoss"),s=_(t,"predictions","logLoss"),a=null;n!=null&&(a=_(n,"weights","logLoss")),$n(i.shape,s.shape,"Error in logLoss: ");let u=Ue(1),c=Ue(r),f=Xr(le(i,fc(_e(s,c)))),d=le(Le(u,i),fc(_e(Le(u,s),c))),h=Le(f,d);return Yr(h,a,o)}var k9=S({logLoss_:vCe});function xCe(e,t,n,r=nr.SUM_BY_NONZERO_WEIGHTS){let o=_(e,"labels","meanSquaredError"),i=_(t,"predictions","meanSquaredError"),s=null;n!=null&&(s=_(n,"weights","meanSquaredError")),$n(o.shape,i.shape,"Error in meanSquaredError: ");let a=M_(o,i);return Yr(a,s,r)}var O9=S({meanSquaredError_:xCe});function bCe(e,t){let n=_(e,"labels","sigmoidCrossEntropyWithLogits"),r=_(t,"logits","sigmoidCrossEntropyWithLogits");$n(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=Vl(r),i=le(r,n),s=m_(Zo(Xr(Vr(r))));return _e(Le(o,i),s)}function wCe(e,t,n,r=0,o=nr.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"multiClassLabels","sigmoidCrossEntropy"),s=_(t,"logits","sigmoidCrossEntropy"),a=null;if(n!=null&&(a=_(n,"weights","sigmoidCrossEntropy")),$n(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=Ue(r),f=Ue(1),d=Ue(.5);i=_e(le(i,Le(f,c)),le(d,c))}let u=bCe(i,s);return Yr(u,a,o)}var M9=S({sigmoidCrossEntropy_:wCe});function ECe(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Qo((o,i,s)=>{let u=y_(i,[n],!0),c=Le(wt(i,"float32"),u);s([o,c]);let f=Xr(le(c,o));return{value:Bt(f,[n]),gradFunc:(m,v)=>{let[x,b]=v,C=cc(m.shape,[n]);return[le(Q(m,C),Le(wt(x,"float32"),Zo(b))),le(Q(m,C),Le(Zo(b),wt(x,"float32")))]}}})(e,t)}function CCe(e,t,n,r=0,o=nr.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"onehotLabels","softmaxCrossEntropy"),s=_(t,"logits","softmaxCrossEntropy"),a=null;if(n!=null&&(a=_(n,"weights","softmaxCrossEntropy")),$n(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let c=Ue(r),f=Ue(1),d=Ue(i.shape[1]);i=_e(le(i,Le(f,c)),Xe(c,d))}let u=ECe(i,s);return Yr(u,a,o)}var F9=S({softmaxCrossEntropy_:CCe});function TCe(e,t,n,r){let o=_(e,"indices","sparseFillEmptyRows","int32"),i=_(t,"values","sparseFillEmptyRows"),s=_(n,"denseShape","sparseFillEmptyRows","int32"),a=_(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);let u={indices:o,values:i,denseShape:s,defaultValue:a},c=k.runKernel(xT,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var P9=S({sparseFillEmptyRows_:TCe});function _Ce(e,t,n){let r=_(e,"inputIndices","sparseReshape","int32"),o=_(t,"inputShape","sparseReshape","int32"),i=_(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);let s={inputIndices:r,inputShape:o,newShape:i},a=k.runKernel(bT,s);return{outputIndices:a[0],outputShape:a[1]}}var $9=S({sparseReshape_:_Ce});function ICe(e,t,n){let r=_(e,"data","sparseSegmentMean"),o=_(t,"indices","sparseSegmentMean","int32"),i=_(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return k.runKernel(wT,s)}var L9=S({sparseSegmentMean_:ICe});function SCe(e,t,n){let r=_(e,"data","sparseSegmentSum"),o=_(t,"indices","sparseSegmentSum","int32"),i=_(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return k.runKernel(ET,s)}var V9=S({sparseSegmentSum_:SCe});function DCe(e,t,n,r,o,i,s,a){let u=_(e,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);let c=_(t,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let f={separator:n,nGramWidths:r,leftPad:o,rightPad:i,padWidth:s,preserveShortSequences:a},d={data:u,dataSplits:c},h=k.runKernel(_T,d,f);return{nGrams:h[0],nGramsSplits:h[1]}}var B9=S({stringNGrams_:DCe});function NCe(e,t,n=!0){let r=_(e,"input","stringSplit","string"),o=_(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);let i={skipEmpty:n},s={input:r,delimiter:o},a=k.runKernel(IT,s,i);return{indices:a[0],values:a[1],shape:a[2]}}var U9=S({stringSplit_:NCe});function ACe(e,t){let n=_(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");let o={input:n};return k.runKernel(ST,o,r)}var G9=S({stringToHashBucketFast_:ACe});function RCe(e,t,n,r=!0){let o=_(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return k.runKernel(am,{x:o},i)}var j9=S({staticRegexReplace_:RCe});var kCe={fft:Im,ifft:Cd,rfft:Sm,irfft:O_},OCe={hammingWindow:i9,hannWindow:B_,frame:U_,stft:s9},e0={flipLeftRight:u9,grayscaleToRGB:c9,resizeNearestNeighbor:w9,resizeBilinear:b9,rgbToGrayscale:l9,rotateWithOffset:f9,cropAndResize:a9,nonMaxSuppression:d9,nonMaxSuppressionAsync:m9,nonMaxSuppressionWithScore:g9,nonMaxSuppressionWithScoreAsync:y9,nonMaxSuppressionPadded:v9,nonMaxSuppressionPaddedAsync:x9,threshold:E9,transform:C9},MCe={bandPart:T9,gramSchmidt:_9,qr:S9},FCe={absoluteDifference:D9,computeWeightedLoss:Yr,cosineDistance:N9,hingeLoss:A9,huberLoss:R9,logLoss:k9,meanSquaredError:O9,sigmoidCrossEntropy:M9,softmaxCrossEntropy:F9},PCe={sparseFillEmptyRows:P9,sparseReshape:$9,sparseSegmentMean:L9,sparseSegmentSum:V9},$Ce={stringNGrams:B9,stringSplit:U9,stringToHashBucketFast:G9,staticRegexReplace:j9};var LCe=new Map,VCe=new Map,H_=class{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}},fF=class e{constructor(){this.classNameMap={}}static getMap(){return e.instance==null&&(e.instance=new e),e.instance}static register(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}};function z9(e,t,n){M(e.className!=null,()=>"Class being registered does not have the static className property defined."),M(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),M(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof n>"u"&&(n=e.className);let r=n,o=t+">"+r;return fF.register(e),LCe.set(o,e),VCe.set(e,o),e}var Jo=class extends H_{minimize(t,n=!1,r){let{value:o,grads:i}=this.computeGradients(t,r);if(r!=null){let s=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(s)}else this.applyGradients(i);return Wt(i),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return DW(t,n)}dispose(){this.iterations_!=null&&Wt(this.iterations_)}saveIterations(){return ne(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ue(this.iterations_,"int32")}})}getWeights(){return ne(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(t){return ne(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(t){return ne(this,null,function*(){return this.iterations_=(yield t[0].tensor.data())[0],t.slice(1)})}};Object.defineProperty(Jo,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});var W_=class extends Jo{static get className(){return"Adadelta"}constructor(t,n,r=null){super(),this.learningRate=t,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=k.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=k.registeredVariables[r],s=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:ze(()=>br(i).variable(s))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:ze(()=>br(i).variable(s))});let a=Array.isArray(t)?t[o].tensor:t[r];if(a==null)return;let u=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;ze(()=>{let f=_e(le(u,this.rho),le(Br(a),1-this.rho)),d=le(Xe(Yo(_e(c,this.epsilon)),Yo(_e(u,this.epsilon))),a),h=_e(le(c,this.rho),le(Br(d),1-this.rho));u.assign(f),c.assign(h);let m=_e(le(d,-this.learningRate),i);i.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Wt(this.accumulatedGrads.map(t=>t.variable)),Wt(this.accumulatedUpdates.map(t=>t.variable)))}getWeights(){return ne(this,null,function*(){let t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(t){return ne(this,null,function*(){t=yield this.extractIterations(t);let n=t.length/2,r=!1;this.accumulatedGrads=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}};var q_=class extends Jo{static get className(){return"Adagrad"}constructor(t,n=.1){super(),this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=k.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:ze(()=>du(i.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(t)?t[o].tensor:t[r];if(s==null)return;let a=this.accumulatedGrads[o].variable;ze(()=>{let u=_e(a,Br(s));a.assign(u);let c=_e(le(Xe(s,Yo(_e(u,k.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Wt(this.accumulatedGrads.map(t=>t.variable))}getWeights(){return ne(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))})}setWeights(t){return ne(this,null,function*(){t=yield this.extractIterations(t);let n=!1;this.accumulatedGrads=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}};var K_=class extends Jo{static get className(){return"Adam"}constructor(t,n,r,o=null){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ze(()=>{this.accBeta1=Ue(n).variable(),this.accBeta2=Ue(r).variable()}),o==null&&(this.epsilon=k.backend.epsilon())}applyGradients(t){let n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);ze(()=>{let r=Le(1,this.accBeta1),o=Le(1,this.accBeta2);n.forEach((i,s)=>{let a=k.registeredVariables[i],u=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:ze(()=>br(a).variable(u))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:ze(()=>br(a).variable(u))});let c=Array.isArray(t)?t[s].tensor:t[i];if(c==null)return;let f=this.accumulatedFirstMoment[s].variable,d=this.accumulatedSecondMoment[s].variable,h=_e(le(f,this.beta1),le(c,1-this.beta1)),m=_e(le(d,this.beta2),le(Br(c),1-this.beta2)),v=Xe(h,r),x=Xe(m,o);f.assign(h),d.assign(m);let b=_e(le(Xe(v,_e(Yo(x),this.epsilon)),-this.learningRate),a);a.assign(b)}),this.accBeta1.assign(le(this.accBeta1,this.beta1)),this.accBeta2.assign(le(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Wt(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&Wt(this.accumulatedSecondMoment.map(t=>t.variable))}getWeights(){return ne(this,null,function*(){let t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(t){return ne(this,null,function*(){t=yield this.extractIterations(t),ze(()=>{this.accBeta1.assign(lc(this.beta1,this.iterations_+1)),this.accBeta2.assign(lc(this.beta2,this.iterations_+1))});let n=t.length/2,r=!1;this.accumulatedFirstMoment=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}};var X_=class extends Jo{static get className(){return"Adamax"}constructor(t,n,r,o=null,i=0){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=o,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ze(()=>{this.iteration=Ue(0).variable(),this.accBeta1=Ue(n).variable()}),o==null&&(this.epsilon=k.backend.epsilon())}applyGradients(t){let n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);ze(()=>{let r=Le(1,this.accBeta1),o=Xe(-this.learningRate,_e(le(this.iteration,this.decay),1));n.forEach((i,s)=>{let a=k.registeredVariables[i],u=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:br(a).variable(u)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:br(a).variable(u)});let c=Array.isArray(t)?t[s].tensor:t[i];if(c==null)return;let f=this.accumulatedFirstMoment[s].variable,d=this.accumulatedWeightedInfNorm[s].variable,h=_e(le(f,this.beta1),le(c,1-this.beta1)),m=le(d,this.beta2),v=Vr(c),x=E_(m,v);f.assign(h),d.assign(x);let b=_e(le(Xe(o,r),Xe(h,_e(x,this.epsilon))),a);a.assign(b)}),this.iteration.assign(_e(this.iteration,1)),this.accBeta1.assign(le(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Wt(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&Wt(this.accumulatedWeightedInfNorm.map(t=>t.variable))}getWeights(){return ne(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(t){return ne(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}};var Dm=class extends Jo{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=Array.isArray(t)?t[o].tensor:t[r];if(i==null)return;let s=k.registeredVariables[r];ze(()=>{let a=_e(le(this.c,i),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=Xo(Ue(-t))}dispose(){this.c.dispose()}getWeights(){return ne(this,null,function*(){return[yield this.saveIterations()]})}setWeights(t){return ne(this,null,function*(){if(t=yield this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}};var Y_=class extends Dm{static get className(){return"Momentum"}constructor(t,n,r=!1){super(t),this.learningRate=t,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Ue(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=k.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:ze(()=>br(i).variable(!1))});let s=this.accumulations[o].variable,a=Array.isArray(t)?t[o].tensor:t[r];a!=null&&ze(()=>{let u,c=_e(le(this.m,s),a);this.useNesterov?u=_e(le(this.c,_e(a,le(c,this.m))),i):u=_e(le(this.c,c),i),s.assign(c),i.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Wt(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}getWeights(){return ne(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))})}setWeights(t){return ne(this,null,function*(){t=yield this.extractIterations(t);let n=!1;this.accumulations=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}};var Z_=class extends Jo{static get className(){return"RMSProp"}constructor(t,n=.9,r=0,o=null,i=!1){if(super(),this.learningRate=t,this.decay=n,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,o==null&&(this.epsilon=k.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=k.registeredVariables[r],s=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:ze(()=>br(i).variable(s))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:ze(()=>br(i).variable(s))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:ze(()=>br(i).variable(s))});let a=Array.isArray(t)?t[o].tensor:t[r];if(a==null)return;let u=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;ze(()=>{let f=_e(le(u,this.decay),le(Br(a),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[o].variable,h=_e(le(d,this.decay),le(a,1-this.decay)),m=Xe(le(a,this.learningRate),Yo(Le(f,_e(Br(h),this.epsilon)))),v=_e(le(c,this.momentum),m);u.assign(f),d.assign(h),c.assign(v);let x=Le(i,v);i.assign(x)}else{let d=_e(le(u,this.decay),le(Br(a),1-this.decay)),h=_e(le(c,this.momentum),Xe(le(a,this.learningRate),Yo(_e(d,this.epsilon))));u.assign(d),c.assign(h);let m=Le(i,h);i.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Wt(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Wt(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&Wt(this.accumulatedMoments.map(t=>t.variable))}getWeights(){return ne(this,null,function*(){let t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(t){return ne(this,null,function*(){t=yield this.extractIterations(t);let n=this.centered?t.length/3:t.length/2,r=!1;this.accumulatedMeanSquares=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}};var BCe=[W_,q_,K_,X_,Y_,Z_,Dm];function H9(){for(let e of BCe)z9(e)}var n0={};tn(n0,{CompositeArrayBuffer:()=>Kr,browserFiles:()=>q9,browserHTTPRequest:()=>Q9,concatenateArrayBuffers:()=>cH,copyModel:()=>CH,decodeWeights:()=>KT,decodeWeightsStream:()=>XT,encodeWeights:()=>iH,fromMemory:()=>J9,fromMemorySync:()=>vF,getLoadHandlers:()=>pH,getModelArtifactsForJSON:()=>vm,getModelArtifactsForJSONSync:()=>HM,getModelArtifactsInfoForJSON:()=>cu,getSaveHandlers:()=>dH,getWeightSpecs:()=>Hv,http:()=>J_,isHTTPScheme:()=>Q_,listModels:()=>wH,loadWeights:()=>X9,moveModel:()=>TH,registerLoadRouter:()=>fH,registerSaveRouter:()=>lH,removeModel:()=>EH,weightsLoaderFactory:()=>gF,withSaveHandler:()=>eq,withSaveHandlerSync:()=>tq});var UCe="model",GCe=".json",jCe=".weights.bin";function W9(e){return new Promise(t=>setTimeout(t)).then(e)}var dF=(()=>{class e{constructor(n){if(!z().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(e.URL_SCHEME)&&(n=n.slice(e.URL_SCHEME.length)),(n==null||n.length===0)&&(n=UCe),this.modelJsonFileName=n+GCe,this.weightDataFileName=n+jCe}save(n){return ne(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=Kr.join(n.weightData),o=window.URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let i=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],s=YT(n,i),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),u=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(u.download=this.modelJsonFileName,u.href=a,yield W9(()=>u.dispatchEvent(new MouseEvent("click"))),n.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=o,yield W9(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:cu(n)}}})}}return e.URL_SCHEME="downloads://",e})();var pF=class{constructor(t){if(t==null||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}load(){return ne(this,null,function*(){return new Promise((t,n)=>{let r=new FileReader;r.onload=o=>{let i=JSON.parse(o.target.result),s=i.modelTopology;if(s==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){t({modelTopology:s});return}let u=vm(i,c=>this.loadWeights(c));t(u)},r.onerror=o=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})})}loadWeights(t){let n=[],r=[];for(let s of t)n.push(...s.weights),r.push(...s.paths);let o=this.checkManifestAndWeightFiles(t),i=r.map(s=>this.loadWeightsFile(s,o[s]));return Promise.all(i).then(s=>[n,s])}loadWeightsFile(t,n){return new Promise((r,o)=>{let i=new FileReader;i.onload=s=>{let a=s.target.result;r(a)},i.onerror=s=>o(`Failed to weights data from file of path '${t}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(t){let n=[],r=this.weightsFiles.map(i=>zM(i.name)),o={};for(let i of t)i.paths.forEach(s=>{let a=zM(s);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);o[s]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}},zCe=e=>z().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(dF.URL_SCHEME)?HCe(e.slice(dF.URL_SCHEME.length)):null;Ir.registerSaveRouter(zCe);function HCe(e="model"){return new dF(e)}function q9(e){return new pF(e)}function hF(e,t,n,r){s(e),n=n??0,r=r??1,a(n,r);let o=0,i=u=>(u.then(c=>{let f=n+ ++o/e.length*(r-n);return t(f),c}),u);function s(u){M(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function a(u,c){M(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),M(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),M(c>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${c}`)}return Promise.all(e.map(i))}function mF(e,t){return ne(this,null,function*(){t==null&&(t={});let n=t.fetchFunc==null?z().platform.fetch:t.fetchFunc,r=e.map(d=>n(d,t.requestInit,{isBinary:!0})),a=(t.onProgress==null?yield Promise.all(r):yield hF(r,t.onProgress,0,.5)).map(d=>d.arrayBuffer());return t.onProgress==null?yield Promise.all(a):yield hF(a,t.onProgress,.5,1)})}function K9(e,t){var n;let r=t.fetchFunc==null?z().platform.fetch:t.fetchFunc,o=0,i;return(n=t.onProgress)===null||n===void 0||n.call(t,0),new ReadableStream({pull:s=>ne(this,null,function*(){for(var a;o<e.length;){i||(i=(yield r(e[o],t.requestInit,{isBinary:!0})).body.getReader());let{done:u,value:c}=yield i.read();if(u){o++,i=void 0,(a=t.onProgress)===null||a===void 0||a.call(t,o/e.length);continue}s.enqueue(c);return}s.close()})})}function X9(e,t="",n,r){return ne(this,null,function*(){return gF(s=>mF(s,{requestInit:r}))(e,t,n)})}function gF(e){return(t,n="",r)=>ne(this,null,function*(){let o=t.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],a=[];if(t.forEach((m,v)=>{let x=0;m.weights.forEach(b=>{let C="quantization"in b?b.quantization.dtype:b.dtype,D=sc[C]*mt(b.shape),O=()=>{o[v]=!0,i[v]==null&&(i[v]=[]),i[v].push({manifestEntry:b,groupOffset:x,sizeBytes:D})};r!=null?r.forEach((F,B)=>{F===b.name&&(O(),s[B]=!0)}):O(),a.push(b.name),x+=D})}),!s.every(m=>m)){let m=r.filter((v,x)=>!s[x]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let u=o.reduce((m,v,x)=>(v&&m.push(x),m),[]),c=[];u.forEach(m=>{t[m].paths.forEach(v=>{let x=n+(n.endsWith("/")?"":"/")+v;c.push(x)})});let f=yield e(c),d={},h=0;return u.forEach(m=>{let v=t[m].paths.length,x=new Kr(f.slice(h,h+v));i[m].forEach(C=>{let D=x.slice(C.groupOffset,C.groupOffset+C.sizeBytes),O=KT(D,[C.manifestEntry]);for(let F in O)d[F]=O[F]}),h+=v}),d})}var WCe="application/octet-stream",qCe="application/json",Y9=(()=>{class e{constructor(n,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(M(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=z().platform.fetch,M(n!=null&&n.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(n)&&M(n.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${n.length}).`),this.path=n,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{},this.loadOptions=r}save(n){return ne(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;let o=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i=YT(n,o);if(r.body.append("model.json",new Blob([JSON.stringify(i)],{type:qCe}),"model.json"),n.weightData!=null){let a=Kr.join(n.weightData);r.body.append("model.weights.bin",new Blob([a],{type:WCe}),"model.weights.bin")}let s=yield this.fetch(this.path,r);if(s.ok)return{modelArtifactsInfo:cu(n),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)})}loadModelJSON(){return ne(this,null,function*(){let n=yield this.fetch(this.path,this.requestInit);if(!n.ok)throw new Error(`Request to ${this.path} failed with status code ${n.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=yield n.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let o=r.modelTopology,i=r.weightsManifest;if(o==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return r})}load(){return ne(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let n=yield this.loadModelJSON();return vm(n,r=>this.loadWeights(r))})}loadStream(){return ne(this,null,function*(){let n=yield this.loadModelJSON(),r=yield this.getWeightUrls(n.weightsManifest),o=Hv(n.weightsManifest),i=()=>K9(r,this.loadOptions);return Object.assign(Object.assign({},n),{weightSpecs:o,getWeightStream:i})})}getWeightUrls(n){return ne(this,null,function*(){let r=Array.isArray(this.path)?this.path[1]:this.path,[o,i]=KCe(r),s=this.weightPathPrefix||o,a=[],u=[];for(let c of n)for(let f of c.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(f)):a.push(s+f+i);return this.weightUrlConverter&&a.push(...yield Promise.all(u)),a})}loadWeights(n){return ne(this,null,function*(){let r=yield this.getWeightUrls(n),o=Hv(n),i=yield mF(r,this.loadOptions);return[o,i]})}}return e.URL_SCHEME_REGEX=/^https?:\/\//,e})();function KCe(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),o=n>t?e.substring(n):"";return[r+"/",o]}function Q_(e){return e.match(Y9.URL_SCHEME_REGEX)!=null}var Z9=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(r=>Q_(r)):n=Q_(e),n)return J_(e,t)}return null};Ir.registerSaveRouter(Z9);Ir.registerLoadRouter(Z9);function J_(e,t){return new Y9(e,t)}function Q9(e,t){return J_(e,t)}var t0=class{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}},eI=class{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}},yF=class{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=n=>Promise.resolve(t.save(n)))}};function J9(e,t,n,r){let o=arguments;return new yF(vF(...o))}function vF(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new t0(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new t0({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new t0({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function eq(e){return new eI(e)}function tq(e){return new eI(e)}var r0={};tn(r0,{draw:()=>nTe,fromPixels:()=>rTe,fromPixelsAsync:()=>JCe,toPixels:()=>tTe});var Dd,nq=!1;function rq(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,o=!1,i=!1,s=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else if(e.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&e instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);if(fm($v,k.backendName)!=null){let v={pixels:e},x={numChannels:t};return k.runKernel($v,v,x)}let[c,f]=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],d;if(s)d=e.getContext("2d").getImageData(0,0,c,f).data;else if(r||n)d=e.data;else if(i||o||a){if(Dd==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Dd=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Dd=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Dd.canvas.width=c,Dd.canvas.height=f,Dd.drawImage(e,0,0,c,f),d=Dd.getImageData(0,0,c,f).data}let h;if(t===4)h=new Int32Array(d);else{let v=c*f;h=new Int32Array(v*t);for(let x=0;x<v;x++)for(let b=0;b<t;++b)h[x*t+b]=d[x*4+b]}return P_(h,[f,c,t],"int32")}function XCe(e){return e!=null&&e.data instanceof Uint8Array}function YCe(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function ZCe(e){return e!=null&&e.width!==0&&e.height!==0}function QCe(e){return YCe()&&!(e instanceof ImageBitmap)&&ZCe(e)&&!XCe(e)}function JCe(e,t=3){return ne(this,null,function*(){let n=null;if(z().getBool("WRAP_TO_IMAGEBITMAP")&&QCe(e)){let r;try{r=yield createImageBitmap(e,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===e.width&&r.height===e.height?n=r:n=e}else n=e;return rq(n,t)})}function oq(e){if(e.rank!==2&&e.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);let t=e.rank===2?1:e.shape[2];if(t>4||t===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if(e.dtype!=="float32"&&e.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}function eTe(e){let t=e?.alpha||1;if(t>1||t<0)throw new Error(`Alpha value ${t} is suppoed to be in range [0 - 1].`)}function tTe(e,t){return ne(this,null,function*(){let n=_(e,"img","toPixels");if(!(e instanceof Qt)){let c=n;n=wt(c,"int32"),c.dispose()}oq(n);let[r,o]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],s=yield n.data(),a=n.dtype==="float32"?255:1,u=new Uint8ClampedArray(o*r*4);for(let c=0;c<r*o;++c){let f=[0,0,0,255];for(let h=0;h<i;h++){let m=s[c*i+h];if(n.dtype==="float32"){if(m<0||m>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${m}.`)}else if(n.dtype==="int32"&&(m<0||m>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${m}.`);i===1?(f[0]=m*a,f[1]=m*a,f[2]=m*a):f[h]=m*a}let d=c*4;u[d+0]=Math.round(f[0]),u[d+1]=Math.round(f[1]),u[d+2]=Math.round(f[2]),u[d+3]=Math.round(f[3])}if(t!=null){nq||fm(DM,k.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),nq=!0),t.width=o,t.height=r;let c=t.getContext("2d"),f=new ImageData(u,o,r);c.putImageData(f,0,0)}return n!==e&&n.dispose(),u})}function nTe(e,t,n){let r=_(e,"img","draw");if(!(e instanceof Qt)){let s=r;r=wt(s,"int32"),s.dispose()}oq(r),eTe(n?.imageOptions);let o={image:r},i={canvas:t,options:n};k.runKernel(DM,o,i)}var rTe=S({fromPixels_:rq});function oTe(e,t){let n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(mt(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);let o=t.shape,i=o[o.length-1],s=1;for(let d=0;d<o.length-1;++d)s*=o[d];let a=e.shape,u=o.slice();u.pop();let c=1;for(let d=i;d<n;++d)c*=a[d],u.push(a[d]);let f=[...uu(e.shape).map(d=>d/c),1].slice(0,i);return[u,s,c,f]}var ei={};tn(ei,{assertParamsValid:()=>sTe,computeFlatOffset:()=>fTe,computeOutShape:()=>uTe,getNormalizedAxes:()=>cTe,isSliceContinous:()=>lTe,maskToAxes:()=>aTe,parseSliceParams:()=>dTe,sliceInfo:()=>pTe,startForAxis:()=>dq,startIndicesWithElidedDims:()=>cq,stopForAxis:()=>pq,stopIndicesWithElidedDims:()=>lq,stridesForAxis:()=>fq,stridesWithElidedDims:()=>sq});var xF=-2,iTe=-1;function sTe(e,t,n){let r=e.shape.length;M(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),M(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)M(t[o]+n[o]<=e.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${t[o]+n[o]}) would overflow input.shape[${o}] (${e.shape[o]})`)}function aTe(e){let t=[],n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function uTe(e,t,n){let r=[];for(let o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function sq(e,t,n,r){let o=[...e];for(let i=o.length;i<r.length;i++)o.push(1);for(let i=0;i<n;i++)i===0?o[t]=1:(o.splice(t,0,1),o.pop());return o}function aq(e,t,n){return n<=e?n:n-(t-1)}function uq(e,t){let n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function cTe(e,t,n,r,o,i,s,a,u){let c=e.length,f=new Array(c),d=new Array(c),h=new Array(c);if(t.length&&n>0){let m=t[0],v=n+1;f=cq(s,m,v,r,e),d=lq(a,m,v,o,e),h=sq(i,m,v,e)}else for(let m=0;m<c;m++)f[m]=dq(s,r,i,e,m,u),d[m]=pq(a,o,i,e,m,u),h[m]=fq(i,m,u);return{begin:f,end:d,strides:h}}function cq(e,t,n,r,o){let i=[...o],s=uq(n,t);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=0;else{let u=aq(t,n,a),c=r[u];e&1<<u&&(c=0),i[a]=c}return i}function lq(e,t,n,r,o){let i=[...o],s=uq(n,t);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{let u=aq(t,n,a),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){let u=o[a];i[a]<0&&(i[a]+=u),i[a]=Fh(0,i[a],o[a])}return i}function fq(e,t,n){let r=e[t];return(n&1<<t||r==null)&&(r=1),r}function dq(e,t,n,r,o,i){let s=t[o],a=n[o]||1;(e&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let u=r[o];return s<0&&(s+=u),s=Fh(0,s,u-1),s}function pq(e,t,n,r,o,i){let s=t[o],a=n[o]||1;(e&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let u=r[o];return s<0&&(s+=u),a>0?s=Fh(0,s,u):s=Fh(-1,s,u-1),s}function lTe(e,t,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function fTe(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function dTe(e,t,n){let r,o=e.shape.length;typeof t=="number"?r=[t,...new Array(o-1).fill(0)]:t.length<o?r=t.concat(new Array(o-t.length).fill(0)):r=t.slice(),r.forEach(s=>{M(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(o).fill(-1):typeof n=="number"?i=[n,...new Array(o-1).fill(-1)]:n.length<o?i=n.concat(new Array(o-n.length).fill(-1)):i=n,i=i.map((s,a)=>s>=0?s:(M(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),e.shape[a]-r[a])),[r,i]}function pTe(e,t,n,r,o,i,s,a,u){let c;if(r==null?(c=new Array(t.length),c.fill(1)):c=r,s!=null&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let f=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:u};for(let O=0;O<d.dims;O++)f&&1<<O&a&&d.numAddAxisAfterEllipsis++,1<<O&s&&(f=!0);f||(d.ellipsisMask|=1<<d.dims,d.dims++);let h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};hTe(d,h);let m=!0,v=!0,x=!0,b=[],C=[];for(let O=0;O<e.length;++O){if(h.strides[O]===0)throw Error(`strides[${O}] must be non-zero`);let F=!!(h.shrinkAxisMask&1<<O),B=e[O];if(B===-1){b.push(F?1:-1);continue}let H=[h.beginMask&1<<O,h.endMask&1<<O],X=[h.strides[O]>0?0:-1,h.strides[O]>0?B:B-1];if(F&&h.strides[O]<=0)throw Error("only stride 1 allowed on non-range indexing.");x=x&&h.strides[O]===1;let Z=!!(h.beginMask&1<<O&&h.endMask&1<<O);if(h.beginValid&&h.endValid){if(F){let ye=h.begin[O]<0?B+h.begin[O]:h.begin[O];if(h.begin[O]=ye,h.end[O]=h.begin[O]+1,ye<0||ye>=B)throw Error(`slice index ${h.begin[O]} of dimension ${O} out of bounds.`)}else h.begin[O]=iq(h.begin[O],0,h.strides[O],B,H,X),h.end[O]=iq(h.end[O],1,h.strides[O],B,H,X);let ae=h.strides[O]===1&&h.begin[O]===0&&h.end[O]===B;m=m&&ae,v=v&&(O===0&&h.strides[O]===1||ae)}else m=m&&h.strides[O]===1&&Z,v=v&&(O===0&&h.strides[O]===1||Z);let te,J=!1;if(h.beginValid&&h.endValid?(te=h.end[O]-h.begin[O],J=!0):F?(te=1,J=!0):Z&&B>=0&&(h.strides[O]<0?te=-B:te=B,J=!0),J){let ae;te===0||te<0!=h.strides[O]<0?ae=0:ae=Math.trunc(te/h.strides[O])+(te%h.strides[O]!==0?1:0),b.push(ae)}else b.push(-1)}for(let O=0;O<h.finalShapeGatherIndices.length;++O){let F=h.finalShapeGatherIndices[O];F>=0?C.push(b[F]):F===xF&&C.push(1)}return{finalShapeSparse:C.filter((O,F)=>h.finalShapeGatherIndices[F]!==xF),finalShape:C,isIdentity:m,sliceDim0:v,isSimpleSlice:x,begin:h.begin,end:h.end,strides:h.strides}}function hTe(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){let o=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(xF),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[r]),e.end!=null&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(iTe),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function iq(e,t,n,r,o,i){if(o[t])return n>0?i[t]:i[t+1&1];{let s=e<0?r+e:e;return s<i[0]?i[0]:s>i[1]?i[1]:s}}var mTe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:e=>e();function bF(){return new Promise(e=>mTe(()=>e()))}var U={};tn(U,{ERF_A1:()=>kTe,ERF_A2:()=>OTe,ERF_A3:()=>MTe,ERF_A4:()=>FTe,ERF_A5:()=>PTe,ERF_P:()=>RTe,PARALLELIZE_THRESHOLD:()=>tI,RowPartitionType:()=>hc,SELU_SCALE:()=>ATe,SELU_SCALEALPHA:()=>NTe,applyActivation:()=>Id,assertAndGetBroadcastShape:()=>Ft,assertAxesAreInnerMostDims:()=>ebe,assertParamsConsistent:()=>gTe,assignToTypedArray:()=>GTe,axesAreInnerMostDims:()=>tF,calculateShapes:()=>cEe,checkEinsumDimSizes:()=>KTe,checkPadOnDimRoundingMode:()=>tr,combineLocations:()=>xW,combineRaggedTensorToTensorShapes:()=>vTe,complexWithEvenIndex:()=>VTe,complexWithOddIndex:()=>BTe,computeConv2DInfo:()=>md,computeConv3DInfo:()=>BH,computeDefaultPad:()=>eF,computeDilation2DInfo:()=>Qxe,computeOptimalWindowSize:()=>ETe,computeOutAndReduceShapes:()=>J1e,computeOutShape:()=>yTe,computePool2DInfo:()=>JM,computePool3DInfo:()=>Jxe,convertConv2DDataFormat:()=>UH,decodeEinsumEquation:()=>WTe,eitherStridesOrDilationsAreOne:()=>co,expandShapeToKeepDim:()=>cc,exponent:()=>zTe,exponents:()=>jTe,fromStringArrayToUint8:()=>m_e,fromUint8ToStringArray:()=>h_e,getAxesPermutation:()=>tbe,getBroadcastDims:()=>hW,getComplexWithIndex:()=>UTe,getEinsumComputePath:()=>XTe,getEinsumPermutation:()=>qTe,getFusedBiasGradient:()=>_d,getFusedDyActivation:()=>Td,getImageCenter:()=>CTe,getInnerMostAxes:()=>rbe,getPermuted:()=>_Te,getRaggedRank:()=>bTe,getReductionAxes:()=>a_,getReshaped:()=>TTe,getReshapedPermuted:()=>ITe,getRowPartitionTypesHelper:()=>xTe,getSliceBeginCoords:()=>STe,getSliceSize:()=>DTe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>JTe,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>e_e,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>t_e,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>o_e,getSparseReshapeInputOutputMismatchErrorMessage:()=>s_e,getSparseReshapeInputOutputMultipleErrorMessage:()=>i_e,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>n_e,getSparseReshapeNegativeOutputDimErrorMessage:()=>r_e,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>l_e,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>a_e,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>u_e,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>c_e,getUndoAxesPermutation:()=>nbe,isIdentityPermutation:()=>YTe,log:()=>j0e,mergeRealAndImagArrays:()=>$Te,prepareAndValidate:()=>oTe,prepareSplitSize:()=>QTe,segment_util:()=>EF,shouldFuse:()=>Sd,slice_util:()=>ei,splitRealAndImagArrays:()=>LTe,stridesOrDilationsArePositive:()=>lu,tupleValuesAreOne:()=>hd,upcastType:()=>uo,validateDefaultValueShape:()=>wTe,validateInput:()=>Qv,validateUpdateShape:()=>G7,warn:()=>oc});function gTe(e,t){let n=e[0].length;e.forEach((o,i)=>{M(o.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),M(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=e[0];e.forEach((o,i)=>{for(let s=0;s<n;s++)M(s===t||o[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function yTe(e,t){let n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var hc=function(e){return e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS",e}(hc||{});function vTe(e,t,n){let r=new Array;if(n==null&&t==null)return r;if(t==null)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(n==null)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){let i=n[o],s=r[r.length-n.length+o],a=r[s];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${o+e}] = ${i} but shape[${o+e}] = ${a}`)}else r[s]=i}return r}function xTe(e){let t={FIRST_DIM_SIZE:hc.FIRST_DIM_SIZE,VALUE_ROWIDS:hc.VALUE_ROWIDS,ROW_LENGTHS:hc.ROW_LENGTHS,ROW_SPLITS:hc.ROW_SPLITS,ROW_LIMITS:hc.ROW_LIMITS,ROW_STARTS:hc.ROW_STARTS},n=[];for(let r of e)if(r in t)n.push(t[r]);else break;return n}function bTe(e){return e.length===0?0:e[0]===hc.FIRST_DIM_SIZE?e.length-1:e.length}function wTe(e,t){if(e==null||t==null)return;let n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){let i=e[o],s=t[o+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${o-e.length}] = ${i} but ragged tensor input.flatValues.shape[${o-e.length}] = ${s}`)}}var tI=30;function ETe(e){return e<=tI?e:Vh(e,Math.floor(Math.sqrt(e)))}function CTe(e,t,n){let r=n*(typeof e=="number"?e:e[0]),o=t*(typeof e=="number"?e:e[1]);return[r,o]}function TTe(e,t,n,r=!0){let o=[];if(r)o=o.concat(t.slice(0)),o.push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);let i=t.length;for(let s=0;s<i;++s)o=o.concat([e[s+1]/t[s],t[s]]);o=o.concat(e.slice(i+1))}return o}function _Te(e,t,n=!0){let r=[];if(n){r.push(t);for(let o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{let o=[],i=[];for(let s=1;s<e;++s)s>=t*2+1||s%2===1?i.push(s):o.push(s);r.push(...o),r.push(0),r.push(...i)}return r}function ITe(e,t,n,r=!0){let o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(let i=1;i<e.length;++i)i<=t.length?r?o.push(t[i-1]*e[i]):o.push(e[i]/t[i-1]):o.push(e[i]);return o}function STe(e,t){let n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function DTe(e,t,n){let r=e.slice(0,1);for(let o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}var NTe=1.7580993408473768,ATe=1.0507009873554805;var RTe=.3275911,kTe=.254829592,OTe=-.284496736,MTe=1.421413741,FTe=-1.453152027,PTe=1.061405429;function $Te(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);let n=new Float32Array(e.length*2);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function LTe(e){let t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function VTe(e){let t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function BTe(e){let t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function UTe(e,t){let n=e[t*2],r=e[t*2+1];return{real:n,imag:r}}function GTe(e,t,n,r){e[r*2]=t,e[r*2+1]=n}function jTe(e,t){let n=new Float32Array(e/2),r=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){let i=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}function zTe(e,t,n){let r=(n?2:-2)*Math.PI*(e/t),o=Math.cos(r),i=Math.sin(r);return{real:o,imag:i}}var wF="->",HTe=/->/g,hq=",",mq="...";function WTe(e,t){e=e.replace(/\s/g,"");let n=(e.length-e.replace(HTe,"").length)/wF.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${wF}").`);let[r,o]=e.split(wF);M(r.indexOf(mq)===-1,()=>`The ellipsis notation ("${mq}") is not supported yet.`);let i=r.split(hq),s=i.length;if(t!==s)throw new Error(`Expected ${s} input tensors, received ${t}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let h=0;h<o.length;++h){let m=o[h];if(!i.some(v=>v.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);a.indexOf(m)===-1&&a.push(m)}for(let h=0;h<r.length;++h){let m=r[h];a.indexOf(m)===-1&&m!==hq&&a.push(m)}let u=new Array(i.length);for(let h=0;h<s;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error(`Found duplicate axes in input component ${i[h]}. Support for duplicate axes in input is not implemented yet.`);u[h]=[];for(let m=0;m<i[h].length;++m)u[h].push(a.indexOf(i[h][m]))}let c=a.length,f=o.length,d=[];for(let h=f;h<c;++h)d.push(h);return{allDims:a,summedDims:d,idDims:u}}function qTe(e,t){let n=new Array(e);n.fill(-1);for(let o=0;o<t.length;++o)n[t[o]]=o;let r=[];for(let o=0;o<e;++o)n[o]===-1&&r.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:r}}function KTe(e,t,n){let r=new Array(e);for(let o=0;o<n.length;++o){let i=n[o].shape;for(let s=0;s<t[o].length;++s)r[t[o][s]]===void 0?r[t[o][s]]=i[s]:M(r[t[o][s]]===i[s],()=>`Expected dimension ${r[t[o][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function XTe(e,t){let n=e,r=[],o=0;e.length===0&&n.push(-1),o=e.length+1;for(let s=0;s<o;++s)r.push([]);let i=[];for(let s=0;s<n.length;++s){let a=n[s],u=ZTe(t,a);for(let c of u)i.indexOf(c)===-1&&(r[s].push(c),i.push(c))}return{path:n,steps:r}}function YTe(e){return e.every((t,n)=>t===n)}function ZTe(e,t){let n=[];for(let r=0;r<e.length;++r)(e[r].length===0||e[r].indexOf(t)!==-1||t===-1)&&n.push(r);return n}function QTe(e,t,n=0){let r=[];if(typeof t=="number")M(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{let o=t.reduce((s,a)=>(a===-1&&(s+=1),s),0);M(o<=1,()=>"There should be only one negative value in split array.");let i=t.indexOf(-1);if(i!==-1){let s=t.reduce((a,u)=>u>0?a+u:a);t[i]=e.shape[n]-s}M(e.shape[n]===t.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function JTe(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function e_e(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function t_e(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function n_e(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function r_e(e,t){return`size ${e} must be non-negative, not ${t}`}function o_e(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function i_e(e,t){let n=mt(e),r=mt(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${e} outputShape= ${t}`}function s_e(e,t){let n=mt(e),r=mt(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${e} outputShape=${t}`}function a_e(){return"segment ids must be >= 0"}function u_e(){return"segment ids are not increasing"}function c_e(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function l_e(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}var EF={};tn(EF,{collectGatherOpShapeInfo:()=>p_e,computeOutShape:()=>d_e,segOpComputeOptimalWindowSize:()=>f_e});function f_e(e,t){let n=!1,r;for(e<=tI?(r=e,n=!0):r=Vh(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=Vh(e,r+1);return r}function d_e(e,t,n){let r=[],o=e.length;for(let i=0;i<o;i++)i!==t?r.push(e[i]):r.push(n);return r}function p_e(e,t,n,r){let o=t.shape.length,i=e.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(e.shape[d]!==t.shape[d])throw new Error(`x.shape[${d}]: ${e.shape[d]} should be equal to indices.shape[${d}]: ${t.shape[d]}.`);let s=e.shape[n],a=[],u=1,c=1,f=1;for(let d=0;d<r;++d)a.push(e.shape[d]),u*=e.shape[d];for(let d=r;d<n;d++)a.push(e.shape[d]),c*=e.shape[d];for(let d=r;d<o;d++)a.push(t.shape[d]);for(let d=n+1;d<i;d++)a.push(e.shape[d]),f*=e.shape[d];return{batchSize:u,sliceSize:f,outerSize:c,dimSize:s,outputShape:a}}function h_e(e){try{return e.map(t=>gm(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function m_e(e){return e.map(t=>mm(t))}var gu={};tn(gu,{nonMaxSuppressionV3Impl:()=>G_,nonMaxSuppressionV4Impl:()=>j_,nonMaxSuppressionV5Impl:()=>z_,whereImpl:()=>$_});H9();var g_e=z();g_e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var Ni=function(e){return e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF",e}(Ni||{}),yq;(function(e){let t;(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(yq||(yq={}));var v_e={};function nI(e){return v_e[e]}function T(e,t,n,r,o){let i=t.inputParams[e];if(i&&i.inputIndexStart!==void 0){let a=i.inputIndexStart,u=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?t.inputNames.length+a:a;if(i.type==="tensor")return rr(t.inputNames[c],n,r,o);if(i.type==="tensors"){let h=t.inputs.slice(a,u);return t.inputNames.slice(a,u).filter((v,x)=>{var b;return((b=h[x])===null||b===void 0?void 0:b.op)!=="NoOp"}).map(v=>rr(v,n,r,o))}let f=rr(t.inputNames[c],n,r,o),d=f.dataSync();return i.type==="number"?d[0]:N.toNestedArray(f.shape,d)}let s=t.attrParams[e];return s&&s.value}function rr(e,t,n,r){let[o,i]=No(e,n);if(r!=null){let a=r.getHashTableHandleByName(o);if(a!=null)return a}let s=n.currentContextIds.find(a=>!!t[rI(o,a)]);return s!==void 0?t[rI(o,s)][i]:void 0}function CF(e,t,n){return t[rI(e,n.currentContextId)]}function _a(e,t){let[n,r,o]=No(e,t);return[rI(n,t&&t.currentContextId),r,o]}function rI(e,t){return t?`${e}-${t}`:e}function No(e,t){if(e==="")return["",0,void 0];let n=t!=null&&t.parseNodeNameCache!=null;if(n){let i=t.parseNodeNameCache.get(e);if(i!=null)return i}let r=e.split(":"),o;if(r.length===1)o=[e,0,void 0];else{let i=r[0],s=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);o=[i,a,s]}return n&&t.parseNodeNameCache.set(e,o),o}function o0(e,t,n){let r=T("pad",e,t,n);if(r==="explicit"){r=T("explicitPaddings",e,t,n);let o=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)o[i][0]=r[i*2],o[i][1]=r[i*2+1];return o}return r}function Ia(e){return e.kept?e:Si(e)}var TF={};tn(TF,{json:()=>x_e});var x_e=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var _F={};tn(_F,{json:()=>b_e});var b_e=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var IF={};tn(IF,{json:()=>w_e});var w_e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}];var SF={};tn(SF,{json:()=>E_e});var E_e=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];var DF={};tn(DF,{json:()=>C_e});var C_e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];var NF={};tn(NF,{json:()=>T_e});var T_e=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var AF={};tn(AF,{json:()=>__e});var __e=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];var RF={};tn(RF,{json:()=>I_e});var I_e=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];var kF={};tn(kF,{json:()=>S_e});var S_e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var OF={};tn(OF,{json:()=>D_e});var D_e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}];var MF={};tn(MF,{json:()=>N_e});var N_e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}];var FF={};tn(FF,{json:()=>A_e});var A_e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}];var PF={};tn(PF,{json:()=>R_e});var R_e=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}];var $F={};tn($F,{json:()=>k_e});var k_e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];var LF={};tn(LF,{json:()=>O_e});var O_e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var VF={};tn(VF,{json:()=>M_e});var M_e=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}];var BF={};tn(BF,{json:()=>F_e});var F_e=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];var UF={};tn(UF,{json:()=>P_e});var P_e=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}];var GF={};tn(GF,{json:()=>$_e});var $_e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];var i0=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let t=[TF,_F,IF,SF,DF,NF,AF,RF,kF,OF,MF,FF,PF,$F,LF,VF,BF,UF,GF],n=[].concat(...t.map(r=>r.json));this.opMappers=n.reduce((r,o)=>(r[o.tfOpName]=o,r),{})}transformGraph(t,n={}){let r=t.node,o=[],i=[],s=[],a=r.reduce((x,b)=>(x[b.name]=this.mapNode(b),b.op.startsWith("Placeholder")?o.push(x[b.name]):b.op==="Const"?i.push(x[b.name]):(b.input==null||b.input.length===0)&&s.push(x[b.name]),x),{}),u=[],c=[],f={},d={};n!=null&&(f=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));let h=Object.keys(a);h.forEach(x=>{let b=a[x];b.inputNames.forEach((C,D)=>{let[O,,F]=_a(C),B=a[O];if(B.outputs!=null){let H=B.outputs.indexOf(F);if(H!==-1){let X=`${O}:${H}`;b.inputNames[D]=X}}b.inputs.push(B),B.children.push(b)})}),Object.keys(d).length===0?h.forEach(x=>{let b=a[x];b.children.length===0&&c.push(b)}):Object.keys(d).forEach(x=>{let[b]=_a(x),C=a[b];C!=null&&(C.signatureKey=d[x],c.push(C))}),Object.keys(f).length>0?Object.keys(f).forEach(x=>{let[b]=_a(x),C=a[b];C&&(C.signatureKey=f[x],u.push(C))}):u=o;let m={};t.library!=null&&t.library.function!=null&&(m=t.library.function.reduce((x,b)=>(x[b.signature.name]=this.mapFunction(b),x),{}));let v={nodes:a,inputs:u,outputs:c,weights:i,placeholders:o,signature:n,functions:m};return s.length>0&&(v.initNodes=s),v}mapSignatureEntries(t){return Object.keys(t||{}).reduce((n,r)=>(n[t[r].name]=r,n),{})}mapNode(t){let n=nI(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});let r={name:t.name,op:t.op,category:n.category,inputNames:(t.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((o,i)=>(o[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},o),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((o,i)=>{let s=i.type,a;switch(i.type){case"string":a=oI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=oI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=fI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=fI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=sI(t.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=sI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=lI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=lI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=iI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=iI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=pI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=pI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=cI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=cI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=dI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=dI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=aI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=aI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=uI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=uI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=vq(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=vq(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${t.op}`)}return o[i.name]={value:a,type:s},o},{})),r}mapFunction(t){let n=t.nodeDef,r=[],o=[],i={};n!=null&&(i=n.reduce((d,h)=>(d[h.name]=this.mapNode(h),h.op==="Const"&&o.push(d[h.name]),d),{}));let s=[],a=[];t.signature.inputArg.forEach(d=>{let[h]=_a(d.name),m={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:jF(d.type),type:"dtype"}},children:[]};m.signatureKey=d.name,s.push(m),i[h]=m}),Object.keys(i).forEach(d=>{let h=i[d];h.inputNames.forEach((m,v)=>{let[x,,b]=_a(m),C=i[x];if(C.outputs!=null){let D=C.outputs.indexOf(b);if(D!==-1){let O=`${x}:${D}`;h.inputNames[v]=O}}h.inputs.push(C),C.children.push(h)})});let c=t.ret;t.signature.outputArg.forEach(d=>{let[h,m]=_a(c[d.name]),v=i[h];v!=null&&(v.defaultOutput=m,a.push(v))});let f=this.mapArgsToSignature(t);return{nodes:i,inputs:s,outputs:a,weights:o,placeholders:r,signature:f}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:t.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,t.ret),n),{})}}mapArgToTensorInfo(t,n){let r=t.name;return n!=null&&(r=n[r]),{name:r,dtype:t.type}}};function L_e(e){let t=z().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function xq(e,t){let n=Array.isArray(e)?String.fromCharCode.apply(null,e):L_e(e);return t?n:n.toLowerCase()}function oI(e,t,n,r=!1){let o=e[t];return o!=null?xq(o.s,r):n}function iI(e,t,n){let r=e[t];return r?r.b:n}function sI(e,t,n){let r=e[t]||{},o=r.i!=null?r.i:r.f!=null?r.f:n;return typeof o=="number"?o:parseInt(o,10)}function jF(e){switch(typeof e=="string"&&(e=Ni[e]),e){case Ni.DT_FLOAT:case Ni.DT_HALF:return"float32";case Ni.DT_INT32:case Ni.DT_INT64:case Ni.DT_INT8:case Ni.DT_UINT8:return"int32";case Ni.DT_BOOL:return"bool";case Ni.DT_DOUBLE:return"float32";case Ni.DT_STRING:return"string";case Ni.DT_COMPLEX64:case Ni.DT_COMPLEX128:return"complex64";default:return null}}function vq(e,t,n){let r=e[t];return r&&r.func?r.func.name:n}function aI(e,t,n){let r=e[t];return r&&r.type?jF(r.type):n}function uI(e,t,n){let r=e[t];return r&&r.list&&r.list.type?r.list.type.map(o=>jF(o)):n}function bq(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function cI(e,t,n){let r=e[t];return r&&r.shape?bq(r.shape):n}function lI(e,t,n){let r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):n}function fI(e,t,n,r=!1){let o=e[t];return o&&o.list&&o.list.s?o.list.s.map(i=>xq(i,r)):n}function dI(e,t,n){let r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(o=>bq(o)):n}function pI(e,t,n){let r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var hI=class{constructor(t,n,r){this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(o=>this.getInput(o)),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce((o,i)=>(o[i]=this.getAttr(i),o),{}))}getInput(t){return rr(t,this.tensorMap,this.context)}getAttr(t,n){let r=this.node.rawAttrs[t];if(r.tensor!=null)return rr(t,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return sI(this.node.rawAttrs,t,n);if(r.s!=null)return oI(this.node.rawAttrs,t,n);if(r.b!=null)return iI(this.node.rawAttrs,t,n);if(r.shape!=null)return cI(this.node.rawAttrs,t,n);if(r.type!=null)return aI(this.node.rawAttrs,t,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return lI(this.node.rawAttrs,t,n);if(r.list.s!=null)return fI(this.node.rawAttrs,t,n);if(r.list.shape!=null)return dI(this.node.rawAttrs,t,n);if(r.list.b!=null)return pI(this.node.rawAttrs,t,n);if(r.list.type!=null)return uI(this.node.rawAttrs,t,n)}return n}};var Ot={};tn(Ot,{OP_SCOPE_SUFFIX:()=>GM,abs:()=>Vr,acos:()=>DH,acosh:()=>NH,add:()=>_e,addN:()=>AH,all:()=>RH,any:()=>kH,argMax:()=>OH,argMin:()=>MH,asin:()=>FH,asinh:()=>PH,atan:()=>$H,atan2:()=>LH,atanh:()=>VH,avgPool:()=>n_,avgPool3d:()=>GH,basicLSTMCell:()=>jH,batchNorm:()=>Rl,batchNorm2d:()=>HH,batchNorm3d:()=>WH,batchNorm4d:()=>qH,batchToSpaceND:()=>r_,bincount:()=>o_,bitwiseAnd:()=>KH,booleanMaskAsync:()=>vEe,broadcastArgs:()=>XH,broadcastTo:()=>kl,buffer:()=>bt,cast:()=>wt,ceil:()=>YH,clipByValue:()=>i_,clone:()=>Si,complex:()=>Ko,concat:()=>rn,concat1d:()=>ZH,concat2d:()=>QH,concat3d:()=>JH,concat4d:()=>eW,conv1d:()=>tW,conv2d:()=>Ol,conv2dTranspose:()=>nW,conv3d:()=>rW,conv3dTranspose:()=>iW,cos:()=>sW,cosh:()=>aW,cosineWindow:()=>Jv,cumprod:()=>uW,cumsum:()=>cW,denseBincount:()=>lW,depthToSpace:()=>fW,depthwiseConv2d:()=>Cm,diag:()=>dW,dilation2d:()=>pW,div:()=>Xe,divNoNan:()=>mW,dot:()=>gW,dropout:()=>AEe,einsum:()=>Fl,elu:()=>c_,enclosingPowerOfTwo:()=>uF,ensureShape:()=>yW,equal:()=>u_,erf:()=>vW,euclideanNorm:()=>wW,exp:()=>Zo,expandDims:()=>Di,expm1:()=>EW,eye:()=>l_,fft:()=>Im,fill:()=>du,floor:()=>f_,floorDiv:()=>t_,fused:()=>cF,gather:()=>d_,gatherND:()=>DEe,greater:()=>yd,greaterEqual:()=>p_,ifft:()=>Cd,imag:()=>$l,image:()=>e0,inTopKAsync:()=>kEe,irfft:()=>O_,isFinite:()=>CW,isInf:()=>TW,isNaN:()=>_W,leakyRelu:()=>h_,less:()=>Yv,lessEqual:()=>Tm,linalg:()=>MCe,linspace:()=>IW,localResponseNormalization:()=>SW,log:()=>fc,log1p:()=>m_,logSigmoid:()=>NW,logSoftmax:()=>AW,logSumExp:()=>y_,logicalAnd:()=>vd,logicalNot:()=>v_,logicalOr:()=>x_,logicalXor:()=>RW,losses:()=>FCe,lowerBound:()=>kW,matMul:()=>Vt,max:()=>pu,maxPool:()=>w_,maxPool3d:()=>OW,maxPoolWithArgmax:()=>MW,maximum:()=>E_,mean:()=>xd,meshgrid:()=>FW,min:()=>Xv,minimum:()=>bd,mirrorPad:()=>PW,mod:()=>$W,moments:()=>LW,movingAverage:()=>wEe,mul:()=>le,multiRNNCell:()=>VW,multinomial:()=>BW,neg:()=>Xr,norm:()=>gd,notEqual:()=>C_,oneHot:()=>UW,ones:()=>hu,onesLike:()=>GW,op:()=>S,outerProduct:()=>jW,pad:()=>mu,pad1d:()=>zW,pad2d:()=>HW,pad3d:()=>WW,pad4d:()=>qW,pool:()=>KW,pow:()=>lc,prelu:()=>__,print:()=>e_,prod:()=>XW,raggedGather:()=>YW,raggedRange:()=>ZW,raggedTensorToTensor:()=>QW,rand:()=>JW,randomGamma:()=>y7,randomNormal:()=>A_,randomStandardNormal:()=>v7,randomUniform:()=>_m,randomUniformInt:()=>x7,range:()=>Ll,real:()=>dc,reciprocal:()=>b7,relu:()=>Vl,relu6:()=>R_,reshape:()=>Q,reverse:()=>gs,reverse1d:()=>w7,reverse2d:()=>E7,reverse3d:()=>C7,reverse4d:()=>T7,rfft:()=>Sm,round:()=>k_,rsqrt:()=>_7,scalar:()=>Ue,scatterND:()=>CEe,searchSorted:()=>Zv,selu:()=>I7,separableConv2d:()=>S7,setdiff1dAsync:()=>D7,sigmoid:()=>qs,sign:()=>N7,signal:()=>OCe,sin:()=>A7,sinh:()=>R7,slice:()=>We,slice1d:()=>k7,slice2d:()=>O7,slice3d:()=>M7,slice4d:()=>F7,softmax:()=>P7,softplus:()=>g_,spaceToBatchND:()=>T_,sparse:()=>PCe,sparseToDense:()=>IEe,spectral:()=>kCe,split:()=>pc,sqrt:()=>Yo,square:()=>Br,squaredDifference:()=>M_,squeeze:()=>fr,stack:()=>Do,step:()=>F_,stridedSlice:()=>$7,string:()=>$Ce,sub:()=>Le,sum:()=>Bt,tan:()=>L7,tanh:()=>Kv,tensor:()=>So,tensor1d:()=>Ln,tensor2d:()=>Ta,tensor3d:()=>P_,tensor4d:()=>V7,tensor5d:()=>B7,tensor6d:()=>U7,tensorScatterUpdate:()=>z7,tile:()=>Pl,topk:()=>H7,transpose:()=>V_,truncatedNormal:()=>W7,unique:()=>q7,unsortedSegmentSum:()=>K7,unstack:()=>ys,upperBound:()=>X7,variable:()=>Y7,where:()=>ms,whereAsync:()=>L_,zeros:()=>Ks,zerosLike:()=>br});var wq=(e,t,n,r=Ot)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(T("a",e,t,n),T("b",e,t,n))];case"AddN":return[r.addN(T("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(T("a",e,t,n),T("b",e,t,n))];case"Mul":return[r.mul(T("a",e,t,n),T("b",e,t,n))];case"RealDiv":case"Div":return[r.div(T("a",e,t,n),T("b",e,t,n))];case"DivNoNan":return[r.divNoNan(T("a",e,t,n),T("b",e,t,n))];case"FloorDiv":return[r.floorDiv(T("a",e,t,n),T("b",e,t,n))];case"Sub":return[r.sub(T("a",e,t,n),T("b",e,t,n))];case"Minimum":return[r.minimum(T("a",e,t,n),T("b",e,t,n))];case"Maximum":return[r.maximum(T("a",e,t,n),T("b",e,t,n))];case"Pow":return[r.pow(T("a",e,t,n),T("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(T("a",e,t,n),T("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Eq=(e,t,n,r=Ot)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(T("x",e,t,n))];case"Acos":return[r.acos(T("x",e,t,n))];case"Acosh":return[r.acosh(T("x",e,t,n))];case"Asin":return[r.asin(T("x",e,t,n))];case"Asinh":return[r.asinh(T("x",e,t,n))];case"Atan":return[r.atan(T("x",e,t,n))];case"Atan2":return[r.atan2(T("x",e,t,n),T("y",e,t,n))];case"Atanh":return[r.atanh(T("x",e,t,n))];case"Ceil":return[r.ceil(T("x",e,t,n))];case"Complex":return[r.complex(T("real",e,t,n),T("imag",e,t,n))];case"Cos":return[r.cos(T("x",e,t,n))];case"Cosh":return[r.cosh(T("x",e,t,n))];case"Elu":return[r.elu(T("x",e,t,n))];case"Erf":return[r.erf(T("x",e,t,n))];case"Exp":return[r.exp(T("x",e,t,n))];case"Expm1":return[r.expm1(T("x",e,t,n))];case"Floor":return[r.floor(T("x",e,t,n))];case"Log":return[r.log(T("x",e,t,n))];case"Log1p":return[r.log1p(T("x",e,t,n))];case"Imag":return[r.imag(T("x",e,t,n))];case"Neg":return[r.neg(T("x",e,t,n))];case"Reciprocal":return[r.reciprocal(T("x",e,t,n))];case"Real":return[r.real(T("x",e,t,n))];case"Relu":return[r.relu(T("x",e,t,n))];case"Round":return[r.round(T("x",e,t,n))];case"Selu":return[r.selu(T("x",e,t,n))];case"Sigmoid":return[r.sigmoid(T("x",e,t,n))];case"Sin":return[r.sin(T("x",e,t,n))];case"Sign":return[r.sign(T("x",e,t,n))];case"Sinh":return[r.sinh(T("x",e,t,n))];case"Softplus":return[r.softplus(T("x",e,t,n))];case"Sqrt":return[r.sqrt(T("x",e,t,n))];case"Square":return[r.square(T("x",e,t,n))];case"Tanh":return[r.tanh(T("x",e,t,n))];case"Tan":return[r.tan(T("x",e,t,n))];case"ClipByValue":return[r.clipByValue(T("x",e,t,n),T("clipValueMin",e,t,n),T("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(T("x",e,t,n))];case"Rsqrt":return[r.rsqrt(rr(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(T("x",e,t,n),T("alpha",e,t,n))];case"Prelu":return[r.prelu(T("x",e,t,n),T("alpha",e,t,n))];case"IsNan":return[r.isNaN(rr(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(rr(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(rr(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function Ai(e,t,n=""){if(!(typeof e=="number"||typeof t=="number")){N.assert(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){let o=e[r],i=t[r];N.assert(o<0||i<0||o===i,()=>n+` Shapes ${e} and ${t} must match`)}}}function Cq(e){return!(typeof e=="number"||e.some(t=>t<0))}function Nm(e,t,n){let r=mI(e,n),o=!Cq(r);if(o&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&t.forEach(i=>{r=mI(i.shape,r)}),!Cq(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function mI(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);let n=[];for(let r=0;r<e.length;++r){let o=e[r],i=t[r];if(o>=0&&i>=0&&o!==i)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=o>=0?o:i}return n}var gI=class{constructor(t,n,r,o,i,s,a){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Ue(0),Xo(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);let n=this.tensors[t];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(t){return t.map(n=>this.read(n))}write(t,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[t]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Ai(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);r.tensor=n,Xo(n),r.written=!0,this.tensors[t]=r}writeMany(t,n){if(t.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${n.length}.`);t.forEach((r,o)=>this.write(r,n[o]))}gather(t,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(t)t=t.slice(0,this.size());else{t=[];for(let o=0;o<this.size();o++)t.push(o)}if(t.length===0)return So([],[0].concat(this.elementShape));let r=this.readMany(t);return Ai(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Do(r,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(this.size()===0)return So([],[0].concat(this.elementShape));let n=[];for(let o=0;o<this.size();o++)n.push(o);let r=this.readMany(n);return Ai(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),rn(r,0)}scatter(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(t.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${n.shape[0]}`);let r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,ys(n,0))}split(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0,o=t.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);let i=r===0?0:n.size/r,s=[];ze(()=>{n=Q(n,[1,r,i]);for(let u=0;u<t.length;++u){let f=[0,u===0?0:o[u-1],0],d=[1,t[u],i];s[u]=Q(We(n,f,d),this.elementShape)}return s});let a=[];for(let u=0;u<t.length;u++)a[u]=u;this.writeMany(a,s)}};var Am=class e{get id(){return this.idTensor.id}constructor(t,n,r,o=-1){this.tensors=t,this.elementShape=n,this.elementDtype=r,t?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);Ai(n,i.shape,"TensorList shape mismatch: "),Xo(i)}),this.idTensor=Ue(0),this.maxNumElements=o,Xo(this.idTensor)}copy(){return new e([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Ai(t,this.elementShape,"TensorList shape mismatch: ");let o=Nm(this.elementShape,this.tensors,t);return ze(()=>{let i=this.tensors.map(s=>Q(s,o));return Do(i,0)})}popBack(t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=Nm(this.elementShape,this.tensors,t),o=this.tensors.pop();return o.kept=!1,Ai(o.shape,t,"TensorList shape mismatch: "),Q(o,r)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(Ai(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Xo(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);let n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(let r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}getItem(t,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);Ai(this.tensors[t].shape,n,"TensorList shape mismatch: ");let o=Nm(this.elementShape,this.tensors,n);return Q(this.tensors[t],o)}setItem(t,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);Ai(this.elementShape,n.shape,"TensorList shape mismatch: "),Xo(n),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=n}gather(t,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Ai(this.elementShape,r,"TensorList shape mismatch: "),t=t.slice(0,this.size());let o=Nm(this.elementShape,this.tensors,r);return t.length===0?So([],[0].concat(o)):ze(()=>{let i=t.map(s=>Q(this.tensors[s],o));return Do(i,0)})}concat(t,n){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);Ai(this.elementShape,n,"TensorList shape mismatch: ");let r=Nm(this.elementShape,this.tensors,n);return this.size()===0?So([],[0].concat(r)):ze(()=>{let o=this.tensors.map(i=>Q(i,r));return rn(o,0)})}};function Tq(e,t,n){let r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);let o=e.shape.slice(1);Ai(o,t,"TensorList shape mismatch: ");let i=ys(e);return new Am(i,t,r)}function _q(e,t,n,r){return new Am([],e,t,r)}function Iq(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);let o=Math.max(...t);if(r!=null&&r!==-1&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);let i=new Am([],n,e.dtype,r),s=ys(e,0);return t.forEach((a,u)=>{i.setItem(a,s[u])}),i}function Sq(e,t,n){let r=0,o=t.map(f=>(r+=f,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);let i=e.shape.slice(1),s=mI(i,n),a=r===0?0:e.size/r,u=ze(()=>{let f=[];e=Q(e,[1,r,a]);for(let d=0;d<t.length;++d){let m=[0,d===0?0:o[d-1],0],v=[1,t[d],a];f[d]=Q(We(e,m,v),s)}return e.dispose(),f}),c=new Am([],n,e.dtype,t.length);for(let f=0;f<u.length;f++)c.setItem(f,u[f]);return c}var Dq=(e,t,n)=>ne(void 0,null,function*(){switch(e.op){case"If":case"StatelessIf":{let r=T("thenBranch",e,t,n),o=T("elseBranch",e,t,n),i=T("cond",e,t,n),s=T("args",e,t,n);return(yield i.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=T("body",e,t,n),o=T("cond",e,t,n),i=T("args",e,t,n),s=yield n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(f=>f.id),u=yield s[0].data();s.forEach(f=>{!f.kept&&a.indexOf(f.id)===-1&&f.dispose()});let c=i;for(;u[0];){let f=c;c=yield n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);let d=c.map(m=>m.id);f.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&d.indexOf(m.id)===-1&&m.dispose()});let h=yield n.functionMap[o].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);u=yield h[0].data(),h.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&d.indexOf(m.id)===-1&&m.dispose()})}return c}case"LoopCond":{let r=T("pred",e,t,n);return[Ia(r)]}case"Switch":{let r=T("pred",e,t,n),o=T("data",e,t,n);return o.kept||(o=Ia(o)),(yield r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{let r=e.inputNames.find(o=>rr(o,t,n)!==void 0);if(r){let o=rr(r,t,n);return[Ia(o)]}return}case"Enter":{let r=T("frameName",e,t,n),o=T("tensor",e,t,n);return n.enterFrame(r),[Ia(o)]}case"Exit":{let r=T("tensor",e,t,n);return n.exitFrame(),[Ia(r)]}case"NextIteration":{let r=T("tensor",e,t,n);return n.nextIteration(),[Ia(r)]}case"TensorArrayV3":{let r=T("size",e,t,n),o=T("dtype",e,t,n),i=T("elementShape",e,t,n),s=T("dynamicSize",e,t,n),a=T("clearAfterRead",e,t,n),u=T("identicalElementShapes",e,t,n),c=T("name",e,t,n),f=new gI(c,o,r,i,u,s,a);return n.addTensorArray(f),[f.idTensor,Ue(1)]}case"TensorArrayWriteV3":{let r=T("tensorArrayId",e,t,n),o=T("index",e,t,n),i=T("tensor",e,t,n),s=n.getTensorArray(r.id);return s.write(o,i),[s.idTensor]}case"TensorArrayReadV3":{let r=T("tensorArrayId",e,t,n),o=T("index",e,t,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{let r=T("tensorArrayId",e,t,n),o=T("indices",e,t,n),i=T("dtype",e,t,n);return[n.getTensorArray(r.id).gather(o,i)]}case"TensorArrayScatterV3":{let r=T("tensorArrayId",e,t,n),o=T("indices",e,t,n),i=T("tensor",e,t,n),s=n.getTensorArray(r.id);return s.scatter(o,i),[s.idTensor]}case"TensorArrayConcatV3":{let r=T("tensorArrayId",e,t,n),o=n.getTensorArray(r.id),i=T("dtype",e,t,n);return[o.concat(i)]}case"TensorArraySplitV3":{let r=T("tensorArrayId",e,t,n),o=T("tensor",e,t,n),i=T("lengths",e,t,n),s=n.getTensorArray(r.id);return s.split(i,o),[s.idTensor]}case"TensorArraySizeV3":{let r=T("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return[Ue(o.size(),"int32")]}case"TensorArrayCloseV3":{let r=T("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{let r=T("tensorListId",e,t,n),o=T("index",e,t,n),i=T("tensor",e,t,n),s=n.getTensorList(r.id);return s.setItem(o,i),[s.idTensor]}case"TensorListGetItem":{let r=T("tensorListId",e,t,n),o=T("index",e,t,n),i=T("elementShape",e,t,n),s=T("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(o,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=T("indices",e,t,n),o=T("tensor",e,t,n),i=T("elementShape",e,t,n),s=T("numElements",e,t,n),a=Iq(o,r,i,s);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=T("elementShape",e,t,n),o=T("elementDType",e,t,n),i;e.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=T(i,e,t,n),a=e.op==="TensorListReserve"?-1:s,u=_q(r,o,s,a);return n.addTensorList(u),[u.idTensor]}case"TensorListGather":{let r=T("tensorListId",e,t,n),o=T("indices",e,t,n),i=T("elementShape",e,t,n),s=T("elementDType",e,t,n);return[n.getTensorList(r.id).gather(o,s,i)]}case"TensorListStack":{let r=T("tensorListId",e,t,n),o=T("elementShape",e,t,n),i=T("elementDType",e,t,n),s=T("numElements",e,t,n);return[n.getTensorList(r.id).stack(o,i,s)]}case"TensorListFromTensor":{let r=T("tensor",e,t,n),o=T("elementShape",e,t,n),i=T("elementDType",e,t,n),s=Tq(r,o,i);return n.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=T("tensorListId",e,t,n),o=n.getTensorList(r.id),i=T("dtype",e,t,n),s=T("elementShape",e,t,n);return[o.concat(i,s)]}case"TensorListPushBack":{let r=T("tensorListId",e,t,n),o=T("tensor",e,t,n),i=n.getTensorList(r.id);return i.pushBack(o),[i.idTensor]}case"TensorListPopBack":{let r=T("tensorListId",e,t,n),o=T("elementShape",e,t,n),i=T("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(o,i)]}case"TensorListSplit":{let r=T("tensor",e,t,n),o=T("elementShape",e,t,n),i=T("lengths",e,t,n),s=Sq(r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=T("tensorListId",e,t,n),o=n.getTensorList(r.id);return[Ue(o.size(),"int32")]}case"TensorListResize":{let r=T("tensorListId",e,t,n),o=T("size",e,t,n),s=n.getTensorList(r.id).resize(o);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}});function Nq(e,t,n){let[r,o]=T("fusedOps",e,t,n),i=r==="biasadd",s=!i,a=o==="prelu",u=r==="fusedbatchnorm",c=T("numArgs",e,t,n);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let f=T("strides",e,t,n),d=o0(e,t,n),h=T("dataFormat",e,t,n).toUpperCase(),m=T("dilations",e,t,n),[v,x]=T("args",e,t,n);s&&(x=v,v=void 0);let b=T("leakyreluAlpha",e,t,n);return{stride:f,pad:d,dataFormat:h,dilations:m,biasArg:v,preluArg:x,activationFunc:o,leakyreluAlpha:b}}var Aq=(e,t,n,r=Ot)=>{switch(e.op){case"Conv1D":{let o=T("stride",e,t,n),i=T("pad",e,t,n),s=T("dataFormat",e,t,n).toUpperCase(),a=T("dilation",e,t,n);return[r.conv1d(T("x",e,t,n),T("filter",e,t,n),o,i,s,a)]}case"Conv2D":{let o=T("strides",e,t,n),i=o0(e,t,n),s=T("dataFormat",e,t,n).toUpperCase(),a=T("dilations",e,t,n);return[r.conv2d(T("x",e,t,n),T("filter",e,t,n),[o[1],o[2]],i,s,[a[1],a[2]])]}case"_FusedConv2D":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:u,preluArg:c,activationFunc:f,leakyreluAlpha:d}=Nq(e,t,n);return[r.fused.conv2d({x:T("x",e,t,n),filter:T("filter",e,t,n),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:u,activation:f,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:u,preluArg:c,activationFunc:f,leakyreluAlpha:d}=Nq(e,t,n);return[r.fused.depthwiseConv2d({x:T("x",e,t,n),filter:T("filter",e,t,n),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:u,activation:f,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let o=T("outputShape",e,t,n),i=T("strides",e,t,n),s=o0(e,t,n);return[r.conv2dTranspose(T("x",e,t,n),T("filter",e,t,n),o,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let o=T("strides",e,t,n),i=o0(e,t,n),s=T("dilations",e,t,n),a=T("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(T("input",e,t,n),T("filter",e,t,n),[o[1],o[2]],i,a,[s[1],s[2]])]}case"Conv3D":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("dataFormat",e,t,n).toUpperCase(),a=T("dilations",e,t,n);return[r.conv3d(T("x",e,t,n),T("filter",e,t,n),[o[1],o[2],o[3]],i,s,[a[1],a[2],a[3]])]}case"AvgPool":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("kernelSize",e,t,n);return[r.avgPool(T("x",e,t,n),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPool":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("kernelSize",e,t,n);return[r.maxPool(T("x",e,t,n),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPoolWithArgmax":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("kernelSize",e,t,n),a=T("includeBatchInIndex",e,t,n),{result:u,indexes:c}=r.maxPoolWithArgmax(T("x",e,t,n),[s[1],s[2]],[o[1],o[2]],i,a);return[u,c]}case"AvgPool3D":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("kernelSize",e,t,n);return[r.avgPool3d(T("x",e,t,n),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"MaxPool3D":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("kernelSize",e,t,n);return[r.maxPool3d(T("x",e,t,n),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"Dilation2D":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("dilations",e,t,n),a=o[1],u=o[2],c=s[1],f=s[2];return[r.dilation2d(T("x",e,t,n),T("filter",e,t,n),[a,u],i,[c,f],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Rq=(e,t,n,r=Ot)=>{switch(e.op){case"Fill":{let o=T("shape",e,t,n),i=T("dtype",e,t,n),s=T("value",e,t,n);return[r.fill(o,s,i)]}case"LinSpace":{let o=T("start",e,t,n),i=T("stop",e,t,n),s=T("num",e,t,n);return[r.linspace(o,i,s)]}case"Multinomial":{let o=T("logits",e,t,n),i=T("numSamples",e,t,n),s=T("seed",e,t,n);return[r.multinomial(o,i,s)]}case"OneHot":{let o=T("indices",e,t,n),i=T("depth",e,t,n),s=T("onValue",e,t,n),a=T("offValue",e,t,n),u=T("dtype",e,t,n);return[r.oneHot(o,i,s,a,u)]}case"Ones":return[r.ones(T("shape",e,t,n),T("dtype",e,t,n))];case"OnesLike":return[r.onesLike(T("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(T("shape",e,t,n),T("dtype",e,t,n),T("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(T("shape",e,t,n),T("minval",e,t,n),T("maxval",e,t,n),T("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(T("shape",e,t,n),T("minval",e,t,n),T("maxval",e,t,n),T("seed",e,t,n))];case"Range":{let o=T("start",e,t,n),i=T("stop",e,t,n),s=T("step",e,t,n);return[r.range(o,i,s,T("dtype",e,t,n))]}case"TruncatedNormal":{let o=T("shape",e,t,n),i=T("mean",e,t,n),s=T("stdDev",e,t,n),a=T("seed",e,t,n);return[r.truncatedNormal(o,i,s,T("dtype",e,t,n),a)]}case"Zeros":return[r.zeros(T("shape",e,t,n),T("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(T("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function zF(e,t,n){let r=T("boxes",e,t,n),o=T("scores",e,t,n),i=T("maxOutputSize",e,t,n),s=T("iouThreshold",e,t,n),a=T("scoreThreshold",e,t,n),u=T("softNmsSigma",e,t,n);return{boxes:r,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a,softNmsSigma:u}}var kq=(i,s,a,u,...c)=>ne(void 0,[i,s,a,u,...c],function*(e,t,n,r,o=Ot){switch(e.op){case"NonMaxSuppressionV5":{let{boxes:f,scores:d,maxOutputSize:h,iouThreshold:m,scoreThreshold:v,softNmsSigma:x}=zF(e,t,n),b=yield o.image.nonMaxSuppressionWithScoreAsync(f,d,h,m,v,x);return[b.selectedIndices,b.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:f,scores:d,maxOutputSize:h,iouThreshold:m,scoreThreshold:v}=zF(e,t,n),x=T("padToMaxOutputSize",e,t,n),b=yield o.image.nonMaxSuppressionPaddedAsync(f,d,h,m,v,x);return[b.selectedIndices,b.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:f,scores:d,maxOutputSize:h,iouThreshold:m,scoreThreshold:v}=zF(e,t,n);return[yield o.image.nonMaxSuppressionAsync(f,d,h,m,v)]}case"Where":{let f=o.cast(T("condition",e,t,n),"bool"),d=[yield o.whereAsync(f)];return f.dispose(),d}case"ListDiff":return o.setdiff1dAsync(T("x",e,t,n),T("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}});var Oq=(e,t,n,r=Ot)=>{switch(e.op){case"LowerBound":{let o=T("sortedSequence",e,t,n),i=T("values",e,t,n);return[r.lowerBound(o,i)]}case"TopKV2":{let o=T("x",e,t,n),i=T("k",e,t,n),s=T("sorted",e,t,n),a=r.topk(o,i,s);return[a.values,a.indices]}case"UpperBound":{let o=T("sortedSequence",e,t,n),i=T("values",e,t,n);return[r.upperBound(o,i)]}case"Unique":{let o=T("x",e,t,n),i=r.unique(o);return[i.values,i.indices]}case"UniqueV2":{let o=T("x",e,t,n),i=T("axis",e,t,n),s=r.unique(o,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Mq=(e,t,n,r=Ot)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let o=T("default",e,t,n);return[rr(e.name,t,n)||o];case"Placeholder":return[rr(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let f=T("x",e,t,n);return[Ia(f)]}case"IdentityN":return T("x",e,t,n).map(f=>Ia(f));case"Snapshot":let i=T("x",e,t,n);return[Ia(i)];case"Shape":return[r.tensor1d(T("x",e,t,n).shape,"int32")];case"ShapeN":return T("x",e,t,n).map(f=>r.tensor1d(f.shape));case"Size":return[r.scalar(T("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(T("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=T("x",e,t,n),a=T("data",e,t,n),u=T("message",e,t,n),c=T("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let f=0;f<a.length;f++)console.log(Array.prototype.slice.call(a[f].dataSync()).slice(0,c));return[s];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var yI=class{get id(){return this.handle.id}constructor(t,n){this.keyDType=t,this.valueDType=n,this.handle=Ue(0),this.tensorMap=new Map,Xo(this.handle)}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ue(this.size(),"int32")}import(t,n){return ne(this,null,function*(){this.checkKeyAndValueTensor(t,n);let r=yield t.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),ze(()=>{let o=ys(n),i=r.length,s=o.length;N.assert(i===s,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${s} elements.`);for(let a=0;a<i;a++){let u=r[a],c=o[a];Xo(c),this.tensorMap.set(u,c)}return this.handle})})}find(t,n){return ne(this,null,function*(){this.checkKeyAndValueTensor(t,n);let r=yield t.data();return ze(()=>{let o=[];for(let i=0;i<r.length;i++){let s=r[i],a=this.findWithDefault(s,n);o.push(a)}return Do(o)})})}findWithDefault(t,n){let r=this.tensorMap.get(t);return r??n}checkKeyAndValueTensor(t,n){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}};var Fq=(e,t,n,r)=>ne(void 0,null,function*(){switch(e.op){case"HashTable":case"HashTableV2":{let o=r.getHashTableHandleByName(e.name);if(o!=null)return[o];{let i=T("keyDType",e,t,n),s=T("valueDType",e,t,n),a=new yI(i,s);return r.addHashTable(e.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let o=T("tableHandle",e,t,n,r),i=T("keys",e,t,n),s=T("values",e,t,n);return[yield r.getHashTableById(o.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let o=T("tableHandle",e,t,n,r),i=T("keys",e,t,n),s=T("defaultValue",e,t,n);return[yield r.getHashTableById(o.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let o=T("tableHandle",e,t,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}});var Pq=(e,t,n,r=Ot)=>{switch(e.op){case"ResizeBilinear":{let o=T("images",e,t,n),i=T("size",e,t,n),s=T("alignCorners",e,t,n),a=T("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(o,[i[0],i[1]],s,a)]}case"ResizeNearestNeighbor":{let o=T("images",e,t,n),i=T("size",e,t,n),s=T("alignCorners",e,t,n),a=T("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(o,[i[0],i[1]],s,a)]}case"CropAndResize":{let o=T("image",e,t,n),i=T("boxes",e,t,n),s=T("boxInd",e,t,n),a=T("cropSize",e,t,n),u=T("method",e,t,n),c=T("extrapolationValue",e,t,n);return[r.image.cropAndResize(o,i,s,a,u,c)]}case"ImageProjectiveTransformV3":{let o=T("images",e,t,n),i=T("transforms",e,t,n),s=T("outputShape",e,t,n),a=T("fillValue",e,t,n),u=T("interpolation",e,t,n),c=T("fillMode",e,t,n);return[r.image.transform(o,i,u.toLowerCase(),c.toLowerCase(),a,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var $q=(e,t,n,r=Ot)=>{switch(e.op){case"Equal":return[r.equal(T("a",e,t,n),T("b",e,t,n))];case"NotEqual":return[r.notEqual(T("a",e,t,n),T("b",e,t,n))];case"Greater":return[r.greater(T("a",e,t,n),T("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(T("a",e,t,n),T("b",e,t,n))];case"Less":return[r.less(T("a",e,t,n),T("b",e,t,n))];case"LessEqual":return[r.lessEqual(T("a",e,t,n),T("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(T("a",e,t,n),T("b",e,t,n))];case"LogicalNot":return[r.logicalNot(T("a",e,t,n))];case"LogicalOr":return[r.logicalOr(T("a",e,t,n),T("b",e,t,n))];case"Select":case"SelectV2":return[r.where(T("condition",e,t,n),T("a",e,t,n),T("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(T("a",e,t,n),T("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Lq=(e,t,n,r=Ot)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(T("a",e,t,n),T("b",e,t,n),T("transposeA",e,t,n),T("transposeB",e,t,n))];case"Einsum":return[r.einsum(T("equation",e,t,n),...T("tensors",e,t,n))];case"Transpose":return[r.transpose(T("x",e,t,n),T("perm",e,t,n))];case"_FusedMatMul":let[o,i]=T("fusedOps",e,t,n),s=o==="biasadd",a=i==="prelu",u=T("numArgs",e,t,n),c=T("leakyreluAlpha",e,t,n);if(s){if(a&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[f,d]=T("args",e,t,n);return[r.fused.matMul({a:T("a",e,t,n),b:T("b",e,t,n),transposeA:T("transposeA",e,t,n),transposeB:T("transposeB",e,t,n),bias:f,activation:i,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(T("a",e,t,n),T("numLower",e,t,n),T("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Vq=(e,t,n,r=Ot)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(T("x",e,t,n),T("axis",e,t,n),T("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(T("x",e,t,n),T("mean",e,t,n),T("variance",e,t,n),T("offset",e,t,n),T("scale",e,t,n),T("epsilon",e,t,n))];case"FusedBatchNormV3":return[r.batchNorm(T("x",e,t,n),T("mean",e,t,n),T("variance",e,t,n),T("offset",e,t,n),T("scale",e,t,n),T("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(T("x",e,t,n),T("radius",e,t,n),T("bias",e,t,n),T("alpha",e,t,n),T("beta",e,t,n))];case"Softmax":return[r.softmax(T("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(T("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Bq=(e,t,n,r=Ot)=>{switch(e.op){case"RaggedGather":{let{outputNestedSplits:o,outputDenseValues:i}=r.raggedGather(T("paramsNestedSplits",e,t,n),T("paramsDenseValues",e,t,n),T("indices",e,t,n),T("outputRaggedRank",e,t,n));return o.concat(i)}case"RaggedRange":{let{rtNestedSplits:o,rtDenseValues:i}=r.raggedRange(T("starts",e,t,n),T("limits",e,t,n),T("splits",e,t,n));return[o,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(T("shape",e,t,n),T("values",e,t,n),T("defaultValue",e,t,n),T("rowPartitionTensors",e,t,n),T("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Uq=(e,t,n,r=Ot)=>{switch(e.op){case"Max":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.max(T("x",e,t,n),a,u)]}case"Mean":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.mean(T("x",e,t,n),a,u)]}case"Min":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.min(T("x",e,t,n),a,u)]}case"Sum":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.sum(T("x",e,t,n),a,u)]}case"All":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.all(T("x",e,t,n),a,u)]}case"Any":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.any(T("x",e,t,n),a,u)]}case"ArgMax":{let a=T("axis",e,t,n);return[r.argMax(T("x",e,t,n),a)]}case"ArgMin":{let a=T("axis",e,t,n);return[r.argMin(T("x",e,t,n),a)]}case"Prod":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.prod(T("x",e,t,n),a,u)]}case"Cumprod":{let a=T("axis",e,t,n),u=T("exclusive",e,t,n),c=T("reverse",e,t,n);return[r.cumprod(T("x",e,t,n),a,u,c)]}case"Cumsum":{let a=T("axis",e,t,n),u=T("exclusive",e,t,n),c=T("reverse",e,t,n);return[r.cumsum(T("x",e,t,n),a,u,c)]}case"Bincount":let o=T("x",e,t,n),i=T("weights",e,t,n),s=T("size",e,t,n);return[r.bincount(o,i,s)];case"DenseBincount":{let a=T("x",e,t,n),u=T("weights",e,t,n),c=T("size",e,t,n),f=T("binaryOutput",e,t,n);return[r.denseBincount(a,u,c,f)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Gq=(e,t,n,r=Ot)=>{switch(e.op){case"ConcatV2":case"Concat":{let o=T("n",e,t,n),i=T("axis",e,t,n),s=T("tensors",e,t,n);return s=s.slice(0,o),[r.concat(s,i)]}case"Gather":{let o=T("x",e,t,n),i=T("indices",e,t,n);return[r.gather(o,r.cast(i,"int32"),0)]}case"GatherV2":{let o=T("axis",e,t,n),i=T("batchDims",e,t,n),s=T("x",e,t,n),a=T("indices",e,t,n);return[r.gather(s,r.cast(a,"int32"),o,i)]}case"Reverse":{let o=T("dims",e,t,n),i=[];for(let a=0;a<o.length;a++)o[a]&&i.push(a);let s=T("x",e,t,n);return[r.reverse(s,i)]}case"ReverseV2":{let o=T("axis",e,t,n),i=T("x",e,t,n);return[r.reverse(i,o)]}case"Slice":{let o=T("begin",e,t,n),i=T("size",e,t,n);return[r.slice(T("x",e,t,n),o,i)]}case"StridedSlice":{let o=T("begin",e,t,n),i=T("end",e,t,n),s=T("strides",e,t,n),a=T("beginMask",e,t,n),u=T("endMask",e,t,n),c=T("ellipsisMask",e,t,n),f=T("newAxisMask",e,t,n),d=T("shrinkAxisMask",e,t,n),h=T("x",e,t,n);return[r.stridedSlice(h,o,i,s,a,u,c,f,d)]}case"Pack":return ze(()=>{let o=T("axis",e,t,n),i=T("tensors",e,t,n),s=i[0].shape,a=r.squeeze(i[0]).shape,u=i.map(c=>{let f=N.arraysEqual(c.shape,s);if(!f&&!N.arraysEqual(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return f?c:r.reshape(c,s)});return[r.stack(u,o)]});case"Unpack":{let o=T("axis",e,t,n),i=T("tensor",e,t,n);return r.unstack(i,o)}case"Tile":{let o=T("reps",e,t,n);return[r.tile(T("x",e,t,n),o)]}case"Split":case"SplitV":{let o=T("axis",e,t,n),i=T("numOrSizeSplits",e,t,n),s=T("x",e,t,n);return r.split(s,i,o)}case"ScatterNd":{let o=T("indices",e,t,n),i=T("values",e,t,n),s=T("shape",e,t,n);return[r.scatterND(o,i,s)]}case"GatherNd":{let o=T("x",e,t,n),i=T("indices",e,t,n);return[r.gatherND(o,i)]}case"SparseToDense":{let o=T("sparseIndices",e,t,n),i=T("outputShape",e,t,n),s=T("sparseValues",e,t,n),a=T("defaultValue",e,t,n);return[r.sparseToDense(o,s,i,s.dtype===a.dtype?a:r.cast(a,s.dtype))]}case"TensorScatterUpdate":{let o=T("indices",e,t,n),i=T("values",e,t,n),s=T("tensor",e,t,n);return[r.tensorScatterUpdate(s,o,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var jq=(e,t,n,r=Ot)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:o,outputValues:i,emptyRowIndicator:s,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(T("indices",e,t,n),T("values",e,t,n),T("denseShape",e,t,n),T("defaultValue",e,t,n));return[o,i,s,a]}case"SparseReshape":{let{outputIndices:o,outputShape:i}=r.sparse.sparseReshape(T("inputIndices",e,t,n),T("inputShape",e,t,n),T("newShape",e,t,n));return[o,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(T("data",e,t,n),T("indices",e,t,n),T("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(T("data",e,t,n),T("indices",e,t,n),T("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var zq=(e,t,n,r=Ot)=>{switch(e.op){case"FFT":return[r.fft(T("x",e,t,n))];case"IFFT":return[r.ifft(T("x",e,t,n))];case"RFFT":return[r.rfft(T("x",e,t,n))];case"IRFFT":return[r.irfft(T("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Hq=(e,t,n,r=Ot)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(T("input",e,t,n),T("pattern",e,t,n),T("rewrite",e,t,n),T("replaceGlobal",e,t,n))];case"StringNGrams":{let{nGrams:o,nGramsSplits:i}=r.string.stringNGrams(T("data",e,t,n),T("dataSplits",e,t,n),T("separator",e,t,n),T("nGramWidths",e,t,n),T("leftPad",e,t,n),T("rightPad",e,t,n),T("padWidth",e,t,n),T("preserveShortSequences",e,t,n));return[o,i]}case"StringSplit":{let{indices:o,values:i,shape:s}=r.string.stringSplit(T("input",e,t,n),T("delimiter",e,t,n),T("skipEmpty",e,t,n));return[o,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(T("input",e,t,n),T("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var Wq=(e,t,n,r=Ot)=>{switch(e.op){case"Cast":return[r.cast(T("x",e,t,n),T("dtype",e,t,n))];case"ExpandDims":{let o=T("axis",e,t,n);return[r.expandDims(T("x",e,t,n),o)]}case"Squeeze":{let o=T("axis",e,t,n);return[r.squeeze(T("x",e,t,n),o)]}case"Reshape":return[r.reshape(T("x",e,t,n),T("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(T("x",e,t,n),T("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(T("x",e,t,n),T("padding",e,t,n),T("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(T("x",e,t,n),T("padding",e,t,n),T("constantValue",e,t,n))];case"SpaceToBatchND":{let o=T("blockShape",e,t,n),i=T("paddings",e,t,n);return[r.spaceToBatchND(T("x",e,t,n),o,i)]}case"BatchToSpaceND":{let o=T("blockShape",e,t,n),i=T("crops",e,t,n);return[r.batchToSpaceND(T("x",e,t,n),o,i)]}case"DepthToSpace":{let o=T("blockSize",e,t,n),i=T("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(T("x",e,t,n),o,i)]}case"BroadcastTo":return[r.broadcastTo(T("x",e,t,n),T("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(T("s0",e,t,n),T("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function HF(e,t,n,r,o=ze){let i=((s,a,u)=>{switch(s.category){case"arithmetic":return o(()=>wq(s,a,u));case"basic_math":return o(()=>Eq(s,a,u));case"control":return Dq(s,a,u);case"convolution":return o(()=>Aq(s,a,u));case"creation":return o(()=>Rq(s,a,u));case"dynamic":return kq(s,a,u);case"evaluation":return o(()=>Oq(s,a,u));case"image":return o(()=>Pq(s,a,u));case"graph":return o(()=>Mq(s,a,u));case"logical":return o(()=>$q(s,a,u));case"matrices":return o(()=>Lq(s,a,u));case"normalization":return o(()=>Vq(s,a,u));case"ragged":return o(()=>Bq(s,a,u));case"reduction":return o(()=>Uq(s,a,u));case"slice_join":return o(()=>Gq(s,a,u));case"sparse":return o(()=>jq(s,a,u));case"spectral":return o(()=>zq(s,a,u));case"string":return o(()=>Hq(s,a,u));case"transformation":return o(()=>Wq(s,a,u));case"hash_table":return Fq(s,a,u,r);case"custom":let c=nI(s.op);if(c&&c.customExecutor)return c.customExecutor(new hI(s,a,u));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return N.isPromise(i)?i.then(s=>[].concat(s)):[].concat(i)}var s0=class{constructor(t={},n={},r={},o={},i){this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=o,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,n){return{id:t,frameName:n,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let t=[];for(let n=0;n<this.contexts.length-1;n++){let r=this.contexts.slice(0,this.contexts.length-n);t.push(this.contextIdforContexts(r))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(let n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(t);for(let n in this.tensorListMap)this.tensorListMap[n].clearAndClose(t)}};function WF(e,t,n,r){let o=new Set,i=[],s=null,a=null,u=new Set,c=new Set(Object.keys(e).map(h=>No(h)[0]));r=r||[];let f=new Set(r.map(h=>No(h.name)[0])),d=[...t];for(;d.length>0;){let h=d.pop();if((Bl(h)||lIe(h)||fIe(h))&&s==null&&(s=h,a=s.children.map(m=>m.name).filter(m=>o.has(m))),o.add(h.name),n[h.name]==null&&!c.has(h.name)&&!f.has(h.name)){if(h.inputs.length===0){i.push(h.name);continue}h.inputs.forEach(m=>{u.has(m.name)||(u.add(m.name),d.push(m))})}}return{inputs:e,outputs:t,usedNodes:o,missingInputs:i,dynamicNode:s,syncInputs:a}}function qq(e,t){let{usedNodes:n,inputs:r}=t,o=Object.keys(r).map(b=>No(b)[0]).map(b=>e.nodes[b]),i=e.initNodes||[],s=b=>n.has(typeof b=="string"?b:b.name);function a(b){return[...new Map(b.map(C=>[C.name,C])).values()]}let u=a([...o,...e.weights,...i]).filter(s),c=a([...u,...Object.values(e.nodes)]).filter(s),f=new Map(c.map(b=>[b.name,b])),d={};for(let b of c){d[b.name]=d[b.name]||0;for(let C of b.children)s(C)||(d[C.name]=Number.POSITIVE_INFINITY),d[C.name]=(d[C.name]||0)+1}let h=Object.entries(d).filter(([,b])=>b===0).map(([b])=>b),m=[...h];for(;h.length>0;){let b=h.pop(),C=f.get(b);for(let D of C.children.filter(s))--d[D.name]===0&&(m.push(D.name),h.push(D.name))}let v=m.map(b=>f.get(b)),x=iIe(v,u);return sIe(x,u),x}function iIe(e,t){let n=new Map(e.map(s=>[s.name,s])),r=t.map(s=>s.name),o=new Set(r);for(;r.length>0;){let s=r.pop(),a=n.get(s);for(let u of a.children)!n.has(u.name)||o.has(u.name)||(o.add(u.name),r.push(u.name))}return e.filter(s=>o.has(s.name))}var Rm=class extends Error{constructor(t){super(`NodesExecutionOrderError: ${t}`)}};function sIe(e,t){let n=new Map(e.map((a,u)=>[a.name,u])),r=new Set(t.map(a=>a.name)),o=a=>r.has(typeof a=="string"?a:a.name),i=new Set(e.map(a=>a.name)),s=a=>i.has(typeof a=="string"?a:a.name);for(let a of e){for(let u of a.children.filter(s)){if(!n.has(u.name))throw new Rm(`Child ${u.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(u.name))throw new Rm(`Node ${a.name} is scheduled to run after its child ${u.name}.`)}if(!o(a))for(let u of a.inputs){if(!n.has(u.name))throw new Rm(`Input ${u.name} of node ${a.name} is unreachable.`);if(n.get(u.name)>n.get(a.name))throw new Rm(`Node ${a.name} is scheduled to run before its input ${u.name}.`)}}}function Kq(e){let t=new Map(e.map((a,u)=>[a.name,u])),n=Number.MAX_SAFE_INTEGER,r=e.map((a,u)=>Bl(a)?n:u),o=a=>{let u=r[t.get(a.name)];return u??-1},i=e.map((a,u)=>a.children.map(o).reduce((c,f)=>Math.max(c,f),r[u])),s=new Map;for(let a=0;a<e.length;++a){let u=i[a];if(u===n)continue;let c=e[a],f=e[u];s.has(f.name)||s.set(f.name,[]),s.get(f.name).push(c)}return s}var aIe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),uIe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),cIe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Bl(e){return aIe.has(e.op)}function lIe(e){return uIe.has(e.op)}function fIe(e){return cIe.has(e.op)}var a0=class e{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){let n=Object.keys(t).map(r=>t[r].map(o=>o.id));this._weightIds=[].concat(...n),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{let n=t.signatureKey||t.name;return t.defaultOutput?`${n}:${t.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((t,n)=>(t[n]=this._functions[n].signature,t),{})}constructor(t,n){this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(r=>{this._functionExecutorMap[r]=new e(t.functions[r],this)})}getCompilationKey(t,n){let r=t.map(i=>i.name).sort(),o=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(t,n){let r=WF(t,n,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:i,syncInputs:s}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(o.length>0){let c=n.map(d=>d.name),f=Object.keys(t);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${f}]. Missing the following inputs: [${o}]`)}let a=qq(this.graph,r),u=Kq(a);return{orderedNodes:a,nodeLiveUntilMap:u}}cloneAndKeepTensor(t){if(t==null)return null;let n=t.clone();return Xo(n),n}cloneTensorList(t){return t?t.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(t,n){this.disposeIntermediateTensors(),t=this.mapInputs(t);let r=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n);let o=r.map(h=>this.graph.nodes[No(h)[0]]),i=n.map(h=>No(h)[0]),s=new Set(i),a=i.map(h=>this.graph.nodes[h]);a.length===0&&(a=this._outputs);let u=this.getCompilationKey(o,a),c=this.compiledMap.get(u);c==null&&(c=this.compile(t,a),this.compiledMap.set(u,c));try{this.keepIntermediateTensors=z().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}let f={},d={};return ze(()=>{let h=new s0(this.weightMap,f,d,this.functionExecutorMap,this.parseNodeNameCache),m=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(C=>{let[D,O]=No(C,h),F=[];F[O]=t[C],m[D]=F,this.keepIntermediateTensors&&(this.clonedTensorsMap[D]=this.cloneTensorList(F))});let v=this.getFrozenTensorIds(m),{orderedNodes:x,nodeLiveUntilMap:b}=c;for(let C of x){if(m[C.name])continue;let D=HF(C,m,h,this._resourceManager);if(N.isPromise(D))throw new Error(`The execution of the op '${C.op}' returned a promise. Please use model.executeAsync() instead.`);m[C.name]=D,this.keepIntermediateTensors&&(this.clonedTensorsMap[C.name]=this.cloneTensorList(D)),this.checkTensorForDisposalWithNodeLiveUntilInfo(C,m,h,v,s,b.get(C.name))}return this.parent==null&&h.dispose(v),n.map(C=>rr(C,m,h))})}getFrozenTensorIds(t){let n=[].concat.apply([],Object.keys(t).map(r=>t[r]).map(r=>r.map(o=>o.id)));return new Set(n)}checkTensorForDisposal(t,n,r,o,i,s,a){if(!(Bl(n)||s.has(t))){for(let u of r[t])u!=null&&(a[u.id]=(a[u.id]||0)+n.children.length);for(let u of n.inputs){if(Bl(u))continue;let c=CF(u.name,r,o);if(c!=null)for(let f of c){if(!f||f.kept||i.has(f.id))continue;let d=a[f.id];d===1?(f.dispose(),delete a[f.id]):d!=null&&a[f.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,n,r,o,i,s){function a(u){return Bl(u)||i.has(u.name)}if(!(Bl(t)||s==null))for(let u of s){if(a(u))continue;let c=CF(u.name,n,r);for(let f of c)!f||f.kept||o.has(f.id)||f.dispose()}}executeAsync(t,n){return ne(this,null,function*(){return this._executeAsync(t,n)})}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(let n of t)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(s,a){return ne(this,arguments,function*(t,n,r=!1,o={},i={}){this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=z().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(v){this.keepIntermediateTensors=!1,console.warn(v.message)}let u=new s0(this.weightMap,o,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let c=yield this.executeWithControlFlow(t,u,n,r),f=n.map(v=>rr(v,c,u)),d=f.map(v=>v.id),h=Object.keys(t).map(v=>t[v].id),m=new Set([...d,...h,...this.weightIds]);return Object.values(c).forEach(v=>{v.forEach(x=>{x&&!x.isDisposed&&!m.has(x.id)&&x.dispose()})}),this.parent==null&&u.dispose(m),f})}executeFunctionAsync(t,n,r){return ne(this,null,function*(){let o=t.reduce((i,s,a)=>(i[this.inputs[a].name]=s,i),{});return this._executeAsync(o,this.outputNodes,!0,n,r)})}executeWithControlFlow(t,n,r,o){return ne(this,null,function*(){let i=Object.keys(t),s=i.map(F=>this.graph.nodes[No(F)[0]]),a=r.map(F=>No(F)[0]),u=new Set(a),c=a.map(F=>this.graph.nodes[F]);c.length===0&&(c=this._outputs);let{usedNodes:f,missingInputs:d,dynamicNode:h,syncInputs:m}=WF(t,c,this.weightMap,this._initNodes),v=[...s,...this.graph.weights,...this._initNodes||[]].map(F=>({node:F,contexts:n.currentContext})),x=Object.assign({},this.weightMap);Object.keys(t).forEach(F=>{let[B,H]=No(F),X=[];X[H]=t[F],x[B]=X});let b={},C=this.getFrozenTensorIds(x),D={};for(;v.length>0;){let F=this.processStack(s,v,n,x,D,C,u,b,f);yield Promise.all(F)}h==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let O=c.filter(F=>!Bl(F)&&!rr(F.name,x,n)).map(F=>F.name);if(O.length>0){let F="";throw h!=null&&(F=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${m}]`),new Error(`Cannot compute the outputs [${O}] from the provided inputs [${i}]. Consider providing the following inputs: [${d}]. ${F}`)}return x})}processStack(t,n,r,o,i,s,a,u,c){let f=[];for(;n.length>0;){let d=n.pop();r.currentContext=d.contexts;let h="";if(d.node.op==="Enter"&&T("isConstant",d.node,o,r)&&([h]=_a(d.node.name,r)),o[d.node.name]==null){let m=HF(d.node,o,r,this._resourceManager);h||([h]=_a(d.node.name,r));let v=r.currentContext;N.isPromise(m)?f.push(m.then(x=>(o[h]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(x)),r.currentContext=v,this.checkTensorForDisposal(h,d.node,o,r,s,a,u),this.processChildNodes(d.node,n,r,o,i,c),x))):(o[h]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(m)),this.checkTensorForDisposal(h,d.node,o,r,s,a,u),this.processChildNodes(d.node,n,r,o,i,c))}else this.processChildNodes(d.node,n,r,o,i,c)}return f}processChildNodes(t,n,r,o,i,s){t.children.forEach(a=>{let[u]=_a(a.name,r);i[u]||!s.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!rr(c,o,r))&&(i[u]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!rr(c,o,r))&&(i[u]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(n=>n.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(n=>{let r=t[n],[o]=No(n),i=this.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){let s=i.attrParams.shape.value,a=s.length===r.shape.length&&r.shape.every((u,c)=>s[c]===-1||s[c]===u);N.assert(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&N.assert(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(t){var n,r;let o={};for(let i in t){let s=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];s!=null?o[s.name]=t[i]:o[i]=t[i]}return o}checkInputs(t){let n=Object.keys(t).filter(r=>{let[o]=No(r);return this.graph.nodes[o]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(t){return t.map(n=>{var r,o;let i=(o=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||o===void 0?void 0:o[n];return i!=null?i.name:n},{})}checkOutputs(t){t.forEach(n=>{let[r]=No(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}};var vI=class{constructor(t={},n={}){this.hashTableNameToHandle=t,this.hashTableMap=n}addHashTable(t,n){this.hashTableNameToHandle[t]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(let t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(let t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}};var dIe="?tfjs-format=file",pIe="model.json",xI=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,n={},r=n0){this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new vI}findIOHandler(){let t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{let n=this.io.getLoadHandlers(t,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[t]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let t=this.handler.load();return N.isPromise(t)?t.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(t)}loadSync(t){let n=this.io.decodeWeights(t.weightData,t.weightSpecs);return this.loadWithWeightMap(t,n)}loadStreaming(t){return ne(this,null,function*(){if(t.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let n=yield XT(t.getWeightStream(),t.weightSpecs);return this.loadWithWeightMap(t,n)})}loadWithWeightMap(t,n){this.artifacts=t;let r=this.artifacts.modelTopology,o=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let i=this.artifacts.userDefinedMetadata;i.signature!=null&&(o=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=o,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new a0(i0.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){let i=i0.Instance.transformGraph(t.modelInitializer);this.initializer=new a0(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}save(t,n){return ne(this,null,function*(){if(typeof t=="string"){let r=this.io.getSaveHandlers(t);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${t}'`);t=r[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)})}addStructuredOutputNames(t){if(this.structuredOutputKeys){let n=t instanceof Qt?[t]:t,r={};return n.forEach((o,i)=>r[this.structuredOutputKeys[i]]=o),r}return t}predict(t,n){let r=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(r)}predictAsync(t,n){return ne(this,null,function*(){let r=yield this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(r)})}normalizeInputs(t){var n;if(!(t instanceof Qt)&&!Array.isArray(t)){let i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(let s in i){let a=i[s];a.resourceId!=null&&(t[s]=this.resourceIdToCapturedInput[a.resourceId])}return t}t=Array.isArray(t)?t:[t];let r=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${t.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((i,s)=>{var a,u,c;let f=(c=(u=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||u===void 0?void 0:u[s])===null||c===void 0?void 0:c.resourceId;return f!=null?i[s]=this.resourceIdToCapturedInput[f]:i[s]=t[o++],i},{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){return ne(this,null,function*(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))})}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){let n=this.initializerSignature.outputs,r=Object.keys(n);for(let o=0;o<r.length;o++){let i=r[o],s=n[i];this.resourceIdToCapturedInput[s.resourceId]=t[o]}}}execute(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);let r=this.executor.execute(t,n);return r.length>1?r:r[0]}executeAsync(t,n){return ne(this,null,function*(){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(yield this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);let r=yield this.executor.executeAsync(t,n);return r.length>1?r:r[0]})}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((n,r)=>(n[r]=[t[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Wt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};function bI(r){return ne(this,arguments,function*(e,t={},n=n0){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=hIe(e));let o=new xI(e,t,n);return yield o.load(),o})}function hIe(e){return e.endsWith("/")||(e=e+"/"),`${e}${pIe}${dIe}`}var Ao=function(){return Ao=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ao.apply(this,arguments)};function Sa(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(c){try{u(r.next(c))}catch(f){i(f)}}function a(c){try{u(r.throw(c))}catch(f){i(f)}}function u(c){var f;c.done?o(c.value):(f=c.value,f instanceof n?f:new n(function(d){d(f)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function Da(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(u){return function(c){return function(f){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,f[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&f[0]?r.return:f[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,f[1])).done)return o;switch(r=0,o&&(f=[2&f[0],o.value]),f[0]){case 0:case 1:o=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,r=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!((o=o.length>0&&o[o.length-1])||f[0]!==6&&f[0]!==2)){s=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){s.label=f[1];break}if(f[0]===6&&s.label<o[1]){s.label=o[1],o=f;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(f);break}o[2]&&s.ops.pop(),s.trys.pop();continue}f=t.call(e,s)}catch(d){f=[6,d],r=0}finally{n=o=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([u,c])}}}var wI=["wrist","thumb_cmc","thumb_mcp","thumb_ip","thumb_tip","index_finger_mcp","index_finger_pip","index_finger_dip","index_finger_tip","middle_finger_mcp","middle_finger_pip","middle_finger_dip","middle_finger_tip","ring_finger_mcp","ring_finger_pip","ring_finger_dip","ring_finger_tip","pinky_finger_mcp","pinky_finger_pip","pinky_finger_dip","pinky_finger_tip"],qF={runtime:"mediapipe",maxHands:2,modelType:"full"},mIe=function(){function e(t){var n,r=this;this.width=0,this.height=0,this.selfieMode=!1,this.handsSolution=new nK.Hands({locateFile:function(o,i){return t.solutionPath?t.solutionPath.replace(/\/+$/,"")+"/"+o:i+"/"+o}}),t.modelType==="lite"?n=0:n=1,this.handsSolution.setOptions({modelComplexity:n,selfieMode:this.selfieMode,maxNumHands:t.maxHands}),this.handsSolution.onResults(function(o){if(r.height=o.image.height,r.width=o.image.width,r.hands=[],o.multiHandLandmarks!==null)for(var i=o.multiHandedness,s=o.multiHandLandmarks,a=o.multiHandWorldLandmarks,u=0;u<i.length;u++)r.hands.push(Ao(Ao({},r.translateOutput(s[u],a[u])),{score:i[u].score,handedness:i[u].label}))})}return e.prototype.translateOutput=function(t,n){var r=this;return{keypoints:t.map(function(o,i){return{x:o.x*r.width,y:o.y*r.height,score:o.visibility,name:wI[i]}}),keypoints3D:n.map(function(o,i){return{x:o.x,y:o.y,z:o.z,score:o.visibility,name:wI[i]}})}},e.prototype.estimateHands=function(t,n){return Sa(this,void 0,void 0,function(){var r,o;return Da(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.handsSolution.setOptions({selfieMode:this.selfieMode})),t instanceof Qt?(o=ImageData.bind,[4,r0.toPixels(t)]):[3,2];case 1:return r=new(o.apply(ImageData,[void 0,i.sent(),t.shape[1],t.shape[0]])),[3,3];case 2:r=t,i.label=3;case 3:return t=r,[4,this.handsSolution.send({image:t})];case 4:return i.sent(),[2,this.hands]}})})},e.prototype.dispose=function(){this.handsSolution.close()},e.prototype.reset=function(){this.handsSolution.reset(),this.width=0,this.height=0,this.hands=null,this.selfieMode=!1},e.prototype.initialize=function(){return this.handsSolution.initialize()},e}();function gIe(e){return Sa(this,void 0,void 0,function(){var t,n;return Da(this,function(r){switch(r.label){case 0:return t=function(o){if(o==null)return Ao({},qF);var i=Ao({},o);return i.runtime="mediapipe",i.maxHands==null&&(i.maxHands=qF.maxHands),i.modelType==null&&(i.modelType=qF.modelType),i}(e),[4,(n=new mIe(t)).initialize()];case 1:return r.sent(),[2,n]}})})}function KF(e){return e.width*e.height}function Xq(e){var t=e.xCenter-e.width/2,n=t+e.width,r=e.yCenter-e.height/2;return{xMin:t,xMax:n,yMin:r,yMax:r+e.height,width:e.width,height:e.height}}function yIe(e,t){var n=Xq(e),r=Xq(t);if(!function(s,a){return!(s.xMax<a.xMin||a.xMax<s.xMin||s.yMax<a.yMin||a.yMax<s.yMin)}(n,r))return 0;var o=KF(function(s,a){var u=Math.max(s.xMin,a.xMin),c=Math.min(s.xMax,a.xMax),f=Math.max(s.yMin,a.yMin),d=Math.min(s.yMax,a.yMax);return{xMin:u,xMax:c,yMin:f,yMax:d,width:Math.max(c-u,0),height:Math.max(d-f,0)}}(n,r)),i=KF(n)+KF(r)-o;return i>0?o/i:0}function vIe(e,t,n,r){var o=e.width,i=e.height,s=r?-1:1,a=Math.cos(e.rotation),u=Math.sin(e.rotation),c=e.xCenter,f=e.yCenter,d=1/t,h=1/n,m=new Array(16);return m[0]=o*a*s*d,m[1]=-i*u*d,m[2]=0,m[3]=(-.5*o*a*s+.5*i*u+c)*d,m[4]=o*u*s*h,m[5]=i*a*h,m[6]=0,m[7]=(-.5*i*a-.5*o*u*s+f)*h,m[8]=0,m[9]=0,m[10]=o*d,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,function(v){if(v.length!==16)throw new Error("Array length must be 16 but got "+v.length);return[[v[0],v[1],v[2],v[3]],[v[4],v[5],v[6],v[7]],[v[8],v[9],v[10],v[11]],[v[12],v[13],v[14],v[15]]]}(m)}function rK(e){return e instanceof Qt?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function EI(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}function oK(e){return e instanceof Qt?e:r0.fromPixels(e)}function XF(e,t){N.assert(e.width!==0,function(){return t+" width cannot be 0."}),N.assert(e.height!==0,function(){return t+" height cannot be 0."})}function xIe(e,t){var n=function(r,o,i,s){var a=o-r,u=s-i;if(a===0)throw new Error("Original min and max are both "+r+", range cannot be 0.");var c=u/a;return{scale:c,offset:i-r*c}}(0,255,t[0],t[1]);return ze(function(){return _e(le(e,n.scale),n.offset)})}function Yq(e,t,n){var r=t.outputTensorSize,o=t.keepAspectRatio,i=t.borderMode,s=t.outputTensorFloatRange,a=rK(e),u=function(h,m){return m?{xCenter:m.xCenter*h.width,yCenter:m.yCenter*h.height,width:m.width*h.width,height:m.height*h.height,rotation:m.rotation}:{xCenter:.5*h.width,yCenter:.5*h.height,width:h.width,height:h.height,rotation:0}}(a,n),c=function(h,m,v){if(v===void 0&&(v=!1),!v)return{top:0,left:0,right:0,bottom:0};var x=m.height,b=m.width;XF(m,"targetSize"),XF(h,"roi");var C,D,O=x/b,F=h.height/h.width,B=0,H=0;return O>F?(C=h.width,D=h.width*O,H=(1-F/O)/2):(C=h.height/O,D=h.height,B=(1-O/F)/2),h.width=C,h.height=D,{top:H,left:B,right:B,bottom:H}}(u,r,o),f=vIe(u,a.width,a.height,!1),d=ze(function(){var h=oK(e),m=Ta(function(b,C,D){return XF(D,"inputResolution"),[1/D.width*b[0][0]*C.width,1/D.height*b[0][1]*C.width,b[0][3]*C.width,1/D.width*b[1][0]*C.height,1/D.height*b[1][1]*C.height,b[1][3]*C.height,0,0]}(f,a,r),[1,8]),v=i==="zero"?"constant":"nearest",x=e0.transform(Di(wt(h,"float32")),m,"bilinear",v,0,[r.height,r.width]);return s!=null?xIe(x,s):x});return{imageTensor:d,padding:c,transformationMatrix:f}}function Zq(e,t,n,r){return r===1?.5*(e+t):e+(t-e)*n/(r-1)}function Qq(e){return{xCenter:e.xMin+e.width/2,yCenter:e.yMin+e.height/2,width:e.width,height:e.height}}function Jq(e){var t=e.relativeKeypoints;if(t.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,i=Number.MIN_VALUE;return t.forEach(function(s){n=Math.min(n,s.x),o=Math.max(o,s.x),r=Math.min(r,s.y),i=Math.max(i,s.y)}),{xCenter:(n+o)/2,yCenter:(r+i)/2,width:o-n,height:i-r}}function bIe(e,t,n,r,o){var i=n==="rect"?function(s,a,u){var c,f=s.locationData;if(a==="boundingbox")c=Qq(f.boundingBox);else{c=Jq(f);var d=u.width,h=u.height;c.xCenter=Math.round(c.xCenter*d),c.yCenter=Math.round(c.yCenter*h),c.width=Math.round(c.width*d),c.height=Math.round(c.height*h)}return c}(e,t,r):function(s,a){var u=s.locationData;return a==="boundingbox"?Qq(u.relativeBoundingBox):Jq(u)}(e,t);return o&&(i.rotation=function(s,a,u){var c,f=s.locationData,d=u.rotationVectorStartKeypointIndex,h=u.rotationVectorEndKeypointIndex;c=u.rotationVectorTargetAngle?u.rotationVectorTargetAngle:Math.PI*u.rotationVectorTargetAngleDegree/180;var m=f.relativeKeypoints[d].x*a.width,v=f.relativeKeypoints[d].y*a.height,x=f.relativeKeypoints[h].x*a.width,b=f.relativeKeypoints[h].y*a.height;return EI(c-Math.atan2(-(b-v),x-m))}(e,r,o)),i}function wIe(e){return ze(function(){var t=function(o){return ze(function(){return[We(o,[0,0,0],[1,-1,1]),We(o,[0,0,1],[1,-1,-1])]})}(e),n=t[0],r=t[1];return{boxes:fr(r),logits:fr(n)}})}function EIe(e,t,n,r){return Sa(this,void 0,void 0,function(){var o,i,s,a,u;return Da(this,function(c){switch(c.label){case 0:return e.sort(function(f,d){return Math.max.apply(Math,d.score)-Math.max.apply(Math,f.score)}),o=Ta(e.map(function(f){return[f.locationData.relativeBoundingBox.yMin,f.locationData.relativeBoundingBox.xMin,f.locationData.relativeBoundingBox.yMax,f.locationData.relativeBoundingBox.xMax]})),i=Ln(e.map(function(f){return f.score[0]})),[4,e0.nonMaxSuppressionAsync(o,i,t,n)];case 1:return[4,(s=c.sent()).array()];case 2:return a=c.sent(),u=e.filter(function(f,d){return a.indexOf(d)>-1}),Wt([o,i,s]),[2,u]}})})}function CIe(e,t){return e.map(function(n){var r=Ao(Ao({},n),{x:n.x*t.width,y:n.y*t.height});return n.z!=null&&(r.z=n.z*t.width),r})}function TIe(e,t,n){return Sa(this,void 0,void 0,function(){var r,o,i,s,a;return Da(this,function(u){switch(u.label){case 0:return r=e[0],o=e[1],i=function(c,f,d){return ze(function(){var h,m,v,x;d.reverseOutputOrder?(m=fr(We(c,[0,d.boxCoordOffset+0],[-1,1])),h=fr(We(c,[0,d.boxCoordOffset+1],[-1,1])),x=fr(We(c,[0,d.boxCoordOffset+2],[-1,1])),v=fr(We(c,[0,d.boxCoordOffset+3],[-1,1]))):(h=fr(We(c,[0,d.boxCoordOffset+0],[-1,1])),m=fr(We(c,[0,d.boxCoordOffset+1],[-1,1])),v=fr(We(c,[0,d.boxCoordOffset+2],[-1,1])),x=fr(We(c,[0,d.boxCoordOffset+3],[-1,1]))),m=_e(le(Xe(m,d.xScale),f.w),f.x),h=_e(le(Xe(h,d.yScale),f.h),f.y),d.applyExponentialOnBoxSize?(v=le(Zo(Xe(v,d.hScale)),f.h),x=le(Zo(Xe(x,d.wScale)),f.w)):(v=le(Xe(v,d.hScale),f.h),x=le(Xe(x,d.wScale),f.h));var b=Le(h,Xe(v,2)),C=Le(m,Xe(x,2)),D=_e(h,Xe(v,2)),O=_e(m,Xe(x,2)),F=rn([Q(b,[d.numBoxes,1]),Q(C,[d.numBoxes,1]),Q(D,[d.numBoxes,1]),Q(O,[d.numBoxes,1])],1);if(d.numKeypoints)for(var B=0;B<d.numKeypoints;++B){var H=d.keypointCoordOffset+B*d.numValuesPerKeypoint,X=void 0,Z=void 0;d.reverseOutputOrder?(X=fr(We(c,[0,H],[-1,1])),Z=fr(We(c,[0,H+1],[-1,1]))):(Z=fr(We(c,[0,H],[-1,1])),X=fr(We(c,[0,H+1],[-1,1])));var te=_e(le(Xe(X,d.xScale),f.w),f.x),J=_e(le(Xe(Z,d.yScale),f.h),f.y);F=rn([F,Q(te,[d.numBoxes,1]),Q(J,[d.numBoxes,1])],1)}return F})}(o,t,n),s=ze(function(){var c=r;return n.sigmoidScore?(n.scoreClippingThresh!=null&&(c=i_(r,-n.scoreClippingThresh,n.scoreClippingThresh)),c=qs(c)):c}),[4,_Ie(i,s,n)];case 1:return a=u.sent(),Wt([i,s]),[2,a]}})})}function _Ie(e,t,n){return Sa(this,void 0,void 0,function(){var r,o,i,s,a,u,c,f,d,h,m,v;return Da(this,function(x){switch(x.label){case 0:return r=[],[4,e.data()];case 1:return o=x.sent(),[4,t.data()];case 2:for(i=x.sent(),s=0;s<n.numBoxes;++s)if(!(n.minScoreThresh!=null&&i[s]<n.minScoreThresh||(a=s*n.numCoords,u=IIe(o[a+0],o[a+1],o[a+2],o[a+3],i[s],n.flipVertically,s),(c=u.locationData.relativeBoundingBox).width<0||c.height<0))){if(n.numKeypoints>0)for((f=u.locationData).relativeKeypoints=[],d=n.numKeypoints*n.numValuesPerKeypoint,h=0;h<d;h+=n.numValuesPerKeypoint)m=a+n.keypointCoordOffset+h,v={x:o[m+0],y:n.flipVertically?1-o[m+1]:o[m+1]},f.relativeKeypoints.push(v);r.push(u)}return[2,r]}})})}function IIe(e,t,n,r,o,i,s){return{score:[o],ind:s,locationData:{relativeBoundingBox:{xMin:t,yMin:i?1-n:e,xMax:r,yMax:i?1-e:n,width:r-t,height:n-e}}}}function SIe(e,t){return e==="none"?t:function(n){return 1/(1+Math.exp(-n))}(t)}function eK(e,t,n,r){return Sa(this,void 0,void 0,function(){var o,i,s,a,u,c,f,d;return Da(this,function(h){switch(h.label){case 0:return n=n||t.flipHorizontally||!1,r=r||t.flipVertically||!1,o=e.size,i=o/t.numLandmarks,[4,e.data()];case 1:for(s=h.sent(),a=[],u=0;u<t.numLandmarks;++u)c=u*i,(d={x:0,y:0}).x=n?t.inputImageWidth-s[c]:s[c],i>1&&(d.y=r?t.inputImageHeight-s[c+1]:s[c+1]),i>2&&(d.z=s[c+2]),i>3&&(d.score=SIe(t.visibilityActivation,s[c+3])),a.push(d);for(f=0;f<a.length;++f)(d=a[f]).x=d.x/t.inputImageWidth,d.y=d.y/t.inputImageHeight,d.z=d.z/t.inputImageWidth/(t.normalizeZ||1);return[2,a]}})})}function tK(e,t,n){var r=e.width,o=e.height,i=e.rotation;if(n.rotation==null&&n.rotationDegree==null||(i=function(f,d){return d.rotation!=null?f+=d.rotation:d.rotationDegree!=null&&(f+=Math.PI*d.rotationDegree/180),EI(f)}(i,n)),i===0)e.xCenter=e.xCenter+r*n.shiftX,e.yCenter=e.yCenter+o*n.shiftY;else{var s=(t.width*r*n.shiftX*Math.cos(i)-t.height*o*n.shiftY*Math.sin(i))/t.width,a=(t.width*r*n.shiftX*Math.sin(i)+t.height*o*n.shiftY*Math.cos(i))/t.height;e.xCenter=e.xCenter+s,e.yCenter=e.yCenter+a}if(n.squareLong){var u=Math.max(r*t.width,o*t.height);r=u/t.width,o=u/t.height}else if(n.squareShort){var c=Math.min(r*t.width,o*t.height);r=c/t.width,o=c/t.height}return e.width=r*n.scaleX,e.height=o*n.scaleY,e}function DIe(e,t){for(var n=function(ae,ye){var ke=ae[0].x*ye.width,Ke=ae[0].y*ye.height,Me=(ae[4].x+ae[8].x)/2,Nt=(ae[4].y+ae[8].y)/2;return Me=(Me+ae[6].x)/2*ye.width,Nt=(Nt+ae[6].y)/2*ye.height,EI(Math.PI/2-Math.atan2(-(Nt-Ke),Me-ke))}(e,t),r=EI(-n),o=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,u=0,c=e;u<c.length;u++){var f=(b=c[u]).x,d=b.y;o=Math.min(o,f),i=Math.max(i,f),s=Math.min(s,d),a=Math.max(a,d)}var h=(i+o)/2,m=(a+s)/2;o=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(var v=0,x=e;v<x.length;v++){var b,C=((b=x[v]).x-h)*t.width,D=(b.y-m)*t.height,O=C*Math.cos(r)-D*Math.sin(r),F=C*Math.sin(r)+D*Math.cos(r);o=Math.min(o,O),i=Math.max(i,O),s=Math.min(s,F),a=Math.max(a,F)}var B=(i+o)/2,H=(a+s)/2,X=B*Math.cos(n)-H*Math.sin(n)+t.width*h,Z=B*Math.sin(n)+H*Math.cos(n)+t.height*m,te=(i-o)/t.width,J=(a-s)/t.height;return{xCenter:X/t.width,yCenter:Z/t.height,width:te,height:J,rotation:n}}var NIe={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},YF={runtime:"tfjs",modelType:"full",maxHands:2,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"},ZF={flipHorizontal:!1,staticImageMode:!1},AIe={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2016,numCoords:18,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:7,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.5},RIe=.3,kIe={shiftX:0,shiftY:-.5,scaleX:2.6,scaleY:2.6,squareLong:!0},OIe={shiftX:0,shiftY:-.1,scaleX:2,scaleY:2,squareLong:!0},MIe={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},FIe={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},PIe={numLandmarks:21,inputImageWidth:224,inputImageHeight:224,normalizeZ:.4,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},$Ie={numLandmarks:21,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},u0,LIe=function(){function e(t,n,r){this.detectorModel=t,this.landmarkModel=n,this.maxHands=r,this.prevHandRectsFromLandmarks=null,this.anchors=function(u){u.reduceBoxesInLowestLayer==null&&(u.reduceBoxesInLowestLayer=!1),u.interpolatedScaleAspectRatio==null&&(u.interpolatedScaleAspectRatio=1),u.fixedAnchorSize==null&&(u.fixedAnchorSize=!1);for(var c=[],f=0;f<u.numLayers;){for(var d=[],h=[],m=[],v=[],x=f;x<u.strides.length&&u.strides[x]===u.strides[f];){var b=Zq(u.minScale,u.maxScale,x,u.strides.length);if(x===0&&u.reduceBoxesInLowestLayer)m.push(1),m.push(2),m.push(.5),v.push(.1),v.push(b),v.push(b);else{for(var C=0;C<u.aspectRatios.length;++C)m.push(u.aspectRatios[C]),v.push(b);if(u.interpolatedScaleAspectRatio>0){var D=x===u.strides.length-1?1:Zq(u.minScale,u.maxScale,x+1,u.strides.length);v.push(Math.sqrt(b*D)),m.push(u.interpolatedScaleAspectRatio)}}x++}for(var O=0;O<m.length;++O){var F=Math.sqrt(m[O]);d.push(v[O]/F),h.push(v[O]*F)}var B=0,H=0;if(u.featureMapHeight.length>0)B=u.featureMapHeight[f],H=u.featureMapWidth[f];else{var X=u.strides[f];B=Math.ceil(u.inputSizeHeight/X),H=Math.ceil(u.inputSizeWidth/X)}for(var Z=0;Z<B;++Z)for(var te=0;te<H;++te)for(var J=0;J<d.length;++J){var ae={xCenter:(te+u.anchorOffsetX)/H,yCenter:(Z+u.anchorOffsetY)/B,width:0,height:0};u.fixedAnchorSize?(ae.width=1,ae.height=1):(ae.width=h[J],ae.height=d[J]),c.push(ae)}f=x}return c}(NIe);var o=Ln(this.anchors.map(function(u){return u.width})),i=Ln(this.anchors.map(function(u){return u.height})),s=Ln(this.anchors.map(function(u){return u.xCenter})),a=Ln(this.anchors.map(function(u){return u.yCenter}));this.anchorTensor={x:s,y:a,w:o,h:i}}return e.prototype.estimateHands=function(t,n){return Sa(this,void 0,void 0,function(){var r,o,i,s,a,u,c,f,d,h,m,v,x,b,C,D,O,F,B=this;return Da(this,function(H){switch(H.label){case 0:return r=function(te){if(te==null)return Ao({},ZF);var J=Ao({},te);return J.flipHorizontal==null&&(J.flipHorizontal=ZF.flipHorizontal),J.staticImageMode==null&&(J.staticImageMode=ZF.staticImageMode),J}(n),t==null?(this.reset(),[2,[]]):(o=rK(t),i=ze(function(){var te=wt(oK(t),"float32");return r.flipHorizontal&&(te=fr(e0.flipLeftRight(Di(te,0)),[0])),te}),s=this.prevHandRectsFromLandmarks,r.staticImageMode||s==null||s.length<this.maxHands?[4,this.detectPalm(i)]:[3,2]);case 1:return(u=H.sent()).length===0?(this.reset(),i.dispose(),[2,[]]):(c=u.map(function(te){return B.palmDetectionToRoi(te,o)}),a=c,[3,3]);case 2:a=s,H.label=3;case 3:return X=.5,Z=[],[a].forEach(function(te){return te.forEach(function(J){(Z=Z.filter(function(ae){return yIe(J,ae)<=X})).push(J)})}),a=Z,[4,Promise.all(a.map(function(te){return B.handLandmarks(te,i)}))];case 4:for(f=H.sent(),d=[],this.prevHandRectsFromLandmarks=[],h=0,m=f;h<m.length;h++)(v=m[h])!=null&&(x=v.landmarks,b=v.worldLandmarks,C=v.handScore,D=v.handedness,this.prevHandRectsFromLandmarks.push(this.handLandmarksToRoi(x,o)),(O=CIe(x,o))!=null&&O.forEach(function(te,J){delete te.z,te.name=wI[J]}),(F=b)!=null&&F.forEach(function(te,J){te.name=wI[J]}),d.push({keypoints:O,keypoints3D:F,handedness:D,score:C}));return i.dispose(),[2,d]}var X,Z})})},e.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),Wt([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},e.prototype.reset=function(){this.prevHandRectsFromLandmarks=null},e.prototype.detectPalm=function(t){return Sa(this,void 0,void 0,function(){var n,r,o,i,s,a,u,c,f,d;return Da(this,function(h){switch(h.label){case 0:return n=Yq(t,MIe),r=n.imageTensor,o=n.padding,i=this.detectorModel.predict(r),s=wIe(i),a=s.boxes,[4,TIe([u=s.logits,a],this.anchorTensor,AIe)];case 1:return(c=h.sent()).length===0?(Wt([r,i,u,a]),[2,c]):[4,EIe(c,this.maxHands,RIe)];case 2:return f=h.sent(),d=function(m,v){m===void 0&&(m=[]);for(var x=v.left,b=v.top,C=v.left+v.right,D=v.top+v.bottom,O=0;O<m.length;O++){var F=m[O],B=F.locationData.relativeBoundingBox,H=(B.xMin-x)/(1-C),X=(B.yMin-b)/(1-D),Z=B.width/(1-C),te=B.height/(1-D);B.xMin=H,B.yMin=X,B.width=Z,B.height=te,B.xMax=H+Z,B.yMax=X+te;var J=F.locationData.relativeKeypoints;J&&J.forEach(function(ae){var ye=(ae.x-x)/(1-C),ke=(ae.y-b)/(1-D);ae.x=ye,ae.y=ke})}return m}(f,o),Wt([r,i,u,a]),[2,d]}})})},e.prototype.palmDetectionToRoi=function(t,n){return tK(bIe(t,"boundingbox","normRect",n,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:2,rotationVectorTargetAngleDegree:90}),n,kIe)},e.prototype.handLandmarks=function(t,n){return Sa(this,void 0,void 0,function(){var r,o,i,s,a,u,c,f,d,h,m,v,x,b,C,D;return Da(this,function(O){switch(O.label){case 0:return r=Yq(n,FIe,t),o=r.imageTensor,i=r.padding,s=this.landmarkModel.execute(o,["Identity_2:0","Identity_1:0","Identity:0","Identity_3:0"]),a=s[0],u=s[1],c=s[2],f=s[3],[4,u.data()];case 1:return(d=O.sent()[0])<.5?(Wt(s),Wt(o),[2,null]):[4,c.data()];case 2:return h=O.sent()[0],m=h>=.5?"Left":"Right",[4,eK(a,PIe)];case 3:return v=O.sent(),[4,eK(f,$Ie)];case 4:return x=O.sent(),b=function(F,B){var H=B.left,X=B.top,Z=B.left+B.right,te=B.top+B.bottom;return F.map(function(J){return Ao(Ao({},J),{x:(J.x-H)/(1-Z),y:(J.y-X)/(1-te),z:J.z/(1-Z)})})}(v,i),C=function(F,B,H){H===void 0&&(H={ignoreRotation:!1});for(var X=[],Z=0,te=F;Z<te.length;Z++){var J=te[Z],ae=J.x-.5,ye=J.y-.5,ke=H.ignoreRotation?0:B.rotation,Ke=Math.cos(ke)*ae-Math.sin(ke)*ye,Me=Math.sin(ke)*ae+Math.cos(ke)*ye;Ke=Ke*B.width+B.xCenter,Me=Me*B.height+B.yCenter;var Nt=J.z*B.width,oe=Ao({},J);oe.x=Ke,oe.y=Me,oe.z=Nt,X.push(oe)}return X}(b,t),D=function(F,B){for(var H=[],X=0,Z=F;X<Z.length;X++){var te=Z[X],J=te.x,ae=te.y,ye=B.rotation,ke=Math.cos(ye)*J-Math.sin(ye)*ae,Ke=Math.sin(ye)*J+Math.cos(ye)*ae,Me=Ao({},te);Me.x=ke,Me.y=Ke,H.push(Me)}return H}(x,t),Wt(s),Wt(o),[2,{landmarks:C,worldLandmarks:D,handScore:d,handedness:m}]}})})},e.prototype.handLandmarksToRoi=function(t,n){return tK(DIe([].concat(t.slice(0,4),t.slice(5,7),t.slice(9,11),t.slice(13,15),t.slice(17,19)),n),n,OIe)},e}();function VIe(e){return Sa(this,void 0,void 0,function(){var t,n,r,o,i,s;return Da(this,function(a){switch(a.label){case 0:return t=function(u){if(u==null)return Ao({},YF);var c=Ao({},u);if(c.runtime="tfjs",c.maxHands==null&&(c.maxHands=YF.maxHands),c.modelType==null&&(c.modelType=YF.modelType),c.modelType!=="lite"&&c.modelType!=="full")throw new Error("Model type must be one of lite or full, but got "+c.modelType);return c.detectorModelUrl==null&&(c.modelType==="lite"?c.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/lite/1":c.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1"),c.landmarkModelUrl==null&&(c.modelType==="lite"?c.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/lite/1":c.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"),c}(e),n=t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,r=t.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([bI(t.detectorModelUrl,{fromTFHub:n}),bI(t.landmarkModelUrl,{fromTFHub:r})])];case 1:return o=a.sent(),i=o[0],s=o[1],[2,new LIe(i,s,t.maxHands)]}})})}function iK(e,t){return Sa(this,void 0,void 0,function(){var n,r;return Da(this,function(o){if(e===u0.MediaPipeHands){if(r=void 0,(n=t)!=null){if(n.runtime==="tfjs")return[2,VIe(n)];if(n.runtime==="mediapipe")return[2,gIe(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(e+" is not a supported model name.")})})}(function(e){e.MediaPipeHands="MediaPipeHands"})(u0||(u0={}));var Nd={},CI={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function sK(e,t){Nd[e]=t}function Ri(e,t){if(!(e in Nd)||t!=null){let r=GIe(e,t);if(r!==null)Nd[e]=r;else return console.log("Could not get context for WebGL version",e),null}let n=Nd[e];return n==null||n.isContextLost()?(delete Nd[e],Ri(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Nd[e])}function UIe(e){if(!z().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&e===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function GIe(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=t??UIe(e);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Nd[e]},!1),z().getBool("SOFTWARE_WEBGL_ENABLED")&&(CI.failIfMajorPerformanceCaveat=!1),e===1?n.getContext("webgl",CI)||n.getContext("experimental-webgl",CI):n.getContext("webgl2",CI)}var Ad=function(e){return e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH",e}(Ad||{}),lo=function(e){return e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD",e}(lo||{}),Zr=function(e){return e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",e}(Zr||{});function Rd(e,t){return[t,e]}function aK(e,t){return e*t}function c0(e){let t=N.sizeFromShape(e),n=Math.ceil(t/4);return N.sizeToSquarishShape(n)}function yu(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function uK(e,t){let[n,r]=yu(e,t);return n*r*4}function l0(e,t){let n=e,r,o,i,s,a,u,c,f,d,h;return z().getNumber("WEBGL_VERSION")===2?(r=n.R32F,o=n.R16F,i=n.RGBA16F,s=n.RGBA32F,a=n.RED,c=4,f=1,d=n.HALF_FLOAT,h=n.FLOAT,u=n.RGBA8):(r=e.RGBA,o=e.RGBA,i=e.RGBA,s=n.RGBA,a=e.RGBA,c=4,f=4,d=t!=null?t.HALF_FLOAT_OES:null,h=e.FLOAT,u=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:a,downloadTextureFormat:u,downloadUnpackNumChannels:c,defaultNumChannels:f,textureTypeHalfFloat:d,textureTypeFloat:h}}function Ee(e,t){let n=t();return z().getBool("DEBUG")&&jIe(e),n}function jIe(e){let t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+WIe(e,t))}var zIe=596e-10,HIe=65504;function cK(e){return!!(z().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||zIe<Math.abs(e)&&Math.abs(e)<HIe)}function WIe(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function f0(e,t){return mc(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function lK(e,t){let n=mc(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Ee(e,()=>e.shaderSource(n,t)),Ee(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function fK(e,t){let n=mc(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Ee(e,()=>e.shaderSource(n,t)),Ee(e,()=>e.compileShader(n)),z().get("ENGINE_COMPILE_ONLY"))return n;if(e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw n3(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var qIe=/ERROR: [0-9]+:([0-9]+):/g;function n3(e,t){let n=qIe.exec(t);if(n==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}let r=+n[1],o=e.split(`
`),i=o.length.toString().length+2,s=o.map((d,h)=>N.rightPad((h+1).toString(),i)+d),a=0;for(let d=0;d<s.length;d++)a=Math.max(s[d].length,a);let u=s.slice(0,r-1),c=s.slice(r-1,r),f=s.slice(r);console.log(u.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${N.rightPad(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join(`
`))}function dK(e){return mc(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function pK(e,t){if(Ee(e,()=>e.linkProgram(t)),!z().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function _I(e,t){if(Ee(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function hK(e,t){let n=mc(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Ee(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),Ee(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function mK(e,t){let n=mc(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Ee(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),Ee(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function gK(e){return mc(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function yK(e,t){let n=z().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){let r=`[${e}x${t}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){let r=`[${e}x${t}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}function vK(e){return mc(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function r3(e,t,n,r,o,i,s){let a=e.getAttribLocation(t,n);return a===-1?!1:(Ee(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),Ee(e,()=>e.vertexAttribPointer(a,o,e.FLOAT,!1,i,s)),Ee(e,()=>e.enableVertexAttribArray(a)),!0)}function KIe(e,t,n){YIe(e,n),Ee(e,()=>e.activeTexture(e.TEXTURE0+n)),Ee(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function xK(e,t,n){return mc(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function bK(e,t,n){return e.getUniformLocation(t,n)}function wK(e,t,n,r){Ee(e,()=>KIe(e,t,r)),Ee(e,()=>e.uniform1i(n,r))}function II(e,t,n){Ee(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),Ee(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function o3(e,t){Ee(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),Ee(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function d0(e){let t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+XIe(e,t))}function XIe(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function mc(e,t,n){let r=Ee(e,()=>t());if(r==null)throw new Error(n);return r}function YIe(e,t){let n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){let o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function Ul(e,t=2){return N.sizeFromShape(e.slice(0,e.length-t))}function Gl(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function p0(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Ul(e),...Gl(e)]),t}function EK(e,t=!1){let n=z().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=z().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&z().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n=n*2,r=r*2,e=e.map((a,u)=>u>=e.length-2?N.nearestLargerEven(e[u]):e[u]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=N.squeezeShape(e).newShape);let o=N.sizeFromShape(e),i=null;e.length<=1&&o<=n?i=[1,o]:e.length===2&&e[0]<=n&&e[1]<=n?i=e:e.length===3&&e[0]*e[1]<=n&&e[2]<=n?i=[e[0]*e[1],e[2]]:e.length===3&&e[0]<=n&&e[1]*e[2]<=n?i=[e[0],e[1]*e[2]]:e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n?i=[e[0]*e[1]*e[2],e[3]]:e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(i=[e[0],e[1]*e[2]*e[3]]);let s=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(t?2:1)&&Math.min(...i)>0;if(i==null||s)if(t){let a=Ul(e),u=2,c=2;e.length&&([u,c]=Gl(e)),o=a*(u/2)*(c/2),i=N.sizeToSquarishShape(o).map(f=>f*2)}else i=N.sizeToSquarishShape(o);return i}function TI(e){return e%2===0}function kd(e,t){if(e=e.slice(-2),t=t.slice(-2),N.arraysEqual(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){let n=e[e.length-1],r=t[t.length-1];if(n===r||TI(n)&&TI(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&TI(e[0])&&TI(t[0])}var JF,e3;function CK(e){if(JF==null){let t=Ri(e);JF=t.getParameter(t.MAX_TEXTURE_SIZE)}return JF}function TK(e){if(e3==null){let t=Ri(e);e3=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,e3)}function _K(e){if(e===0)return 0;let t,n=Ri(e);return vs(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:vs(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function vs(e,t){return e.getExtension(t)!=null}function i3(e){try{if(Ri(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function IK(e){if(e===0)return!1;let t=Ri(e);if(e===1){if(!vs(t,"OES_texture_float"))return!1}else if(!vs(t,"EXT_color_buffer_float"))return!1;return t3(t)}function SK(e){if(e===0)return!1;let t=Ri(e);if(e===1){if(!vs(t,"OES_texture_float")||!vs(t,"WEBGL_color_buffer_float"))return!1}else{if(vs(t,"EXT_color_buffer_float"))return t3(t);let r="EXT_color_buffer_half_float";if(vs(t,r)){let o=t.getExtension(r);return ZIe(t,o)}return!1}return t3(t)}function t3(e){let t=l0(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);let i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);let s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(i),s}function ZIe(e,t){let n=l0(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);let a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(s),a}function DK(e){return e!==2?!1:Ri(e).fenceSync!=null}function vu(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&N.assert(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}var Oe=z();Oe.registerFlag("HAS_WEBGL",()=>Oe.getNumber("WEBGL_VERSION")>0);Oe.registerFlag("WEBGL_VERSION",()=>i3(2)?2:i3(1)?1:0);Oe.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Oe.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Oe.get("WEBGL_VERSION")===2);Oe.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Oe.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Oe.registerFlag("WEBGL_PACK",()=>Oe.getBool("HAS_WEBGL"));Oe.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_CLIP",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_REDUCE",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_LAZILY_UNPACK",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_CONV_IM2COL",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Oe.getBool("WEBGL_PACK"));Oe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>CK(Oe.getNumber("WEBGL_VERSION")));Oe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>TK(Oe.getNumber("WEBGL_VERSION")));Oe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let e=Oe.getNumber("WEBGL_VERSION");return e===0?0:_K(e)});Oe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Oe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Dl.isMobile());Oe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>IK(Oe.getNumber("WEBGL_VERSION")));Oe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Oe.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Oe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Oe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>SK(Oe.getNumber("WEBGL_VERSION")));Oe.registerFlag("WEBGL_FENCE_API_ENABLED",()=>DK(Oe.getNumber("WEBGL_VERSION")));Oe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Oe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Oe.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});Oe.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Dl.isMobile()?1:-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});Oe.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Oe.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Oe.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Oe.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Oe.registerFlag("WEBGL_EXP_CONV",()=>!1);Oe.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Oe.getBool("IS_TEST"));Oe.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Oe.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Oe.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Oe.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function Dn(){let e,t,n,r,o,i,s,a,u,c;return z().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",o="texture",i="outputColor",s="out vec4 outputColor;",a=z().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:u,defineRound:c}}function Na(e,t,n="index"){let r=N.computeStrides(t);return r.map((o,i)=>{let s=`int ${e[i]} = ${n} / ${o}`,a=i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${o}`:`index -= ${e[i]} * ${o}`;return`${s}; ${a};`}).join("")}function Od(e,t,n="index"){let r=N.computeStrides(t);return r.map((o,i)=>{let s=`int ${e[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * outShapeStrides[${i}]`:`index -= ${e[i]} * outShapeStrides[${i}]`;return`${s}; ${a};`}).join("")}function QIe(e,t){let n=e.length,r=e.map(i=>`${t}[${i}]`),o=new Array(n-1);o[n-2]=r[n-1];for(let i=n-3;i>=0;--i)o[i]=`(${o[i+1]} * ${r[i+1]})`;return o}function NK(e,t,n="index"){let r=e.map((i,s)=>s),o=QIe(r,t);return o.map((i,s)=>{let a=`int ${e[s]} = ${n} / ${o[s]}`,u=s===o.length-1?`int ${e[s+1]} = ${n} - ${e[s]} * ${o[s]}`:`index -= ${e[s]} * ${o[s]}`;return`${a}; ${u};`}).join("")}function km(e){let t=N.computeStrides(e).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function Om(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var DI=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var{getBroadcastDims:AK}=U;function RK(e,t,n){let r=[];if(e.forEach(m=>{let v=N.sizeFromShape(m.shapeInfo.logicalShape);if(m.shapeInfo.isUniform?r.push(`uniform float ${m.name}${v>1?`[${v}]`:""};`):(r.push(`uniform sampler2D ${m.name};`),r.push(`uniform int offset${m.name};`)),n.enableShapeUniforms){let{uniformShape:x}=NI(n.packedInputs,m.shapeInfo.logicalShape,m.shapeInfo.texShape);switch(x.length){case 1:r.push(`uniform int ${m.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${m.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${m.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${m.name}Shape;`);break;default:break}r.push(`uniform ivec2 ${m.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break;default:break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(m=>{r.push(`uniform ${m.type} ${m.name}${m.arrayIndex?`[${m.arrayIndex}]`:""};`)});let o=r.join(`
`),i=e.map(m=>JIe(m,t,n.packedInputs,n.enableShapeUniforms)).join(`
`),s=t.texShape,a=Dn(),u=nSe(a),c,f,d=iSe(a);return t.isPacked?(c=eSe(t.logicalShape,s,n.enableShapeUniforms),f=oSe(a)):(c=tSe(t.logicalShape,s,n.enableShapeUniforms),f=rSe(a)),n.packedInputs&&(d+=cSe),[d,u,f,o,c,i,n.userCode].join(`
`)}function Fm(e,t=!1){let n=e.shapeInfo.logicalShape;switch(n.length){case 0:return wSe(e,t);case 1:return CSe(e,t);case 2:return _Se(e,t);case 3:return SSe(e,t);case 4:return NSe(e,t);case 5:return ASe(e);case 6:return RSe(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function kK(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return bSe(e);case 1:return ESe(e,t);case 2:return TSe(e,t);case 3:return ISe(e,t);default:return DSe(e,t)}}function JIe(e,t,n=!1,r){let o="";n?o+=kK(e,r):o+=Fm(e,r);let i=e.shapeInfo.logicalShape,s=t.logicalShape;return i.length<=s.length&&(n?o+=kSe(e,t):o+=OSe(e,t)),o}function eSe(e,t,n){switch(e.length){case 0:return OK();case 1:return lSe(e,t,n);case 2:return vSe(e,t,n);case 3:return dSe(e,t,n);default:return hSe(e,t,n)}}function tSe(e,t,n){switch(e.length){case 0:return OK();case 1:return fSe(e,t,n);case 2:return xSe(e,t,n);case 3:return pSe(e,t,n);case 4:return mSe(e,t,n);case 5:return gSe(e,t);case 6:return ySe(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function nSe(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function rSe(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function oSe(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function iSe(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${sSe}
    ${aSe}
    ${uSe}
  `}var sSe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,aSe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,uSe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,cSe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function OK(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function lSe(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function fSe(e,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function dSe(e,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),i=o*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function pSe(e,t,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Od(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;let r=Na(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function hSe(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),i=o*Math.ceil(e[e.length-2]/2),s=i,a="",u="b, r, c";for(let c=2;c<e.length-1;c++)s*=e[e.length-c-1],a=`
      int b${c} = index / ${s};
      index -= b${c} * ${s};
    `+a,u=`b${c}, `+u;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${e.length}(${u});
    }
  `}function mSe(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Od(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;let r=Na(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function gSe(e,t){let n=Na(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function ySe(e,t){let n=Na(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function vSe(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(N.arraysEqual(e,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;let o=Math.ceil(e[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function xSe(e,t,n){return N.arraysEqual(e,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function Md(e){return`offset${e}`}function bSe(e){let t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Dn();return`
    vec4 ${n}() {
      return ${r.texture2D}(${t}, halfCR);
    }
  `}function wSe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;let[o,i]=e.shapeInfo.texShape;if(o===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;let s=Md(n);if(t)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${s});
      return sampleTexture(${n}, uv);
    }
  `;let[a,u]=e.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${u}, ${s});
      return sampleTexture(${n}, uv);
    }
  `}function ESe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,i=Dn();if(t)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;let s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function CSe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Pm(e)}
      }
    `;let o=e.shapeInfo.texShape,i=o[0],s=o[1];if(s===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;let a=Md(n);return s===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:t?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${s}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function TSe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=i[0],a=i[1],u=Dn();if(i!=null&&N.arraysEqual(n,i))return t?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${u.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${s}.0);

        return ${u.texture2D}(${r}, uv);
      }
    `;if(t)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `;let c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],f=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${f}, ${c[0]}, ${c[1]}, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function _Se(e,t){let n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(i!=null&&N.arraysEqual(n,i)){if(t)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;let h=i[0],m=i[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${m}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}let{newShape:s,keptDims:a}=N.squeezeShape(n),u=s;if(u.length<n.length){let h=$m(e,u),m=["row","col"];return`
      ${Fm(h,t)}
      float ${o}(int row, int col) {
        return ${o}(${Lm(m,a)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Pm(e)}
      }
    `;let c=i[0],f=i[1],d=Md(r);return f===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${f}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:t?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${f}, index);
    return sampleTexture(${r}, uv);
  }
`}function ISe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){let h=n.slice(1),m=[1,2],v=$m(e,h),x=["b","row","col"];return`
        ${kK(v,t)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${Lm(x,m)});
        }
      `}let a=Dn();if(t)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;let u=s[0],c=s[1],f=Math.ceil(n[2]/2),d=f*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${c}, ${d}, ${f}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function SSe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],s=n[2],{newShape:a,keptDims:u}=N.squeezeShape(n),c=a;if(c.length<n.length){let x=$m(e,c),b=["row","col","depth"];return`
        ${Fm(x,t)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${Lm(b,u)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${s}, 1)));
        ${Pm(e)}
      }
    `;let f=e.shapeInfo.texShape,d=f[0],h=f[1],m=e.shapeInfo.flatOffset;if(h===i&&m==null)return t?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===s&&m==null)return t?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;let v=Md(r);return t?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${v};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${s} + depth + ${v};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function DSe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=Dn();if(t)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;let i=e.shapeInfo.logicalShape,s=i.length,a=e.shapeInfo.texShape,u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=u[0],f=u[1],d=Math.ceil(i[s-1]/2),h=d*Math.ceil(i[s-2]/2),m="int b, int row, int col",v=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let x=2;x<s-1;x++)m=`int b${x}, `+m,h*=i[s-x-1],v=`b${x} * ${h} + `+v;return`
    vec4 ${r}(${m}) {
      int index = ${v};
      int texR = index / ${f};
      int texC = index - texR * ${f};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}, ${c});
      return ${o.texture2D}(${n}, uv);
    }
  `}function NSe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],s=n[2]*i,a=n[1]*s,{newShape:u,keptDims:c}=N.squeezeShape(n);if(u.length<n.length){let D=$m(e,u),O=["row","col","depth","depth2"];return`
      ${Fm(D,t)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${Lm(O,c)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${s}, ${i}, 1)));
        ${Pm(e)}
      }
    `;let f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],m=d[1],v=`int stride2 = ${r}Shape[3];`,x=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(m===a&&f==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${v}
        ${x}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(m===i&&f==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;let C=Md(r);return t?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${v}
      ${x}
      ${b}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${C});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${h}, ${m}, index + ${C});
      return sampleTexture(${r}, uv);
    }
  `}function ASe(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],i=t[3]*o,s=t[2]*i,a=t[1]*s,{newShape:u,keptDims:c}=N.squeezeShape(t);if(u.length<t.length){let x=$m(e,u),b=["row","col","depth","depth2","depth3"];return`
      ${Fm(x)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Lm(b,c)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${s}, ${i}, ${o})) +
          depth3;
        ${Pm(e)}
      }
    `;let f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],m=d[1];if(m===a&&f==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${i}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===o&&f==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;let v=Md(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} + depth * ${i} +
          depth2 * ${o} + depth3 + ${v};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function RSe(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:i}=N.squeezeShape(t);if(o.length<t.length){let b=$m(e,o),C=["row","col","depth","depth2","depth3","depth4"];return`
      ${Fm(b)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Lm(C,i)});
      }
    `}let s=t[5],a=t[4]*s,u=t[3]*a,c=t[2]*u,f=t[1]*c;if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${f}, ${c}, ${u}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${Pm(e)}
      }
    `;let d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,m=h[0],v=h[1];if(v===f&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${u}, ${a}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${v}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(v===s&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${v}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;let x=Md(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${f} + col * ${c} + depth * ${u} +
          depth2 * ${a} + depth3 * ${s} + depth4 + ${x};
      vec2 uv = uvFromFlat(${m}, ${v}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Pm(e){let t=e.name,n=N.sizeFromShape(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function kSe(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,a=AK(e.shapeInfo.logicalShape,t.logicalShape),u=Qe(s),c=s-i,f,d=["x","y","z","w","u","v"];i===0?f="":s<2&&a.length>=1?f="coords = 0;":f=a.map(D=>`coords.${d[D+c]} = 0;`).join(`
`);let h="";s<2&&i>0?h="coords":h=e.shapeInfo.logicalShape.map((D,O)=>`coords.${d[O+c]}`).join(", ");let m="return outputValue;",x=N.sizeFromShape(e.shapeInfo.logicalShape)===1,C=N.sizeFromShape(t.logicalShape)===1;if(i===1&&!x&&!C)m=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(x&&!C)s===1?m=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:m=`
        return vec4(outputValue.x);
      `;else if(a.length){let D=i-2,O=i-1;a.indexOf(D)>-1&&a.indexOf(O)>-1?m="return vec4(outputValue.x);":a.indexOf(D)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(O)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${u} coords = getOutputCoords();
      ${f}
      vec4 outputValue = get${r}(${h});
      ${m}
    }
  `}function OSe(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=t.texShape,s=e.shapeInfo.texShape,a=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&a===u&&e.shapeInfo.flatOffset==null&&N.arraysEqual(s,i))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;let c=Qe(u),f=AK(e.shapeInfo.logicalShape,t.logicalShape),d=u-a,h,m=["x","y","z","w","u","v"];a===0?h="":u<2&&f.length>=1?h="coords = 0;":h=f.map(x=>`coords.${m[x+d]} = 0;`).join(`
`);let v="";return u<2&&a>0?v="coords":v=e.shapeInfo.logicalShape.map((x,b)=>`coords.${m[b+d]}`).join(", "),`
    float ${o}() {
      ${c} coords = getOutputCoords();
      ${h}
      return get${r}(${v});
    }
  `}function Qe(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function NI(e,t,n){let{newShape:r,keptDims:o}=N.squeezeShape(t),i=t.length,s=e&&i===3&&t[0]===1,a=s?t.slice(1):r,u=!e&&i>1&&!N.arraysEqual(t,n)&&r.length<i||s;return{useSqueezeShape:u,uniformShape:u?a:t,keptDims:o}}function $m(e,t){let n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Lm(e,t){return t.map(n=>e[n]).join(", ")}function FK(e,t,n,r){let o=n.map((f,d)=>{let h={logicalShape:f.shape,texShape:f.isUniform?null:f.texData.texShape,isUniform:f.isUniform,isPacked:f.isUniform?!1:f.texData.isPacked,flatOffset:null};return f.texData!=null&&f.texData.slice!=null&&f.texData.slice.flatOffset>0&&(h.flatOffset=f.texData.slice.flatOffset),{name:t.variableNames[d],shapeInfo:h}}),i=o.map(f=>f.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=RK(o,s,t),u=fK(e.gl,a),c=e.createProgram(u);return z().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:u,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:s},s3(e,t,c)))}function s3(e,t,n){let r=[],o=[],i,s,a,u=null,c=null;c=e.getUniformLocation(n,"NAN",!1),z().getNumber("WEBGL_VERSION")===1&&(u=e.getUniformLocation(n,"INFINITY",!1));let f=!1;for(let d of t.variableNames){let h={name:d,uniform:e.getUniformLocation(n,d,f),offset:e.getUniformLocation(n,`offset${d}`,f)};t.enableShapeUniforms&&(h.shape=e.getUniformLocation(n,`${d}Shape`,f),h.texShape=e.getUniformLocation(n,`${d}TexShape`,f)),r.push(h)}if(t.enableShapeUniforms&&(i=e.getUniformLocation(n,"outShape",f),a=e.getUniformLocation(n,"outShapeStrides",f),s=e.getUniformLocation(n,"outTexShape",f)),t.customUniforms)for(let d of t.customUniforms)o.push(e.getUniformLocation(n,d.name,f));return{variablesLocations:r,customUniformLocations:o,infLoc:u,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:s}}function MK(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((n,r)=>{let o=n.logicalShape,i=t[r],s=i.shape;if(!N.arraysEqual(o,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${s} must match`);if(n.isUniform&&i.isUniform)return;let a=n.texShape,u=i.isUniform?null:i.texData.texShape;if(!N.arraysEqual(a,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${u} must match`)})}function PK(e,t,n,r,o){t.program.enableShapeUniforms||(MK(t.inShapeInfos,n),MK([t.outShapeInfo],[r]));let i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):e.setOutputMatrixTexture(i.texture,s[0],s[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),z().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN);for(let u=0;u<n.length;++u){let c=n[u],{uniform:f,offset:d,shape:h,texShape:m}=t.variablesLocations[u];if(h){let{uniformShape:v}=NI(t.program.packedInputs,c.shape,c.texData.texShape);switch(v.length){case 1:e.gl.uniform1iv(h,new Int32Array(v));break;case 2:e.gl.uniform2iv(h,new Int32Array(v));break;case 3:e.gl.uniform3iv(h,new Int32Array(v));break;case 4:e.gl.uniform4iv(h,new Int32Array(v));break;default:break}}if(m&&e.gl.uniform2i(m,c.texData.texShape[0],c.texData.texShape[1]),f!=null){if(c.isUniform){if(N.sizeFromShape(c.shape)<2)e.gl.uniform1f(f,c.uniformValues[0]);else{let v=c.uniformValues;v instanceof Float32Array||(v=new Float32Array(v)),e.gl.uniform1fv(f,v)}continue}c.texData.slice!=null&&d!=null&&e.gl.uniform1i(d,c.texData.slice.flatOffset),e.setInputMatrixTexture(c.texData.texture.texture,f,u)}}let a=t.outShapeLocation;if(a)switch(r.shape.length){case 1:e.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(a,new Int32Array(r.shape));break;default:break}if(t.outShapeStridesLocation){let u=N.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u));break;default:break}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&o)for(let u=0;u<t.program.customUniforms.length;++u){let c=t.program.customUniforms[u],f=t.customUniformLocations[u],d=o[u];if(c.type==="float")e.gl.uniform1fv(f,d);else if(c.type==="vec2")e.gl.uniform2fv(f,d);else if(c.type==="vec3")e.gl.uniform3fv(f,d);else if(c.type==="vec4")e.gl.uniform4fv(f,d);else if(c.type==="int")e.gl.uniform1iv(f,d);else if(c.type==="ivec2")e.gl.uniform2iv(f,d);else if(c.type==="ivec3")e.gl.uniform3iv(f,d);else if(c.type==="ivec4")e.gl.uniform4iv(f,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}e.executeProgram()}function $K(e,t,n){let r="";t.concat(n).forEach(s=>{let a=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!s.isUniform){let u=s.texData.texShape,{useSqueezeShape:c,uniformShape:f,keptDims:d}=NI(e.packedInputs,s.shape,u),h="",m="",v="";if(f.length===1&&e.packedInputs){let B=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];h=`${B[0]>1}_${B[1]>1}`}else if(f.length===2&&!e.packedInputs)m=`${f[0]>1}_${f[1]>1}`;else if(f.length>2&&!e.packedInputs){let B=N.computeStrides(f);v=`${B[0]===u[1]}_${B[B.length-1]===u[1]}`}let x=s.shape.length,b=f.length===2&&N.arraysEqual(s.shape,u),C=N.sizeFromShape(s.shape)===1,D=U.getBroadcastDims(s.shape,n.shape),O=!e.packedInputs&&x===n.shape.length&&N.arraysEqual(u,n.texData.texShape),F=e.packedInputs||f.length>2?"":`${u[0]>1}_${u[1]>1}`;r+=`${x}_${O}_${c?d:""}_${f.length}_${C}_${D}_${b}_${h}_${m}_${v}_${F}_${a}`}else{let u=s.isUniform?"uniform":s.texData.texShape;r+=`${s.shape}_${u}_${a}`}});let o=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+o+`${z().getNumber("WEBGL_VERSION")}`,i}function qt(e){return z().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var AI=class{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Ad.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=Dn();this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Od(["r","c","d"],t):Na(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}};var RI=class{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Ad.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=Dn();this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Od(["r","c","d"],t):Na(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}};var kI=class{constructor(t){this.variableNames=["A"],this.outTexUsage=lo.DOWNLOAD;let n=Dn();this.outputShape=t,this.userCode=`
      ${DI}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}};var OI=class{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=lo.DOWNLOAD;let n=Dn();this.outputShape=t,this.userCode=`
      ${DI}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}};var PSe={R:0,G:1,B:2,A:3},h0=class{constructor(t,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let o=Dn();this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let s="";for(let a=0;a<r.length;a++){let u=r[a];s+=`
          if(offset == ${a}) {
            result = values[${PSe[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?Om():km(t)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${s}
        }
        ${o.output} = vec4(${i}, 0., 0., 0.);
      }
    `}};var MI=class{constructor(t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=Dn();this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length);let o="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let a=0;a<=1;a++){let u=s*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?Om():km(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${r.output} = ${i};
        }
    `}};function LK(e){let t=Dn(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return lK(e,n)}function VK(e){let t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return hK(e,t)}function BK(e){let t=new Uint16Array([0,1,2,2,1,3]);return mK(e,t)}function m0(e,t,n,r,o,i){yK(t,n);let s=gK(e),a=e.TEXTURE_2D;return Ee(e,()=>e.bindTexture(a,s)),Ee(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),Ee(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),Ee(e,()=>e.texParameteri(a,e.TEXTURE_MIN_FILTER,e.NEAREST)),Ee(e,()=>e.texParameteri(a,e.TEXTURE_MAG_FILTER,e.NEAREST)),z().getNumber("WEBGL_VERSION")===1?Ee(e,()=>e.texImage2D(a,0,r,t,n,0,o,i,null)):Ee(e,()=>e.texStorage2D(a,1,r,t,n)),Ee(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:s,texShape:[n,t]}}function a3(e){return e.internalFormatFloat}function UK(e,t,n,r){let[o,i]=Rd(t,n);return m0(e,o,i,a3(r),r.textureFormatFloat,e.FLOAT)}function u3(e){return e.internalFormatHalfFloat}function GK(e,t,n,r){let[o,i]=Rd(t,n);return m0(e,o,i,u3(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function c3(e){return e.downloadTextureFormat}function jK(e,t,n,r){let[o,i]=Rd(t,n);return m0(e,o,i,c3(r),e.RGBA,e.UNSIGNED_BYTE)}function l3(e){return e.internalFormatPackedFloat}function zK(e,t,n,r){let[o,i]=yu(t,n);return m0(e,o,i,l3(r),e.RGBA,e.FLOAT)}function f3(e){return e.internalFormatPackedHalfFloat}function HK(e,t,n,r){let[o,i]=yu(t,n);return m0(e,o,i,f3(r),e.RGBA,r.textureTypeHalfFloat)}function WK(e,t,n){return Ee(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),r3(e,t,"clipSpacePos",n,3,20,0)&&r3(e,t,"uv",n,2,20,12)}function qK(e,t,n,r,o,i){Ee(e,()=>e.bindTexture(e.TEXTURE_2D,t));let s,a,u;o instanceof Uint8Array?(s=new Uint8Array(n*r*4),a=e.UNSIGNED_BYTE,u=e.RGBA):(s=new Float32Array(n*r*4),a=e.FLOAT,u=i.internalFormatPackedFloat),s.set(o),z().getNumber("WEBGL_VERSION")===2?Ee(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,a,s)):Ee(e,()=>e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,a,s)),Ee(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function KK(e,t,n){Ee(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?z().getNumber("WEBGL_VERSION")===2?Ee(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):Ee(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):z().getNumber("WEBGL_VERSION")===2?Ee(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):Ee(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),Ee(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function XK(e,t,n,r){let o=e.createBuffer();Ee(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o));let a=4*4*t*n;return Ee(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),Ee(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),Ee(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),o}function YK(e,t,n){let r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function ZK(e,t,n,r){let[o,i]=Rd(t,n),s=4,a=new Uint8Array(aK(t*n,s));return Ee(e,()=>e.readPixels(0,0,o,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function QK(e,t,n,r,o,i,s,a){let u=e,c=new Float32Array(uK(i,s));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function JK(e,t,n){let r=new Float32Array(t*n*4);return Ee(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}var Vm=class{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let n=z().getNumber("WEBGL_VERSION");if(t!=null?(this.gl=t,sK(n,t)):this.gl=Ri(n),t=this.gl,z().getNumber("WEBGL_VERSION")===2){let i=t;this.createVertexArray=()=>Ee(i,()=>i.createVertexArray()),this.bindVertexArray=s=>Ee(i,()=>i.bindVertexArray(s)),this.deleteVertexArray=s=>Ee(i,()=>i.deleteVertexArray(s)),this.getVertexArray=()=>Ee(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(t!=null){let i=t.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Ee(t,()=>i.createVertexArrayOES()),this.bindVertexArray=s=>Ee(t,()=>i.bindVertexArrayOES(s)),this.deleteVertexArray=s=>Ee(t,()=>i.deleteVertexArrayOES(s)),this.getVertexArray=()=>Ee(t,()=>t.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float",o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),z().getNumber("WEBGL_VERSION")===1){let i="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=f0(this.gl,i),vs(this.gl,s))this.textureHalfFloatExtension=f0(this.gl,s);else if(z().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),vs(this.gl,o))this.colorBufferHalfFloatExtension=f0(this.gl,o);else if(z().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",vs(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(vs(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=VK(this.gl),this.indexBuffer=BK(this.gl),this.framebuffer=vK(this.gl),this.textureConfig=l0(this.gl,this.textureHalfFloatExtension)}get debug(){return z().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let t=this.gl;Ee(t,()=>t.finish()),Ee(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Ee(t,()=>t.deleteFramebuffer(this.framebuffer)),Ee(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),Ee(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),Ee(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,n){return this.throwIfDisposed(),UK(this.gl,t,n,this.textureConfig)}createFloat16MatrixTexture(t,n){return this.throwIfDisposed(),GK(this.gl,t,n,this.textureConfig)}createUnsignedBytesMatrixTexture(t,n){return this.throwIfDisposed(),jK(this.gl,t,n,this.textureConfig)}uploadPixelDataToTexture(t,n){this.throwIfDisposed(),KK(this.gl,t,n)}uploadDenseMatrixToTexture(t,n,r,o){this.throwIfDisposed(),qK(this.gl,t,n,r,o,this.textureConfig)}createFloat16PackedMatrixTexture(t,n){return this.throwIfDisposed(),HK(this.gl,t,n,this.textureConfig)}createPackedMatrixTexture(t,n){return this.throwIfDisposed(),zK(this.gl,t,n,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(o3(this.gl,this.framebuffer),this.outputTexture=null),Ee(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,n,r){return this.downloadMatrixDriver(t,()=>ZK(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(t,n,r,o,i,s){return QK(this.gl,t,n,r,o,i,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,n){return YK(this.gl,t,n)}createBufferFromTexture(t,n,r){this.bindTextureToFrameBuffer(t);let o=XK(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){let t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let n,r;if(z().getBool("WEBGL_FENCE_API_ENABLED")){let o=t,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=()=>{let s=o.clientWaitSync(i,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},n=i}else z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(t,n,r){return this.downloadMatrixDriver(t,()=>JK(this.gl,n,r))}createProgram(t){this.throwIfDisposed();let n=this.gl;this.vertexShader==null&&(this.vertexShader=LK(n));let r=dK(n);Ee(n,()=>n.attachShader(r,this.vertexShader)),Ee(n,()=>n.attachShader(r,t)),pK(n,r);let o=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&_I(n,o),o}buildVao(t){this.setProgram(t),this.bindVertexArray(t.vao);let n=this.gl;Ee(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),WK(n,t,this.vertexBuffer)}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&(Ee(this.gl,()=>this.gl.deleteProgram(t)),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&_I(this.gl,this.program),Ee(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,n,r=!0){return this.throwIfDisposed(),r?xK(this.gl,t,n):bK(this.gl,t,n)}getAttributeLocation(t,n){return this.throwIfDisposed(),Ee(this.gl,()=>this.gl.getAttribLocation(t,n))}getUniformLocationNoThrow(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)}setInputMatrixTexture(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),wK(this.gl,t,n,r)}setOutputMatrixTexture(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)}setOutputPackedMatrixTexture(t,n,r){this.throwIfDisposed();let[o,i]=yu(n,r);this.setOutputMatrixTextureDriver(t,o,i)}setOutputMatrixWriteRegion(t,n,r,o){this.setOutputMatrixWriteRegionDriver(r,t,o,n)}setOutputPackedMatrixWriteRegion(t,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&_I(this.gl,this.program),d0(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let t=this.gl;if(this.debug){let n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Ee(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ee(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=f0(this.gl,z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(o.TIME_ELAPSED_EXT,i),i}let t=this.getQueryTimerExtensionWebGL1(),n=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,n),n}endQuery(){if(z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}let t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(t){return ne(this,null,function*(){return yield N.repeatedTry(()=>this.disposed||this.isQueryAvailable(t,z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})}getQueryTime(t,n){if(n===0)return null;if(n===2){let r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}else{let r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,n){if(n===0)return!0;if(n===2){let r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{let r=this.getQueryTimerExtensionWebGL1(),o=r.getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(t){return new Promise(n=>{this.addItemToPoll(()=>t.isFencePassed(),()=>n())})}pollItems(){let t=LSe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=t;++n){let{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,n){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in z().platform&&(r=z().platform.setTimeoutCustom.bind(z().platform)),N.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),II(this.gl,t,this.framebuffer),this.debug&&d0(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(II(this.gl,this.outputTexture,this.framebuffer),this.debug&&d0(this.gl)):o3(this.gl,this.framebuffer)}downloadMatrixDriver(t,n){this.bindTextureToFrameBuffer(t);let r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(t,n,r){this.throwIfDisposed();let o=this.gl;II(o,t,this.framebuffer),this.debug&&d0(o),this.outputTexture=t,Ee(o,()=>o.viewport(0,0,n,r)),Ee(o,()=>o.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(t,n,r,o){this.throwIfDisposed(),Ee(this.gl,()=>this.gl.scissor(t,n,r,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function LSe(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}var P3={};tn(P3,{addImpl:()=>h3,bincountImpl:()=>nX,bincountReduceImpl:()=>rX,bitwiseAndImpl:()=>m3,castImpl:()=>p3,ceilImpl:()=>g3,concatImpl:()=>oX,equalImpl:()=>y3,expImpl:()=>v3,expm1Impl:()=>x3,floorDivImpl:()=>w3,floorImpl:()=>b3,gatherNdImpl:()=>iX,gatherV2Impl:()=>sX,greaterEqualImpl:()=>C3,greaterImpl:()=>E3,lessEqualImpl:()=>_3,lessImpl:()=>T3,linSpaceImpl:()=>aX,logImpl:()=>I3,maxImpl:()=>uX,maximumImpl:()=>S3,minimumImpl:()=>D3,multiplyImpl:()=>y0,negImpl:()=>cX,notEqualImpl:()=>N3,prodImpl:()=>fX,raggedGatherImpl:()=>pX,raggedRangeImpl:()=>mX,raggedTensorToTensorImpl:()=>vX,rangeImpl:()=>xX,rsqrtImpl:()=>R3,scatterImpl:()=>bX,sigmoidImpl:()=>wX,simpleAbsImpl:()=>eX,sliceImpl:()=>EX,sparseFillEmptyRowsImpl:()=>CX,sparseReshapeImpl:()=>TX,sparseSegmentReductionImpl:()=>_X,sqrtImpl:()=>IX,squaredDifferenceImpl:()=>k3,staticRegexReplaceImpl:()=>O3,stridedSliceImpl:()=>SX,stringNGramsImpl:()=>DX,stringSplitImpl:()=>NX,stringToHashBucketFastImpl:()=>AX,subImpl:()=>F3,tileImpl:()=>RX,topKImpl:()=>OX,transposeImpl:()=>lX,uniqueImpl:()=>MX});function FI(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&N.assert(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}function eX(e){let t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}function an(e){return(t,n,r,o,i)=>{let s=U.assertAndGetBroadcastShape(t,n),a=s.length,u=N.computeStrides(s),c=N.sizeFromShape(s),f=N.getTypedArrayFromDType(i,c),d=t.length,h=n.length,m=N.computeStrides(t),v=N.computeStrides(n),x=U.getBroadcastDims(t,s),b=U.getBroadcastDims(n,s);if(x.length+b.length===0)for(let C=0;C<f.length;++C)f[C]=e(r[C%r.length],o[C%o.length]);else for(let C=0;C<f.length;++C){let D=N.indexToLoc(C,a,u),O=D.slice(-d);x.forEach(X=>O[X]=0);let F=N.locToIndex(O,d,m),B=D.slice(-h);b.forEach(X=>B[X]=0);let H=N.locToIndex(B,h,v);f[C]=e(r[F],o[H])}return[f,s]}}function Bm(e){let{inputs:t,backend:n}=e,{real:r,imag:o}=t,i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(a.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(o.shape,"float32",s)},a}function PI(e,t,n="float32"){if(n==="complex64"){let o=PI(e,t,"float32"),i=PI(e,t,"float32");return Bm({inputs:{real:o,imag:i},backend:e})}let r=N.makeZerosTypedArray(N.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function d3(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function tX(e){let{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,i)}function p3(e,t,n,r){if(r==="int32"){let o=Int32Array.from(e);return[t,"int32",o]}if(r==="bool"){let o=N.toTypedArray([0],n),[i,s]=an((a,u)=>a!==u?1:0)(t,[],e,o,"bool");return[s,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function g0(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dtype:i}=r;if(i==="complex64"){if(o.dtype==="complex64")return d3({inputs:{x:o},backend:n});let f=PI(n,o.shape,o.dtype),d=g0({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),h=Bm({inputs:{real:d,imag:f},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),h}if(o.dtype==="complex64"){let f=tX({inputs:{input:o},backend:n}),d=g0({inputs:{x:f},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(f),d}if(!N.hasEncodingLoss(o.dtype,i)){let f=d3({inputs:{x:o},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:i}}let s=n.data.get(o.dataId).values,[a,u,c]=p3(s,o.shape,o.dtype,i);return n.makeTensorInfo(a,u,c)}function vn(e,t,n,r){return n==null?({inputs:o,backend:i})=>{let{a:s,b:a}=o,u=i;FI([s,a],e);let c=u.data.get(s.dataId).values,f=u.data.get(a.dataId).values,d=s.dtype==="string"?U.fromUint8ToStringArray(c):c,h=s.dtype==="string"?U.fromUint8ToStringArray(f):f,m=r||s.dtype,[v,x]=t(s.shape,a.shape,d,h,m);return u.makeTensorInfo(x,m,v)}:({inputs:o,backend:i})=>{let{a:s,b:a}=o,u=i;if(s.dtype==="complex64"||a.dtype==="complex64"){let c=g0({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),f=u.data.get(c.dataId),d=f.complexTensorInfos.real,h=f.complexTensorInfos.imag,m=u.data.get(d.dataId).values,v=u.data.get(h.dataId).values,x=g0({inputs:{x:a},backend:u,attrs:{dtype:"complex64"}}),b=u.data.get(x.dataId),C=b.complexTensorInfos.real,D=b.complexTensorInfos.imag,O=u.data.get(C.dataId).values,F=u.data.get(D.dataId).values,[B,H,X]=n(s.shape,a.shape,m,v,O,F),Z=u.makeTensorInfo(X,"float32",B),te=u.makeTensorInfo(X,"float32",H),J=Bm({inputs:{real:Z,imag:te},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(x),u.disposeIntermediateTensorInfo(Z),u.disposeIntermediateTensorInfo(te),J}else{let c=u.data.get(s.dataId).values,f=u.data.get(a.dataId).values,d=r||s.dtype,[h,m]=t(s.shape,a.shape,c,f,d);return u.makeTensorInfo(m,d,h)}}}function Um(e){return(t,n,r,o,i,s)=>{let a=U.assertAndGetBroadcastShape(t,n),u=N.sizeFromShape(a),c=a.length,f=N.computeStrides(a),d=N.getTypedArrayFromDType("float32",u),h=N.getTypedArrayFromDType("float32",u),m=U.getBroadcastDims(t,a),v=U.getBroadcastDims(n,a),x=U.mergeRealAndImagArrays(r,o),b=U.mergeRealAndImagArrays(i,s),C=t.length,D=N.computeStrides(t),O=n.length,F=N.computeStrides(n);if(m.length+v.length===0)for(let B=0;B<d.length;B++){let H=B%x.length,X=B%b.length,Z=e(x[H*2],x[H*2+1],b[X*2],b[X*2+1]);d[B]=Z.real,h[B]=Z.imag}else for(let B=0;B<d.length;B++){let H=N.indexToLoc(B,c,f),X=H.slice(-C);m.forEach(ye=>X[ye]=0);let Z=N.locToIndex(X,C,D),te=H.slice(-O);v.forEach(ye=>te[ye]=0);let J=N.locToIndex(te,O,F),ae=e(x[Z*2],x[Z*2+1],b[J*2],b[J*2+1]);d[B]=ae.real,h[B]=ae.imag}return[d,h,a]}}var h3=an((e,t)=>e+t),VSe=Um((e,t,n,r)=>({real:e+n,imag:t+r})),lwt=vn(_l,h3,VSe);function nX(e,t,n,r,o){let i=N.sizeFromShape(r),s=N.makeZerosTypedArray(o,n);for(let a=0;a<e.length;a++){let u=e[a];if(u<0)throw new Error("Input x must be non-negative!");u>=o||(i>0?s[u]+=t[a]:s[u]+=1)}return s}function rX(e,t,n,r=!1){let o=e.shape[0],i=e.shape[1],s=bt([o,n],t.dtype);for(let a=0;a<o;a++)for(let u=0;u<i;u++){let c=e.get(a,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?s.set(1,a,c):t.size>0?s.set(s.get(a,c)+t.get(a,u),a,c):s.set(s.get(a,c)+1,a,c))}return s}var m3=an((e,t)=>e&t),ywt=vn(Uh,m3);function Sr(e){return(t,n,r)=>{let o=N.getArrayFromDType(n,t.length);for(let i=0;i<t.length;++i)o[i]=e(t[i],r);return o}}function $I(e,t,n){let r=Sr(t);return ti(e,r,n)}function ti(e,t,n){return({inputs:r,attrs:o,backend:i})=>{let{x:s}=r;FI(s,e);let a=i,u=a.data.get(s.dataId).values,c;if(s.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");c=U.fromUint8ToStringArray(u)}else c=u;let f=n||s.dtype,d=t(c,f,o);return a.makeTensorInfo(s.shape,f,d)}}var g3=Sr(e=>Math.ceil(e)),Dwt=ti(Gh,g3);function oX(e,t,n,r){let o=N.getArrayFromDType(n,N.sizeFromShape(t));if(r&&n!=="string"){let i=0;e.forEach(s=>{let a=N.sizeFromShape(s.shape);o.set(s.vals,i),i+=a})}else{let i=0;e.forEach(s=>{let a=n==="string"?U.fromUint8ToStringArray(s.vals):s.vals,u=0;for(let c=0;c<s.shape[0];++c){let f=c*t[1]+i;for(let d=0;d<s.shape[1];++d)o[f+d]=a[u++]}i+=s.shape[1]})}return o}var y3=an((e,t)=>e===t?1:0),Fwt=vn(jh,y3,null,"bool");var v3=Sr(e=>Math.exp(e)),Bwt=ti(zh,v3,"float32");var x3=Sr(e=>Math.expm1(e)),Hwt=ti(Hh,x3);var b3=Sr(e=>Math.floor(e)),Ywt=ti(Wh,b3);var w3=an((e,t)=>Math.floor(e/t)),tEt=vn(qh,w3,null,"int32");function iX(e,t,n,r,o,i,s,a,u){let c=bt([r,i],n);for(let f=0;f<r;f++){let d=[],h=0;for(let m=0;m<o;m++){let v=e[f*o+m];h+=v*s[m],d.push(v)}if(h<0||h>=u/i)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let m=0;m<i;m++)c.values[f*i+m]=t.get(...t.indexToLoc(h*i+m))}return c}function sX(e,t,n){let r=bt(n,e.dtype);for(let o=0;o<r.size;++o){let s=r.indexToLoc(o).slice(),a=s[0],u=s[2],c=t.locToIndex([a,u]);s[2]=t.values[c];let f=e.locToIndex(s);0<=f&&f<e.values.length&&(r.values[o]=e.values[f])}return r}var E3=an((e,t)=>e>t?1:0),lEt=vn(Kh,E3,null,"bool");var C3=an((e,t)=>e>=t?1:0),mEt=vn(Xh,C3,null,"bool");var T3=an((e,t)=>e<t?1:0),bEt=vn(Yh,T3,null,"bool");var _3=an((e,t)=>e<=t?1:0),_Et=vn(Zh,_3,null,"bool");function aX(e,t,n){let r=(t-e)/(n-1),o=N.makeZerosTypedArray(n,"float32");o[0]=e;for(let i=1;i<o.length;i++)o[i]=o[i-1]+r;return o}var I3=Sr(e=>Math.log(e)),kEt=ti(Qh,I3);function uX(e,t,n,r){let o=N.getTypedArrayFromDType(r,N.sizeFromShape(n));for(let i=0;i<o.length;++i){let s=i*t,a=e[s];for(let u=0;u<t;++u){let c=e[s+u];(Number.isNaN(c)||c>a)&&(a=c)}o[i]=a}return o}var S3=an((e,t)=>Math.max(e,t)),VEt=vn(Jh,S3);var D3=an((e,t)=>Math.min(e,t)),zEt=vn(em,D3);var y0=an((e,t)=>e*t),BSe=Um((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),XEt=vn(tm,y0,BSe);function cX(e,t,n){let r=N.createScalarValue(-1,n);return y0([],t,r,e,n)}var N3=an((e,t)=>e!==t?1:0),rCt=vn(nm,N3,null,"bool");function lX(e,t,n,r,o){let i=t.length,s=N.sizeFromShape(t),a=N.computeStrides(t),u=N.computeStrides(o),c=N.getTypedArrayFromDType(n,N.sizeFromShape(o));for(let f=0;f<s;++f){let d=N.indexToLoc(f,i,a),h=new Array(d.length);for(let v=0;v<h.length;v++)h[v]=d[r[v]];let m=N.locToIndex(h,i,u);c[m]=e[f]}return c}function fX(e,t,n,r){let[o,i]=U.computeOutAndReduceShapes(e,r),s=uo(t,"int32"),a=N.makeZerosTypedArray(N.sizeFromShape(o),s),u=N.sizeFromShape(i);for(let c=0;c<a.length;++c){let f=c*u,d=1;for(let h=0;h<u;++h)d*=n[f+h];a[c]=d}return{outVals:a,outShape:o,outDtype:s}}function USe(e,t,n){e.forEach((r,o)=>{if(r<0||r>=n){let i=N.indexToLoc(o,t.length,N.computeStrides(t)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function GSe(e,t){for(let n=0;n<e.length;++n){let r=e[n],o=n===e.length-1?t:e[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function jSe(e,t,n,r){let o=[],i=0,s=t.length-1+n.length,a=new Array(s).fill(null).map(()=>[0]);GSe(n,r);let u=1;for(let c=0;c<t.length-1;++c){u*=t[c];let f=t[c+1];for(let d=1;d<u+1;++d)a[c].push(d*f)}for(let c=0;c<e.length;++c){let f=e[c],d=e[c]+1;for(let h=0;h<n.length;++h){let m=n[h],v=h+t.length-1;if(v>=0){let x=a[v],b=x[x.length-1]-m[f];for(let C=f;C<d;++C)a[v].push(m[C+1]+b)}f=m[f],d=m[d]}d!==f&&(o.push([f,d]),i+=d-f)}return{outSplits:a,valueSlices:o,numValues:i}}function zSe(e){let t=[];for(let n=0;n<e.length;++n){let r=e[n].length,o=N.getArrayFromDType("int32",r);t.push(o),e[n].forEach((i,s)=>o[s]=i)}return t}function dX(e,t){let n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function HSe(e,t,n,r,o,i){let s=dX(t,2)[1],a=dX(i,2)[1],u=0;for(let c of n)for(let f=c[0];f<c[1];++f){for(let d=0;d<r;++d)o[u*a+d]=e[f*s+d];++u}}function WSe(e,t,n,r,o){let i=t.slice();i[0]=o;let s=N.getArrayFromDType(n,N.sizeFromShape(i)),a=e.length,u=a===0?0:a/t[0];return HSe(e,t,r,u,s,i),[s,i]}function pX(e,t,n,r,o,i,s,a){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");let u=t[0][0]-1;if(USe(i,s,u),r.length===0)throw new Error("params.rank must be nonzero");let c=r[0],{outSplits:f,valueSlices:d,numValues:h}=jSe(i,s,e,c),m=zSe(f),v=WSe(n,r,o,d,h);return[m,v[0],v[1]]}var hX=2147483647;function mX(e,t,n,r,o,i,s){if(t.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");let a=t.length===0,u=o.length===0,c=s.length===0,f=[];a||f.push(t[0]),u||f.push(o[0]),c||f.push(s[0]);for(let b=1;b<f.length;++b)if(f[b]!==f[b-1])throw new Error("starts, limits, and deltas must have the same shape");let d=f.length===0?1:f[0],h=N.getArrayFromDType("int32",d+1);h[0]=0;for(let b=0;b<d;++b){let C=a?e[0]:e[b],D=u?r[0]:r[b],O=c?i[0]:i[b];if(O===0)throw new Error("Requires delta != 0");let F;if(O>0&&D<C||O<0&&D>C)F=0;else if(F=Math.ceil(Math.abs((D-C)/O)),F>hX)throw new Error(`Requires ((limit - start) / delta) <= ${hX}`);h[b+1]=h[b]+F}let m=h[d],v=N.getArrayFromDType(n,m),x=0;for(let b=0;b<d;++b){let C=h[b+1]-h[b],D=a?e[0]:e[b],O=c?i[0]:i[b];for(let F=0;F<C;++F)v[x++]=D,D+=O}return[h,v]}var Ys=U.RowPartitionType,A3=class e{constructor(t,n,r,o,i,s,a,u,c,f){this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=o,this.valuesDType=i,this.defaultValue=s,this.defaultValueShape=a,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=U.getRowPartitionTypesHelper(f),this.raggedRank=U.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===Ys.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===Ys.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){let n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case Ys.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case Ys.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Ys[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){let n=t.length;if(n===0||n===1)return 0;let r=0;for(let o=0;o<n-1;++o){let i=t[o+1]-t[o];i>r&&(r=i)}return r}static getMaxWidthValueRowID(t){let n=t.length;if(n===0)return 0;let r=0,o=t[0],i=0;for(let s=1;s<n;++s){let a=t[s];a!==o&&(o=a,i=Math.max(s-r,i),r=s)}return Math.max(n-r,i)}tensorShapeFromTensor(t,n,r=!0){if(n.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return yX(t,r)}calculateOutputSize(t){let n=this.valuesShape,r=this.defaultValueShape;U.validateDefaultValueShape(r,n);let o=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=U.combineRaggedTensorToTensorShapes(this.raggedRank,o,n);s[0]<0&&(s[0]=t);for(let a=1;a<=this.raggedRank;++a)s[a]<0&&(s[a]=this.getMaxWidth(a));return s}calculateFirstParentOutputIndex(t,n,r){let o=Math.min(t,r),i=[],s=0;for(let a=0;a<o;++a,s+=n)i.push(s);for(let a=o;a<t;++a)i.push(-1);return N.assert(i.length===t,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(t,n,r,o){let i=t.length,s=[];for(let a=0;a<i-1;++a){let u=t[a+1]-t[a],c=Math.min(o,u),f=n[a];f===-1&&(c=0);for(let d=0;d<c;++d)s.push(f),f+=r;for(let d=0;d<u-c;++d)s.push(-1)}if(i>0&&s.length!==t[i-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(t,n,r,o){let i=t.length,s=[];if(i===0)return[];let a=0,u=t[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let c=n[u];s.push(c);for(let f=1;f<i;++f){let d=t[f];if(d===u)c>=0&&(++a,a<o?c+=r:c=-1);else{if(a=0,u=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}s.push(c)}if(s.length!==t.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(t,n,r,o){let i=this.getRowPartitionTensor(t),s=this.getRowPartitionTypeByDimension(t);switch(s){case Ys.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,o);case Ys.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,o);default:throw new Error(`Unsupported partition type: ${Ys[s]}`)}}getFirstDimensionSize(){let t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let n=this.rowPartitionTypes[0];switch(n){case Ys.FIRST_DIM_SIZE:return t[0];case Ys.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ys.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ys[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let u=o.length-2;u>=0;--u)o[u]=o[u+1]*r[u+1];let i=yX(r,!1),s=N.getArrayFromDType(this.valuesDType,N.sizeFromShape(i));if(o[0]*r[0]>0){let u=this.calculateFirstParentOutputIndex(n,o[0],r[0]);for(let c=1;c<=this.raggedRank;++c)u=this.calculateOutputIndex(c-1,u,o[c],r[c]);this.setOutput(this.raggedRank,u,s,i)}return[i,s]}setOutput(t,n,r,o){if(r.length===0)return;let i=this.values,s=r,a=o.slice();a=a.slice(t+1);let u=N.sizeFromShape(a),c=n.length,f=this.defaultValue;if(f.length!==u&&f.length!==1){let v=this.defaultValueShape;ze(()=>{let x=Q(f,v);f=kl(x,a).dataSync()})}let d=0,h=0,m=0;for(let v=0;v<=c;++v){let x=v<c?n[v]:-1;if(x===m){++m;continue}if(h<m){let b=i.subarray(d*u),C=s.subarray(h*u),D=(m-h)*u;gX(C,b,D)}if(v>=c){let b=r.length;x=Math.floor(b/u)}if(x>m)if(this.defaultValue.length===1)s.subarray(m*u,x*u).fill(this.defaultValue[0]),m=x;else for(;x>m;){let b=s.slice(m*u);gX(b,f,u),++m}x<0?(d=v+1,h=m):(d=v,h=m,m=h+1)}}};function gX(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function yX(e,t){let n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function vX(e,t,n,r,o,i,s,a,u,c){return new A3(e,t,n,r,o,i,s,a,u,c).compute()}function xX(e,t,n,r){let o=e===t,i=e<t&&n<0,s=t<e&&n>1;if(o||i||s)return N.makeZerosTypedArray(0,r);let a=Math.abs(Math.ceil((t-e)/n)),u=N.makeZerosTypedArray(a,r);t<e&&n===1&&(n=-1),u[0]=e;for(let c=1;c<u.length;c++)u[c]=u[c-1]+n;return u}var R3=Sr(e=>1/Math.sqrt(e)),bCt=ti(rm,R3);function bX(e,t,n,r,o,i,s,a,u,c){let f=[r/o,o],d=e.values,h=t.values;if(r===0)return bt(n,t.dtype);let m=u instanceof hs?u:bt(f,t.dtype);typeof u=="string"||typeof u=="number"?m.values.fill(u):typeof u=="boolean"&&m.values.fill(+u);for(let v=0;v<i;v++){let x=[],b=0;for(let C=0;C<s;C++){let D=d[v*s+C];x.push(D),b+=D*a[C]}if(b<0||b>=r/o)throw new Error(`Invalid indices: ${x} does not index into ${n}`);for(let C=0;C<o;C++)c?m.values[b*o+C]+=h[v*o+C]:m.values[b*o+C]=t.rank===0?h[0]:h[v*o+C]}return m}var wX=Sr(e=>1/(1+Math.exp(-e))),SCt=$I(om,e=>1/(1+Math.exp(-e)));function EX(e,t,n,r,o){let i=ei.isSliceContinous(r,t,n),s=N.sizeFromShape(n),a=N.computeStrides(r);if(i){let d=ei.computeFlatOffset(t,a);return o==="string"?e.slice(d,d+s):e.subarray(d,d+s)}let u=o==="string"?U.fromUint8ToStringArray(e):e,c=bt(r,o,u),f=bt(n,o);for(let d=0;d<f.size;++d){let h=f.indexToLoc(d),m=h.map((v,x)=>v+t[x]);f.set(c.get(...m),...h)}return o==="string"?U.fromStringArrayToUint8(f.values):f.values}function CX(e,t,n,r,o,i,s){let a=t[0],u=i[0],c=new Array(u),f=new Array(a),d=t[1];if(u===0){if(a!==0)throw new Error(U.getSparseFillEmptyRowsIndicesDenseShapeMismatch(a));let b=N.getArrayFromDType(n,0),C=N.getArrayFromDType(o,0);return[b,[0,d],C,c,f]}let h=!0,m=0,v=new Array(u).fill(0);for(let b=0;b<a;++b){let C=e[b*d];if(C<0)throw new Error(U.getSparseFillEmptyRowsNegativeIndexErrorMessage(b,C));if(C>=u)throw new Error(U.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(b,C,u));++v[C],h=h&&C>=m,m=C}let x=!0;for(let b=0;b<u;++b){let C=v[b]===0;c[b]=C,x=x&&!C,v[b]=Math.max(v[b],1),b>0&&(v[b]+=v[b-1])}if(x&&h){let b=e,C=r;for(let D=0;D<a;++D)f[D]=D;return[b,[a,d],C,c,f]}else{let b=v[u-1],C=N.getArrayFromDType(n,b*d),D=N.getArrayFromDType(o,b),O=new Array(u).fill(0);for(let F=0;F<a;++F){let B=e[F*d],H=O[B],X=(B===0?0:v[B-1])+H;O[B]++;for(let Z=0;Z<d;++Z)C[X*d+Z]=e[F*d+Z];D[X]=r[F],f[F]=X}for(let F=0;F<u;++F)if(O[F]===0){let H=F===0?0:v[F-1];C[H*d+0]=F;for(let X=1;X<d;++X)C[H*d+X]=0;D[H]=s}return[C,[b,d],D,c,f]}}function TX(e,t,n,r,o){let i=N.sizeFromShape(r),s=t[0],a=o.length,u=[],c=1,f=-1;for(let b=0;b<a;++b){let C=o[b];if(C===-1){if(f!==-1)throw new Error(U.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(f,b));f=b,u.push(1)}else{if(C<0)throw new Error(U.getSparseReshapeNegativeOutputDimErrorMessage(b,C));c*=C,u.push(C)}}if(f!==-1){if(c<=0)throw new Error(U.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let b=Math.trunc(i/c);if(c*b!==i)throw new Error(U.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[f]=b}if(N.sizeFromShape(u)!==i)throw new Error(U.getSparseReshapeInputOutputMismatchErrorMessage(r,u));let h=r.length,m=[];if(h>0){m[h-1]=1;for(let b=h-2;b>=0;--b)m[b]=m[b+1]*r[b+1]}let v=[];if(a>0){v[a-1]=1;for(let b=a-2;b>=0;--b)v[b]=v[b+1]*u[b+1]}let x=N.getArrayFromDType(n,s*a);for(let b=0;b<s;++b){let C=0;for(let D=0;D<h;++D)C+=e[b*h+D]*m[D];for(let D=0;D<a;++D)x[b*a+D]=Math.trunc(C/v[D]),C%=v[D]}return[x,[s,a],u]}function _X(e,t,n,r,o,i=!1,s=0){let a=r.length,u=[t[0],e.length/t[0]],c=u[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(U.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let h=t.slice();h[0]=d;let m=h.reduce((O,F)=>O*F,1),v=N.getArrayFromDType(n,m);if(a===0)return d>0&&v.fill(s),[v,h];if(d<=0)throw new Error(U.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let x=0,b=1,C=0,D=o[x];for(;;){let O=0;if(b<a){if(O=o[b],D===O){++b;continue}if(D>=O)throw new Error(U.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(D<0||D>=d)throw new Error(U.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(D,d));D>C&&v.fill(s,C*c,D*c);for(let F=x;F<b;++F){let B=r[F];if(B<0||B>=u[0])throw new Error(U.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(F,r[F],u[0]));for(let H=0;H<c;H++)v[D*c+H]+=e[B*c+H]}if(i)for(let F=0;F<c;F++)v[D*c+F]/=b-x;if(x=b,++b,C=D+1,D=O,b>a)break}return C<d&&v.fill(s,C*c,d*c),[v,h]}var IX=Sr(e=>Math.sqrt(e)),BCt=$I(im,e=>Math.sqrt(e));var k3=an((e,t)=>{let n=e-t;return n*n}),HCt=vn(sm,k3);var O3=Sr((e,t)=>{let{pattern:n,replaceGlobal:r,rewrite:o}=t;return e.replace(new RegExp(n,r?"g":""),o)}),YCt=ti(am,O3);function SX(e,t,n,r){let o=bt(e,t.dtype);for(let i=0;i<o.size;i++){let s=o.indexToLoc(i),a=new Array(s.length);for(let u=0;u<a.length;u++)a[u]=s[u]*n[u]+r[u];o.set(t.get(...a),...s)}return o}var M3=class{constructor(t,n,r,o,i,s){this.separator=N.encodeString(t),this.nGramWidths=n,this.leftPad=N.encodeString(r),this.rightPad=N.encodeString(o),this.padWidth=i,this.preserveShort=s}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,n){let r=this.getPadWidth(n);return Math.max(0,t+2*r-n+1)}createNGrams(t,n,r,o,i,s){for(let a=0;a<i;++a){let u=this.getPadWidth(s),c=Math.max(0,u-a),f=Math.max(0,u-(i-(a+1))),d=s-(c+f),h=n+(c>0?0:a-u),m=0;m+=c*this.leftPad.length;for(let D=0;D<d;++D)m+=t[h+D].length;m+=f*this.rightPad.length;let v=c+f+d-1;m+=v*this.separator.length,r[o+a]=new Uint8Array(m);let x=r[o+a],b=0,C=D=>D.forEach(O=>x[b++]=O);for(let D=0;D<c;++D)C(this.leftPad),C(this.separator);for(let D=0;D<d-1;++D)C(t[h+D]),C(this.separator);if(d>0){C(t[h+d-1]);for(let D=0;D<f;++D)C(this.separator),C(this.rightPad)}else{for(let D=0;D<f-1;++D)C(this.rightPad),C(this.separator);C(this.rightPad)}}}compute(t,n){let r=t.length,o=n.length;if(o>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let c=1;c<o;++c){let f=n[c]>=u;if(f=f&&n[c]<=r,!f)throw new Error(`Invalid split value ${n[c]}, must be in [${u}, ${r}]`);u=n[c]}if(u!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${u}`)}let i=o-1,s=N.getArrayFromDType("int32",o);if(r===0||o===0){let u=new Array(r);for(let c=0;c<=i;++c)s[c]=0;return[u,s]}s[0]=0;for(let u=1;u<=i;++u){let c=n[u]-n[u-1],f=0;this.nGramWidths.forEach(d=>{f+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&f===0&&(f=1),s[u]=s[u-1]+f}let a=new Array(s[i]);for(let u=0;u<i;++u){let c=n[u],f=s[u];if(this.nGramWidths.forEach(d=>{let h=n[u+1]-n[u],m=this.getNumNGrams(h,d);this.createNGrams(t,c,a,f,m,d),f+=m}),this.preserveShort&&f===s[u]){let d=n[u+1]-n[u];if(d===0)continue;let h=d+2*this.padWidth;this.createNGrams(t,c,a,f,1,h)}}return[a,s]}};function DX(e,t,n,r,o,i,s,a){return new M3(n,r,o,i,s,a).compute(e,t)}function qSe(e,t,n,r){if(!e.length)return;if(t.length===0){for(let i=0;i<e.length;++i)r.push(e.subarray(i,i+1));return}if(t.length===1){let i=t[0],s=e.indexOf(i);for(;s!==-1;){let a=e.subarray(0,s);(!n||a.length!==0)&&r.push(a),e=e.subarray(s+1),s=e.indexOf(i)}(!n||e.length!==0)&&r.push(e);return}let o=0;for(let i=0;i<e.length+1;i++)if(i===e.length||t.indexOf(e[i])!==-1){let s=e.subarray(o,i);(!n||s.length!==0)&&r.push(s),o=i+1}}function NX(e,t,n){let r=e.length,o=[],i=0,s=0,a=new Array(r);for(let h=0;h<r;++h){let m=o.length;qSe(e[h],t,n,o);let v=o.length-m;a[h]=v,i+=v,s=Math.max(s,v)}let u=N.getArrayFromDType("int32",i*2),c=new Array(i),f=[r,s],d=0;for(let h=0;h<r;++h)for(let m=0;m<a[h];++m)u[d*2]=h,u[d*2+1]=m,c[d]=o[d],++d;return[u,c,f]}function AX(e,t){let n=N.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=N.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var F3=an((e,t)=>e-t),KSe=Um((e,t,n,r)=>({real:e-n,imag:t-r})),cTt=vn(um,F3,KSe);function RX(e,t){let n=new Array(e.rank);for(let o=0;o<n.length;o++)n[o]=e.shape[o]*t[o];let r=bt(n,e.dtype);for(let o=0;o<r.values.length;++o){let i=r.indexToLoc(o),s=new Array(e.rank);for(let u=0;u<s.length;u++)s[u]=i[u]%e.shape[u];let a=e.locToIndex(s);r.values[o]=e.values[a]}return r}var v0=(e,t)=>{let n=t.value-e.value;return n===0?e.index-t.index:n};function kX(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){let a=r-n+1,u=t-n+1,c=Math.log(a),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(a-f)/a)*Math.sign(u-a/2),h=Math.max(n,Math.floor(t-u*f/a+d)),m=Math.min(r,Math.floor(t+(a-u)*f/a+d));kX(e,t,h,m)}let o=e[t],i=n,s=r;for(N.swap(e,n,t),v0(e[r],o)>0&&N.swap(e,n,r);i<s;){for(N.swap(e,i,s),i++,s--;v0(e[i],o)<0;)i=i+1;for(;v0(e[s],o)>0;)s=s-1}v0(e[n],o)===0?N.swap(e,n,s):(s=s+1,N.swap(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}}function OX(e,t,n,r,o){let i=t[t.length-1],[s,a]=[e.length/i,i],u=N.getTypedArrayFromDType(n,s*r),c=N.getTypedArrayFromDType("int32",s*r);for(let d=0;d<s;d++){let h=d*a,m=e.subarray(h,h+a),v=new Array(m.length);m.forEach((D,O)=>v[O]={value:D,index:O}),r<v.length&&(kX(v,r),v=v.slice(0,r)),o&&v.sort(v0);let x=d*r,b=u.subarray(x,x+r),C=c.subarray(x,x+r);for(let D=0;D<r;D++)b[D]=v[D].value,C[D]=v[D].index}let f=t.slice();return f[f.length-1]=r,[bt(f,n,u),bt(f,"int32",c)]}function MX(e,t,n,r){let o=N.parseAxisParam(t,n)[0],i=[1,n[0],1];for(let v=0;v<o;v++)i[0]*=n[v];i[1]=n[o];for(let v=o+1;v<n.length;v++)i[2]*=n[v];let s=new Map,a=new Int32Array(n[o]),u=new hs(i,r,e),c=[],f=i[0]===1&&i[2]===1;for(let v=0;v<n[o];v++){let x;if(f)x=e[v].toString();else{let C=[];for(let D=0;D<i[0];D++)for(let O=0;O<i[2];O++)C.push(u.get(D,v,O));x=C.join(",")}let b=s.get(x);if(b!=null)a[v]=b;else{let C=s.size;s.set(x,C),a[v]=C,c.push(v)}}let d=i.slice();d[1]=s.size;let h=new hs(d,r);c.forEach((v,x)=>{for(let b=0;b<i[0];b++)for(let C=0;C<i[2];C++)h.set(u.get(b,v,C),b,x,C)});let m=n.slice();return m[o]=d[1],{outputValues:h.values,outputShape:m,indices:a}}var{addImpl:FX,bincountImpl:LI,bincountReduceImpl:PX,bitwiseAndImpl:$X,castImpl:LX,ceilImpl:VX,concatImpl:BX,equalImpl:UX,expImpl:GX,expm1Impl:jX,floorImpl:zX,gatherNdImpl:HX,gatherV2Impl:WX,greaterImpl:qX,greaterEqualImpl:KX,lessImpl:XX,lessEqualImpl:YX,linSpaceImpl:ZX,logImpl:QX,maxImpl:JX,maximumImpl:eY,minimumImpl:tY,multiplyImpl:nY,negImpl:rY,notEqualImpl:oY,prodImpl:iY,raggedGatherImpl:sY,raggedRangeImpl:aY,raggedTensorToTensorImpl:uY,rangeImpl:cY,rsqrtImpl:lY,scatterImpl:fY,sigmoidImpl:dY,simpleAbsImpl:VI,sliceImpl:pY,sparseFillEmptyRowsImpl:hY,sparseReshapeImpl:mY,sparseSegmentReductionImpl:BI,sqrtImpl:gY,staticRegexReplaceImpl:yY,stridedSliceImpl:vY,stringNGramsImpl:xY,stringSplitImpl:bY,stringToHashBucketFastImpl:wY,subImpl:EY,tileImpl:CY,topKImpl:TY,transposeImpl:Fd,uniqueImpl:_Y}=P3;function $3(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>`${e}.${n}`)}function Vn(e,t){return t===1?[e]:$3(e,t)}function IY(e,t){if(e===1)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}var UI=class{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=qt(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let n=Vn("rc",this.rank),r=Qe(this.rank),o=this.getOutOfBoundsCondition(n),i=this.getSetup(n),s=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(t){let n=[];for(let r=0;r<=1;r++)for(let o=0;o<=1;o++){let i=`${r===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)i=`${t[t.length-1-s]},`+i;n.push(i)}return n}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${t[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(t){if(this.rank===1)return"";let n=t.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${o};
    `}getOutput(t){let n=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}};var Gm=class{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length);let r="";for(let o=0;o<4;o++){let i="thisRC = rc;";o%2===1&&(i+="thisRC.z += 1;"),o>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${XSe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?Om():km(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${r}

        setOutput(result);
      }
    `}};function XSe(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?NK(["r","c","d"],"inputShape"):Na(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}var GI=class{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(t,n,r){let o=DY(n,r),i=NY(t,o,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);let s=SY(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();let u=this.freeTextures[i].pop();return this.usedTextures[i].push(u),u}let a;return o===Zr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===Zr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===Zr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===Zr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===Zr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),a}releaseTexture(t,n,r,o){if(this.freeTextures==null)return;let i=DY(r,o),s=NY(n,i,o);s in this.freeTextures||(this.freeTextures[s]=[]);let a=SY(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,o),u=z().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=a):(this.freeTextures[s].push(t),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;let c=this.usedTextures[s],f=c&&c.indexOf(t);if(f==null||f<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[f]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;let t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);let n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let t in this.freeTextures)this.freeTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(let t in this.usedTextures)this.usedTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function YSe(e,t){let n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function SY(e,t,n,r,o){let i=ZSe(t,r),s;if(o){let[u,c]=yu(e[0],e[1]);s=u*c}else{let[u,c]=Rd(e[0],e[1]);s=u*c}let a=YSe(n,i);return s*a}function ZSe(e,t){switch(e){case Zr.PACKED_2X2_FLOAT32:return l3(t);case Zr.PACKED_2X2_FLOAT16:return f3(t);case Zr.UNPACKED_FLOAT32:return a3(t);case Zr.UNPACKED_FLOAT16:return u3(t);case Zr.PACKED_4X1_UNSIGNED_BYTE:return c3(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function QSe(e){return z().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Zr.PACKED_2X2_FLOAT32:Zr.UNPACKED_FLOAT32:e?Zr.PACKED_2X2_FLOAT16:Zr.UNPACKED_FLOAT16}function DY(e,t){if(e===lo.UPLOAD)return Zr.PACKED_2X2_FLOAT32;if(e===lo.RENDER||e==null)return QSe(t);if(e===lo.DOWNLOAD||e===lo.PIXELS)return Zr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function NY(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}var Ur=class{constructor(t,n){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},dr="if (isnan(x)) return x;",AY="return x;",L3="return abs(x);";var RY="return (x >= 0.0) ? x : (exp(x) - 1.0);",kY=dr+`
  return (x < 0.0) ? 0.0 : x;
`,OY=dr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,xu="return x;",MY="return 1.0 / (1.0 + exp(-1.0 * x));";var PY="return x;",$Y=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,LY=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,VY=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,BY="return 1.0 / (1.0 + exp(-1.0 * x));",ni=class{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};var jI=class{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length);let n=t.length,r=Vn("rc",n),o=Qe(n),i=IY(n,r),s=r.slice(-2),a=n<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}};var e2e=gu.whereImpl,t2e=1e-7,n2e=1e-4,zI={};function r2e(e){return e in zI||(zI[e]={}),zI[e]}var o2e=z().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),i2e=600;function s2e(){return z().global.screen==null?1024:z().global.screen.height*z().global.screen.width*window.devicePixelRatio*i2e/1024/1024}var UY=(()=>{class e extends Zf{nextDataId(){return e.nextDataId++}constructor(n){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!z().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let r;if(n!=null){if(n instanceof Vm)r=n;else{let o=Ri(z().getNumber("WEBGL_VERSION"),n);r=new Vm(o)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let o=Ri(z().getNumber("WEBGL_VERSION"));r=new Vm(o),this.binaryCache=r2e(z().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=r,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new GI(this.gpgpu),this.numMBBeforeWarning=s2e(),this.texData=new Sv(this,ac())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(n,r,o,i,s,a){let u=this.makeTensorInfo(r,o),c=this.texData.get(u.dataId);c.isPacked=!1,c.texture={texture:n,texShape:[i,s]},c.texShape=[i,s];let f=p0(r),d=new h0(f,!1,a),h=this.runWebGLProgram(d,[u],o,[[i,s]]);return h.shape=r,c.texture=null,this.disposeIntermediateTensorInfo(u),h.dataId}write(n,r,o){if((z().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||z().getBool("DEBUG"))&&this.checkNumericalProblems(n),o==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let i={id:this.nextDataId()};return this.texData.set(i,{shape:r,dtype:o,values:n,usage:lo.UPLOAD,refCount:1}),i}refCount(n){return this.texData.has(n)?this.texData.get(n).refCount:0}incRef(n){let r=this.texData.get(n);r.refCount++}decRef(n){if(this.texData.has(n)){let r=this.texData.get(n);r.refCount--}}move(n,r,o,i,s){if(z().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:o,dtype:i,values:r,usage:lo.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(n){this.disposeData(n.dataId)}readSync(n){let r=this.texData.get(n),{values:o,dtype:i,complexTensorInfos:s,slice:a,shape:u,isPacked:c}=r;if(a!=null){let m;c?m=new ni(u,xu):m=new Ur(u,xu);let v=this.runWebGLProgram(m,[{dataId:n,shape:u,dtype:i}],i),x=this.readSync(v.dataId);return this.disposeIntermediateTensorInfo(v),x}if(o!=null)return this.convertAndCacheOnCPU(n);if(i==="string")return o;let f=this.activeTimers!=null,d;f&&(d=N.now());let h;if(i==="complex64"){let m=this.readSync(s.real.dataId),v=this.readSync(s.imag.dataId);h=U.mergeRealAndImagArrays(m,v)}else h=this.getValuesFromTexture(n);return f&&(this.downloadWaitMs+=N.now()-d),this.convertAndCacheOnCPU(n,h)}read(n){return ne(this,null,function*(){if(this.pendingRead.has(n)){let x=this.pendingRead.get(n);return new Promise(b=>x.push(b))}let r=this.texData.get(n),{values:o,shape:i,slice:s,dtype:a,complexTensorInfos:u,isPacked:c}=r;if(s!=null){let x;c?x=new ni(i,xu):x=new Ur(i,xu);let b=this.runWebGLProgram(x,[{dataId:n,shape:i,dtype:a}],a),C=this.read(b.dataId);return this.disposeIntermediateTensorInfo(b),C}if(o!=null)return this.convertAndCacheOnCPU(n);if(z().getBool("DEBUG")&&!z().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&z().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let f=null,d;if(a!=="complex64"&&z().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(n);let x=this.texData.get(d.dataId);f=this.gpgpu.createBufferFromTexture(x.texture.texture,...c0(i))}this.pendingRead.set(n,[]),a!=="complex64"&&(yield this.gpgpu.createAndWaitForFence());let h;if(a==="complex64"){let x=yield Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]),b=x[0],C=x[1];h=U.mergeRealAndImagArrays(b,C)}else if(f==null)h=this.getValuesFromTexture(n);else{let x=N.sizeFromShape(i);h=this.gpgpu.downloadFloat32MatrixFromBuffer(f,x)}if(d!=null&&this.disposeIntermediateTensorInfo(d),f!=null){let x=this.gpgpu.gl;Ee(x,()=>x.deleteBuffer(f))}let m=this.convertAndCacheOnCPU(n,h),v=this.pendingRead.get(n);return this.pendingRead.delete(n),v.forEach(x=>x(m)),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n)&&ac().removeDataId(n,this),this.pendingDeletes--),m})}readToGPU(n,r={}){let o=this.texData.get(n),{values:i,shape:s,slice:a,dtype:u,isPacked:c,texture:f}=o;if(u==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let v;c?v=new ni(s,xu):v=new Ur(s,xu);let x=this.runWebGLProgram(v,[{dataId:n,shape:s,dtype:u}],u),b=this.readToGPU(x,r);return this.disposeIntermediateTensorInfo(x),b}if(f==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let d=this.decode(n,r.customTexShape),h=ac().makeTensorFromTensorInfo(d),m=this.texData.get(d.dataId);return Object.assign({tensorRef:h},m.texture)}bufferSync(n){let r=this.readSync(n.dataId);if(n.dtype==="string")try{let o=r.map(i=>N.decodeString(i));return bt(n.shape,n.dtype,o)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return bt(n.shape,n.dtype,r)}checkNumericalProblems(n){if(n!=null)for(let r=0;r<n.length;r++){let o=n[r];if(!cK(o))throw z().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${o} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${o} cannot be represented on this device.`)}}getValuesFromTexture(n){let{shape:r,dtype:o,isPacked:i}=this.texData.get(n),s=N.sizeFromShape(r);if(z().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let m=this.decode(n),v=this.texData.get(m.dataId),x=this.gpgpu.downloadMatrixFromPackedTexture(v.texture.texture,...c0(r)).subarray(0,s);return this.disposeIntermediateTensorInfo(m),x}let a=z().getBool("WEBGL_PACK")&&i===!0,u=a?p0(r):r,c=a?new OI(u):new kI(u),f=this.runWebGLProgram(c,[{shape:u,dtype:o,dataId:n}],"float32"),d=this.texData.get(f.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(f),h}timerAvailable(){return z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(n){let r=this.activeTimers,o=[],i=!1;this.programTimersStack==null?(this.programTimersStack=o,i=!0):this.activeTimers.push(o),this.activeTimers=o,n();let s=N.flatten(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),a=N.flatten(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=r,i&&(this.programTimersStack=null);let u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return ne(this,null,function*(){if(z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(s);u.kernelMs=N.sum(c),u.getExtraProfileInfo=()=>c.map((f,d)=>({name:a[d],ms:f})).map(f=>`${f.name}: ${f.ms}`).join(", ")}else u.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,u})}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:N.now(),endMs:null}}endTimer(n){return z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=N.now(),n)}getQueryTime(n){return ne(this,null,function*(){if(z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(n);let r=n;return r.endMs-r.startMs})}disposeData(n,r=!1){if(this.pendingDisposal.has(n))return!1;if(!this.texData.has(n))return!0;if(r?this.texData.get(n).refCount=0:this.texData.get(n).refCount--,!r&&this.texData.get(n).refCount>0)return!1;if(this.pendingRead.has(n))return this.pendingDisposal.add(n),this.pendingDeletes++,!1;this.releaseGPUData(n);let{complexTensorInfos:o}=this.texData.get(n);return o!=null&&(this.disposeData(o.real.dataId,r),this.disposeData(o.imag.dataId,r)),this.texData.delete(n),!0}releaseGPUData(n){let{texture:r,dtype:o,texShape:i,usage:s,isPacked:a,slice:u}=this.texData.get(n),c=u&&u.origDataId||n,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),r!=null&&(this.numBytesInGPU-=this.computeBytes(i,o),this.textureManager.releaseTexture(r,i,s,a)));let d=this.texData.get(n);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(n){return this.uploadToGPU(n),this.texData.get(n).texture.texture}getDataInfo(n){return this.texData.get(n)}shouldExecuteOnCPU(n,r=o2e){return z().getBool("WEBGL_CPU_FORWARD")&&n.every(o=>this.texData.get(o.dataId).texture==null&&N.sizeFromShape(o.shape)<r)}getGPGPUContext(){return this.gpgpu}where(n){U.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let r=n.dataSync();return e2e(n.shape,r)}packedUnaryOp(n,r,o){let i=new ni(n.shape,r),s=this.compileAndRun(i,[n],o);return ac().makeTensorFromTensorInfo(s)}abs(n){if(this.shouldExecuteOnCPU([n])&&n.dtype!=="complex64"){let i=VI(this.texData.get(n.dataId).values);return this.makeOutput(n.shape,n.dtype,i)}if(z().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,L3,n.dtype);let r=new Ur(n.shape,L3),o=this.compileAndRun(r,[n]);return ac().makeTensorFromTensorInfo(o)}makeTensorInfo(n,r,o){let i;if(r==="string"&&o!=null&&o.length>0&&N.isString(o[0])){let s=o.map(a=>N.encodeString(a));i=this.write(s,n,r)}else i=this.write(o,n,r);return this.texData.get(i).usage=null,{dataId:i,shape:n,dtype:r}}makeOutput(n,r,o){return ac().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,o),this)}unpackTensor(n){let r=new jI(n.shape);return this.runWebGLProgram(r,[n],n.dtype)}packTensor(n){let r=new UI(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)}packedReshape(n,r){let o=[Ul(n.shape),...Gl(n.shape)],i={dtype:n.dtype,shape:o,dataId:n.dataId},s=[Ul(r),...Gl(r)],a=new Gm(s,o),u=!0,c=[o],f=this.runWebGLProgram(a,[i],n.dtype,c,u);return{dataId:f.dataId,shape:r,dtype:f.dtype}}decode(n,r){let o=this.texData.get(n),{isPacked:i,shape:s,dtype:a}=o;if(r!=null){let m=N.sizeFromShape(s),v=r[0]*r[1]*4;N.assert(m<=v,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let u=p0(s),c;i?c=new RI(u):c=new AI(u);let f=!0,d=[r??c0(u)],h=this.runWebGLProgram(c,[{shape:u,dtype:a,dataId:n}],a,d,f,r);return{dtype:a,shape:s,dataId:h.dataId}}runWebGLProgram(n,r,o,i,s=!1,a){let u=this.makeTensorInfo(n.outputShape,o),c=this.texData.get(u.dataId);if(n.packedOutput&&(c.isPacked=!0),n.outPackingScheme===Ad.DENSE){let D=a??c0(n.outputShape);c.texShape=D.map(O=>O*2)}if(n.outTexUsage!=null&&(c.usage=n.outTexUsage),N.sizeFromShape(u.shape)===0)return c.values=N.getTypedArrayFromDType(u.dtype,0),u;let f=[],d=r.map(D=>{if(D.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let O=this.texData.get(D.dataId);if(O.texture==null){if(!n.packedInputs&&N.sizeFromShape(D.shape)<=z().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:D.shape,texData:null,isUniform:!0,uniformValues:O.values};n.packedInputs&&(O.isPacked=!0,O.shape=D.shape)}if(this.uploadToGPU(D.dataId),!!O.isPacked!=!!n.packedInputs)D=O.isPacked?this.unpackTensor(D):this.packTensor(D),f.push(D),O=this.texData.get(D.dataId);else if(O.isPacked&&!kd(O.shape,D.shape)){let F=D,B=D.shape;D.shape=O.shape,D=this.packedReshape(D,B),f.push(D),O=this.texData.get(D.dataId),F.shape=B}return{shape:D.shape,texData:O,isUniform:!1}});this.uploadToGPU(u.dataId);let h={shape:u.shape,texData:c,isUniform:!1},m=$K(n,d,h),v=this.getAndSaveBinary(m,()=>FK(this.gpgpu,n,d,h)),x=this.activeTimers!=null,b;x&&(b=this.startTimer()),z().get("ENGINE_COMPILE_ONLY")||PK(this.gpgpu,v,d,h,i),f.forEach(D=>this.disposeIntermediateTensorInfo(D)),x&&(b=this.endTimer(b),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(b)}));let C=z().getNumber("WEBGL_FLUSH_THRESHOLD");if(C>0){let D=N.now();D-this.lastGlFlushTime>C&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=D)}if(!z().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&s===!1){let D=this.unpackTensor(u);return this.disposeIntermediateTensorInfo(u),D}return u}compileAndRun(n,r,o,i,s=!1){return o=o||r[0].dtype,this.runWebGLProgram(n,r,o,i,s)}getAndSaveBinary(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(z().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(r=>{this.gpgpu.deleteProgram(this.binaryCache[r].webGLProgram),delete this.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ze(()=>{if(!z().get("WEBGL_RENDER_FLOAT32_ENABLED")){let n=z().getBool("DEBUG");z().set("DEBUG",!1);let r=this.abs(Ue(1e-8)).dataSync()[0];if(z().set("DEBUG",n),r>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?t2e:n2e}uploadToGPU(n){let r=this.texData.get(n),{shape:o,dtype:i,values:s,texture:a,usage:u,isPacked:c}=r;if(a!=null)return;let f=this.activeTimers!=null,d;f&&(d=N.now());let h=r.texShape;if(h==null&&(h=EK(o,c),r.texShape=h),s!=null){let m=p0(o),v,x=h[1],b=h[0],C=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(c||!C)&&([x,b]=yu(h[0],h[1])),c?v=new MI(m,C):v=new h0(m,C);let D=C?[b,x]:h,O=this.makeTensorInfo(D,i),F=this.texData.get(O.dataId);C?F.usage=lo.PIXELS:F.usage=lo.UPLOAD,F.texShape=D,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(O.dataId),x,b,s);let B=[[b,x]],X=this.runWebGLProgram(v,[O],i,B,!0),Z=this.texData.get(X.dataId);r.texShape=Z.texShape,r.isPacked=Z.isPacked,r.usage=Z.usage,z().get("ENGINE_COMPILE_ONLY")?this.disposeData(X.dataId):(r.texture=Z.texture,r.values=null,this.texData.delete(X.dataId)),this.disposeIntermediateTensorInfo(O),f&&(this.uploadWaitMs+=N.now()-d)}else{let m=this.acquireTexture(h,u,i,c);r.texture=m}}convertAndCacheOnCPU(n,r){let o=this.texData.get(n),{dtype:i}=o;return r!=null&&(o.values=a2e(r,i)),o.values}acquireTexture(n,r,o,i){if(this.numBytesInGPU+=this.computeBytes(n,o),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(n,r,i)}computeBytes(n,r){return n[0]*n[1]*N.bytesPerElement(r)}checkCompileCompletion(){for(let[,n]of Object.entries(this.binaryCache))this.checkCompletion_(n)}checkCompileCompletionAsync(){return ne(this,null,function*(){let n=[];if(this.gpgpu.parallelCompilationExtension){for(let[,r]of Object.entries(this.binaryCache))n.push(this.checkCompletionAsync_(r));return Promise.all(n)}else{for(let[,r]of Object.entries(this.binaryCache)){let o=new Promise(i=>{try{this.checkCompletion_(r),i(!0)}catch(s){throw s}});n.push(o)}return Promise.all(n)}})}checkCompletionAsync_(n){return ne(this,null,function*(){return this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(n):(yield bF(),this.checkCompletionAsync_(n))})}checkCompletion_(n){if(this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(n.webGLProgram)),this.gpgpu.gl.getShaderParameter(n.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(n3(n.source,this.gpgpu.gl.getShaderInfoLog(n.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let n of Object.values(this.binaryCache)){this.gpgpu.buildVao(n.webGLProgram);let{variablesLocations:r,customUniformLocations:o,infLoc:i,nanLoc:s,outShapeLocation:a,outShapeStridesLocation:u,outTexShapeLocation:c}=s3(this.gpgpu,n.program,n.webGLProgram);n.variablesLocations=r,n.customUniformLocations=o,n.infLoc=i,n.nanLoc=s,n.outShapeLocation=a,n.outShapeStridesLocation=u,n.outTexShapeLocation=c}}createTensorFromGPUData(n,r,o){n.channels=n.channels||"RGBA";let{texture:i,height:s,width:a,channels:u}=n,c=ac().backend;if(!c.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let f=c.writeTexture(i,r,o,s,a,u);return ac().makeTensorFromDataId(f,r,o,c)}}return e.nextDataId=0,e})();function a2e(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){let n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}else throw new Error(`Unknown dtype ${t}`)}Dl.isBrowser()&&tH("webgl",()=>new UY,2);var jm=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var ri=class{constructor(t,n,r){this.variableNames=["A","B"],this.outputShape=U.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=qt(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};var Oi=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;var ki=class{constructor(t,n,r,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=U.assertAndGetBroadcastShape(n,r);let i=this.outputShape.length;this.enableShapeUniforms=qt(i);let s="";if(o)if(i===0||N.sizeFromShape(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${Qe(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let u=Vn("coords",i);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${u[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${u[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${u[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${u[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}};function Bn(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var GY={kernelName:nd,backendName:"webgl",kernelFunc:Bn};function oi(e){let{inputs:t,backend:n}=e,{real:r,imag:o}=t,i=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(i.dataId),a=Bn({inputs:{x:r},backend:n}),u=Bn({inputs:{x:o},backend:n});return s.complexTensorInfos={real:a,imag:u},i}var jY={kernelName:kv,backendName:"webgl",kernelFunc:oi};var V3="return (a < 0.) ? b * a : a;",B3=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function u2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:i}=r,s=n.makeTensorInfo([],"float32",N.createScalarValue(i,"float32")),a=z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ki(B3,o.shape,s.shape):new ri(V3,o.shape,s.shape),u=n.runWebGLProgram(a,[o,s],"float32");return n.disposeIntermediateTensorInfo(s),u}var zY={kernelName:CC,backendName:"webgl",kernelFunc:u2e};var U3="return (a < 0.) ? b * a : a;",G3=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function c2e(e){let{inputs:t,backend:n}=e,{x:r,alpha:o}=t,i=z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ki(G3,r.shape,o.shape):new ri(U3,r.shape,o.shape);return n.runWebGLProgram(i,[r,o],"float32")}var HY={kernelName:qC,backendName:"webgl",kernelFunc:c2e};var Zs="if (isnan(x)) return x;";function Ne({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:o,backend:i})=>{let{x:s}=o,a=i,u=r||s.dtype;if(a.shouldExecuteOnCPU([s])&&n!=null){let d=a.texData.get(s.dataId),h=n(d.values,u);return a.makeTensorInfo(s.shape,u,h)}let c=z().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null,f;return c?f=new ni(s.shape,t):f=new Ur(s.shape,e),a.runWebGLProgram(f,[s],u)}}function Ut({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:i}){return({inputs:s,backend:a})=>{let{a:u,b:c}=s,f=a;if(r&&u.dtype==="complex64"){let v=f.texData.get(u.dataId),x=f.texData.get(c.dataId),[b,C]=[[v.complexTensorInfos.real,x.complexTensorInfos.real],[v.complexTensorInfos.imag,x.complexTensorInfos.imag]].map(O=>{let[F,B]=O,H={dataId:F.dataId,dtype:F.dtype,shape:u.shape},X={dataId:B.dataId,dtype:B.dtype,shape:c.shape},Z=new ri(e,u.shape,c.shape);return f.runWebGLProgram(Z,[H,X],uo(F.dtype,B.dtype))}),D=oi({inputs:{real:b,imag:C},backend:f});return f.disposeIntermediateTensorInfo(b),f.disposeIntermediateTensorInfo(C),D}let d=i||uo(u.dtype,c.dtype);if((u.dtype==="string"||c.dtype==="string"||f.shouldExecuteOnCPU([u,c]))&&o!=null){let v=f.texData.get(u.dataId).values,x=f.texData.get(c.dataId).values,b=u.dtype==="string"?U.fromUint8ToStringArray(v):v,C=u.dtype==="string"?U.fromUint8ToStringArray(x):x,[D,O]=o(u.shape,c.shape,b,C,d),F=f.makeTensorInfo(O,d),B=f.texData.get(F.dataId);return B.values=D,F}let h=z().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null,m;return h?m=new ki(t,u.shape,c.shape,n):m=new ri(e,u.shape,c.shape),f.runWebGLProgram(m,[u,c],d)}}function gc(e,t=!1){if(e==="linear")return t?PY:AY;if(e==="relu")return t?LY:kY;if(e==="elu")return t?$Y:RY;if(e==="relu6")return t?VY:OY;if(e==="prelu")return t?G3:U3;if(e==="leakyrelu")return t?B3:V3;if(e==="sigmoid")return t?BY:MY;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}var zm=class{constructor(t,n,r,o=!1,i=!1,s=!1,a=null,u=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=qt(this.outputShape.length);let f=o?t[1]:t[2],d=Math.ceil(f/2),h=o?"i * 2, rc.y":"rc.y, i * 2",m=i?"rc.z, i * 2":"i * 2, rc.z",v=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],x=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],b="",C="";a&&(u?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:b=`vec4 activation(vec4 x) {
          ${a}
        }`,C="result = activation(result);");let D=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let O="rc.x",F="rc.x";t[0]<n[0]?O=`imod(rc.x, ${t[0]})`:n[0]<t[0]&&(F=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${b}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${O};
        int batchB = ${F};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${m});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${v[0]} * ${x[0]});
          result += (${v[1]} * ${x[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${D}

        ${C}

        setOutput(result);
      }
    `}};var j3={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},x0=class{constructor(t,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=U.assertAndGetBroadcastShape(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var WY="return a * b;";function b0(e){let{inputs:t,backend:n}=e,{a:r,b:o}=t,i=U.upcastType(r.dtype,o.dtype);if(r.dtype==="complex64"){let a=n.texData.get(r.dataId),u=n.texData.get(o.dataId),c=new x0(j3.REAL,r.shape,o.shape),f=new x0(j3.IMAG,r.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:o.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:o.shape}],h=n.runWebGLProgram(c,d,"float32"),m=n.runWebGLProgram(f,d,"float32"),v=oi({inputs:{real:h,imag:m},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}if(n.shouldExecuteOnCPU([r,o])){let a=n.texData.get(r.dataId),u=n.texData.get(o.dataId),[c,f]=nY(r.shape,o.shape,a.values,u.values,i),d=n.makeTensorInfo(f,i),h=n.texData.get(d.dataId);return h.values=c,d}let s;return z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new ki(WY,r.shape,o.shape):s=new ri(WY,r.shape,o.shape),n.runWebGLProgram(s,[r,o],i)}var qY={kernelName:tm,backendName:"webgl",kernelFunc:b0};function KY(e,t,n){let r=[Ul(e.shape),...Gl(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Ul(t),...Gl(t)],s=new Gm(i,r),a=!0,u=[r],c=n.runWebGLProgram(s,[o],e.dtype,u,a);return{dataId:c.dataId,shape:t,dtype:c.dtype}}function fe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:i}=r,s=n,a=N.sizeFromShape(o.shape),u=N.inferFromImplicitShape(i,a),c=N.sizeFromShape(u);N.assert(a===c,()=>`The new shape (${u}) has ${c} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);let f=s.texData.get(o.dataId);return f.isPacked&&!kd(o.shape,u)&&!(f.texture!==null&&kd(f.shape,u))?KY(o,u,s):(s.incRef(o.dataId),{dataId:o.dataId,shape:u,dtype:o.dtype})}var XY={kernelName:eT,backendName:"webgl",kernelFunc:fe};var w0=class{constructor(t,n){this.variableNames=["x"];let{windowSize:r,batchSize:o,inSize:i,outSize:s}=t;this.outputShape=[o,s];let a=Math.floor(r/4)*4,u=r%4,c="sumValue += dot(values, ones);";if(n!=null){let d=1/n;c=`sumValue += dot(values * ${N.isInt(d)?d.toPrecision(2):d}, ones);`}let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}};var HI=class{constructor(t,n){this.variableNames=["x"];let{windowSize:r,batchSize:o,inSize:i,outSize:s}=t;this.outputShape=[o,s];let a="0.0",u="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",u="min"):n==="max"&&(a="-1.0 / 1e-20",u="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");let f=Math.floor(r/4)*4,d=r%4,h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,m="vec4";n==="all"?(a="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):n==="any"&&(a="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");let v="";i%r>0&&(v=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${v}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${f};
        if (${d===1}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${c});
      }
    `}};function f2e(e){let t=[];for(;t.length===0||t[t.length-1].outSize!==1;){let n=t.length?t[t.length-1].outSize:e[1],r=U.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}function Mi(e,t,n,r){let o=f2e(e.shape),i=e;for(let s=0;s<o.length;s++){let{inSize:a,windowSize:u,outSize:c}=o[s],f,d;n==="mean"?f=s===0?new w0({windowSize:u,inSize:a,batchSize:e.shape[0],outSize:c},a):new w0({windowSize:u,inSize:a,batchSize:e.shape[0],outSize:c}):f=new HI({windowSize:u,inSize:a,batchSize:e.shape[0],outSize:c},n),d=i,i=r.runWebGLProgram(f,[i],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return i}var WI=class{constructor(t,n){this.variableNames=["A"];let r=new Array(t.length);for(let s=0;s<r.length;s++)r[s]=t[n[s]];this.outputShape=r,this.rank=r.length;let o=Qe(this.rank),i=d2e(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}};function d2e(e){let t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}var qI=class{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let r=new Array(t.length);for(let f=0;f<r.length;f++)r[f]=t[n[f]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let o=Qe(this.rank),i=$3("rc",this.rank),s=new Array(this.rank);for(let f=0;f<n.length;f++)s[n[f]]=i[f];let a=`vec2(${s.slice(-2).join()})`,u=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${s.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${u}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${u}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}};function jl(e,t,n){let r=z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qI(e.shape,t):new WI(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function YY(e,t,n,r){let o=t,i=e.shape.length,s=N.parseAxisParam(o,e.shape),a=s,u=U.getAxesPermutation(a,i),c=u!=null,f=e;c&&(f=jl(e,u,r),a=U.getInnerMostAxes(a.length,i)),U.assertAxesAreInnerMostDims("sum",a,i);let[d,h]=U.computeOutAndReduceShapes(f.shape,a),m=d;n&&(m=U.expandShapeToKeepDim(d,s));let v=N.sizeFromShape(h),b=N.sizeFromShape(e.shape)/v,C=fe({inputs:{x:f},attrs:{shape:[b,v]},backend:r}),D=ud(e.dtype),O=Mi(C,D,"sum",r),F=fe({inputs:{x:O},attrs:{shape:m},backend:r});return r.disposeIntermediateTensorInfo(C),r.disposeIntermediateTensorInfo(O),c&&r.disposeIntermediateTensorInfo(f),F}function Pd(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:s}=r;return YY(o,i,s,n)}var ZY={kernelName:mT,backendName:"webgl",kernelFunc:Pd};function xn(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{perm:i}=r,s=n,a=o.shape.length,u=new Array(a);for(let f=0;f<u.length;f++)u[f]=o.shape[i[f]];let c;if(s.shouldExecuteOnCPU([o])){let d=s.texData.get(o.dataId).values,h=Fd(d,o.shape,o.dtype,i,u);c=s.makeTensorInfo(u,o.dtype);let m=s.texData.get(c.dataId);m.values=h}else c=jl(o,i,s);return c}var QY={kernelName:lm,backendName:"webgl",kernelFunc:xn};var z3=1e3;function $d({a:e,b:t,transposeA:n,transposeB:r,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:u=null}){let c=e.shape.length,f=t.shape.length,d=n?e.shape[c-2]:e.shape[c-1],h=r?t.shape[f-1]:t.shape[f-2],m=n?e.shape[c-1]:e.shape[c-2],v=r?t.shape[f-2]:t.shape[f-1],x=e.shape.slice(0,-2),b=t.shape.slice(0,-2),C=N.sizeFromShape(x),D=N.sizeFromShape(b),F=Ml.assertAndGetBroadcastShape(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([m,v]);N.assert(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);let B=n?[C,d,m]:[C,m,d],H=r?[D,v,h]:[D,h,v],X=fe({inputs:{x:e},backend:o,attrs:{shape:B}}),Z=fe({inputs:{x:t},backend:o,attrs:{shape:H}}),te=[X,Z],J=Math.max(C,D),ae=n?X.shape[1]:X.shape[2],ye=i!=null,ke=s!=null,Ke=u==="leakyrelu",Me=u!=null?gc(u,!0):null,Nt=ye||ke||Ke||Me!=null,oe;if((m===1||v===1)&&ae>z3&&Nt===!1){let ie=X,Ce=Z;n&&(ie=xn({inputs:{x:X},backend:o,attrs:{perm:[0,2,1]}}),te.push(ie)),r&&(Ce=xn({inputs:{x:Z},backend:o,attrs:{perm:[0,2,1]}}),te.push(Ce));let ve=v!==1,De=v===1,Te=ie;ve&&(Te=fe({inputs:{x:ie},backend:o,attrs:{shape:[J,ae,1]}}),te.push(Te));let it=v===1?2:1,be=Ce;De&&(be=fe({inputs:{x:Ce},backend:o,attrs:{shape:[J,1,ae]}}),te.push(be));let ut=b0({inputs:{a:Te,b:be},backend:o});oe=Pd({inputs:{x:ut},backend:o,attrs:{axis:it,keepDims:!0}}),te.push(ut)}else{let ie=uo(e.dtype,t.dtype),Ce=new zm(B,H,[J,m,v],n,r,ye,Me,ke,Ke),ve=[X,Z];if(i!=null&&ve.push(i),ke&&ve.push(s),Ke){let De=o.makeTensorInfo([],"float32",N.createScalarValue(a,"float32"));ve.push(De),te.push(De)}oe=o.runWebGLProgram(Ce,ve,ie)}let pe=fe({inputs:{x:oe},backend:o,attrs:{shape:F}});te.push(oe);for(let ie of te)o.disposeIntermediateTensorInfo(ie);return pe}function p2e(e){let{inputs:t,backend:n,attrs:r}=e,{a:o,b:i,bias:s,preluActivationWeights:a}=t,{transposeA:u,transposeB:c,activation:f,leakyreluAlpha:d}=r;return $d({a:o,b:i,transposeA:u,transposeB:c,backend:n,bias:s,preluActivationWeights:a,leakyreluAlpha:d,activation:f})}var JY={kernelName:Lv,backendName:"webgl",kernelFunc:p2e};var eZ="return abs(x);";function h2e(e){let{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){let i=n.texData.get(r.dataId),s=VI(i.values);return n.makeTensorInfo(r.shape,r.dtype,s)}let o;return z().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new ni(r.shape,eZ):o=new Ur(r.shape,eZ),n.runWebGLProgram(o,[r],r.dtype)}var tZ={kernelName:Rv,backendName:"webgl",kernelFunc:h2e};var m2e=dr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,g2e=Ne({opSnippet:m2e}),nZ={kernelName:CE,backendName:"webgl",kernelFunc:g2e};var y2e=dr+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,v2e=Ne({opSnippet:y2e}),rZ={kernelName:TE,backendName:"webgl",kernelFunc:v2e};var oZ="return a + b;",x2e=Ut({opSnippet:oZ,packedOpSnippet:oZ,supportsComplex:!0,cpuKernelImpl:FX}),iZ={kernelName:_l,backendName:"webgl",kernelFunc:x2e};var KI=class{constructor(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map((i,s)=>`T${s}`);let r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});let o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}};var XI=class{constructor(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((i,s)=>`T${s}`);let r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});let o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}};function YI(e){let{inputs:t,backend:n}=e,r=t;if(r.length===1)return Bn({inputs:{x:r[0]},backend:n});if(r.length>z().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let u=Math.floor(r.length/2),c=YI({inputs:r.slice(0,u),backend:n}),f=YI({inputs:r.slice(u),backend:n});return YI({inputs:[c,f],backend:n})}let o=r.map(u=>u.dtype).reduce((u,c)=>uo(u,c)),i=r.map(u=>u.shape),a=z().getBool("WEBGL_PACK")?new XI(r[0].shape,i):new KI(r[0].shape,i);return n.runWebGLProgram(a,r,o)}var sZ={kernelName:_E,backendName:"webgl",kernelFunc:YI};function b2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:s}=r,a=o.shape.length,u=N.parseAxisParam(i,o.shape),c=u,f=U.getAxesPermutation(c,a),d=o;f!=null&&(d=xn({inputs:{x:o},backend:n,attrs:{perm:f}}),c=U.getInnerMostAxes(c.length,a)),U.assertAxesAreInnerMostDims("all",c,a);let[h,m]=U.computeOutAndReduceShapes(d.shape,c),v=N.sizeFromShape(m),x=fe({inputs:{x:d},backend:n,attrs:{shape:[-1,v]}}),b=Mi(x,x.dtype,"all",n),C;if(s){let D=U.expandShapeToKeepDim(h,u);C=fe({inputs:{x:b},backend:n,attrs:{shape:D}})}else C=fe({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),f!=null&&n.disposeIntermediateTensorInfo(d),C}var aZ={kernelName:IE,backendName:"webgl",kernelFunc:b2e};function w2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:s}=r,a=o.shape.length,u=N.parseAxisParam(i,o.shape),c=u,f=U.getAxesPermutation(c,a),d=o;f!=null&&(d=xn({inputs:{x:o},backend:n,attrs:{perm:f}}),c=U.getInnerMostAxes(c.length,a)),U.assertAxesAreInnerMostDims("any",c,a);let[h,m]=U.computeOutAndReduceShapes(d.shape,c),v=N.sizeFromShape(m),x=fe({inputs:{x:d},backend:n,attrs:{shape:[-1,v]}}),b=Mi(x,x.dtype,"any",n),C;if(s){let D=U.expandShapeToKeepDim(h,u);C=fe({inputs:{x:b},backend:n,attrs:{shape:D}})}else C=fe({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),f!=null&&n.disposeIntermediateTensorInfo(d),C}var uZ={kernelName:SE,backendName:"webgl",kernelFunc:w2e};var ZI=class{constructor(t,n,r){this.variableNames=["A"];let{windowSize:o,batchSize:i,outSize:s}=t;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];let a=n==="max"?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};var QI=class{constructor(t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,N.assert(t.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);let i=t[t.length-1],s=Math.ceil(i/n);this.outputShape=t.slice(0,-1),s>1&&this.outputShape.push(s),o||this.variableNames.push("bestIndicesA");let a=this.outputShape,u=a.length,c=Qe(u),f=Vn("coords",u),d,h;if(s===1){h=u+1;let Z=Qe(h);d=`
        ${Z} sourceLocR = ${Z}(${f.join()}, 0);
        ++${f[u-1]};
        ${Z} sourceLocG = ${Z}(${f.join()}, 0);
        ++${f[u-2]};
        ${Z} sourceLocA = ${Z}(${f.join()}, 0);
        --${f[u-1]};
        ${Z} sourceLocB = ${Z}(${f.join()}, 0);
        --${f[u-2]};`}else h=u,d=`
        ${c} sourceLocR = coords;
        ++${f[u-1]};
        ${c} sourceLocG = coords;
        ++${f[u-2]};
        ${c} sourceLocA = coords;
        --${f[u-1]};
        ${c} sourceLocB = coords;
        --${f[u-2]};`;let m=["x","y","z","w","u","v"].slice(0,h),v="."+m[h-1],x=m.map(Z=>"int "+Z),b=Vn("sourceLocR",h-1).concat("inIdx.r"),C=Vn("sourceLocG",h-1).concat("inIdx.g"),D=Vn("sourceLocB",h-1).concat("inIdx.b"),O=Vn("sourceLocA",h-1).concat("inIdx.a"),F=r==="max"?"greaterThan":"lessThan",B=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${C.join()}),
                             getBestIndicesAChannel(${D.join()}),
                             getBestIndicesAChannel(${O.join()})));`,H=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${C.join()}) : 0.,
            hasNextRow ? getAChannel(${D.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${O.join()}) : 0.)`,X=o?"":`
      float getBestIndicesAChannel(${x.join()}) {
        return getChannel(getBestIndicesA(${m.join()}),
                                          vec2(${m.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${x.join()}) {
        return getChannel(getA(${m.join()}),
                               vec2(${m.slice(-2).join()}));
      }
      ${X}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${f[u-1]} < ${a[u-1]-1};
        bool hasNextRow = ${f[u-2]} < ${a[u-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${v}, sourceLocG${v},
          sourceLocB${v}, sourceLocA${v}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${H};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${B}
          vec4 candidate = ${H};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${F}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function cZ(e,t,n,r=null){let o=t.shape[0],i=t.shape[1];r!=null&&(o=r.shape[0],i=r.shape[1]);let s=U.computeOptimalWindowSize(i),a={windowSize:s,inSize:i,batchSize:o,outSize:Math.ceil(i/s)},u=new ZI(a,n,r==null),c=[t];r!=null&&c.push(r);let f=e.runWebGLProgram(u,c,"int32");if(f.shape[1]===1)return f;let d=cZ(e,t,n,f);return e.disposeIntermediateTensorInfo(f),d}function lZ(e,t,n,r=null){let o=r!=null?r.shape:t.shape,i=o[o.length-1],s=U.computeOptimalWindowSize(i),a=new QI(o,s,n,r==null),u=r==null?[t]:[t,r],c=e.runWebGLProgram(a,u,"int32");if(c.shape.length===t.shape.length){let f=lZ(e,t,n,c);return e.disposeIntermediateTensorInfo(c),f}return c}function JI(e,t,n,r){let o=[n];if(U.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!z().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){let i=[],s=e.texData.get(t.dataId),a=s!==null&&s.isPacked,u=t;a&&(u=e.unpackTensor(t),i.push(u));let[c,f]=U.computeOutAndReduceShapes(u.shape,o),d=N.sizeFromShape(f),h=fe({inputs:{x:u},backend:e,attrs:{shape:[-1,d]}});i.push(h);let m=cZ(e,h,r);i.push(m);let v=fe({inputs:{x:m},backend:e,attrs:{shape:c}});return i.forEach(x=>e.disposeIntermediateTensorInfo(x)),v}return lZ(e,t,r)}function E2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i}=r,s=N.parseAxisParam(i,o.shape),a=U.getAxesPermutation(s,o.shape.length),u=o,c=[];a!=null&&(u=xn({inputs:{x:o},backend:n,attrs:{perm:a}}),c.push(u),s=U.getInnerMostAxes(s.length,u.shape.length)),U.assertAxesAreInnerMostDims("argMax",[s[0]],u.shape.length);let f=JI(n,u,s[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),f}var fZ={kernelName:DE,backendName:"webgl",kernelFunc:E2e};function C2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i}=r,s=N.parseAxisParam(i,o.shape),a=U.getAxesPermutation(s,o.shape.length),u=o,c=[];a!=null&&(u=xn({inputs:{x:o},backend:n,attrs:{perm:a}}),c.push(u),s=U.getInnerMostAxes(s.length,u.shape.length)),U.assertAxesAreInnerMostDims("argMin",[s[0]],u.shape.length);let f=JI(n,u,s[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),f}var dZ={kernelName:NE,backendName:"webgl",kernelFunc:C2e};var T2e=dr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,_2e=Ne({opSnippet:T2e}),pZ={kernelName:AE,backendName:"webgl",kernelFunc:_2e};var I2e=dr+"return log(x + sqrt(x * x + 1.0));",S2e=Ne({opSnippet:I2e}),hZ={kernelName:RE,backendName:"webgl",kernelFunc:S2e};var D2e=dr+`
  return atan(x);
`,N2e=Ne({opSnippet:D2e}),mZ={kernelName:kE,backendName:"webgl",kernelFunc:N2e};var A2e=jm+`
  return atan(a, b);
`,R2e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Oi+`
  return result;
`,k2e=Ut({opSnippet:A2e,packedOpSnippet:R2e}),gZ={kernelName:ME,backendName:"webgl",kernelFunc:k2e};var O2e=dr+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,M2e=Ne({opSnippet:O2e}),yZ={kernelName:OE,backendName:"webgl",kernelFunc:M2e};var Aa=class{constructor(t,n,r,o=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let s=t.filterWidth,a=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,m=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;let x=n==="avg",b=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,C=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`,D="0.0";if(x||(D="-1.0 / 1e-20"),r){let Z=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${u});
        const ivec2 pads = ivec2(${m}, ${v});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${f}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${Z} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?i?b:C:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let O="max",F=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(F="avgValue / max(count, 1.0)");let B=Math.floor(s/4)*4,H=s%4,X=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${O}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${u});
      const ivec2 pads = ivec2(${m}, ${v});
      const float initializationValue = ${D};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${D});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${B}; wC += 4) {
            int xC = xCCorner + wC * ${f};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              getValue(batch, xR, xC + 3 * ${f}, d)
            );

            ${X}
          }

          int xC = xCCorner + ${B};
          if (${H===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${X}
          } else if (${H===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              initializationValue,
              initializationValue
            );

            ${X}
          } else if (${H===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              initializationValue
            );

            ${X}
          }
        }
        setOutput(${F});
      }
    `}},zl=class{constructor(t,n,r,o=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let s=t.filterWidth,a=t.strideDepth,u=t.strideHeight,c=t.strideWidth,f=t.dilationDepth,d=t.dilationHeight,h=t.dilationWidth,m=t.effectiveFilterDepth,v=t.effectiveFilterHeight,x=t.effectiveFilterWidth,b=t.padInfo.front,C=t.padInfo.top,D=t.padInfo.left;this.outputShape=t.outShape;let O=n==="avg",F="0.0";if(O||(F="-1.0 / 1e-20"),r){let J=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${u}, ${c});
        const ivec3 pads = ivec3(${b}, ${C}, ${D});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${m};
              wD += ${f}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${v};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${x};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${J} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?i?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${v} * ${x} +
                      wR * ${x} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let B="max",H=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(H="avgValue / max(count, 1.0)");let X=Math.floor(s/4)*4,Z=s%4,te=`
      if (${O}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${B}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${u}, ${c});
      const ivec3 pads = ivec3(${b}, ${C}, ${D});
      const float initializationValue = ${F};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${F});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${m};
            wD += ${f}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${v};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${X}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${te}
            }

            int xC = xCCorner + ${X};
            if (${Z===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${te}
            } else if (${Z===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${te}
            } else if (${Z===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${te}
            }
          }
        }
        setOutput(${H});
      }
    `}};function F2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t;vu(o,"avgPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:u}=r,c=1;N.assert(U.eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let f=U.computePool2DInfo(o.shape,i,s,c,a,u);if(f.filterWidth===1&&f.filterHeight===1&&N.arraysEqual(f.inShape,f.outShape))return Bn({inputs:{x:o},backend:n});let d=new Aa(f,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}var vZ={kernelName:FE,backendName:"webgl",kernelFunc:F2e};function P2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:i,strides:s,pad:a,dimRoundingMode:u,dataFormat:c}=r,f=[1,1,1],d=U.computePool3DInfo(o.shape,i,s,f,a,u,c),h=new zl(d,"avg",!1);return n.runWebGLProgram(h,[o],"float32")}var xZ={kernelName:PE,backendName:"webgl",kernelFunc:P2e};var eS=class{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;let n=t.filterHeight,r=t.filterWidth,o=t.strideHeight,i=t.strideWidth,s=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,f=u-1-t.padInfo.top,d=c-1-t.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${f}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},tS=class{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;let n=t.filterDepth,r=t.filterHeight,o=t.filterWidth,i=t.strideDepth,s=t.strideHeight,a=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,f=t.dilationWidth,d=t.effectiveFilterDepth,h=t.effectiveFilterHeight,m=t.effectiveFilterWidth,v=d-1-t.padInfo.front,x=h-1-t.padInfo.top,b=m-1-t.padInfo.left,C=1/(n*r*o);this.userCode=`
      const ivec3 pads = ivec3(${v}, ${x}, ${b});
      const float avgMultiplier = float(${C});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${m};
                wC += ${f}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function $2e(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,s=i,{filterSize:a,strides:u,pad:c,dimRoundingMode:f}=r,d=[1,1,1],h=U.computePool3DInfo(s.shape,a,u,d,c,f),m=new tS(h);return n.runWebGLProgram(m,[o],s.dtype)}var bZ={kernelName:dz,backendName:"webgl",kernelFunc:$2e};function L2e(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,s=i;vu([o,i],"avgPoolGrad");let{filterSize:a,strides:u,pad:c}=r,f=U.computePool2DInfo(s.shape,a,u,1,c),d=new eS(f);return n.runWebGLProgram(d,[o],s.dtype)}var wZ={kernelName:fz,backendName:"webgl",kernelFunc:L2e};function V2e(e){let{inputs:t,backend:n,attrs:r}=e,{a:o,b:i}=t,{transposeA:s,transposeB:a}=r;return $d({a:o,b:i,transposeA:s,transposeB:a,backend:n})}var EZ={kernelName:$E,backendName:"webgl",kernelFunc:V2e};var nS=class{constructor(t,n,r,o,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],U.assertAndGetBroadcastShape(t,n),U.assertAndGetBroadcastShape(t,r);let a="0.0";o!=null&&(U.assertAndGetBroadcastShape(t,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let u="1.0";i!=null&&(U.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};var rS=class{constructor(t,n,r,o,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],U.assertAndGetBroadcastShape(t,n),U.assertAndGetBroadcastShape(t,r);let a="vec4(0.0)";o!=null&&(U.assertAndGetBroadcastShape(t,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let u="vec4(1.0)";i!=null&&(U.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var B2e=({inputs:e,backend:t,attrs:n})=>{let{x:r,mean:o,variance:i,offset:s,scale:a}=e;N.assert(o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),N.assert(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),N.assert(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);let c=[r,o,i],f=null;s!=null&&(f=s.shape,c.push(s));let d=null;a!=null&&(d=a.shape,c.push(a));let h=z().getBool("WEBGL_PACK_NORMALIZATION")?new rS(r.shape,o.shape,i.shape,f,d,u):new nS(r.shape,o.shape,i.shape,f,d,u);return t.runWebGLProgram(h,c,c[0].dtype)},CZ={kernelName:mC,backendName:"webgl",kernelFunc:B2e};var oS=class{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;let n=Qe(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let r=U2e(this.rank),o,i=t.map((s,a)=>`sourceLoc.${H3[a]} = start[${a}] + coords.${H3[a]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${r}));
      }
    `}},H3=["x","y","z","w","u","v"];function U2e(e){if(e===1)return"sourceLoc";if(e<=6)return H3.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}var iS=class{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let n=Qe(this.rank),r=Vn("coords",this.rank),o=Vn("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,s=`getChannel(getSource(${o.join()}), ${i})`,a=`
      result.x = ${s};
      if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${s};
        --${o[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${t[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${s};
        if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${s};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${t.map((f,d)=>`start[${d}]`).join()});`:t.map((f,d)=>`${o[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${u}
        setOutput(result);
      }
    `}};function G2e(e,t,n,r){let o=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),s=r.texData.get(i.dataId);Object.assign(s,o),s.refCount=1,s.shape=n,s.dtype=e.dtype;let a=ei.computeFlatOffset(t,N.computeStrides(e.shape));o.slice&&(a+=o.slice.flatOffset),s.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||e.dataId};let u=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,u+1),i}function Ra(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:i,size:s}=r,[a,u]=ei.parseSliceParams(o,i,s);if(ei.assertParamsValid(o,a,u),N.sizeFromShape(u)===0)return n.makeTensorInfo(u,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){let d=n.texData.get(o.dataId),h=pY(d.values,a,u,o.shape,o.dtype);return n.makeTensorInfo(u,o.dtype,h)}let{isPacked:c}=n.texData.get(o.dataId),f=ei.isSliceContinous(o.shape,a,u);if(c||!f){let d=z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iS(u):new oS(u),h=[a];return n.runWebGLProgram(d,[o],o.dtype,h)}return n.uploadToGPU(o.dataId),G2e(o,a,u,n)}var TZ={kernelName:Pv,backendName:"webgl",kernelFunc:Ra};var j2e=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:i,crops:s}=r;N.assert(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let a=i.reduce((D,O)=>D*O),u=U.getReshaped(o.shape,i,a),c=U.getPermuted(u.length,i.length),f=U.getReshapedPermuted(o.shape,i,a),d=U.getSliceBeginCoords(s,i.length),h=U.getSliceSize(f,s,i.length),m=[],v=fe({inputs:{x:o},backend:n,attrs:{shape:u}}),x=xn({inputs:{x:v},backend:n,attrs:{perm:c}}),b=fe({inputs:{x},backend:n,attrs:{shape:f}}),C=Ra({inputs:{x:b},backend:n,attrs:{begin:d,size:h}});return m.push(v),m.push(x),m.push(b),m.forEach(D=>n.disposeIntermediateTensorInfo(D)),C},_Z={kernelName:LE,backendName:"webgl",kernelFunc:j2e};function z2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,weights:i}=t,{size:s}=r,a=n.readSync(o.dataId),u=n.readSync(i.dataId),c=LI(a,u,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}var IZ={kernelName:VE,backendName:"webgl",kernelFunc:z2e};var H2e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,W2e=`
  return float(int(a.r) & int(b.r));
`;function q2e(e){let{inputs:t,backend:n}=e,{a:r,b:o}=t,i=z().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=z().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,o])||s===1){let u=n.texData.get(r.dataId).values,c=n.texData.get(o.dataId).values,[f,d]=$X(r.shape,o.shape,u,c,r.dtype),h=n.makeTensorInfo(d,r.dtype),m=n.texData.get(h.dataId);return m.values=f,h}let a;return i?a=new ki(H2e,r.shape,o.shape,!1):a=new ri(W2e,r.shape,o.shape),n.runWebGLProgram(a,[r,o],r.dtype)}var SZ={kernelName:Uh,backendName:"webgl",kernelFunc:q2e};function K2e(e){let{inputs:t,backend:n}=e,{s0:r,s1:o}=t,i=n.readSync(r.dataId),s=n.readSync(o.dataId),a=U.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var DZ={kernelName:BE,backendName:"webgl",kernelFunc:K2e};var X2e="return float(a != b);",W3=Ut({opSnippet:X2e,cpuKernelImpl:oY,dtype:"bool"}),NZ={kernelName:nm,backendName:"webgl",kernelFunc:W3};function yc(e){let{inputs:t,backend:n}=e,{input:r}=t,o=n.texData.get(r.dataId);return Bn({inputs:{x:o.complexTensorInfos.real},backend:n})}var AZ={kernelName:Fv,backendName:"webgl",kernelFunc:yc};var Y2e="return float(int(x));";function RZ(e,t){let n=new Ur(e.shape,Y2e),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function q3(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dtype:i}=r;if(i==="complex64"){if(o.dtype==="complex64")return Bn({inputs:{x:o},backend:n});let s=Ks(o.shape),a=q3({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),u=oi({inputs:{real:a,imag:s},backend:n});return s.dispose(),n.disposeIntermediateTensorInfo(a),u}if(o.dtype==="complex64"){let s=yc({inputs:{input:o},backend:n}),a=q3({inputs:{x:s},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(s),a}if(!N.hasEncodingLoss(o.dtype,i)){let s=Bn({inputs:{x:o},backend:n});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(n.shouldExecuteOnCPU([o])){let s=n.texData.get(o.dataId).values,[a,u,c]=LX(s,o.shape,o.dtype,i);return n.makeTensorInfo(a,u,c)}if(i==="int32")return RZ(o,n);if(i==="bool"){let s=n.makeTensorInfo([],"bool",N.getTypedArrayFromDType("bool",1)),u=W3({inputs:{a:o,b:s},backend:n});return n.disposeIntermediateTensorInfo(s),u}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${i}`)}var kZ={kernelName:td,backendName:"webgl",kernelFunc:q3};var OZ="return ceil(x);",Z2e=Ne({opSnippet:OZ,packedOpSnippet:OZ,cpuKernelImpl:VX}),MZ={kernelName:Gh,backendName:"webgl",kernelFunc:Z2e};var sS=class{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};var aS=class{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function Q2e(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{clipValueMin:i,clipValueMax:s}=r,a;z().getBool("WEBGL_PACK_CLIP")?a=new aS(o.shape):a=new sS(o.shape);let u=[[i],[s]];return n.runWebGLProgram(a,[o],o.dtype,u)}var FZ={kernelName:UE,backendName:"webgl",kernelFunc:Q2e};var uS=class{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function PZ(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function J2e(e){let{inputs:t,backend:n}=e,{x:r}=t,o=n.texData.get(r.dataId),i=new uS(r.shape),s=[PZ(r,o.complexTensorInfos.real),PZ(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(i,s,s[0].dtype)}var $Z={kernelName:GE,backendName:"webgl",kernelFunc:J2e};var cS=class{constructor(t){this.outputShape=[],this.outputShape=U.computeOutShape(t,1),this.variableNames=t.map((s,a)=>`T${a}`);let n=new Array(t.length-1);n[0]=t[0][1];for(let s=1;s<n.length;s++)n[s]=n[s-1]+t[s][1];let r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<n.length;s++){let a=n[s-1];r.push(`else if (yC < ${n[s]}) setOutput(getT${s}(yR, yC-${a}));`)}let o=n.length,i=n[n.length-1];r.push(`else setOutput(getT${o}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}};var fS=class{constructor(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=U.computeOutShape(t,n);let r=this.outputShape,o=r.length,i=Qe(o),s=Vn("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=t.map((x,b)=>`T${b}`);let u=new Array(t.length-1);u[0]=t[0][n];for(let x=1;x<u.length;x++)u[x]=u[x-1]+t[x][n];let c=a[n],f=a.slice(-2),d=a.join(),h=`if (${c} < ${u[0]}) {
        return getChannel(
            getT0(${d}), vec2(${f.join()}));
        }`;for(let x=1;x<u.length;x++){let b=u[x-1];h+=`
        if (${c} < ${u[x]}  && ${c} >= ${u[x-1]}) {
          return getChannel(
            getT${x}(${lS(a,c,b)}),
            vec2(${lS(f,c,b)}));
        }`}let m=u.length,v=u[u.length-1];h+=`
        return getChannel(
          getT${m}(${lS(a,c,v)}),
          vec2(${lS(f,c,v)}));`,this.userCode=`
      float getValue(${a.map(x=>"int "+x)}) {
        ${h}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[o-1]} = ${s[o-1]} + 1;
        if (${s[o-1]} < ${r[o-1]}) {
          result.g = getValue(${s});
        }

        ${s[o-2]} = ${s[o-2]} + 1;
        if (${s[o-2]} < ${r[o-2]}) {
          result.a = getValue(${s});
        }

        ${s[o-1]} = ${s[o-1]} - 1;
        if (${s[o-2]} < ${r[o-2]} &&
            ${s[o-1]} < ${r[o-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}};function lS(e,t,n){let r=e.indexOf(t);return e.map((i,s)=>s===r?`${i} - ${n}`:i).join()}function Ld(e){let{inputs:t,backend:n}=e,{input:r}=t,o=n.texData.get(r.dataId);return Bn({inputs:{x:o.complexTensorInfos.imag},backend:n})}var LZ={kernelName:xC,backendName:"webgl",kernelFunc:Ld};function Hm(e,t,n){let r=e[0].dtype;if(r==="complex64"){let m=e.map(D=>yc({inputs:{input:D},backend:n})),v=e.map(D=>Ld({inputs:{input:D},backend:n})),x=Hm(m,t,n),b=Hm(v,t,n),C=oi({inputs:{real:x,imag:b},backend:n});return m.forEach(D=>n.disposeIntermediateTensorInfo(D)),v.forEach(D=>n.disposeIntermediateTensorInfo(D)),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),C}let o=n.shouldExecuteOnCPU(e);if(r==="string"&&(o=!0),o){let m=e.map(F=>{let H=[-1,N.sizeFromShape(F.shape.slice(t))];return fe({inputs:{x:F},backend:n,attrs:{shape:H}})}),v=m.map(F=>({vals:n.readSync(F.dataId),shape:F.shape})),x=U.computeOutShape(m.map(F=>F.shape),1),b=m[0].shape[0]===1,C=BX(v,x,r,b),D=U.computeOutShape(e.map(F=>F.shape),t),O=n.makeTensorInfo(D,r,C);return m.forEach(F=>n.disposeIntermediateTensorInfo(F)),O}let i=e.filter(m=>N.sizeFromShape(m.shape)>0),s=z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){let m=s?new Ur(e[0].shape,xu):new ni(e[0].shape,xu);return n.runWebGLProgram(m,e,r)}let a=z().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){let m=[];for(let x=0;x<i.length;x+=a){let b=i.slice(x,x+a);m.push(Hm(b,t,n))}let v=Hm(m,t,n);for(let x of m)n.disposeIntermediateTensorInfo(x);return v}if(s){let m=new fS(i.map(v=>v.shape),t);return n.runWebGLProgram(m,i,r)}let{tensors2D:u,outShape:c}=eDe(i,t,n),f=new cS(u.map(m=>m.shape)),d=n.runWebGLProgram(f,u,r);u.forEach(m=>n.disposeIntermediateTensorInfo(m));let h=fe({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),h}function eDe(e,t,n){let r=U.computeOutShape(e.map(i=>i.shape),t);return{tensors2D:e.map(i=>fe({inputs:{x:i},attrs:{shape:[-1,N.sizeFromShape(i.shape.slice(t))]},backend:n})),outShape:r}}function K3(e){let{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,i=N.parseAxisParam(o,t[0].shape)[0],s=t.map(c=>c.shape);U.assertParamsConsistent(s,i);let a=U.computeOutShape(t.map(c=>c.shape),i);if(N.sizeFromShape(a)===0)return n.makeTensorInfo(a,t[0].dtype,[]);let u=t.filter(c=>N.sizeFromShape(c.shape)>0);return u.length===1?Bn({inputs:{x:u[0]},backend:n}):Hm(u,i,n)}var VZ={kernelName:jE,backendName:"webgl",kernelFunc:K3};var Wm=class{constructor(t,n=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;let s=t.padInfo.top,a=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,f=t.dilationHeight,d=t.dilationWidth,h=t.filterHeight,m=t.filterWidth,v=Math.floor(t.inChannels/4)*4,x=t.inChannels%4,b=t.dataFormat==="channelsLast",C=b?1:2,D=b?2:3,O=b?3:1,F="",B="";r&&(o?F=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?F=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:F=`
          float activation(float x) {
            ${r}
          }
        `,B="result = activation(result);");let H=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${F}

      const ivec2 strides = ivec2(${u}, ${c});
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${O}];

        ivec2 xRCCorner =
            ivec2(coords[${C}], coords[${D}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${f};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${m}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${v}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${x===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${v}) *
                    getW(wR, wC, ${v}, d2);
              } else {
                dotProd +=
                    getX(batch, ${v}, xR, xC) *
                    getW(wR, wC, ${v}, d2);
              }

            } else if (${x===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${v}, d2),
                getW(wR, wC, ${v} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${v}),
                  getX(batch, xR, xC, ${v} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${v}, xR, xC),
                  getX(batch, ${v} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${x===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${v}, d2),
                getW(wR, wC, ${v} + 1, d2),
                getW(wR, wC, ${v} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${v}),
                  getX(batch, xR, xC, ${v} + 1),
                  getX(batch, xR, xC, ${v} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${v}, xR, xC),
                  getX(batch, ${v} + 1, xR, xC),
                  getX(batch, ${v} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${H}
        ${B}
        setOutput(result);
      }
    `}},dS=class{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;let n=t.padInfo.front,r=t.padInfo.top,o=t.padInfo.left,i=t.strideDepth,s=t.strideHeight,a=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,f=t.dilationWidth,d=t.filterDepth,h=t.filterHeight,m=t.filterWidth,v=Math.floor(t.inChannels/4)*4,x=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${s}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${m}; wC++) {
              int xC = xCCorner + wC * ${f};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${v}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${x===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${v}) *
                  getW(wF, wR, wC, ${v}, d2);
              } else if (${x===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${v}),
                  getX(batch, xF, xR, xC, ${v} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${v}, d2),
                  getW(wF, wR, wC, ${v} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${x===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${v}),
                  getX(batch, xF, xR, xC, ${v} + 1),
                  getX(batch, xF, xR, xC, ${v} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${v}, d2),
                  getW(wF, wR, wC, ${v} + 1, d2),
                  getW(wF, wR, wC, ${v} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};var qm=class{constructor(t,n=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=qt(this.outputShape.length);let s=t.padInfo.left,a=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,f=t.filterWidth,d=f,h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<f;b++)h+=`
           vec4 xTexelC${b*2};
           int xTexelC${b*2}Ready;
           vec4 xTexelC${b*2+1};
           int xTexelC${b*2+1}Ready;
           vec4 xC${b};`;h+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${t.inChannels}; d1 += 2) {
       `;for(let b=0;b<f;b++)h+=`
           xTexelC${b*2} = vec4(0.0);
           xTexelC${b*2}Ready = 0;
           xTexelC${b*2+1} = vec4(0.0);
           xTexelC${b*2+1}Ready = 0;
           xC${b} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let b=0;b<(d+1)/2;b++){let C=b*2;if(h+=`
           xC = xCCorner + ${C*u};
           `,a===1){if(C<f&&(s%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                   xTexelC${C} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${C}.zw = vec2(0.0);
                   }
                   xTexelC${C}Ready = 1;
                 }
               `,u===1&&C>0?h+=`
                 xC${C} = vec4(xTexelC${C-2}.zw, xTexelC${C}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${C} = vec4(previous.zw, xTexelC${C}.xy);
                   } else {
                     xC${C} = vec4(0.0, 0.0, xTexelC${C}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                   xTexelC${C} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${C}.zw = vec2(0.0);
                   }
                   xTexelC${C}Ready = 1;
                 }

                 xC${C} = xTexelC${C};
                 `,C+1<f)){let D=s%2===0?N.nearestLargerEven(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${D};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                     xTexelC${C+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${C+1}.zw = vec2(0.0);
                     }
                     xTexelC${C+1}Ready = 1;
                   }
                   `,u>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${C+1} = vec4(previous.zw, xTexelC${C+1}.xy);
                     } else {
                      xC${C+1} = vec4(0.0, 0.0, xTexelC${C+1}.xy);
                     }
                     `:h+=`
                     xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.xy);
                     `):D===1?h+=`
                     xC${C+1} = xTexelC${C};
                     `:h+=`
                     xCOffset = xC + ${D};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                       xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${C+1}.zw = vec2(0.0);
                       }
                       xTexelC${C+1}Ready = 1;
                     }

                     xC${C+1} = xTexelC${C+1};
                     `}}else C<f&&(s%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                   xTexelC${C} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${C}.zw = vec2(0.0);
                   }
                   xTexelC${C}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${C+1}Ready == 0) {
                   xTexelC${C+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${C+1}.zw = vec2(0.0);
                   }
                   xTexelC${C+1}Ready = 1;
                 }

                 xC${C} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
               `,C+1<f&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${C+1} = vec4(xTexelC${C+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                   xTexelC${C} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${C}.zw = vec2(0.0);
                   }
                   xTexelC${C}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                   xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${C+1}.zw = vec2(0.);
                   }
                   xTexelC${C+1}Ready = 1;
                 }

                 xC${C} = vec4(
                   xTexelC${C}.xy, xTexelC${C+1}.xy);
               `,C+1<f&&(h+=`
                   xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
                 `)));C<f&&(h+=`
             wTexel = getW(r, ${C}, d1, d2);
             dotProd += xC${C}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${t.inChannels}) {
               dotProd += xC${C}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,C+1<f&&(h+=`
               wTexel = getW(r, ${C+1}, d1, d2);
               dotProd += xC${C+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${t.inChannels}) {
                 dotProd += xC${C+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let m="",v="";r&&(o?m=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?m=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:m=`vec4 activation(vec4 x) {
           ${r}
         }`,v="result = activation(result);");let x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${m}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${x}
         ${v}
         setOutput(result);
       }
     `}};var pS=class{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length);let{dataFormat:r}=n,o=Dn(),i=r==="channelsLast",s=i?1:2,a=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`,c="";for(let f=0;f<=1;f++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${f};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${f*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${f*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${o.output} = result;
      }
    `}};function hS(e,t){let n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&n===1&&e[0]>1?[e[0],1]:null}function mS({x:e,filter:t,convInfo:n,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){let u=e.shape,c=r.texData.get(e.dataId),f=n.inChannels,d=u[0]*u[1]*u[2],h=n.outChannels,m=n.dataFormat==="channelsLast",v=!1,x=!1,b,C=[];if(i!=null){let F=hS(i.shape,m);F!=null&&(i=fe({inputs:{x:i},backend:r,attrs:{shape:F}}),C.push(i))}if(o!=null){let F=hS(o.shape,m);F!=null&&(o=fe({inputs:{x:o},backend:r,attrs:{shape:F}}),C.push(o))}if(!((d===1||h===1)&&f>z3)&&c.isPacked&&m&&c.texture!=null&&u[2]%2!==0&&N.arraysEqual(c.shape.slice(-3),u.slice(-3))){let F=u[0]*u[1]*(u[2]+1),B={dataId:e.dataId,shape:[1,F,n.inChannels],dtype:e.dtype},H=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,N.assert(kd(c.shape,B.shape),()=>`packed reshape ${c.shape} to ${B.shape} isn't free`);let X=fe({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});C.push(X);let Z=$d({a:B,b:X,backend:r,transposeA:v,transposeB:x,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s}),te=r.texData.get(Z.dataId);N.assert(te.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=H,te.shape=n.outShape,b=Bn({inputs:{x:Z},backend:r}),b.shape=n.outShape,C.push(Z)}else{let F=n.outHeight*n.outWidth,B=fe({inputs:{x:e},backend:r,attrs:{shape:m?[n.batchSize,F,n.inChannels]:[n.batchSize,n.inChannels,F]}}),H=fe({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),X=$d({a:m?B:H,b:m?H:B,transposeA:!m,transposeB:x,backend:r,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s});b=fe({inputs:{x:X},backend:r,attrs:{shape:n.outShape}}),C.push(B),C.push(H),C.push(X)}for(let F of C)r.disposeIntermediateTensorInfo(F);return b}function gS({x:e,filter:t,convInfo:n,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){let{filterWidth:u,filterHeight:c,inChannels:f,outWidth:d,outHeight:h,dataFormat:m}=n,v=m==="channelsLast",x=u*c*f,b=h*d,C=[n.batchSize,x,b],D=!0,O=!1,F=[];if(i!=null){let pe=hS(i.shape,v);pe!=null&&(i=fe({inputs:{x:i},backend:r,attrs:{shape:pe}}),F.push(i))}if(o!=null){let pe=hS(o.shape,v);pe!=null&&(o=fe({inputs:{x:o},backend:r,attrs:{shape:pe}}),F.push(o))}let B=fe({inputs:{x:t},backend:r,attrs:{shape:[1,x,N.sizeFromShape(t.shape)/x]}});F.push(B);let H=new pS(C,n),X=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],Z=r.runWebGLProgram(H,[e],"float32",X),te=fe({inputs:{x:Z},backend:r,attrs:{shape:C}});F.push(Z),F.push(te);let J=o!=null,ae=i!=null,ye=a==="leakyrelu",ke=a?gc(a,!0):null,Ke=new zm(v?te.shape:B.shape,v?B.shape:te.shape,v?[n.batchSize,b,n.outChannels]:[n.batchSize,n.outChannels,b],D,O,J,ke,ae,ye),Me=v?[te,B]:[B,te];if(o&&Me.push(o),ae&&Me.push(i),ye){let pe=r.makeTensorInfo([],"float32",N.createScalarValue(s,"float32"));Me.push(pe),F.push(pe)}let Nt=r.runWebGLProgram(Ke,Me,"float32"),oe=fe({inputs:{x:Nt},backend:r,attrs:{shape:n.outShape}});F.push(Nt);for(let pe of F)r.disposeIntermediateTensorInfo(pe);return oe}function tDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:s,pad:a,dataFormat:u,dilations:c,dimRoundingMode:f}=r,d=U.convertConv2DDataFormat(u),h=U.computeConv2DInfo(o.shape,i.shape,s,c,a,f,!1,d),m;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))m=mS({x:o,filter:i,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&z().getBool("WEBGL_EXP_CONV")){let x=new qm(h),b=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];m=n.runWebGLProgram(x,[o,i],"float32",b)}else if(z().getBool("WEBGL_CONV_IM2COL"))m=gS({x:o,filter:i,convInfo:h,backend:n});else{let x=new Wm(h);m=n.runWebGLProgram(x,[o,i],"float32")}let v=fe({inputs:{x:m},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(m),v}var BZ={kernelName:zE,backendName:"webgl",kernelFunc:tDe};var yS=class{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;let n=t.strideHeight,r=t.strideWidth,o=t.padInfo.top,i=t.padInfo.left,s=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},vS=class{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;let n=t.filterHeight,r=t.filterWidth,o=t.strideHeight,i=t.strideWidth,s=t.dataFormat==="channelsLast",a=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=s?1:2,f=s?2:3,d=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${f}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},xS=class{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;let n=t.strideDepth,r=t.strideHeight,o=t.strideWidth,i=t.padInfo.front,s=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${s};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},bS=class{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;let n=t.filterDepth,r=t.filterHeight,o=t.filterWidth,i=t.strideDepth,s=t.strideHeight,a=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,f=o-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${c}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function nDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:s,pad:a,dataFormat:u,dimRoundingMode:c,filterShape:f}=r,d=U.convertConv2DDataFormat(u),h=U.computeConv2DInfo(o.shape,f,s,1,a,c,!1,d),m=new yS(h);return n.runWebGLProgram(m,[o,i],"float32")}var UZ={kernelName:HE,backendName:"webgl",kernelFunc:nDe};var wS=class{constructor(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=qt(this.outputShape.length);let n=t.filterHeight,r=t.filterWidth,o=n-1-t.padInfo.top,i=r-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${t.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${t.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function rDe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{inputShape:s,strides:a,pad:u,dataFormat:c,dimRoundingMode:f}=r,d=U.convertConv2DDataFormat(c),h=U.computeConv2DInfo(s,i.shape,a,1,u,f,!1,d);if(z().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){let m=[[h.strideHeight,h.strideWidth]],v=new wS(h);return n.runWebGLProgram(v,[o,i],"float32",m)}else{let m=new vS(h);return n.runWebGLProgram(m,[o,i],"float32")}}var GZ={kernelName:WE,backendName:"webgl",kernelFunc:rDe};function oDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:s,pad:a,dilations:u}=r,c=U.computeConv3DInfo(o.shape,i.shape,s,u,a),f=new dS(c);return n.runWebGLProgram(f,[o,i],"float32")}var jZ={kernelName:qE,backendName:"webgl",kernelFunc:oDe};function iDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:s,pad:a,filterShape:u}=r,c=U.computeConv3DInfo(o.shape,u,s,1,a),f=new xS(c);return n.runWebGLProgram(f,[o,i],"float32")}var zZ={kernelName:pz,backendName:"webgl",kernelFunc:iDe};function sDe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{pad:s,strides:a,inputShape:u}=r,c=U.computeConv3DInfo(u,i.shape,a,1,s),f=new bS(c);return n.runWebGLProgram(f,[o,i],"float32")}var HZ={kernelName:KE,backendName:"webgl",kernelFunc:sDe};var aDe=Zs+`
  return cos(x);
`,uDe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Oi}
  return result;
`,cDe=Ne({opSnippet:aDe,packedOpSnippet:uDe}),WZ={kernelName:XE,backendName:"webgl",kernelFunc:cDe};var lDe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,fDe=Ne({opSnippet:lDe}),qZ={kernelName:YE,backendName:"webgl",kernelFunc:fDe};var ES=class{constructor(t,n,r,o,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[s,a,u,c]=t,[f]=n,[d,h]=r;this.outputShape=[f,d,h,c];let m=o==="bilinear"?1:0,[v,x]=[`${a-1}.0`,`${u-1}.0`],[b,C,D]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${v} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${v}`],[O,F,B]=h>1?[`${(u-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${x} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${x}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${O});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${C};
        float width_scale = ${F};

        float in_y = ${D};
        if( in_y < 0.0 || in_y > ${v} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${B};
        if( in_x < 0.0 || in_x > ${x} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${m} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var dDe=e=>{let{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:i,boxInd:s}=t,{cropSize:a,method:u,extrapolationValue:c}=r,f=new ES(o.shape,i.shape,a,u,c);return n.runWebGLProgram(f,[o,i,s],"float32")},KZ={kernelName:JE,backendName:"webgl",kernelFunc:dDe};var Km=function(e){return e.Prod="*",e.Sum="+",e}(Km||{}),E0=class{constructor(t,n,r,o){this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let i=this.outputShape.length,s=this.op===Km.Prod?"1.0":"0.0",a=r?s:`getX(${XZ(i,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1],c="",f="";r?(c=o?`end != ${u-1}`:"end != 0",f=o?"end + 1":"end - 1"):(c=o?`end + pow2 < ${u}`:"end >= pow2",f=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Qe(i)} coords = getOutputCoords();
        int end = ${YZ(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${f};
          ${YZ(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${XZ(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function XZ(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function YZ(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function CS(e,t,n,r,o,i){let s=t.shape.length,a=U.getAxesPermutation([r],s),u=t;a!=null&&(u=xn({inputs:{x:t},backend:n,attrs:{perm:a}}));let c=U.getInnerMostAxes(1,s)[0];if(c!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);let f=u.shape[c],d=Bn({inputs:{x:u},backend:n});for(let h=0;h<=Math.ceil(Math.log2(f))-1;h++){let m=new E0(e,u.shape,!1,i),v=[[h]],x=d;d=n.runWebGLProgram(m,[d],d.dtype,v),n.disposeIntermediateTensorInfo(x)}if(o){let h=new E0(e,u.shape,o,i),m=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(m)}if(a!=null){let h=U.getUndoAxesPermutation(a),m=xn({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),m}return d}function pDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,exclusive:s,reverse:a}=r;return CS(Km.Prod,o,n,i,s,a)}var ZZ={kernelName:ZE,backendName:"webgl",kernelFunc:pDe};function hDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,exclusive:s,reverse:a}=r;return CS(Km.Sum,o,n,i,s,a)}var QZ={kernelName:QE,backendName:"webgl",kernelFunc:hDe};function mDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,weights:i}=t,{size:s,binaryOutput:a}=r;if(o.shape.length===1){let u=n.readSync(o.dataId),c=n.readSync(i.dataId),f=LI(u,c,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,f)}else if(o.shape.length===2){let u=n.bufferSync(o),c=n.bufferSync(i),f=PX(u,c,s,a);return n.makeTensorInfo(f.shape,i.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}var JZ={kernelName:eC,backendName:"webgl",kernelFunc:mDe};var TS=class{constructor(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function gDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:i,dataFormat:s}=r,a=o.shape[0],u=s==="NHWC"?o.shape[1]:o.shape[2],c=s==="NHWC"?o.shape[2]:o.shape[3],f=s==="NHWC"?o.shape[3]:o.shape[1],d=u*i,h=c*i,m=f/(i*i),v=s==="NHWC"?[a,d,h,m]:[a,m,d,h],x=new TS(v,i,s);return n.runWebGLProgram(x,[o],o.dtype)}var eQ={kernelName:tC,backendName:"webgl",kernelFunc:gDe};var Xm=class{constructor(t,n=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=qt(this.outputShape.length);let s=t.filterHeight,a=t.filterWidth,u=t.outChannels/t.inChannels,c="",f="";r&&(o?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,f="result = activation(result);");let d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${f}
        setOutput(result);
      }
    `}};var Ym=class{constructor(t,n=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=qt(this.outputShape.length);let s=t.outChannels/t.inChannels,a=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,f=t.filterHeight,d=t.filterWidth,h=d,m=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let C=0;C<d;C++)m+=`
          vec4 xTexelC${C*2};
          int xTexelC${C*2}Ready;
          vec4 xTexelC${C*2+1};
          int xTexelC${C*2+1}Ready;
          vec4 xC${C};`;m+=`
    for (int r = 0; r < ${f}; r++) {
      `;for(let C=0;C<d;C++)m+=`
          xTexelC${C*2} = vec4(0.0);
          xTexelC${C*2}Ready = 0;
          xTexelC${C*2+1} = vec4(0.0);
          xTexelC${C*2+1}Ready = 0;
          xC${C} = vec4(0.0);`;m+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let C=0;C<(h+1)/2;C++){let D=C*2;if(m+=`
          xC = xCCorner + ${D*c};
          `,u===1){if(D<d&&(a%2===1?(m+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${D}Ready == 0) {
                  xTexelC${D} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${D}.zw = vec2(0.0);
                  }
                  xTexelC${D}Ready = 1;
                }
              `,c===1&&D>0?m+=`
                xC${D} = vec4(xTexelC${D-2}.zw, xTexelC${D}.xy);
                `:m+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${D} = vec4(previous.zw, xTexelC${D}.xy);
                  } else {
                    xC${D} = vec4(0.0, 0.0, xTexelC${D}.xy);
                  }
                  `):m+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${D}Ready == 0) {
                  xTexelC${D} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${D}.zw = vec2(0.0);
                  }
                  xTexelC${D}Ready = 1;
                }

                xC${D} = xTexelC${D};
                `,D+1<d)){let O=a%2===0?N.nearestLargerEven(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(m+=`
                  xCOffset = xC + imod(pads[1], 2) + ${O};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${D+1}Ready == 0) {
                    xTexelC${D+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${D+1}.zw = vec2(0.0);
                    }
                    xTexelC${D+1}Ready = 1;
                  }
                  `,c>1?m+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${D+1} = vec4(previous.zw, xTexelC${D+1}.xy);
                    } else {
                     xC${D+1} = vec4(0.0, 0.0, xTexelC${D+1}.xy);
                    }
                    `:m+=`
                    xC${D+1} = vec4(xTexelC${D}.zw, xTexelC${D+1}.xy);
                    `):O===1?m+=`
                    xC${D+1} = xTexelC${D};
                    `:m+=`
                    xCOffset = xC + ${O};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${D+1}Ready == 0) {
                      xTexelC${D+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${D+1}.zw = vec2(0.0);
                      }
                      xTexelC${D+1}Ready = 1;
                    }

                    xC${D+1} = xTexelC${D+1};
                    `}}else D<d&&(a%2===1?(m+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${D}Ready == 0) {
                  xTexelC${D} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${D}.zw = vec2(0.0);
                  }
                  xTexelC${D}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${D+1}Ready == 0) {
                  xTexelC${D+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${D+1}.zw = vec2(0.0);
                  }
                  xTexelC${D+1}Ready = 1;
                }

                xC${D} = vec4(xTexelC${D}.zw, xTexelC${D+1}.zw);
              `,D+1<d&&(m+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${D+1} = vec4(xTexelC${D+1}.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${D}Ready == 0) {
                  xTexelC${D} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${D}.zw = vec2(0.0);
                  }
                  xTexelC${D}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${D+1}Ready == 0) {
                  xTexelC${D+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${D+1}.zw = vec2(0.);
                  }
                  xTexelC${D+1}Ready = 1;
                }

                xC${D} = vec4(
                  xTexelC${D}.xy, xTexelC${D+1}.xy);
              `,D+1<d&&(m+=`
                  xC${D+1} = vec4(xTexelC${D}.zw, xTexelC${D+1}.zw);
                `)));D<d&&(m+=`
            wTexel = getW(r, ${D}, d1, q);
            dotProd += xC${D} * vec4(wTexel.xz, wTexel.xz);
          `,D+1<d&&(m+=`
              wTexel = getW(r, ${D+1}, d1, q);
              dotProd += xC${D+1} * vec4(wTexel.xz, wTexel.xz);
            `))}m+=`
    }
  `,m+=`
      }
    `;let v="",x="";r&&(o?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:v=`vec4 activation(vec4 x) {
          ${r}
        }`,x="result = activation(result);");let b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${v}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${m}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${b}
        ${x}
        setOutput(result);
      }
    `}};function yDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:s,pad:a,dilations:u,dimRoundingMode:c}=r,f=u;f==null&&(f=[1,1]),N.assert(U.eitherStridesOrDilationsAreOne(s,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${f}'`);let d=U.computeConv2DInfo(o.shape,i.shape,s,f,a,c,!0),h;z().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new Ym(d):h=new Xm(d);let m=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[o,i],"float32",m)}var tQ={kernelName:nC,backendName:"webgl",kernelFunc:yDe};var _S=class{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;let n=t.strideHeight,r=t.strideWidth,o=t.padInfo.top,i=t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},IS=class{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;let n=t.filterHeight,r=t.filterWidth,o=t.strideHeight,i=t.strideWidth,s=n-1-t.padInfo.top,a=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function vDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:s,dilations:a,pad:u,dimRoundingMode:c,filterShape:f}=r,d=U.computeConv2DInfo(o.shape,f,s,a,u,c,!0),h=new _S(d);return n.runWebGLProgram(h,[o,i],"float32")}var nQ={kernelName:rC,backendName:"webgl",kernelFunc:vDe};function xDe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{strides:s,dilations:a,pad:u,dimRoundingMode:c,inputShape:f}=r,d=U.computeConv2DInfo(f,i.shape,s,a,u,c,!0),h=new IS(d);return n.runWebGLProgram(h,[o,i],"float32")}var rQ={kernelName:oC,backendName:"webgl",kernelFunc:xDe};var SS=class{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function bDe(e){let{inputs:t,backend:n}=e,{x:r}=t,o=[...r.shape,...r.shape],i=N.sizeFromShape(r.shape),s=fe({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new SS(i),u=n.runWebGLProgram(a,[s],s.dtype),c=fe({inputs:{x:u},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}var oQ={kernelName:iC,backendName:"webgl",kernelFunc:bDe};var DS=class{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;let{inHeight:n,inWidth:r,padInfo:o,strideHeight:i,strideWidth:s,filterHeight:a,filterWidth:u,dilationHeight:c,dilationWidth:f}=t,{top:d,left:h}=o;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${s});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${f};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function wDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:s,pad:a,dilations:u}=r,c=U.computeDilation2DInfo(o.shape,i.shape,s,a,"NHWC",u),f,d=new DS(c);f=n.runWebGLProgram(d,[o,i],"float32");let h=fe({inputs:{x:f},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(f),h}var iQ={kernelName:sC,backendName:"webgl",kernelFunc:wDe};function EDe(e){let{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,i=t,{allDims:s,summedDims:a,idDims:u}=U.decodeEinsumEquation(o,i.length);U.checkEinsumDimSizes(s.length,u,i);let{path:c,steps:f}=U.getEinsumComputePath(a,u),d=f.length,h=null,m=s.length,v=[];for(let x=0;x<d;++x){for(let b of f[x]){let{permutationIndices:C,expandDims:D}=U.getEinsumPermutation(m,u[b]),O;U.isIdentityPermutation(C)?O=i[b]:(O=xn({inputs:{x:i[b]},backend:n,attrs:{perm:C}}),v.push(O));let F=O.shape.slice();for(let B=0;B<D.length;++B)F.splice(D[B],0,1);N.arraysEqual(O.shape,F)||(O=fe({inputs:{x:O},backend:n,attrs:{shape:F}}),v.push(O)),h===null?h=O:(h=b0({inputs:{a:O,b:h},backend:n}),v.push(h))}x<d-1&&(c[x]>=0&&(h=Pd({inputs:{x:h},backend:n,attrs:{axis:c[x]-(s.length-m),keepDims:!1}}),v.push(h)),m--)}for(let x of v)x!==h&&n.disposeIntermediateTensorInfo(x);return h}var sQ={kernelName:uC,backendName:"webgl",kernelFunc:EDe};var CDe="return (x >= 0.0) ? x : (exp(x) - 1.0);",TDe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,_De=Ne({opSnippet:CDe,packedOpSnippet:TDe}),aQ={kernelName:cC,backendName:"webgl",kernelFunc:_De};var IDe="return (b >= 0.0) ? a : a * (b + 1.0);",SDe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,DDe=e=>{let{inputs:t,backend:n}=e,{dy:r,y:o}=t,i=z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ki(SDe,r.shape,o.shape):new ri(IDe,r.shape,o.shape);return n.runWebGLProgram(i,[r,o],r.dtype)},uQ={kernelName:hz,backendName:"webgl",kernelFunc:DDe};var NDe=`
  return vec4(equal(a, b));
`,ADe="return float(a == b);",RDe=Ut({opSnippet:ADe,packedOpSnippet:NDe,dtype:"bool",cpuKernelImpl:UX}),cQ={kernelName:jh,backendName:"webgl",kernelFunc:RDe};var kDe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${U.ERF_P};
  float a1 = ${U.ERF_A1};
  float a2 = ${U.ERF_A2};
  float a3 = ${U.ERF_A3};
  float a4 = ${U.ERF_A4};
  float a5 = ${U.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,ODe=Ne({opSnippet:kDe}),lQ={kernelName:lC,backendName:"webgl",kernelFunc:ODe};var MDe=Zs+`
  return exp(x);
`,FDe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,X3=Ne({opSnippet:MDe,packedOpSnippet:FDe,cpuKernelImpl:GX,dtype:"float32"}),fQ={kernelName:zh,backendName:"webgl",kernelFunc:X3};function NS(e){let{inputs:t,attrs:n,backend:r}=e,{dim:o}=n,{input:i}=t,s=i.shape.length,a=i.shape.slice(),u=o;return o<0&&(N.assert(-(s+1)<=o,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),u=s+o+1),a.splice(u,0,1),fe({inputs:{x:i},backend:r,attrs:{shape:a}})}var dQ={kernelName:fC,backendName:"webgl",kernelFunc:NS};var pQ="return exp(x) - 1.0;",PDe=Ne({opSnippet:pQ,packedOpSnippet:pQ,cpuKernelImpl:jX}),hQ={kernelName:Hh,backendName:"webgl",kernelFunc:PDe};var C0=class{constructor(t,n,r){this.variableNames=["real","imag"];let o=n[1];this.outputShape=n;let i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=r?`${o}.0`:"1.0",a;if(t==="real")a="return real * expR - imag * expI;";else if(t==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function AS(e,t,n){let r=n.texData.get(e.dataId),o=N.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],s=o/i,a=fe({inputs:{x:e},backend:n,attrs:{shape:[s,i]}}),u=a.shape,c=new C0("real",u,t),f=new C0("imag",u,t),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],h=n.runWebGLProgram(c,d,"float32"),m=n.runWebGLProgram(f,d,"float32"),v=oi({inputs:{real:h,imag:m},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m);let x=fe({inputs:{x:v},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(v),x}function $De(e){let{inputs:t,backend:n}=e,{input:r}=t;return AS(r,!1,n)}var mQ={kernelName:dC,backendName:"webgl",kernelFunc:$De};var RS=class{constructor(t,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function vc(e){let{backend:t,attrs:n}=e,{shape:r,value:o}=n,{dtype:i}=n;if(i=i||N.inferDtype(o),i==="string"){let s=N.getArrayFromDType(i,N.sizeFromShape(r));return s.fill(o),t.makeTensorInfo(r,i,s)}else{let s=new RS(r,o),a=[[o]];return t.runWebGLProgram(s,[],i,a)}}var gQ={kernelName:pC,backendName:"webgl",kernelFunc:vc};var kS=class{constructor(t){this.variableNames=["Image"],this.outputShape=[];let n=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var yQ={kernelName:hC,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{let{image:n}=e,r=t,o=new kS(n.shape);return r.runWebGLProgram(o,[n],n.dtype)}};var vQ="return floor(x);",LDe=Ne({opSnippet:vQ,packedOpSnippet:vQ,cpuKernelImpl:zX}),xQ={kernelName:Wh,backendName:"webgl",kernelFunc:LDe};var VDe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,BDe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,UDe=Ut({opSnippet:VDe,packedOpSnippet:BDe,dtype:"int32"}),bQ={kernelName:qh,backendName:"webgl",kernelFunc:UDe};var OS=class{constructor(t){this.variableNames=["A"];let n=Dn(),[r,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};var MS=class{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let n=Dn(),[r,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}};var wQ={kernelName:$v,backendName:"webgl",kernelFunc:GDe},Zm,Y3=z().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function GDe(e){let{inputs:t,backend:n,attrs:r}=e,{pixels:o}=t,{numChannels:i}=r,s=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[u,c]=s?[o.videoWidth,o.videoHeight]:[o.width,o.height],f=[c,u],d=[c,u,i];if(a||s){let x=z().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Zm==null||x!==Y3)&&(Y3=x,Zm=document.createElement("canvas").getContext("2d",{willReadFrequently:Y3})),Zm.canvas.width=u,Zm.canvas.height=c,Zm.drawImage(o,0,0,u,c),o=Zm.canvas}let h=n.makeTensorInfo(f,"int32");n.texData.get(h.dataId).usage=lo.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);let m=z().getBool("WEBGL_PACK")?new MS(d):new OS(d),v=n.runWebGLProgram(m,[h],"int32");return n.disposeData(h.dataId),v}function jDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i,bias:s,preluActivationWeights:a}=t,{strides:u,pad:c,dataFormat:f,dilations:d,dimRoundingMode:h,activation:m,leakyreluAlpha:v}=r,x=U.convertConv2DDataFormat(f),b=U.computeConv2DInfo(o.shape,i.shape,u,d,c,h,!1,x),C,D=[],O=s!=null,F=a!=null,B=m==="leakyrelu",H=()=>{let Z=[o,i],te=(J,ae)=>{if(ae==="NCHW"&&J.shape.length===1&&J.shape[0]!==1){let ye=fe({inputs:{x:J},backend:n,attrs:{shape:[J.shape[0],1,1]}});return D.push(ye),ye}return J};if(O&&Z.push(te(s,f)),F&&Z.push(te(a,f)),B){let J=n.makeTensorInfo([],"float32",N.createScalarValue(v,"float32"));Z.push(J),D.push(J)}return Z};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))C=mS({x:o,filter:i,convInfo:b,backend:n,bias:s,activation:m,preluActivationWeights:a,leakyreluAlpha:v});else if(b.strideWidth<=2&&x==="channelsLast"&&z().getBool("WEBGL_EXP_CONV")){let Z=m?gc(m,!0):null,te=new qm(b,O,Z,F,B),J=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],ae=H();C=n.runWebGLProgram(te,ae,"float32",J)}else if(z().getBool("WEBGL_CONV_IM2COL"))C=gS({x:o,filter:i,convInfo:b,backend:n,bias:s,activation:m,preluActivationWeights:a,leakyreluAlpha:v});else{let Z=m?gc(m,!1):null,te=new Wm(b,O,Z,F,B),J=H();C=n.runWebGLProgram(te,J,"float32")}let X=fe({inputs:{x:C},backend:n,attrs:{shape:b.outShape}});return D.push(C),D.forEach(Z=>n.disposeIntermediateTensorInfo(Z)),X}var EQ={kernelName:Vv,backendName:"webgl",kernelFunc:jDe};function zDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i,bias:s,preluActivationWeights:a}=t,{strides:u,pad:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r,v=[],x=f;x==null&&(x=[1,1]),N.assert(U.eitherStridesOrDilationsAreOne(u,x),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${x}'`);let b=U.computeConv2DInfo(o.shape,i.shape,u,x,c,d,!0),C=z().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,D=h?gc(h,C):null,O=[o,i],F=s!=null,B=a!=null,H=h==="leakyrelu";if(F&&O.push(s),B&&O.push(a),H){let J=n.makeTensorInfo([],"float32",N.createScalarValue(m,"float32"));O.push(J),v.push(J)}let X;C?X=new Ym(b,F,D,B,H):X=new Xm(b,F,D,B,H);let Z=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],te=n.runWebGLProgram(X,O,"float32",Z);return v.forEach(J=>n.disposeIntermediateTensorInfo(J)),te}var CQ={kernelName:Bv,backendName:"webgl",kernelFunc:zDe};var FS=class{constructor(t,n,r,o){this.sliceDim=t,this.strides=n,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=r;let i=Qe(r.length),s=`
    int index;`;for(let a=0;a<this.sliceDim;a++)s+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function HDe(e){let{inputs:t,backend:n}=e,{params:r,indices:o}=t,i=o.shape,s=i[i.length-1],a=N.sizeFromShape(r.shape),[u,c,f,d]=U.prepareAndValidate(r,o),h=fe({inputs:{x:o},backend:n,attrs:{shape:[c,s]}}),m=fe({inputs:{x:r},backend:n,attrs:{shape:[N.sizeFromShape(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,o])||r.dtype==="string"){let C=n.readSync(o.dataId),D=n.bufferSync(r),O=HX(C,D,r.dtype,c,s,f,d,r.shape,a);return n.makeTensorInfo(u,r.dtype,O.values)}let v=new FS(s,d,[c,f],r.shape),x=n.runWebGLProgram(v,[m,h],m.dtype),b=fe({inputs:{x},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),b}var TQ={kernelName:yC,backendName:"webgl",kernelFunc:HDe};var PS=class{constructor(t,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;let r=Qe(this.rank),o=WDe(t,2);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}};function WDe(e,t){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<e.length;o++)o===2?r.push("index"):r.push(`${n[o]}`);return r.join()}function Z3(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,indices:i}=t,{axis:s,batchDims:a}=r,u=N.parseAxisParam(s,o.shape)[0];if(z().get("DEBUG")){let D=n.readSync(i.dataId),O=o.shape[u];for(let F=0;F<D.length;++F){let B=D[F];N.assert(B<=O-1&&B>=0,()=>`GatherV2: the index value ${B} is not in [0, ${O-1}]`)}}let c=U.segment_util.collectGatherOpShapeInfo(o,i,u,a),f=N.sizeFromShape(i.shape),d=[],h=fe({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),m=fe({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,f/c.batchSize]}});d.push(h),d.push(m);let v=[c.batchSize,c.outerSize,f/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([o,i])||o.dtype==="string"){let D=n.bufferSync(m),O=n.bufferSync(h),F=WX(O,D,v);return d.forEach(B=>n.disposeIntermediateTensorInfo(B)),n.makeTensorInfo(c.outputShape,F.dtype,F.values)}let x=new PS(h.shape,v),b=n.runWebGLProgram(x,[h,m],h.dtype);d.push(b);let C=fe({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return d.forEach(D=>n.disposeIntermediateTensorInfo(D)),C}var _Q={kernelName:gC,backendName:"webgl",kernelFunc:Z3};var qDe="return float(a > b);",KDe=`
  return vec4(greaterThan(a, b));
`,XDe=Ut({opSnippet:qDe,packedOpSnippet:KDe,cpuKernelImpl:qX,dtype:"bool"}),IQ={kernelName:Kh,backendName:"webgl",kernelFunc:XDe};var YDe="return float(a >= b);",ZDe=`
  return vec4(greaterThanEqual(a, b));
`,QDe=Ut({opSnippet:YDe,packedOpSnippet:ZDe,dtype:"bool",cpuKernelImpl:KX}),SQ={kernelName:Xh,backendName:"webgl",kernelFunc:QDe};function JDe(e){let{inputs:t,backend:n}=e,{input:r}=t;return AS(r,!0,n)}var DQ={kernelName:vC,backendName:"webgl",kernelFunc:JDe};var eNe="return float(!isnan(x) && !isinf(x));",tNe=Ne({opSnippet:eNe,dtype:"bool"}),NQ={kernelName:bC,backendName:"webgl",kernelFunc:tNe};var nNe="return float(isinf(x));",rNe=Ne({opSnippet:nNe,dtype:"bool"}),AQ={kernelName:wC,backendName:"webgl",kernelFunc:rNe};var oNe="return float(isnan(x));",iNe=Ne({opSnippet:oNe,dtype:"bool"}),RQ={kernelName:EC,backendName:"webgl",kernelFunc:iNe};var sNe="return float(a < b);",aNe=`
  return vec4(lessThan(a, b));
`,uNe=Ut({opSnippet:sNe,packedOpSnippet:aNe,cpuKernelImpl:XX,dtype:"bool"}),kQ={kernelName:Yh,backendName:"webgl",kernelFunc:uNe};var cNe="return float(a <= b);",lNe=`
  return vec4(lessThanEqual(a, b));
`,fNe=Ut({opSnippet:cNe,packedOpSnippet:lNe,cpuKernelImpl:YX,dtype:"bool"}),OQ={kernelName:Zh,backendName:"webgl",kernelFunc:fNe};function dNe(e){let{backend:t,attrs:n}=e,{start:r,stop:o,num:i}=n,s=ZX(r,o,i);return t.makeTensorInfo([s.length],"float32",s)}var MQ={kernelName:TC,backendName:"webgl",kernelFunc:dNe};var pNe=Zs+`
  return x < 0.0 ? 0./0. : log(x);
`,hNe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,mNe=Ne({opSnippet:pNe,packedOpSnippet:hNe,cpuKernelImpl:QX}),FQ={kernelName:Qh,backendName:"webgl",kernelFunc:mNe};var gNe=Zs+`
  return log(1.0 + x);
`,yNe=Ne({opSnippet:gNe}),PQ={kernelName:_C,backendName:"webgl",kernelFunc:yNe};var vNe="return float(a >= 1.0 && b >= 1.0);",xNe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,bNe=Ut({opSnippet:vNe,packedOpSnippet:xNe,dtype:"bool"}),$Q={kernelName:IC,backendName:"webgl",kernelFunc:bNe};var wNe="return float(!(x >= 1.0));",ENe=Ne({opSnippet:wNe}),LQ={kernelName:SC,backendName:"webgl",kernelFunc:ENe};var CNe="return float(a >= 1.0 || b >= 1.0);",TNe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,_Ne=Ut({opSnippet:CNe,packedOpSnippet:TNe,dtype:"bool"}),VQ={kernelName:DC,backendName:"webgl",kernelFunc:_Ne};var $S=class{constructor(t,n,r,o,i){this.variableNames=["x"],this.outputShape=[];let s=n,a=t[3]-1;this.outputShape=t;let u,c=`float(${r}) + float(${o}) * sum`;i===.5?u=`inversesqrt(${c})`:i===1?u=`1.0/(${c})`:u=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}};var LS=class{constructor(t,n,r,o,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let s=n,a=t[3]-1;this.outputShape=t;let u,c=`float(${r}) + float(${o}) * sum`;i===.5?u=`inversesqrt(${c})`:i===1?u=`1.0/(${c})`:u=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}};var INe=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:i,bias:s,alpha:a,beta:u}=r,c=z().getBool("WEBGL_PACK_NORMALIZATION")?new LS(o.shape,i,s,a,u):new $S(o.shape,i,s,a,u);return n.runWebGLProgram(c,[o],o.dtype)},BQ={kernelName:NC,backendName:"webgl",kernelFunc:INe};var VS=class{constructor(t,n,r,o,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=o,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var SNe=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:o,y:i,dy:s}=t,{depthRadius:a,bias:u,alpha:c,beta:f}=r,d=new VS(o.shape,a,u,c,f);return n.runWebGLProgram(d,[o,i,s],o.dtype)},UQ={kernelName:mz,backendName:"webgl",kernelFunc:SNe};function GQ(e,t,n,r){let o=N.sizeFromShape(t),s=N.sizeFromShape(e.shape)/o,a=fe({inputs:{x:e},attrs:{shape:[s,o]},backend:r}),u=Mi(a,e.dtype,"max",r),c=fe({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(u),c}function Q3(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:i,keepDims:s}=r,a=o.shape.length,u=N.parseAxisParam(i,o.shape),c=u,f=U.getAxesPermutation(c,a),d=f!=null,h=n.shouldExecuteOnCPU([o]),m=o;if(d){if(h){let O=n.texData.get(m.dataId).values,F=new Array(a);for(let X=0;X<F.length;X++)F[X]=o.shape[f[X]];let B=Fd(O,o.shape,o.dtype,f,F);m=n.makeTensorInfo(F,o.dtype);let H=n.texData.get(m.dataId);H.values=B}else m=jl(o,f,n);c=U.getInnerMostAxes(c.length,a)}U.assertAxesAreInnerMostDims("max",c,a);let[v,x]=U.computeOutAndReduceShapes(m.shape,c),b=v;s&&(b=U.expandShapeToKeepDim(v,u));let C;if(h){let O=n.texData.get(m.dataId).values,F=JX(O,N.sizeFromShape(x),b,o.dtype);C=n.makeTensorInfo(b,o.dtype);let B=n.texData.get(C.dataId);B.values=F}else C=GQ(m,x,b,n);return d&&n.disposeIntermediateTensorInfo(m),C}var jQ={kernelName:AC,backendName:"webgl",kernelFunc:Q3};var DNe=jm+`
  return max(a, b);
`,NNe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Oi+`
  return result;
`,ANe=Ut({opSnippet:DNe,packedOpSnippet:NNe,cpuKernelImpl:eY}),zQ={kernelName:Jh,backendName:"webgl",kernelFunc:ANe};function RNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t;vu(o,"maxPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:u}=r,c=1;N.assert(U.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let f=U.computePool2DInfo(o.shape,i,s,c,a,u);if(f.filterWidth===1&&f.filterHeight===1&&N.arraysEqual(f.inShape,f.outShape))return Bn({inputs:{x:o},backend:n});let d=new Aa(f,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}var HQ={kernelName:RC,backendName:"webgl",kernelFunc:RNe};function kNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:i,strides:s,pad:a,dataFormat:u,dimRoundingMode:c}=r,f=[1,1,1],d=U.computePool3DInfo(o.shape,i,s,f,a,c,u),h=new zl(d,"max",!1);return n.runWebGLProgram(h,[o],o.dtype)}var WQ={kernelName:kC,backendName:"webgl",kernelFunc:kNe};var BS=class{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;let n=t.strideHeight,r=t.strideWidth,o=t.dilationHeight,i=t.effectiveFilterHeight,s=t.effectiveFilterWidth,a=i-1-t.padInfo.top,u=s-1-t.padInfo.left,c=i*s-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},US=class{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;let n=t.strideDepth,r=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=u-1-t.padInfo.front,h=c-1-t.padInfo.top,m=f-1-t.padInfo.left,v=u*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${m});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${v} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${f} +
                  wR * ${f} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function ONe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,s=i,{filterSize:a,strides:u,pad:c,dimRoundingMode:f}=r,d=[1,1,1],h=U.computePool3DInfo(s.shape,a,u,d,c,f),m=new zl(h,"max",!0),v=n.runWebGLProgram(m,[s],s.dtype),x=new US(h),b=n.runWebGLProgram(x,[o,v],s.dtype);return n.disposeIntermediateTensorInfo(v),b}var qQ={kernelName:yz,backendName:"webgl",kernelFunc:ONe};function MNe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i,output:s}=t,a=i;vu([i,s],"maxPoolGrad");let{filterSize:u,strides:c,pad:f,dimRoundingMode:d}=r,h=U.computePool2DInfo(a.shape,u,c,1,f,d),m=!0,v=new Aa(h,"max",m),x=n.runWebGLProgram(v,[a],a.dtype),b=new BS(h),C=n.runWebGLProgram(b,[o,x],a.dtype);return n.disposeIntermediateTensorInfo(x),C}var KQ={kernelName:gz,backendName:"webgl",kernelFunc:MNe};function XQ(e,t,n,r){let o=new Aa(n,"max",!1),i=r.runWebGLProgram(o,[e],"float32");o=new Aa(n,"max",!0,!0,t);let s=r.runWebGLProgram(o,[e],"float32");return[i,s]}var YQ={kernelName:OC,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:o,strides:i,pad:s,includeBatchInIndex:a}=t,u=n;N.assert(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);let c=[1,1];N.assert(U.eitherStridesOrDilationsAreOne(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);let f=U.computePool2DInfo(r.shape,o,i,c,s),[d,h]=XQ(r,a,f,u);return[d,h]}};function ZQ(e,t,n,r){let o=N.sizeFromShape(t),s=N.sizeFromShape(e.shape)/o,a=fe({inputs:{x:e},attrs:{shape:[s,o]},backend:r}),u=Mi(a,"float32","mean",r),c=fe({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(u),c}var QQ={kernelName:MC,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{keepDims:o,axis:i}=t,s=n,a=r.shape.length,u=N.parseAxisParam(i,r.shape),c=u,f=U.getAxesPermutation(c,a),d=f!=null,h=s.shouldExecuteOnCPU([r]),m=[],v=r;if(d){if(h){let F=s.texData.get(v.dataId).values,B=new Array(a);for(let Z=0;Z<B.length;Z++)B[Z]=r.shape[f[Z]];let H=Fd(F,r.shape,r.dtype,f,B);v=s.makeTensorInfo(B,r.dtype);let X=s.texData.get(v.dataId);X.values=H}else v=jl(r,f,s);m.push(v),c=U.getInnerMostAxes(c.length,a)}U.assertAxesAreInnerMostDims("sum",c,a);let[x,b]=U.computeOutAndReduceShapes(v.shape,c),C=x;o&&(C=U.expandShapeToKeepDim(x,u));let D=ZQ(v,b,C,s);for(let O of m)s.disposeIntermediateTensorInfo(O);return D}};function FNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:s}=r,a=o.shape.length,u=N.parseAxisParam(i,o.shape),c=u,f=U.getAxesPermutation(c,a),d=o;f!=null&&(d=xn({inputs:{x:o},backend:n,attrs:{perm:f}}),c=U.getInnerMostAxes(c.length,o.shape.length)),U.assertAxesAreInnerMostDims("min",c,a);let[h,m]=U.computeOutAndReduceShapes(d.shape,c),v=N.sizeFromShape(m),x=fe({inputs:{x:d},backend:n,attrs:{shape:[-1,v]}}),b=Mi(x,x.dtype,"min",n),C;if(s){let D=U.expandShapeToKeepDim(h,u);C=fe({inputs:{x:b},backend:n,attrs:{shape:D}})}else C=fe({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),f!=null&&n.disposeIntermediateTensorInfo(d),C}var JQ={kernelName:FC,backendName:"webgl",kernelFunc:FNe};var PNe=jm+`
  return min(a, b);
`,$Ne=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Oi+`
  return result;
`,LNe=Ut({opSnippet:PNe,packedOpSnippet:$Ne,cpuKernelImpl:tY}),eJ={kernelName:em,backendName:"webgl",kernelFunc:LNe};var GS=class{constructor(t,n,r){this.variableNames=["x"],this.outputShape=n.map((f,d)=>f[0]+t[d]+f[1]);let o=t.length,i=Qe(o),s=n.map(f=>f[0]).join(","),a=n.map((f,d)=>f[0]+t[d]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),c=r==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}};var jS=class{constructor(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((v,x)=>v[0]+t[x]+v[1]);let o=t.length,i=Qe(o),s=n.map(v=>v[0]).join(","),a=n.map((v,x)=>v[0]+t[x]).join(","),u=Vn("rc",o),c=Vn("source",o),f=`${u[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,h=r==="reflect"?0:1,m="";if(o===1){let v=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;m=`
        ${i} rc = outputLoc;
        ${v}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${u[o-1]} += 1;
        if(${f}) {
          ${v}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{let v=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;m=`
        ${i} rc = outputLoc;
        ${v}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${u[o-1]} += 1;
        if(${f}) {
          ${v}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${u[o-2]} += 1;
        if(${u[o-2]} < ${this.outputShape[o-2]}) {
          ${v}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${u[o-1]} += 1;
          if(${f}) {
            ${v}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}};var VNe=({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{paddings:o,mode:i}=n,s=z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jS(r.shape,o,i):new GS(r.shape,o,i);return t.runWebGLProgram(s,[r],r.dtype)},tJ={kernelName:PC,backendName:"webgl",kernelFunc:VNe};var BNe=`if (b == 0.0) return NAN;
  return mod(a, b);`,UNe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Oi+`
  return result;
`,GNe=Ut({opSnippet:BNe,packedOpSnippet:UNe}),nJ={kernelName:$C,backendName:"webgl",kernelFunc:GNe};var zS=class{constructor(t,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}};var jNe=`
if (a == b) {
  return 1.0;
};
return a / b;`,zNe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,J3=Ut({opSnippet:jNe,packedOpSnippet:zNe,checkOutOfBounds:!0}),rJ={kernelName:aC,backendName:"webgl",kernelFunc:J3};var oJ="return a - b;",eP=Ut({opSnippet:oJ,packedOpSnippet:oJ,supportsComplex:!0,cpuKernelImpl:EY}),iJ={kernelName:um,backendName:"webgl",kernelFunc:eP};function tP(e){let{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:i}=r,s=N.parseAxisParam([i],o.shape),a=Q3({inputs:{x:o},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),u=U.expandShapeToKeepDim(a.shape,s),c=fe({inputs:{x:a},backend:n,attrs:{shape:u}}),f=eP({inputs:{a:o,b:c},backend:n}),d=X3({inputs:{x:f},backend:n}),h=Pd({inputs:{x:d},backend:n,attrs:{axis:s,keepDims:!1}}),m=fe({inputs:{x:h},backend:n,attrs:{shape:u}}),v=J3({inputs:{a:d,b:m},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}var sJ={kernelName:vT,backendName:"webgl",kernelFunc:tP};function HNe(e){let{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:i,seed:s,normalized:a}=r,u=a?o:tP({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),c=u.shape[0],f=u.shape[1],d=new zS(c,f,i),h=[[s]],m=n.runWebGLProgram(d,[u],"int32",h);return a||n.disposeIntermediateTensorInfo(u),m}var aJ={kernelName:LC,backendName:"webgl",kernelFunc:HNe};var WNe=dr+`
  return -x;
`,qNe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function KNe(e){let{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){let i=n.texData.get(r.dataId),[s,a]=rY(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,s)}let o;return z().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new ni(r.shape,qNe):o=new Ur(r.shape,WNe),n.runWebGLProgram(o,[r],r.dtype)}var uJ={kernelName:Ov,backendName:"webgl",kernelFunc:KNe};var XNe=gu.nonMaxSuppressionV3Impl;function YNe(e){U.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:s,iouThreshold:a,scoreThreshold:u}=r,c=n.readSync(o.dataId),f=n.readSync(i.dataId),{selectedIndices:d}=XNe(c,f,s,a,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var cJ={kernelName:VC,backendName:"webgl",kernelFunc:YNe};var ZNe=gu.nonMaxSuppressionV4Impl;function QNe(e){U.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:s,iouThreshold:a,scoreThreshold:u,padToMaxOutputSize:c}=r,f=n.readSync(o.dataId),d=n.readSync(i.dataId),{selectedIndices:h,validOutputs:m}=ZNe(f,d,s,a,u,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}var lJ={kernelName:BC,backendName:"webgl",kernelFunc:QNe};var JNe=gu.nonMaxSuppressionV5Impl;function eAe(e){U.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:s,iouThreshold:a,scoreThreshold:u,softNmsSigma:c}=r,f=n.readSync(o.dataId),d=n.readSync(i.dataId),h=s,m=a,v=u,x=c,{selectedIndices:b,selectedScores:C}=JNe(f,d,h,m,v,x);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([C.length],"float32",new Float32Array(C))]}var fJ={kernelName:UC,backendName:"webgl",kernelFunc:eAe};var HS=class{constructor(t,n,r,o){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${r}),
                      float(index == coords.y)));
      }
    `}};var tAe=e=>{let{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{dtype:i,depth:s,onValue:a,offValue:u}=r,c=N.sizeFromShape(o.shape),f=new HS(c,s,a,u),d=fe({inputs:{x:o},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(f,[d],i);n.disposeIntermediateTensorInfo(d);let m=[...o.shape,s],v=fe({inputs:{x:h},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(h),v},dJ={kernelName:jC,backendName:"webgl",kernelFunc:tAe};function T0(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="complex64"){let o=yc({inputs:{input:r},backend:n}),i=T0({inputs:{x:o},backend:n}),s=Ld({inputs:{input:r},backend:n}),a=T0({inputs:{x:s},backend:n}),u=oi({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),u}else return vc({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}var pJ={kernelName:FT,backendName:"webgl",kernelFunc:T0};function hJ(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){let o=yc({inputs:{input:r},backend:n}),i=hJ({inputs:{x:o},backend:n}),s=Ld({inputs:{input:r},backend:n}),a=T0({inputs:{x:s},backend:n}),u=oi({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),u}else return vc({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}var mJ={kernelName:GC,backendName:"webgl",kernelFunc:hJ};function nAe(e){let{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(t.length===1)return NS({inputs:{input:t[0]},backend:n,attrs:{dim:o}});let i=t[0].shape,s=t[0].dtype;t.forEach(f=>{N.assertShapesMatch(i,f.shape,"All tensors passed to stack must have matching shapes"),N.assert(s===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],u=t.map(f=>{let d=NS({inputs:{input:f},backend:n,attrs:{dim:o}});return a.push(d),d}),c=K3({inputs:u,backend:n,attrs:{axis:o}});return a.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}var gJ={kernelName:zC,backendName:"webgl",kernelFunc:nAe};var WS=class{constructor(t,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,f)=>c[0]+t[f]+c[1]);let o=t.length,i=Qe(o),s=n.map(c=>c[0]).join(","),a=n.map((c,f)=>c[0]+t[f]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}};var qS=class{constructor(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((x,b)=>x[0]+t[b]+x[1]);let o=t.length,i=Qe(o),s=n.map(x=>x[0]).join(","),a=n.map((x,b)=>x[0]+t[b]).join(","),u=Vn("rc",o),c=Vn("source",o),f=`${u[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${u[o-1]} += 1;
       if(${f}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${u[o-2]} += 1;
       if(${u[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${u[o-1]} += 1;
         if(${f}) {`],m=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",v="";for(let x=0,b=o===1?2:4;x<b;x++)v+=`
        ${h[x]}
        if (${m}) {
          result[${x}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${x}] = getChannel(getX(${c.join()}), ${d});
        }
      `;v+=o===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${v}
        setOutput(result);
      }
    `}};var nP=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:i,constantValue:s}=r;if(N.sizeFromShape(o.shape)===0){let c=i.map((f,d)=>f[0]+o.shape[d]+f[1]);return vc({backend:n,attrs:{shape:c,value:s,dtype:o.dtype}})}let a=z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qS(o.shape,i,s):new WS(o.shape,i,s),u=[[s]];return n.runWebGLProgram(a,[o],o.dtype,u)},yJ={kernelName:HC,backendName:"webgl",kernelFunc:nP};var rAe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,oAe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Oi+`
  return result;
`,iAe=Ut({opSnippet:rAe,packedOpSnippet:oAe}),vJ={kernelName:WC,backendName:"webgl",kernelFunc:iAe};function sAe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:s}=r,a=o.shape.length,u=[],c=N.parseAxisParam(i,o.shape),f=c,d=U.getAxesPermutation(f,a),h=o;d!=null&&(h=xn({inputs:{x:o},backend:n,attrs:{perm:d}}),f=U.getInnerMostAxes(f.length,a),u.push(h)),U.assertAxesAreInnerMostDims("prod",f,a);let m;if(n.shouldExecuteOnCPU([h])){let v=n.texData.get(h.dataId).values,{outVals:x,outShape:b,outDtype:C}=iY(h.shape,h.dtype,v,f);m=n.makeTensorInfo(b,C,x)}else{let[v,x]=U.computeOutAndReduceShapes(h.shape,f),b=N.sizeFromShape(x),C=fe({inputs:{x:h},backend:n,attrs:{shape:[-1,b]}}),D=ud(o.dtype),O=Mi(C,D,"prod",n);m=fe({inputs:{x:O},backend:n,attrs:{shape:v}}),u.push(C),u.push(O)}if(s){u.push(m);let v=U.expandShapeToKeepDim(m.shape,c);m=fe({inputs:{x:m},backend:n,attrs:{shape:v}})}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),m}var xJ={kernelName:Mv,backendName:"webgl",kernelFunc:sAe};function aAe(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:o,paramsDenseValues:i,indices:s}=t,{outputRaggedRank:a}=r,u=o.map(C=>n.readSync(C.dataId)),c=o.map(C=>C.shape),f=n.readSync(i.dataId),d=n.readSync(s.dataId),[h,m,v]=sY(u,c,f,i.shape,i.dtype,d,s.shape,a),x=h.map(C=>n.makeTensorInfo([C.length],"int32",C)),b=n.makeTensorInfo(v,i.dtype,m);return x.concat([b])}var bJ={kernelName:KC,backendName:"webgl",kernelFunc:aAe};function uAe(e){let{inputs:t,backend:n}=e,{starts:r,limits:o,deltas:i}=t,s=n.readSync(r.dataId),a=n.readSync(o.dataId),u=n.readSync(i.dataId),[c,f]=aY(s,r.shape,r.dtype,a,o.shape,u,i.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([f.length],r.dtype,f);return[d,h]}var wJ={kernelName:XC,backendName:"webgl",kernelFunc:uAe};function cAe(e){let{inputs:t,backend:n,attrs:r}=e,{shape:o,values:i,defaultValue:s,rowPartitionTensors:a}=t,{rowPartitionTypes:u}=r,c=n.readSync(o.dataId),f=n.readSync(i.dataId),d=n.readSync(s.dataId),h=a.map(b=>n.readSync(b.dataId)),m=a.map(b=>b.shape),[v,x]=uY(c,o.shape,f,i.shape,i.dtype,d,s.shape,h,m,u);return n.makeTensorInfo(v,i.dtype,x)}var EJ={kernelName:YC,backendName:"webgl",kernelFunc:cAe};var rP=e=>{let{backend:t,attrs:n}=e,{start:r,stop:o,step:i,dtype:s}=n,a=cY(r,o,i,s);return t.makeTensorInfo([a.length],s,a)},CJ={kernelName:ZC,backendName:"webgl",kernelFunc:rP};var lAe="return 1.0 / x;",fAe=Ne({opSnippet:lAe}),TJ={kernelName:QC,backendName:"webgl",kernelFunc:fAe};var dAe=dr+`
  return (x < 0.0) ? 0.0 : x;
`,pAe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hAe=Ne({opSnippet:dAe,packedOpSnippet:pAe}),_J={kernelName:JC,backendName:"webgl",kernelFunc:hAe};var mAe=dr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,gAe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,yAe=Ne({opSnippet:mAe,packedOpSnippet:gAe}),IJ={kernelName:rT,backendName:"webgl",kernelFunc:yAe};var KS=class{constructor(t,n,r,o,i){this.variableNames=["A"],this.outputShape=[];let[s,a,u,c]=t;this.outputShape=[s,n,r,c];let f=[o&&n>1?a-1:a,o&&r>1?u-1:u],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],h;i?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/d[0]},
          ${f[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};var XS=class{constructor(t,n,r,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,u,c]=t;this.outputShape=[s,n,r,c];let f=[o&&n>1?a-1:a,o&&r>1?u-1:u],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],h;i?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/d[0]},
          ${f[1]/d[1]},
          ${f[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function vAe(e){let{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:i,halfPixelCenters:s,size:a}=r,[u,c]=a,f=z().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new XS(o.shape,u,c,i,s):new KS(o.shape,u,c,i,s);return n.runWebGLProgram(f,[o],"float32")}var SJ={kernelName:nT,backendName:"webgl",kernelFunc:vAe};var YS=class{constructor(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,o,i]=n,[,s,a]=t,u=[r&&s>1?o-1:o,r&&a>1?i-1:i],c=[r&&s>1?s-1:s,r&&a>1?a-1:a],f=u[0]/c[0],d=u[1]/c[1],h=1/f,m=1/d,v=Math.ceil(h)*2+2,x=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${m});

        const int winHeight = int(${v});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function xAe(e){let{inputs:t,backend:n,attrs:r}=e,{images:o,dy:i}=t,{alignCorners:s}=r,a=new YS(i.shape,o.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}var DJ={kernelName:xz,backendName:"webgl",kernelFunc:xAe};var ZS=class{constructor(t,n,r,o,i){this.variableNames=["A"],this.outputShape=[];let[s,a,u,c]=t;this.outputShape=[s,n,r,c];let f=[o&&n>1?a-1:a,o&&r>1?u-1:u],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],h=o?"0.5":"0.0",m;i?m="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":m="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/d[0]},
          ${f[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};var QS=class{constructor(t,n,r,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,u,c]=t;this.outputShape=[s,n,r,c];let f=[o&&n>1?a-1:a,o&&r>1?u-1:u],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],h=o?"0.5":"0.0",m;i?m="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":m="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/d[0]},
          ${f[1]/d[1]},
          ${f[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function bAe(e){let{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:i,halfPixelCenters:s,size:a}=r,[u,c]=a,f=z().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new QS(o.shape,u,c,i,s):new ZS(o.shape,u,c,i,s);return n.runWebGLProgram(f,[o],o.dtype)}var NJ={kernelName:tT,backendName:"webgl",kernelFunc:bAe};var JS=class{constructor(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,o,i]=n,[,s,a]=t,u=[r&&s>1?o-1:o,r&&a>1?i-1:i],c=[r&&s>1?s-1:s,r&&a>1?a-1:a],f=u[0]/c[0],d=u[1]/c[1],h=1/f,m=1/d,v=Math.ceil(h)*2+2,x=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${m});

        const int winHeight = int(${v});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function wAe(e){let{inputs:t,backend:n,attrs:r}=e,{images:o,dy:i}=t,{alignCorners:s}=r,a=new JS(i.shape,o.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}var AJ={kernelName:vz,backendName:"webgl",kernelFunc:wAe};var e2=class{constructor(t,n){this.variableNames=["x"];let r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=t,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}let o=a=>n.indexOf(a)!==-1&&t[a]!==1?`${t[a]} - coords[${a}] - 1`:`coords[${a}]`,i=t.map((a,u)=>o(u)).join(","),s=Qe(r);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}};var t2=class{constructor(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=t;let o=Vn("rc",r),i=`${o[r-1]} + 1 < ${this.outputShape[r-1]}`,s=`${o[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Qe(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(o.slice())};
          if(${i}){
            result.g = ${c(o.slice())};
          }
          if(${s}) {
            result.b = ${f(o.slice())};
            if(${i}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(v){return h(v)}function c(v){return v[r-1]="("+v[r-1]+" + 1)",h(v)}function f(v){return v[r-2]="("+v[r-2]+" + 1)",h(v)}function d(v){return v[r-1]="("+v[r-1]+" + 1)",v[r-2]="("+v[r-2]+" + 1)",h(v)}function h(v){let x=t.map((D,O)=>m(O,v)),b=x.join(","),C=x.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${C}))`}function m(v,x){return n.indexOf(v)!==-1&&t[v]!==1?`${t[v]} - ${x[v]} - 1`:`${x[v]}`}}};function EAe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:i}=r,s=o.shape.length,a=N.parseAxisParam(i,o.shape);if(s===0)return Bn({inputs:{x:o},backend:n});let u=z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new t2(o.shape,a):new e2(o.shape,a);return n.runWebGLProgram(u,[o],o.dtype)}var RJ={kernelName:oT,backendName:"webgl",kernelFunc:EAe};var n2=class{constructor(t,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let r=t[1],o=t[2];this.outputShape=t;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var kJ={kernelName:$T,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:o,fillValue:i,center:s}=t,a=n,u=new n2(r.shape,i),[c,f]=U.getImageCenter(s,r.shape[1],r.shape[2]),d=[[c,f,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(u,[r],r.dtype,d)}};var CAe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,TAe=Ne({opSnippet:CAe}),OJ={kernelName:iT,backendName:"webgl",kernelFunc:TAe};var _Ae="return inversesqrt(x);",IAe=Ne({opSnippet:_Ae,cpuKernelImpl:lY}),MJ={kernelName:rm,backendName:"webgl",kernelFunc:IAe};var Hl=class{constructor(t,n,r,o,i,s,a=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;let c=Qe(i.length),f=Qe(s.length),d="";r===1?d="i":r===2&&(d="i, j");let h=`getIndices(${d})`,m="";o===1?m="i":o===2&&(m="i, coords[1]");let v=`getUpdates(${m})`,x="";u&&(x="coords[0], coords[1]");let b=`getDefaultValue(${x})`,C=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${f} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${C};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${v};
              found = true;
            }
          }
          setOutput(mix(${b}, sum, float(found)));
        }
      `}};var r2=class{constructor(t,n,r,o,i,s,a=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;let c=Qe(i.length),f=Qe(s.length),d="";r===1?d="i":r===2&&(d="i, j");let h=`getIndices(${d})`,m="";o===1?m="i":o===2&&(m="i, coords[1]");let v=`getUpdates(${m})`,x="";u&&(x="coords[0], coords[1]");let b=`getDefaultValue(${x})`,C=n>1?"strides[j]":"strides",D=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${f} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${t}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${C};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${D};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${v};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${b}, sum, found));
        }
      `}};function SAe(e){let{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:i}=t,{shape:s}=r,{sliceRank:a,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=U.calculateShapes(i,o,s),h=[d/c,c];if(d===0)return n.makeTensorInfo(s,o.dtype);let m=fe({inputs:{x:o},backend:n,attrs:{shape:[u,a]}}),v=fe({inputs:{x:i},backend:n,attrs:{shape:[u,c]}}),x=n.makeTensorInfo([],"float32",new Float32Array([0])),b;z().getBool("WEBGL_PACK")?b=new r2(u,a,m.shape.length,v.shape.length,f,h):b=new Hl(u,a,m.shape.length,v.shape.length,f,h);let C=n.runWebGLProgram(b,[v,m,x],v.dtype),D=fe({inputs:{x:C},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(x),D}var FJ={kernelName:sT,backendName:"webgl",kernelFunc:SAe};var o2=class{constructor(t,n,r,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];let i="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=z().getNumber("WEBGL_VERSION")===2?i:s,u=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function DAe(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:o,values:i}=t,{side:s}=r,a=new o2(o.shape[0],o.shape[1],i.shape[1],s),u=[[o.shape[1]]];return n.runWebGLProgram(a,[o,i],"int32",u)}var PJ={kernelName:uT,backendName:"webgl",kernelFunc:DAe};var i2=class{constructor(t,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let o,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",o="resRC";else{let a=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],c=[];for(let f=0;f<n.length;f++)c.push(`${a[f]}`),f<t&&u.push(`${a[f]}`);o=u.join(),i=c.join()}let s=Qe(r);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}};function NAe(e){let{inputs:t,backend:n}=e,{condition:r,t:o,e:i}=t,s=new i2(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(s,[r,o,i],uo(o.dtype,i.dtype))}var $J={kernelName:cT,backendName:"webgl",kernelFunc:NAe};var AAe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${U.SELU_SCALEALPHA};
  float scale = ${U.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,RAe=Ne({opSnippet:AAe}),LJ={kernelName:lT,backendName:"webgl",kernelFunc:RAe};var kAe=Zs+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,OAe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,MAe=Ne({opSnippet:kAe,packedOpSnippet:OAe,cpuKernelImpl:dY}),VJ={kernelName:om,backendName:"webgl",kernelFunc:MAe};var FAe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,PAe=Ne({opSnippet:FAe}),BJ={kernelName:pT,backendName:"webgl",kernelFunc:PAe};var $Ae=Zs+`
  return sin(x);
`,LAe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Oi}
  return result;
`,VAe=Ne({opSnippet:$Ae,packedOpSnippet:LAe}),UJ={kernelName:fT,backendName:"webgl",kernelFunc:VAe};var BAe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,UAe=Ne({opSnippet:BAe}),GJ={kernelName:dT,backendName:"webgl",kernelFunc:UAe};var GAe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,jAe=Ne({opSnippet:GAe}),jJ={kernelName:hT,backendName:"webgl",kernelFunc:jAe};var zAe=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:i,paddings:s}=r;N.assert(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let a=i.reduce((C,D)=>C*D),u=[[0,0]];u.push(...s);for(let C=1+i.length;C<o.shape.length;++C)u.push([0,0]);let c=[],f=nP({inputs:{x:o},backend:n,attrs:{paddings:u,constantValue:0}}),d=U.getReshaped(f.shape,i,a,!1),h=U.getPermuted(d.length,i.length,!1),m=U.getReshapedPermuted(f.shape,i,a,!1),v=fe({inputs:{x:f},backend:n,attrs:{shape:d}}),x=xn({inputs:{x:v},backend:n,attrs:{perm:h}}),b=fe({inputs:{x},backend:n,attrs:{shape:m}});return c.push(f),c.push(v),c.push(x),c.forEach(C=>n.disposeIntermediateTensorInfo(C)),b},zJ={kernelName:gT,backendName:"webgl",kernelFunc:zAe};function HAe(e){let{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:i,defaultValue:s}=t;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let a=n.readSync(r.dataId),u=n.readSync(o.dataId),c=n.readSync(i.dataId),f=n.readSync(s.dataId)[0],[d,h,m,v,x]=hY(a,r.shape,r.dtype,u,o.dtype,c,f);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],o.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map(b=>Number(b)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}var HJ={kernelName:xT,backendName:"webgl",kernelFunc:HAe};function WAe(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:i}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);let s=Array.from(n.readSync(o.dataId)),a=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),[c,f,d]=mY(a,r.shape,r.dtype,s,u);return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var WJ={kernelName:bT,backendName:"webgl",kernelFunc:WAe};function qAe(e){let{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);let s=n.readSync(r.dataId),a=n.readSync(o.dataId),u=n.readSync(i.dataId),[c,f]=BI(s,r.shape,r.dtype,a,u,!0);return n.makeTensorInfo(f,r.dtype,c)}var qJ={kernelName:wT,backendName:"webgl",kernelFunc:qAe};function KAe(e){let{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);let s=n.readSync(r.dataId),a=n.readSync(o.dataId),u=n.readSync(i.dataId),[c,f]=BI(s,r.shape,r.dtype,a,u);return n.makeTensorInfo(f,r.dtype,c)}var KJ={kernelName:ET,backendName:"webgl",kernelFunc:KAe};function XAe(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:i,defaultValue:s}=t,{outputShape:a}=r,{sliceRank:u,numUpdates:c,sliceSize:f,strides:d,outputSize:h}=U.calculateShapes(i,o,a),m=!1;if(i.dtype==="string"){let C=n.bufferSync(o),D=n.bufferSync(i),O=N.decodeString(n.readSync(s.dataId)[0]),F=fY(C,D,a,h,f,c,u,d,O,m);return n.makeTensorInfo(a,F.dtype,F.values)}let v=new Hl(c,u,o.shape.length,i.shape.length,d,[h,1],m),x=n.runWebGLProgram(v,[i,o,s],i.dtype),b=fe({inputs:{x},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(x),b}var XJ={kernelName:CT,backendName:"webgl",kernelFunc:XAe};function YAe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:i,axis:s}=r,a=N.parseAxisParam(s,o.shape)[0],u=U.prepareSplitSize(o,i,a),c=o.shape.length,f=new Array(c).fill(0),d=o.shape.slice();return u.map(h=>{let m=[...d];m[a]=h;let v=Ra({inputs:{x:o},backend:n,attrs:{begin:f,size:m}});return f[a]+=h,v})}var YJ={kernelName:yT,backendName:"webgl",kernelFunc:YAe};var ZJ="return sqrt(x);",ZAe=Ne({opSnippet:ZJ,packedOpSnippet:ZJ,cpuKernelImpl:gY}),QJ={kernelName:im,backendName:"webgl",kernelFunc:ZAe};var QAe="return x * x;",JAe=Ne({opSnippet:QAe}),JJ={kernelName:bz,backendName:"webgl",kernelFunc:JAe};var eee="return (a - b) * (a - b);",eRe=Ut({opSnippet:eee,packedOpSnippet:eee}),tee={kernelName:sm,backendName:"webgl",kernelFunc:eRe};function tRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t;if(o.dtype!=="string")throw new Error("Input must be of datatype string");let i=n.readSync(o.dataId),s=U.fromUint8ToStringArray(i),a=yY(s,"string",r);return n.makeTensorInfo(o.shape,"string",a)}var nee={kernelName:am,backendName:"webgl",kernelFunc:tRe};function nRe({inputs:e,attrs:t,backend:n}){let{x:r}=e,o=dr+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,i=new Ur(r.shape,o);return n.runWebGLProgram(i,[r],r.dtype)}var ree={kernelName:PT,backendName:"webgl",kernelFunc:nRe};var s2=class{constructor(t,n,r){this.variableNames=["x"],this.outputShape=r;let o=r.length,i=Qe(r.length),s=Qe(r.length),a="";if(o===1)a="coords * strides + begin";else{let u=0;a=r.map((c,f)=>(u++,r.length===1?`coords * strides[${f}] + begin[${f}]`:`coords[${u-1}] * strides[${f}] + begin[${f}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${t});
      ${i} strides = ${i}(${n});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}};function rRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:i,end:s,strides:a,beginMask:u,endMask:c,ellipsisMask:f,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:m,finalShape:v,isIdentity:x,sliceDim0:b,isSimpleSlice:C,begin:D,end:O,strides:F}=ei.sliceInfo(o.shape,i,s,a,u,c,f,d,h),B;if(x)B=fe({inputs:{x:o},backend:n,attrs:{shape:v}});else if(b||C){N.assert(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);let X=ei.computeOutShape(D,O,F),Z=Ra({inputs:{x:o},backend:n,attrs:{begin:D,size:X}});B=fe({inputs:{x:Z},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(Z)}else if(n.shouldExecuteOnCPU([o])){let Z=n.readSync(o.dataId),te=bt(o.shape,o.dtype,Z),J=vY(m,te,F,D);B=n.makeTensorInfo(v,o.dtype,J.values)}else{let Z=new s2(D,F,m);B=n.runWebGLProgram(Z,[o],o.dtype)}let H=fe({inputs:{x:B},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(B),H}var oee={kernelName:TT,backendName:"webgl",kernelFunc:rRe};function oRe(e){let{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:i,leftPad:s,rightPad:a,padWidth:u,preserveShortSequences:c}=r,{data:f,dataSplits:d}=t,h=n.readSync(f.dataId),m=n.readSync(d.dataId),[v,x]=xY(h,m,o,i,s,a,u,c);return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(d.shape,"int32",x)]}var iee={kernelName:_T,backendName:"webgl",kernelFunc:oRe};function iRe(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:i,delimiter:s}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let a=n.readSync(i.dataId),u=n.readSync(s.dataId)[0],[c,f,d]=bY(a,u,o),h=f.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var see={kernelName:IT,backendName:"webgl",kernelFunc:iRe};function sRe(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");let s=n.readSync(i.dataId),a=wY(s,o);return n.makeTensorInfo(i.shape,"int32",a)}var aee={kernelName:ST,backendName:"webgl",kernelFunc:sRe};var aRe="return tan(x);",uRe=Ne({opSnippet:aRe}),uee={kernelName:DT,backendName:"webgl",kernelFunc:uRe};var cRe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,lRe=Ne({opSnippet:cRe}),cee={kernelName:NT,backendName:"webgl",kernelFunc:lRe};function fRe(e){let{inputs:t,backend:n,attrs:r}=e,{tensor:o,indices:i,updates:s}=t,{}=r,{sliceRank:a,numUpdates:u,sliceSize:c,strides:f,outputSize:d}=U.calculateShapes(s,i,o.shape),h=[d/c,c];if(d===0)return n.makeTensorInfo(o.shape,i.dtype);let m=fe({inputs:{x:i},backend:n,attrs:{shape:[u,a]}}),v=fe({inputs:{x:s},backend:n,attrs:{shape:[u,c]}}),x=fe({inputs:{x:o},backend:n,attrs:{shape:h}}),b=new Hl(u,a,m.shape.length,v.shape.length,f,h,!1,!0),C=n.runWebGLProgram(b,[v,m,x],x.dtype),D=fe({inputs:{x:C},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(C),D}var lee={kernelName:aT,backendName:"webgl",kernelFunc:fRe};var a2=class{constructor(t,n){this.variableNames=["A"];let r=new Array(t.length);for(let s=0;s<r.length;s++)r[s]=t[s]*n[s];this.outputShape=r,this.rank=r.length;let o=Qe(this.rank),i=dRe(t);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}};function dRe(e){let t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<e.length;o++)r.push(`imod(${n[o]}, ${e[o]})`);return r.join()}function oP(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:i}=r;if(o.dtype==="string"||o.shape.length>5){let u=n.readSync(o.dataId),c=o.dtype==="string"?u.map(h=>N.decodeString(h)):u,f=bt(o.shape,o.dtype,c),d=CY(f,i);return n.makeTensorInfo(d.shape,d.dtype,d.values)}let s=new a2(o.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}var fee={kernelName:cm,backendName:"webgl",kernelFunc:oP};var u2=class{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},c2=class{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function Vd(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function dee(e){let t=1;for(;t<e;)t*=2;return t}function pRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:i,sorted:s}=r,a=z().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=z().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=o.shape,f=c[c.length-1];if(n.shouldExecuteOnCPU([o])||f<a||i>u){let J=n.readSync(o.dataId),[ae,ye]=TY(J,c,o.dtype,i,s);return[n.makeTensorInfo(ae.shape,ae.dtype,ae.values),n.makeTensorInfo(ye.shape,ye.dtype,ye.values)]}if(i===0)return c[c.length-1]=0,[n.makeTensorInfo(c,o.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(f===1)return[o,vc({attrs:{shape:c,dtype:"int32",value:0},backend:n})];let d=n.texData.get(o.dataId),h=d!==null&&d.isPacked,m=h?n.unpackTensor(o):o,x=N.sizeFromShape(c)/f,b=fe({inputs:{x:m},attrs:{shape:[x,f]},backend:n});h&&Vd(n,m);let C=dee(i),D=dee(f),O=null,F=()=>O===null?[b,b]:[b,O],B=(J,ae,ye)=>{let ke=F(),Ke=new u2(ye),Nt=[[f],[O===null?1:0],[Number.NEGATIVE_INFINITY],[J],[ae]],oe=O;O=n.runWebGLProgram(Ke,ke,"int32",Nt),Vd(n,oe)};for(let J=1;J<C;J*=2){let ae=J*2;for(let ye=J;ye>=1;ye/=2)B(ae,ye,[x,D])}for(let J=D;J>C;J/=2){let ae=F(),ye=new c2([x,J/2]),Ke=[[f],[O===null?1:0],[C]],Me=O;O=n.runWebGLProgram(ye,ae,"int32",Ke),Vd(n,Me);let Nt=C/2,oe=Nt*2;for(let pe=Nt;pe>=1;pe/=2)B(oe,pe,O.shape)}let H=O;O=Ra({inputs:{x:O},backend:n,attrs:{begin:0,size:[x,i]}}),Vd(n,H);let X=Z3({inputs:{x:b,indices:O},backend:n,attrs:{axis:1,batchDims:1}});Vd(n,b);let Z=c.slice(0,-1);Z.push(i),H=O,O=fe({inputs:{x:O},attrs:{shape:Z},backend:n}),Vd(n,H);let te=X;return X=fe({inputs:{x:X},attrs:{shape:Z},backend:n}),Vd(n,te),[X,O]}var pee={kernelName:AT,backendName:"webgl",kernelFunc:pRe};var l2=class{constructor(t,n,r,o,i,s){this.variableNames=["Image","Transforms"],this.outputShape=s;let a=r==="nearest"?1:2,u;switch(o){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${t}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function hRe(e){let{inputs:t,backend:n,attrs:r}=e,{image:o,transforms:i}=t,{interpolation:s,fillMode:a,fillValue:u,outputShape:c}=r,[f,d,h,m]=o.shape,[v,x]=c??[d,h],b=[f,v,x,m],C=new l2(d,h,s,a,u,b);return n.runWebGLProgram(C,[o,i],"float32")}var hee={kernelName:RT,backendName:"webgl",kernelFunc:hRe};function mRe(e){let{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:i}=t;vu(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=r.readSync(i.dataId),{outputValues:a,outputShape:u,indices:c}=_Y(s,o,i.shape,i.dtype);return[r.makeTensorInfo(u,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}var mee={kernelName:kT,backendName:"webgl",kernelFunc:mRe};function gRe(e){let{inputs:t,backend:n,attrs:r}=e,{value:o}=t,{axis:i}=r;i<0&&(i+=o.shape.length);let s=o,a=s.shape.length,u=o.shape[i],c=new Array(a-1),f=0;for(let x=0;x<a;x++)x!==i&&(c[f++]=s.shape[x]);let d=[],h=new Array(a).fill(0),m=s.shape.slice();m[i]=1;let v=new Array(u);for(let x=0;x<v.length;x++){h[i]=x;let b=Ra({inputs:{x:s},backend:n,attrs:{begin:h,size:m}}),C=fe({inputs:{x:b},backend:n,attrs:{shape:c}});v[x]=C,d.push(b)}return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}var gee={kernelName:OT,backendName:"webgl",kernelFunc:gRe};var f2=class{constructor(t,n){this.variableNames=["x","segmentIds"];let r=t.windowSize,o=t.batchSize,i=t.inSize,s=t.numSegments,a=s*Math.ceil(i/r);this.outputShape=[o,a];let u="0.0",c="sumValue",f=Math.floor(r/4)*4,d=r%4,h=`
        sumValue += dot(values, segFilter);
    `,m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let v="";i%r>0&&(v=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${v}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${f};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${c});
      }
    `}};function yRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:i}=t,{numSegments:s}=r,a=o.shape.length,u=[],c=0,f=U.getAxesPermutation([c],a),d=o;f!=null&&(d=xn({inputs:{x:o},backend:n,attrs:{perm:f}}),u.push(d),c=U.getInnerMostAxes(1,a)[0]);let h=U.segment_util.computeOutShape(d.shape,c,s),m=N.sizeFromShape([d.shape[c]]),v=fe({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}});u.push(v);let x=ud(o.dtype),b=(F,B,H,X,Z)=>{let te=F.shape[0],J=F.shape[1],ae=U.segment_util.segOpComputeOptimalWindowSize(J,Z),ye={windowSize:ae,inSize:J,batchSize:te,numSegments:Z},ke=new f2(ye,B),Ke=n.compileAndRun(ke,[F,H],X);if(u.push(Ke),Ke.shape[1]===Z)return Ke;let Me=rP({backend:n,attrs:{start:0,stop:Z,step:1,dtype:"float32"}}),Nt=oP({inputs:{x:Me},backend:n,attrs:{reps:[J/ae]}});return u.push(Me),u.push(Nt),b(Ke,B,Nt,X,Z)},C=b(v,"unsortedSegmentSum",i,x,s),D=fe({inputs:{x:C},backend:n,attrs:{shape:h}}),O=D;if(f!=null){u.push(D);let F=U.getUndoAxesPermutation(f);O=xn({inputs:{x:O},backend:n,attrs:{perm:F}})}return u.forEach(F=>n.disposeIntermediateTensorInfo(F)),O}var yee={kernelName:MT,backendName:"webgl",kernelFunc:yRe};var vRe=[JY,tZ,nZ,rZ,iZ,sZ,aZ,uZ,fZ,dZ,pZ,hZ,mZ,gZ,yZ,vZ,xZ,bZ,wZ,EZ,CZ,_Z,IZ,SZ,DZ,kZ,MZ,FZ,jY,$Z,VZ,BZ,UZ,GZ,jZ,zZ,HZ,WZ,qZ,KZ,ZZ,QZ,JZ,eQ,tQ,nQ,rQ,oQ,iQ,sQ,aQ,uQ,cQ,lQ,fQ,dQ,hQ,mQ,gQ,yQ,xQ,bQ,wQ,EQ,CQ,TQ,_Q,IQ,SQ,GY,DQ,LZ,NQ,AQ,RQ,zY,kQ,OQ,MQ,FQ,PQ,$Q,LQ,VQ,BQ,UQ,jQ,zQ,HQ,WQ,qQ,KQ,YQ,QQ,JQ,eJ,tJ,nJ,aJ,qY,uJ,cJ,lJ,fJ,NZ,dJ,mJ,gJ,yJ,vJ,HY,xJ,bJ,wJ,EJ,CJ,AZ,rJ,TJ,_J,IJ,XY,SJ,DJ,NJ,AJ,RJ,kJ,OJ,MJ,FJ,PJ,$J,LJ,VJ,BJ,UJ,GJ,TZ,sJ,jJ,zJ,HJ,WJ,qJ,KJ,XJ,YJ,QJ,JJ,tee,nee,ree,oee,iee,see,aee,iJ,ZY,uee,cee,lee,fee,pee,hee,QY,mee,gee,yee,pJ];for(let e of vRe)Ez(e);var d2=class e{detector;handLandmarker;constructor(){this.initHandposeV2()}initHandpose(){return ne(this,null,function*(){try{let t=u0.MediaPipeHands,n={runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/hands",modelType:"full",maxHands:2};this.detector=yield iK(t,n),console.log("Handpose model loaded successfully")}catch(t){console.error("Error initializing handpose model:",t)}})}initHandposeV2(){return ne(this,null,function*(){let t=yield ll.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.18/wasm");this.handLandmarker=yield jo.createFromOptions(t,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",numHands:2,minHandDetectionConfidence:.66,minHandPresenceConfidence:.66,minTrackingConfidence:.66})})}detect(t){return ne(this,null,function*(){if(!this.detector)return null;try{return yield this.detector.estimateHands(t,{flipHorizontal:!0,staticImageMode:!1})}catch(n){return console.error("Error detecting hands:",n),null}})}setCanvasForV2(t){this.handLandmarker&&this.handLandmarker.setOptions({canvas:t})}detectV2(t){return ne(this,null,function*(){if(!this.handLandmarker)return null;try{return yield this.handLandmarker.detectForVideo(t,performance.now())}catch(n){return console.error("Error detecting hands:",n),null}})}static \u0275fac=function(n){return new(n||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})};var bRe=["video"],wRe=["canvas"],_0=class e{constructor(t){this.handposeService=t}width=320;widthRatio=4;heightRatio=3;height=this.width/this.widthRatio*this.heightRatio;video;canvas;ctx=null;gestureEstimator;handposes$$=new Mr([]);handpose$=this.handposes$$.asObservable();videoStream$;gestureDetected=new ar;ngOnInit(){this.gestureEstimator=new xee.GestureEstimator([Qy,ul,Ja,Xu,Jy,ev]),this.ctx=this.canvas.nativeElement.getContext("2d")}ngOnChanges(t){t.width&&(this.width=t.width.currentValue,this.height=this.width/this.widthRatio*this.heightRatio)}ngAfterViewInit(){this.initializeVideoStream()}ngOnDestroy(){this.videoStream$&&this.videoStream$.unsubscribe()}processHandsNoise(){let t=[];this.handpose$=this.handposes$$.pipe(iN(1),vt(n=>!t[0]||!t[1]?(t[0]=n.find(r=>r.handedness==="Left"),t[1]=n.find(r=>r.handedness==="Right"),n):(["Left","Right"].forEach((r,o)=>{let i=t[o],s=n.findIndex(u=>u.handedness===r),a=n[s];!i||!a||(Bf.isHandSimilar(i,a)?n[s]=i:t[o]=a)}),n)),Yn(n=>{this.drawHands(n),console.log(n)}))}initializeVideoStream(){let t={audio:!1,video:{width:this.width,height:this.height,frameRate:{ideal:30}}};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia(t).then(n=>{this.video.nativeElement.srcObject=n,this.video.nativeElement.play(),this.videoStream$=Zg(this.video.nativeElement,"play").pipe(xo(()=>eN(100)),Yn(()=>{this.handposeService.detectV2(this.video.nativeElement).then(r=>{r?this.handleV2Result(r):console.error("No hand result detected")}).catch(r=>console.error("Error for video stream V2"))})).subscribe()}).catch(n=>{console.error("Error accessing video stream:",n)})}handleResults(t){this.drawVideo();let n=[];for(let r of t){if(r.score<.85){console.log("hand",r.score,r);return}Bf.drawHandLandmarks(this.canvas.nativeElement,r.keypoints);let o=this.estimateFingerpose(r);if(!o)return;n.push(xe({handpose:o},r))}this.handposes$$.next(n)}handleV2Result(t){if(this.drawVideo(),!t.handedness.length)return;let n=Bf.convertHandLandmarkResultToHand(t,this.width,this.height);this.drawHands(n);let r=this.estimateGestures(n);r?.length&&this.handposes$$.next(r)}drawVideo(){this.ctx&&(this.ctx.clearRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height),this.ctx.save(),this.ctx.scale(-1,1),this.ctx.drawImage(this.video.nativeElement,-this.width,0,this.width,this.height),this.ctx.restore())}drawHands(t){if(t?.length)for(let n of t)Bf.drawHandLandmarks(this.canvas.nativeElement,n.keypoints)}estimateGestures(t){if(!t?.length)return;let n=[];for(let r of t){let o=this.estimateFingerpose(r);o&&n.push(Tt(xe({},r),{handpose:o}))}return n}estimateFingerpose(t){if(!t.keypoints3D)return;let n=t.keypoints3D.map(o=>{let{x:i,y:s,z:a,name:u}=o;return[i,s,a]}),r=this.gestureEstimator?.estimate(n,9);if(r.gestures?.length){let o=(0,vee.maxBy)(r.gestures,i=>i?.score);return console.log("Gesture detected",o?.name,o?.score),o?.name}}static \u0275fac=function(n){return new(n||e)(ht(d2))};static \u0275cmp=Cr({type:e,selectors:[["app-hand-gestures"]],viewQuery:function(n,r){if(n&1&&(vy(bRe,7),vy(wRe,7)),n&2){let o;Of(o=Mf())&&(r.video=o.first),Of(o=Mf())&&(r.canvas=o.first)}},inputs:{width:"width"},outputs:{gestureDetected:"gestureDetected"},features:[Uu],decls:4,vars:4,consts:[["video",""],["canvas",""],["autoplay","",2,"display","none",3,"width","height"],[3,"width","height"]],template:function(n,r){n&1&&Tr(0,"video",2,0)(2,"canvas",3,1),n&2&&(Fn("width",r.width)("height",r.height),gn(2),Fn("width",r.width)("height",r.height))},encapsulation:2})};function ERe(e,t){if(e&1&&(ct(0,"div",8),$t(1),lt()),e&2){let n=Ji(2);gn(),xy(' Make the "',n.gameSetting.requiredGestures[n.progress].word,'" gesture ')}}function CRe(e,t){if(e&1&&(ct(0,"div",3)(1,"div",4)(2,"div",5)(3,"span",6),$t(4),lt()()(),mi(5,ERe,2,1,"div",7),lt()),e&2){let n=Ji();gn(2),Pb("width",n.progress/n.gameSetting.requiredGestures.length*100,"%"),gn(2),CR("",n.progress," / ",n.gameSetting.requiredGestures.length,""),gn(),Fn("ngIf",n.gameSetting.requiredGestures[n.progress])}}function TRe(e,t){if(e&1){let n=Qc();ct(0,"div",9)(1,"h1"),$t(2,"Congratulations"),lt(),ct(3,"p"),$t(4),lt(),ct(5,"button",10),io("click",function(){Wc(n);let o=Ji();return qc(o.nextLevel())}),$t(6,"Next"),lt()()}if(e&2){let n=Ji();gn(4),xy('You have completed "',n.gameSetting.levelTitle,'" !!!')}}var Wl=class e{constructor(t){this.router=t}handGesturesComponent;gameSetting;progress=0;isWon=!1;ngAfterViewInit(){this.handGesturesComponent?.handpose$?.pipe(uN(1e3),vt(t=>t.map(n=>n.handpose))).pipe(nN()).subscribe(t=>{if(!this.gameSetting.requiredGestures.length||this.isWon)return;let n=this.gameSetting.requiredGestures[this.progress];t.some(r=>n.gestures.includes(r))&&(this.progress++,console.log(this.progress)),this.progress===this.gameSetting.requiredGestures.length&&(this.isWon=!0)})}nextLevel(){this.gameSetting.nextStepLink&&this.router.navigate([this.gameSetting.nextStepLink])}static \u0275fac=function(n){return new(n||e)(ht(Co))};static \u0275cmp=Cr({type:e,selectors:[["app-sign-language-game"]],viewQuery:function(n,r){if(n&1&&vy(_0,5),n&2){let o;Of(o=Mf())&&(r.handGesturesComponent=o.first)}},inputs:{gameSetting:"gameSetting"},decls:3,vars:3,consts:[[3,"width"],["class","progress-container",4,"ngIf"],["class","glass fixed-in-center won-container",4,"ngIf"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],["class","current-gesture",4,"ngIf"],[1,"current-gesture"],[1,"glass","fixed-in-center","won-container"],[3,"click"]],template:function(n,r){n&1&&(Tr(0,"app-hand-gestures",0),mi(1,CRe,6,5,"div",1)(2,TRe,7,1,"div",2)),n&2&&(Fn("width",640),gn(),Fn("ngIf",!r.isWon),gn(),Fn("ngIf",r.isWon))},dependencies:[es,tl,_0],styles:[".fixed-in-center[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}.won-container[_ngcontent-%COMP%]{width:640px;height:480px;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.progress-container[_ngcontent-%COMP%]{width:640px;margin:20px auto;text-align:center}.progress-bar[_ngcontent-%COMP%]{width:100%;height:30px;background:#ffffff1a;border-radius:15px;overflow:hidden;margin-bottom:10px}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#8000ff,#9154b1);transition:width .3s ease;display:flex;align-items:center;justify-content:center;min-width:60px}.progress-text[_ngcontent-%COMP%]{color:#fff;font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.current-gesture[_ngcontent-%COMP%]{font-size:1.2em;margin-top:10px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.3)}"]})};function _Re(e,t){if(e&1){let n=Qc();ct(0,"div",3)(1,"h1"),$t(2,'"Hello Friend"'),lt(),ct(3,"p"),$t(4,"This level focuses on daily friendly greetings, using sign language to take the first step in \u201Cconversation\u201D with the deaf community and convey kindness."),lt(),ct(5,"button",4),io("click",function(){Wc(n);let o=Ji();return qc(o.startGame())}),$t(6,"Start"),lt()()}}var p2=class e{isEntered=!1;gameSetting={levelTitle:"Hello Friend",nextStepLink:"/thank-you",requiredGestures:[{gestures:["point_to_other"],word:"\u4F60(You)"},{gestures:["thumbs_up"],word:"\u597D(Good)"}]};startGame(){this.isEntered=!0}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Cr({type:e,selectors:[["app-hello-friend"]],decls:3,vars:4,consts:[["class","glass-container",4,"ngIf"],[1,"game-container"],[3,"gameSetting"],[1,"glass-container"],[3,"click"]],template:function(n,r){n&1&&(mi(0,_Re,7,0,"div",0),ct(1,"div",1),Tr(2,"app-sign-language-game",2),lt()),n&2&&(Fn("ngIf",!r.isEntered),gn(),Qi("hide",!r.isEntered),gn(),Fn("gameSetting",r.gameSetting))},dependencies:[Wl,es,tl],encapsulation:2})};function IRe(e,t){if(e&1){let n=Qc();ct(0,"div",3)(1,"h1"),$t(2,'"Thank You"'),lt(),ct(3,"p"),$t(4,"This is designed to guide players to learn to express gratitude and understand the importance of being grateful for others' help in communicating with the deaf."),lt(),ct(5,"button",4),io("click",function(){Wc(n);let o=Ji();return qc(o.startGame())}),$t(6,"Start"),lt()()}}var h2=class e{isEntered=!1;gameSetting={levelTitle:"Thank You",nextStepLink:"/did-you-eat",requiredGestures:[{gestures:["thumbs_up"],word:"\u8C22(Thank you) - Part 1"},{gestures:["half_thumb_up"],word:"\u8C22(Thank you) - Part 2"},{gestures:["thumbs_up"],word:"\u8C22(Thank you) - Part 1"},{gestures:["half_thumb_up"],word:"\u8C22(Thank you) - Part 2"}]};startGame(){this.isEntered=!0}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Cr({type:e,selectors:[["app-thank-you"]],decls:3,vars:4,consts:[["class","glass-container",4,"ngIf"],[1,"game-container"],[3,"gameSetting"],[1,"glass-container"],[3,"click"]],template:function(n,r){n&1&&(mi(0,IRe,7,0,"div",0),ct(1,"div",1),Tr(2,"app-sign-language-game",2),lt()),n&2&&(Fn("ngIf",!r.isEntered),gn(),Qi("hide",!r.isEntered),gn(),Fn("gameSetting",r.gameSetting))},dependencies:[Wl,es,tl],encapsulation:2})};function SRe(e,t){if(e&1){let n=Qc();ct(0,"div",3)(1,"h1"),$t(2,'"Did you eat?"'),lt(),ct(3,"p"),$t(4,"Chinese people often ask this question as a friendly greeting to say hello or to how are you."),lt(),ct(5,"button",4),io("click",function(){Wc(n);let o=Ji();return qc(o.startGame())}),$t(6,"Start"),lt()()}}var m2=class e{isEntered=!1;gameSetting={levelTitle:"Did you eat?",nextStepLink:"/leaderboard",requiredGestures:[{gestures:["point_to_other"],word:"\u4F60(You)"},{gestures:["two_fingers"],word:"\u5403(Eat)\u996D(Food) - I"},{gestures:["two_fingers"],word:"\u5403(Eat)\u996D(Food)-II"},{gestures:["point_diagonal_down"],word:"\u4E86\u5417(Did?) - I"},{gestures:["point_diagonal_down"],word:"\u4E86\u5417(Did?) - II"}]};startGame(){this.isEntered=!0}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Cr({type:e,selectors:[["app-come-together"]],decls:3,vars:4,consts:[["class","glass-container",4,"ngIf"],[1,"game-container"],[3,"gameSetting"],[1,"glass-container"],[3,"click"]],template:function(n,r){n&1&&(mi(0,SRe,7,0,"div",0),ct(1,"div",1),Tr(2,"app-sign-language-game",2),lt()),n&2&&(Fn("ngIf",!r.isEntered),gn(),Qi("hide",!r.isEntered),gn(),Fn("gameSetting",r.gameSetting))},dependencies:[Wl,es,tl],encapsulation:2})};var g2=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Cr({type:e,selectors:[["app-leaderboard"]],decls:2,vars:0,template:function(n,r){n&1&&(ct(0,"p"),$t(1,"leaderboard works!"),lt())},encapsulation:2})};var bee=[{path:"",redirectTo:"welcome",pathMatch:"full"},{path:"welcome",component:Tw},{path:"hello-friend",component:p2},{path:"thank-you",component:h2},{path:"did-you-eat",component:m2},{path:"leaderboard",component:g2}];var wee={providers:[qU({eventCoalescing:!0}),w5(bee),A6(N6())]};var DRe=()=>({exact:!0});function NRe(e,t){if(e&1&&(ct(0,"li",2)(1,"div",3)(2,"div",4),Tr(3,"div",5),ct(4,"span",6),$t(5),lt()(),ct(6,"span",7),$t(7),lt()()()),e&2){let n=t.$implicit;Fn("routerLink",n.route)("routerLinkActiveOptions",Lb(4,DRe)),gn(5),$b(n.number),gn(2),$b(n.text)}}var y2=class e{navigationClicked=new ar;navItems=[{number:1,text:"Welcome",route:"/welcome"},{number:2,text:'"Hello, Friend"',route:"/hello-friend"},{number:3,text:'"Thank you"',route:"/thank-you"},{number:4,text:'"Did you eat?"',route:"/did-you-eat"},{number:5,text:"Leaderboard",route:"/leaderboard"}];static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Cr({type:e,selectors:[["app-navigation"]],outputs:{navigationClicked:"navigationClicked"},decls:3,vars:1,consts:[[1,"space-nav"],["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngFor","ngForOf"],["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],[1,"nav-item"],[1,"marker"],[1,"diamond"],[1,"number"],[1,"text"]],template:function(n,r){n&1&&(ct(0,"nav",0)(1,"ul"),mi(2,NRe,8,5,"li",1),lt()()),n&2&&(gn(2),Fn("ngForOf",r.navItems))},dependencies:[es,jb,gw,dw,x5],styles:['.space-nav[_ngcontent-%COMP%]{position:fixed;left:40px;top:50%;transform:translateY(-50%);z-index:100;padding:10px}.space-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;position:relative}.space-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:after{content:"";position:absolute;left:22px;top:-20px;bottom:-20px;width:0;border-left:1px dashed rgba(0,0,0,.2);z-index:-1}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:45px 0;position:relative}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;cursor:pointer;transition:all .3s ease}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{position:relative;width:45px;height:45px;display:flex;align-items:center;justify-content:center;z-index:1}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid rgba(0,0,0,.5);transform:rotate(45deg);transition:all .3s ease;position:relative}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]:after{content:"";position:absolute;width:8px;height:8px;background:#00000080;top:50%;left:50%;transform:translate(-50%,-50%);transition:all .3s ease}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:14px;color:#000000b3;letter-spacing:1px;transition:all .3s ease;white-space:nowrap;opacity:0;visibility:hidden;transform:translate(-20px);position:absolute;left:45px}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{position:absolute;font-size:13px;color:#000000b3;transition:all .3s ease;opacity:0;visibility:hidden;z-index:2}.space-nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#8a2be2}.space-nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]{border-color:#8a2be2;background:transparent}.space-nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]:after{background:#8a2be2}.space-nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{color:#8a2be2}.space-nav[_ngcontent-%COMP%]:hover   li[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translate(0)}.space-nav[_ngcontent-%COMP%]:hover   li[_ngcontent-%COMP%]:hover   .diamond[_ngcontent-%COMP%]{border-color:#8a2be2;background:transparent}.space-nav[_ngcontent-%COMP%]:hover   li[_ngcontent-%COMP%]:hover   .diamond[_ngcontent-%COMP%]:after{background:transparent;visibility:hidden}.space-nav[_ngcontent-%COMP%]:hover   li[_ngcontent-%COMP%]:hover   .number[_ngcontent-%COMP%]{opacity:1;visibility:visible;color:#8a2be2}@media (max-width: 768px){.space-nav[_ngcontent-%COMP%]{left:20px}.space-nav[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px}}']})};var ARe=()=>[1,2,3,4,5,6,7];function RRe(e,t){if(e&1&&Tr(0,"div",13),e&2){let n=Ji();Qi("animate",n.isAnimating)}}var v2=class e{constructor(t,n,r,o){this.el=t;this.renderer=n;this.platformId=r;this.router=o;this.router.events.subscribe(i=>{i instanceof rs&&this.startAnimation()}),VR(this.platformId)&&(this.element=this.el.nativeElement.querySelector(".glass-container"),this.renderer.listen("document","mousemove",i=>{window.requestAnimationFrame(()=>{this.transformElement(i.clientX,i.clientY)})}),this.renderer.listen("document","mouseleave",()=>{this.element&&this.renderer.setStyle(this.element,"transform","rotateX(0) rotateY(0)")}))}isAnimating=!1;name;multiple=25;element;startAnimation(){this.isAnimating=!0,setTimeout(()=>{this.isAnimating=!1},2e3)}transformElement(t,n){if(!this.element)return;let r=this.element.getBoundingClientRect(),o=-(n-r.y-r.height/2)/this.multiple,i=(t-r.x-r.width/2)/this.multiple;o=o>10?10:o,i=i>10?10:i,o=o<-10?-10:o,i=i<-10?-10:i,this.renderer.setStyle(this.element,"transform",`rotateX(${o}deg) rotateY(${i}deg)`)}static \u0275fac=function(n){return new(n||e)(ht(hi),ht(Za),ht(ks),ht(Co))};static \u0275cmp=Cr({type:e,selectors:[["app-root"]],decls:28,vars:2,consts:[[1,"container"],[3,"navigationClicked"],[1,"logo"],["src","assets/slb_logo.svg","alt","SLB Logo"],[1,"header"],[1,"hashtags"],[1,"main-content"],[1,"circles-container"],[1,"dripping-circles"],["class","circle",3,"animate",4,"ngFor","ngForOf"],[1,"footer-text"],[1,"highlight"],[1,"badge"],[1,"circle"]],template:function(n,r){n&1&&(ct(0,"div",0)(1,"app-navigation",1),io("navigationClicked",function(){return r.startAnimation()}),lt(),ct(2,"div",2),Tr(3,"img",3),lt(),ct(4,"div",4)(5,"h1"),$t(6,"International Day of Persons with Disabilities"),lt(),ct(7,"div",5)(8,"p"),$t(9,"#WeAreInclusive"),lt(),ct(10,"p"),$t(11,"#WeAreSlb"),lt()()(),ct(12,"div",6),Tr(13,"router-outlet"),lt(),ct(14,"div",7)(15,"div",8),mi(16,RRe,1,2,"div",9),lt()(),ct(17,"div",10)(18,"p"),$t(19,"Here, we support each other"),lt(),ct(20,"p"),$t(21,"Here, we can all thrive"),lt(),ct(22,"p",11),$t(23,"Here, is SLB"),lt()(),ct(24,"div",12),$t(25," From Awareness"),Tr(26,"br"),$t(27,"to Acceptance "),lt()()),n&2&&(gn(16),Fn("ngForOf",Lb(1,ARe)))},dependencies:[es,jb,gw,Ik,y2],styles:[".container[_ngcontent-%COMP%]{background-color:#f0e6ff;height:98vh;width:100%;position:relative;overflow:hidden;display:flex;flex-direction:column;align-items:center;box-sizing:border-box;margin:0}.logo[_ngcontent-%COMP%]{position:absolute;top:min(2rem,4vh);left:min(2rem,4vh)}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:min(120px,15vw)}.header[_ngcontent-%COMP%]{position:absolute;top:min(2rem,4vh);right:min(2rem,4vh);text-align:right;max-width:50vw}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#00f;margin-bottom:.5rem;font-size:clamp(1rem,2vw,1.5rem)}.header[_ngcontent-%COMP%]   .hashtags[_ngcontent-%COMP%]{color:#00f;font-size:clamp(.8rem,1.5vw,1.2rem)}.header[_ngcontent-%COMP%]   .hashtags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:1rem}.circles-container[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;width:100%}.dripping-circles[_ngcontent-%COMP%]{position:relative;width:min(100vh,100vw);height:min(100vh,100vw)}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:#8000ff1a;top:50%;left:50%;transform:translate(-50%,-50%)}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(1){width:180%;height:180%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(1).animate{animation:_ngcontent-%COMP%_drip1 2s}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(2){width:160%;height:160%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(2).animate{animation:_ngcontent-%COMP%_drip2 2s}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(3){width:140%;height:140%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(3).animate{animation:_ngcontent-%COMP%_drip3 2s}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(4){width:120%;height:120%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(4).animate{animation:_ngcontent-%COMP%_drip4 2s}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(5){width:100%;height:100%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(5).animate{animation:_ngcontent-%COMP%_drip5 2s}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(6){width:80%;height:80%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(6).animate{animation:_ngcontent-%COMP%_drip6 2s}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(7){width:60%;height:60%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(7).animate{animation:_ngcontent-%COMP%_drip7 2s}@keyframes _ngcontent-%COMP%_drip1{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_drip2{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_drip3{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_drip4{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_drip5{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_drip6{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_drip7{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}.footer-text[_ngcontent-%COMP%]{position:absolute;bottom:min(2rem,4vh);left:min(2rem,4vh);color:#00f}.footer-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:clamp(1rem,2vw,1.5rem)}.footer-text[_ngcontent-%COMP%]   p.highlight[_ngcontent-%COMP%]{font-weight:700}.badge[_ngcontent-%COMP%]{position:absolute;bottom:min(2rem,4vh);right:min(2rem,4vh);background:#00f;color:#fff;padding:clamp(.5rem,1.5vw,1rem);border-radius:15px;text-align:center;font-size:clamp(.8rem,1.5vw,1rem)}@media (max-width: 768px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem}.header[_ngcontent-%COMP%]   .hashtags[_ngcontent-%COMP%]{font-size:.9rem}.footer-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.badge[_ngcontent-%COMP%]{font-size:.9rem;padding:.8rem}}.main-content[_ngcontent-%COMP%]{position:absolute;z-index:1;width:100%;max-width:90vw;margin:5vh auto;padding:2rem;display:flex;justify-content:center;align-items:center}"]})};S6(v2,wee).catch(e=>console.error(e));
