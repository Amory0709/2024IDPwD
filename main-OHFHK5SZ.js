var wae=Object.create;var Xx=Object.defineProperty,Eae=Object.defineProperties,Cae=Object.getOwnPropertyDescriptor,Tae=Object.getOwnPropertyDescriptors,_ae=Object.getOwnPropertyNames,Kx=Object.getOwnPropertySymbols,Iae=Object.getPrototypeOf,oN=Object.prototype.hasOwnProperty,N4=Object.prototype.propertyIsEnumerable;var D4=(e,t,n)=>t in e?Xx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xe=(e,t)=>{for(var n in t||={})oN.call(t,n)&&D4(e,n,t[n]);if(Kx)for(var n of Kx(t))N4.call(t,n)&&D4(e,n,t[n]);return e},vt=(e,t)=>Eae(e,Tae(t));var A4=(e,t)=>{var n={};for(var r in e)oN.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Kx)for(var r of Kx(e))t.indexOf(r)<0&&N4.call(e,r)&&(n[r]=e[r]);return n};var Ho=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),nn=(e,t)=>{for(var n in t)Xx(e,n,{get:t[n],enumerable:!0})},Sae=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of _ae(t))!oN.call(e,o)&&o!==n&&Xx(e,o,{get:()=>t[o],enumerable:!(r=Cae(t,o))||r.enumerable});return e};var ya=(e,t,n)=>(n=e!=null?wae(Iae(e)):{},Sae(t||!e||!e.__esModule?Xx(n,"default",{value:e,enumerable:!0}):n,e));var ne=(e,t,n)=>new Promise((r,o)=>{var i=u=>{try{a(n.next(u))}catch(c){o(c)}},s=u=>{try{a(n.throw(u))}catch(c){o(c)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(i,s);a((n=n.apply(e,t)).next())});var O8=Ho((Rh,gv)=>{"use strict";(function(){var e,t="4.17.21",n=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",i="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,u="__lodash_placeholder__",c=1,d=2,f=4,h=1,m=2,v=1,x=2,b=4,C=8,S=16,O=32,F=64,B=128,H=256,X=512,Z=30,te="...",J=800,ae=16,ye=1,Oe=2,Ye=3,Fe=1/0,Dt=9007199254740991,oe=17976931348623157e292,pe=NaN,ie=4294967295,Ce=ie-1,ve=ie>>>1,De=[["ary",B],["bind",v],["bindKey",x],["curry",C],["curryRight",S],["flip",X],["partial",O],["partialRight",F],["rearg",H]],Te="[object Arguments]",ut="[object Array]",be="[object AsyncFunction]",dt="[object Boolean]",pt="[object Date]",Hn="[object DOMException]",En="[object Error]",Yt="[object Function]",gn="[object GeneratorFunction]",dn="[object Map]",gt="[object Number]",en="[object Null]",fn="[object Object]",io="[object Promise]",wo="[object Proxy]",Eo="[object RegExp]",Yn="[object Set]",Kr="[object String]",Ir="[object Symbol]",so="[object Undefined]",ao="[object WeakMap]",Mr="[object WeakSet]",uo="[object ArrayBuffer]",Co="[object DataView]",As="[object Float32Array]",ca="[object Float64Array]",la="[object Int8Array]",To="[object Int16Array]",Fc="[object Int32Array]",Ha="[object Uint8Array]",da="[object Uint8ClampedArray]",ld="[object Uint16Array]",ip="[object Uint32Array]",W2=/\b__p \+= '';/g,H0=/\b(__p \+=) '' \+/g,yg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wa=/&(?:amp|lt|gt|quot|#39);/g,Pc=/[&<>"']/g,W0=RegExp(Wa.source),q0=RegExp(Pc.source),vg=/<%-([\s\S]+?)%>/g,K0=/<%([\s\S]+?)%>/g,qa=/<%=([\s\S]+?)%>/g,xg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X0=/^\w*$/,sp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$c=/[\\^$.*+?()[\]{}|]/g,q2=RegExp($c.source),Ka=/^\s+/,K2=/\s/,fa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Mu=/\{\n\/\* \[wrapped with (.+)\] \*/,Y0=/,? & /,Zn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rs=/[()=,{}\[\]\/\s]/,bg=/\\(\\)?/g,X2=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dd=/\w*$/,wg=/^[-+]0x[0-9a-f]+$/i,ap=/^0b[01]+$/i,fd=/^\[object .+?Constructor\]$/,Z0=/^0o[0-7]+$/i,Eg=/^(?:0|[1-9]\d*)$/,Cg=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pd=/($^)/,Hi=/['\n\r\u2028\u2029\\]/g,Vo="\\ud800-\\udfff",hd="\\u0300-\\u036f",Tg="\\ufe20-\\ufe2f",_g="\\u20d0-\\u20ff",Ig=hd+Tg+_g,md="\\u2700-\\u27bf",Wi="a-z\\xdf-\\xf6\\xf8-\\xff",Q0="\\xac\\xb1\\xd7\\xf7",up="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ks="\\u2000-\\u206f",cp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",J0="A-Z\\xc0-\\xd6\\xd8-\\xde",Sg="\\ufe0e\\ufe0f",lp=Q0+up+ks+cp,Dg="['\u2019]",Y2="["+Vo+"]",Ng="["+lp+"]",gd="["+Ig+"]",Ag="\\d+",ex="["+md+"]",co="["+Wi+"]",Rg="[^"+Vo+lp+Ag+md+Wi+J0+"]",dp="\\ud83c[\\udffb-\\udfff]",fp="(?:"+gd+"|"+dp+")",kg="[^"+Vo+"]",pp="(?:\\ud83c[\\udde6-\\uddff]){2}",Og="[\\ud800-\\udbff][\\udc00-\\udfff]",Lc="["+J0+"]",Mg="\\u200d",Fg="(?:"+co+"|"+Rg+")",hp="(?:"+Lc+"|"+Rg+")",Pg="(?:"+Dg+"(?:d|ll|m|re|s|t|ve))?",$g="(?:"+Dg+"(?:D|LL|M|RE|S|T|VE))?",Vc=fp+"?",tx="["+Sg+"]?",Z2="(?:"+Mg+"(?:"+[kg,pp,Og].join("|")+")"+tx+Vc+")*",Q2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",J2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mp=tx+Vc+Z2,yd="(?:"+[ex,pp,Og].join("|")+")"+mp,eD="(?:"+[kg+gd+"?",gd,pp,Og,Y2].join("|")+")",tD=RegExp(Dg,"g"),nD=RegExp(gd,"g"),Lg=RegExp(dp+"(?="+dp+")|"+eD+mp,"g"),Vg=RegExp([Lc+"?"+co+"+"+Pg+"(?="+[Ng,Lc,"$"].join("|")+")",hp+"+"+$g+"(?="+[Ng,Lc+Fg,"$"].join("|")+")",Lc+"?"+Fg+"+"+Pg,Lc+"+"+$g,J2,Q2,Ag,yd].join("|"),"g"),nx=RegExp("["+Mg+Vo+Ig+Sg+"]"),rx=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qi=-1,Cn={};Cn[As]=Cn[ca]=Cn[la]=Cn[To]=Cn[Fc]=Cn[Ha]=Cn[da]=Cn[ld]=Cn[ip]=!0,Cn[Te]=Cn[ut]=Cn[uo]=Cn[dt]=Cn[Co]=Cn[pt]=Cn[En]=Cn[Yt]=Cn[dn]=Cn[gt]=Cn[fn]=Cn[Eo]=Cn[Yn]=Cn[Kr]=Cn[ao]=!1;var yn={};yn[Te]=yn[ut]=yn[uo]=yn[Co]=yn[dt]=yn[pt]=yn[As]=yn[ca]=yn[la]=yn[To]=yn[Fc]=yn[dn]=yn[gt]=yn[fn]=yn[Eo]=yn[Yn]=yn[Kr]=yn[Ir]=yn[Ha]=yn[da]=yn[ld]=yn[ip]=!0,yn[En]=yn[Yt]=yn[ao]=!1;var ox={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ix={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ug={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bc=parseFloat,sx=parseInt,gp=typeof global=="object"&&global&&global.Object===Object&&global,rD=typeof self=="object"&&self&&self.Object===Object&&self,vr=gp||rD||Function("return this")(),Xa=typeof Rh=="object"&&Rh&&!Rh.nodeType&&Rh,Ya=Xa&&typeof gv=="object"&&gv&&!gv.nodeType&&gv,Gg=Ya&&Ya.exports===Xa,jg=Gg&&gp.process,Bo=function(){try{var K=Ya&&Ya.require&&Ya.require("util").types;return K||jg&&jg.binding&&jg.binding("util")}catch{}}(),xd=Bo&&Bo.isArrayBuffer,zg=Bo&&Bo.isDate,ax=Bo&&Bo.isMap,Hg=Bo&&Bo.isRegExp,Wg=Bo&&Bo.isSet,qg=Bo&&Bo.isTypedArray;function _o(K,se,re){switch(re.length){case 0:return K.call(se);case 1:return K.call(se,re[0]);case 2:return K.call(se,re[0],re[1]);case 3:return K.call(se,re[0],re[1],re[2])}return K.apply(se,re)}function Kg(K,se,re,Ae){for(var ht=-1,tn=K==null?0:K.length;++ht<tn;){var $r=K[ht];se(Ae,$r,re($r),K)}return Ae}function Uo(K,se){for(var re=-1,Ae=K==null?0:K.length;++re<Ae&&se(K[re],re,K)!==!1;);return K}function oD(K,se){for(var re=K==null?0:K.length;re--&&se(K[re],re,K)!==!1;);return K}function ux(K,se){for(var re=-1,Ae=K==null?0:K.length;++re<Ae;)if(!se(K[re],re,K))return!1;return!0}function Za(K,se){for(var re=-1,Ae=K==null?0:K.length,ht=0,tn=[];++re<Ae;){var $r=K[re];se($r,re,K)&&(tn[ht++]=$r)}return tn}function yp(K,se){var re=K==null?0:K.length;return!!re&&Fu(K,se,0)>-1}function vp(K,se,re){for(var Ae=-1,ht=K==null?0:K.length;++Ae<ht;)if(re(se,K[Ae]))return!0;return!1}function On(K,se){for(var re=-1,Ae=K==null?0:K.length,ht=Array(Ae);++re<Ae;)ht[re]=se(K[re],re,K);return ht}function Qa(K,se){for(var re=-1,Ae=se.length,ht=K.length;++re<Ae;)K[ht+re]=se[re];return K}function bd(K,se,re,Ae){var ht=-1,tn=K==null?0:K.length;for(Ae&&tn&&(re=K[++ht]);++ht<tn;)re=se(re,K[ht],ht,K);return re}function iD(K,se,re,Ae){var ht=K==null?0:K.length;for(Ae&&ht&&(re=K[--ht]);ht--;)re=se(re,K[ht],ht,K);return re}function Xg(K,se){for(var re=-1,Ae=K==null?0:K.length;++re<Ae;)if(se(K[re],re,K))return!0;return!1}var sD=I("length");function xp(K){return K.split("")}function aD(K){return K.match(Zn)||[]}function cx(K,se,re){var Ae;return re(K,function(ht,tn,$r){if(se(ht,tn,$r))return Ae=tn,!1}),Ae}function bp(K,se,re,Ae){for(var ht=K.length,tn=re+(Ae?1:-1);Ae?tn--:++tn<ht;)if(se(K[tn],tn,K))return tn;return-1}function Fu(K,se,re){return se===se?cD(K,se,re):bp(K,g,re)}function lx(K,se,re,Ae){for(var ht=re-1,tn=K.length;++ht<tn;)if(Ae(K[ht],se))return ht;return-1}function g(K){return K!==K}function w(K,se){var re=K==null?0:K.length;return re?V(K,se)/re:pe}function I(K){return function(se){return se==null?e:se[K]}}function R(K){return function(se){return K==null?e:K[se]}}function L(K,se,re,Ae,ht){return ht(K,function(tn,$r,_n){re=Ae?(Ae=!1,tn):se(re,tn,$r,_n)}),re}function G(K,se){var re=K.length;for(K.sort(se);re--;)K[re]=K[re].value;return K}function V(K,se){for(var re,Ae=-1,ht=K.length;++Ae<ht;){var tn=se(K[Ae]);tn!==e&&(re=re===e?tn:re+tn)}return re}function q(K,se){for(var re=-1,Ae=Array(K);++re<K;)Ae[re]=se(re);return Ae}function ee(K,se){return On(se,function(re){return[re,K[re]]})}function me(K){return K&&K.slice(0,LP(K)+1).replace(Ka,"")}function ge(K){return function(se){return K(se)}}function Qe(K,se){return On(se,function(re){return K[re]})}function Pe(K,se){return K.has(se)}function Ie(K,se){for(var re=-1,Ae=K.length;++re<Ae&&Fu(se,K[re],0)>-1;);return re}function tt(K,se){for(var re=K.length;re--&&Fu(se,K[re],0)>-1;);return re}function Tt(K,se){for(var re=K.length,Ae=0;re--;)K[re]===se&&++Ae;return Ae}var Tn=R(ox),vn=R(ix);function Fr(K){return"\\"+Ug[K]}function mi(K,se){return K==null?e:K[se]}function xr(K){return nx.test(K)}function Ht(K){return rx.test(K)}function Pr(K){for(var se,re=[];!(se=K.next()).done;)re.push(se.value);return re}function Os(K){var se=-1,re=Array(K.size);return K.forEach(function(Ae,ht){re[++se]=[ht,Ae]}),re}function dx(K,se){return function(re){return K(se(re))}}function Ja(K,se){for(var re=-1,Ae=K.length,ht=0,tn=[];++re<Ae;){var $r=K[re];($r===se||$r===u)&&(K[re]=u,tn[ht++]=re)}return tn}function wp(K){var se=-1,re=Array(K.size);return K.forEach(function(Ae){re[++se]=Ae}),re}function uD(K){var se=-1,re=Array(K.size);return K.forEach(function(Ae){re[++se]=[Ae,Ae]}),re}function cD(K,se,re){for(var Ae=re-1,ht=K.length;++Ae<ht;)if(K[Ae]===se)return Ae;return-1}function Ep(K,se,re){for(var Ae=re+1;Ae--;)if(K[Ae]===se)return Ae;return Ae}function Cp(K){return xr(K)?lte(K):sD(K)}function pa(K){return xr(K)?dte(K):xp(K)}function LP(K){for(var se=K.length;se--&&K2.test(K.charAt(se)););return se}var cte=R(Bg);function lte(K){for(var se=Lg.lastIndex=0;Lg.test(K);)++se;return se}function dte(K){return K.match(Lg)||[]}function fte(K){return K.match(Vg)||[]}var pte=function K(se){se=se==null?vr:Uc.defaults(vr.Object(),se,Uc.pick(vr,vd));var re=se.Array,Ae=se.Date,ht=se.Error,tn=se.Function,$r=se.Math,_n=se.Object,lD=se.RegExp,hte=se.String,Ms=se.TypeError,fx=re.prototype,mte=tn.prototype,Tp=_n.prototype,px=se["__core-js_shared__"],hx=mte.toString,pn=Tp.hasOwnProperty,gte=0,VP=function(){var l=/[^.]+$/.exec(px&&px.keys&&px.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),mx=Tp.toString,yte=hx.call(_n),vte=vr._,xte=lD("^"+hx.call(pn).replace($c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gx=Gg?se.Buffer:e,Gc=se.Symbol,yx=se.Uint8Array,BP=gx?gx.allocUnsafe:e,vx=dx(_n.getPrototypeOf,_n),UP=_n.create,GP=Tp.propertyIsEnumerable,xx=fx.splice,jP=Gc?Gc.isConcatSpreadable:e,Yg=Gc?Gc.iterator:e,wd=Gc?Gc.toStringTag:e,bx=function(){try{var l=Id(_n,"defineProperty");return l({},"",{}),l}catch{}}(),bte=se.clearTimeout!==vr.clearTimeout&&se.clearTimeout,wte=Ae&&Ae.now!==vr.Date.now&&Ae.now,Ete=se.setTimeout!==vr.setTimeout&&se.setTimeout,wx=$r.ceil,Ex=$r.floor,dD=_n.getOwnPropertySymbols,Cte=gx?gx.isBuffer:e,zP=se.isFinite,Tte=fx.join,_te=dx(_n.keys,_n),Lr=$r.max,Io=$r.min,Ite=Ae.now,Ste=se.parseInt,HP=$r.random,Dte=fx.reverse,fD=Id(se,"DataView"),Zg=Id(se,"Map"),pD=Id(se,"Promise"),_p=Id(se,"Set"),Qg=Id(se,"WeakMap"),Jg=Id(_n,"create"),Cx=Qg&&new Qg,Ip={},Nte=Sd(fD),Ate=Sd(Zg),Rte=Sd(pD),kte=Sd(_p),Ote=Sd(Qg),Tx=Gc?Gc.prototype:e,ey=Tx?Tx.valueOf:e,WP=Tx?Tx.toString:e;function P(l){if(ar(l)&&!yt(l)&&!(l instanceof Pt)){if(l instanceof Fs)return l;if(pn.call(l,"__wrapped__"))return q$(l)}return new Fs(l)}var Sp=function(){function l(){}return function(p){if(!Qn(p))return{};if(UP)return UP(p);l.prototype=p;var y=new l;return l.prototype=e,y}}();function _x(){}function Fs(l,p){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=e}P.templateSettings={escape:vg,evaluate:K0,interpolate:qa,variable:"",imports:{_:P}},P.prototype=_x.prototype,P.prototype.constructor=P,Fs.prototype=Sp(_x.prototype),Fs.prototype.constructor=Fs;function Pt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function Mte(){var l=new Pt(this.__wrapped__);return l.__actions__=gi(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=gi(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=gi(this.__views__),l}function Fte(){if(this.__filtered__){var l=new Pt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function Pte(){var l=this.__wrapped__.value(),p=this.__dir__,y=yt(l),E=p<0,A=y?l.length:0,$=Kne(0,A,this.__views__),j=$.start,W=$.end,Y=W-j,ue=E?W:j-1,ce=this.__iteratees__,he=ce.length,Se=0,Ve=Io(Y,this.__takeCount__);if(!y||!E&&A==Y&&Ve==Y)return g$(l,this.__actions__);var ot=[];e:for(;Y--&&Se<Ve;){ue+=p;for(var St=-1,it=l[ue];++St<he;){var Mt=ce[St],Gt=Mt.iteratee,Yi=Mt.type,zo=Gt(it);if(Yi==Oe)it=zo;else if(!zo){if(Yi==ye)continue e;break e}}ot[Se++]=it}return ot}Pt.prototype=Sp(_x.prototype),Pt.prototype.constructor=Pt;function Ed(l){var p=-1,y=l==null?0:l.length;for(this.clear();++p<y;){var E=l[p];this.set(E[0],E[1])}}function $te(){this.__data__=Jg?Jg(null):{},this.size=0}function Lte(l){var p=this.has(l)&&delete this.__data__[l];return this.size-=p?1:0,p}function Vte(l){var p=this.__data__;if(Jg){var y=p[l];return y===s?e:y}return pn.call(p,l)?p[l]:e}function Bte(l){var p=this.__data__;return Jg?p[l]!==e:pn.call(p,l)}function Ute(l,p){var y=this.__data__;return this.size+=this.has(l)?0:1,y[l]=Jg&&p===e?s:p,this}Ed.prototype.clear=$te,Ed.prototype.delete=Lte,Ed.prototype.get=Vte,Ed.prototype.has=Bte,Ed.prototype.set=Ute;function Pu(l){var p=-1,y=l==null?0:l.length;for(this.clear();++p<y;){var E=l[p];this.set(E[0],E[1])}}function Gte(){this.__data__=[],this.size=0}function jte(l){var p=this.__data__,y=Ix(p,l);if(y<0)return!1;var E=p.length-1;return y==E?p.pop():xx.call(p,y,1),--this.size,!0}function zte(l){var p=this.__data__,y=Ix(p,l);return y<0?e:p[y][1]}function Hte(l){return Ix(this.__data__,l)>-1}function Wte(l,p){var y=this.__data__,E=Ix(y,l);return E<0?(++this.size,y.push([l,p])):y[E][1]=p,this}Pu.prototype.clear=Gte,Pu.prototype.delete=jte,Pu.prototype.get=zte,Pu.prototype.has=Hte,Pu.prototype.set=Wte;function $u(l){var p=-1,y=l==null?0:l.length;for(this.clear();++p<y;){var E=l[p];this.set(E[0],E[1])}}function qte(){this.size=0,this.__data__={hash:new Ed,map:new(Zg||Pu),string:new Ed}}function Kte(l){var p=Lx(this,l).delete(l);return this.size-=p?1:0,p}function Xte(l){return Lx(this,l).get(l)}function Yte(l){return Lx(this,l).has(l)}function Zte(l,p){var y=Lx(this,l),E=y.size;return y.set(l,p),this.size+=y.size==E?0:1,this}$u.prototype.clear=qte,$u.prototype.delete=Kte,$u.prototype.get=Xte,$u.prototype.has=Yte,$u.prototype.set=Zte;function Cd(l){var p=-1,y=l==null?0:l.length;for(this.__data__=new $u;++p<y;)this.add(l[p])}function Qte(l){return this.__data__.set(l,s),this}function Jte(l){return this.__data__.has(l)}Cd.prototype.add=Cd.prototype.push=Qte,Cd.prototype.has=Jte;function ha(l){var p=this.__data__=new Pu(l);this.size=p.size}function ene(){this.__data__=new Pu,this.size=0}function tne(l){var p=this.__data__,y=p.delete(l);return this.size=p.size,y}function nne(l){return this.__data__.get(l)}function rne(l){return this.__data__.has(l)}function one(l,p){var y=this.__data__;if(y instanceof Pu){var E=y.__data__;if(!Zg||E.length<n-1)return E.push([l,p]),this.size=++y.size,this;y=this.__data__=new $u(E)}return y.set(l,p),this.size=y.size,this}ha.prototype.clear=ene,ha.prototype.delete=tne,ha.prototype.get=nne,ha.prototype.has=rne,ha.prototype.set=one;function qP(l,p){var y=yt(l),E=!y&&Dd(l),A=!y&&!E&&qc(l),$=!y&&!E&&!A&&Rp(l),j=y||E||A||$,W=j?q(l.length,hte):[],Y=W.length;for(var ue in l)(p||pn.call(l,ue))&&!(j&&(ue=="length"||A&&(ue=="offset"||ue=="parent")||$&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Uu(ue,Y)))&&W.push(ue);return W}function KP(l){var p=l.length;return p?l[TD(0,p-1)]:e}function ine(l,p){return Vx(gi(l),Td(p,0,l.length))}function sne(l){return Vx(gi(l))}function hD(l,p,y){(y!==e&&!ma(l[p],y)||y===e&&!(p in l))&&Lu(l,p,y)}function ty(l,p,y){var E=l[p];(!(pn.call(l,p)&&ma(E,y))||y===e&&!(p in l))&&Lu(l,p,y)}function Ix(l,p){for(var y=l.length;y--;)if(ma(l[y][0],p))return y;return-1}function ane(l,p,y,E){return jc(l,function(A,$,j){p(E,A,y(A),j)}),E}function XP(l,p){return l&&tu(p,Xr(p),l)}function une(l,p){return l&&tu(p,vi(p),l)}function Lu(l,p,y){p=="__proto__"&&bx?bx(l,p,{configurable:!0,enumerable:!0,value:y,writable:!0}):l[p]=y}function mD(l,p){for(var y=-1,E=p.length,A=re(E),$=l==null;++y<E;)A[y]=$?e:XD(l,p[y]);return A}function Td(l,p,y){return l===l&&(y!==e&&(l=l<=y?l:y),p!==e&&(l=l>=p?l:p)),l}function Ps(l,p,y,E,A,$){var j,W=p&c,Y=p&d,ue=p&f;if(y&&(j=A?y(l,E,A,$):y(l)),j!==e)return j;if(!Qn(l))return l;var ce=yt(l);if(ce){if(j=Yne(l),!W)return gi(l,j)}else{var he=So(l),Se=he==Yt||he==gn;if(qc(l))return x$(l,W);if(he==fn||he==Te||Se&&!A){if(j=Y||Se?{}:L$(l),!W)return Y?Vne(l,une(j,l)):Lne(l,XP(j,l))}else{if(!yn[he])return A?l:{};j=Zne(l,he,W)}}$||($=new ha);var Ve=$.get(l);if(Ve)return Ve;$.set(l,j),p4(l)?l.forEach(function(it){j.add(Ps(it,p,y,it,l,$))}):d4(l)&&l.forEach(function(it,Mt){j.set(Mt,Ps(it,p,y,Mt,l,$))});var ot=ue?Y?FD:MD:Y?vi:Xr,St=ce?e:ot(l);return Uo(St||l,function(it,Mt){St&&(Mt=it,it=l[Mt]),ty(j,Mt,Ps(it,p,y,Mt,l,$))}),j}function cne(l){var p=Xr(l);return function(y){return YP(y,l,p)}}function YP(l,p,y){var E=y.length;if(l==null)return!E;for(l=_n(l);E--;){var A=y[E],$=p[A],j=l[A];if(j===e&&!(A in l)||!$(j))return!1}return!0}function ZP(l,p,y){if(typeof l!="function")throw new Ms(o);return uy(function(){l.apply(e,y)},p)}function ny(l,p,y,E){var A=-1,$=yp,j=!0,W=l.length,Y=[],ue=p.length;if(!W)return Y;y&&(p=On(p,ge(y))),E?($=vp,j=!1):p.length>=n&&($=Pe,j=!1,p=new Cd(p));e:for(;++A<W;){var ce=l[A],he=y==null?ce:y(ce);if(ce=E||ce!==0?ce:0,j&&he===he){for(var Se=ue;Se--;)if(p[Se]===he)continue e;Y.push(ce)}else $(p,he,E)||Y.push(ce)}return Y}var jc=T$(eu),QP=T$(yD,!0);function lne(l,p){var y=!0;return jc(l,function(E,A,$){return y=!!p(E,A,$),y}),y}function Sx(l,p,y){for(var E=-1,A=l.length;++E<A;){var $=l[E],j=p($);if(j!=null&&(W===e?j===j&&!Xi(j):y(j,W)))var W=j,Y=$}return Y}function dne(l,p,y,E){var A=l.length;for(y=_t(y),y<0&&(y=-y>A?0:A+y),E=E===e||E>A?A:_t(E),E<0&&(E+=A),E=y>E?0:m4(E);y<E;)l[y++]=p;return l}function JP(l,p){var y=[];return jc(l,function(E,A,$){p(E,A,$)&&y.push(E)}),y}function lo(l,p,y,E,A){var $=-1,j=l.length;for(y||(y=Jne),A||(A=[]);++$<j;){var W=l[$];p>0&&y(W)?p>1?lo(W,p-1,y,E,A):Qa(A,W):E||(A[A.length]=W)}return A}var gD=_$(),e$=_$(!0);function eu(l,p){return l&&gD(l,p,Xr)}function yD(l,p){return l&&e$(l,p,Xr)}function Dx(l,p){return Za(p,function(y){return Gu(l[y])})}function _d(l,p){p=Hc(p,l);for(var y=0,E=p.length;l!=null&&y<E;)l=l[nu(p[y++])];return y&&y==E?l:e}function t$(l,p,y){var E=p(l);return yt(l)?E:Qa(E,y(l))}function Go(l){return l==null?l===e?so:en:wd&&wd in _n(l)?qne(l):sre(l)}function vD(l,p){return l>p}function fne(l,p){return l!=null&&pn.call(l,p)}function pne(l,p){return l!=null&&p in _n(l)}function hne(l,p,y){return l>=Io(p,y)&&l<Lr(p,y)}function xD(l,p,y){for(var E=y?vp:yp,A=l[0].length,$=l.length,j=$,W=re($),Y=1/0,ue=[];j--;){var ce=l[j];j&&p&&(ce=On(ce,ge(p))),Y=Io(ce.length,Y),W[j]=!y&&(p||A>=120&&ce.length>=120)?new Cd(j&&ce):e}ce=l[0];var he=-1,Se=W[0];e:for(;++he<A&&ue.length<Y;){var Ve=ce[he],ot=p?p(Ve):Ve;if(Ve=y||Ve!==0?Ve:0,!(Se?Pe(Se,ot):E(ue,ot,y))){for(j=$;--j;){var St=W[j];if(!(St?Pe(St,ot):E(l[j],ot,y)))continue e}Se&&Se.push(ot),ue.push(Ve)}}return ue}function mne(l,p,y,E){return eu(l,function(A,$,j){p(E,y(A),$,j)}),E}function ry(l,p,y){p=Hc(p,l),l=G$(l,p);var E=l==null?l:l[nu(Ls(p))];return E==null?e:_o(E,l,y)}function n$(l){return ar(l)&&Go(l)==Te}function gne(l){return ar(l)&&Go(l)==uo}function yne(l){return ar(l)&&Go(l)==pt}function oy(l,p,y,E,A){return l===p?!0:l==null||p==null||!ar(l)&&!ar(p)?l!==l&&p!==p:vne(l,p,y,E,oy,A)}function vne(l,p,y,E,A,$){var j=yt(l),W=yt(p),Y=j?ut:So(l),ue=W?ut:So(p);Y=Y==Te?fn:Y,ue=ue==Te?fn:ue;var ce=Y==fn,he=ue==fn,Se=Y==ue;if(Se&&qc(l)){if(!qc(p))return!1;j=!0,ce=!1}if(Se&&!ce)return $||($=new ha),j||Rp(l)?F$(l,p,y,E,A,$):Hne(l,p,Y,y,E,A,$);if(!(y&h)){var Ve=ce&&pn.call(l,"__wrapped__"),ot=he&&pn.call(p,"__wrapped__");if(Ve||ot){var St=Ve?l.value():l,it=ot?p.value():p;return $||($=new ha),A(St,it,y,E,$)}}return Se?($||($=new ha),Wne(l,p,y,E,A,$)):!1}function xne(l){return ar(l)&&So(l)==dn}function bD(l,p,y,E){var A=y.length,$=A,j=!E;if(l==null)return!$;for(l=_n(l);A--;){var W=y[A];if(j&&W[2]?W[1]!==l[W[0]]:!(W[0]in l))return!1}for(;++A<$;){W=y[A];var Y=W[0],ue=l[Y],ce=W[1];if(j&&W[2]){if(ue===e&&!(Y in l))return!1}else{var he=new ha;if(E)var Se=E(ue,ce,Y,l,p,he);if(!(Se===e?oy(ce,ue,h|m,E,he):Se))return!1}}return!0}function r$(l){if(!Qn(l)||tre(l))return!1;var p=Gu(l)?xte:fd;return p.test(Sd(l))}function bne(l){return ar(l)&&Go(l)==Eo}function wne(l){return ar(l)&&So(l)==Yn}function Ene(l){return ar(l)&&Hx(l.length)&&!!Cn[Go(l)]}function o$(l){return typeof l=="function"?l:l==null?xi:typeof l=="object"?yt(l)?a$(l[0],l[1]):s$(l):I4(l)}function wD(l){if(!ay(l))return _te(l);var p=[];for(var y in _n(l))pn.call(l,y)&&y!="constructor"&&p.push(y);return p}function Cne(l){if(!Qn(l))return ire(l);var p=ay(l),y=[];for(var E in l)E=="constructor"&&(p||!pn.call(l,E))||y.push(E);return y}function ED(l,p){return l<p}function i$(l,p){var y=-1,E=yi(l)?re(l.length):[];return jc(l,function(A,$,j){E[++y]=p(A,$,j)}),E}function s$(l){var p=$D(l);return p.length==1&&p[0][2]?B$(p[0][0],p[0][1]):function(y){return y===l||bD(y,l,p)}}function a$(l,p){return VD(l)&&V$(p)?B$(nu(l),p):function(y){var E=XD(y,l);return E===e&&E===p?YD(y,l):oy(p,E,h|m)}}function Nx(l,p,y,E,A){l!==p&&gD(p,function($,j){if(A||(A=new ha),Qn($))Tne(l,p,j,y,Nx,E,A);else{var W=E?E(UD(l,j),$,j+"",l,p,A):e;W===e&&(W=$),hD(l,j,W)}},vi)}function Tne(l,p,y,E,A,$,j){var W=UD(l,y),Y=UD(p,y),ue=j.get(Y);if(ue){hD(l,y,ue);return}var ce=$?$(W,Y,y+"",l,p,j):e,he=ce===e;if(he){var Se=yt(Y),Ve=!Se&&qc(Y),ot=!Se&&!Ve&&Rp(Y);ce=Y,Se||Ve||ot?yt(W)?ce=W:br(W)?ce=gi(W):Ve?(he=!1,ce=x$(Y,!0)):ot?(he=!1,ce=b$(Y,!0)):ce=[]:cy(Y)||Dd(Y)?(ce=W,Dd(W)?ce=g4(W):(!Qn(W)||Gu(W))&&(ce=L$(Y))):he=!1}he&&(j.set(Y,ce),A(ce,Y,E,$,j),j.delete(Y)),hD(l,y,ce)}function u$(l,p){var y=l.length;if(y)return p+=p<0?y:0,Uu(p,y)?l[p]:e}function c$(l,p,y){p.length?p=On(p,function($){return yt($)?function(j){return _d(j,$.length===1?$[0]:$)}:$}):p=[xi];var E=-1;p=On(p,ge(nt()));var A=i$(l,function($,j,W){var Y=On(p,function(ue){return ue($)});return{criteria:Y,index:++E,value:$}});return G(A,function($,j){return $ne($,j,y)})}function _ne(l,p){return l$(l,p,function(y,E){return YD(l,E)})}function l$(l,p,y){for(var E=-1,A=p.length,$={};++E<A;){var j=p[E],W=_d(l,j);y(W,j)&&iy($,Hc(j,l),W)}return $}function Ine(l){return function(p){return _d(p,l)}}function CD(l,p,y,E){var A=E?lx:Fu,$=-1,j=p.length,W=l;for(l===p&&(p=gi(p)),y&&(W=On(l,ge(y)));++$<j;)for(var Y=0,ue=p[$],ce=y?y(ue):ue;(Y=A(W,ce,Y,E))>-1;)W!==l&&xx.call(W,Y,1),xx.call(l,Y,1);return l}function d$(l,p){for(var y=l?p.length:0,E=y-1;y--;){var A=p[y];if(y==E||A!==$){var $=A;Uu(A)?xx.call(l,A,1):SD(l,A)}}return l}function TD(l,p){return l+Ex(HP()*(p-l+1))}function Sne(l,p,y,E){for(var A=-1,$=Lr(wx((p-l)/(y||1)),0),j=re($);$--;)j[E?$:++A]=l,l+=y;return j}function _D(l,p){var y="";if(!l||p<1||p>Dt)return y;do p%2&&(y+=l),p=Ex(p/2),p&&(l+=l);while(p);return y}function Nt(l,p){return GD(U$(l,p,xi),l+"")}function Dne(l){return KP(kp(l))}function Nne(l,p){var y=kp(l);return Vx(y,Td(p,0,y.length))}function iy(l,p,y,E){if(!Qn(l))return l;p=Hc(p,l);for(var A=-1,$=p.length,j=$-1,W=l;W!=null&&++A<$;){var Y=nu(p[A]),ue=y;if(Y==="__proto__"||Y==="constructor"||Y==="prototype")return l;if(A!=j){var ce=W[Y];ue=E?E(ce,Y,W):e,ue===e&&(ue=Qn(ce)?ce:Uu(p[A+1])?[]:{})}ty(W,Y,ue),W=W[Y]}return l}var f$=Cx?function(l,p){return Cx.set(l,p),l}:xi,Ane=bx?function(l,p){return bx(l,"toString",{configurable:!0,enumerable:!1,value:QD(p),writable:!0})}:xi;function Rne(l){return Vx(kp(l))}function $s(l,p,y){var E=-1,A=l.length;p<0&&(p=-p>A?0:A+p),y=y>A?A:y,y<0&&(y+=A),A=p>y?0:y-p>>>0,p>>>=0;for(var $=re(A);++E<A;)$[E]=l[E+p];return $}function kne(l,p){var y;return jc(l,function(E,A,$){return y=p(E,A,$),!y}),!!y}function Ax(l,p,y){var E=0,A=l==null?E:l.length;if(typeof p=="number"&&p===p&&A<=ve){for(;E<A;){var $=E+A>>>1,j=l[$];j!==null&&!Xi(j)&&(y?j<=p:j<p)?E=$+1:A=$}return A}return ID(l,p,xi,y)}function ID(l,p,y,E){var A=0,$=l==null?0:l.length;if($===0)return 0;p=y(p);for(var j=p!==p,W=p===null,Y=Xi(p),ue=p===e;A<$;){var ce=Ex((A+$)/2),he=y(l[ce]),Se=he!==e,Ve=he===null,ot=he===he,St=Xi(he);if(j)var it=E||ot;else ue?it=ot&&(E||Se):W?it=ot&&Se&&(E||!Ve):Y?it=ot&&Se&&!Ve&&(E||!St):Ve||St?it=!1:it=E?he<=p:he<p;it?A=ce+1:$=ce}return Io($,Ce)}function p$(l,p){for(var y=-1,E=l.length,A=0,$=[];++y<E;){var j=l[y],W=p?p(j):j;if(!y||!ma(W,Y)){var Y=W;$[A++]=j===0?0:j}}return $}function h$(l){return typeof l=="number"?l:Xi(l)?pe:+l}function Ki(l){if(typeof l=="string")return l;if(yt(l))return On(l,Ki)+"";if(Xi(l))return WP?WP.call(l):"";var p=l+"";return p=="0"&&1/l==-Fe?"-0":p}function zc(l,p,y){var E=-1,A=yp,$=l.length,j=!0,W=[],Y=W;if(y)j=!1,A=vp;else if($>=n){var ue=p?null:jne(l);if(ue)return wp(ue);j=!1,A=Pe,Y=new Cd}else Y=p?[]:W;e:for(;++E<$;){var ce=l[E],he=p?p(ce):ce;if(ce=y||ce!==0?ce:0,j&&he===he){for(var Se=Y.length;Se--;)if(Y[Se]===he)continue e;p&&Y.push(he),W.push(ce)}else A(Y,he,y)||(Y!==W&&Y.push(he),W.push(ce))}return W}function SD(l,p){return p=Hc(p,l),l=G$(l,p),l==null||delete l[nu(Ls(p))]}function m$(l,p,y,E){return iy(l,p,y(_d(l,p)),E)}function Rx(l,p,y,E){for(var A=l.length,$=E?A:-1;(E?$--:++$<A)&&p(l[$],$,l););return y?$s(l,E?0:$,E?$+1:A):$s(l,E?$+1:0,E?A:$)}function g$(l,p){var y=l;return y instanceof Pt&&(y=y.value()),bd(p,function(E,A){return A.func.apply(A.thisArg,Qa([E],A.args))},y)}function DD(l,p,y){var E=l.length;if(E<2)return E?zc(l[0]):[];for(var A=-1,$=re(E);++A<E;)for(var j=l[A],W=-1;++W<E;)W!=A&&($[A]=ny($[A]||j,l[W],p,y));return zc(lo($,1),p,y)}function y$(l,p,y){for(var E=-1,A=l.length,$=p.length,j={};++E<A;){var W=E<$?p[E]:e;y(j,l[E],W)}return j}function ND(l){return br(l)?l:[]}function AD(l){return typeof l=="function"?l:xi}function Hc(l,p){return yt(l)?l:VD(l,p)?[l]:W$(an(l))}var One=Nt;function Wc(l,p,y){var E=l.length;return y=y===e?E:y,!p&&y>=E?l:$s(l,p,y)}var v$=bte||function(l){return vr.clearTimeout(l)};function x$(l,p){if(p)return l.slice();var y=l.length,E=BP?BP(y):new l.constructor(y);return l.copy(E),E}function RD(l){var p=new l.constructor(l.byteLength);return new yx(p).set(new yx(l)),p}function Mne(l,p){var y=p?RD(l.buffer):l.buffer;return new l.constructor(y,l.byteOffset,l.byteLength)}function Fne(l){var p=new l.constructor(l.source,dd.exec(l));return p.lastIndex=l.lastIndex,p}function Pne(l){return ey?_n(ey.call(l)):{}}function b$(l,p){var y=p?RD(l.buffer):l.buffer;return new l.constructor(y,l.byteOffset,l.length)}function w$(l,p){if(l!==p){var y=l!==e,E=l===null,A=l===l,$=Xi(l),j=p!==e,W=p===null,Y=p===p,ue=Xi(p);if(!W&&!ue&&!$&&l>p||$&&j&&Y&&!W&&!ue||E&&j&&Y||!y&&Y||!A)return 1;if(!E&&!$&&!ue&&l<p||ue&&y&&A&&!E&&!$||W&&y&&A||!j&&A||!Y)return-1}return 0}function $ne(l,p,y){for(var E=-1,A=l.criteria,$=p.criteria,j=A.length,W=y.length;++E<j;){var Y=w$(A[E],$[E]);if(Y){if(E>=W)return Y;var ue=y[E];return Y*(ue=="desc"?-1:1)}}return l.index-p.index}function E$(l,p,y,E){for(var A=-1,$=l.length,j=y.length,W=-1,Y=p.length,ue=Lr($-j,0),ce=re(Y+ue),he=!E;++W<Y;)ce[W]=p[W];for(;++A<j;)(he||A<$)&&(ce[y[A]]=l[A]);for(;ue--;)ce[W++]=l[A++];return ce}function C$(l,p,y,E){for(var A=-1,$=l.length,j=-1,W=y.length,Y=-1,ue=p.length,ce=Lr($-W,0),he=re(ce+ue),Se=!E;++A<ce;)he[A]=l[A];for(var Ve=A;++Y<ue;)he[Ve+Y]=p[Y];for(;++j<W;)(Se||A<$)&&(he[Ve+y[j]]=l[A++]);return he}function gi(l,p){var y=-1,E=l.length;for(p||(p=re(E));++y<E;)p[y]=l[y];return p}function tu(l,p,y,E){var A=!y;y||(y={});for(var $=-1,j=p.length;++$<j;){var W=p[$],Y=E?E(y[W],l[W],W,y,l):e;Y===e&&(Y=l[W]),A?Lu(y,W,Y):ty(y,W,Y)}return y}function Lne(l,p){return tu(l,LD(l),p)}function Vne(l,p){return tu(l,P$(l),p)}function kx(l,p){return function(y,E){var A=yt(y)?Kg:ane,$=p?p():{};return A(y,l,nt(E,2),$)}}function Dp(l){return Nt(function(p,y){var E=-1,A=y.length,$=A>1?y[A-1]:e,j=A>2?y[2]:e;for($=l.length>3&&typeof $=="function"?(A--,$):e,j&&jo(y[0],y[1],j)&&($=A<3?e:$,A=1),p=_n(p);++E<A;){var W=y[E];W&&l(p,W,E,$)}return p})}function T$(l,p){return function(y,E){if(y==null)return y;if(!yi(y))return l(y,E);for(var A=y.length,$=p?A:-1,j=_n(y);(p?$--:++$<A)&&E(j[$],$,j)!==!1;);return y}}function _$(l){return function(p,y,E){for(var A=-1,$=_n(p),j=E(p),W=j.length;W--;){var Y=j[l?W:++A];if(y($[Y],Y,$)===!1)break}return p}}function Bne(l,p,y){var E=p&v,A=sy(l);function $(){var j=this&&this!==vr&&this instanceof $?A:l;return j.apply(E?y:this,arguments)}return $}function I$(l){return function(p){p=an(p);var y=xr(p)?pa(p):e,E=y?y[0]:p.charAt(0),A=y?Wc(y,1).join(""):p.slice(1);return E[l]()+A}}function Np(l){return function(p){return bd(T4(C4(p).replace(tD,"")),l,"")}}function sy(l){return function(){var p=arguments;switch(p.length){case 0:return new l;case 1:return new l(p[0]);case 2:return new l(p[0],p[1]);case 3:return new l(p[0],p[1],p[2]);case 4:return new l(p[0],p[1],p[2],p[3]);case 5:return new l(p[0],p[1],p[2],p[3],p[4]);case 6:return new l(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new l(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var y=Sp(l.prototype),E=l.apply(y,p);return Qn(E)?E:y}}function Une(l,p,y){var E=sy(l);function A(){for(var $=arguments.length,j=re($),W=$,Y=Ap(A);W--;)j[W]=arguments[W];var ue=$<3&&j[0]!==Y&&j[$-1]!==Y?[]:Ja(j,Y);if($-=ue.length,$<y)return R$(l,p,Ox,A.placeholder,e,j,ue,e,e,y-$);var ce=this&&this!==vr&&this instanceof A?E:l;return _o(ce,this,j)}return A}function S$(l){return function(p,y,E){var A=_n(p);if(!yi(p)){var $=nt(y,3);p=Xr(p),y=function(W){return $(A[W],W,A)}}var j=l(p,y,E);return j>-1?A[$?p[j]:j]:e}}function D$(l){return Bu(function(p){var y=p.length,E=y,A=Fs.prototype.thru;for(l&&p.reverse();E--;){var $=p[E];if(typeof $!="function")throw new Ms(o);if(A&&!j&&$x($)=="wrapper")var j=new Fs([],!0)}for(E=j?E:y;++E<y;){$=p[E];var W=$x($),Y=W=="wrapper"?PD($):e;Y&&BD(Y[0])&&Y[1]==(B|C|O|H)&&!Y[4].length&&Y[9]==1?j=j[$x(Y[0])].apply(j,Y[3]):j=$.length==1&&BD($)?j[W]():j.thru($)}return function(){var ue=arguments,ce=ue[0];if(j&&ue.length==1&&yt(ce))return j.plant(ce).value();for(var he=0,Se=y?p[he].apply(this,ue):ce;++he<y;)Se=p[he].call(this,Se);return Se}})}function Ox(l,p,y,E,A,$,j,W,Y,ue){var ce=p&B,he=p&v,Se=p&x,Ve=p&(C|S),ot=p&X,St=Se?e:sy(l);function it(){for(var Mt=arguments.length,Gt=re(Mt),Yi=Mt;Yi--;)Gt[Yi]=arguments[Yi];if(Ve)var zo=Ap(it),Zi=Tt(Gt,zo);if(E&&(Gt=E$(Gt,E,A,Ve)),$&&(Gt=C$(Gt,$,j,Ve)),Mt-=Zi,Ve&&Mt<ue){var wr=Ja(Gt,zo);return R$(l,p,Ox,it.placeholder,y,Gt,wr,W,Y,ue-Mt)}var ga=he?y:this,zu=Se?ga[l]:l;return Mt=Gt.length,W?Gt=are(Gt,W):ot&&Mt>1&&Gt.reverse(),ce&&Y<Mt&&(Gt.length=Y),this&&this!==vr&&this instanceof it&&(zu=St||sy(zu)),zu.apply(ga,Gt)}return it}function N$(l,p){return function(y,E){return mne(y,l,p(E),{})}}function Mx(l,p){return function(y,E){var A;if(y===e&&E===e)return p;if(y!==e&&(A=y),E!==e){if(A===e)return E;typeof y=="string"||typeof E=="string"?(y=Ki(y),E=Ki(E)):(y=h$(y),E=h$(E)),A=l(y,E)}return A}}function kD(l){return Bu(function(p){return p=On(p,ge(nt())),Nt(function(y){var E=this;return l(p,function(A){return _o(A,E,y)})})})}function Fx(l,p){p=p===e?" ":Ki(p);var y=p.length;if(y<2)return y?_D(p,l):p;var E=_D(p,wx(l/Cp(p)));return xr(p)?Wc(pa(E),0,l).join(""):E.slice(0,l)}function Gne(l,p,y,E){var A=p&v,$=sy(l);function j(){for(var W=-1,Y=arguments.length,ue=-1,ce=E.length,he=re(ce+Y),Se=this&&this!==vr&&this instanceof j?$:l;++ue<ce;)he[ue]=E[ue];for(;Y--;)he[ue++]=arguments[++W];return _o(Se,A?y:this,he)}return j}function A$(l){return function(p,y,E){return E&&typeof E!="number"&&jo(p,y,E)&&(y=E=e),p=ju(p),y===e?(y=p,p=0):y=ju(y),E=E===e?p<y?1:-1:ju(E),Sne(p,y,E,l)}}function Px(l){return function(p,y){return typeof p=="string"&&typeof y=="string"||(p=Vs(p),y=Vs(y)),l(p,y)}}function R$(l,p,y,E,A,$,j,W,Y,ue){var ce=p&C,he=ce?j:e,Se=ce?e:j,Ve=ce?$:e,ot=ce?e:$;p|=ce?O:F,p&=~(ce?F:O),p&b||(p&=~(v|x));var St=[l,p,A,Ve,he,ot,Se,W,Y,ue],it=y.apply(e,St);return BD(l)&&j$(it,St),it.placeholder=E,z$(it,l,p)}function OD(l){var p=$r[l];return function(y,E){if(y=Vs(y),E=E==null?0:Io(_t(E),292),E&&zP(y)){var A=(an(y)+"e").split("e"),$=p(A[0]+"e"+(+A[1]+E));return A=(an($)+"e").split("e"),+(A[0]+"e"+(+A[1]-E))}return p(y)}}var jne=_p&&1/wp(new _p([,-0]))[1]==Fe?function(l){return new _p(l)}:tN;function k$(l){return function(p){var y=So(p);return y==dn?Os(p):y==Yn?uD(p):ee(p,l(p))}}function Vu(l,p,y,E,A,$,j,W){var Y=p&x;if(!Y&&typeof l!="function")throw new Ms(o);var ue=E?E.length:0;if(ue||(p&=~(O|F),E=A=e),j=j===e?j:Lr(_t(j),0),W=W===e?W:_t(W),ue-=A?A.length:0,p&F){var ce=E,he=A;E=A=e}var Se=Y?e:PD(l),Ve=[l,p,y,E,A,ce,he,$,j,W];if(Se&&ore(Ve,Se),l=Ve[0],p=Ve[1],y=Ve[2],E=Ve[3],A=Ve[4],W=Ve[9]=Ve[9]===e?Y?0:l.length:Lr(Ve[9]-ue,0),!W&&p&(C|S)&&(p&=~(C|S)),!p||p==v)var ot=Bne(l,p,y);else p==C||p==S?ot=Une(l,p,W):(p==O||p==(v|O))&&!A.length?ot=Gne(l,p,y,E):ot=Ox.apply(e,Ve);var St=Se?f$:j$;return z$(St(ot,Ve),l,p)}function O$(l,p,y,E){return l===e||ma(l,Tp[y])&&!pn.call(E,y)?p:l}function M$(l,p,y,E,A,$){return Qn(l)&&Qn(p)&&($.set(p,l),Nx(l,p,e,M$,$),$.delete(p)),l}function zne(l){return cy(l)?e:l}function F$(l,p,y,E,A,$){var j=y&h,W=l.length,Y=p.length;if(W!=Y&&!(j&&Y>W))return!1;var ue=$.get(l),ce=$.get(p);if(ue&&ce)return ue==p&&ce==l;var he=-1,Se=!0,Ve=y&m?new Cd:e;for($.set(l,p),$.set(p,l);++he<W;){var ot=l[he],St=p[he];if(E)var it=j?E(St,ot,he,p,l,$):E(ot,St,he,l,p,$);if(it!==e){if(it)continue;Se=!1;break}if(Ve){if(!Xg(p,function(Mt,Gt){if(!Pe(Ve,Gt)&&(ot===Mt||A(ot,Mt,y,E,$)))return Ve.push(Gt)})){Se=!1;break}}else if(!(ot===St||A(ot,St,y,E,$))){Se=!1;break}}return $.delete(l),$.delete(p),Se}function Hne(l,p,y,E,A,$,j){switch(y){case Co:if(l.byteLength!=p.byteLength||l.byteOffset!=p.byteOffset)return!1;l=l.buffer,p=p.buffer;case uo:return!(l.byteLength!=p.byteLength||!$(new yx(l),new yx(p)));case dt:case pt:case gt:return ma(+l,+p);case En:return l.name==p.name&&l.message==p.message;case Eo:case Kr:return l==p+"";case dn:var W=Os;case Yn:var Y=E&h;if(W||(W=wp),l.size!=p.size&&!Y)return!1;var ue=j.get(l);if(ue)return ue==p;E|=m,j.set(l,p);var ce=F$(W(l),W(p),E,A,$,j);return j.delete(l),ce;case Ir:if(ey)return ey.call(l)==ey.call(p)}return!1}function Wne(l,p,y,E,A,$){var j=y&h,W=MD(l),Y=W.length,ue=MD(p),ce=ue.length;if(Y!=ce&&!j)return!1;for(var he=Y;he--;){var Se=W[he];if(!(j?Se in p:pn.call(p,Se)))return!1}var Ve=$.get(l),ot=$.get(p);if(Ve&&ot)return Ve==p&&ot==l;var St=!0;$.set(l,p),$.set(p,l);for(var it=j;++he<Y;){Se=W[he];var Mt=l[Se],Gt=p[Se];if(E)var Yi=j?E(Gt,Mt,Se,p,l,$):E(Mt,Gt,Se,l,p,$);if(!(Yi===e?Mt===Gt||A(Mt,Gt,y,E,$):Yi)){St=!1;break}it||(it=Se=="constructor")}if(St&&!it){var zo=l.constructor,Zi=p.constructor;zo!=Zi&&"constructor"in l&&"constructor"in p&&!(typeof zo=="function"&&zo instanceof zo&&typeof Zi=="function"&&Zi instanceof Zi)&&(St=!1)}return $.delete(l),$.delete(p),St}function Bu(l){return GD(U$(l,e,Y$),l+"")}function MD(l){return t$(l,Xr,LD)}function FD(l){return t$(l,vi,P$)}var PD=Cx?function(l){return Cx.get(l)}:tN;function $x(l){for(var p=l.name+"",y=Ip[p],E=pn.call(Ip,p)?y.length:0;E--;){var A=y[E],$=A.func;if($==null||$==l)return A.name}return p}function Ap(l){var p=pn.call(P,"placeholder")?P:l;return p.placeholder}function nt(){var l=P.iteratee||JD;return l=l===JD?o$:l,arguments.length?l(arguments[0],arguments[1]):l}function Lx(l,p){var y=l.__data__;return ere(p)?y[typeof p=="string"?"string":"hash"]:y.map}function $D(l){for(var p=Xr(l),y=p.length;y--;){var E=p[y],A=l[E];p[y]=[E,A,V$(A)]}return p}function Id(l,p){var y=mi(l,p);return r$(y)?y:e}function qne(l){var p=pn.call(l,wd),y=l[wd];try{l[wd]=e;var E=!0}catch{}var A=mx.call(l);return E&&(p?l[wd]=y:delete l[wd]),A}var LD=dD?function(l){return l==null?[]:(l=_n(l),Za(dD(l),function(p){return GP.call(l,p)}))}:nN,P$=dD?function(l){for(var p=[];l;)Qa(p,LD(l)),l=vx(l);return p}:nN,So=Go;(fD&&So(new fD(new ArrayBuffer(1)))!=Co||Zg&&So(new Zg)!=dn||pD&&So(pD.resolve())!=io||_p&&So(new _p)!=Yn||Qg&&So(new Qg)!=ao)&&(So=function(l){var p=Go(l),y=p==fn?l.constructor:e,E=y?Sd(y):"";if(E)switch(E){case Nte:return Co;case Ate:return dn;case Rte:return io;case kte:return Yn;case Ote:return ao}return p});function Kne(l,p,y){for(var E=-1,A=y.length;++E<A;){var $=y[E],j=$.size;switch($.type){case"drop":l+=j;break;case"dropRight":p-=j;break;case"take":p=Io(p,l+j);break;case"takeRight":l=Lr(l,p-j);break}}return{start:l,end:p}}function Xne(l){var p=l.match(Mu);return p?p[1].split(Y0):[]}function $$(l,p,y){p=Hc(p,l);for(var E=-1,A=p.length,$=!1;++E<A;){var j=nu(p[E]);if(!($=l!=null&&y(l,j)))break;l=l[j]}return $||++E!=A?$:(A=l==null?0:l.length,!!A&&Hx(A)&&Uu(j,A)&&(yt(l)||Dd(l)))}function Yne(l){var p=l.length,y=new l.constructor(p);return p&&typeof l[0]=="string"&&pn.call(l,"index")&&(y.index=l.index,y.input=l.input),y}function L$(l){return typeof l.constructor=="function"&&!ay(l)?Sp(vx(l)):{}}function Zne(l,p,y){var E=l.constructor;switch(p){case uo:return RD(l);case dt:case pt:return new E(+l);case Co:return Mne(l,y);case As:case ca:case la:case To:case Fc:case Ha:case da:case ld:case ip:return b$(l,y);case dn:return new E;case gt:case Kr:return new E(l);case Eo:return Fne(l);case Yn:return new E;case Ir:return Pne(l)}}function Qne(l,p){var y=p.length;if(!y)return l;var E=y-1;return p[E]=(y>1?"& ":"")+p[E],p=p.join(y>2?", ":" "),l.replace(fa,`{
/* [wrapped with `+p+`] */
`)}function Jne(l){return yt(l)||Dd(l)||!!(jP&&l&&l[jP])}function Uu(l,p){var y=typeof l;return p=p??Dt,!!p&&(y=="number"||y!="symbol"&&Eg.test(l))&&l>-1&&l%1==0&&l<p}function jo(l,p,y){if(!Qn(y))return!1;var E=typeof p;return(E=="number"?yi(y)&&Uu(p,y.length):E=="string"&&p in y)?ma(y[p],l):!1}function VD(l,p){if(yt(l))return!1;var y=typeof l;return y=="number"||y=="symbol"||y=="boolean"||l==null||Xi(l)?!0:X0.test(l)||!xg.test(l)||p!=null&&l in _n(p)}function ere(l){var p=typeof l;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?l!=="__proto__":l===null}function BD(l){var p=$x(l),y=P[p];if(typeof y!="function"||!(p in Pt.prototype))return!1;if(l===y)return!0;var E=PD(y);return!!E&&l===E[0]}function tre(l){return!!VP&&VP in l}var nre=px?Gu:rN;function ay(l){var p=l&&l.constructor,y=typeof p=="function"&&p.prototype||Tp;return l===y}function V$(l){return l===l&&!Qn(l)}function B$(l,p){return function(y){return y==null?!1:y[l]===p&&(p!==e||l in _n(y))}}function rre(l){var p=jx(l,function(E){return y.size===a&&y.clear(),E}),y=p.cache;return p}function ore(l,p){var y=l[1],E=p[1],A=y|E,$=A<(v|x|B),j=E==B&&y==C||E==B&&y==H&&l[7].length<=p[8]||E==(B|H)&&p[7].length<=p[8]&&y==C;if(!($||j))return l;E&v&&(l[2]=p[2],A|=y&v?0:b);var W=p[3];if(W){var Y=l[3];l[3]=Y?E$(Y,W,p[4]):W,l[4]=Y?Ja(l[3],u):p[4]}return W=p[5],W&&(Y=l[5],l[5]=Y?C$(Y,W,p[6]):W,l[6]=Y?Ja(l[5],u):p[6]),W=p[7],W&&(l[7]=W),E&B&&(l[8]=l[8]==null?p[8]:Io(l[8],p[8])),l[9]==null&&(l[9]=p[9]),l[0]=p[0],l[1]=A,l}function ire(l){var p=[];if(l!=null)for(var y in _n(l))p.push(y);return p}function sre(l){return mx.call(l)}function U$(l,p,y){return p=Lr(p===e?l.length-1:p,0),function(){for(var E=arguments,A=-1,$=Lr(E.length-p,0),j=re($);++A<$;)j[A]=E[p+A];A=-1;for(var W=re(p+1);++A<p;)W[A]=E[A];return W[p]=y(j),_o(l,this,W)}}function G$(l,p){return p.length<2?l:_d(l,$s(p,0,-1))}function are(l,p){for(var y=l.length,E=Io(p.length,y),A=gi(l);E--;){var $=p[E];l[E]=Uu($,y)?A[$]:e}return l}function UD(l,p){if(!(p==="constructor"&&typeof l[p]=="function")&&p!="__proto__")return l[p]}var j$=H$(f$),uy=Ete||function(l,p){return vr.setTimeout(l,p)},GD=H$(Ane);function z$(l,p,y){var E=p+"";return GD(l,Qne(E,ure(Xne(E),y)))}function H$(l){var p=0,y=0;return function(){var E=Ite(),A=ae-(E-y);if(y=E,A>0){if(++p>=J)return arguments[0]}else p=0;return l.apply(e,arguments)}}function Vx(l,p){var y=-1,E=l.length,A=E-1;for(p=p===e?E:p;++y<p;){var $=TD(y,A),j=l[$];l[$]=l[y],l[y]=j}return l.length=p,l}var W$=rre(function(l){var p=[];return l.charCodeAt(0)===46&&p.push(""),l.replace(sp,function(y,E,A,$){p.push(A?$.replace(bg,"$1"):E||y)}),p});function nu(l){if(typeof l=="string"||Xi(l))return l;var p=l+"";return p=="0"&&1/l==-Fe?"-0":p}function Sd(l){if(l!=null){try{return hx.call(l)}catch{}try{return l+""}catch{}}return""}function ure(l,p){return Uo(De,function(y){var E="_."+y[0];p&y[1]&&!yp(l,E)&&l.push(E)}),l.sort()}function q$(l){if(l instanceof Pt)return l.clone();var p=new Fs(l.__wrapped__,l.__chain__);return p.__actions__=gi(l.__actions__),p.__index__=l.__index__,p.__values__=l.__values__,p}function cre(l,p,y){(y?jo(l,p,y):p===e)?p=1:p=Lr(_t(p),0);var E=l==null?0:l.length;if(!E||p<1)return[];for(var A=0,$=0,j=re(wx(E/p));A<E;)j[$++]=$s(l,A,A+=p);return j}function lre(l){for(var p=-1,y=l==null?0:l.length,E=0,A=[];++p<y;){var $=l[p];$&&(A[E++]=$)}return A}function dre(){var l=arguments.length;if(!l)return[];for(var p=re(l-1),y=arguments[0],E=l;E--;)p[E-1]=arguments[E];return Qa(yt(y)?gi(y):[y],lo(p,1))}var fre=Nt(function(l,p){return br(l)?ny(l,lo(p,1,br,!0)):[]}),pre=Nt(function(l,p){var y=Ls(p);return br(y)&&(y=e),br(l)?ny(l,lo(p,1,br,!0),nt(y,2)):[]}),hre=Nt(function(l,p){var y=Ls(p);return br(y)&&(y=e),br(l)?ny(l,lo(p,1,br,!0),e,y):[]});function mre(l,p,y){var E=l==null?0:l.length;return E?(p=y||p===e?1:_t(p),$s(l,p<0?0:p,E)):[]}function gre(l,p,y){var E=l==null?0:l.length;return E?(p=y||p===e?1:_t(p),p=E-p,$s(l,0,p<0?0:p)):[]}function yre(l,p){return l&&l.length?Rx(l,nt(p,3),!0,!0):[]}function vre(l,p){return l&&l.length?Rx(l,nt(p,3),!0):[]}function xre(l,p,y,E){var A=l==null?0:l.length;return A?(y&&typeof y!="number"&&jo(l,p,y)&&(y=0,E=A),dne(l,p,y,E)):[]}function K$(l,p,y){var E=l==null?0:l.length;if(!E)return-1;var A=y==null?0:_t(y);return A<0&&(A=Lr(E+A,0)),bp(l,nt(p,3),A)}function X$(l,p,y){var E=l==null?0:l.length;if(!E)return-1;var A=E-1;return y!==e&&(A=_t(y),A=y<0?Lr(E+A,0):Io(A,E-1)),bp(l,nt(p,3),A,!0)}function Y$(l){var p=l==null?0:l.length;return p?lo(l,1):[]}function bre(l){var p=l==null?0:l.length;return p?lo(l,Fe):[]}function wre(l,p){var y=l==null?0:l.length;return y?(p=p===e?1:_t(p),lo(l,p)):[]}function Ere(l){for(var p=-1,y=l==null?0:l.length,E={};++p<y;){var A=l[p];E[A[0]]=A[1]}return E}function Z$(l){return l&&l.length?l[0]:e}function Cre(l,p,y){var E=l==null?0:l.length;if(!E)return-1;var A=y==null?0:_t(y);return A<0&&(A=Lr(E+A,0)),Fu(l,p,A)}function Tre(l){var p=l==null?0:l.length;return p?$s(l,0,-1):[]}var _re=Nt(function(l){var p=On(l,ND);return p.length&&p[0]===l[0]?xD(p):[]}),Ire=Nt(function(l){var p=Ls(l),y=On(l,ND);return p===Ls(y)?p=e:y.pop(),y.length&&y[0]===l[0]?xD(y,nt(p,2)):[]}),Sre=Nt(function(l){var p=Ls(l),y=On(l,ND);return p=typeof p=="function"?p:e,p&&y.pop(),y.length&&y[0]===l[0]?xD(y,e,p):[]});function Dre(l,p){return l==null?"":Tte.call(l,p)}function Ls(l){var p=l==null?0:l.length;return p?l[p-1]:e}function Nre(l,p,y){var E=l==null?0:l.length;if(!E)return-1;var A=E;return y!==e&&(A=_t(y),A=A<0?Lr(E+A,0):Io(A,E-1)),p===p?Ep(l,p,A):bp(l,g,A,!0)}function Are(l,p){return l&&l.length?u$(l,_t(p)):e}var Rre=Nt(Q$);function Q$(l,p){return l&&l.length&&p&&p.length?CD(l,p):l}function kre(l,p,y){return l&&l.length&&p&&p.length?CD(l,p,nt(y,2)):l}function Ore(l,p,y){return l&&l.length&&p&&p.length?CD(l,p,e,y):l}var Mre=Bu(function(l,p){var y=l==null?0:l.length,E=mD(l,p);return d$(l,On(p,function(A){return Uu(A,y)?+A:A}).sort(w$)),E});function Fre(l,p){var y=[];if(!(l&&l.length))return y;var E=-1,A=[],$=l.length;for(p=nt(p,3);++E<$;){var j=l[E];p(j,E,l)&&(y.push(j),A.push(E))}return d$(l,A),y}function jD(l){return l==null?l:Dte.call(l)}function Pre(l,p,y){var E=l==null?0:l.length;return E?(y&&typeof y!="number"&&jo(l,p,y)?(p=0,y=E):(p=p==null?0:_t(p),y=y===e?E:_t(y)),$s(l,p,y)):[]}function $re(l,p){return Ax(l,p)}function Lre(l,p,y){return ID(l,p,nt(y,2))}function Vre(l,p){var y=l==null?0:l.length;if(y){var E=Ax(l,p);if(E<y&&ma(l[E],p))return E}return-1}function Bre(l,p){return Ax(l,p,!0)}function Ure(l,p,y){return ID(l,p,nt(y,2),!0)}function Gre(l,p){var y=l==null?0:l.length;if(y){var E=Ax(l,p,!0)-1;if(ma(l[E],p))return E}return-1}function jre(l){return l&&l.length?p$(l):[]}function zre(l,p){return l&&l.length?p$(l,nt(p,2)):[]}function Hre(l){var p=l==null?0:l.length;return p?$s(l,1,p):[]}function Wre(l,p,y){return l&&l.length?(p=y||p===e?1:_t(p),$s(l,0,p<0?0:p)):[]}function qre(l,p,y){var E=l==null?0:l.length;return E?(p=y||p===e?1:_t(p),p=E-p,$s(l,p<0?0:p,E)):[]}function Kre(l,p){return l&&l.length?Rx(l,nt(p,3),!1,!0):[]}function Xre(l,p){return l&&l.length?Rx(l,nt(p,3)):[]}var Yre=Nt(function(l){return zc(lo(l,1,br,!0))}),Zre=Nt(function(l){var p=Ls(l);return br(p)&&(p=e),zc(lo(l,1,br,!0),nt(p,2))}),Qre=Nt(function(l){var p=Ls(l);return p=typeof p=="function"?p:e,zc(lo(l,1,br,!0),e,p)});function Jre(l){return l&&l.length?zc(l):[]}function eoe(l,p){return l&&l.length?zc(l,nt(p,2)):[]}function toe(l,p){return p=typeof p=="function"?p:e,l&&l.length?zc(l,e,p):[]}function zD(l){if(!(l&&l.length))return[];var p=0;return l=Za(l,function(y){if(br(y))return p=Lr(y.length,p),!0}),q(p,function(y){return On(l,I(y))})}function J$(l,p){if(!(l&&l.length))return[];var y=zD(l);return p==null?y:On(y,function(E){return _o(p,e,E)})}var noe=Nt(function(l,p){return br(l)?ny(l,p):[]}),roe=Nt(function(l){return DD(Za(l,br))}),ooe=Nt(function(l){var p=Ls(l);return br(p)&&(p=e),DD(Za(l,br),nt(p,2))}),ioe=Nt(function(l){var p=Ls(l);return p=typeof p=="function"?p:e,DD(Za(l,br),e,p)}),soe=Nt(zD);function aoe(l,p){return y$(l||[],p||[],ty)}function uoe(l,p){return y$(l||[],p||[],iy)}var coe=Nt(function(l){var p=l.length,y=p>1?l[p-1]:e;return y=typeof y=="function"?(l.pop(),y):e,J$(l,y)});function e4(l){var p=P(l);return p.__chain__=!0,p}function loe(l,p){return p(l),l}function Bx(l,p){return p(l)}var doe=Bu(function(l){var p=l.length,y=p?l[0]:0,E=this.__wrapped__,A=function($){return mD($,l)};return p>1||this.__actions__.length||!(E instanceof Pt)||!Uu(y)?this.thru(A):(E=E.slice(y,+y+(p?1:0)),E.__actions__.push({func:Bx,args:[A],thisArg:e}),new Fs(E,this.__chain__).thru(function($){return p&&!$.length&&$.push(e),$}))});function foe(){return e4(this)}function poe(){return new Fs(this.value(),this.__chain__)}function hoe(){this.__values__===e&&(this.__values__=h4(this.value()));var l=this.__index__>=this.__values__.length,p=l?e:this.__values__[this.__index__++];return{done:l,value:p}}function moe(){return this}function goe(l){for(var p,y=this;y instanceof _x;){var E=q$(y);E.__index__=0,E.__values__=e,p?A.__wrapped__=E:p=E;var A=E;y=y.__wrapped__}return A.__wrapped__=l,p}function yoe(){var l=this.__wrapped__;if(l instanceof Pt){var p=l;return this.__actions__.length&&(p=new Pt(this)),p=p.reverse(),p.__actions__.push({func:Bx,args:[jD],thisArg:e}),new Fs(p,this.__chain__)}return this.thru(jD)}function voe(){return g$(this.__wrapped__,this.__actions__)}var xoe=kx(function(l,p,y){pn.call(l,y)?++l[y]:Lu(l,y,1)});function boe(l,p,y){var E=yt(l)?ux:lne;return y&&jo(l,p,y)&&(p=e),E(l,nt(p,3))}function woe(l,p){var y=yt(l)?Za:JP;return y(l,nt(p,3))}var Eoe=S$(K$),Coe=S$(X$);function Toe(l,p){return lo(Ux(l,p),1)}function _oe(l,p){return lo(Ux(l,p),Fe)}function Ioe(l,p,y){return y=y===e?1:_t(y),lo(Ux(l,p),y)}function t4(l,p){var y=yt(l)?Uo:jc;return y(l,nt(p,3))}function n4(l,p){var y=yt(l)?oD:QP;return y(l,nt(p,3))}var Soe=kx(function(l,p,y){pn.call(l,y)?l[y].push(p):Lu(l,y,[p])});function Doe(l,p,y,E){l=yi(l)?l:kp(l),y=y&&!E?_t(y):0;var A=l.length;return y<0&&(y=Lr(A+y,0)),Wx(l)?y<=A&&l.indexOf(p,y)>-1:!!A&&Fu(l,p,y)>-1}var Noe=Nt(function(l,p,y){var E=-1,A=typeof p=="function",$=yi(l)?re(l.length):[];return jc(l,function(j){$[++E]=A?_o(p,j,y):ry(j,p,y)}),$}),Aoe=kx(function(l,p,y){Lu(l,y,p)});function Ux(l,p){var y=yt(l)?On:i$;return y(l,nt(p,3))}function Roe(l,p,y,E){return l==null?[]:(yt(p)||(p=p==null?[]:[p]),y=E?e:y,yt(y)||(y=y==null?[]:[y]),c$(l,p,y))}var koe=kx(function(l,p,y){l[y?0:1].push(p)},function(){return[[],[]]});function Ooe(l,p,y){var E=yt(l)?bd:L,A=arguments.length<3;return E(l,nt(p,4),y,A,jc)}function Moe(l,p,y){var E=yt(l)?iD:L,A=arguments.length<3;return E(l,nt(p,4),y,A,QP)}function Foe(l,p){var y=yt(l)?Za:JP;return y(l,zx(nt(p,3)))}function Poe(l){var p=yt(l)?KP:Dne;return p(l)}function $oe(l,p,y){(y?jo(l,p,y):p===e)?p=1:p=_t(p);var E=yt(l)?ine:Nne;return E(l,p)}function Loe(l){var p=yt(l)?sne:Rne;return p(l)}function Voe(l){if(l==null)return 0;if(yi(l))return Wx(l)?Cp(l):l.length;var p=So(l);return p==dn||p==Yn?l.size:wD(l).length}function Boe(l,p,y){var E=yt(l)?Xg:kne;return y&&jo(l,p,y)&&(p=e),E(l,nt(p,3))}var Uoe=Nt(function(l,p){if(l==null)return[];var y=p.length;return y>1&&jo(l,p[0],p[1])?p=[]:y>2&&jo(p[0],p[1],p[2])&&(p=[p[0]]),c$(l,lo(p,1),[])}),Gx=wte||function(){return vr.Date.now()};function Goe(l,p){if(typeof p!="function")throw new Ms(o);return l=_t(l),function(){if(--l<1)return p.apply(this,arguments)}}function r4(l,p,y){return p=y?e:p,p=l&&p==null?l.length:p,Vu(l,B,e,e,e,e,p)}function o4(l,p){var y;if(typeof p!="function")throw new Ms(o);return l=_t(l),function(){return--l>0&&(y=p.apply(this,arguments)),l<=1&&(p=e),y}}var HD=Nt(function(l,p,y){var E=v;if(y.length){var A=Ja(y,Ap(HD));E|=O}return Vu(l,E,p,y,A)}),i4=Nt(function(l,p,y){var E=v|x;if(y.length){var A=Ja(y,Ap(i4));E|=O}return Vu(p,E,l,y,A)});function s4(l,p,y){p=y?e:p;var E=Vu(l,C,e,e,e,e,e,p);return E.placeholder=s4.placeholder,E}function a4(l,p,y){p=y?e:p;var E=Vu(l,S,e,e,e,e,e,p);return E.placeholder=a4.placeholder,E}function u4(l,p,y){var E,A,$,j,W,Y,ue=0,ce=!1,he=!1,Se=!0;if(typeof l!="function")throw new Ms(o);p=Vs(p)||0,Qn(y)&&(ce=!!y.leading,he="maxWait"in y,$=he?Lr(Vs(y.maxWait)||0,p):$,Se="trailing"in y?!!y.trailing:Se);function Ve(wr){var ga=E,zu=A;return E=A=e,ue=wr,j=l.apply(zu,ga),j}function ot(wr){return ue=wr,W=uy(Mt,p),ce?Ve(wr):j}function St(wr){var ga=wr-Y,zu=wr-ue,S4=p-ga;return he?Io(S4,$-zu):S4}function it(wr){var ga=wr-Y,zu=wr-ue;return Y===e||ga>=p||ga<0||he&&zu>=$}function Mt(){var wr=Gx();if(it(wr))return Gt(wr);W=uy(Mt,St(wr))}function Gt(wr){return W=e,Se&&E?Ve(wr):(E=A=e,j)}function Yi(){W!==e&&v$(W),ue=0,E=Y=A=W=e}function zo(){return W===e?j:Gt(Gx())}function Zi(){var wr=Gx(),ga=it(wr);if(E=arguments,A=this,Y=wr,ga){if(W===e)return ot(Y);if(he)return v$(W),W=uy(Mt,p),Ve(Y)}return W===e&&(W=uy(Mt,p)),j}return Zi.cancel=Yi,Zi.flush=zo,Zi}var joe=Nt(function(l,p){return ZP(l,1,p)}),zoe=Nt(function(l,p,y){return ZP(l,Vs(p)||0,y)});function Hoe(l){return Vu(l,X)}function jx(l,p){if(typeof l!="function"||p!=null&&typeof p!="function")throw new Ms(o);var y=function(){var E=arguments,A=p?p.apply(this,E):E[0],$=y.cache;if($.has(A))return $.get(A);var j=l.apply(this,E);return y.cache=$.set(A,j)||$,j};return y.cache=new(jx.Cache||$u),y}jx.Cache=$u;function zx(l){if(typeof l!="function")throw new Ms(o);return function(){var p=arguments;switch(p.length){case 0:return!l.call(this);case 1:return!l.call(this,p[0]);case 2:return!l.call(this,p[0],p[1]);case 3:return!l.call(this,p[0],p[1],p[2])}return!l.apply(this,p)}}function Woe(l){return o4(2,l)}var qoe=One(function(l,p){p=p.length==1&&yt(p[0])?On(p[0],ge(nt())):On(lo(p,1),ge(nt()));var y=p.length;return Nt(function(E){for(var A=-1,$=Io(E.length,y);++A<$;)E[A]=p[A].call(this,E[A]);return _o(l,this,E)})}),WD=Nt(function(l,p){var y=Ja(p,Ap(WD));return Vu(l,O,e,p,y)}),c4=Nt(function(l,p){var y=Ja(p,Ap(c4));return Vu(l,F,e,p,y)}),Koe=Bu(function(l,p){return Vu(l,H,e,e,e,p)});function Xoe(l,p){if(typeof l!="function")throw new Ms(o);return p=p===e?p:_t(p),Nt(l,p)}function Yoe(l,p){if(typeof l!="function")throw new Ms(o);return p=p==null?0:Lr(_t(p),0),Nt(function(y){var E=y[p],A=Wc(y,0,p);return E&&Qa(A,E),_o(l,this,A)})}function Zoe(l,p,y){var E=!0,A=!0;if(typeof l!="function")throw new Ms(o);return Qn(y)&&(E="leading"in y?!!y.leading:E,A="trailing"in y?!!y.trailing:A),u4(l,p,{leading:E,maxWait:p,trailing:A})}function Qoe(l){return r4(l,1)}function Joe(l,p){return WD(AD(p),l)}function eie(){if(!arguments.length)return[];var l=arguments[0];return yt(l)?l:[l]}function tie(l){return Ps(l,f)}function nie(l,p){return p=typeof p=="function"?p:e,Ps(l,f,p)}function rie(l){return Ps(l,c|f)}function oie(l,p){return p=typeof p=="function"?p:e,Ps(l,c|f,p)}function iie(l,p){return p==null||YP(l,p,Xr(p))}function ma(l,p){return l===p||l!==l&&p!==p}var sie=Px(vD),aie=Px(function(l,p){return l>=p}),Dd=n$(function(){return arguments}())?n$:function(l){return ar(l)&&pn.call(l,"callee")&&!GP.call(l,"callee")},yt=re.isArray,uie=xd?ge(xd):gne;function yi(l){return l!=null&&Hx(l.length)&&!Gu(l)}function br(l){return ar(l)&&yi(l)}function cie(l){return l===!0||l===!1||ar(l)&&Go(l)==dt}var qc=Cte||rN,lie=zg?ge(zg):yne;function die(l){return ar(l)&&l.nodeType===1&&!cy(l)}function fie(l){if(l==null)return!0;if(yi(l)&&(yt(l)||typeof l=="string"||typeof l.splice=="function"||qc(l)||Rp(l)||Dd(l)))return!l.length;var p=So(l);if(p==dn||p==Yn)return!l.size;if(ay(l))return!wD(l).length;for(var y in l)if(pn.call(l,y))return!1;return!0}function pie(l,p){return oy(l,p)}function hie(l,p,y){y=typeof y=="function"?y:e;var E=y?y(l,p):e;return E===e?oy(l,p,e,y):!!E}function qD(l){if(!ar(l))return!1;var p=Go(l);return p==En||p==Hn||typeof l.message=="string"&&typeof l.name=="string"&&!cy(l)}function mie(l){return typeof l=="number"&&zP(l)}function Gu(l){if(!Qn(l))return!1;var p=Go(l);return p==Yt||p==gn||p==be||p==wo}function l4(l){return typeof l=="number"&&l==_t(l)}function Hx(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=Dt}function Qn(l){var p=typeof l;return l!=null&&(p=="object"||p=="function")}function ar(l){return l!=null&&typeof l=="object"}var d4=ax?ge(ax):xne;function gie(l,p){return l===p||bD(l,p,$D(p))}function yie(l,p,y){return y=typeof y=="function"?y:e,bD(l,p,$D(p),y)}function vie(l){return f4(l)&&l!=+l}function xie(l){if(nre(l))throw new ht(r);return r$(l)}function bie(l){return l===null}function wie(l){return l==null}function f4(l){return typeof l=="number"||ar(l)&&Go(l)==gt}function cy(l){if(!ar(l)||Go(l)!=fn)return!1;var p=vx(l);if(p===null)return!0;var y=pn.call(p,"constructor")&&p.constructor;return typeof y=="function"&&y instanceof y&&hx.call(y)==yte}var KD=Hg?ge(Hg):bne;function Eie(l){return l4(l)&&l>=-Dt&&l<=Dt}var p4=Wg?ge(Wg):wne;function Wx(l){return typeof l=="string"||!yt(l)&&ar(l)&&Go(l)==Kr}function Xi(l){return typeof l=="symbol"||ar(l)&&Go(l)==Ir}var Rp=qg?ge(qg):Ene;function Cie(l){return l===e}function Tie(l){return ar(l)&&So(l)==ao}function _ie(l){return ar(l)&&Go(l)==Mr}var Iie=Px(ED),Sie=Px(function(l,p){return l<=p});function h4(l){if(!l)return[];if(yi(l))return Wx(l)?pa(l):gi(l);if(Yg&&l[Yg])return Pr(l[Yg]());var p=So(l),y=p==dn?Os:p==Yn?wp:kp;return y(l)}function ju(l){if(!l)return l===0?l:0;if(l=Vs(l),l===Fe||l===-Fe){var p=l<0?-1:1;return p*oe}return l===l?l:0}function _t(l){var p=ju(l),y=p%1;return p===p?y?p-y:p:0}function m4(l){return l?Td(_t(l),0,ie):0}function Vs(l){if(typeof l=="number")return l;if(Xi(l))return pe;if(Qn(l)){var p=typeof l.valueOf=="function"?l.valueOf():l;l=Qn(p)?p+"":p}if(typeof l!="string")return l===0?l:+l;l=me(l);var y=ap.test(l);return y||Z0.test(l)?sx(l.slice(2),y?2:8):wg.test(l)?pe:+l}function g4(l){return tu(l,vi(l))}function Die(l){return l?Td(_t(l),-Dt,Dt):l===0?l:0}function an(l){return l==null?"":Ki(l)}var Nie=Dp(function(l,p){if(ay(p)||yi(p)){tu(p,Xr(p),l);return}for(var y in p)pn.call(p,y)&&ty(l,y,p[y])}),y4=Dp(function(l,p){tu(p,vi(p),l)}),qx=Dp(function(l,p,y,E){tu(p,vi(p),l,E)}),Aie=Dp(function(l,p,y,E){tu(p,Xr(p),l,E)}),Rie=Bu(mD);function kie(l,p){var y=Sp(l);return p==null?y:XP(y,p)}var Oie=Nt(function(l,p){l=_n(l);var y=-1,E=p.length,A=E>2?p[2]:e;for(A&&jo(p[0],p[1],A)&&(E=1);++y<E;)for(var $=p[y],j=vi($),W=-1,Y=j.length;++W<Y;){var ue=j[W],ce=l[ue];(ce===e||ma(ce,Tp[ue])&&!pn.call(l,ue))&&(l[ue]=$[ue])}return l}),Mie=Nt(function(l){return l.push(e,M$),_o(v4,e,l)});function Fie(l,p){return cx(l,nt(p,3),eu)}function Pie(l,p){return cx(l,nt(p,3),yD)}function $ie(l,p){return l==null?l:gD(l,nt(p,3),vi)}function Lie(l,p){return l==null?l:e$(l,nt(p,3),vi)}function Vie(l,p){return l&&eu(l,nt(p,3))}function Bie(l,p){return l&&yD(l,nt(p,3))}function Uie(l){return l==null?[]:Dx(l,Xr(l))}function Gie(l){return l==null?[]:Dx(l,vi(l))}function XD(l,p,y){var E=l==null?e:_d(l,p);return E===e?y:E}function jie(l,p){return l!=null&&$$(l,p,fne)}function YD(l,p){return l!=null&&$$(l,p,pne)}var zie=N$(function(l,p,y){p!=null&&typeof p.toString!="function"&&(p=mx.call(p)),l[p]=y},QD(xi)),Hie=N$(function(l,p,y){p!=null&&typeof p.toString!="function"&&(p=mx.call(p)),pn.call(l,p)?l[p].push(y):l[p]=[y]},nt),Wie=Nt(ry);function Xr(l){return yi(l)?qP(l):wD(l)}function vi(l){return yi(l)?qP(l,!0):Cne(l)}function qie(l,p){var y={};return p=nt(p,3),eu(l,function(E,A,$){Lu(y,p(E,A,$),E)}),y}function Kie(l,p){var y={};return p=nt(p,3),eu(l,function(E,A,$){Lu(y,A,p(E,A,$))}),y}var Xie=Dp(function(l,p,y){Nx(l,p,y)}),v4=Dp(function(l,p,y,E){Nx(l,p,y,E)}),Yie=Bu(function(l,p){var y={};if(l==null)return y;var E=!1;p=On(p,function($){return $=Hc($,l),E||(E=$.length>1),$}),tu(l,FD(l),y),E&&(y=Ps(y,c|d|f,zne));for(var A=p.length;A--;)SD(y,p[A]);return y});function Zie(l,p){return x4(l,zx(nt(p)))}var Qie=Bu(function(l,p){return l==null?{}:_ne(l,p)});function x4(l,p){if(l==null)return{};var y=On(FD(l),function(E){return[E]});return p=nt(p),l$(l,y,function(E,A){return p(E,A[0])})}function Jie(l,p,y){p=Hc(p,l);var E=-1,A=p.length;for(A||(A=1,l=e);++E<A;){var $=l==null?e:l[nu(p[E])];$===e&&(E=A,$=y),l=Gu($)?$.call(l):$}return l}function ese(l,p,y){return l==null?l:iy(l,p,y)}function tse(l,p,y,E){return E=typeof E=="function"?E:e,l==null?l:iy(l,p,y,E)}var b4=k$(Xr),w4=k$(vi);function nse(l,p,y){var E=yt(l),A=E||qc(l)||Rp(l);if(p=nt(p,4),y==null){var $=l&&l.constructor;A?y=E?new $:[]:Qn(l)?y=Gu($)?Sp(vx(l)):{}:y={}}return(A?Uo:eu)(l,function(j,W,Y){return p(y,j,W,Y)}),y}function rse(l,p){return l==null?!0:SD(l,p)}function ose(l,p,y){return l==null?l:m$(l,p,AD(y))}function ise(l,p,y,E){return E=typeof E=="function"?E:e,l==null?l:m$(l,p,AD(y),E)}function kp(l){return l==null?[]:Qe(l,Xr(l))}function sse(l){return l==null?[]:Qe(l,vi(l))}function ase(l,p,y){return y===e&&(y=p,p=e),y!==e&&(y=Vs(y),y=y===y?y:0),p!==e&&(p=Vs(p),p=p===p?p:0),Td(Vs(l),p,y)}function use(l,p,y){return p=ju(p),y===e?(y=p,p=0):y=ju(y),l=Vs(l),hne(l,p,y)}function cse(l,p,y){if(y&&typeof y!="boolean"&&jo(l,p,y)&&(p=y=e),y===e&&(typeof p=="boolean"?(y=p,p=e):typeof l=="boolean"&&(y=l,l=e)),l===e&&p===e?(l=0,p=1):(l=ju(l),p===e?(p=l,l=0):p=ju(p)),l>p){var E=l;l=p,p=E}if(y||l%1||p%1){var A=HP();return Io(l+A*(p-l+Bc("1e-"+((A+"").length-1))),p)}return TD(l,p)}var lse=Np(function(l,p,y){return p=p.toLowerCase(),l+(y?E4(p):p)});function E4(l){return ZD(an(l).toLowerCase())}function C4(l){return l=an(l),l&&l.replace(Cg,Tn).replace(nD,"")}function dse(l,p,y){l=an(l),p=Ki(p);var E=l.length;y=y===e?E:Td(_t(y),0,E);var A=y;return y-=p.length,y>=0&&l.slice(y,A)==p}function fse(l){return l=an(l),l&&q0.test(l)?l.replace(Pc,vn):l}function pse(l){return l=an(l),l&&q2.test(l)?l.replace($c,"\\$&"):l}var hse=Np(function(l,p,y){return l+(y?"-":"")+p.toLowerCase()}),mse=Np(function(l,p,y){return l+(y?" ":"")+p.toLowerCase()}),gse=I$("toLowerCase");function yse(l,p,y){l=an(l),p=_t(p);var E=p?Cp(l):0;if(!p||E>=p)return l;var A=(p-E)/2;return Fx(Ex(A),y)+l+Fx(wx(A),y)}function vse(l,p,y){l=an(l),p=_t(p);var E=p?Cp(l):0;return p&&E<p?l+Fx(p-E,y):l}function xse(l,p,y){l=an(l),p=_t(p);var E=p?Cp(l):0;return p&&E<p?Fx(p-E,y)+l:l}function bse(l,p,y){return y||p==null?p=0:p&&(p=+p),Ste(an(l).replace(Ka,""),p||0)}function wse(l,p,y){return(y?jo(l,p,y):p===e)?p=1:p=_t(p),_D(an(l),p)}function Ese(){var l=arguments,p=an(l[0]);return l.length<3?p:p.replace(l[1],l[2])}var Cse=Np(function(l,p,y){return l+(y?"_":"")+p.toLowerCase()});function Tse(l,p,y){return y&&typeof y!="number"&&jo(l,p,y)&&(p=y=e),y=y===e?ie:y>>>0,y?(l=an(l),l&&(typeof p=="string"||p!=null&&!KD(p))&&(p=Ki(p),!p&&xr(l))?Wc(pa(l),0,y):l.split(p,y)):[]}var _se=Np(function(l,p,y){return l+(y?" ":"")+ZD(p)});function Ise(l,p,y){return l=an(l),y=y==null?0:Td(_t(y),0,l.length),p=Ki(p),l.slice(y,y+p.length)==p}function Sse(l,p,y){var E=P.templateSettings;y&&jo(l,p,y)&&(p=e),l=an(l),p=qx({},p,E,O$);var A=qx({},p.imports,E.imports,O$),$=Xr(A),j=Qe(A,$),W,Y,ue=0,ce=p.interpolate||pd,he="__p += '",Se=lD((p.escape||pd).source+"|"+ce.source+"|"+(ce===qa?X2:pd).source+"|"+(p.evaluate||pd).source+"|$","g"),Ve="//# sourceURL="+(pn.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qi+"]")+`
`;l.replace(Se,function(it,Mt,Gt,Yi,zo,Zi){return Gt||(Gt=Yi),he+=l.slice(ue,Zi).replace(Hi,Fr),Mt&&(W=!0,he+=`' +
__e(`+Mt+`) +
'`),zo&&(Y=!0,he+=`';
`+zo+`;
__p += '`),Gt&&(he+=`' +
((__t = (`+Gt+`)) == null ? '' : __t) +
'`),ue=Zi+it.length,it}),he+=`';
`;var ot=pn.call(p,"variable")&&p.variable;if(!ot)he=`with (obj) {
`+he+`
}
`;else if(Rs.test(ot))throw new ht(i);he=(Y?he.replace(W2,""):he).replace(H0,"$1").replace(yg,"$1;"),he="function("+(ot||"obj")+`) {
`+(ot?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(W?", __e = _.escape":"")+(Y?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+he+`return __p
}`;var St=_4(function(){return tn($,Ve+"return "+he).apply(e,j)});if(St.source=he,qD(St))throw St;return St}function Dse(l){return an(l).toLowerCase()}function Nse(l){return an(l).toUpperCase()}function Ase(l,p,y){if(l=an(l),l&&(y||p===e))return me(l);if(!l||!(p=Ki(p)))return l;var E=pa(l),A=pa(p),$=Ie(E,A),j=tt(E,A)+1;return Wc(E,$,j).join("")}function Rse(l,p,y){if(l=an(l),l&&(y||p===e))return l.slice(0,LP(l)+1);if(!l||!(p=Ki(p)))return l;var E=pa(l),A=tt(E,pa(p))+1;return Wc(E,0,A).join("")}function kse(l,p,y){if(l=an(l),l&&(y||p===e))return l.replace(Ka,"");if(!l||!(p=Ki(p)))return l;var E=pa(l),A=Ie(E,pa(p));return Wc(E,A).join("")}function Ose(l,p){var y=Z,E=te;if(Qn(p)){var A="separator"in p?p.separator:A;y="length"in p?_t(p.length):y,E="omission"in p?Ki(p.omission):E}l=an(l);var $=l.length;if(xr(l)){var j=pa(l);$=j.length}if(y>=$)return l;var W=y-Cp(E);if(W<1)return E;var Y=j?Wc(j,0,W).join(""):l.slice(0,W);if(A===e)return Y+E;if(j&&(W+=Y.length-W),KD(A)){if(l.slice(W).search(A)){var ue,ce=Y;for(A.global||(A=lD(A.source,an(dd.exec(A))+"g")),A.lastIndex=0;ue=A.exec(ce);)var he=ue.index;Y=Y.slice(0,he===e?W:he)}}else if(l.indexOf(Ki(A),W)!=W){var Se=Y.lastIndexOf(A);Se>-1&&(Y=Y.slice(0,Se))}return Y+E}function Mse(l){return l=an(l),l&&W0.test(l)?l.replace(Wa,cte):l}var Fse=Np(function(l,p,y){return l+(y?" ":"")+p.toUpperCase()}),ZD=I$("toUpperCase");function T4(l,p,y){return l=an(l),p=y?e:p,p===e?Ht(l)?fte(l):aD(l):l.match(p)||[]}var _4=Nt(function(l,p){try{return _o(l,e,p)}catch(y){return qD(y)?y:new ht(y)}}),Pse=Bu(function(l,p){return Uo(p,function(y){y=nu(y),Lu(l,y,HD(l[y],l))}),l});function $se(l){var p=l==null?0:l.length,y=nt();return l=p?On(l,function(E){if(typeof E[1]!="function")throw new Ms(o);return[y(E[0]),E[1]]}):[],Nt(function(E){for(var A=-1;++A<p;){var $=l[A];if(_o($[0],this,E))return _o($[1],this,E)}})}function Lse(l){return cne(Ps(l,c))}function QD(l){return function(){return l}}function Vse(l,p){return l==null||l!==l?p:l}var Bse=D$(),Use=D$(!0);function xi(l){return l}function JD(l){return o$(typeof l=="function"?l:Ps(l,c))}function Gse(l){return s$(Ps(l,c))}function jse(l,p){return a$(l,Ps(p,c))}var zse=Nt(function(l,p){return function(y){return ry(y,l,p)}}),Hse=Nt(function(l,p){return function(y){return ry(l,y,p)}});function eN(l,p,y){var E=Xr(p),A=Dx(p,E);y==null&&!(Qn(p)&&(A.length||!E.length))&&(y=p,p=l,l=this,A=Dx(p,Xr(p)));var $=!(Qn(y)&&"chain"in y)||!!y.chain,j=Gu(l);return Uo(A,function(W){var Y=p[W];l[W]=Y,j&&(l.prototype[W]=function(){var ue=this.__chain__;if($||ue){var ce=l(this.__wrapped__),he=ce.__actions__=gi(this.__actions__);return he.push({func:Y,args:arguments,thisArg:l}),ce.__chain__=ue,ce}return Y.apply(l,Qa([this.value()],arguments))})}),l}function Wse(){return vr._===this&&(vr._=vte),this}function tN(){}function qse(l){return l=_t(l),Nt(function(p){return u$(p,l)})}var Kse=kD(On),Xse=kD(ux),Yse=kD(Xg);function I4(l){return VD(l)?I(nu(l)):Ine(l)}function Zse(l){return function(p){return l==null?e:_d(l,p)}}var Qse=A$(),Jse=A$(!0);function nN(){return[]}function rN(){return!1}function eae(){return{}}function tae(){return""}function nae(){return!0}function rae(l,p){if(l=_t(l),l<1||l>Dt)return[];var y=ie,E=Io(l,ie);p=nt(p),l-=ie;for(var A=q(E,p);++y<l;)p(y);return A}function oae(l){return yt(l)?On(l,nu):Xi(l)?[l]:gi(W$(an(l)))}function iae(l){var p=++gte;return an(l)+p}var sae=Mx(function(l,p){return l+p},0),aae=OD("ceil"),uae=Mx(function(l,p){return l/p},1),cae=OD("floor");function lae(l){return l&&l.length?Sx(l,xi,vD):e}function dae(l,p){return l&&l.length?Sx(l,nt(p,2),vD):e}function fae(l){return w(l,xi)}function pae(l,p){return w(l,nt(p,2))}function hae(l){return l&&l.length?Sx(l,xi,ED):e}function mae(l,p){return l&&l.length?Sx(l,nt(p,2),ED):e}var gae=Mx(function(l,p){return l*p},1),yae=OD("round"),vae=Mx(function(l,p){return l-p},0);function xae(l){return l&&l.length?V(l,xi):0}function bae(l,p){return l&&l.length?V(l,nt(p,2)):0}return P.after=Goe,P.ary=r4,P.assign=Nie,P.assignIn=y4,P.assignInWith=qx,P.assignWith=Aie,P.at=Rie,P.before=o4,P.bind=HD,P.bindAll=Pse,P.bindKey=i4,P.castArray=eie,P.chain=e4,P.chunk=cre,P.compact=lre,P.concat=dre,P.cond=$se,P.conforms=Lse,P.constant=QD,P.countBy=xoe,P.create=kie,P.curry=s4,P.curryRight=a4,P.debounce=u4,P.defaults=Oie,P.defaultsDeep=Mie,P.defer=joe,P.delay=zoe,P.difference=fre,P.differenceBy=pre,P.differenceWith=hre,P.drop=mre,P.dropRight=gre,P.dropRightWhile=yre,P.dropWhile=vre,P.fill=xre,P.filter=woe,P.flatMap=Toe,P.flatMapDeep=_oe,P.flatMapDepth=Ioe,P.flatten=Y$,P.flattenDeep=bre,P.flattenDepth=wre,P.flip=Hoe,P.flow=Bse,P.flowRight=Use,P.fromPairs=Ere,P.functions=Uie,P.functionsIn=Gie,P.groupBy=Soe,P.initial=Tre,P.intersection=_re,P.intersectionBy=Ire,P.intersectionWith=Sre,P.invert=zie,P.invertBy=Hie,P.invokeMap=Noe,P.iteratee=JD,P.keyBy=Aoe,P.keys=Xr,P.keysIn=vi,P.map=Ux,P.mapKeys=qie,P.mapValues=Kie,P.matches=Gse,P.matchesProperty=jse,P.memoize=jx,P.merge=Xie,P.mergeWith=v4,P.method=zse,P.methodOf=Hse,P.mixin=eN,P.negate=zx,P.nthArg=qse,P.omit=Yie,P.omitBy=Zie,P.once=Woe,P.orderBy=Roe,P.over=Kse,P.overArgs=qoe,P.overEvery=Xse,P.overSome=Yse,P.partial=WD,P.partialRight=c4,P.partition=koe,P.pick=Qie,P.pickBy=x4,P.property=I4,P.propertyOf=Zse,P.pull=Rre,P.pullAll=Q$,P.pullAllBy=kre,P.pullAllWith=Ore,P.pullAt=Mre,P.range=Qse,P.rangeRight=Jse,P.rearg=Koe,P.reject=Foe,P.remove=Fre,P.rest=Xoe,P.reverse=jD,P.sampleSize=$oe,P.set=ese,P.setWith=tse,P.shuffle=Loe,P.slice=Pre,P.sortBy=Uoe,P.sortedUniq=jre,P.sortedUniqBy=zre,P.split=Tse,P.spread=Yoe,P.tail=Hre,P.take=Wre,P.takeRight=qre,P.takeRightWhile=Kre,P.takeWhile=Xre,P.tap=loe,P.throttle=Zoe,P.thru=Bx,P.toArray=h4,P.toPairs=b4,P.toPairsIn=w4,P.toPath=oae,P.toPlainObject=g4,P.transform=nse,P.unary=Qoe,P.union=Yre,P.unionBy=Zre,P.unionWith=Qre,P.uniq=Jre,P.uniqBy=eoe,P.uniqWith=toe,P.unset=rse,P.unzip=zD,P.unzipWith=J$,P.update=ose,P.updateWith=ise,P.values=kp,P.valuesIn=sse,P.without=noe,P.words=T4,P.wrap=Joe,P.xor=roe,P.xorBy=ooe,P.xorWith=ioe,P.zip=soe,P.zipObject=aoe,P.zipObjectDeep=uoe,P.zipWith=coe,P.entries=b4,P.entriesIn=w4,P.extend=y4,P.extendWith=qx,eN(P,P),P.add=sae,P.attempt=_4,P.camelCase=lse,P.capitalize=E4,P.ceil=aae,P.clamp=ase,P.clone=tie,P.cloneDeep=rie,P.cloneDeepWith=oie,P.cloneWith=nie,P.conformsTo=iie,P.deburr=C4,P.defaultTo=Vse,P.divide=uae,P.endsWith=dse,P.eq=ma,P.escape=fse,P.escapeRegExp=pse,P.every=boe,P.find=Eoe,P.findIndex=K$,P.findKey=Fie,P.findLast=Coe,P.findLastIndex=X$,P.findLastKey=Pie,P.floor=cae,P.forEach=t4,P.forEachRight=n4,P.forIn=$ie,P.forInRight=Lie,P.forOwn=Vie,P.forOwnRight=Bie,P.get=XD,P.gt=sie,P.gte=aie,P.has=jie,P.hasIn=YD,P.head=Z$,P.identity=xi,P.includes=Doe,P.indexOf=Cre,P.inRange=use,P.invoke=Wie,P.isArguments=Dd,P.isArray=yt,P.isArrayBuffer=uie,P.isArrayLike=yi,P.isArrayLikeObject=br,P.isBoolean=cie,P.isBuffer=qc,P.isDate=lie,P.isElement=die,P.isEmpty=fie,P.isEqual=pie,P.isEqualWith=hie,P.isError=qD,P.isFinite=mie,P.isFunction=Gu,P.isInteger=l4,P.isLength=Hx,P.isMap=d4,P.isMatch=gie,P.isMatchWith=yie,P.isNaN=vie,P.isNative=xie,P.isNil=wie,P.isNull=bie,P.isNumber=f4,P.isObject=Qn,P.isObjectLike=ar,P.isPlainObject=cy,P.isRegExp=KD,P.isSafeInteger=Eie,P.isSet=p4,P.isString=Wx,P.isSymbol=Xi,P.isTypedArray=Rp,P.isUndefined=Cie,P.isWeakMap=Tie,P.isWeakSet=_ie,P.join=Dre,P.kebabCase=hse,P.last=Ls,P.lastIndexOf=Nre,P.lowerCase=mse,P.lowerFirst=gse,P.lt=Iie,P.lte=Sie,P.max=lae,P.maxBy=dae,P.mean=fae,P.meanBy=pae,P.min=hae,P.minBy=mae,P.stubArray=nN,P.stubFalse=rN,P.stubObject=eae,P.stubString=tae,P.stubTrue=nae,P.multiply=gae,P.nth=Are,P.noConflict=Wse,P.noop=tN,P.now=Gx,P.pad=yse,P.padEnd=vse,P.padStart=xse,P.parseInt=bse,P.random=cse,P.reduce=Ooe,P.reduceRight=Moe,P.repeat=wse,P.replace=Ese,P.result=Jie,P.round=yae,P.runInContext=K,P.sample=Poe,P.size=Voe,P.snakeCase=Cse,P.some=Boe,P.sortedIndex=$re,P.sortedIndexBy=Lre,P.sortedIndexOf=Vre,P.sortedLastIndex=Bre,P.sortedLastIndexBy=Ure,P.sortedLastIndexOf=Gre,P.startCase=_se,P.startsWith=Ise,P.subtract=vae,P.sum=xae,P.sumBy=bae,P.template=Sse,P.times=rae,P.toFinite=ju,P.toInteger=_t,P.toLength=m4,P.toLower=Dse,P.toNumber=Vs,P.toSafeInteger=Die,P.toString=an,P.toUpper=Nse,P.trim=Ase,P.trimEnd=Rse,P.trimStart=kse,P.truncate=Ose,P.unescape=Mse,P.uniqueId=iae,P.upperCase=Fse,P.upperFirst=ZD,P.each=t4,P.eachRight=n4,P.first=Z$,eN(P,function(){var l={};return eu(P,function(p,y){pn.call(P.prototype,y)||(l[y]=p)}),l}(),{chain:!1}),P.VERSION=t,Uo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){P[l].placeholder=P}),Uo(["drop","take"],function(l,p){Pt.prototype[l]=function(y){y=y===e?1:Lr(_t(y),0);var E=this.__filtered__&&!p?new Pt(this):this.clone();return E.__filtered__?E.__takeCount__=Io(y,E.__takeCount__):E.__views__.push({size:Io(y,ie),type:l+(E.__dir__<0?"Right":"")}),E},Pt.prototype[l+"Right"]=function(y){return this.reverse()[l](y).reverse()}}),Uo(["filter","map","takeWhile"],function(l,p){var y=p+1,E=y==ye||y==Ye;Pt.prototype[l]=function(A){var $=this.clone();return $.__iteratees__.push({iteratee:nt(A,3),type:y}),$.__filtered__=$.__filtered__||E,$}}),Uo(["head","last"],function(l,p){var y="take"+(p?"Right":"");Pt.prototype[l]=function(){return this[y](1).value()[0]}}),Uo(["initial","tail"],function(l,p){var y="drop"+(p?"":"Right");Pt.prototype[l]=function(){return this.__filtered__?new Pt(this):this[y](1)}}),Pt.prototype.compact=function(){return this.filter(xi)},Pt.prototype.find=function(l){return this.filter(l).head()},Pt.prototype.findLast=function(l){return this.reverse().find(l)},Pt.prototype.invokeMap=Nt(function(l,p){return typeof l=="function"?new Pt(this):this.map(function(y){return ry(y,l,p)})}),Pt.prototype.reject=function(l){return this.filter(zx(nt(l)))},Pt.prototype.slice=function(l,p){l=_t(l);var y=this;return y.__filtered__&&(l>0||p<0)?new Pt(y):(l<0?y=y.takeRight(-l):l&&(y=y.drop(l)),p!==e&&(p=_t(p),y=p<0?y.dropRight(-p):y.take(p-l)),y)},Pt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Pt.prototype.toArray=function(){return this.take(ie)},eu(Pt.prototype,function(l,p){var y=/^(?:filter|find|map|reject)|While$/.test(p),E=/^(?:head|last)$/.test(p),A=P[E?"take"+(p=="last"?"Right":""):p],$=E||/^find/.test(p);A&&(P.prototype[p]=function(){var j=this.__wrapped__,W=E?[1]:arguments,Y=j instanceof Pt,ue=W[0],ce=Y||yt(j),he=function(Mt){var Gt=A.apply(P,Qa([Mt],W));return E&&Se?Gt[0]:Gt};ce&&y&&typeof ue=="function"&&ue.length!=1&&(Y=ce=!1);var Se=this.__chain__,Ve=!!this.__actions__.length,ot=$&&!Se,St=Y&&!Ve;if(!$&&ce){j=St?j:new Pt(this);var it=l.apply(j,W);return it.__actions__.push({func:Bx,args:[he],thisArg:e}),new Fs(it,Se)}return ot&&St?l.apply(this,W):(it=this.thru(he),ot?E?it.value()[0]:it.value():it)})}),Uo(["pop","push","shift","sort","splice","unshift"],function(l){var p=fx[l],y=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",E=/^(?:pop|shift)$/.test(l);P.prototype[l]=function(){var A=arguments;if(E&&!this.__chain__){var $=this.value();return p.apply(yt($)?$:[],A)}return this[y](function(j){return p.apply(yt(j)?j:[],A)})}}),eu(Pt.prototype,function(l,p){var y=P[p];if(y){var E=y.name+"";pn.call(Ip,E)||(Ip[E]=[]),Ip[E].push({name:p,func:y})}}),Ip[Ox(e,x).name]=[{name:"wrapper",func:e}],Pt.prototype.clone=Mte,Pt.prototype.reverse=Fte,Pt.prototype.value=Pte,P.prototype.at=doe,P.prototype.chain=foe,P.prototype.commit=poe,P.prototype.next=hoe,P.prototype.plant=goe,P.prototype.reverse=yoe,P.prototype.toJSON=P.prototype.valueOf=P.prototype.value=voe,P.prototype.first=P.prototype.head,Yg&&(P.prototype[Yg]=moe),P},Uc=pte();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(vr._=Uc,define(function(){return Uc})):Ya?((Ya.exports=Uc)._=Uc,Xa._=Uc):vr._=Uc}).call(Rh)});var Cl=Ho((yv,yO)=>{"use strict";(function(e,t){typeof yv=="object"&&typeof yO=="object"?yO.exports=t():typeof define=="function"&&define.amd?define([],t):typeof yv=="object"?yv.fp=t():e.fp=t()})(typeof self<"u"?self:yv,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(r,o,i){n.o(r,o)||Object.defineProperty(r,o,{enumerable:!0,get:i})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,o){if(1&o&&(r=n(r)),8&o||4&o&&typeof r=="object"&&r&&r.__esModule)return r;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),2&o&&typeof r!="string")for(var s in r)n.d(i,s,function(a){return r[a]}.bind(null,s));return i},n.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(o,"a",o),o},n.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r={};function o(oe){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(oe)}n.r(r),n.d(r,"VictoryGesture",function(){return ae}),n.d(r,"ThumbsUpGesture",function(){return Dt});var i={Thumb:0,Index:1,Middle:2,Ring:3,Pinky:4,all:[0,1,2,3,4],nameMapping:{0:"Thumb",1:"Index",2:"Middle",3:"Ring",4:"Pinky"},pointsMapping:{0:[[0,1],[1,2],[2,3],[3,4]],1:[[0,5],[5,6],[6,7],[7,8]],2:[[0,9],[9,10],[10,11],[11,12]],3:[[0,13],[13,14],[14,15],[15,16]],4:[[0,17],[17,18],[18,19],[19,20]]},getName:function(oe){return o(this.nameMapping[oe])!==void 0&&this.nameMapping[oe]},getPoints:function(oe){return o(this.pointsMapping[oe])!==void 0&&this.pointsMapping[oe]}},s={NoCurl:0,HalfCurl:1,FullCurl:2,nameMapping:{0:"No Curl",1:"Half Curl",2:"Full Curl"},getName:function(oe){return o(this.nameMapping[oe])!==void 0&&this.nameMapping[oe]}},a={VerticalUp:0,VerticalDown:1,HorizontalLeft:2,HorizontalRight:3,DiagonalUpRight:4,DiagonalUpLeft:5,DiagonalDownRight:6,DiagonalDownLeft:7,nameMapping:{0:"Vertical Up",1:"Vertical Down",2:"Horizontal Left",3:"Horizontal Right",4:"Diagonal Up Right",5:"Diagonal Up Left",6:"Diagonal Down Right",7:"Diagonal Down Left"},getName:function(oe){return o(this.nameMapping[oe])!==void 0&&this.nameMapping[oe]}};function u(oe,pe){var ie=typeof Symbol<"u"&&oe[Symbol.iterator]||oe["@@iterator"];if(!ie){if(Array.isArray(oe)||(ie=function(be,dt){if(be){if(typeof be=="string")return c(be,dt);var pt=Object.prototype.toString.call(be).slice(8,-1);if(pt==="Object"&&be.constructor&&(pt=be.constructor.name),pt==="Map"||pt==="Set")return Array.from(be);if(pt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pt))return c(be,dt)}}(oe))||pe&&oe&&typeof oe.length=="number"){ie&&(oe=ie);var Ce=0,ve=function(){};return{s:ve,n:function(){return Ce>=oe.length?{done:!0}:{done:!1,value:oe[Ce++]}},e:function(be){throw be},f:ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var De,Te=!0,ut=!1;return{s:function(){ie=ie.call(oe)},n:function(){var be=ie.next();return Te=be.done,be},e:function(be){ut=!0,De=be},f:function(){try{Te||ie.return==null||ie.return()}finally{if(ut)throw De}}}}function c(oe,pe){(pe==null||pe>oe.length)&&(pe=oe.length);for(var ie=0,Ce=new Array(pe);ie<pe;ie++)Ce[ie]=oe[ie];return Ce}function d(oe,pe){var ie=Object.keys(oe);if(Object.getOwnPropertySymbols){var Ce=Object.getOwnPropertySymbols(oe);pe&&(Ce=Ce.filter(function(ve){return Object.getOwnPropertyDescriptor(oe,ve).enumerable})),ie.push.apply(ie,Ce)}return ie}function f(oe){for(var pe=1;pe<arguments.length;pe++){var ie=arguments[pe]!=null?arguments[pe]:{};pe%2?d(Object(ie),!0).forEach(function(Ce){h(oe,Ce,ie[Ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(ie)):d(Object(ie)).forEach(function(Ce){Object.defineProperty(oe,Ce,Object.getOwnPropertyDescriptor(ie,Ce))})}return oe}function h(oe,pe,ie){return pe in oe?Object.defineProperty(oe,pe,{value:ie,enumerable:!0,configurable:!0,writable:!0}):oe[pe]=ie,oe}function m(oe,pe){for(var ie=0;ie<pe.length;ie++){var Ce=pe[ie];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(oe,Ce.key,Ce)}}var v=function(){function oe(ve){(function(De,Te){if(!(De instanceof Te))throw new TypeError("Cannot call a class as a function")})(this,oe),this.options=f(f({},{HALF_CURL_START_LIMIT:60,NO_CURL_START_LIMIT:130,DISTANCE_VOTE_POWER:1.1,SINGLE_ANGLE_VOTE_POWER:.9,TOTAL_ANGLE_VOTE_POWER:1.6}),ve)}var pe,ie,Ce;return pe=oe,(ie=[{key:"estimate",value:function(ve){var De,Te=[],ut=[],be=u(i.all);try{for(be.s();!(De=be.n()).done;){var dt,pt=De.value,Hn=i.getPoints(pt),En=[],Yt=[],gn=u(Hn);try{for(gn.s();!(dt=gn.n()).done;){var dn=dt.value,gt=ve[dn[0]],en=ve[dn[1]],fn=this.getSlopes(gt,en),io=fn[0],wo=fn[1];En.push(io),Yt.push(wo)}}catch(To){gn.e(To)}finally{gn.f()}Te.push(En),ut.push(Yt)}}catch(To){be.e(To)}finally{be.f()}var Eo,Yn=[],Kr=[],Ir=u(i.all);try{for(Ir.s();!(Eo=Ir.n()).done;){var so=Eo.value,ao=so==i.Thumb?1:0,Mr=i.getPoints(so),uo=ve[Mr[ao][0]],Co=ve[Mr[ao+1][1]],As=ve[Mr[3][1]],ca=this.estimateFingerCurl(uo,Co,As),la=this.calculateFingerDirection(uo,Co,As,Te[so].slice(ao));Yn[so]=ca,Kr[so]=la}}catch(To){Ir.e(To)}finally{Ir.f()}return{curls:Yn,directions:Kr}}},{key:"getSlopes",value:function(ve,De){var Te=this.calculateSlope(ve[0],ve[1],De[0],De[1]);return ve.length==2?Te:[Te,this.calculateSlope(ve[1],ve[2],De[1],De[2])]}},{key:"angleOrientationAt",value:function(ve){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Te=0,ut=0,be=0;return ve>=75&&ve<=105?Te=1*De:ve>=25&&ve<=155?ut=1*De:be=1*De,[Te,ut,be]}},{key:"estimateFingerCurl",value:function(ve,De,Te){var ut=ve[0]-De[0],be=ve[0]-Te[0],dt=De[0]-Te[0],pt=ve[1]-De[1],Hn=ve[1]-Te[1],En=De[1]-Te[1],Yt=ve[2]-De[2],gn=ve[2]-Te[2],dn=De[2]-Te[2],gt=Math.sqrt(ut*ut+pt*pt+Yt*Yt),en=Math.sqrt(be*be+Hn*Hn+gn*gn),fn=Math.sqrt(dt*dt+En*En+dn*dn),io=(fn*fn+gt*gt-en*en)/(2*fn*gt);io>1?io=1:io<-1&&(io=-1);var wo=Math.acos(io);return(wo=57.2958*wo%180)>this.options.NO_CURL_START_LIMIT?s.NoCurl:wo>this.options.HALF_CURL_START_LIMIT?s.HalfCurl:s.FullCurl}},{key:"estimateHorizontalDirection",value:function(ve,De,Te,ut){return ut==Math.abs(ve)?ve>0?a.HorizontalLeft:a.HorizontalRight:ut==Math.abs(De)?De>0?a.HorizontalLeft:a.HorizontalRight:Te>0?a.HorizontalLeft:a.HorizontalRight}},{key:"estimateVerticalDirection",value:function(ve,De,Te,ut){return ut==Math.abs(ve)?ve<0?a.VerticalDown:a.VerticalUp:ut==Math.abs(De)?De<0?a.VerticalDown:a.VerticalUp:Te<0?a.VerticalDown:a.VerticalUp}},{key:"estimateDiagonalDirection",value:function(ve,De,Te,ut,be,dt,pt,Hn){var En=this.estimateVerticalDirection(ve,De,Te,ut),Yt=this.estimateHorizontalDirection(be,dt,pt,Hn);return En==a.VerticalUp?Yt==a.HorizontalLeft?a.DiagonalUpLeft:a.DiagonalUpRight:Yt==a.HorizontalLeft?a.DiagonalDownLeft:a.DiagonalDownRight}},{key:"calculateFingerDirection",value:function(ve,De,Te,ut){var be=ve[0]-De[0],dt=ve[0]-Te[0],pt=De[0]-Te[0],Hn=ve[1]-De[1],En=ve[1]-Te[1],Yt=De[1]-Te[1],gn=Math.max(Math.abs(be),Math.abs(dt),Math.abs(pt)),dn=Math.max(Math.abs(Hn),Math.abs(En),Math.abs(Yt)),gt=0,en=0,fn=0,io=dn/(gn+1e-5);io>1.5?gt+=this.options.DISTANCE_VOTE_POWER:io>.66?en+=this.options.DISTANCE_VOTE_POWER:fn+=this.options.DISTANCE_VOTE_POWER;var wo=Math.sqrt(be*be+Hn*Hn),Eo=Math.sqrt(dt*dt+En*En),Yn=Math.sqrt(pt*pt+Yt*Yt),Kr=Math.max(wo,Eo,Yn),Ir=ve[0],so=ve[1],ao=Te[0],Mr=Te[1];Kr==wo?(ao=Te[0],Mr=Te[1]):Kr==Yn&&(Ir=De[0],so=De[1]);var uo=[Ir,so],Co=[ao,Mr],As=this.getSlopes(uo,Co),ca=this.angleOrientationAt(As,this.options.TOTAL_ANGLE_VOTE_POWER);gt+=ca[0],en+=ca[1],fn+=ca[2];var la,To=u(ut);try{for(To.s();!(la=To.n()).done;){var Fc=la.value,Ha=this.angleOrientationAt(Fc,this.options.SINGLE_ANGLE_VOTE_POWER);gt+=Ha[0],en+=Ha[1],fn+=Ha[2]}}catch(da){To.e(da)}finally{To.f()}return gt==Math.max(gt,en,fn)?this.estimateVerticalDirection(En,Hn,Yt,dn):fn==Math.max(en,fn)?this.estimateHorizontalDirection(dt,be,pt,gn):this.estimateDiagonalDirection(En,Hn,Yt,dn,dt,be,pt,gn)}},{key:"calculateSlope",value:function(ve,De,Te,ut){var be=(De-ut)/(ve-Te),dt=180*Math.atan(be)/Math.PI;return dt<=0?dt=-dt:dt>0&&(dt=180-dt),dt}}])&&m(pe.prototype,ie),Ce&&m(pe,Ce),oe}();function x(oe,pe){var ie=typeof Symbol<"u"&&oe[Symbol.iterator]||oe["@@iterator"];if(!ie){if(Array.isArray(oe)||(ie=function(be,dt){if(be){if(typeof be=="string")return b(be,dt);var pt=Object.prototype.toString.call(be).slice(8,-1);if(pt==="Object"&&be.constructor&&(pt=be.constructor.name),pt==="Map"||pt==="Set")return Array.from(be);if(pt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pt))return b(be,dt)}}(oe))||pe&&oe&&typeof oe.length=="number"){ie&&(oe=ie);var Ce=0,ve=function(){};return{s:ve,n:function(){return Ce>=oe.length?{done:!0}:{done:!1,value:oe[Ce++]}},e:function(be){throw be},f:ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var De,Te=!0,ut=!1;return{s:function(){ie=ie.call(oe)},n:function(){var be=ie.next();return Te=be.done,be},e:function(be){ut=!0,De=be},f:function(){try{Te||ie.return==null||ie.return()}finally{if(ut)throw De}}}}function b(oe,pe){(pe==null||pe>oe.length)&&(pe=oe.length);for(var ie=0,Ce=new Array(pe);ie<pe;ie++)Ce[ie]=oe[ie];return Ce}function C(oe,pe){if(!(oe instanceof pe))throw new TypeError("Cannot call a class as a function")}function S(oe,pe){for(var ie=0;ie<pe.length;ie++){var Ce=pe[ie];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(oe,Ce.key,Ce)}}var O=function(){function oe(ve){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};C(this,oe),this.estimator=new v(De),this.gestures=ve}var pe,ie,Ce;return pe=oe,(ie=[{key:"estimate",value:function(ve,De){var Te,ut=[],be=this.estimator.estimate(ve),dt=[],pt=x(i.all);try{for(pt.s();!(Te=pt.n()).done;){var Hn=Te.value;dt.push([i.getName(Hn),s.getName(be.curls[Hn]),a.getName(be.directions[Hn])])}}catch(gt){pt.e(gt)}finally{pt.f()}var En,Yt=x(this.gestures);try{for(Yt.s();!(En=Yt.n()).done;){var gn=En.value,dn=gn.matchAgainst(be.curls,be.directions);dn>=De&&ut.push({name:gn.name,score:dn})}}catch(gt){Yt.e(gt)}finally{Yt.f()}return{poseData:dt,gestures:ut}}}])&&S(pe.prototype,ie),Ce&&S(pe,Ce),oe}();function F(oe,pe){return function(ie){if(Array.isArray(ie))return ie}(oe)||function(ie,Ce){var ve=ie==null?null:typeof Symbol<"u"&&ie[Symbol.iterator]||ie["@@iterator"];if(ve!=null){var De,Te,ut=[],be=!0,dt=!1;try{for(ve=ve.call(ie);!(be=(De=ve.next()).done)&&(ut.push(De.value),!Ce||ut.length!==Ce);be=!0);}catch(pt){dt=!0,Te=pt}finally{try{be||ve.return==null||ve.return()}finally{if(dt)throw Te}}return ut}}(oe,pe)||H(oe,pe)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(oe,pe){var ie=typeof Symbol<"u"&&oe[Symbol.iterator]||oe["@@iterator"];if(!ie){if(Array.isArray(oe)||(ie=H(oe))||pe&&oe&&typeof oe.length=="number"){ie&&(oe=ie);var Ce=0,ve=function(){};return{s:ve,n:function(){return Ce>=oe.length?{done:!0}:{done:!1,value:oe[Ce++]}},e:function(be){throw be},f:ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var De,Te=!0,ut=!1;return{s:function(){ie=ie.call(oe)},n:function(){var be=ie.next();return Te=be.done,be},e:function(be){ut=!0,De=be},f:function(){try{Te||ie.return==null||ie.return()}finally{if(ut)throw De}}}}function H(oe,pe){if(oe){if(typeof oe=="string")return X(oe,pe);var ie=Object.prototype.toString.call(oe).slice(8,-1);return ie==="Object"&&oe.constructor&&(ie=oe.constructor.name),ie==="Map"||ie==="Set"?Array.from(oe):ie==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ie)?X(oe,pe):void 0}}function X(oe,pe){(pe==null||pe>oe.length)&&(pe=oe.length);for(var ie=0,Ce=new Array(pe);ie<pe;ie++)Ce[ie]=oe[ie];return Ce}function Z(oe,pe){for(var ie=0;ie<pe.length;ie++){var Ce=pe[ie];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(oe,Ce.key,Ce)}}var te=function(){function oe(ve){(function(De,Te){if(!(De instanceof Te))throw new TypeError("Cannot call a class as a function")})(this,oe),this.name=ve,this.curls={},this.directions={}}var pe,ie,Ce;return pe=oe,(ie=[{key:"addCurl",value:function(ve,De){var Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;this.curls[ve]===void 0&&(this.curls[ve]=[]),this.curls[ve].push([De,Te])}},{key:"addDirection",value:function(ve,De){var Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;this.directions[ve]===void 0&&(this.directions[ve]=[]),this.directions[ve].push([De,Te])}},{key:"matchAgainst",value:function(ve,De){var Te=0,ut=0;for(var be in ve){var dt=ve[be],pt=this.curls[be];if(pt!==void 0){ut++;var Hn,En=!1,Yt=0,gn=B(pt);try{for(gn.s();!(Hn=gn.n()).done;){var dn=F(Hn.value,2),gt=dn[0],en=dn[1];if(dt==gt){Te+=en,Yt=Math.max(Yt,en),En=!0;break}}}catch(uo){gn.e(uo)}finally{gn.f()}En||(Te-=Yt)}}for(var fn in De){var io=De[fn],wo=this.directions[fn];if(wo!==void 0){ut++;var Eo,Yn=!1,Kr=0,Ir=B(wo);try{for(Ir.s();!(Eo=Ir.n()).done;){var so=F(Eo.value,2),ao=so[0],Mr=so[1];if(io==ao){Te+=Mr,Kr=Math.max(Kr,Mr),Yn=!0;break}}}catch(uo){Ir.e(uo)}finally{Ir.f()}Yn||(Te-=Kr)}}return Te/ut*10}}])&&Z(pe.prototype,ie),Ce&&Z(pe,Ce),oe}(),J=new te("victory");J.addDirection(i.Thumb,a.VerticalUp,1),J.addDirection(i.Thumb,a.DiagonalUpLeft,1),J.addDirection(i.Thumb,a.DiagonalUpRight,1),J.addCurl(i.Index,s.NoCurl,1),J.addDirection(i.Index,a.VerticalUp,1),J.addDirection(i.Index,a.DiagonalUpLeft,1),J.addDirection(i.Index,a.DiagonalUpRight,1),J.addDirection(i.Index,a.HorizontalLeft,1),J.addDirection(i.Index,a.HorizontalRight,1),J.addCurl(i.Middle,s.NoCurl,1),J.addDirection(i.Middle,a.VerticalUp,1),J.addDirection(i.Middle,a.DiagonalUpLeft,1),J.addDirection(i.Middle,a.DiagonalUpRight,1),J.addDirection(i.Middle,a.HorizontalLeft,1),J.addDirection(i.Middle,a.HorizontalRight,1),J.addCurl(i.Ring,s.FullCurl,1),J.addCurl(i.Ring,s.HalfCurl,.9),J.addCurl(i.Pinky,s.FullCurl,1),J.addCurl(i.Pinky,s.HalfCurl,.9);var ae=J,ye=new te("thumbs_up");ye.addCurl(i.Thumb,s.NoCurl,1),ye.addDirection(i.Thumb,a.VerticalUp,1),ye.addDirection(i.Thumb,a.DiagonalUpLeft,.9),ye.addDirection(i.Thumb,a.DiagonalUpRight,.9);for(var Oe=0,Ye=[i.Index,i.Middle,i.Ring,i.Pinky];Oe<Ye.length;Oe++){var Fe=Ye[Oe];ye.addCurl(Fe,s.FullCurl,1),ye.addCurl(Fe,s.HalfCurl,.9)}ye.addDirection(i.Index,a.DiagonalUpLeft,1),ye.addDirection(i.Index,a.HorizontalLeft,1),ye.addDirection(i.Index,a.HorizontalRight,1),ye.addDirection(i.Index,a.DiagonalUpRight,1);var Dt=ye;t.default={GestureEstimator:O,GestureDescription:te,Finger:i,FingerCurl:s,FingerDirection:a,Gestures:r}}]).default})});var Hz=Ho(zz=>{"use strict";(function(){"use strict";var e;function t(g){var w=0;return function(){return w<g.length?{done:!1,value:g[w++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,w,I){return g==Array.prototype||g==Object.prototype||(g[w]=I.value),g};function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var w=0;w<g.length;++w){var I=g[w];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var o=r(this);function i(g,w){if(w)e:{var I=o;g=g.split(".");for(var R=0;R<g.length-1;R++){var L=g[R];if(!(L in I))break e;I=I[L]}g=g[g.length-1],R=I[g],w=w(R),w!=R&&w!=null&&n(I,g,{configurable:!0,writable:!0,value:w})}}i("Symbol",function(g){function w(G){if(this instanceof w)throw new TypeError("Symbol is not a constructor");return new I(R+(G||"")+"_"+L++,G)}function I(G,V){this.h=G,n(this,"description",{configurable:!0,writable:!0,value:V})}if(g)return g;I.prototype.toString=function(){return this.h};var R="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",L=0;return w}),i("Symbol.iterator",function(g){if(g)return g;g=Symbol("Symbol.iterator");for(var w="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),I=0;I<w.length;I++){var R=o[w[I]];typeof R=="function"&&typeof R.prototype[g]!="function"&&n(R.prototype,g,{configurable:!0,writable:!0,value:function(){return s(t(this))}})}return g});function s(g){return g={next:g},g[Symbol.iterator]=function(){return this},g}function a(g){var w=typeof Symbol<"u"&&Symbol.iterator&&g[Symbol.iterator];return w?w.call(g):{next:t(g)}}function u(g){if(!(g instanceof Array)){g=a(g);for(var w,I=[];!(w=g.next()).done;)I.push(w.value);g=I}return g}var c=typeof Object.assign=="function"?Object.assign:function(g,w){for(var I=1;I<arguments.length;I++){var R=arguments[I];if(R)for(var L in R)Object.prototype.hasOwnProperty.call(R,L)&&(g[L]=R[L])}return g};i("Object.assign",function(g){return g||c});var d=typeof Object.create=="function"?Object.create:function(g){function w(){}return w.prototype=g,new w},f;if(typeof Object.setPrototypeOf=="function")f=Object.setPrototypeOf;else{var h;e:{var m={a:!0},v={};try{v.__proto__=m,h=v.a;break e}catch{}h=!1}f=h?function(g,w){if(g.__proto__=w,g.__proto__!==w)throw new TypeError(g+" is not extensible");return g}:null}var x=f;function b(g,w){if(g.prototype=d(w.prototype),g.prototype.constructor=g,x)x(g,w);else for(var I in w)if(I!="prototype")if(Object.defineProperties){var R=Object.getOwnPropertyDescriptor(w,I);R&&Object.defineProperty(g,I,R)}else g[I]=w[I];g.ya=w.prototype}function C(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function S(g){if(g.m)throw new TypeError("Generator is already running");g.m=!0}C.prototype.u=function(g){this.i=g};function O(g,w){g.l={ma:w,na:!0},g.h=g.s||g.v}C.prototype.return=function(g){this.l={return:g},this.h=this.v};function F(g,w,I){return g.h=I,{value:w}}function B(g){this.h=new C,this.i=g}function H(g,w){S(g.h);var I=g.h.j;return I?X(g,"return"in I?I.return:function(R){return{value:R,done:!0}},w,g.h.return):(g.h.return(w),Z(g))}function X(g,w,I,R){try{var L=w.call(g.h.j,I);if(!(L instanceof Object))throw new TypeError("Iterator result "+L+" is not an object");if(!L.done)return g.h.m=!1,L;var G=L.value}catch(V){return g.h.j=null,O(g.h,V),Z(g)}return g.h.j=null,R.call(g.h,G),Z(g)}function Z(g){for(;g.h.h;)try{var w=g.i(g.h);if(w)return g.h.m=!1,{value:w.value,done:!1}}catch(I){g.h.i=void 0,O(g.h,I)}if(g.h.m=!1,g.h.l){if(w=g.h.l,g.h.l=null,w.na)throw w.ma;return{value:w.return,done:!0}}return{value:void 0,done:!0}}function te(g){this.next=function(w){return S(g.h),g.h.j?w=X(g,g.h.j.next,w,g.h.u):(g.h.u(w),w=Z(g)),w},this.throw=function(w){return S(g.h),g.h.j?w=X(g,g.h.j.throw,w,g.h.u):(O(g.h,w),w=Z(g)),w},this.return=function(w){return H(g,w)},this[Symbol.iterator]=function(){return this}}function J(g){function w(R){return g.next(R)}function I(R){return g.throw(R)}return new Promise(function(R,L){function G(V){V.done?R(V.value):Promise.resolve(V.value).then(w,I).then(G,L)}G(g.next())})}function ae(g){return J(new te(new B(g)))}i("Promise",function(g){function w(V){this.i=0,this.j=void 0,this.h=[],this.u=!1;var q=this.l();try{V(q.resolve,q.reject)}catch(ee){q.reject(ee)}}function I(){this.h=null}function R(V){return V instanceof w?V:new w(function(q){q(V)})}if(g)return g;I.prototype.i=function(V){if(this.h==null){this.h=[];var q=this;this.j(function(){q.m()})}this.h.push(V)};var L=o.setTimeout;I.prototype.j=function(V){L(V,0)},I.prototype.m=function(){for(;this.h&&this.h.length;){var V=this.h;this.h=[];for(var q=0;q<V.length;++q){var ee=V[q];V[q]=null;try{ee()}catch(me){this.l(me)}}}this.h=null},I.prototype.l=function(V){this.j(function(){throw V})},w.prototype.l=function(){function V(me){return function(ge){ee||(ee=!0,me.call(q,ge))}}var q=this,ee=!1;return{resolve:V(this.I),reject:V(this.m)}},w.prototype.I=function(V){if(V===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(V instanceof w)this.L(V);else{e:switch(typeof V){case"object":var q=V!=null;break e;case"function":q=!0;break e;default:q=!1}q?this.F(V):this.s(V)}},w.prototype.F=function(V){var q=void 0;try{q=V.then}catch(ee){this.m(ee);return}typeof q=="function"?this.M(q,V):this.s(V)},w.prototype.m=function(V){this.v(2,V)},w.prototype.s=function(V){this.v(1,V)},w.prototype.v=function(V,q){if(this.i!=0)throw Error("Cannot settle("+V+", "+q+"): Promise already settled in state"+this.i);this.i=V,this.j=q,this.i===2&&this.K(),this.H()},w.prototype.K=function(){var V=this;L(function(){if(V.D()){var q=o.console;typeof q<"u"&&q.error(V.j)}},1)},w.prototype.D=function(){if(this.u)return!1;var V=o.CustomEvent,q=o.Event,ee=o.dispatchEvent;return typeof ee>"u"?!0:(typeof V=="function"?V=new V("unhandledrejection",{cancelable:!0}):typeof q=="function"?V=new q("unhandledrejection",{cancelable:!0}):(V=o.document.createEvent("CustomEvent"),V.initCustomEvent("unhandledrejection",!1,!0,V)),V.promise=this,V.reason=this.j,ee(V))},w.prototype.H=function(){if(this.h!=null){for(var V=0;V<this.h.length;++V)G.i(this.h[V]);this.h=null}};var G=new I;return w.prototype.L=function(V){var q=this.l();V.T(q.resolve,q.reject)},w.prototype.M=function(V,q){var ee=this.l();try{V.call(q,ee.resolve,ee.reject)}catch(me){ee.reject(me)}},w.prototype.then=function(V,q){function ee(Pe,Ie){return typeof Pe=="function"?function(tt){try{me(Pe(tt))}catch(Tt){ge(Tt)}}:Ie}var me,ge,Qe=new w(function(Pe,Ie){me=Pe,ge=Ie});return this.T(ee(V,me),ee(q,ge)),Qe},w.prototype.catch=function(V){return this.then(void 0,V)},w.prototype.T=function(V,q){function ee(){switch(me.i){case 1:V(me.j);break;case 2:q(me.j);break;default:throw Error("Unexpected state: "+me.i)}}var me=this;this.h==null?G.i(ee):this.h.push(ee),this.u=!0},w.resolve=R,w.reject=function(V){return new w(function(q,ee){ee(V)})},w.race=function(V){return new w(function(q,ee){for(var me=a(V),ge=me.next();!ge.done;ge=me.next())R(ge.value).T(q,ee)})},w.all=function(V){var q=a(V),ee=q.next();return ee.done?R([]):new w(function(me,ge){function Qe(tt){return function(Tt){Pe[tt]=Tt,Ie--,Ie==0&&me(Pe)}}var Pe=[],Ie=0;do Pe.push(void 0),Ie++,R(ee.value).T(Qe(Pe.length-1),ge),ee=q.next();while(!ee.done)})},w});function ye(g,w){g instanceof String&&(g+="");var I=0,R=!1,L={next:function(){if(!R&&I<g.length){var G=I++;return{value:w(G,g[G]),done:!1}}return R=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.keys",function(g){return g||function(){return ye(this,function(w){return w})}}),i("Array.prototype.fill",function(g){return g||function(w,I,R){var L=this.length||0;for(0>I&&(I=Math.max(0,L+I)),(R==null||R>L)&&(R=L),R=Number(R),0>R&&(R=Math.max(0,L+R)),I=Number(I||0);I<R;I++)this[I]=w;return this}});function Oe(g){return g||Array.prototype.fill}i("Int8Array.prototype.fill",Oe),i("Uint8Array.prototype.fill",Oe),i("Uint8ClampedArray.prototype.fill",Oe),i("Int16Array.prototype.fill",Oe),i("Uint16Array.prototype.fill",Oe),i("Int32Array.prototype.fill",Oe),i("Uint32Array.prototype.fill",Oe),i("Float32Array.prototype.fill",Oe),i("Float64Array.prototype.fill",Oe),i("Object.is",function(g){return g||function(w,I){return w===I?w!==0||1/w===1/I:w!==w&&I!==I}}),i("Array.prototype.includes",function(g){return g||function(w,I){var R=this;R instanceof String&&(R=String(R));var L=R.length;for(I=I||0,0>I&&(I=Math.max(I+L,0));I<L;I++){var G=R[I];if(G===w||Object.is(G,w))return!0}return!1}}),i("String.prototype.includes",function(g){return g||function(w,I){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(w instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(w,I||0)!==-1}});var Ye=this||self;function Fe(g,w){g=g.split(".");var I=Ye;g[0]in I||typeof I.execScript>"u"||I.execScript("var "+g[0]);for(var R;g.length&&(R=g.shift());)g.length||w===void 0?I[R]&&I[R]!==Object.prototype[R]?I=I[R]:I=I[R]={}:I[R]=w}function Dt(g){var w;e:{if((w=Ye.navigator)&&(w=w.userAgent))break e;w=""}return w.indexOf(g)!=-1}var oe=Array.prototype.map?function(g,w){return Array.prototype.map.call(g,w,void 0)}:function(g,w){for(var I=g.length,R=Array(I),L=typeof g=="string"?g.split(""):g,G=0;G<I;G++)G in L&&(R[G]=w.call(void 0,L[G],G,g));return R},pe={},ie=null;function Ce(g){var w=g.length,I=3*w/4;I%3?I=Math.floor(I):"=.".indexOf(g[w-1])!=-1&&(I="=.".indexOf(g[w-2])!=-1?I-2:I-1);var R=new Uint8Array(I),L=0;return ve(g,function(G){R[L++]=G}),L!==I?R.subarray(0,L):R}function ve(g,w){function I(ee){for(;R<g.length;){var me=g.charAt(R++),ge=ie[me];if(ge!=null)return ge;if(!/^[\s\xa0]*$/.test(me))throw Error("Unknown base64 encoding at char: "+me)}return ee}De();for(var R=0;;){var L=I(-1),G=I(0),V=I(64),q=I(64);if(q===64&&L===-1)break;w(L<<2|G>>4),V!=64&&(w(G<<4&240|V>>2),q!=64&&w(V<<6&192|q))}}function De(){if(!ie){ie={};for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),w=["+/=","+/","-_=","-_.","-_"],I=0;5>I;I++){var R=g.concat(w[I].split(""));pe[I]=R;for(var L=0;L<R.length;L++){var G=R[L];ie[G]===void 0&&(ie[G]=L)}}}}var Te=typeof Uint8Array<"u",ut=!(Dt("Trident")||Dt("MSIE"))&&typeof Ye.btoa=="function";function be(g){if(!ut){var w;w===void 0&&(w=0),De(),w=pe[w];for(var I=Array(Math.floor(g.length/3)),R=w[64]||"",L=0,G=0;L<g.length-2;L+=3){var V=g[L],q=g[L+1],ee=g[L+2],me=w[V>>2];V=w[(V&3)<<4|q>>4],q=w[(q&15)<<2|ee>>6],ee=w[ee&63],I[G++]=me+V+q+ee}switch(me=0,ee=R,g.length-L){case 2:me=g[L+1],ee=w[(me&15)<<2]||R;case 1:g=g[L],I[G]=w[g>>2]+w[(g&3)<<4|me>>4]+ee+R}return I.join("")}for(w="";10240<g.length;)w+=String.fromCharCode.apply(null,g.subarray(0,10240)),g=g.subarray(10240);return w+=String.fromCharCode.apply(null,g),btoa(w)}var dt=RegExp("[-_.]","g");function pt(g){switch(g){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Hn(g){if(!ut)return Ce(g);dt.test(g)&&(g=g.replace(dt,pt)),g=atob(g);for(var w=new Uint8Array(g.length),I=0;I<g.length;I++)w[I]=g.charCodeAt(I);return w}var En;function Yt(){return En||(En=new Uint8Array(0))}var gn={},dn=typeof Uint8Array.prototype.slice=="function",gt=0,en=0;function fn(g){var w=0>g;g=Math.abs(g);var I=g>>>0;g=Math.floor((g-I)/4294967296),w&&(I=a(wo(I,g)),w=I.next().value,g=I.next().value,I=w),gt=I>>>0,en=g>>>0}var io=typeof BigInt=="function";function wo(g,w){return w=~w,g?g=~g+1:w+=1,[g,w]}function Eo(g,w){this.i=g>>>0,this.h=w>>>0}function Yn(g){if(!g)return Kr||(Kr=new Eo(0,0));if(!/^-?\d+$/.test(g))return null;if(16>g.length)fn(Number(g));else if(io)g=BigInt(g),gt=Number(g&BigInt(4294967295))>>>0,en=Number(g>>BigInt(32)&BigInt(4294967295));else{var w=+(g[0]==="-");en=gt=0;for(var I=g.length,R=w,L=(I-w)%6+w;L<=I;R=L,L+=6)R=Number(g.slice(R,L)),en*=1e6,gt=1e6*gt+R,4294967296<=gt&&(en+=gt/4294967296|0,gt%=4294967296);w&&(w=a(wo(gt,en)),g=w.next().value,w=w.next().value,gt=g,en=w)}return new Eo(gt,en)}var Kr;function Ir(g,w){return Error("Invalid wire type: "+g+" (at position "+w+")")}function so(){return Error("Failed to read varint, encoding is invalid.")}function ao(g,w){return Error("Tried to read past the end of the data "+w+" > "+g)}function Mr(){throw Error("Invalid UTF8")}function uo(g,w){return w=String.fromCharCode.apply(null,w),g==null?w:g+w}var Co=void 0,As,ca=typeof TextDecoder<"u",la,To=typeof TextEncoder<"u",Fc;function Ha(g){if(g!==gn)throw Error("illegal external caller")}function da(g,w){if(Ha(w),this.V=g,g!=null&&g.length===0)throw Error("ByteString should be constructed with non-empty values")}function ld(){return Fc||(Fc=new da(null,gn))}function ip(g){Ha(gn);var w=g.V;return w=w==null||Te&&w!=null&&w instanceof Uint8Array?w:typeof w=="string"?Hn(w):null,w==null?w:g.V=w}function W2(g){if(typeof g=="string")return{buffer:Hn(g),C:!1};if(Array.isArray(g))return{buffer:new Uint8Array(g),C:!1};if(g.constructor===Uint8Array)return{buffer:g,C:!1};if(g.constructor===ArrayBuffer)return{buffer:new Uint8Array(g),C:!1};if(g.constructor===da)return{buffer:ip(g)||Yt(),C:!0};if(g instanceof Uint8Array)return{buffer:new Uint8Array(g.buffer,g.byteOffset,g.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function H0(g,w){this.i=null,this.m=!1,this.h=this.j=this.l=0,yg(this,g,w)}function yg(g,w,I){I=I===void 0?{}:I,g.S=I.S===void 0?!1:I.S,w&&(w=W2(w),g.i=w.buffer,g.m=w.C,g.l=0,g.j=g.i.length,g.h=g.l)}H0.prototype.reset=function(){this.h=this.l};function Wa(g,w){if(g.h=w,w>g.j)throw ao(g.j,w)}function Pc(g){var w=g.i,I=g.h,R=w[I++],L=R&127;if(R&128&&(R=w[I++],L|=(R&127)<<7,R&128&&(R=w[I++],L|=(R&127)<<14,R&128&&(R=w[I++],L|=(R&127)<<21,R&128&&(R=w[I++],L|=R<<28,R&128&&w[I++]&128&&w[I++]&128&&w[I++]&128&&w[I++]&128&&w[I++]&128)))))throw so();return Wa(g,I),L}function W0(g,w){if(0>w)throw Error("Tried to read a negative byte length: "+w);var I=g.h,R=I+w;if(R>g.j)throw ao(w,g.j-I);return g.h=R,I}var q0=[];function vg(){this.h=[]}vg.prototype.length=function(){return this.h.length},vg.prototype.end=function(){var g=this.h;return this.h=[],g};function K0(g,w,I){for(;0<I||127<w;)g.h.push(w&127|128),w=(w>>>7|I<<25)>>>0,I>>>=7;g.h.push(w)}function qa(g,w){for(;127<w;)g.h.push(w&127|128),w>>>=7;g.h.push(w)}function xg(g,w){if(q0.length){var I=q0.pop();yg(I,g,w),g=I}else g=new H0(g,w);this.h=g,this.j=this.h.h,this.i=this.l=-1,this.setOptions(w)}xg.prototype.setOptions=function(g){g=g===void 0?{}:g,this.ca=g.ca===void 0?!1:g.ca},xg.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function X0(g){var w=g.h;if(w.h==w.j)return!1;g.j=g.h.h;var I=Pc(g.h)>>>0;if(w=I>>>3,I&=7,!(0<=I&&5>=I))throw Ir(I,g.j);if(1>w)throw Error("Invalid field number: "+w+" (at position "+g.j+")");return g.l=w,g.i=I,!0}function sp(g){switch(g.i){case 0:if(g.i!=0)sp(g);else e:{g=g.h;for(var w=g.h,I=w+10,R=g.i;w<I;)if(!(R[w++]&128)){Wa(g,w);break e}throw so()}break;case 1:g=g.h,Wa(g,g.h+8);break;case 2:g.i!=2?sp(g):(w=Pc(g.h)>>>0,g=g.h,Wa(g,g.h+w));break;case 5:g=g.h,Wa(g,g.h+4);break;case 3:w=g.l;do{if(!X0(g))throw Error("Unmatched start-group tag: stream EOF");if(g.i==4){if(g.l!=w)throw Error("Unmatched end-group tag");break}sp(g)}while(!0);break;default:throw Ir(g.i,g.j)}}var $c=[];function q2(){this.j=[],this.i=0,this.h=new vg}function Ka(g,w){w.length!==0&&(g.j.push(w),g.i+=w.length)}function K2(g,w){if(w=w.R){Ka(g,g.h.end());for(var I=0;I<w.length;I++)Ka(g,ip(w[I])||Yt())}}var fa=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function Mu(g,w){return fa?g[fa]|=w:g.A!==void 0?g.A|=w:(Object.defineProperties(g,{A:{value:w,configurable:!0,writable:!0,enumerable:!1}}),w)}function Y0(g,w){fa?g[fa]&&(g[fa]&=~w):g.A!==void 0&&(g.A&=~w)}function Zn(g){var w;return fa?w=g[fa]:w=g.A,w??0}function Rs(g,w){fa?g[fa]=w:g.A!==void 0?g.A=w:Object.defineProperties(g,{A:{value:w,configurable:!0,writable:!0,enumerable:!1}})}function bg(g){return Mu(g,1),g}function X2(g,w){Rs(w,(g|0)&-51)}function dd(g,w){Rs(w,(g|18)&-41)}var wg={};function ap(g){return g!==null&&typeof g=="object"&&!Array.isArray(g)&&g.constructor===Object}var fd,Z0=[];Rs(Z0,23),fd=Object.freeze(Z0);function Eg(g){if(Zn(g.o)&2)throw Error("Cannot mutate an immutable Message")}function Cg(g){var w=g.length;(w=w?g[w-1]:void 0)&&ap(w)?w.g=1:(w={},g.push((w.g=1,w)))}function pd(g){var w=g.i+g.G;return g.B||(g.B=g.o[w]={})}function Hi(g,w){return w===-1?null:w>=g.i?g.B?g.B[w]:void 0:g.o[w+g.G]}function Vo(g,w,I,R){Eg(g),hd(g,w,I,R)}function hd(g,w,I,R){g.j&&(g.j=void 0),w>=g.i||R?pd(g)[w]=I:(g.o[w+g.G]=I,(g=g.B)&&w in g&&delete g[w])}function Tg(g,w,I,R){var L=Hi(g,w);Array.isArray(L)||(L=fd);var G=Zn(L);if(G&1||bg(L),R)G&2||Mu(L,2),I&1||Object.freeze(L);else{R=!(I&2);var V=G&2;I&1||!V?R&&G&16&&!V&&Y0(L,16):(L=bg(Array.prototype.slice.call(L)),hd(g,w,L))}return L}function _g(g,w){var I=Hi(g,w),R=I==null?I:typeof I=="number"||I==="NaN"||I==="Infinity"||I==="-Infinity"?Number(I):void 0;return R!=null&&R!==I&&hd(g,w,R),R}function Ig(g,w,I,R,L){g.h||(g.h={});var G=g.h[I],V=Tg(g,I,3,L);if(!G){var q=V;G=[];var ee=!!(Zn(g.o)&16);V=!!(Zn(q)&2);var me=q;!L&&V&&(q=Array.prototype.slice.call(q));for(var ge=V,Qe=0;Qe<q.length;Qe++){var Pe=q[Qe],Ie=w,tt=!1;if(tt=tt===void 0?!1:tt,Pe=Array.isArray(Pe)?new Ie(Pe):tt?new Ie:void 0,Pe!==void 0){Ie=Pe.o;var Tt=tt=Zn(Ie);V&&(Tt|=2),ee&&(Tt|=16),Tt!=tt&&Rs(Ie,Tt),Ie=Tt,ge=ge||!!(2&Ie),G.push(Pe)}}return g.h[I]=G,ee=Zn(q),w=ee|33,w=ge?w&-9:w|8,ee!=w&&(ge=q,Object.isFrozen(ge)&&(ge=Array.prototype.slice.call(ge)),Rs(ge,w),q=ge),me!==q&&hd(g,I,q),(L||R&&V)&&Mu(G,2),R&&Object.freeze(G),G}return L||(L=Object.isFrozen(G),R&&!L?Object.freeze(G):!R&&L&&(G=Array.prototype.slice.call(G),g.h[I]=G)),G}function md(g,w,I){var R=!!(Zn(g.o)&2);if(w=Ig(g,w,I,R,R),g=Tg(g,I,3,R),!(R||Zn(g)&8)){for(R=0;R<w.length;R++){if(I=w[R],Zn(I.o)&2){var L=ex(I,!1);L.j=I}else L=I;I!==L&&(w[R]=L,g[R]=L.o)}Mu(g,8)}return w}function Wi(g,w,I){if(I!=null&&typeof I!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof I+": "+I);Vo(g,w,I)}function Q0(g,w,I,R,L){Eg(g);var G=Ig(g,I,w,!1,!1);return I=R??new I,g=Tg(g,w,2,!1),L!=null?(G.splice(L,0,I),g.splice(L,0,I.o)):(G.push(I),g.push(I.o)),I.C()&&Y0(g,8),I}function up(g,w){return g??w}function ks(g,w,I){return I=I===void 0?0:I,up(_g(g,w),I)}var cp;function J0(g){switch(typeof g){case"number":return isFinite(g)?g:String(g);case"object":if(g)if(Array.isArray(g)){if(Zn(g)&128)return g=Array.prototype.slice.call(g),Cg(g),g}else{if(Te&&g!=null&&g instanceof Uint8Array)return be(g);if(g instanceof da){var w=g.V;return w==null?"":typeof w=="string"?w:g.V=be(w)}}}return g}function Sg(g,w,I,R){if(g!=null){if(Array.isArray(g))g=lp(g,w,I,R!==void 0);else if(ap(g)){var L={},G;for(G in g)L[G]=Sg(g[G],w,I,R);g=L}else g=w(g,R);return g}}function lp(g,w,I,R){var L=Zn(g);R=R?!!(L&16):void 0,g=Array.prototype.slice.call(g);for(var G=0;G<g.length;G++)g[G]=Sg(g[G],w,I,R);return I(L,g),g}function Dg(g){return g.ja===wg?g.toJSON():J0(g)}function Y2(g,w){g&128&&Cg(w)}function Ng(g,w,I){if(I=I===void 0?dd:I,g!=null){if(Te&&g instanceof Uint8Array)return g.length?new da(new Uint8Array(g),gn):ld();if(Array.isArray(g)){var R=Zn(g);return R&2?g:w&&!(R&32)&&(R&16||R===0)?(Rs(g,R|2),g):(g=lp(g,Ng,R&4?dd:I,!0),w=Zn(g),w&4&&w&2&&Object.freeze(g),g)}return g.ja===wg?Ag(g):g}}function gd(g,w,I,R,L,G,V){if(g=g.h&&g.h[I]){if(R=Zn(g),R&2?R=g:(G=oe(g,Ag),dd(R,G),Object.freeze(G),R=G),Eg(w),V=R==null?fd:bg([]),R!=null){for(G=!!R.length,g=0;g<R.length;g++){var q=R[g];G=G&&!(Zn(q.o)&2),V[g]=q.o}G=(G?8:0)|1,g=Zn(V),(g&G)!==G&&(Object.isFrozen(V)&&(V=Array.prototype.slice.call(V)),Rs(V,g|G)),w.h||(w.h={}),w.h[I]=R}else w.h&&(w.h[I]=void 0);hd(w,I,V,L)}else Vo(w,I,Ng(R,G,V),L)}function Ag(g){return Zn(g.o)&2||(g=ex(g,!0),Mu(g.o,2)),g}function ex(g,w){var I=g.o,R=[];Mu(R,16);var L=g.constructor.h;if(L&&R.push(L),L=g.B,L){R.length=I.length,R.fill(void 0,R.length,I.length);var G={};R[R.length-1]=G}Zn(I)&128&&Cg(R),w=w||g.C()?dd:X2,G=g.constructor,cp=R,R=new G(R),cp=void 0,g.R&&(R.R=g.R.slice()),G=!!(Zn(I)&16);for(var V=L?I.length-1:I.length,q=0;q<V;q++)gd(g,R,q-g.G,I[q],!1,G,w);if(L)for(var ee in L)gd(g,R,+ee,L[ee],!0,G,w);return R}function co(g,w,I){g==null&&(g=cp),cp=void 0;var R=this.constructor.i||0,L=0<R,G=this.constructor.h,V=!1;if(g==null){g=G?[G]:[];var q=48,ee=!0;L&&(R=0,q|=128),Rs(g,q)}else{if(!Array.isArray(g)||G&&G!==g[0])throw Error();var me=q=Mu(g,0);if((ee=(16&me)!==0)&&((V=(32&me)!==0)||(me|=32)),L){if(128&me)R=0;else if(0<g.length){var ge=g[g.length-1];if(ap(ge)&&"g"in ge){R=0,me|=128,delete ge.g;var Qe=!0,Pe;for(Pe in ge){Qe=!1;break}Qe&&g.pop()}}}else if(128&me)throw Error();q!==me&&Rs(g,me)}this.G=(G?0:-1)-R,this.h=void 0,this.o=g;e:{if(G=this.o.length,R=G-1,G&&(G=this.o[R],ap(G))){this.B=G,this.i=R-this.G;break e}w!==void 0&&-1<w?(this.i=Math.max(w,R+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!L&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(I){w=ee&&!V&&!0,L=this.i;var Ie;for(ee=0;ee<I.length;ee++)V=I[ee],V<L?(V+=this.G,(R=g[V])?Rg(R,w):g[V]=fd):(Ie||(Ie=pd(this)),(R=Ie[V])?Rg(R,w):Ie[V]=fd)}}co.prototype.toJSON=function(){return lp(this.o,Dg,Y2)},co.prototype.C=function(){return!!(Zn(this.o)&2)};function Rg(g,w){if(Array.isArray(g)){var I=Zn(g),R=1;!w||I&2||(R|=16),(I&R)!==R&&Rs(g,I|R)}}co.prototype.ja=wg,co.prototype.toString=function(){return this.o.toString()};function dp(g,w,I){if(I){var R={},L;for(L in I){var G=I[L],V=G.qa;V||(R.J=G.wa||G.oa.W,G.ia?(R.aa=Pg(G.ia),V=function(q){return function(ee,me,ge){return q.J(ee,me,ge,q.aa)}}(R)):G.ka?(R.Z=$g(G.da.P,G.ka),V=function(q){return function(ee,me,ge){return q.J(ee,me,ge,q.Z)}}(R)):V=R.J,G.qa=V),V(w,g,G.da),R={J:R.J,aa:R.aa,Z:R.Z}}}K2(w,g)}var fp=Symbol();function kg(g,w,I){return g[fp]||(g[fp]=function(R,L){return w(R,L,I)})}function pp(g){var w=g[fp];if(!w){var I=Vg(g);w=function(R,L){return nx(R,L,I)},g[fp]=w}return w}function Og(g){var w=g.ia;if(w)return pp(w);if(w=g.va)return kg(g.da.P,w,g.ka)}function Lc(g){var w=Og(g),I=g.da,R=g.oa.U;return w?function(L,G){return R(L,G,I,w)}:function(L,G){return R(L,G,I)}}function Mg(g,w){var I=g[w];return typeof I=="function"&&I.length===0&&(I=I(),g[w]=I),Array.isArray(I)&&(yd in I||Vc in I||0<I.length&&typeof I[0]=="function")?I:void 0}function Fg(g,w,I,R,L,G){w.P=g[0];var V=1;if(g.length>V&&typeof g[V]!="number"){var q=g[V++];I(w,q)}for(;V<g.length;){I=g[V++];for(var ee=V+1;ee<g.length&&typeof g[ee]!="number";)ee++;switch(q=g[V++],ee-=V,ee){case 0:R(w,I,q);break;case 1:(ee=Mg(g,V))?(V++,L(w,I,q,ee)):R(w,I,q,g[V++]);break;case 2:ee=V++,ee=Mg(g,ee),L(w,I,q,ee,g[V++]);break;case 3:G(w,I,q,g[V++],g[V++],g[V++]);break;case 4:G(w,I,q,g[V++],g[V++],g[V++],g[V++]);break;default:throw Error("unexpected number of binary field arguments: "+ee)}}return w}var hp=Symbol();function Pg(g){var w=g[hp];if(!w){var I=mp(g);w=function(R,L){return rx(R,L,I)},g[hp]=w}return w}function $g(g,w){var I=g[hp];return I||(I=function(R,L){return dp(R,L,w)},g[hp]=I),I}var Vc=Symbol();function tx(g,w){g.push(w)}function Z2(g,w,I){g.push(w,I.W)}function Q2(g,w,I,R){var L=Pg(R),G=mp(R).P,V=I.W;g.push(w,function(q,ee,me){return V(q,ee,me,G,L)})}function J2(g,w,I,R,L,G){var V=$g(R,G),q=I.W;g.push(w,function(ee,me,ge){return q(ee,me,ge,R,V)})}function mp(g){var w=g[Vc];return w||(w=Fg(g,g[Vc]=[],tx,Z2,Q2,J2),yd in g&&Vc in g&&(g.length=0),w)}var yd=Symbol();function eD(g,w){g[0]=w}function tD(g,w,I,R){var L=I.U;g[w]=R?function(G,V,q){return L(G,V,q,R)}:L}function nD(g,w,I,R,L){var G=I.U,V=pp(R),q=Vg(R).P;g[w]=function(ee,me,ge){return G(ee,me,ge,q,V,L)}}function Lg(g,w,I,R,L,G,V){var q=I.U,ee=kg(R,L,G);g[w]=function(me,ge,Qe){return q(me,ge,Qe,R,ee,V)}}function Vg(g){var w=g[yd];return w||(w=Fg(g,g[yd]={},eD,tD,nD,Lg),yd in g&&Vc in g&&(g.length=0),w)}function nx(g,w,I){for(;X0(w)&&w.i!=4;){var R=w.l,L=I[R];if(!L){var G=I[0];G&&(G=G[R])&&(L=I[R]=Lc(G))}if(!L||!L(w,g,R)){L=w,R=g,G=L.j,sp(L);var V=L;if(!V.ca){if(L=V.h.h-G,V.h.h=G,V=V.h,L==0)L=ld();else{if(G=W0(V,L),V.S&&V.m)L=V.i.subarray(G,G+L);else{V=V.i;var q=G;L=G+L,L=q===L?Yt():dn?V.slice(q,L):new Uint8Array(V.subarray(q,L))}L=L.length==0?ld():new da(L,gn)}(G=R.R)?G.push(L):R.R=[L]}}}return g}function rx(g,w,I){for(var R=I.length,L=R%2==1,G=L?1:0;G<R;G+=2)(0,I[G+1])(w,g,I[G]);dp(g,w,L?I[0]:void 0)}function vd(g,w){return{U:g,W:w}}var qi=vd(function(g,w,I){if(g.i!==5)return!1;g=g.h;var R=g.i,L=g.h,G=R[L],V=R[L+1],q=R[L+2];return R=R[L+3],Wa(g,g.h+4),V=(G<<0|V<<8|q<<16|R<<24)>>>0,g=2*(V>>31)+1,G=V>>>23&255,V&=8388607,Vo(w,I,G==255?V?NaN:1/0*g:G==0?g*Math.pow(2,-149)*V:g*Math.pow(2,G-150)*(V+Math.pow(2,23))),!0},function(g,w,I){if(w=_g(w,I),w!=null){qa(g.h,8*I+5),g=g.h;var R=+w;R===0?0<1/R?gt=en=0:(en=0,gt=2147483648):isNaN(R)?(en=0,gt=2147483647):(R=(I=0>R?-2147483648:0)?-R:R,34028234663852886e22<R?(en=0,gt=(I|2139095040)>>>0):11754943508222875e-54>R?(R=Math.round(R/Math.pow(2,-149)),en=0,gt=(I|R)>>>0):(w=Math.floor(Math.log(R)/Math.LN2),R*=Math.pow(2,-w),R=Math.round(8388608*R),16777216<=R&&++w,en=0,gt=(I|w+127<<23|R&8388607)>>>0)),I=gt,g.h.push(I>>>0&255),g.h.push(I>>>8&255),g.h.push(I>>>16&255),g.h.push(I>>>24&255)}}),Cn=vd(function(g,w,I){if(g.i!==0)return!1;var R=g.h,L=0,G=g=0,V=R.i,q=R.h;do{var ee=V[q++];L|=(ee&127)<<G,G+=7}while(32>G&&ee&128);for(32<G&&(g|=(ee&127)>>4),G=3;32>G&&ee&128;G+=7)ee=V[q++],g|=(ee&127)<<G;if(Wa(R,q),128>ee)R=L>>>0,ee=g>>>0,(g=ee&2147483648)&&(R=~R+1>>>0,ee=~ee>>>0,R==0&&(ee=ee+1>>>0)),R=4294967296*ee+(R>>>0);else throw so();return Vo(w,I,g?-R:R),!0},function(g,w,I){w=Hi(w,I),w!=null&&(typeof w=="string"&&Yn(w),w!=null&&(qa(g.h,8*I),typeof w=="number"?(g=g.h,fn(w),K0(g,gt,en)):(I=Yn(w),K0(g.h,I.i,I.h))))}),yn=vd(function(g,w,I){return g.i!==0?!1:(Vo(w,I,Pc(g.h)),!0)},function(g,w,I){if(w=Hi(w,I),w!=null&&w!=null)if(qa(g.h,8*I),g=g.h,I=w,0<=I)qa(g,I);else{for(w=0;9>w;w++)g.h.push(I&127|128),I>>=7;g.h.push(1)}}),ox=vd(function(g,w,I){if(g.i!==2)return!1;var R=Pc(g.h)>>>0;g=g.h;var L=W0(g,R);if(g=g.i,ca){var G=g,V;(V=As)||(V=As=new TextDecoder("utf-8",{fatal:!0})),g=L+R,G=L===0&&g===G.length?G:G.subarray(L,g);try{var q=V.decode(G)}catch(Qe){if(Co===void 0){try{V.decode(new Uint8Array([128]))}catch{}try{V.decode(new Uint8Array([97])),Co=!0}catch{Co=!1}}throw!Co&&(As=void 0),Qe}}else{q=L,R=q+R,L=[];for(var ee=null,me,ge;q<R;)me=g[q++],128>me?L.push(me):224>me?q>=R?Mr():(ge=g[q++],194>me||(ge&192)!==128?(q--,Mr()):L.push((me&31)<<6|ge&63)):240>me?q>=R-1?Mr():(ge=g[q++],(ge&192)!==128||me===224&&160>ge||me===237&&160<=ge||((G=g[q++])&192)!==128?(q--,Mr()):L.push((me&15)<<12|(ge&63)<<6|G&63)):244>=me?q>=R-2?Mr():(ge=g[q++],(ge&192)!==128||(me<<28)+(ge-144)>>30||((G=g[q++])&192)!==128||((V=g[q++])&192)!==128?(q--,Mr()):(me=(me&7)<<18|(ge&63)<<12|(G&63)<<6|V&63,me-=65536,L.push((me>>10&1023)+55296,(me&1023)+56320))):Mr(),8192<=L.length&&(ee=uo(ee,L),L.length=0);q=uo(ee,L)}return Vo(w,I,q),!0},function(g,w,I){if(w=Hi(w,I),w!=null){var R=!1;if(R=R===void 0?!1:R,To){if(R&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(w))throw Error("Found an unpaired surrogate");w=(la||(la=new TextEncoder)).encode(w)}else{for(var L=0,G=new Uint8Array(3*w.length),V=0;V<w.length;V++){var q=w.charCodeAt(V);if(128>q)G[L++]=q;else{if(2048>q)G[L++]=q>>6|192;else{if(55296<=q&&57343>=q){if(56319>=q&&V<w.length){var ee=w.charCodeAt(++V);if(56320<=ee&&57343>=ee){q=1024*(q-55296)+ee-56320+65536,G[L++]=q>>18|240,G[L++]=q>>12&63|128,G[L++]=q>>6&63|128,G[L++]=q&63|128;continue}else V--}if(R)throw Error("Found an unpaired surrogate");q=65533}G[L++]=q>>12|224,G[L++]=q>>6&63|128}G[L++]=q&63|128}}w=L===G.length?G:G.subarray(0,L)}qa(g.h,8*I+2),qa(g.h,w.length),Ka(g,g.h.end()),Ka(g,w)}}),ix=vd(function(g,w,I,R,L){if(g.i!==2)return!1;w=Q0(w,I,R),I=g.h.j,R=Pc(g.h)>>>0;var G=g.h.h+R,V=G-I;if(0>=V&&(g.h.j=G,L(w,g,void 0,void 0,void 0),V=G-g.h.h),V)throw Error("Message parsing ended unexpectedly. Expected to read "+(R+" bytes, instead read "+(R-V)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return g.h.h=G,g.h.j=I,!0},function(g,w,I,R,L){if(w=md(w,R,I),w!=null)for(R=0;R<w.length;R++){var G=g;qa(G.h,8*I+2);var V=G.h.end();Ka(G,V),V.push(G.i),G=V,L(w[R],g),V=g;var q=G.pop();for(q=V.i+V.h.length()-q;127<q;)G.push(q&127|128),q>>>=7,V.i++;G.push(q),V.i++}});function Bg(g){return function(w,I){e:{if($c.length){var R=$c.pop();R.setOptions(I),yg(R.h,w,I),w=R}else w=new xg(w,I);try{var L=Vg(g),G=nx(new L.P,w,L);break e}finally{L=w.h,L.i=null,L.m=!1,L.l=0,L.j=0,L.h=0,L.S=!1,w.l=-1,w.i=-1,100>$c.length&&$c.push(w)}G=void 0}return G}}function Ug(g){return function(){var w=new q2;rx(this,w,mp(g)),Ka(w,w.h.end());for(var I=new Uint8Array(w.i),R=w.j,L=R.length,G=0,V=0;V<L;V++){var q=R[V];I.set(q,G),G+=q.length}return w.j=[I],I}}function Bc(g){co.call(this,g)}b(Bc,co);var sx=[Bc,1,yn,2,qi,3,ox,4,ox];Bc.prototype.l=Ug(sx);function gp(g){co.call(this,g,-1,rD)}b(gp,co),gp.prototype.addClassification=function(g,w){return Q0(this,1,Bc,g,w),this};var rD=[1],vr=Bg([gp,1,ix,sx]);function Xa(g){co.call(this,g)}b(Xa,co);var Ya=[Xa,1,qi,2,qi,3,qi,4,qi,5,qi];Xa.prototype.l=Ug(Ya);function Gg(g){co.call(this,g,-1,jg)}b(Gg,co);var jg=[1],Bo=Bg([Gg,1,ix,Ya]);function xd(g){co.call(this,g)}b(xd,co);var zg=[xd,1,qi,2,qi,3,qi,4,qi,5,qi,6,Cn],ax=Bg(zg);xd.prototype.l=Ug(zg);function Hg(g,w,I){if(I=g.createShader(I===0?g.VERTEX_SHADER:g.FRAGMENT_SHADER),g.shaderSource(I,w),g.compileShader(I),!g.getShaderParameter(I,g.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+g.getShaderInfoLog(I));return I}function Wg(g){return md(g,Bc,1).map(function(w){var I=Hi(w,1);return{index:I??0,score:ks(w,2),label:Hi(w,3)!=null?up(Hi(w,3),""):void 0,displayName:Hi(w,4)!=null?up(Hi(w,4),""):void 0}})}function qg(g){return{x:ks(g,1),y:ks(g,2),z:ks(g,3),visibility:_g(g,4)!=null?ks(g,4):void 0}}function _o(g){return g.map(function(w){return md(Bo(w),Xa,1).map(qg)})}function Kg(g,w){this.i=g,this.h=w,this.m=0}function Uo(g,w,I){return oD(g,w),typeof g.h.canvas.transferToImageBitmap=="function"?Promise.resolve(g.h.canvas.transferToImageBitmap()):I?Promise.resolve(g.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(g.h.canvas):(g.j===void 0&&(g.j=document.createElement("canvas")),new Promise(function(R){g.j.height=g.h.canvas.height,g.j.width=g.h.canvas.width,g.j.getContext("2d",{}).drawImage(g.h.canvas,0,0,g.h.canvas.width,g.h.canvas.height),R(g.j)}))}function oD(g,w){var I=g.h;if(g.s===void 0){var R=Hg(I,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),L=Hg(I,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),G=I.createProgram();if(I.attachShader(G,R),I.attachShader(G,L),I.linkProgram(G),!I.getProgramParameter(G,I.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+I.getProgramInfoLog(G));R=g.s=G,I.useProgram(R),L=I.getUniformLocation(R,"sampler0"),g.l={O:I.getAttribLocation(R,"aVertex"),N:I.getAttribLocation(R,"aTex"),xa:L},g.v=I.createBuffer(),I.bindBuffer(I.ARRAY_BUFFER,g.v),I.enableVertexAttribArray(g.l.O),I.vertexAttribPointer(g.l.O,2,I.FLOAT,!1,0,0),I.bufferData(I.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),I.STATIC_DRAW),I.bindBuffer(I.ARRAY_BUFFER,null),g.u=I.createBuffer(),I.bindBuffer(I.ARRAY_BUFFER,g.u),I.enableVertexAttribArray(g.l.N),I.vertexAttribPointer(g.l.N,2,I.FLOAT,!1,0,0),I.bufferData(I.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),I.STATIC_DRAW),I.bindBuffer(I.ARRAY_BUFFER,null),I.uniform1i(L,0)}R=g.l,I.useProgram(g.s),I.canvas.width=w.width,I.canvas.height=w.height,I.viewport(0,0,w.width,w.height),I.activeTexture(I.TEXTURE0),g.i.bindTexture2d(w.glName),I.enableVertexAttribArray(R.O),I.bindBuffer(I.ARRAY_BUFFER,g.v),I.vertexAttribPointer(R.O,2,I.FLOAT,!1,0,0),I.enableVertexAttribArray(R.N),I.bindBuffer(I.ARRAY_BUFFER,g.u),I.vertexAttribPointer(R.N,2,I.FLOAT,!1,0,0),I.bindFramebuffer(I.DRAW_FRAMEBUFFER?I.DRAW_FRAMEBUFFER:I.FRAMEBUFFER,null),I.clearColor(0,0,0,0),I.clear(I.COLOR_BUFFER_BIT),I.colorMask(!0,!0,!0,!0),I.drawArrays(I.TRIANGLE_FAN,0,4),I.disableVertexAttribArray(R.O),I.disableVertexAttribArray(R.N),I.bindBuffer(I.ARRAY_BUFFER,null),g.i.bindTexture2d(0)}function ux(g){this.h=g}var Za=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function yp(g,w){return w+g}function vp(g,w){window[g]=w}function On(g){var w=document.createElement("script");return w.setAttribute("src",g),w.setAttribute("crossorigin","anonymous"),new Promise(function(I){w.addEventListener("load",function(){I()},!1),w.addEventListener("error",function(){I()},!1),document.body.appendChild(w)})}function Qa(){return ae(function(g){switch(g.h){case 1:return g.s=2,F(g,WebAssembly.instantiate(Za),4);case 4:g.h=3,g.s=0;break;case 2:return g.s=0,g.l=null,g.return(!1);case 3:return g.return(!0)}})}function bd(g){if(this.h=g,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=g&&g.locateFile||yp,typeof window=="object")var w=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")w=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=w,g.options){w=a(Object.keys(g.options));for(var I=w.next();!I.done;I=w.next()){I=I.value;var R=g.options[I].default;R!==void 0&&(this.l[I]=typeof R=="function"?R():R)}}}e=bd.prototype,e.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function iD(g){var w,I,R,L,G,V,q,ee,me,ge,Qe;return ae(function(Pe){switch(Pe.h){case 1:return g.ga?(w=g.h.files===void 0?[]:typeof g.h.files=="function"?g.h.files(g.l):g.h.files,F(Pe,Qa(),2)):Pe.return();case 2:if(I=Pe.i,typeof window=="object")return vp("createMediapipeSolutionsWasm",{locateFile:g.locateFile}),vp("createMediapipeSolutionsPackedAssets",{locateFile:g.locateFile}),V=w.filter(function(Ie){return Ie.data!==void 0}),q=w.filter(function(Ie){return Ie.data===void 0}),ee=Promise.all(V.map(function(Ie){var tt=xp(g,Ie.url);if(Ie.path!==void 0){var Tt=Ie.path;tt=tt.then(function(Tn){return g.overrideFile(Tt,Tn),Promise.resolve(Tn)})}return tt})),me=Promise.all(q.map(function(Ie){return Ie.simd===void 0||Ie.simd&&I||!Ie.simd&&!I?On(g.locateFile(Ie.url,g.ha)):Promise.resolve()})).then(function(){var Ie,tt,Tt;return ae(function(Tn){if(Tn.h==1)return Ie=window.createMediapipeSolutionsWasm,tt=window.createMediapipeSolutionsPackedAssets,Tt=g,F(Tn,Ie(tt),2);Tt.i=Tn.i,Tn.h=0})}),ge=function(){return ae(function(Ie){return g.h.graph&&g.h.graph.url?Ie=F(Ie,xp(g,g.h.graph.url),0):(Ie.h=0,Ie=void 0),Ie})}(),F(Pe,Promise.all([me,ee,ge]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return R=w.filter(function(Ie){return Ie.simd===void 0||Ie.simd&&I||!Ie.simd&&!I}).map(function(Ie){return g.locateFile(Ie.url,g.ha)}),importScripts.apply(null,u(R)),L=g,F(Pe,createMediapipeSolutionsWasm(Module),6);case 6:L.i=Pe.i,g.m=new OffscreenCanvas(1,1),g.i.canvas=g.m,G=g.i.GL.createContext(g.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),g.i.GL.makeContextCurrent(G),Pe.h=4;break;case 7:if(g.m=document.createElement("canvas"),Qe=g.m.getContext("webgl2",{}),!Qe&&(Qe=g.m.getContext("webgl",{}),!Qe))return alert("Failed to create WebGL canvas context when passing video frame."),Pe.return();g.K=Qe,g.i.canvas=g.m,g.i.createContext(g.m,!0,!0,{});case 4:g.j=new g.i.SolutionWasm,g.ga=!1,Pe.h=0}})}function Xg(g){var w,I,R,L,G,V,q,ee;return ae(function(me){if(me.h==1){if(g.h.graph&&g.h.graph.url&&g.fa===g.h.graph.url)return me.return();if(g.u=!0,!g.h.graph||!g.h.graph.url){me.h=2;return}return g.fa=g.h.graph.url,F(me,xp(g,g.h.graph.url),3)}for(me.h!=2&&(w=me.i,g.j.loadGraph(w)),I=a(Object.keys(g.D)),R=I.next();!R.done;R=I.next())L=R.value,g.j.overrideFile(L,g.D[L]);if(g.D={},g.h.listeners)for(G=a(g.h.listeners),V=G.next();!V.done;V=G.next())q=V.value,bp(g,q);ee=g.l,g.l={},g.setOptions(ee),me.h=0})}e.reset=function(){var g=this;return ae(function(w){g.j&&(g.j.reset(),g.s={},g.v={}),w.h=0})},e.setOptions=function(g,w){var I=this;if(w=w||this.h.options){for(var R=[],L=[],G={},V=a(Object.keys(g)),q=V.next();!q.done;G={X:G.X,Y:G.Y},q=V.next())if(q=q.value,!(q in this.l&&this.l[q]===g[q])){this.l[q]=g[q];var ee=w[q];ee!==void 0&&(ee.onChange&&(G.X=ee.onChange,G.Y=g[q],R.push(function(me){return function(){var ge;return ae(function(Qe){if(Qe.h==1)return F(Qe,me.X(me.Y),2);ge=Qe.i,ge===!0&&(I.u=!0),Qe.h=0})}}(G))),ee.graphOptionXref&&(q=Object.assign({},{calculatorName:"",calculatorIndex:0},ee.graphOptionXref,{valueNumber:ee.type===1?g[q]:0,valueBoolean:ee.type===0?g[q]:!1,valueString:ee.type===2?g[q]:""}),L.push(q)))}(R.length!==0||L.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(L),this.F=(this.F===void 0?[]:this.F).concat(R))}};function sD(g){var w,I,R,L,G,V,q;return ae(function(ee){switch(ee.h){case 1:if(!g.u)return ee.return();if(!g.F){ee.h=2;break}w=a(g.F),I=w.next();case 3:if(I.done){ee.h=5;break}return R=I.value,F(ee,R(),4);case 4:I=w.next(),ee.h=3;break;case 5:g.F=void 0;case 2:if(g.H){for(L=new g.i.GraphOptionChangeRequestList,G=a(g.H),V=G.next();!V.done;V=G.next())q=V.value,L.push_back(q);g.j.changeOptions(L),L.delete(),g.H=void 0}g.u=!1,ee.h=0}})}e.initialize=function(){var g=this;return ae(function(w){return w.h==1?F(w,iD(g),2):w.h!=3?F(w,Xg(g),3):F(w,sD(g),0)})};function xp(g,w){var I,R;return ae(function(L){return w in g.L?L.return(g.L[w]):(I=g.locateFile(w,""),R=fetch(I).then(function(G){return G.arrayBuffer()}),g.L[w]=R,L.return(R))})}e.overrideFile=function(g,w){this.j?this.j.overrideFile(g,w):this.D[g]=w},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(g,w){var I=this,R,L,G,V,q,ee,me,ge,Qe;return ae(function(Pe){switch(Pe.h){case 1:return I.h.inputs?(R=1e3*(w??performance.now()),F(Pe,I.I,2)):Pe.return();case 2:return F(Pe,I.initialize(),3);case 3:for(L=new I.i.PacketDataList,G=a(Object.keys(g)),V=G.next();!V.done;V=G.next())if(q=V.value,ee=I.h.inputs[q]){e:{var Ie=g[q];switch(ee.type){case"video":var tt=I.s[ee.stream];if(tt||(tt=new Kg(I.i,I.K),I.s[ee.stream]=tt),tt.m===0&&(tt.m=tt.i.createTexture()),typeof HTMLVideoElement<"u"&&Ie instanceof HTMLVideoElement)var Tt=Ie.videoWidth,Tn=Ie.videoHeight;else typeof HTMLImageElement<"u"&&Ie instanceof HTMLImageElement?(Tt=Ie.naturalWidth,Tn=Ie.naturalHeight):(Tt=Ie.width,Tn=Ie.height);Tn={glName:tt.m,width:Tt,height:Tn},Tt=tt.h,Tt.canvas.width=Tn.width,Tt.canvas.height=Tn.height,Tt.activeTexture(Tt.TEXTURE0),tt.i.bindTexture2d(tt.m),Tt.texImage2D(Tt.TEXTURE_2D,0,Tt.RGBA,Tt.RGBA,Tt.UNSIGNED_BYTE,Ie),tt.i.bindTexture2d(0),tt=Tn;break e;case"detections":for(tt=I.s[ee.stream],tt||(tt=new ux(I.i),I.s[ee.stream]=tt),tt.data||(tt.data=new tt.h.DetectionListData),tt.data.reset(Ie.length),Tn=0;Tn<Ie.length;++Tn){Tt=Ie[Tn];var vn=tt.data,Fr=vn.setBoundingBox,mi=Tn,xr=Tt.la,Ht=new xd;if(Wi(Ht,1,xr.ra),Wi(Ht,2,xr.sa),Wi(Ht,3,xr.height),Wi(Ht,4,xr.width),Wi(Ht,5,xr.rotation),Vo(Ht,6,xr.pa),xr=Ht.l(),Fr.call(vn,mi,xr),Tt.ea)for(vn=0;vn<Tt.ea.length;++vn){Ht=Tt.ea[vn],Fr=tt.data,mi=Fr.addNormalizedLandmark,xr=Tn,Ht=Object.assign({},Ht,{visibility:Ht.visibility?Ht.visibility:0});var Pr=new Xa;Wi(Pr,1,Ht.x),Wi(Pr,2,Ht.y),Wi(Pr,3,Ht.z),Ht.visibility&&Wi(Pr,4,Ht.visibility),Ht=Pr.l(),mi.call(Fr,xr,Ht)}if(Tt.ba)for(vn=0;vn<Tt.ba.length;++vn)Fr=tt.data,mi=Fr.addClassification,xr=Tn,Ht=Tt.ba[vn],Pr=new Bc,Wi(Pr,2,Ht.score),Ht.index&&Vo(Pr,1,Ht.index),Ht.label&&Vo(Pr,3,Ht.label),Ht.displayName&&Vo(Pr,4,Ht.displayName),Ht=Pr.l(),mi.call(Fr,xr,Ht)}tt=tt.data;break e;default:tt={}}}switch(me=tt,ge=ee.stream,ee.type){case"video":L.pushTexture2d(Object.assign({},me,{stream:ge,timestamp:R}));break;case"detections":Qe=me,Qe.stream=ge,Qe.timestamp=R,L.pushDetectionList(Qe);break;default:throw Error("Unknown input config type: '"+ee.type+"'")}}return I.j.send(L),F(Pe,I.I,4);case 4:L.delete(),Pe.h=0}})};function aD(g,w,I){var R,L,G,V,q,ee,me,ge,Qe,Pe,Ie,tt,Tt,Tn;return ae(function(vn){switch(vn.h){case 1:if(!I)return vn.return(w);for(R={},L=0,G=a(Object.keys(I)),V=G.next();!V.done;V=G.next())q=V.value,ee=I[q],typeof ee!="string"&&ee.type==="texture"&&w[ee.stream]!==void 0&&++L;1<L&&(g.M=!1),me=a(Object.keys(I)),V=me.next();case 2:if(V.done){vn.h=4;break}if(ge=V.value,Qe=I[ge],typeof Qe=="string")return Tt=R,Tn=ge,F(vn,cx(g,ge,w[Qe]),14);if(Pe=w[Qe.stream],Qe.type==="detection_list"){if(Pe){for(var Fr=Pe.getRectList(),mi=Pe.getLandmarksList(),xr=Pe.getClassificationsList(),Ht=[],Pr=0;Pr<Fr.size();++Pr){var Os=ax(Fr.get(Pr)),dx=ks(Os,1),Ja=ks(Os,2),wp=ks(Os,3),uD=ks(Os,4),cD=ks(Os,5,0),Ep=void 0;Ep=Ep===void 0?0:Ep,Os={la:{ra:dx,sa:Ja,height:wp,width:uD,rotation:cD,pa:up(Hi(Os,6),Ep)},ea:md(Bo(mi.get(Pr)),Xa,1).map(qg),ba:Wg(vr(xr.get(Pr)))},Ht.push(Os)}Fr=Ht}else Fr=[];R[ge]=Fr,vn.h=7;break}if(Qe.type==="proto_list"){if(Pe){for(Fr=Array(Pe.size()),mi=0;mi<Pe.size();mi++)Fr[mi]=Pe.get(mi);Pe.delete()}else Fr=[];R[ge]=Fr,vn.h=7;break}if(Pe===void 0){vn.h=3;break}if(Qe.type==="float_list"){R[ge]=Pe,vn.h=7;break}if(Qe.type==="proto"){R[ge]=Pe,vn.h=7;break}if(Qe.type!=="texture")throw Error("Unknown output config type: '"+Qe.type+"'");return Ie=g.v[ge],Ie||(Ie=new Kg(g.i,g.K),g.v[ge]=Ie),F(vn,Uo(Ie,Pe,g.M),13);case 13:tt=vn.i,R[ge]=tt;case 7:Qe.transform&&R[ge]&&(R[ge]=Qe.transform(R[ge])),vn.h=3;break;case 14:Tt[Tn]=vn.i;case 3:V=me.next(),vn.h=2;break;case 4:return vn.return(R)}})}function cx(g,w,I){var R;return ae(function(L){return typeof I=="number"||I instanceof Uint8Array||I instanceof g.i.Uint8BlobList?L.return(I):I instanceof g.i.Texture2dDataOut?(R=g.v[w],R||(R=new Kg(g.i,g.K),g.v[w]=R),L.return(Uo(R,I,g.M))):L.return(void 0)})}function bp(g,w){for(var I=w.name||"$",R=[].concat(u(w.wants)),L=new g.i.StringList,G=a(w.wants),V=G.next();!V.done;V=G.next())L.push_back(V.value);G=g.i.PacketListener.implement({onResults:function(q){for(var ee={},me=0;me<w.wants.length;++me)ee[R[me]]=q.get(me);var ge=g.listeners[I];ge&&(g.I=aD(g,ee,w.outs).then(function(Qe){Qe=ge(Qe);for(var Pe=0;Pe<w.wants.length;++Pe){var Ie=ee[R[Pe]];typeof Ie=="object"&&Ie.hasOwnProperty&&Ie.hasOwnProperty("delete")&&Ie.delete()}Qe&&(g.I=Qe)}))}}),g.j.attachMultiListener(L,G),L.delete()}e.onResults=function(g,w){this.listeners[w||"$"]=g},Fe("Solution",bd),Fe("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Fu(g){return g===void 0&&(g=0),g===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function lx(g){var w=this;g=g||{},this.h=new bd({locateFile:g.locateFile,files:function(I){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Fu(I.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:_o},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:_o},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(I){return I.map(function(R){return Wg(vr(R))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(I){var R,L,G;return ae(function(V){return V.h==1?(R=Fu(I),L="third_party/mediapipe/modules/hand_landmark/"+R,F(V,xp(w.h,R),2)):(G=V.i,w.h.overrideFile(L,G),V.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}e=lx.prototype,e.close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(g){this.h.onResults(g)},e.initialize=function(){var g=this;return ae(function(w){return F(w,g.h.initialize(),0)})},e.reset=function(){this.h.reset()},e.send=function(g){var w=this;return ae(function(I){return F(I,w.h.send(g),0)})},e.setOptions=function(g){this.h.setOptions(g)},Fe("Hands",lx),Fe("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Fe("VERSION","0.4.1675469240")}).call(zz)});var wH=Ho((u6e,bH)=>{"use strict";bH.exports=$n;var ta=null;try{ta=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function $n(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}$n.prototype.__isLong__;Object.defineProperty($n.prototype,"__isLong__",{value:!0});function Pi(e){return(e&&e.__isLong__)===!0}$n.isLong=Pi;var dH={},fH={};function Cf(e,t){var n,r,o;return t?(e>>>=0,(o=0<=e&&e<256)&&(r=fH[e],r)?r:(n=Ln(e,(e|0)<0?-1:0,!0),o&&(fH[e]=n),n)):(e|=0,(o=-128<=e&&e<128)&&(r=dH[e],r)?r:(n=Ln(e,e<0?-1:0,!1),o&&(dH[e]=n),n))}$n.fromInt=Cf;function na(e,t){if(isNaN(e))return t?Ef:ra;if(t){if(e<0)return Ef;if(e>=gH)return xH}else{if(e<=-hH)return Fi;if(e+1>=hH)return vH}return e<0?na(-e,t).neg():Ln(e%km|0,e/km|0,t)}$n.fromNumber=na;function Ln(e,t,n){return new $n(e,t,n)}$n.fromBits=Ln;var p_=Math.pow;function dF(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return ra;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return dF(e.substring(1),t,n).neg();for(var o=na(p_(n,8)),i=ra,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),n);if(a<8){var c=na(p_(n,a));i=i.mul(c).add(na(u))}else i=i.mul(o),i=i.add(na(u))}return i.unsigned=t,i}$n.fromString=dF;function Ma(e,t){return typeof e=="number"?na(e,t):typeof e=="string"?dF(e,t):Ln(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}$n.fromValue=Ma;var pH=65536,w1e=1<<24,km=pH*pH,gH=km*km,hH=gH/2,mH=Cf(w1e),ra=Cf(0);$n.ZERO=ra;var Ef=Cf(0,!0);$n.UZERO=Ef;var Rm=Cf(1);$n.ONE=Rm;var yH=Cf(1,!0);$n.UONE=yH;var lF=Cf(-1);$n.NEG_ONE=lF;var vH=Ln(-1,2147483647,!1);$n.MAX_VALUE=vH;var xH=Ln(-1,-1,!0);$n.MAX_UNSIGNED_VALUE=xH;var Fi=Ln(0,-2147483648,!1);$n.MIN_VALUE=Fi;var we=$n.prototype;we.toInt=function(){return this.unsigned?this.low>>>0:this.low};we.toNumber=function(){return this.unsigned?(this.high>>>0)*km+(this.low>>>0):this.high*km+(this.low>>>0)};we.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Fi)){var n=na(t),r=this.div(n),o=r.mul(n).sub(this);return r.toString(t)+o.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var i=na(p_(t,6),this.unsigned),s=this,a="";;){var u=s.div(i),c=s.sub(u.mul(i)).toInt()>>>0,d=c.toString(t);if(s=u,s.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};we.getHighBits=function(){return this.high};we.getHighBitsUnsigned=function(){return this.high>>>0};we.getLowBits=function(){return this.low};we.getLowBitsUnsigned=function(){return this.low>>>0};we.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Fi)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&!(t&1<<n);n--);return this.high!=0?n+33:n+1};we.isZero=function(){return this.high===0&&this.low===0};we.eqz=we.isZero;we.isNegative=function(){return!this.unsigned&&this.high<0};we.isPositive=function(){return this.unsigned||this.high>=0};we.isOdd=function(){return(this.low&1)===1};we.isEven=function(){return(this.low&1)===0};we.equals=function(t){return Pi(t)||(t=Ma(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};we.eq=we.equals;we.notEquals=function(t){return!this.eq(t)};we.neq=we.notEquals;we.ne=we.notEquals;we.lessThan=function(t){return this.comp(t)<0};we.lt=we.lessThan;we.lessThanOrEqual=function(t){return this.comp(t)<=0};we.lte=we.lessThanOrEqual;we.le=we.lessThanOrEqual;we.greaterThan=function(t){return this.comp(t)>0};we.gt=we.greaterThan;we.greaterThanOrEqual=function(t){return this.comp(t)>=0};we.gte=we.greaterThanOrEqual;we.ge=we.greaterThanOrEqual;we.compare=function(t){if(Pi(t)||(t=Ma(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};we.comp=we.compare;we.negate=function(){return!this.unsigned&&this.eq(Fi)?Fi:this.not().add(Rm)};we.neg=we.negate;we.add=function(t){Pi(t)||(t=Ma(t));var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,i=this.low&65535,s=t.high>>>16,a=t.high&65535,u=t.low>>>16,c=t.low&65535,d=0,f=0,h=0,m=0;return m+=i+c,h+=m>>>16,m&=65535,h+=o+u,f+=h>>>16,h&=65535,f+=r+a,d+=f>>>16,f&=65535,d+=n+s,d&=65535,Ln(h<<16|m,d<<16|f,this.unsigned)};we.subtract=function(t){return Pi(t)||(t=Ma(t)),this.add(t.neg())};we.sub=we.subtract;we.multiply=function(t){if(this.isZero())return ra;if(Pi(t)||(t=Ma(t)),ta){var n=ta.mul(this.low,this.high,t.low,t.high);return Ln(n,ta.get_high(),this.unsigned)}if(t.isZero())return ra;if(this.eq(Fi))return t.isOdd()?Fi:ra;if(t.eq(Fi))return this.isOdd()?Fi:ra;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(mH)&&t.lt(mH))return na(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=t.high>>>16,u=t.high&65535,c=t.low>>>16,d=t.low&65535,f=0,h=0,m=0,v=0;return v+=s*d,m+=v>>>16,v&=65535,m+=i*d,h+=m>>>16,m&=65535,m+=s*c,h+=m>>>16,m&=65535,h+=o*d,f+=h>>>16,h&=65535,h+=i*c,f+=h>>>16,h&=65535,h+=s*u,f+=h>>>16,h&=65535,f+=r*d+o*c+i*u+s*a,f&=65535,Ln(m<<16|v,f<<16|h,this.unsigned)};we.mul=we.multiply;we.divide=function(t){if(Pi(t)||(t=Ma(t)),t.isZero())throw Error("division by zero");if(ta){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?ta.div_u:ta.div_s)(this.low,this.high,t.low,t.high);return Ln(n,ta.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ef:ra;var r,o,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Ef;if(t.gt(this.shru(1)))return yH;i=Ef}else{if(this.eq(Fi)){if(t.eq(Rm)||t.eq(lF))return Fi;if(t.eq(Fi))return Rm;var s=this.shr(1);return r=s.div(t).shl(1),r.eq(ra)?t.isNegative()?Rm:lF:(o=this.sub(t.mul(r)),i=r.add(o.div(t)),i)}else if(t.eq(Fi))return this.unsigned?Ef:ra;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=ra}for(o=this;o.gte(t);){r=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:p_(2,a-48),c=na(r),d=c.mul(t);d.isNegative()||d.gt(o);)r-=u,c=na(r,this.unsigned),d=c.mul(t);c.isZero()&&(c=Rm),i=i.add(c),o=o.sub(d)}return i};we.div=we.divide;we.modulo=function(t){if(Pi(t)||(t=Ma(t)),ta){var n=(this.unsigned?ta.rem_u:ta.rem_s)(this.low,this.high,t.low,t.high);return Ln(n,ta.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};we.mod=we.modulo;we.rem=we.modulo;we.not=function(){return Ln(~this.low,~this.high,this.unsigned)};we.and=function(t){return Pi(t)||(t=Ma(t)),Ln(this.low&t.low,this.high&t.high,this.unsigned)};we.or=function(t){return Pi(t)||(t=Ma(t)),Ln(this.low|t.low,this.high|t.high,this.unsigned)};we.xor=function(t){return Pi(t)||(t=Ma(t)),Ln(this.low^t.low,this.high^t.high,this.unsigned)};we.shiftLeft=function(t){return Pi(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Ln(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Ln(0,this.low<<t-32,this.unsigned)};we.shl=we.shiftLeft;we.shiftRight=function(t){return Pi(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Ln(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Ln(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};we.shr=we.shiftRight;we.shiftRightUnsigned=function(t){if(Pi(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var r=this.low;return Ln(r>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?Ln(n,0,this.unsigned):Ln(n>>>t-32,0,this.unsigned)};we.shru=we.shiftRightUnsigned;we.shr_u=we.shiftRightUnsigned;we.toSigned=function(){return this.unsigned?Ln(this.low,this.high,!1):this};we.toUnsigned=function(){return this.unsigned?this:Ln(this.low,this.high,!0)};we.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};we.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};we.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};$n.fromBytes=function(t,n,r){return r?$n.fromBytesLE(t,n):$n.fromBytesBE(t,n)};$n.fromBytesLE=function(t,n){return new $n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};$n.fromBytesBE=function(t,n){return new $n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)}});var pW=Ho((Bm,fW)=>{"use strict";var sbe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},kf=sbe();fW.exports=Bm=kf.fetch;kf.fetch&&(Bm.default=kf.fetch.bind(kf));Bm.Headers=kf.Headers;Bm.Request=kf.Request;Bm.Response=kf.Response});var hW=Ho(()=>{"use strict"});var G7=Ho((U7,FF)=>{"use strict";(function(e,t,n){function r(a){var u=this,c=s();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(a),u.s0<0&&(u.s0+=1),u.s1-=c(a),u.s1<0&&(u.s1+=1),u.s2-=c(a),u.s2<0&&(u.s2+=1),c=null}function o(a,u){return u.c=a.c,u.s0=a.s0,u.s1=a.s1,u.s2=a.s2,u}function i(a,u){var c=new r(a),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&o(d,c),f.state=function(){return o(c,{})}),f}function s(){var a=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){a+=c.charCodeAt(d);var f=.02519603282416938*a;a=f>>>0,f-=a,f*=a,a=f>>>0,f-=a,a+=f*4294967296}return(a>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.alea=i})(U7,typeof FF=="object"&&FF,typeof define=="function"&&define)});var z7=Ho((j7,PF)=>{"use strict";(function(e,t,n){function r(s){var a=this,u="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var d=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^d^d>>>8},s===(s|0)?a.x=s:u+=s;for(var c=0;c<u.length+64;c++)a.x^=u.charCodeAt(c)|0,a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function i(s,a){var u=new r(s),c=a&&a.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&o(c,u),d.state=function(){return o(u,{})}),d}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xor128=i})(j7,typeof PF=="object"&&PF,typeof define=="function"&&define)});var W7=Ho((H7,$F)=>{"use strict";(function(e,t,n){function r(s){var a=this,u="";a.next=function(){var d=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(d^d<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:u+=s;for(var c=0;c<u.length+64;c++)a.x^=u.charCodeAt(c)|0,c==u.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function i(s,a){var u=new r(s),c=a&&a.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&o(c,u),d.state=function(){return o(u,{})}),d}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xorwow=i})(H7,typeof $F=="object"&&$F,typeof define=="function"&&define)});var K7=Ho((q7,LF)=>{"use strict";(function(e,t,n){function r(s){var a=this;a.next=function(){var c=a.x,d=a.i,f,h,m;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,a.i=d+1&7,h};function u(c,d){var f,h,m=[];if(d===(d|0))h=m[0]=d;else for(d=""+d,f=0;f<d.length;++f)m[f&7]=m[f&7]<<15^d.charCodeAt(f)+m[f+1&7]<<13;for(;m.length<8;)m.push(0);for(f=0;f<8&&m[f]===0;++f);for(f==8?h=m[7]=-1:h=m[f],c.x=m,c.i=0,f=256;f>0;--f)c.next()}u(a,s)}function o(s,a){return a.x=s.x.slice(),a.i=s.i,a}function i(s,a){s==null&&(s=+new Date);var u=new r(s),c=a&&a.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(c.x&&o(c,u),d.state=function(){return o(u,{})}),d}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xorshift7=i})(q7,typeof LF=="object"&&LF,typeof define=="function"&&define)});var Y7=Ho((X7,VF)=>{"use strict";(function(e,t,n){function r(s){var a=this;a.next=function(){var c=a.w,d=a.X,f=a.i,h,m;return a.w=c=c+1640531527|0,m=d[f+34&127],h=d[f=f+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=d[f]=m^h,a.i=f,m+(c^c>>>16)|0};function u(c,d){var f,h,m,v,x,b=[],C=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,C=Math.max(C,d.length)),m=0,v=-32;v<C;++v)d&&(h^=d.charCodeAt((v+32)%d.length)),v===0&&(x=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(x=x+1640531527|0,f=b[v&127]^=h+x,m=f==0?m+1:0);for(m>=128&&(b[(d&&d.length||0)&127]=-1),m=127,v=4*128;v>0;--v)h=b[m+34&127],f=b[m=m+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,b[m]=h^f;c.w=x,c.X=b,c.i=m}u(a,s)}function o(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function i(s,a){s==null&&(s=+new Date);var u=new r(s),c=a&&a.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(c.X&&o(c,u),d.state=function(){return o(u,{})}),d}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xor4096=i})(X7,typeof VF=="object"&&VF,typeof define=="function"&&define)});var Q7=Ho((Z7,BF)=>{"use strict";(function(e,t,n){function r(s){var a=this,u="";a.next=function(){var d=a.b,f=a.c,h=a.d,m=a.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^m,m=m-d|0,a.b=d=d<<20^d>>>12^f,a.c=f=f-h|0,a.d=h<<16^f>>>16^m,a.a=m-d|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):u+=s;for(var c=0;c<u.length+20;c++)a.b^=u.charCodeAt(c)|0,a.next()}function o(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function i(s,a){var u=new r(s),c=a&&a.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&o(c,u),d.state=function(){return o(u,{})}),d}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.tychei=i})(Z7,typeof BF=="object"&&BF,typeof define=="function"&&define)});var J7=Ho(()=>{"use strict"});var t9=Ho((e9,J_)=>{"use strict";(function(e,t,n){var r=256,o=6,i=52,s="random",a=n.pow(r,o),u=n.pow(2,i),c=u*2,d=r-1,f;function h(O,F,B){var H=[];F=F==!0?{entropy:!0}:F||{};var X=b(x(F.entropy?[O,S(t)]:O??C(),3),H),Z=new m(H),te=function(){for(var J=Z.g(o),ae=a,ye=0;J<u;)J=(J+ye)*r,ae*=r,ye=Z.g(1);for(;J>=c;)J/=2,ae/=2,ye>>>=1;return(J+ye)/ae};return te.int32=function(){return Z.g(4)|0},te.quick=function(){return Z.g(4)/4294967296},te.double=te,b(S(Z.S),t),(F.pass||B||function(J,ae,ye,Oe){return Oe&&(Oe.S&&v(Oe,Z),J.state=function(){return v(Z,{})}),ye?(n[s]=J,ae):J})(te,X,"global"in F?F.global:this==n,F.state)}function m(O){var F,B=O.length,H=this,X=0,Z=H.i=H.j=0,te=H.S=[];for(B||(O=[B++]);X<r;)te[X]=X++;for(X=0;X<r;X++)te[X]=te[Z=d&Z+O[X%B]+(F=te[X])],te[Z]=F;(H.g=function(J){for(var ae,ye=0,Oe=H.i,Ye=H.j,Fe=H.S;J--;)ae=Fe[Oe=d&Oe+1],ye=ye*r+Fe[d&(Fe[Oe]=Fe[Ye=d&Ye+ae])+(Fe[Ye]=ae)];return H.i=Oe,H.j=Ye,ye})(r)}function v(O,F){return F.i=O.i,F.j=O.j,F.S=O.S.slice(),F}function x(O,F){var B=[],H=typeof O,X;if(F&&H=="object")for(X in O)try{B.push(x(O[X],F-1))}catch{}return B.length?B:H=="string"?O:O+"\0"}function b(O,F){for(var B=O+"",H,X=0;X<B.length;)F[d&X]=d&(H^=F[d&X]*19)+B.charCodeAt(X++);return S(F)}function C(){try{var O;return f&&(O=f.randomBytes)?O=O(r):(O=new Uint8Array(r),(e.crypto||e.msCrypto).getRandomValues(O)),S(O)}catch{var F=e.navigator,B=F&&F.plugins;return[+new Date,e,B,e.screen,S(t)]}}function S(O){return String.fromCharCode.apply(0,O)}if(b(n.random(),t),typeof J_=="object"&&J_.exports){J_.exports=h;try{f=J7()}catch{}}else typeof define=="function"&&define.amd?define(function(){return h}):n["seed"+s]=h})(typeof self<"u"?self:e9,[],Math)});var r9=Ho((XJe,n9)=>{"use strict";var XEe=G7(),YEe=z7(),ZEe=W7(),QEe=K7(),JEe=Y7(),eCe=Q7(),Bf=t9();Bf.alea=XEe;Bf.xor128=YEe;Bf.xorwow=ZEe;Bf.xorshift7=QEe;Bf.xor4096=JEe;Bf.tychei=eCe;n9.exports=Bf});function uN(e,t){return Object.is(e,t)}var Vr=null,Yx=!1,cN=1,Qi=Symbol("SIGNAL");function Kt(e){let t=Vr;return Vr=e,t}function R4(){return Vr}var dy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Qx(e){if(Yx)throw new Error("");if(Vr===null)return;Vr.consumerOnSignalRead(e);let t=Vr.nextProducerIndex++;if(t1(Vr),t<Vr.producerNode.length&&Vr.producerNode[t]!==e&&ly(Vr)){let n=Vr.producerNode[t];e1(n,Vr.producerIndexOfThis[t])}Vr.producerNode[t]!==e&&(Vr.producerNode[t]=e,Vr.producerIndexOfThis[t]=ly(Vr)?M4(e,Vr,t):0),Vr.producerLastReadVersion[t]=e.version}function Dae(){cN++}function lN(e){if(!(ly(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===cN)){if(!e.producerMustRecompute(e)&&!fN(e)){aN(e);return}e.producerRecomputeValue(e),aN(e)}}function k4(e){if(e.liveConsumerNode===void 0)return;let t=Yx;Yx=!0;try{for(let n of e.liveConsumerNode)n.dirty||Nae(n)}finally{Yx=t}}function O4(){return Vr?.consumerAllowSignalWrites!==!1}function Nae(e){e.dirty=!0,k4(e),e.consumerMarkedDirty?.(e)}function aN(e){e.dirty=!1,e.lastCleanEpoch=cN}function Jx(e){return e&&(e.nextProducerIndex=0),Kt(e)}function dN(e,t){if(Kt(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(ly(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)e1(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function fN(e){t1(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(lN(n),r!==n.version))return!0}return!1}function pN(e){if(t1(e),ly(e))for(let t=0;t<e.producerNode.length;t++)e1(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function M4(e,t,n){if(F4(e),e.liveConsumerNode.length===0&&P4(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=M4(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function e1(e,t){if(F4(e),e.liveConsumerNode.length===1&&P4(e))for(let r=0;r<e.producerNode.length;r++)e1(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],o=e.liveConsumerNode[t];t1(o),o.producerIndexOfThis[r]=t}}function ly(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function t1(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function F4(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function P4(e){return e.producerNode!==void 0}function $4(e){let t=Object.create(Aae);t.computation=e;let n=()=>{if(lN(t),Qx(t),t.value===Zx)throw t.error;return t.value};return n[Qi]=t,n}var iN=Symbol("UNSET"),sN=Symbol("COMPUTING"),Zx=Symbol("ERRORED"),Aae=vt(xe({},dy),{value:iN,dirty:!0,error:null,equal:uN,producerMustRecompute(e){return e.value===iN||e.value===sN},producerRecomputeValue(e){if(e.value===sN)throw new Error("Detected cycle in computations.");let t=e.value;e.value=sN;let n=Jx(e),r;try{r=e.computation()}catch(o){r=Zx,e.error=o}finally{dN(e,n)}if(t!==iN&&t!==Zx&&r!==Zx&&e.equal(t,r)){e.value=t;return}e.value=r,e.version++}});function Rae(){throw new Error}var L4=Rae;function V4(){L4()}function B4(e){L4=e}var kae=null;function U4(e){let t=Object.create(hN);t.value=e;let n=()=>(Qx(t),t.value);return n[Qi]=t,n}function n1(e,t){O4()||V4(),e.equal(e.value,t)||(e.value=t,Oae(e))}function G4(e,t){O4()||V4(),n1(e,t(e.value))}var hN=vt(xe({},dy),{equal:uN,value:void 0});function Oae(e){e.version++,Dae(),k4(e),kae?.()}function rt(e){return typeof e=="function"}function Op(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var r1=Op(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Nd(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ur=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(rt(r))try{r()}catch(i){t=i instanceof r1?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{j4(i)}catch(s){t=t??[],s instanceof r1?t=[...t,...s.errors]:t.push(s)}}if(t)throw new r1(t)}}add(t){var n;if(t&&t!==this)if(this.closed)j4(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Nd(n,t)}remove(t){let{_finalizers:n}=this;n&&Nd(n,t),t instanceof e&&t._removeParent(this)}};ur.EMPTY=(()=>{let e=new ur;return e.closed=!0,e})();var mN=ur.EMPTY;function o1(e){return e instanceof ur||e&&"closed"in e&&rt(e.remove)&&rt(e.add)&&rt(e.unsubscribe)}function j4(e){rt(e)?e():e.unsubscribe()}var va={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Mp={setTimeout(e,t,...n){let{delegate:r}=Mp;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Mp;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function i1(e){Mp.setTimeout(()=>{let{onUnhandledError:t}=va;if(t)t(e);else throw e})}function fy(){}var z4=gN("C",void 0,void 0);function H4(e){return gN("E",void 0,e)}function W4(e){return gN("N",e,void 0)}function gN(e,t,n){return{kind:e,value:t,error:n}}var Ad=null;function Fp(e){if(va.useDeprecatedSynchronousErrorHandling){let t=!Ad;if(t&&(Ad={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Ad;if(Ad=null,n)throw r}}else e()}function q4(e){va.useDeprecatedSynchronousErrorHandling&&Ad&&(Ad.errorThrown=!0,Ad.error=e)}var Rd=class extends ur{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,o1(t)&&t.add(this)):this.destination=Pae}static create(t,n,r){return new Pp(t,n,r)}next(t){this.isStopped?vN(W4(t),this):this._next(t)}error(t){this.isStopped?vN(H4(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?vN(z4,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Mae=Function.prototype.bind;function yN(e,t){return Mae.call(e,t)}var xN=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){s1(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){s1(r)}else s1(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){s1(n)}}},Pp=class extends Rd{constructor(t,n,r){super();let o;if(rt(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&va.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&yN(t.next,i),error:t.error&&yN(t.error,i),complete:t.complete&&yN(t.complete,i)}):o=t}this.destination=new xN(o)}};function s1(e){va.useDeprecatedSynchronousErrorHandling?q4(e):i1(e)}function Fae(e){throw e}function vN(e,t){let{onStoppedNotification:n}=va;n&&Mp.setTimeout(()=>n(e,t))}var Pae={closed:!0,next:fy,error:Fae,complete:fy};var $p=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Wo(e){return e}function bN(...e){return wN(e)}function wN(e){return e.length===0?Wo:e.length===1?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}var jt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=Lae(n)?n:new Pp(n,r,o);return Fp(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=K4(r),new r((o,i)=>{let s=new Pp({next:a=>{try{n(a)}catch(u){i(u),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[$p](){return this}pipe(...n){return wN(n)(this)}toPromise(n){return n=K4(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return e.create=t=>new e(t),e})();function K4(e){var t;return(t=e??va.Promise)!==null&&t!==void 0?t:Promise}function $ae(e){return e&&rt(e.next)&&rt(e.error)&&rt(e.complete)}function Lae(e){return e&&e instanceof Rd||$ae(e)&&o1(e)}function EN(e){return rt(e?.lift)}function $t(e){return t=>{if(EN(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function kt(e,t,n,r,o){return new CN(e,t,n,r,o)}var CN=class extends Rd{constructor(t,n,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){t.error(u)}}:super._next,this._error=o?function(a){try{o(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Lp(){return $t((e,t)=>{let n=null;e._refCount++;let r=kt(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let o=e._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Vp=class extends jt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,EN(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ur;let n=this.getSubject();t.add(this.source.subscribe(kt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ur.EMPTY)}return t}refCount(){return Lp()(this)}};var X4=Op(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Sr=(()=>{class e extends jt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new a1(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new X4}next(n){Fp(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Fp(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Fp(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?mN:(this.currentObservers=null,i.push(n),new ur(()=>{this.currentObservers=null,Nd(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new jt;return n.source=this,n}}return e.create=(t,n)=>new a1(t,n),e})(),a1=class extends Sr{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:mN}};var Br=class extends Sr{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var TN={now(){return(TN.delegate||Date).now()},delegate:void 0};var u1=class extends ur{constructor(t,n){super()}schedule(t,n=0){return this}};var py={setInterval(e,t,...n){let{delegate:r}=py;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=py;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var c1=class extends u1{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,n),this}requestAsyncId(t,n,r=0){return py.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&py.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,o;try{this.work(t)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Nd(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Bp=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};Bp.now=TN.now;var l1=class extends Bp{constructor(t,n=Bp.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var _N=new l1(c1),Y4=_N;var Ji=new jt(e=>e.complete());function d1(e){return e&&rt(e.schedule)}function Z4(e){return e[e.length-1]}function f1(e){return rt(Z4(e))?e.pop():void 0}function Kc(e){return d1(Z4(e))?e.pop():void 0}function J4(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(d){try{c(r.next(d))}catch(f){s(f)}}function u(d){try{c(r.throw(d))}catch(f){s(f)}}function c(d){d.done?i(d.value):o(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})}function Q4(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function kd(e){return this instanceof kd?(this.v=e,this):new kd(e)}function eL(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(v){return Promise.resolve(v).then(m,f)}}function a(m,v){r[m]&&(o[m]=function(x){return new Promise(function(b,C){i.push([m,x,b,C])>1||u(m,x)})},v&&(o[m]=v(o[m])))}function u(m,v){try{c(r[m](v))}catch(x){h(i[0][3],x)}}function c(m){m.value instanceof kd?Promise.resolve(m.value.v).then(d,f):h(i[0][2],m)}function d(m){u("next",m)}function f(m){u("throw",m)}function h(m,v){m(v),i.shift(),i.length&&u(i[0][0],i[0][1])}}function tL(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Q4=="function"?Q4(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,u){s=e[i](s),o(a,u,s.done,s.value)})}}function o(i,s,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},s)}}var Up=e=>e&&typeof e.length=="number"&&typeof e!="function";function p1(e){return rt(e?.then)}function h1(e){return rt(e[$p])}function m1(e){return Symbol.asyncIterator&&rt(e?.[Symbol.asyncIterator])}function g1(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Vae(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var y1=Vae();function v1(e){return rt(e?.[y1])}function x1(e){return eL(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:o}=yield kd(n.read());if(o)return yield kd(void 0);yield yield kd(r)}}finally{n.releaseLock()}})}function b1(e){return rt(e?.getReader)}function cr(e){if(e instanceof jt)return e;if(e!=null){if(h1(e))return Bae(e);if(Up(e))return Uae(e);if(p1(e))return Gae(e);if(m1(e))return nL(e);if(v1(e))return jae(e);if(b1(e))return zae(e)}throw g1(e)}function Bae(e){return new jt(t=>{let n=e[$p]();if(rt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Uae(e){return new jt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Gae(e){return new jt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,i1)})}function jae(e){return new jt(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function nL(e){return new jt(t=>{Hae(e,t).catch(n=>t.error(n))})}function zae(e){return nL(x1(e))}function Hae(e,t){var n,r,o,i;return J4(this,void 0,void 0,function*(){try{for(n=tL(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})}function bi(e,t,n,r=0,o=!1){let i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function w1(e,t=0){return $t((n,r)=>{n.subscribe(kt(r,o=>bi(r,e,()=>r.next(o),t),()=>bi(r,e,()=>r.complete(),t),o=>bi(r,e,()=>r.error(o),t)))})}function E1(e,t=0){return $t((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function rL(e,t){return cr(e).pipe(E1(t),w1(t))}function oL(e,t){return cr(e).pipe(E1(t),w1(t))}function iL(e,t){return new jt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function sL(e,t){return new jt(n=>{let r;return bi(n,t,()=>{r=e[y1](),bi(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>rt(r?.return)&&r.return()})}function C1(e,t){if(!e)throw new Error("Iterable cannot be null");return new jt(n=>{bi(n,t,()=>{let r=e[Symbol.asyncIterator]();bi(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function aL(e,t){return C1(x1(e),t)}function uL(e,t){if(e!=null){if(h1(e))return rL(e,t);if(Up(e))return iL(e,t);if(p1(e))return oL(e,t);if(m1(e))return C1(e,t);if(v1(e))return sL(e,t);if(b1(e))return aL(e,t)}throw g1(e)}function Vn(e,t){return t?uL(e,t):cr(e)}function st(...e){let t=Kc(e);return Vn(e,t)}function Gp(e,t){let n=rt(e)?e:()=>e,r=o=>o.error(n());return new jt(t?o=>t.schedule(r,0,o):r)}function IN(e){return!!e&&(e instanceof jt||rt(e.lift)&&rt(e.subscribe))}var Hu=Op(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function cL(e){return e instanceof Date&&!isNaN(e)}function xt(e,t){return $t((n,r)=>{let o=0;n.subscribe(kt(r,i=>{r.next(e.call(t,i,o++))}))})}var{isArray:Wae}=Array;function qae(e,t){return Wae(t)?e(...t):e(t)}function jp(e){return xt(t=>qae(e,t))}var{isArray:Kae}=Array,{getPrototypeOf:Xae,prototype:Yae,keys:Zae}=Object;function T1(e){if(e.length===1){let t=e[0];if(Kae(t))return{args:t,keys:null};if(Qae(t)){let n=Zae(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function Qae(e){return e&&typeof e=="object"&&Xae(e)===Yae}function _1(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}function hy(...e){let t=Kc(e),n=f1(e),{args:r,keys:o}=T1(e);if(r.length===0)return Vn([],t);let i=new jt(Jae(r,t,o?s=>_1(o,s):Wo));return n?i.pipe(jp(n)):i}function Jae(e,t,n=Wo){return r=>{lL(t,()=>{let{length:o}=e,i=new Array(o),s=o,a=o;for(let u=0;u<o;u++)lL(t,()=>{let c=Vn(e[u],t),d=!1;c.subscribe(kt(r,f=>{i[u]=f,d||(d=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function lL(e,t,n){e?bi(n,e,t):t()}function dL(e,t,n,r,o,i,s,a){let u=[],c=0,d=0,f=!1,h=()=>{f&&!u.length&&!c&&t.complete()},m=x=>c<r?v(x):u.push(x),v=x=>{i&&t.next(x),c++;let b=!1;cr(n(x,d++)).subscribe(kt(t,C=>{o?.(C),i?m(C):t.next(C)},()=>{b=!0},void 0,()=>{if(b)try{for(c--;u.length&&c<r;){let C=u.shift();s?bi(t,s,()=>v(C)):v(C)}h()}catch(C){t.error(C)}}))};return e.subscribe(kt(t,m,()=>{f=!0,h()})),()=>{a?.()}}function lr(e,t,n=1/0){return rt(t)?lr((r,o)=>xt((i,s)=>t(r,i,o,s))(cr(e(r,o))),n):(typeof t=="number"&&(n=t),$t((r,o)=>dL(r,o,e,n)))}function Xc(e=1/0){return lr(Wo,e)}function fL(){return Xc(1)}function zp(...e){return fL()(Vn(e,Kc(e)))}function I1(e){return new jt(t=>{cr(e()).subscribe(t)})}function SN(...e){let t=f1(e),{args:n,keys:r}=T1(e),o=new jt(i=>{let{length:s}=n;if(!s){i.complete();return}let a=new Array(s),u=s,c=s;for(let d=0;d<s;d++){let f=!1;cr(n[d]).subscribe(kt(i,h=>{f||(f=!0,c--),a[d]=h},()=>u--,void 0,()=>{(!u||!f)&&(c||i.next(r?_1(r,a):a),i.complete())}))}});return t?o.pipe(jp(t)):o}var eue=["addListener","removeListener"],tue=["addEventListener","removeEventListener"],nue=["on","off"];function my(e,t,n,r){if(rt(n)&&(r=n,n=void 0),r)return my(e,t,n).pipe(jp(r));let[o,i]=iue(e)?tue.map(s=>a=>e[s](t,a,n)):rue(e)?eue.map(pL(e,t)):oue(e)?nue.map(pL(e,t)):[];if(!o&&Up(e))return lr(s=>my(s,t,n))(cr(e));if(!o)throw new TypeError("Invalid event target");return new jt(s=>{let a=(...u)=>s.next(1<u.length?u:u[0]);return o(a),()=>i(a)})}function pL(e,t){return n=>r=>e[n](t,r)}function rue(e){return rt(e.addListener)&&rt(e.removeListener)}function oue(e){return rt(e.on)&&rt(e.off)}function iue(e){return rt(e.addEventListener)&&rt(e.removeEventListener)}function hL(e=0,t,n=Y4){let r=-1;return t!=null&&(d1(t)?n=t:r=t),new jt(o=>{let i=cL(e)?+e-n.now():e;i<0&&(i=0);let s=0;return n.schedule(function(){o.closed||(o.next(s++),0<=r?this.schedule(void 0,r):o.complete())},i)})}function DN(e=0,t=_N){return e<0&&(e=0),hL(e,e,t)}function qo(e,t){return $t((n,r)=>{let o=0;n.subscribe(kt(r,i=>e.call(t,i,o++)&&r.next(i)))})}function Yc(e){return $t((t,n)=>{let r=null,o=!1,i;r=t.subscribe(kt(n,void 0,void 0,s=>{i=cr(e(s,Yc(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function mL(e,t,n,r,o){return(i,s)=>{let a=n,u=t,c=0;i.subscribe(kt(s,d=>{let f=c++;u=a?e(u,d,f):(a=!0,d),r&&s.next(u)},o&&(()=>{a&&s.next(u),s.complete()})))}}function Zc(e,t){return rt(t)?lr(e,t,1):lr(e,1)}function Qc(e){return $t((t,n)=>{let r=!1;t.subscribe(kt(n,o=>{r=!0,n.next(o)},()=>{r||n.next(e),n.complete()}))})}function Wu(e){return e<=0?()=>Ji:$t((t,n)=>{let r=0;t.subscribe(kt(n,o=>{++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function NN(e){return xt(()=>e)}function AN(e,t=Wo){return e=e??sue,$t((n,r)=>{let o,i=!0;n.subscribe(kt(r,s=>{let a=t(s);(i||!e(o,a))&&(i=!1,o=a,r.next(s))}))})}function sue(e,t){return e===t}function S1(e=aue){return $t((t,n)=>{let r=!1;t.subscribe(kt(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(e())))})}function aue(){return new Hu}function Hp(e){return $t((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function ru(e,t){let n=arguments.length>=2;return r=>r.pipe(e?qo((o,i)=>e(o,i,r)):Wo,Wu(1),n?Qc(t):S1(()=>new Hu))}function Wp(e){return e<=0?()=>Ji:$t((t,n)=>{let r=[];t.subscribe(kt(n,o=>{r.push(o),e<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function RN(e,t){let n=arguments.length>=2;return r=>r.pipe(e?qo((o,i)=>e(o,i,r)):Wo,Wp(1),n?Qc(t):S1(()=>new Hu))}function kN(e,t){return $t(mL(e,t,arguments.length>=2,!0))}function ON(e){return qo((t,n)=>e<=n)}function MN(...e){let t=Kc(e);return $t((n,r)=>{(t?zp(e,n,t):zp(e,n)).subscribe(r)})}function Do(e,t){return $t((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(kt(r,u=>{o?.unsubscribe();let c=0,d=i++;cr(e(u,d)).subscribe(o=kt(r,f=>r.next(t?t(u,f,d,c++):f),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function FN(e){return $t((t,n)=>{cr(e).subscribe(kt(n,()=>n.complete(),fy)),!n.closed&&t.subscribe(n)})}function Jn(e,t,n){let r=rt(e)||t||n?{next:e,error:t,complete:n}:e;return r?$t((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(kt(i,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),i.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),i.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),i.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Wo}var BN={JSACTION:"jsaction"},UN={JSACTION:"__jsaction",OWNER:"__owner"},xL={};function uue(e){return e[UN.JSACTION]}function gL(e,t){e[UN.JSACTION]=t}function cue(e){return xL[e]}function lue(e,t){xL[e]=t}var Je={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},due=[Je.MOUSEENTER,Je.MOUSELEAVE,"pointerenter","pointerleave"],g4e=[Je.CLICK,Je.DBLCLICK,Je.FOCUSIN,Je.FOCUSOUT,Je.KEYDOWN,Je.KEYUP,Je.KEYPRESS,Je.MOUSEOVER,Je.MOUSEOUT,Je.SUBMIT,Je.TOUCHSTART,Je.TOUCHEND,Je.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],fue=[Je.FOCUS,Je.BLUR,Je.ERROR,Je.LOAD,Je.TOGGLE],GN=e=>fue.indexOf(e)>=0;var pue=3,hue=13,mue=32,es={MAC_ENTER:pue,ENTER:hue,SPACE:mue};function gue(e){return e===Je.MOUSEENTER?Je.MOUSEOVER:e===Je.MOUSELEAVE?Je.MOUSEOUT:e===Je.POINTERENTER?Je.POINTEROVER:e===Je.POINTERLEAVE?Je.POINTEROUT:e}function yue(e,t,n,r){let o=!1;GN(t)&&(o=!0);let i=typeof r=="boolean"?{capture:o,passive:r}:o;return e.addEventListener(t,n,i),{eventType:t,handler:n,capture:o,passive:r}}function vue(e,t){if(e.removeEventListener){let n=typeof t.passive=="boolean"?{capture:t.capture}:t.capture;e.removeEventListener(t.eventType,t.handler,n)}else e.detachEvent&&e.detachEvent(`on${t.eventType}`,t.handler)}function xue(e){e.preventDefault?e.preventDefault():e.returnValue=!1}var yL=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function bue(e){return e.which===2||e.which==null&&e.button===4}function wue(e){return yL&&e.metaKey||!yL&&e.ctrlKey||bue(e)||e.shiftKey}var y4e=typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&/WebKit/.test(navigator.userAgent),v4e=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident/.test(navigator.userAgent)),x4e=typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&/Gecko/.test(navigator.product);function Eue(e,t,n){let r=e.relatedTarget;return(e.type===Je.MOUSEOVER&&t===Je.MOUSEENTER||e.type===Je.MOUSEOUT&&t===Je.MOUSELEAVE||e.type===Je.POINTEROVER&&t===Je.POINTERENTER||e.type===Je.POINTEROUT&&t===Je.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function Cue(e,t){let n={};for(let r in e){if(r==="srcElement"||r==="target")continue;let o=r,i=e[o];typeof i!="function"&&(n[o]=i)}return e.type===Je.MOUSEOVER?n.type=Je.MOUSEENTER:e.type===Je.MOUSEOUT?n.type=Je.MOUSELEAVE:e.type===Je.POINTEROVER?n.type=Je.POINTERENTER:n.type=Je.POINTERLEAVE,n.target=n.srcElement=t,n.bubbles=!1,n}var b4e={Enter:es.ENTER," ":es.SPACE},w4e={A:es.ENTER,BUTTON:0,CHECKBOX:es.SPACE,COMBOBOX:es.ENTER,FILE:0,GRIDCELL:es.ENTER,LINK:es.ENTER,LISTBOX:es.ENTER,MENU:0,MENUBAR:0,MENUITEM:0,MENUITEMCHECKBOX:0,MENUITEMRADIO:0,OPTION:0,RADIO:es.SPACE,RADIOGROUP:es.SPACE,RESET:0,SUBMIT:0,SWITCH:es.SPACE,TAB:0,TREE:es.ENTER,TREEITEM:es.ENTER};var Tue=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),R1=class{element;handlerInfos=[];constructor(t){this.element=t}addEventListener(t,n,r){Tue&&(this.element.style.cursor="pointer"),this.handlerInfos.push(yue(this.element,t,n(this.element),r))}cleanUp(){for(let t=0;t<this.handlerInfos.length;t++)vue(this.element,this.handlerInfos[t]);this.handlerInfos=[]}},_ue={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function Jc(e){return e.eventType}function jN(e,t){e.eventType=t}function N1(e){return e.event}function bL(e,t){e.event=t}function wL(e){return e.targetElement}function EL(e,t){e.targetElement=t}function CL(e){return e.eic}function Iue(e,t){e.eic=t}function Sue(e){return e.timeStamp}function Due(e,t){e.timeStamp=t}function A1(e){return e.eia}function TL(e,t,n){e.eia=[t,n]}function PN(e){e.eia=void 0}function D1(e){return e[1]}function Nue(e){return e.eirp}function _L(e,t){e.eirp=t}function IL(e){return e.eir}function SL(e,t){e.eir=t}function DL(e){return{eventType:e.eventType,event:e.event,targetElement:e.targetElement,eic:e.eic,eia:e.eia,timeStamp:e.timeStamp,eirp:e.eirp,eiack:e.eiack,eir:e.eir}}function Aue(e,t,n,r,o,i,s,a){return{eventType:e,event:t,targetElement:n,eic:r,timeStamp:o,eia:i,eirp:s,eiack:a}}var $N=class e{eventInfo;constructor(t){this.eventInfo=t}getEventType(){return Jc(this.eventInfo)}setEventType(t){jN(this.eventInfo,t)}getEvent(){return N1(this.eventInfo)}setEvent(t){bL(this.eventInfo,t)}getTargetElement(){return wL(this.eventInfo)}setTargetElement(t){EL(this.eventInfo,t)}getContainer(){return CL(this.eventInfo)}setContainer(t){Iue(this.eventInfo,t)}getTimestamp(){return Sue(this.eventInfo)}setTimestamp(t){Due(this.eventInfo,t)}getAction(){let t=A1(this.eventInfo);if(t)return{name:t[0],element:t[1]}}setAction(t){if(!t){PN(this.eventInfo);return}TL(this.eventInfo,t.name,t.element)}getIsReplay(){return Nue(this.eventInfo)}setIsReplay(t){_L(this.eventInfo,t)}getResolved(){return IL(this.eventInfo)}setResolved(t){SL(this.eventInfo,t)}clone(){return new e(DL(this.eventInfo))}},Rue={},kue=/\s*;\s*/,Oue=Je.CLICK,LN=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:t=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=t,this.clickModSupport=n}resolveEventType(t){this.clickModSupport&&Jc(t)===Je.CLICK&&wue(N1(t))?jN(t,Je.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(t)}resolveAction(t){IL(t)||(this.populateAction(t,wL(t)),SL(t,!0))}resolveParentAction(t){let n=A1(t),r=n&&D1(n);PN(t);let o=r&&this.getParentNode(r);o&&this.populateAction(t,o)}populateAction(t,n){let r=n;for(;r&&r!==CL(t)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,t),!A1(t));)r=this.getParentNode(r);let o=A1(t);if(o&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(t),this.syntheticMouseEventSupport&&(Jc(t)===Je.MOUSEENTER||Jc(t)===Je.MOUSELEAVE||Jc(t)===Je.POINTERENTER||Jc(t)===Je.POINTERLEAVE)))if(Eue(N1(t),Jc(t),D1(o))){let i=Cue(N1(t),D1(o));bL(t,i),EL(t,D1(o))}else PN(t)}getParentNode(t){let n=t[UN.OWNER];if(n)return n;let r=t.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(t,n){let r=this.parseActions(t),o=r[Jc(n)];o!==void 0&&TL(n,o,t),this.a11yClickSupport&&this.populateClickOnlyAction(t,n,r)}parseActions(t){let n=uue(t);if(!n){let r=t.getAttribute(BN.JSACTION);if(!r)n=Rue,gL(t,n);else{if(n=cue(r),!n){n={};let o=r.split(kue);for(let i=0;i<o.length;i++){let s=o[i];if(!s)continue;let a=s.indexOf(_ue.EVENT_ACTION_SEPARATOR),u=a!==-1,c=u?s.substr(0,a).trim():Oue,d=u?s.substr(a+1).trim():s;n[c]=d}lue(r,n)}gL(t,n)}}return n}addA11yClickSupport(t,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=t,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},NL=function(e){return e[e.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",e}(NL||{}),VN=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(t,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=t,this.actionResolver=n,this.eventReplayer=r}dispatch(t){let n=new $N(t);this.actionResolver?.resolveEventType(t),this.actionResolver?.resolveAction(t);let r=n.getAction();if(r&&Mue(r.element,n)&&xue(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(t){this.replayEventInfoWrappers.push(t),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function Mue(e,t){return e.tagName==="A"&&(t.getEventType()===Je.CLICK||t.getEventType()===Je.CLICKMOD)}var AL=Symbol.for("propagationStopped"),zN={REPLAY:101};var Fue="`preventDefault` called during event replay.";var Pue="`composedPath` called during event replay.",k1=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(t,n=!0){this.dispatchDelegate=t,this.clickModSupport=n,this.actionResolver=new LN({clickModSupport:n}),this.dispatcher=new VN(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(t){this.dispatcher.dispatch(t)}dispatchToDelegate(t){for(t.getIsReplay()&&Vue(t),$ue(t);t.getAction();){if(Bue(t),GN(t.getEventType())&&t.getAction().element!==t.getTargetElement()||(this.dispatchDelegate(t.getEvent(),t.getAction().name),Lue(t)))return;this.actionResolver.resolveParentAction(t.eventInfo)}}};function $ue(e){let t=e.getEvent(),n=e.getEvent().stopPropagation.bind(t),r=()=>{t[AL]=!0,n()};Od(t,"stopPropagation",r),Od(t,"stopImmediatePropagation",r)}function Lue(e){return!!e.getEvent()[AL]}function Vue(e){let t=e.getEvent(),n=e.getTargetElement(),r=t.preventDefault.bind(t);Od(t,"target",n),Od(t,"eventPhase",zN.REPLAY),Od(t,"preventDefault",()=>{throw r(),new Error(Fue+"")}),Od(t,"composedPath",()=>{throw new Error(Pue+"")})}function Bue(e){let t=e.getEvent(),n=e.getAction()?.element;n&&Od(t,"currentTarget",n,{configurable:!0})}function Od(e,t,n,{configurable:r=!1}={}){Object.defineProperty(e,t,{value:n,configurable:r})}function RL(e,t){e.ecrd(n=>{t.dispatch(n)},NL.I_AM_THE_JSACTION_FRAMEWORK)}function Uue(e){return e?.q??[]}function Gue(e){e&&(vL(e.c,e.et,e.h),vL(e.c,e.etc,e.h,!0))}function vL(e,t,n,r){for(let o=0;o<t.length;o++)e.removeEventListener(t[o],n,r)}var jue=!1,kL=(()=>{class e{static MOUSE_SPECIAL_SUPPORT=jue;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,o){let i=Aue(n,r,r.target,o,Date.now());this.handleEventInfo(i)}handleEventInfo(n){if(!this.dispatcher){_L(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,o){if(n in this.eventHandlers||!this.containerManager||!e.MOUSE_SPECIAL_SUPPORT&&due.indexOf(n)>=0)return;let i=(a,u,c)=>{this.handleEvent(a,u,c)};this.eventHandlers[n]=i;let s=gue(r||n);if(s!==n){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(n),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>u=>{i(n,u,a)},o)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),Gue(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let o=n[r],i=this.getEventTypesForBrowserEventType(o.eventType);for(let s=0;s<i.length;s++){let a=DL(o);jN(a,i[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let o=0;o<this.queuedEventInfos.length;o++)this.handleEventInfo(this.queuedEventInfos[o]);this.queuedEventInfos=null}}}return e})();function OL(e,t=window){return Uue(t._ejsas?.[e])}function ML(e,t=window){t._ejsas&&(t._ejsas[e]=void 0)}var AV="https://g.co/ng/security#xss",Be=class extends Error{code;constructor(t,n){super(Tb(t,n)),this.code=t}};function Tb(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var RV=Symbol("InputSignalNode#UNSET"),zue=vt(xe({},hN),{transformFn:void 0,applyValueToInputSignal(e,t){n1(e,t)}});function kV(e,t){let n=Object.create(zue);n.value=e,n.transformFn=t?.transform;function r(){if(Qx(n),n.value===RV)throw new Be(-950,!1);return n.value}return r[Qi]=n,r}function _y(e){return{toString:e}.toString()}var O1="__parameters__";function Hue(e){return function(...n){if(e){let r=e(...n);for(let o in r)this[o]=r[o]}}}function OV(e,t,n){return _y(()=>{let r=Hue(t);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(u,c,d){let f=u.hasOwnProperty(O1)?u[O1]:Object.defineProperty(u,O1,{value:[]})[O1];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}var Fd=globalThis;function In(e){for(let t in e)if(e[t]===In)return t;throw Error("Could not find renamed property on target object.")}function Wue(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Xo(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Xo).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function FL(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var que=In({__forward_ref__:In});function Iy(e){return e.__forward_ref__=Iy,e.toString=function(){return Xo(this())},e}function Ko(e){return MV(e)?e():e}function MV(e){return typeof e=="function"&&e.hasOwnProperty(que)&&e.__forward_ref__===Iy}function He(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function sl(e){return{providers:e.providers||[],imports:e.imports||[]}}function _b(e){return PL(e,PV)||PL(e,$V)}function FV(e){return _b(e)!==null}function PL(e,t){return e.hasOwnProperty(t)?e[t]:null}function Kue(e){let t=e&&(e[PV]||e[$V]);return t||null}function $L(e){return e&&(e.hasOwnProperty(LL)||e.hasOwnProperty(Xue))?e[LL]:null}var PV=In({\u0275prov:In}),LL=In({\u0275inj:In}),$V=In({ngInjectableDef:In}),Xue=In({ngInjectorDef:In}),ke=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=He({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function LV(e){return e&&!!e.\u0275providers}var Yue=In({\u0275cmp:In}),Zue=In({\u0275dir:In}),Que=In({\u0275pipe:In}),Jue=In({\u0275mod:In}),K1=In({\u0275fac:In}),vy=In({__NG_ELEMENT_ID__:In}),VL=In({__NG_ENV_ID__:In});function Ib(e){return typeof e=="string"?e:e==null?"":String(e)}function ece(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Ib(e)}function tce(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Be(-200,e)}function oR(e,t){throw new Be(-201,!1)}var At=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(At||{}),aA;function VV(){return aA}function wi(e){let t=aA;return aA=e,t}function BV(e,t,n){let r=_b(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&At.Optional)return null;if(t!==void 0)return t;oR(e,"Injector")}var nce={},xy=nce,uA="__NG_DI_FLAG__",X1="ngTempTokenPath",rce="ngTokenPath",oce=/\n/gm,ice="\u0275",BL="__source",Qp;function sce(){return Qp}function el(e){let t=Qp;return Qp=e,t}function ace(e,t=At.Default){if(Qp===void 0)throw new Be(-203,!1);return Qp===null?BV(e,void 0,t):Qp.get(e,t&At.Optional?null:void 0,t)}function bt(e,t=At.Default){return(VV()||ace)(Ko(e),t)}function fe(e,t=At.Default){return bt(e,Sb(t))}function Sb(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function cA(e){let t=[];for(let n=0;n<e.length;n++){let r=Ko(e[n]);if(Array.isArray(r)){if(r.length===0)throw new Be(900,!1);let o,i=At.Default;for(let s=0;s<r.length;s++){let a=r[s],u=uce(a);typeof u=="number"?u===-1?o=a.token:i|=u:o=a}t.push(bt(o,i))}else t.push(bt(r))}return t}function UV(e,t){return e[uA]=t,e.prototype[uA]=t,e}function uce(e){return e[uA]}function cce(e,t,n,r){let o=e[X1];throw t[BL]&&o.unshift(t[BL]),e.message=lce(`
`+e.message,o,n,r),e[rce]=o,e[X1]=null,e}function lce(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==ice?e.slice(2):e;let o=Xo(t);if(Array.isArray(t))o=t.map(Xo).join(" -> ");else if(typeof t=="object"){let i=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):Xo(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${e.replace(oce,`
  `)}`}var Db=UV(OV("Optional"),8);var iR=UV(OV("SkipSelf"),4);function $d(e,t){let n=e.hasOwnProperty(K1);return n?e[K1]:null}function dce(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let o=e[r],i=t[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}function fce(e){return e.flat(Number.POSITIVE_INFINITY)}function sR(e,t){e.forEach(n=>Array.isArray(n)?sR(n,t):t(n))}function GV(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Y1(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function pce(e,t,n,r){let o=e.length;if(o==t)e.push(n,r);else if(o===1)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){let i=o-2;e[o]=e[i],o--}e[t]=n,e[t+1]=r}}function hce(e,t,n){let r=Sy(e,t);return r>=0?e[r|1]=n:(r=~r,pce(e,r,t,n)),r}function HN(e,t){let n=Sy(e,t);if(n>=0)return e[n|1]}function Sy(e,t){return mce(e,t,1)}function mce(e,t,n){let r=0,o=e.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}var nh={},Bs=[],nl=new ke(""),jV=new ke("",-1),zV=new ke(""),Z1=class{get(t,n=xy){if(n===xy){let r=new Error(`NullInjectorError: No provider for ${Xo(t)}!`);throw r.name="NullInjectorError",r}return n}};function HV(e,t){let n=e[Jue]||null;if(!n&&t===!0)throw new Error(`Type ${Xo(e)} does not have '\u0275mod' property.`);return n}function Ku(e){return e[Yue]||null}function aR(e){return e[Zue]||null}function uR(e){return e[Que]||null}function WV(e){let t=Ku(e)||aR(e)||uR(e);return t!==null?t.standalone:!1}function Kd(e){return{\u0275providers:e}}function gce(...e){return{\u0275providers:cR(!0,e),\u0275fromNgModule:!0}}function cR(e,...t){let n=[],r=new Set,o,i=s=>{n.push(s)};return sR(t,s=>{let a=s;lA(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&qV(o,i),n}function qV(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:o}=e[n];lR(o,i=>{t(i,r)})}}function lA(e,t,n,r){if(e=Ko(e),!e)return!1;let o=null,i=$L(e),s=!i&&Ku(e);if(!i&&!s){let u=e.ngModule;if(i=$L(u),i)o=u;else return!1}else{if(s&&!s.standalone)return!1;o=e}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of u)lA(c,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let c;try{sR(i.imports,d=>{lA(d,t,n,r)&&(c||=[],c.push(d))})}finally{}c!==void 0&&qV(c,t)}if(!a){let c=$d(o)||(()=>new o);t({provide:o,useFactory:c,deps:Bs},o),t({provide:zV,useValue:o,multi:!0},o),t({provide:nl,useValue:()=>bt(o),multi:!0},o)}let u=i.providers;if(u!=null&&!a){let c=e;lR(u,d=>{t(d,c)})}}else return!1;return o!==e&&e.providers!==void 0}function lR(e,t){for(let n of e)LV(n)&&(n=n.\u0275providers),Array.isArray(n)?lR(n,t):t(n)}var yce=In({provide:String,useValue:In});function KV(e){return e!==null&&typeof e=="object"&&yce in e}function vce(e){return!!(e&&e.useExisting)}function xce(e){return!!(e&&e.useFactory)}function rh(e){return typeof e=="function"}function bce(e){return!!e.useClass}var Nb=new ke(""),B1={},wce={},WN;function dR(){return WN===void 0&&(WN=new Z1),WN}var Ci=class{},by=class extends Ci{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,fA(t,s=>this.processProvider(s)),this.records.set(jV,qp(void 0,this)),o.has("environment")&&this.records.set(Ci,qp(void 0,this));let i=this.records.get(Nb);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(zV,Bs,At.Self))}destroy(){gy(this),this._destroyed=!0;let t=Kt(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Kt(t)}}onDestroy(t){return gy(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){gy(this);let n=el(this),r=wi(void 0),o;try{return t()}finally{el(n),wi(r)}}get(t,n=xy,r=At.Default){if(gy(this),t.hasOwnProperty(VL))return t[VL](this);r=Sb(r);let o,i=el(this),s=wi(void 0);try{if(!(r&At.SkipSelf)){let u=this.records.get(t);if(u===void 0){let c=Ice(t)&&_b(t);c&&this.injectableDefInScope(c)?u=qp(dA(t),B1):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u)}let a=r&At.Self?dR():this.parent;return n=r&At.Optional&&n===xy?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[X1]=a[X1]||[]).unshift(Xo(t)),i)throw a;return cce(a,t,"R3InjectorError",this.source)}else throw a}finally{wi(s),el(i)}}resolveInjectorInitializers(){let t=Kt(null),n=el(this),r=wi(void 0),o;try{let i=this.get(nl,Bs,At.Self);for(let s of i)s()}finally{el(n),wi(r),Kt(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Xo(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Ko(t);let n=rh(t)?t:Ko(t&&t.provide),r=Cce(t);if(!rh(t)&&t.multi===!0){let o=this.records.get(n);o||(o=qp(void 0,B1,!0),o.factory=()=>cA(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=Kt(null);try{return n.value===B1&&(n.value=wce,n.value=n.factory()),typeof n.value=="object"&&n.value&&_ce(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Kt(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Ko(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function dA(e){let t=_b(e),n=t!==null?t.factory:$d(e);if(n!==null)return n;if(e instanceof ke)throw new Be(204,!1);if(e instanceof Function)return Ece(e);throw new Be(204,!1)}function Ece(e){if(e.length>0)throw new Be(204,!1);let n=Kue(e);return n!==null?()=>n.factory(e):()=>new e}function Cce(e){if(KV(e))return qp(void 0,e.useValue);{let t=XV(e);return qp(t,B1)}}function XV(e,t,n){let r;if(rh(e)){let o=Ko(e);return $d(o)||dA(o)}else if(KV(e))r=()=>Ko(e.useValue);else if(xce(e))r=()=>e.useFactory(...cA(e.deps||[]));else if(vce(e))r=()=>bt(Ko(e.useExisting));else{let o=Ko(e&&(e.useClass||e.provide));if(Tce(e))r=()=>new o(...cA(e.deps));else return $d(o)||dA(o)}return r}function gy(e){if(e.destroyed)throw new Be(205,!1)}function qp(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Tce(e){return!!e.deps}function _ce(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function Ice(e){return typeof e=="function"||typeof e=="object"&&e instanceof ke}function fA(e,t){for(let n of e)Array.isArray(n)?fA(n,t):n&&LV(n)?fA(n.\u0275providers,t):t(n)}function is(e,t){e instanceof by&&gy(e);let n,r=el(e),o=wi(void 0);try{return t()}finally{el(r),wi(o)}}function YV(){return VV()!==void 0||sce()!=null}function Sce(e){if(!YV())throw new Be(-203,!1)}function Dce(e){return typeof e=="function"}var rs=0,at=1,ct=2,Yr=3,ba=4,Ta=5,su=6,Q1=7,Ea=8,Xu=9,Yu=10,Wn=11,wy=12,UL=13,lh=14,Us=15,Ld=16,Kp=17,Zu=18,Ab=19,ZV=20,tl=21,qN=22,J1=23,ns=24,Zr=25,QV=1,qu=6,Qu=7,eb=8,oh=9,Ei=10,tb=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(tb||{});function wa(e){return Array.isArray(e)&&typeof e[QV]=="object"}function uu(e){return Array.isArray(e)&&e[QV]===!0}function JV(e){return(e.flags&4)!==0}function Dy(e){return e.componentOffset>-1}function fR(e){return(e.flags&1)===1}function rl(e){return!!e.template}function nb(e){return(e[ct]&512)!==0}function Nce(e){return(e[ct]&256)===256}var pA=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function eB(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var _a=(()=>{let e=()=>tB;return e.ngInherit=!0,e})();function tB(e){return e.type.prototype.ngOnChanges&&(e.setInput=Rce),Ace}function Ace(){let e=rB(this),t=e?.current;if(t){let n=e.previous;if(n===nh)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Rce(e,t,n,r,o){let i=this.declaredInputs[r],s=rB(e)||kce(e,{previous:nh,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[i];a[i]=new pA(c&&c.currentValue,n,u===nh),eB(e,t,o,n)}var nB="__ngSimpleChanges__";function rB(e){return e[nB]||null}function kce(e,t){return e[nB]=t}var GL=null;var ou=function(e,t,n){GL?.(e,t,n)},Oce="svg",Mce="math";function Ca(e){for(;Array.isArray(e);)e=e[rs];return e}function oB(e,t){return Ca(t[e])}function ss(e,t){return Ca(t[e.index])}function Rb(e,t){return e.data[t]}function Fce(e,t){return e[t]}function al(e,t){let n=t[e];return wa(n)?n:n[rs]}function Pce(e){return(e[ct]&4)===4}function pR(e){return(e[ct]&128)===128}function $ce(e){return uu(e[Yr])}function rb(e,t){return t==null?null:e[t]}function iB(e){e[Kp]=0}function hR(e){e[ct]&1024||(e[ct]|=1024,pR(e)&&Ob(e))}function Lce(e,t){for(;e>0;)t=t[lh],e--;return t}function kb(e){return!!(e[ct]&9216||e[ns]?.dirty)}function hA(e){e[Yu].changeDetectionScheduler?.notify(9),e[ct]&64&&(e[ct]|=1024),kb(e)&&Ob(e)}function Ob(e){e[Yu].changeDetectionScheduler?.notify(0);let t=Vd(e);for(;t!==null&&!(t[ct]&8192||(t[ct]|=8192,!pR(t)));)t=Vd(t)}function sB(e,t){if((e[ct]&256)===256)throw new Be(911,!1);e[tl]===null&&(e[tl]=[]),e[tl].push(t)}function Vce(e,t){if(e[tl]===null)return;let n=e[tl].indexOf(t);n!==-1&&e[tl].splice(n,1)}function Vd(e){let t=e[Yr];return uu(t)?t[Yr]:t}var Rt={lFrame:mB(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var mA=!1;function Bce(){return Rt.lFrame.elementDepthCount}function Uce(){Rt.lFrame.elementDepthCount++}function Gce(){Rt.lFrame.elementDepthCount--}function aB(){return Rt.bindingsEnabled}function Ny(){return Rt.skipHydrationRootTNode!==null}function jce(e){return Rt.skipHydrationRootTNode===e}function zce(e){Rt.skipHydrationRootTNode=e}function Hce(){Rt.skipHydrationRootTNode=null}function Zt(){return Rt.lFrame.lView}function po(){return Rt.lFrame.tView}function ul(e){return Rt.lFrame.contextLView=e,e[Ea]}function cl(e){return Rt.lFrame.contextLView=null,e}function No(){let e=uB();for(;e!==null&&e.type===64;)e=e.parent;return e}function uB(){return Rt.lFrame.currentTNode}function Wce(){let e=Rt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Ay(e,t){let n=Rt.lFrame;n.currentTNode=e,n.isParent=t}function cB(){return Rt.lFrame.isParent}function qce(){Rt.lFrame.isParent=!1}function lB(){return mA}function jL(e){let t=mA;return mA=e,t}function dB(){let e=Rt.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Kce(e){return Rt.lFrame.bindingIndex=e}function Mb(){return Rt.lFrame.bindingIndex++}function Xce(e){let t=Rt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Yce(){return Rt.lFrame.inI18n}function Zce(e,t){let n=Rt.lFrame;n.bindingIndex=n.bindingRootIndex=e,gA(t)}function Qce(){return Rt.lFrame.currentDirectiveIndex}function gA(e){Rt.lFrame.currentDirectiveIndex=e}function Jce(e){let t=Rt.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function fB(){return Rt.lFrame.currentQueryIndex}function mR(e){Rt.lFrame.currentQueryIndex=e}function ele(e){let t=e[at];return t.type===2?t.declTNode:t.type===1?e[Ta]:null}function pB(e,t,n){if(n&At.SkipSelf){let o=t,i=e;for(;o=o.parent,o===null&&!(n&At.Host);)if(o=ele(i),o===null||(i=i[lh],o.type&10))break;if(o===null)return!1;t=o,e=i}let r=Rt.lFrame=hB();return r.currentTNode=t,r.lView=e,!0}function gR(e){let t=hB(),n=e[at];Rt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function hB(){let e=Rt.lFrame,t=e===null?null:e.child;return t===null?mB(e):t}function mB(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function gB(){let e=Rt.lFrame;return Rt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var yB=gB;function yR(){let e=gB();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function tle(e){return(Rt.lFrame.contextLView=Lce(e,Rt.lFrame.contextLView))[Ea]}function dh(){return Rt.lFrame.selectedIndex}function Bd(e){Rt.lFrame.selectedIndex=e}function vR(){let e=Rt.lFrame;return Rb(e.tView,e.selectedIndex)}function vB(){return Rt.lFrame.currentNamespace}var xB=!0;function xR(){return xB}function ll(e){xB=e}function nle(e,t,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){let s=tB(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function bR(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:d}=i;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),u&&(e.viewHooks??=[]).push(-n,u),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),d!=null&&(e.destroyHooks??=[]).push(n,d)}}function U1(e,t,n){bB(e,t,3,n)}function G1(e,t,n,r){(e[ct]&3)===n&&bB(e,t,n,r)}function KN(e,t){let n=e[ct];(n&3)===t&&(n&=16383,n+=1,e[ct]=n)}function bB(e,t,n,r){let o=r!==void 0?e[Kp]&65535:0,i=r??-1,s=t.length-1,a=0;for(let u=o;u<s;u++)if(typeof t[u+1]=="number"){if(a=t[u],r!=null&&a>=r)break}else t[u]<0&&(e[Kp]+=65536),(a<i||i==-1)&&(rle(e,n,t,u),e[Kp]=(e[Kp]&4294901760)+u+2),u++}function zL(e,t){ou(4,e,t);let n=Kt(null);try{t.call(e)}finally{Kt(n),ou(5,e,t)}}function rle(e,t,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=e[s];o?e[ct]>>14<e[Kp]>>16&&(e[ct]&3)===t&&(e[ct]+=16384,zL(a,i)):zL(a,i)}var Jp=-1,Ud=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r){this.factory=t,this.canSeeViewProviders=n,this.injectImpl=r}};function ole(e){return e instanceof Ud}function ile(e){return(e.flags&8)!==0}function sle(e){return(e.flags&16)!==0}function yA(e,t,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,i)}else{let i=o,s=n[++r];ale(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),r++}}return r}function wB(e){return e===3||e===4||e===6}function ale(e){return e.charCodeAt(0)===64}function Ey(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?HL(e,n,o,null,t[++r]):HL(e,n,o,null,null))}}return e}function HL(e,t,n,r,o){let i=0,s=e.length;if(t===-1)s=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){if(r===null){o!==null&&(e[i+1]=o);return}else if(r===e[i+1]){e[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),r!==null&&e.splice(i++,0,r),o!==null&&e.splice(i++,0,o)}var XN={},eh=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Sb(r);let o=this.injector.get(t,XN,r);return o!==XN||n===XN?o:this.parentInjector.get(t,n,r)}};function EB(e){return e!==Jp}function ob(e){return e&32767}function ule(e){return e>>16}function ib(e,t){let n=ule(e),r=t;for(;n>0;)r=r[lh],n--;return r}var vA=!0;function sb(e){let t=vA;return vA=e,t}var cle=256,CB=cle-1,TB=5,lle=0,iu={};function dle(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(vy)&&(r=n[vy]),r==null&&(r=n[vy]=lle++);let o=r&CB,i=1<<o;t.data[e+(o>>TB)]|=i}function ab(e,t){let n=_B(e,t);if(n!==-1)return n;let r=t[at];r.firstCreatePass&&(e.injectorIndex=t.length,YN(r.data,e),YN(t,null),YN(r.blueprint,null));let o=wR(e,t),i=e.injectorIndex;if(EB(o)){let s=ob(o),a=ib(o,t),u=a[at].data;for(let c=0;c<8;c++)t[i+c]=a[s+c]|u[s+c]}return t[i+8]=o,i}function YN(e,t){e.push(0,0,0,0,0,0,0,0,t)}function _B(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function wR(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;o!==null;){if(r=AB(o),r===null)return Jp;if(n++,o=o[lh],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Jp}function xA(e,t,n){dle(e,t,n)}function fle(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,o=0;for(;o<r;){let i=n[o];if(wB(i))break;if(i===0)o=o+2;else if(typeof i=="number")for(o++;o<r&&typeof n[o]=="string";)o++;else{if(i===t)return n[o+1];o=o+2}}}return null}function IB(e,t,n){if(n&At.Optional||e!==void 0)return e;oR(t,"NodeInjector")}function SB(e,t,n,r){if(n&At.Optional&&r===void 0&&(r=null),!(n&(At.Self|At.Host))){let o=e[Xu],i=wi(void 0);try{return o?o.get(t,r,n&At.Optional):BV(t,r,n&At.Optional)}finally{wi(i)}}return IB(r,t,n)}function DB(e,t,n,r=At.Default,o){if(e!==null){if(t[ct]&2048&&!(r&At.Self)){let s=gle(e,t,n,r,iu);if(s!==iu)return s}let i=NB(e,t,n,r,iu);if(i!==iu)return i}return SB(t,n,r,o)}function NB(e,t,n,r,o){let i=hle(n);if(typeof i=="function"){if(!pB(t,e,r))return r&At.Host?IB(o,n,r):SB(t,n,r,o);try{let s;if(s=i(r),s==null&&!(r&At.Optional))oR(n);else return s}finally{yB()}}else if(typeof i=="number"){let s=null,a=_B(e,t),u=Jp,c=r&At.Host?t[Us][Ta]:null;for((a===-1||r&At.SkipSelf)&&(u=a===-1?wR(e,t):t[a+8],u===Jp||!qL(r,!1)?a=-1:(s=t[at],a=ob(u),t=ib(u,t)));a!==-1;){let d=t[at];if(WL(i,a,d.data)){let f=ple(a,t,n,s,r,c);if(f!==iu)return f}u=t[a+8],u!==Jp&&qL(r,t[at].data[a+8]===c)&&WL(i,a,t)?(s=d,a=ob(u),t=ib(u,t)):a=-1}}return o}function ple(e,t,n,r,o,i){let s=t[at],a=s.data[e+8],u=r==null?Dy(a)&&vA:r!=s&&(a.type&3)!==0,c=o&At.Host&&i===a,d=j1(a,s,n,u,c);return d!==null?Gd(t,s,d,a):iu}function j1(e,t,n,r,o){let i=e.providerIndexes,s=t.data,a=i&1048575,u=e.directiveStart,c=e.directiveEnd,d=i>>20,f=r?a:a+d,h=o?a+d:c;for(let m=f;m<h;m++){let v=s[m];if(m<u&&n===v||m>=u&&v.type===n)return m}if(o){let m=s[u];if(m&&rl(m)&&m.type===n)return u}return null}function Gd(e,t,n,r){let o=e[n],i=t.data;if(ole(o)){let s=o;s.resolving&&tce(ece(i[n]));let a=sb(s.canSeeViewProviders);s.resolving=!0;let u,c=s.injectImpl?wi(s.injectImpl):null,d=pB(e,r,At.Default);try{o=e[n]=s.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&nle(n,i[n],t)}finally{c!==null&&wi(c),sb(a),s.resolving=!1,yB()}}return o}function hle(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(vy)?e[vy]:void 0;return typeof t=="number"?t>=0?t&CB:mle:t}function WL(e,t,n){let r=1<<e;return!!(n[t+(e>>TB)]&r)}function qL(e,t){return!(e&At.Self)&&!(e&At.Host&&t)}var Pd=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return DB(this._tNode,this._lView,t,Sb(r),n)}};function mle(){return new Pd(No(),Zt())}function Ry(e){return _y(()=>{let t=e.prototype.constructor,n=t[K1]||bA(t),r=Object.prototype,o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){let i=o[K1]||bA(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function bA(e){return MV(e)?()=>{let t=bA(Ko(e));return t&&t()}:$d(e)}function gle(e,t,n,r,o){let i=e,s=t;for(;i!==null&&s!==null&&s[ct]&2048&&!(s[ct]&512);){let a=NB(i,s,n,r|At.Self,iu);if(a!==iu)return a;let u=i.parent;if(!u){let c=s[ZV];if(c){let d=c.get(n,iu,r);if(d!==iu)return d}u=AB(s),s=s[lh]}i=u}return o}function AB(e){let t=e[at],n=t.type;return n===2?t.declTNode:n===1?e[Ta]:null}function ER(e){return fle(No(),e)}function KL(e,t=null,n=null,r){let o=RB(e,t,n,r);return o.resolveInjectorInitializers(),o}function RB(e,t=null,n=null,r,o=new Set){let i=[n||Bs,gce(e)];return r=r||(typeof e=="object"?void 0:Xo(e)),new by(i,t||dR(),r||null,o)}var Ti=class e{static THROW_IF_NOT_FOUND=xy;static NULL=new Z1;static create(t,n){if(Array.isArray(t))return KL({name:""},n,t,"");{let r=t.name??"";return KL({name:r},t.parent,t.providers,r)}}static \u0275prov=He({token:e,providedIn:"any",factory:()=>bt(jV)});static __NG_ELEMENT_ID__=-1};var yle=new ke("");yle.__NG_ELEMENT_ID__=e=>{let t=No();if(t===null)throw new Be(204,!1);if(t.type&2)return t.value;if(e&At.Optional)return null;throw new Be(204,!1)};var kB=!1,CR=(()=>{class e{static __NG_ELEMENT_ID__=vle;static __NG_ENV_ID__=n=>n}return e})(),wA=class extends CR{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return sB(this._lView,t),()=>Vce(this._lView,t)}};function vle(){return new wA(Zt())}var ih=class{},Fb=new ke("",{providedIn:"root",factory:()=>!1});var OB=new ke(""),MB=new ke(""),tc=(()=>{class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Br(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=He({token:e,providedIn:"root",factory:()=>new e})}return e})();var EA=class extends Sr{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,YV()&&(this.destroyRef=fe(CR,{optional:!0})??void 0,this.pendingTasks=fe(tc,{optional:!0})??void 0)}emit(t){let n=Kt(null);try{super.next(t)}finally{Kt(n)}}subscribe(t,n,r){let o=t,i=n||(()=>null),s=r;if(t&&typeof t=="object"){let u=t;o=u.next?.bind(u),i=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return t instanceof ur&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},dr=EA;function ub(...e){}function FB(e){let t,n;function r(){e=ub;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function XL(e){return queueMicrotask(()=>e()),()=>{e=ub}}var TR="isAngularZone",cb=TR+"_ID",xle=0,er=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new dr(!1);onMicrotaskEmpty=new dr(!1);onStable=new dr(!1);onError=new dr(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=kB}=t;if(typeof Zone>"u")throw new Be(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,Ele(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(TR)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Be(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Be(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,ble,ub,ub);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},ble={};function _R(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function wle(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){FB(()=>{e.callbackScheduled=!1,CA(e),e.isCheckStableRunning=!0,_R(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),CA(e)}function Ele(e){let t=()=>{wle(e)},n=xle++;e._inner=e._inner.fork({name:"angular",properties:{[TR]:!0,[cb]:n,[cb+n]:!0},onInvokeTask:(r,o,i,s,a,u)=>{if(Cle(u))return r.invokeTask(i,s,a,u);try{return YL(e),r.invokeTask(i,s,a,u)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),ZL(e)}},onInvoke:(r,o,i,s,a,u,c)=>{try{return YL(e),r.invoke(i,s,a,u,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!Tle(u)&&t(),ZL(e)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,CA(e),_R(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function CA(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function YL(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ZL(e){e._nesting--,_R(e)}var TA=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new dr;onMicrotaskEmpty=new dr;onStable=new dr;onError=new dr;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}};function Cle(e){return PB(e,"__ignore_ng_zone__")}function Tle(e){return PB(e,"__scheduler_tick__")}function PB(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Ju=class{_console=console;handleError(t){this._console.error("ERROR",t)}},_le=new ke("",{providedIn:"root",factory:()=>{let e=fe(er),t=fe(Ju);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function QL(e,t){return kV(e,t)}function Ile(e){return kV(RV,e)}var $B=(QL.required=Ile,QL);function Sle(){return fh(No(),Zt())}function fh(e,t){return new _i(ss(e,t))}var _i=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Sle}return e})();function Dle(e){return e instanceof _i?e.nativeElement:e}function Nle(){return this._results[Symbol.iterator]()}var _A=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Sr}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=fce(t);(this._changesDetected=!dce(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Nle},Ale="ngSkipHydration",Rle="ngskiphydration";function LB(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let r=t[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===Rle)return!0}return!1}function VB(e){return e.hasAttribute(Ale)}function lb(e){return(e.flags&128)===128}function kle(e){if(lb(e))return!0;let t=e.parent;for(;t;){if(lb(e)||LB(t))return!0;t=t.parent}return!1}var BB=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(BB||{}),UB=new Map,Ole=0;function Mle(){return Ole++}function Fle(e){UB.set(e[Ab],e)}function IA(e){UB.delete(e[Ab])}var JL="__ngContext__";function jd(e,t){wa(t)?(e[JL]=t[Ab],Fle(t)):e[JL]=t}function GB(e){return zB(e[wy])}function jB(e){return zB(e[ba])}function zB(e){for(;e!==null&&!uu(e);)e=e[ba];return e}var SA;function HB(e){SA=e}function Pb(){if(SA!==void 0)return SA;if(typeof document<"u")return document;throw new Be(210,!1)}var ph=new ke("",{providedIn:"root",factory:()=>Ple}),Ple="ng",IR=new ke(""),Gs=new ke("",{providedIn:"platform",factory:()=>"unknown"});var SR=new ke("",{providedIn:"root",factory:()=>Pb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function $le(){let e=new Xd;return fe(Gs)==="browser"&&(e.store=Lle(Pb(),fe(ph))),e}var Xd=(()=>{class e{static \u0275prov=He({token:e,providedIn:"root",factory:$le});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function Lle(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+t,r)}return{}}var WB="h",qB="b",DA=function(e){return e.FirstChild="f",e.NextSibling="n",e}(DA||{}),Vle="e",Ble="t",DR="c",KB="x",db="r",Ule="i",Gle="n",XB="d";var jle="di",zle="s",Hle="p";var M1=new ke(""),YB=!1,ZB=new ke("",{providedIn:"root",factory:()=>YB});var QB=new ke(""),Wle=!1,qle=new ke(""),eV=new ke("",{providedIn:"root",factory:()=>new Map}),NR=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(NR||{}),$b=new ke(""),tV=new Set;function cu(e){tV.has(e)||(tV.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var Xp=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Xp||{}),JB=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=He({token:e,providedIn:"root",factory:()=>new e})}return e})(),Kle=[Xp.EarlyRead,Xp.Write,Xp.MixedReadWrite,Xp.Read],Xle=(()=>{class e{ngZone=fe(er);scheduler=fe(ih);errorHandler=fe(Ju,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){fe($b,{optional:!0})}execute(){this.executing=!0;for(let n of Kle)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[n]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>r.hooks[n](r.pipelinedValue),r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&(this.sequences.delete(n),n.destroy());for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(7))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?.run(NR.AFTER_NEXT_RENDER,n)??n()}static \u0275prov=He({token:e,providedIn:"root",factory:()=>new e})}return e})(),NA=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,o,i=null){this.impl=t,this.hooks=n,this.once=r,this.snapshot=i,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Lb(e,t){!t?.injector&&Sce(Lb);let n=t?.injector??fe(Ti);return cu("NgAfterNextRender"),Zle(e,n,t,!0)}function Yle(e,t){if(e instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[t]=e,n}else return[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function Zle(e,t,n,r){let o=t.get(JB);o.impl??=t.get(Xle);let i=t.get($b,null,{optional:!0}),s=n?.phase??Xp.MixedReadWrite,a=n?.manualCleanup!==!0?t.get(CR):null,u=new NA(o.impl,Yle(e,s),r,a,i?.snapshot(null));return o.impl.register(u),u}var ts=function(e){return e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.COMPLETE=2]="COMPLETE",e[e.FAILED=3]="FAILED",e}(ts||{}),nV=0,Qle=1,fo=function(e){return e[e.Placeholder=0]="Placeholder",e[e.Loading=1]="Loading",e[e.Complete=2]="Complete",e[e.Error=3]="Error",e}(fo||{});var Jle=0,AR=1;var ede=4,tde=5;var nde=7,th=8,rde=9,eU=function(e){return e[e.Manual=0]="Manual",e[e.Playthrough=1]="Playthrough",e}(eU||{});function z1(e,t){let n=ide(e),r=t[n];if(r!==null){for(let o of r)o();t[n]=null}}function ode(e){z1(1,e),z1(0,e),z1(2,e)}function ide(e){let t=ede;return e===1?t=tde:e===2&&(t=rde),t}function tU(e){return e+1}function Vb(e,t){let n=e[at],r=tU(t.index);return e[r]}function Bb(e,t){let n=tU(t.index);return e.data[n]}function sde(e,t,n){let r=t[at],o=Bb(r,n);switch(e){case fo.Complete:return o.primaryTmplIndex;case fo.Loading:return o.loadingTmplIndex;case fo.Error:return o.errorTmplIndex;case fo.Placeholder:return o.placeholderTmplIndex;default:return null}}function rV(e,t){return t===fo.Placeholder?e.placeholderBlockConfig?.[nV]??null:t===fo.Loading?e.loadingBlockConfig?.[nV]??null:null}function ade(e){return e.loadingBlockConfig?.[Qle]??null}function oV(e,t){if(!e||e.length===0)return t;let n=new Set(e);for(let r of t)n.add(r);return e.length===n.size?e:Array.from(n)}function ude(e,t){let n=t.primaryTmplIndex+Zr;return Rb(e,n)}var Ub="ngb";var cde=(e,t,n)=>{let r=e,o=r.__jsaction_fns??new Map,i=o.get(t)??[];i.push(n),o.set(t,i),r.__jsaction_fns=o},lde=(e,t)=>{let n=e.getAttribute(Ub)??"",r=e,o=t.get(n)??new Set;o.has(r)||o.add(r),t.set(n,o)};var dde=e=>{e.removeAttribute(BN.JSACTION),e.removeAttribute(Ub),e.__jsaction_fns=void 0},fde=new ke("",{providedIn:"root",factory:()=>({})});function nU(e,t){let n=t?.__jsaction_fns?.get(e.type);if(n)for(let r of n)r(e)}var rU=new ke("");var pde="__nghData__",oU=pde,hde="__nghDeferData__",iU=hde,ZN="ngh",mde="nghm",sU=()=>null;function gde(e,t,n=!1){let r=e.getAttribute(ZN);if(r==null)return null;let[o,i]=r.split("|");if(r=n?i:o,!r)return null;let s=i?`|${i}`:"",a=n?o:s,u={},c;if(r!==""){let f=t.get(Xd,null,{optional:!0});if(f!==null){let h=f.get(oU,[]);c=f.get(iU,{}),u=h[Number(r)]}}let d={data:u,firstChild:e.firstChild??null};return n&&(d.firstChild=e,Gb(d,0,e.nextSibling)),a?e.setAttribute(ZN,a):e.removeAttribute(ZN),d}function yde(){sU=gde}function RR(e,t,n=!1){return sU(e,t,n)}function vde(e){let t=e._lView;return t[at].type===2?null:(nb(t)&&(t=t[Zr]),t)}function xde(e){return e.textContent?.replace(/\s/gm,"")}function bde(e){let t=Pb(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(i){let s=xde(i);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,o=[];for(;r=n.nextNode();)o.push(r);for(let i of o)i.textContent==="ngetn"?i.replaceWith(t.createTextNode("")):i.remove()}function Gb(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function AA(e,t){return e.segmentHeads?.[t]??null}function wde(e){return e.get(qle,!1,{optional:!0})}function Ede(e,t){let n=e.data,r=n[Vle]?.[t]??null;return r===null&&n[DR]?.[t]&&(r=kR(e,t)),r}function aU(e,t){return e.data[DR]?.[t]??null}function kR(e,t){let n=aU(e,t)??[],r=0;for(let o of n)r+=o[db]*(o[KB]??1);return r}function Cde(e){if(typeof e.disconnectedNodes>"u"){let t=e.data[XB];e.disconnectedNodes=t?new Set(t):null}return e.disconnectedNodes}function ky(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[XB];e.disconnectedNodes=n?new Set(n):null}return!!Cde(e)?.has(t)}function Tde(e,t){let n=t.get(rU),o=t.get(Xd).get(iU,{}),i=!1,s=e,a=null,u=[];for(;!i&&s;){i=n.has(s);let c=n.hydrating.get(s);if(a===null&&c!=null){a=c.promise;break}u.unshift(s),s=o[s][Hle]}return{parentBlockPromise:a,hydrationQueue:u}}var au=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(au||{});var F1;function _de(){if(F1===void 0&&(F1=null,Fd.trustedTypes))try{F1=Fd.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return F1}function iV(e){return _de()?.createScriptURL(e)||e}var fb=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${AV})`}};function Oy(e){return e instanceof fb?e.changingThisBreaksApplicationSecurity:e}function OR(e,t){let n=Ide(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${AV})`)}return n===t}function Ide(e){return e instanceof fb&&e.getTypeName()||null}var Sde=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function uU(e){return e=String(e),e.match(Sde)?e:"unsafe:"+e}var jb=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(jb||{});function Dde(e){let t=lU();return t?t.sanitize(jb.URL,e)||"":OR(e,"URL")?Oy(e):uU(Ib(e))}function Nde(e){let t=lU();if(t)return iV(t.sanitize(jb.RESOURCE_URL,e)||"");if(OR(e,"ResourceURL"))return iV(Oy(e));throw new Be(904,!1)}function Ade(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?Nde:Dde}function cU(e,t,n){return Ade(t,n)(e)}function lU(){let e=Zt();return e&&e[Yu].sanitizer}var Rde=/^>|^->|<!--|-->|--!>|<!-$/g,kde=/(<|>)/g,Ode="\u200B$1\u200B";function Mde(e){return e.replace(Rde,t=>t.replace(kde,Ode))}function Fde(e){return e.ownerDocument.body}function dU(e){return e instanceof Function?e():e}var ol=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(ol||{}),ec=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(ec||{}),Pde;function MR(e,t){return Pde(e,t)}function Yp(e,t,n,r,o){if(r!=null){let i,s=!1;uu(r)?i=r:wa(r)&&(s=!0,r=r[rs]);let a=Ca(r);e===0&&n!==null?o==null?gU(t,n,a):hb(t,n,a,o||null,!0):e===1&&n!==null?hb(t,n,a,o||null,!0):e===2?VR(t,a,s):e===3&&t.destroyNode(a),i!=null&&Zde(t,e,i,n,o)}}function fU(e,t){return e.createText(t)}function $de(e,t,n){e.setValue(t,n)}function pU(e,t){return e.createComment(Mde(t))}function FR(e,t,n){return e.createElement(t,n)}function Lde(e,t){hU(e,t),t[rs]=null,t[Ta]=null}function Vde(e,t,n,r,o,i){r[rs]=o,r[Ta]=t,zb(e,r,n,1,o,i)}function hU(e,t){t[Yu].changeDetectionScheduler?.notify(10),zb(e,t,t[Wn],2,null,null)}function Bde(e){let t=e[wy];if(!t)return QN(e[at],e);for(;t;){let n=null;if(wa(t))n=t[wy];else{let r=t[Ei];r&&(n=r)}if(!n){for(;t&&!t[ba]&&t!==e;)wa(t)&&QN(t[at],t),t=t[Yr];t===null&&(t=e),wa(t)&&QN(t[at],t),n=t&&t[ba]}t=n}}function Ude(e,t,n,r){let o=Ei+r,i=n.length;r>0&&(n[o-1][ba]=t),r<i-Ei?(t[ba]=n[o],GV(n,Ei+r,t)):(n.push(t),t[ba]=null),t[Yr]=n;let s=t[Ld];s!==null&&n!==s&&mU(s,t);let a=t[Zu];a!==null&&a.insertView(e),hA(t),t[ct]|=128}function mU(e,t){let n=e[oh],r=t[Yr];if(wa(r))e[ct]|=tb.HasTransplantedViews;else{let o=r[Yr][Us];t[Us]!==o&&(e[ct]|=tb.HasTransplantedViews)}n===null?e[oh]=[t]:n.push(t)}function PR(e,t){let n=e[oh],r=n.indexOf(t);n.splice(r,1)}function pb(e,t){if(e.length<=Ei)return;let n=Ei+t,r=e[n];if(r){let o=r[Ld];o!==null&&o!==e&&PR(o,r),t>0&&(e[n-1][ba]=r[ba]);let i=Y1(e,Ei+t);Lde(r[at],r);let s=i[Zu];s!==null&&s.detachView(i[at]),r[Yr]=null,r[ba]=null,r[ct]&=-129}return r}function $R(e,t){if(!(t[ct]&256)){let n=t[Wn];n.destroyNode&&zb(e,t,n,3,null,null),Bde(t)}}function QN(e,t){if(t[ct]&256)return;let n=Kt(null);try{t[ct]&=-129,t[ct]|=256,t[ns]&&pN(t[ns]),jde(e,t),Gde(e,t),t[at].type===1&&t[Wn].destroy();let r=t[Ld];if(r!==null&&uu(t[Yr])){r!==t[Yr]&&PR(r,t);let o=t[Zu];o!==null&&o.detachView(e)}IA(t)}finally{Kt(n)}}function Gde(e,t){let n=e.cleanup,r=t[Q1];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[Q1]=null);let o=t[tl];if(o!==null){t[tl]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=t[J1];if(i!==null){t[J1]=null;for(let s of i)s.destroy()}}function jde(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=t[n[r]];if(!(o instanceof Ud)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],u=i[s+1];ou(4,a,u);try{u.call(a)}finally{ou(5,a,u)}}else{ou(4,o,i);try{i.call(o)}finally{ou(5,o,i)}}}}}function zde(e,t,n){return Hde(e,t.parent,n)}function Hde(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[rs];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:i}=e.data[r.directiveStart+o];if(i===au.None||i===au.Emulated)return null}return ss(r,n)}}function hb(e,t,n,r,o){e.insertBefore(t,n,r,o)}function gU(e,t,n){e.appendChild(t,n)}function sV(e,t,n,r,o){r!==null?hb(e,t,n,r,o):gU(e,t,n)}function yU(e,t){return e.parentNode(t)}function Wde(e,t){return e.nextSibling(t)}function qde(e,t,n){return Xde(e,t,n)}function Kde(e,t,n){return e.type&40?ss(e,n):null}var Xde=Kde,aV;function LR(e,t,n,r){let o=zde(e,r,t),i=t[Wn],s=r.parent||t[Ta],a=qde(s,r,t);if(o!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)sV(i,o,n[u],a,!1);else sV(i,o,n,a,!1);aV!==void 0&&aV(i,r,t,n,o)}function yy(e,t){if(t!==null){let n=t.type;if(n&3)return ss(t,e);if(n&4)return RA(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return yy(e,r);{let o=e[t.index];return uu(o)?RA(-1,o):Ca(o)}}else{if(n&128)return yy(e,t.next);if(n&32)return MR(t,e)()||Ca(e[t.index]);{let r=vU(e,t);if(r!==null){if(Array.isArray(r))return r[0];let o=Vd(e[Us]);return yy(o,r)}else return yy(e,t.next)}}}return null}function vU(e,t){if(t!==null){let r=e[Us][Ta],o=t.projection;return r.projection[o]}return null}function RA(e,t){let n=Ei+e+1;if(n<t.length){let r=t[n],o=r[at].firstChild;if(o!==null)return yy(r,o)}return t[Qu]}function VR(e,t,n){e.removeChild(null,t,n)}function xU(e){e.textContent=""}function BR(e,t,n,r,o,i,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&t===0&&(a&&jd(Ca(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)BR(e,t,n.child,r,o,i,!1),Yp(t,e,o,a,i);else if(u&32){let c=MR(n,r),d;for(;d=c();)Yp(t,e,o,d,i);Yp(t,e,o,a,i)}else u&16?Yde(e,t,r,n,o,i):Yp(t,e,o,a,i);n=s?n.projectionNext:n.next}}function zb(e,t,n,r,o,i){BR(n,r,e.firstChild,t,o,i,!1)}function Yde(e,t,n,r,o,i){let s=n[Us],u=s[Ta].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let d=u[c];Yp(t,e,o,d,i)}else{let c=u,d=s[Yr];lb(r)&&(c.flags|=128),BR(e,t,c,d,o,i,!0)}}function Zde(e,t,n,r,o){let i=n[Qu],s=Ca(n);i!==s&&Yp(t,e,r,i,o);for(let a=Ei;a<n.length;a++){let u=n[a];zb(u[at],u,e,t,r,i)}}function Qde(e,t,n,r,o){if(t)o?e.addClass(n,r):e.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:ec.DashCase;o==null?e.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=ec.Important),e.setStyle(n,r,o,i))}}function Jde(e,t,n){e.setAttribute(t,"style",n)}function bU(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function wU(e,t,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&yA(e,t,r),o!==null&&bU(e,t,o),i!==null&&Jde(e,t,i)}function efe(e,t,n){let r=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}var EU="ng-template";function tfe(e,t,n,r){let o=0;if(r){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&efe(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(UR(e))return!1;if(o=t.indexOf(1,o),o>-1){let i;for(;++o<t.length&&typeof(i=t[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function UR(e){return e.type===4&&e.value!==EU}function nfe(e,t,n){let r=e.type===4&&!n?EU:e.value;return t===r}function rfe(e,t,n){let r=4,o=e.attrs,i=o!==null?sfe(o):0,s=!1;for(let a=0;a<t.length;a++){let u=t[a];if(typeof u=="number"){if(!s&&!xa(r)&&!xa(u))return!1;if(s&&xa(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!nfe(e,u,n)||u===""&&t.length===1){if(xa(r))return!1;s=!0}}else if(r&8){if(o===null||!tfe(e,o,u,n)){if(xa(r))return!1;s=!0}}else{let c=t[++a],d=ofe(u,o,UR(e),n);if(d===-1){if(xa(r))return!1;s=!0;continue}if(c!==""){let f;if(d>i?f="":f=o[d+1].toLowerCase(),r&2&&c!==f){if(xa(r))return!1;s=!0}}}}return xa(r)||s}function xa(e){return(e&1)===0}function ofe(e,t,n,r){if(t===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){let s=t[o];if(s===e)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return afe(t,e)}function ife(e,t,n=!1){for(let r=0;r<t.length;r++)if(rfe(e,t[r],n))return!0;return!1}function sfe(e){for(let t=0;t<e.length;t++){let n=e[t];if(wB(n))return t}return e.length}function afe(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function uV(e,t){return e?":not("+t.trim()+")":t}function ufe(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!xa(s)&&(t+=uV(i,o),o=""),r=s,i=i||!xa(r);n++}return o!==""&&(t+=uV(i,o)),t}function cfe(e){return e.map(ufe).join(",")}function lfe(e){let t=[],n=[],r=1,o=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")o===2?i!==""&&t.push(i,e[++r]):o===8&&n.push(i);else{if(!xa(o))break;o=i}r++}return{attrs:t,classes:n}}var dl={};function un(e=1){CU(po(),Zt(),dh()+e,!1)}function CU(e,t,n,r){if(!r)if((t[ct]&3)===3){let i=e.preOrderCheckHooks;i!==null&&U1(t,i,n)}else{let i=e.preOrderHooks;i!==null&&G1(t,i,0,n)}Bd(n)}function lt(e,t=At.Default){let n=Zt();if(n===null)return bt(e,t);let r=No();return DB(r,n,Ko(e),t)}function TU(){let e="invalid";throw new Error(e)}function _U(e,t,n,r,o,i){let s=Kt(null);try{let a=null;o&ol.SignalBased&&(a=t[r][Qi]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),o&ol.HasDecoratorInputTransform&&(i=e.inputTransforms[r].call(t,i)),e.setInput!==null?e.setInput(t,a,i,n,r):eB(t,a,r,i)}finally{Kt(s)}}function dfe(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)Bd(~o);else{let i=o,s=n[++r],a=n[++r];Zce(s,i);let u=t[i];a(2,u)}}}finally{Bd(-1)}}function Hb(e,t,n,r,o,i,s,a,u,c,d){let f=t.blueprint.slice();return f[rs]=o,f[ct]=r|4|128|8|64|1024,(c!==null||e&&e[ct]&2048)&&(f[ct]|=2048),iB(f),f[Yr]=f[lh]=e,f[Ea]=n,f[Yu]=s||e&&e[Yu],f[Wn]=a||e&&e[Wn],f[Xu]=u||e&&e[Xu]||null,f[Ta]=i,f[Ab]=Mle(),f[su]=d,f[ZV]=c,f[Us]=t.type==2?e[Us]:f,f}function Wb(e,t,n,r,o){let i=e.data[t];if(i===null)i=ffe(e,t,n,r,o),Yce()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=Wce();i.injectorIndex=s===null?-1:s.injectorIndex}return Ay(i,!0),i}function ffe(e,t,n,r,o){let i=uB(),s=cB(),a=s?i:i&&i.parent,u=e.data[t]=xfe(e,a,n,t,r,o);return e.firstChild===null&&(e.firstChild=u),i!==null&&(s?i.child==null&&u.parent!==null&&(i.child=u):i.next===null&&(i.next=u,u.prev=i)),u}function IU(e,t,n,r){if(n===0)return-1;let o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function SU(e,t,n,r,o){let i=dh(),s=r&2;try{Bd(-1),s&&t.length>Zr&&CU(e,t,Zr,!1),ou(s?2:0,o),n(r,o)}finally{Bd(i),ou(s?3:1,o)}}function DU(e,t,n){if(JV(t)){let r=Kt(null);try{let o=t.directiveStart,i=t.directiveEnd;for(let s=o;s<i;s++){let a=e.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Kt(r)}}}function NU(e,t,n){aB()&&(_fe(e,t,n,ss(n,t)),(n.flags&64)===64&&PU(e,t,n))}function AU(e,t,n=ss){let r=t.localNames;if(r!==null){let o=t.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(t,e):e[s];e[o++]=a}}}function RU(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=GR(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function GR(e,t,n,r,o,i,s,a,u,c,d){let f=Zr+r,h=f+o,m=pfe(f,h),v=typeof c=="function"?c():c;return m[at]={type:e,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:t,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:v,incompleteFirstPass:!1,ssrId:d}}function pfe(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:dl);return n}function hfe(e,t,n,r){let i=r.get(ZB,YB)||n===au.ShadowDom,s=e.selectRootElement(t,i);return mfe(s),s}function mfe(e){kU(e)}var kU=()=>null;function gfe(e){VB(e)?xU(e):bde(e)}function yfe(){kU=gfe}function vfe(e,t,n,r){let o=BU(t);o.push(n),e.firstCreatePass&&UU(e).push(r,o.length-1)}function xfe(e,t,n,r,o,i){let s=t?t.injectorIndex:-1,a=0;return Ny()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function cV(e,t,n,r,o){for(let i in t){if(!t.hasOwnProperty(i))continue;let s=t[i];if(s===void 0)continue;r??={};let a,u=ol.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=i;if(o!==null){if(!o.hasOwnProperty(i))continue;c=o[i]}e===0?lV(r,n,c,a,u):lV(r,n,c,a)}return r}function lV(e,t,n,r,o){let i;e.hasOwnProperty(n)?(i=e[n]).push(t,r):i=e[n]=[t,r],o!==void 0&&i.push(o)}function bfe(e,t,n){let r=t.directiveStart,o=t.directiveEnd,i=e.data,s=t.attrs,a=[],u=null,c=null;for(let d=r;d<o;d++){let f=i[d],h=n?n.get(f):null,m=h?h.inputs:null,v=h?h.outputs:null;u=cV(0,f.inputs,d,u,m),c=cV(1,f.outputs,d,c,v);let x=u!==null&&s!==null&&!UR(t)?Pfe(u,d,s):null;a.push(x)}u!==null&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=u,t.outputs=c}function wfe(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function OU(e,t,n,r,o,i,s,a){let u=ss(t,n),c=t.inputs,d;!a&&c!=null&&(d=c[r])?(jR(e,n,d,r,o),Dy(t)&&Efe(n,t.index)):t.type&3?(r=wfe(r),o=s!=null?s(o,t.value||"",r):o,i.setProperty(u,r,o)):t.type&12}function Efe(e,t){let n=al(t,e);n[ct]&16||(n[ct]|=64)}function MU(e,t,n,r){if(aB()){let o=r===null?null:{"":-1},i=Sfe(e,n),s,a;i===null?s=a=null:[s,a]=i,s!==null&&FU(e,t,n,s,o,a),o&&Dfe(n,r,o)}n.mergedAttrs=Ey(n.mergedAttrs,n.attrs)}function FU(e,t,n,r,o,i){for(let c=0;c<r.length;c++)xA(ab(n,t),e,r[c].type);Afe(n,e.data.length,r.length);for(let c=0;c<r.length;c++){let d=r[c];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=IU(e,t,r.length,null);for(let c=0;c<r.length;c++){let d=r[c];n.mergedAttrs=Ey(n.mergedAttrs,d.hostAttrs),Rfe(e,n,t,u,d),Nfe(u,d,o),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}bfe(e,n,i)}function Cfe(e,t,n,r,o){let i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;Tfe(s)!=a&&s.push(a),s.push(n,r,i)}}function Tfe(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function _fe(e,t,n,r){let o=n.directiveStart,i=n.directiveEnd;Dy(n)&&kfe(t,n,e.data[o+n.componentOffset]),e.firstCreatePass||ab(n,t),jd(r,t);let s=n.initialInputs;for(let a=o;a<i;a++){let u=e.data[a],c=Gd(t,e,a,n);if(jd(c,t),s!==null&&Ffe(t,a-o,c,u,n,s),rl(u)){let d=al(n.index,t);d[Ea]=Gd(t,e,a,n)}}}function PU(e,t,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=Qce();try{Bd(i);for(let a=r;a<o;a++){let u=e.data[a],c=t[a];gA(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Ife(u,c)}}finally{Bd(-1),gA(s)}}function Ife(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Sfe(e,t){let n=e.directiveRegistry,r=null,o=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(ife(t,s.selectors,!1))if(r||(r=[]),rl(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s);let u=a.length;kA(e,t,u)}else r.unshift(s),kA(e,t,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return r===null?null:[r,o]}function kA(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Dfe(e,t,n){if(t){let r=e.localNames=[];for(let o=0;o<t.length;o+=2){let i=n[t[o+1]];if(i==null)throw new Be(-301,!1);r.push(t[o],i)}}}function Nfe(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;rl(t)&&(n[""]=e)}}function Afe(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Rfe(e,t,n,r,o){e.data[r]=o;let i=o.factory||(o.factory=$d(o.type,!0)),s=new Ud(i,rl(o),lt);e.blueprint[r]=s,n[r]=s,Cfe(e,t,r,IU(e,n,o.hostVars,dl),o)}function $U(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function kfe(e,t,n){let r=ss(t,e),o=RU(n),i=e[Yu].rendererFactory,s=qb(e,Hb(e,o,null,$U(n),r,t,null,i.createRenderer(r,n),null,null,null));e[t.index]=s}function Ofe(e,t,n,r,o,i){let s=ss(e,t);Mfe(t[Wn],s,i,e.value,n,r,o)}function Mfe(e,t,n,r,o,i,s){if(i==null)e.removeAttribute(t,o,n);else{let a=s==null?Ib(i):s(i,r||"",o);e.setAttribute(t,o,a,n)}}function Ffe(e,t,n,r,o,i){let s=i[t];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],c=s[a++],d=s[a++],f=s[a++];_U(r,n,u,c,d,f)}}function Pfe(e,t,n){let r=null,o=0;for(;o<n.length;){let i=n[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(e.hasOwnProperty(i)){r===null&&(r=[]);let s=e[i];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(i,s[a+1],s[a+2],n[o+1]);break}}o+=2}return r}function LU(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function VU(e,t){let n=e.contentQueries;if(n!==null){let r=Kt(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=e.data[s];mR(i),a.contentQueries(2,t[s],s)}}}finally{Kt(r)}}}function qb(e,t){return e[wy]?e[UL][ba]=t:e[wy]=t,e[UL]=t,t}function OA(e,t,n){mR(0);let r=Kt(null);try{t(e,n)}finally{Kt(r)}}function BU(e){return e[Q1]??=[]}function UU(e){return e.cleanup??=[]}function Kb(e,t){let n=e[Xu],r=n?n.get(Ju,null):null;r&&r.handleError(t)}function jR(e,t,n,r,o){for(let i=0;i<n.length;){let s=n[i++],a=n[i++],u=n[i++],c=t[s],d=e.data[s];_U(d,c,r,a,u,o)}}function $fe(e,t,n){let r=oB(t,e);$de(e[Wn],r,n)}function Lfe(e,t){let n=al(t,e),r=n[at];Vfe(r,n);let o=n[rs];o!==null&&n[su]===null&&(n[su]=RR(o,n[Xu])),zR(r,n,n[Ea])}function Vfe(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function zR(e,t,n){gR(t);try{let r=e.viewQuery;r!==null&&OA(1,r,n);let o=e.template;o!==null&&SU(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Zu]?.finishViewCreation(e),e.staticContentQueries&&VU(e,t),e.staticViewQueries&&OA(2,e.viewQuery,n);let i=e.components;i!==null&&Bfe(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[ct]&=-5,yR()}}function Bfe(e,t){for(let n=0;n<t.length;n++)Lfe(e,t[n])}function GU(e,t,n,r){let o=Kt(null);try{let i=t.tView,a=e[ct]&4096?4096:16,u=Hb(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=e[t.index];u[Ld]=c;let d=e[Zu];return d!==null&&(u[Zu]=d.createEmbeddedView(i)),zR(i,u,n),u}finally{Kt(o)}}function MA(e,t){return!t||t.firstChild===null||lb(e)}function jU(e,t,n,r=!0){let o=t[at];if(Ude(o,t,e,n),r){let s=RA(n,e),a=t[Wn],u=yU(a,e[Qu]);u!==null&&Vde(o,e[Ta],a,t,u,s)}let i=t[su];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Ufe(e,t){let n=pb(e,t);return n!==void 0&&$R(n[at],n),n}function mb(e,t,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let i=t[n.index];i!==null&&r.push(Ca(i)),uu(i)&&Gfe(i,r);let s=n.type;if(s&8)mb(e,t,n.child,r);else if(s&32){let a=MR(n,t),u;for(;u=a();)r.push(u)}else if(s&16){let a=vU(t,n);if(Array.isArray(a))r.push(...a);else{let u=Vd(t[Us]);mb(u[at],u,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function Gfe(e,t){for(let n=Ei;n<e.length;n++){let r=e[n],o=r[at].firstChild;o!==null&&mb(r[at],r,o,t)}e[Qu]!==e[rs]&&t.push(e[Qu])}var zU=[];function jfe(e){return e[ns]??zfe(e)}function zfe(e){let t=zU.pop()??Object.create(Wfe);return t.lView=e,t}function Hfe(e){e.lView[ns]!==e&&(e.lView=null,zU.push(e))}var Wfe=vt(xe({},dy),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ob(e.lView)},consumerOnSignalRead(){this.lView[ns]=this}});function qfe(e){let t=e[ns]??Object.create(Kfe);return t.lView=e,t}var Kfe=vt(xe({},dy),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Vd(e.lView);for(;t&&!HU(t[at]);)t=Vd(t);t&&hR(t)},consumerOnSignalRead(){this.lView[ns]=this}});function HU(e){return e.type!==2}function WU(e){if(e[J1]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[J1])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[ct]&8192)}}var Xfe=100;function qU(e,t=!0,n=0){let o=e[Yu].rendererFactory,i=!1;i||o.begin?.();try{Yfe(e,n)}catch(s){throw t&&Kb(e,s),s}finally{i||o.end?.()}}function Yfe(e,t){let n=lB();try{jL(!0),FA(e,t);let r=0;for(;kb(e);){if(r===Xfe)throw new Be(103,!1);r++,FA(e,1)}}finally{jL(n)}}function Zfe(e,t,n,r){let o=t[ct];if((o&256)===256)return;let i=!1,s=!1;gR(t);let a=!0,u=null,c=null;i||(HU(e)?(c=jfe(t),u=Jx(c)):R4()===null?(a=!1,c=qfe(t),u=Jx(c)):t[ns]&&(pN(t[ns]),t[ns]=null));try{iB(t),Kce(e.bindingStartIndex),n!==null&&SU(e,t,n,2,r);let d=(o&3)===3;if(!i)if(d){let m=e.preOrderCheckHooks;m!==null&&U1(t,m,null)}else{let m=e.preOrderHooks;m!==null&&G1(t,m,0,null),KN(t,0)}if(s||Qfe(t),WU(t),KU(t,0),e.contentQueries!==null&&VU(e,t),!i)if(d){let m=e.contentCheckHooks;m!==null&&U1(t,m)}else{let m=e.contentHooks;m!==null&&G1(t,m,1),KN(t,1)}dfe(e,t);let f=e.components;f!==null&&YU(t,f,0);let h=e.viewQuery;if(h!==null&&OA(2,h,r),!i)if(d){let m=e.viewCheckHooks;m!==null&&U1(t,m)}else{let m=e.viewHooks;m!==null&&G1(t,m,2),KN(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[qN]){for(let m of t[qN])m();t[qN]=null}i||(t[ct]&=-73)}catch(d){throw i||Ob(t),d}finally{c!==null&&(dN(c,u),a&&Hfe(c)),yR()}}function KU(e,t){for(let n=GB(e);n!==null;n=jB(n))for(let r=Ei;r<n.length;r++){let o=n[r];XU(o,t)}}function Qfe(e){for(let t=GB(e);t!==null;t=jB(t)){if(!(t[ct]&tb.HasTransplantedViews))continue;let n=t[oh];for(let r=0;r<n.length;r++){let o=n[r];hR(o)}}}function Jfe(e,t,n){let r=al(t,e);XU(r,n)}function XU(e,t){pR(e)&&FA(e,t)}function FA(e,t){let r=e[at],o=e[ct],i=e[ns],s=!!(t===0&&o&16);if(s||=!!(o&64&&t===0),s||=!!(o&1024),s||=!!(i?.dirty&&fN(i)),s||=!1,i&&(i.dirty=!1),e[ct]&=-9217,s)Zfe(r,e,r.template,e[Ea]);else if(o&8192){WU(e),KU(e,1);let a=r.components;a!==null&&YU(e,a,1)}}function YU(e,t,n){for(let r=0;r<t.length;r++)Jfe(e,t[r],n)}function Xb(e,t){let n=lB()?64:1088;for(e[Yu].changeDetectionScheduler?.notify(t);e;){e[ct]|=n;let r=Vd(e);if(nb(e)&&!r)return e;e=r}return null}var zd=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,n=t[at];return mb(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Ea]}get dirty(){return!!(this._lView[ct]&9280)||!!this._lView[ns]?.dirty}set context(t){this._lView[Ea]=t}get destroyed(){return(this._lView[ct]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Yr];if(uu(t)){let n=t[eb],r=n?n.indexOf(this):-1;r>-1&&(pb(t,r),Y1(n,r))}this._attachedToViewContainer=!1}$R(this._lView[at],this._lView)}onDestroy(t){sB(this._lView,t)}markForCheck(){Xb(this._cdRefInjectingView||this._lView,4)}markForRefresh(){hR(this._cdRefInjectingView||this._lView)}detach(){this._lView[ct]&=-129}reattach(){hA(this._lView),this._lView[ct]|=128}detectChanges(){this._lView[ct]|=1024,qU(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=nb(this._lView),n=this._lView[Ld];n!==null&&!t&&PR(n,this._lView),hU(this._lView[at],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Be(902,!1);this._appRef=t;let n=nb(this._lView),r=this._lView[Ld];r!==null&&!n&&mU(r,this._lView),hA(this._lView)}},Hd=(()=>{class e{static __NG_ELEMENT_ID__=npe}return e})(),epe=Hd,tpe=class extends epe{_declarationLView;_declarationTContainer;elementRef;constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let o=GU(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new zd(o)}};function npe(){return HR(No(),Zt())}function HR(e,t){return e.type&4?new tpe(t,e,fh(e,t)):null}var rpe=new RegExp(`^(\\d+)*(${qB}|${WB})*(.*)`);function ope(e){let t=e.match(rpe),[n,r,o,i]=t,s=r?parseInt(r,10):o,a=[];for(let[u,c,d]of i.matchAll(/(f|n)(\d*)/g)){let f=parseInt(d,10)||1;a.push(c,f)}return[s,...a]}function ipe(e){return!e.prev&&e.parent?.type===8}function JN(e){return e.index-Zr}function spe(e,t){let n=e.i18nNodes;if(n)return n.get(t)}function Yb(e,t,n,r){let o=JN(r),i=spe(e,o);if(i===void 0){let s=e.data[Gle];if(s?.[o])i=upe(s[o],n);else if(t.firstChild===r)i=e.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(ipe(r)){let c=JN(r.parent);i=AA(e,c)}else{let c=ss(u,n);if(a)i=c.firstChild;else{let d=JN(u),f=AA(e,d);if(u.type===2&&f){let m=kR(e,d)+1;i=Zb(m,f)}else i=c.nextSibling}}}}return i}function Zb(e,t){let n=t;for(let r=0;r<e;r++)n=n.nextSibling;return n}function ape(e,t){let n=e;for(let r=0;r<t.length;r+=2){let o=t[r],i=t[r+1];for(let s=0;s<i;s++)switch(o){case DA.FirstChild:n=n.firstChild;break;case DA.NextSibling:n=n.nextSibling;break}}return n}function upe(e,t){let[n,...r]=ope(e),o;if(n===WB)o=t[Us][rs];else if(n===qB)o=Fde(t[Us][rs]);else{let i=Number(n);o=Ca(t[i+Zr])}return ape(o,r)}var cpe=!1;function lpe(e){cpe=e}function dpe(e){let t=e[su];if(t){let{i18nNodes:n,dehydratedIcuData:r}=t;if(n&&r){let o=e[Wn];for(let i of r.values())fpe(o,n,i)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function fpe(e,t,n){for(let r of n.node.cases[n.case]){let o=t.get(r.index-Zr);o&&VR(e,o,!1)}}function ZU(e){let t=e[qu]??[],r=e[Yr][Wn],o=[];for(let i of t)i.data[jle]!==void 0?o.push(i):ppe(i,r);e[qu]=o}function ppe(e,t){let n=0,r=e.firstChild;if(r){let o=e.data[db];for(;n<o;){let i=r.nextSibling;VR(t,r,!1),r=i,n++}}}function WR(e){ZU(e);let t=e[rs];wa(t)&&gb(t);for(let n=Ei;n<e.length;n++)gb(e[n])}function gb(e){dpe(e);let t=e[at];for(let n=Zr;n<t.bindingStartIndex;n++)if(uu(e[n])){let r=e[n];WR(r)}else wa(e[n])&&gb(e[n])}function QU(e){let t=e._views;for(let n of t){let r=vde(n);r!==null&&r[rs]!==null&&(wa(r)?gb(r):WR(r))}}function hpe(e,t,n,r){e!==null&&(n.cleanup(t),WR(e.lContainer),QU(r))}function mpe(e,t){let n=[];for(let r of t)for(let o=0;o<(r[KB]??1);o++){let i={data:r,firstChild:null};r[db]>0&&(i.firstChild=e,e=Zb(r[db],e)),n.push(i)}return[e,n]}var JU=()=>null;function gpe(e,t){let n=e[qu];return!t||n===null||n.length===0?null:n[0].data[Ule]===t?n.shift():(ZU(e),null)}function ype(){JU=gpe}function dV(e,t){return JU(e,t)}var PA=class{},yb=class{},$A=class{resolveComponentFactory(t){throw Error(`No component factory found for ${Xo(t)}.`)}},sh=class{static NULL=new $A},ah=class{},lu=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>vpe()}return e})();function vpe(){let e=Zt(),t=No(),n=al(t.index,e);return(wa(n)?n:e)[Wn]}var xpe=(()=>{class e{static \u0275prov=He({token:e,providedIn:"root",factory:()=>null})}return e})();function LA(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")i=a;else if(i==1)o=FL(o,a);else if(i==2){let u=a,c=t[++s];r=FL(r,u+": "+c+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}var vb=class extends sh{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Ku(t);return new uh(n,this.ngModule)}};function fV(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let o=e[r];if(o===void 0)continue;let i=Array.isArray(o),s=i?o[0]:o,a=i?o[1]:ol.None;t?n.push({propName:s,templateName:r,isSignal:(a&ol.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function bpe(e){let t=e.toLowerCase();return t==="svg"?Oce:t==="math"?Mce:null}var uh=class extends yb{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let t=this.componentDef,n=t.inputTransforms,r=fV(t.inputs,!0);if(n!==null)for(let o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return fV(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=cfe(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,o){let i=Kt(null);try{o=o||this.ngModule;let s=o instanceof Ci?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new eh(t,s):t,u=a.get(ah,null);if(u===null)throw new Be(407,!1);let c=a.get(xpe,null),d=a.get(ih,null),f={rendererFactory:u,sanitizer:c,changeDetectionScheduler:d},h=u.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",v=r?hfe(h,r,this.componentDef.encapsulation,a):FR(h,m,bpe(m)),x=512;this.componentDef.signals?x|=4096:this.componentDef.onPush||(x|=16);let b=null;v!==null&&(b=RR(v,a,!0));let C=GR(0,null,null,1,0,null,null,null,null,null,null),S=Hb(null,C,null,x,null,null,f,h,a,null,b);gR(S);let O,F,B=null;try{let H=this.componentDef,X,Z=null;H.findHostDirectiveDefs?(X=[],Z=new Map,H.findHostDirectiveDefs(H,X,Z),X.push(H)):X=[H];let te=wpe(S,v);B=Epe(te,v,H,X,S,f,h),F=Rb(C,Zr),v&&_pe(h,H,v,r),n!==void 0&&Ipe(F,this.ngContentSelectors,n),O=Tpe(B,H,X,Z,S,[Spe]),zR(C,S,null)}catch(H){throw B!==null&&IA(B),IA(S),H}finally{yR()}return new VA(this.componentType,O,fh(F,S),S,F)}finally{Kt(i)}}},VA=class extends PA{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(t,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=n,this.hostView=this.changeDetectorRef=new zd(o,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,o;if(r!==null&&(o=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView;jR(i[at],i,o,t,n),this.previousInputValues.set(t,n);let s=al(this._tNode.index,i);Xb(s,1)}}get injector(){return new Pd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function wpe(e,t){let n=e[at],r=Zr;return e[r]=t,Wb(n,r,2,"#host",null)}function Epe(e,t,n,r,o,i,s){let a=o[at];Cpe(r,e,t,s);let u=null;t!==null&&(u=RR(t,o[Xu]));let c=i.rendererFactory.createRenderer(t,n),d=Hb(o,RU(n),null,$U(n),o[e.index],e,i,c,null,null,u);return a.firstCreatePass&&kA(a,e,r.length-1),qb(o,d),o[e.index]=d}function Cpe(e,t,n,r){for(let o of e)t.mergedAttrs=Ey(t.mergedAttrs,o.hostAttrs);t.mergedAttrs!==null&&(LA(t,t.mergedAttrs,!0),n!==null&&wU(r,n,t))}function Tpe(e,t,n,r,o,i){let s=No(),a=o[at],u=ss(s,o);FU(a,o,s,n,null,r);for(let d=0;d<n.length;d++){let f=s.directiveStart+d,h=Gd(o,a,f,s);jd(h,o)}PU(a,o,s),u&&jd(u,o);let c=Gd(o,a,s.directiveStart+s.componentOffset,s);if(e[Ea]=o[Ea]=c,i!==null)for(let d of i)d(c,t);return DU(a,s,o),c}function _pe(e,t,n,r){if(r)yA(e,n,["ng-version","19.0.1"]);else{let{attrs:o,classes:i}=lfe(t.selectors[0]);o&&yA(e,n,o),i&&i.length>0&&bU(e,n,i.join(" "))}}function Ipe(e,t,n){let r=e.projection=[];for(let o=0;o<t.length;o++){let i=n[o];r.push(i!=null&&i.length?Array.from(i):null)}}function Spe(){let e=No();bR(Zt()[at],e)}var fl=(()=>{class e{static __NG_ELEMENT_ID__=Dpe}return e})();function Dpe(){let e=No();return t6(e,Zt())}var Npe=fl,e6=class extends Npe{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return fh(this._hostTNode,this._hostLView)}get injector(){return new Pd(this._hostTNode,this._hostLView)}get parentInjector(){let t=wR(this._hostTNode,this._hostLView);if(EB(t)){let n=ib(t,this._hostLView),r=ob(t),o=n[at].data[r+8];return new Pd(o,n)}else return new Pd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=pV(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ei}createEmbeddedView(t,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=dV(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,MA(this._hostTNode,s)),a}createComponent(t,n,r,o,i){let s=t&&!Dce(t),a;if(s)a=n;else{let v=n||{};a=v.index,r=v.injector,o=v.projectableNodes,i=v.environmentInjector||v.ngModuleRef}let u=s?t:new uh(Ku(t)),c=r||this.parentInjector;if(!i&&u.ngModule==null){let x=(s?c:this.parentInjector).get(Ci,null);x&&(i=x)}let d=Ku(u.componentType??{}),f=dV(this._lContainer,d?.id??null),h=f?.firstChild??null,m=u.create(c,o,h,i);return this.insertImpl(m.hostView,a,MA(this._hostTNode,f)),m}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let o=t._lView;if($ce(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let u=o[Yr],c=new e6(u,u[Ta],u[Yr]);c.detach(c.indexOf(t))}}let i=this._adjustIndex(n),s=this._lContainer;return jU(s,o,i,r),t.attachToViewContainerRef(),GV(eA(s),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=pV(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=pb(this._lContainer,n);r&&(Y1(eA(this._lContainer),n),$R(r[at],r))}detach(t){let n=this._adjustIndex(t,-1),r=pb(this._lContainer,n);return r&&Y1(eA(this._lContainer),n)!=null?new zd(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function pV(e){return e[eb]}function eA(e){return e[eb]||(e[eb]=[])}function t6(e,t){let n,r=t[e.index];return uu(r)?n=r:(n=LU(r,t,null,e),t[e.index]=n,qb(t,n)),n6(n,t,e,r),new e6(n,e,t)}function Ape(e,t){let n=e[Wn],r=n.createComment(""),o=ss(t,e),i=yU(n,o);return hb(n,i,r,Wde(n,o),!1),r}var n6=r6,qR=()=>!1;function Rpe(e,t,n){return qR(e,t,n)}function r6(e,t,n,r){if(e[Qu])return;let o;n.type&8?o=Ca(r):o=Ape(t,n),e[Qu]=o}function kpe(e,t,n){if(e[Qu]&&e[qu])return!0;let r=n[su],o=t.index-Zr;if(!r||kle(t)||ky(r,o))return!1;let s=AA(r,o),a=r.data[DR]?.[o],[u,c]=mpe(s,a);return e[Qu]=u,e[qu]=c,!0}function Ope(e,t,n,r){qR(e,n,t)||r6(e,t,n,r)}function Mpe(){n6=Ope,qR=kpe}var BA=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},UA=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){let s=n.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new e(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)KR(t,n).matches!==null&&this.queries[n].setDirty()}},xb=class{flags;read;predicate;constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=Gpe(t):this.predicate=t}},GA=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(t,o);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},jA=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(t,n,Fpe(n,i)),this.matchTNodeWithReadOption(t,n,j1(n,t,i,!1,!1))}else r===Hd?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,j1(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===_i||o===fl||o===Hd&&n.type&4)this.addMatch(n.index,-2);else{let i=j1(n,t,o,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function Fpe(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function Ppe(e,t){return e.type&11?fh(e,t):e.type&4?HR(e,t):null}function $pe(e,t,n,r){return n===-1?Ppe(t,e):n===-2?Lpe(e,t,r):Gd(e,e[at],n,t)}function Lpe(e,t,n){if(n===_i)return fh(t,e);if(n===Hd)return HR(t,e);if(n===fl)return t6(t,e)}function o6(e,t,n,r){let o=t[Zu].queries[r];if(o.matches===null){let i=e.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let c=s[u];if(c<0)a.push(null);else{let d=i[c];a.push($pe(t,d,s[u+1],n.metadata.read))}}o.matches=a}return o.matches}function zA(e,t,n,r){let o=e.queries.getByIndex(n),i=o.matches;if(i!==null){let s=o6(e,t,o,n);for(let a=0;a<i.length;a+=2){let u=i[a];if(u>0)r.push(s[a/2]);else{let c=i[a+1],d=t[-u];for(let f=Ei;f<d.length;f++){let h=d[f];h[Ld]===h[Yr]&&zA(h[at],h,c,r)}if(d[oh]!==null){let f=d[oh];for(let h=0;h<f.length;h++){let m=f[h];zA(m[at],m,c,r)}}}}}return r}function Vpe(e,t){return e[Zu].queries[t].queryList}function i6(e,t,n){let r=new _A((n&4)===4);return vfe(e,t,r,r.destroy),(t[Zu]??=new UA).queries.push(new BA(r))-1}function Bpe(e,t,n){let r=po();return r.firstCreatePass&&(s6(r,new xb(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),i6(r,Zt(),t)}function Upe(e,t,n,r){let o=po();if(o.firstCreatePass){let i=No();s6(o,new xb(t,n,r),i.index),jpe(o,e),(n&2)===2&&(o.staticContentQueries=!0)}return i6(o,Zt(),n)}function Gpe(e){return e.split(",").map(t=>t.trim())}function s6(e,t,n){e.queries===null&&(e.queries=new GA),e.queries.track(new jA(t,n))}function jpe(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function KR(e,t){return e.queries.getByIndex(t)}function zpe(e,t){let n=e[at],r=KR(n,t);return r.crossesNgTemplate?zA(n,e,t,[]):o6(n,e,r,t)}function Hpe(e){return typeof e=="function"&&e[Qi]!==void 0}function Qb(e,t){cu("NgSignals");let n=U4(e),r=n[Qi];return t?.equal&&(r.equal=t.equal),n.set=o=>n1(r,o),n.update=o=>G4(r,o),n.asReadonly=Wpe.bind(n),n}function Wpe(){let e=this[Qi];if(e.readonlyFn===void 0){let t=()=>this();t[Qi]=e,e.readonlyFn=t}return e.readonlyFn}function a6(e){return Hpe(e)&&typeof e.set=="function"}var il=class{},Cy=class{};var HA=class extends il{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new vb(this);constructor(t,n,r,o=!0){super(),this.ngModuleType=t,this._parent=n;let i=HV(t);this._bootstrapComponents=dU(i.bootstrap),this._r3Injector=RB(t,n,[{provide:il,useValue:this},{provide:sh,useValue:this.componentFactoryResolver},...r],Xo(t),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},WA=class extends Cy{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new HA(this.moduleType,t,[])}};var bb=class extends il{injector;componentFactoryResolver=new vb(this);instance=null;constructor(t){super();let n=new by([...t.providers,{provide:il,useValue:this},{provide:sh,useValue:this.componentFactoryResolver}],t.parent||dR(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function My(e,t,n=null){return new bb({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var qpe=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=cR(!1,n.type),o=r.length>0?My([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=He({token:e,providedIn:"environment",factory:()=>new e(bt(Ci))})}return e})();function Dr(e){return _y(()=>{let t=u6(e),n=vt(xe({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===BB.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?o=>o.get(qpe).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||au.Emulated,styles:e.styles||Bs,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&cu("NgStandalone"),c6(n);let r=e.dependencies;return n.directiveDefs=mV(r,!1),n.pipeDefs=mV(r,!0),n.id=Ype(n),n})}function Kpe(e){return Ku(e)||aR(e)}function Xpe(e){return e!==null}function pl(e){return _y(()=>({type:e.type,bootstrap:e.bootstrap||Bs,declarations:e.declarations||Bs,imports:e.imports||Bs,exports:e.exports||Bs,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function hV(e,t){if(e==null)return nh;let n={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r],i,s,a=ol.None;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i):(i=o,s=o),t?(n[i]=a!==ol.None?[r,a]:r,t[i]=s):n[i]=r}return n}function as(e){return _y(()=>{let t=u6(e);return c6(t),t})}function XR(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function u6(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||nh,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Bs,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hV(e.inputs,t),outputs:hV(e.outputs),debugInfo:null}}function c6(e){e.features?.forEach(t=>t(e))}function mV(e,t){if(!e)return null;let n=t?uR:Kpe;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(Xpe)}function Ype(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let i of r.join("|"))t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Zpe(e){return Object.getPrototypeOf(e.prototype).constructor}function hh(e){let t=Zpe(e.type),n=!0,r=[e];for(;t;){let o;if(rl(e))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Be(903,!1);o=t.\u0275dir}if(o){if(n){r.push(o);let s=e;s.inputs=P1(e.inputs),s.inputTransforms=P1(e.inputTransforms),s.declaredInputs=P1(e.declaredInputs),s.outputs=P1(e.outputs);let a=o.hostBindings;a&&nhe(e,a);let u=o.viewQuery,c=o.contentQueries;if(u&&ehe(e,u),c&&the(e,c),Qpe(e,o),Wue(e.outputs,o.outputs),rl(o)&&o.data.animation){let d=e.data;d.animation=(d.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(e),a===hh&&(n=!1)}}t=Object.getPrototypeOf(t)}Jpe(r)}function Qpe(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let o=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(o))continue;e.inputTransforms??={},e.inputTransforms[o]=t.inputTransforms[o]}}}function Jpe(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let o=e[r];o.hostVars=t+=o.hostVars,o.hostAttrs=Ey(o.hostAttrs,n=Ey(n,o.hostAttrs))}}function P1(e){return e===nh?{}:e===Bs?[]:e}function ehe(e,t){let n=e.viewQuery;n?e.viewQuery=(r,o)=>{t(r,o),n(r,o)}:e.viewQuery=t}function the(e,t){let n=e.contentQueries;n?e.contentQueries=(r,o,i)=>{t(r,o,i),n(r,o,i)}:e.contentQueries=t}function nhe(e,t){let n=e.hostBindings;n?e.hostBindings=(r,o)=>{t(r,o),n(r,o)}:e.hostBindings=t}function YR(e){let t=e.inputConfig,n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)&&o[3]&&(n[r]=o[3])}e.inputTransforms=n}function l6(e){return ohe(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function rhe(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function ohe(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function d6(e,t,n){return e[t]=n}function ihe(e,t){return e[t]}function Wd(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function she(e,t,n,r){let o=Wd(e,t,n);return Wd(e,t+1,r)||o}function Fy(e){return(e.flags&32)===32}function ahe(e,t,n,r,o,i,s,a,u){let c=t.consts,d=Wb(t,e,4,s||null,a||null);MU(t,n,d,rb(c,u)),bR(t,d);let f=d.tView=GR(2,d,r,o,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,d),f.queries=t.queries.embeddedTView(d)),d}function uhe(e,t,n,r,o,i,s,a,u,c){let d=n+Zr,f=t.firstCreatePass?ahe(d,t,e,r,o,i,s,a,u):t.data[d];Ay(f,!1);let h=f6(t,e,f,n);xR()&&LR(t,e,h,f),jd(h,e);let m=LU(h,e,h,f);return e[d]=m,qb(e,m),Rpe(m,f,e),fR(f)&&NU(t,e,f),u!=null&&AU(e,f,c),f}function Ao(e,t,n,r,o,i,s,a){let u=Zt(),c=po(),d=rb(c.consts,i);return uhe(u,c,e,t,n,r,o,d,s,a),Ao}var f6=p6;function p6(e,t,n,r){return ll(!0),t[Wn].createComment("")}function che(e,t,n,r){let o=t[su],i=!o||Ny()||Fy(n)||ky(o,r);if(ll(i),i)return p6(e,t,n,r);let s=o.data[Ble]?.[r]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=Yb(o,e,t,n);Gb(o,r,a);let u=kR(o,r);return Zb(u,a)}function lhe(){f6=che}var dhe=(()=>{class e{cachedInjectors=new Map;getOrCreateInjector(n,r,o,i){if(!this.cachedInjectors.has(n)){let s=o.length>0?My(o,r,i):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=He({token:e,providedIn:"environment",factory:()=>new e})}return e})();var fhe=new ke("");function tA(e,t,n){return e.get(dhe).getOrCreateInjector(t,e,n,"")}function phe(e,t,n){if(e instanceof eh){let o=e.injector,i=e.parentInjector,s=tA(i,t,n);return new eh(o,s)}let r=e.get(Ci);if(r!==e){let o=tA(r,t,n);return new eh(e,o)}return tA(e,t,n)}function Zp(e,t,n,r=!1){let o=n[Yr],i=o[at];if(Nce(o))return;let s=Vb(o,t),a=s[AR],u=s[nde];if(!(u!==null&&e<u)&&gV(a,e)&&gV(s[Jle]??-1,e)){let c=Bb(i,t),f=!r&&!0&&(ade(c)!==null||rV(c,fo.Loading)!==null||rV(c,fo.Placeholder))?ghe:mhe;try{f(e,s,n,t,o)}catch(h){Kb(o,h)}}}function hhe(e,t){let n=e[qu];return n===null||n.length===0?null:n.find(r=>r.data[zle]===t[AR])??null}function mhe(e,t,n,r,o){let i=sde(e,o,r);if(i!==null){t[AR]=e;let s=o[at],a=i+Zr,u=Rb(s,a),c=0;Ufe(n,c);let d;if(e===fo.Complete){let m=Bb(s,r),v=m.providers;v&&v.length>0&&(d=phe(o[Xu],m,v))}let f=hhe(n,t);if(n[qu]===null||n[qu].length===0||f){n[qu]=null;let m=GU(o,u,null,{injector:d,dehydratedView:f});jU(n,m,c,MA(u,f)),Xb(m,2)}if(e===fo.Complete&&Array.isArray(t[th])){for(let m of t[th])m();t[th]=null}}}function gV(e,t){return e<t}function yV(e,t,n){e.loadingPromise.then(()=>{e.loadingState===ts.COMPLETE?Zp(fo.Complete,t,n):e.loadingState===ts.FAILED&&Zp(fo.Error,t,n)})}var ghe=null;var Jb=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var h6=new ke("");function Yd(e){return!!e&&typeof e.then=="function"}function m6(e){return!!e&&typeof e.subscribe=="function"}var ew=new ke("");var g6=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=fe(ew,{optional:!0})??[];injector=fe(Ti);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let i=is(this.injector,o);if(Yd(i))n.push(i);else if(m6(i)){let s=new Promise((a,u)=>{i.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),yhe=(()=>{class e{static \u0275prov=He({token:e,providedIn:"root",factory:()=>new qA})}return e})(),qA=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,n]of this.queues)t===null?this.flushQueue(n):t.run(()=>this.flushQueue(n))}flushQueue(t){for(let n of t)t.delete(n),this.queuedEffectCount--,n.run()}},hl=new ke("");function vhe(){B4(()=>{throw new Be(600,!1)})}function xhe(e){return e.isBoundToModule}var bhe=10;function whe(e,t,n){try{let r=n();return Yd(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var os=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=fe(_le);afterRenderManager=fe(JB);zonelessEnabled=fe(Fb);rootEffectScheduler=fe(yhe);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Sr;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=fe(tc).hasPendingTasks.pipe(xt(n=>!n));constructor(){fe($b,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=fe(Ci);get injector(){return this._injector}bootstrap(n,r){let o=n instanceof yb;if(!this._injector.get(g6).done){let h=!o&&WV(n),m=!1;throw new Be(405,m)}let s;o?s=n:s=this._injector.get(sh).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=xhe(s)?void 0:this._injector.get(il),u=r||s.selector,c=s.create(Ti.NULL,[],u,a),d=c.location.nativeElement,f=c.injector.get(h6,null);return f?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),H1(this.components,c),f?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(NR.CHANGE_DETECTION,this._tick);return}if(this._runningTick)throw new Be(101,!1);let n=Kt(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Kt(n),this.afterTick.next()}};synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(ah,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<bhe;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o,notifyErrorHandler:i}of this.allViews)Ehe(o,i,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>kb(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;H1(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(hl,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>H1(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Be(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function H1(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Ehe(e,t,n,r){if(!n&&!kb(e))return;qU(e,t,n&&!r?0:1)}function Che(e,t,n){let r=t[Xu],o=t[at];if(e.loadingState!==ts.NOT_STARTED)return e.loadingPromise??Promise.resolve();let i=Vb(t,n),s=ude(o,e);e.loadingState=ts.IN_PROGRESS,z1(1,i);let a=e.dependencyResolverFn,u=r.get(tc),c=u.add();return a?(e.loadingPromise=Promise.allSettled(a()).then(d=>{let f=!1,h=[],m=[];for(let v of d)if(v.status==="fulfilled"){let x=v.value,b=Ku(x)||aR(x);if(b)h.push(b);else{let C=uR(x);C&&m.push(C)}}else{f=!0;break}if(e.loadingPromise=null,u.remove(c),f){if(e.loadingState=ts.FAILED,e.errorTmplIndex===null){let v="",x=new Be(750,!1);Kb(t,x)}}else{e.loadingState=ts.COMPLETE;let v=s.tView;if(h.length>0){v.directiveRegistry=oV(v.directiveRegistry,h);let x=h.map(C=>C.type),b=cR(!1,...x);e.providers=b}m.length>0&&(v.pipeRegistry=oV(v.pipeRegistry,m))}}),e.loadingPromise):(e.loadingPromise=Promise.resolve().then(()=>{e.loadingPromise=null,e.loadingState=ts.COMPLETE,u.remove(c)}),e.loadingPromise)}function The(e,t){let n=e[at],r=e[t.index],o=e[Xu],i=Vb(e,t),s=Bb(n,t);if(Ahe(o,s))switch(ode(i),s.loadingState){case ts.NOT_STARTED:Zp(fo.Loading,t,r),Che(s,e,t),s.loadingState===ts.IN_PROGRESS&&yV(s,t,r);break;case ts.IN_PROGRESS:Zp(fo.Loading,t,r),yV(s,t,r);break;case ts.COMPLETE:Zp(fo.Complete,t,r);break;case ts.FAILED:Zp(fo.Error,t,r);break;default:}}function _he(e,t,n){return ne(this,null,function*(){let r=e.get(rU),o=r.hydrating;if(o.has(t))return;let{parentBlockPromise:i,hydrationQueue:s}=Tde(t,e);Ihe(r,s);let a=e.get(tc),u=a.add();i!==null&&(yield i);for(let c of s)yield Dhe(c,r),yield She(e),o.get(c).resolve();yield o.get(t)?.promise,a.remove(u),n&&n(s),hpe(r.get(t),s,r,e.get(os))})}function Ihe(e,t){for(let n of t)e.hydrating.set(n,Promise.withResolvers())}function She(e){let t,n=new Promise(r=>{t=r});return Lb(()=>t(),{injector:e}),n}function Dhe(e,t){let n,r=new Promise(i=>n=i),o=t.get(e);if(o!==null){let{tNode:i,lView:s}=o,a=Vb(s,i);Nhe(a,()=>n()),The(s,i)}return r}function Nhe(e,t){Array.isArray(e[th])||(e[th]=[]),e[th].push(t)}function Ahe(e,t){return e.get(fhe,null,{optional:!0})?.behavior!==eU.Manual}function tw(e,t,n,r){let o=Zt(),i=Mb();if(Wd(o,i,t)){let s=po(),a=vR();Ofe(a,o,e,t,n,r)}return tw}function Rhe(e,t,n,r){return Wd(e,Mb(),n)?t+Ib(n)+r:dl}function $1(e,t){return e<<17|t<<2}function qd(e){return e>>17&32767}function khe(e){return(e&2)==2}function Ohe(e,t){return e&131071|t<<17}function KA(e){return e|2}function ch(e){return(e&131068)>>2}function nA(e,t){return e&-131069|t<<2}function Mhe(e){return(e&1)===1}function XA(e){return e|1}function Fhe(e,t,n,r,o,i){let s=i?t.classBindings:t.styleBindings,a=qd(s),u=ch(s);e[r]=n;let c=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||Sy(f,d)>0)&&(c=!0)}else d=n;if(o)if(u!==0){let h=qd(e[a+1]);e[r+1]=$1(h,a),h!==0&&(e[h+1]=nA(e[h+1],r)),e[a+1]=Ohe(e[a+1],r)}else e[r+1]=$1(a,0),a!==0&&(e[a+1]=nA(e[a+1],r)),a=r;else e[r+1]=$1(u,0),a===0?a=r:e[u+1]=nA(e[u+1],r),u=r;c&&(e[r+1]=KA(e[r+1])),vV(e,d,r,!0),vV(e,d,r,!1),Phe(t,d,e,r,i),s=$1(a,u),i?t.classBindings=s:t.styleBindings=s}function Phe(e,t,n,r,o){let i=o?e.residualClasses:e.residualStyles;i!=null&&typeof t=="string"&&Sy(i,t)>=0&&(n[r+1]=XA(n[r+1]))}function vV(e,t,n,r){let o=e[n+1],i=t===null,s=r?qd(o):ch(o),a=!1;for(;s!==0&&(a===!1||i);){let u=e[s],c=e[s+1];$he(u,t)&&(a=!0,e[s+1]=r?XA(c):KA(c)),s=r?qd(c):ch(c)}a&&(e[n+1]=r?KA(o):XA(o))}function $he(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Sy(e,t)>=0:!1}function Sn(e,t,n){let r=Zt(),o=Mb();if(Wd(r,o,t)){let i=po(),s=vR();OU(i,s,r,e,t,r[Wn],n,!1)}return Sn}function xV(e,t,n,r,o){let i=t.inputs,s=o?"class":"style";jR(e,n,i[s],s,r)}function us(e,t){return Lhe(e,t,null,!0),us}function Lhe(e,t,n,r){let o=Zt(),i=po(),s=Xce(2);if(i.firstUpdatePass&&Bhe(i,e,s,r),t!==dl&&Wd(o,s,t)){let a=i.data[dh()];Hhe(i,a,o,o[Wn],e,o[s+1]=Whe(t,n),r,s)}}function Vhe(e,t){return t>=e.expandoStartIndex}function Bhe(e,t,n,r){let o=e.data;if(o[n+1]===null){let i=o[dh()],s=Vhe(e,n);qhe(i,r)&&t===null&&!s&&(t=!1),t=Uhe(o,i,t,r),Fhe(o,i,t,n,s,r)}}function Uhe(e,t,n,r){let o=Jce(e),i=r?t.residualClasses:t.residualStyles;if(o===null)(r?t.classBindings:t.styleBindings)===0&&(n=rA(null,e,t,n,r),n=Ty(n,t.attrs,r),i=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==o)if(n=rA(o,e,t,n,r),i===null){let u=Ghe(e,t,r);u!==void 0&&Array.isArray(u)&&(u=rA(null,e,t,u[1],r),u=Ty(u,t.attrs,r),jhe(e,t,r,u))}else i=zhe(e,t,r)}return i!==void 0&&(r?t.residualClasses=i:t.residualStyles=i),n}function Ghe(e,t,n){let r=n?t.classBindings:t.styleBindings;if(ch(r)!==0)return e[qd(r)]}function jhe(e,t,n,r){let o=n?t.classBindings:t.styleBindings;e[qd(o)]=r}function zhe(e,t,n){let r,o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++){let s=e[i].hostAttrs;r=Ty(r,s,n)}return Ty(r,t.attrs,n)}function rA(e,t,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=t[a],r=Ty(r,i.hostAttrs,o),i!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Ty(e,t,n){let r=n?1:2,o=-1;if(t!==null)for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?o=s:o===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),hce(e,s,n?!0:t[++i]))}return e===void 0?null:e}function Hhe(e,t,n,r,o,i,s,a){if(!(t.type&3))return;let u=e.data,c=u[a+1],d=Mhe(c)?bV(u,t,n,o,ch(c),s):void 0;if(!wb(d)){wb(i)||khe(c)&&(i=bV(u,null,n,o,a,s));let f=oB(dh(),n);Qde(r,s,f,o,i)}}function bV(e,t,n,r,o,i){let s=t===null,a;for(;o>0;){let u=e[o],c=Array.isArray(u),d=c?u[1]:u,f=d===null,h=n[o+1];h===dl&&(h=f?Bs:void 0);let m=f?HN(h,r):d===r?h:void 0;if(c&&!wb(m)&&(m=HN(u,r)),wb(m)&&(a=m,s))return a;let v=e[o+1];o=s?qd(v):ch(v)}if(t!==null){let u=i?t.residualClasses:t.residualStyles;u!=null&&(a=HN(u,r))}return a}function wb(e){return e!==void 0}function Whe(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Xo(Oy(e)))),e}function qhe(e,t){return(e.flags&(t?8:16))!==0}function Khe(e,t,n,r,o,i){let s=t.consts,a=rb(s,o),u=Wb(t,e,2,r,a);return MU(t,n,u,rb(s,i)),u.attrs!==null&&LA(u,u.attrs,!1),u.mergedAttrs!==null&&LA(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function We(e,t,n,r){let o=Zt(),i=po(),s=Zr+e,a=o[Wn],u=i.firstCreatePass?Khe(s,i,o,t,n,r):i.data[s],c=y6(i,o,u,a,t,e);o[s]=c;let d=fR(u);return Ay(u,!0),wU(a,c,u),!Fy(u)&&xR()&&LR(i,o,c,u),Bce()===0&&jd(c,o),Uce(),d&&(NU(i,o,u),DU(i,u,o)),r!==null&&AU(o,u),We}function Ke(){let e=No();cB()?qce():(e=e.parent,Ay(e,!1));let t=e;jce(t)&&Hce(),Gce();let n=po();return n.firstCreatePass&&(bR(n,e),JV(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&ile(t)&&xV(n,t,Zt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&sle(t)&&xV(n,t,Zt(),t.stylesWithoutHost,!1),Ke}function Nr(e,t,n,r){return We(e,t,n,r),Ke(),Nr}var y6=(e,t,n,r,o,i)=>(ll(!0),FR(r,o,vB()));function Xhe(e,t,n,r,o,i){let s=t[su],a=!s||Ny()||Fy(n)||ky(s,i);if(ll(a),a)return FR(r,o,vB());let u=Yb(s,e,t,n);return aU(s,i)&&Gb(s,i,u.nextSibling),s&&(LB(n)||VB(u))&&Dy(n)&&(zce(n),xU(u)),u}function Yhe(){y6=Xhe}var Zhe=(e,t,n,r)=>(ll(!0),pU(t[Wn],""));function Qhe(e,t,n,r){let o,i=t[su],s=!i||Ny()||ky(i,r)||Fy(n);if(ll(s),s)return pU(t[Wn],"");let a=Yb(i,e,t,n),u=Ede(i,r);return Gb(i,r,a),o=Zb(u,a),o}function Jhe(){Zhe=Qhe}function ml(){return Zt()}var Md=void 0;function eme(e){let t=e,n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var tme=["en",[["a","p"],["AM","PM"],Md],[["AM","PM"],Md,Md],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Md,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Md,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Md,"{1} 'at' {0}",Md],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",eme],oA={};function cs(e){let t=nme(e),n=wV(t);if(n)return n;let r=t.split("-")[0];if(n=wV(r),n)return n;if(r==="en")return tme;throw new Be(701,!1)}function wV(e){return e in oA||(oA[e]=Fd.ng&&Fd.ng.common&&Fd.ng.common.locales&&Fd.ng.common.locales[e]),oA[e]}var fr=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(fr||{});function nme(e){return e.toLowerCase().replace(/_/g,"-")}var Eb="en-US";var rme=Eb;function ome(e){typeof e=="string"&&(rme=e.toLowerCase().replace(/_/g,"-"))}var v6=(e,t,n)=>{};function ime(e){v6=e}function ho(e,t,n,r){let o=Zt(),i=po(),s=No();return x6(i,o,o[Wn],s,e,t,r),ho}function sme(e,t,n,r){let o=e.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=t[Q1],u=o[i+2];return a.length>u?a[u]:null}typeof s=="string"&&(i+=2)}return null}function x6(e,t,n,r,o,i,s){let a=fR(r),c=e.firstCreatePass&&UU(e),d=t[Ea],f=BU(t),h=!0;if(r.type&3||s){let x=ss(r,t),b=s?s(x):x,C=f.length,S=s?F=>s(Ca(F[r.index])):r.index,O=null;if(!s&&a&&(O=sme(e,t,o,r.index)),O!==null){let F=O.__ngLastListenerFn__||O;F.__ngNextListenerFn__=i,O.__ngLastListenerFn__=i,h=!1}else{i=CV(r,t,d,i),v6(x,o,i);let F=n.listen(b,o,i);f.push(i,F),c&&c.push(o,S,C,C+1)}}else i=CV(r,t,d,i);let m=r.outputs,v;if(h&&m!==null&&(v=m[o])){let x=v.length;if(x)for(let b=0;b<x;b+=2){let C=v[b],S=v[b+1],B=t[C][S].subscribe(i),H=f.length;f.push(i,B),c&&c.push(o,r.index,H,-(H+1))}}}function EV(e,t,n,r){let o=Kt(null);try{return ou(6,t,n),n(r)!==!1}catch(i){return Kb(e,i),!1}finally{ou(7,t,n),Kt(o)}}function CV(e,t,n,r){return function o(i){if(i===Function)return r;let s=e.componentOffset>-1?al(e.index,t):t;Xb(s,5);let a=EV(t,n,r,i),u=o.__ngNextListenerFn__;for(;u;)a=EV(t,n,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function js(e=1){return tle(e)}function b6(e,t,n,r){Upe(e,t,n,r)}function Py(e,t,n){Bpe(e,t,n)}function Zd(e){let t=Zt(),n=po(),r=fB();mR(r+1);let o=KR(n,r);if(e.dirty&&Pce(t)===((o.metadata.flags&2)===2)){if(o.matches===null)e.reset([]);else{let i=zpe(t,r);e.reset(i,Dle),e.notifyOnChanges()}return!0}return!1}function Qd(){return Vpe(Zt(),fB())}function ame(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function Et(e,t=""){let n=Zt(),r=po(),o=e+Zr,i=r.firstCreatePass?Wb(r,o,1,t,null):r.data[o],s=w6(r,n,i,t,e);n[o]=s,xR()&&LR(r,n,s,i),Ay(i,!1)}var w6=(e,t,n,r,o)=>(ll(!0),fU(t[Wn],r));function ume(e,t,n,r,o){let i=t[su],s=!i||Ny()||Fy(n)||ky(i,o);return ll(s),s?fU(t[Wn],r):Yb(i,e,t,n)}function cme(){w6=ume}function Jd(e){return $y("",e,""),Jd}function $y(e,t,n){let r=Zt(),o=Rhe(r,e,t,n);return o!==dl&&$fe(r,dh(),o),$y}function ZR(e,t,n){a6(t)&&(t=t());let r=Zt(),o=Mb();if(Wd(r,o,t)){let i=po(),s=vR();OU(i,s,r,e,t,r[Wn],n,!1)}return ZR}function E6(e,t){let n=a6(e);return n&&e.set(t),n}function QR(e,t){let n=Zt(),r=po(),o=No();return x6(r,n,n[Wn],o,e,t),QR}function lme(e,t,n){let r=po();if(r.firstCreatePass){let o=rl(e);YA(n,r.data,r.blueprint,o,!0),YA(t,r.data,r.blueprint,o,!1)}}function YA(e,t,n,r,o){if(e=Ko(e),Array.isArray(e))for(let i=0;i<e.length;i++)YA(e[i],t,n,r,o);else{let i=po(),s=Zt(),a=No(),u=rh(e)?e:Ko(e.provide),c=XV(e),d=a.providerIndexes&1048575,f=a.directiveStart,h=a.providerIndexes>>20;if(rh(e)||!e.multi){let m=new Ud(c,o,lt),v=sA(u,t,o?d:d+h,f);v===-1?(xA(ab(a,s),i,u),iA(i,e,t.length),t.push(u),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[v]=m,s[v]=m)}else{let m=sA(u,t,d+h,f),v=sA(u,t,d,d+h),x=m>=0&&n[m],b=v>=0&&n[v];if(o&&!b||!o&&!x){xA(ab(a,s),i,u);let C=pme(o?fme:dme,n.length,o,r,c);!o&&b&&(n[v].providerFactory=C),iA(i,e,t.length,0),t.push(u),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(C),s.push(C)}else{let C=C6(n[o?v:m],c,!o&&r);iA(i,e,m>-1?m:v,C)}!o&&r&&b&&n[v].componentProviders++}}}function iA(e,t,n,r){let o=rh(t),i=bce(t);if(o||i){let u=(i?Ko(t.useClass):t).prototype.ngOnDestroy;if(u){let c=e.destroyHooks||(e.destroyHooks=[]);if(!o&&t.multi){let d=c.indexOf(n);d===-1?c.push(n,[r,u]):c[d+1].push(r,u)}else c.push(n,u)}}}function C6(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function sA(e,t,n,r){for(let o=n;o<r;o++)if(t[o]===e)return o;return-1}function dme(e,t,n,r){return ZA(this.multi,[])}function fme(e,t,n,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Gd(n,n[at],this.providerFactory.index,r);i=a.slice(0,s),ZA(o,i);for(let u=s;u<a.length;u++)i.push(a[u])}else i=[],ZA(o,i);return i}function ZA(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function pme(e,t,n,r,o){let i=new Ud(e,n,lt);return i.multi=[],i.index=t,i.componentProviders=0,C6(i,o,r&&!n),i}function JR(e,t=[]){return n=>{n.providersResolver=(r,o)=>lme(r,o?o(e):e,t)}}function nw(e,t,n){let r=dB()+e,o=Zt();return o[r]===dl?d6(o,r,n?t.call(n):t()):ihe(o,r)}function hme(e,t){let n=e[t];return n===dl?void 0:n}function mme(e,t,n,r,o,i,s){let a=t+n;return she(e,a,o,i)?d6(e,a+2,s?r.call(s,o,i):r(o,i)):hme(e,a+2)}function ek(e,t){let n=po(),r,o=e+Zr;n.firstCreatePass?(r=gme(t,n.pipeRegistry),n.data[o]=r,r.onDestroy&&(n.destroyHooks??=[]).push(o,r.onDestroy)):r=n.data[o];let i=r.factory||(r.factory=$d(r.type,!0)),s,a=wi(lt);try{let u=sb(!1),c=i();return sb(u),ame(n,Zt(),o,c),c}finally{wi(a)}}function gme(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function tk(e,t,n,r){let o=e+Zr,i=Zt(),s=Fce(i,o);return yme(i,o)?mme(i,dB(),t,s.transform,n,r,s):s.transform(n,r)}function yme(e,t){return e[at].data[t].pure}var QA=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},rw=(()=>{class e{compileModuleSync(n){return new WA(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=HV(n),i=dU(o.declarations).reduce((s,a)=>{let u=Ku(a);return u&&s.push(new uh(u)),s},[]);return new QA(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var vme=(()=>{class e{zone=fe(er);changeDetectionScheduler=fe(ih);applicationRef=fe(os);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),xme=new ke("",{factory:()=>!1});function T6({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new er(vt(xe({},I6()),{scheduleInRootZone:n})),[{provide:er,useFactory:e},{provide:nl,multi:!0,useFactory:()=>{let r=fe(vme,{optional:!0});return()=>r.initialize()}},{provide:nl,multi:!0,useFactory:()=>{let r=fe(bme);return()=>{r.initialize()}}},t===!0?{provide:OB,useValue:!0}:[],{provide:MB,useValue:n??kB}]}function _6(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=T6({ngZoneFactory:()=>{let o=I6(e);return o.scheduleInRootZone=n,o.shouldCoalesceEventChangeDetection&&cu("NgZone_CoalesceEvent"),new er(o)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return Kd([{provide:xme,useValue:!0},{provide:Fb,useValue:!1},r])}function I6(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var bme=(()=>{class e{subscription=new ur;initialized=!1;zone=fe(er);pendingTasks=fe(tc);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{er.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{er.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var wme=(()=>{class e{appRef=fe(os);taskService=fe(tc);ngZone=fe(er);zonelessEnabled=fe(Fb);tracing=fe($b,{optional:!0});disableScheduling=fe(OB,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ur;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(cb):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(fe(MB,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof TA||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?XL:FB;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(cb+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,XL(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Eme(){return typeof $localize<"u"&&$localize.locale||Eb}var Ly=new ke("",{providedIn:"root",factory:()=>fe(Ly,At.Optional|At.SkipSelf)||Eme()});var JA=new ke("");function L1(e){return!e.moduleRef}function Cme(e){let t=L1(e)?e.r3Injector:e.moduleRef.injector,n=t.get(er);return n.run(()=>{L1(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Ju,null),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:i=>{r.handleError(i)}})}),L1(e)){let i=()=>t.destroy(),s=e.platformInjector.get(JA);s.add(i),t.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>e.moduleRef.destroy(),s=e.platformInjector.get(JA);s.add(i),e.moduleRef.onDestroy(()=>{H1(e.allPlatformModules,e.moduleRef),o.unsubscribe(),s.delete(i)})}return whe(r,n,()=>{let i=t.get(g6);return i.runInitializers(),i.donePromise.then(()=>{let s=t.get(Ly,Eb);if(ome(s||Eb),L1(e)){let a=t.get(os);return e.rootComponent!==void 0&&a.bootstrap(e.rootComponent),a}else return Tme(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function Tme(e,t){let n=e.injector.get(os);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new Be(-403,!1);t.push(e)}var W1=null;function _me(e=[],t){return Ti.create({name:t,providers:[{provide:Nb,useValue:"platform"},{provide:JA,useValue:new Set([()=>W1=null])},...e]})}function Ime(e=[]){if(W1)return W1;let t=_me(e);return W1=t,vhe(),Sme(t),t}function Sme(e){let t=e.get(IR,null);is(e,()=>{t?.forEach(n=>n())})}var gl=(()=>{class e{static __NG_ELEMENT_ID__=Dme}return e})();function Dme(e){return Nme(No(),Zt(),(e&16)===16)}function Nme(e,t,n){if(Dy(e)&&!n){let r=al(e.index,t);return new zd(r,r)}else if(e.type&175){let r=t[Us];return new zd(r,t)}return null}var eR=class{constructor(){}supports(t){return l6(t)}create(t){return new tR(t)}},Ame=(e,t)=>t,tR=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||Ame}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){let s=!r||n&&n.currentIndex<TV(r,o,i)?n:r,a=TV(s,o,i),u=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)o++;else{i||(i=[]);let c=a-o,d=u-o;if(c!=d){for(let h=0;h<c;h++){let m=h<i.length?i[h]:i[h]=0,v=m+h;d<=v&&v<c&&(i[h]=m+1)}let f=s.previousIndex;i[f]=d-c}}a!==u&&t(s,a,u)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!l6(t))throw new Be(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,o,i,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],s=this._trackByFn(a,i),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,i,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)),n=n._next}else o=0,rhe(t,a=>{s=this._trackByFn(o,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,o),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,o){let i;return t===null?i=this._itTail:(i=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,i,o)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,o),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,i,o)):t=this._addAfter(new nR(n,r),i,o)),t}_verifyReinsertion(t,n,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?t=this._reinsertAfter(i,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let o=t._prevRemoved,i=t._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let o=n===null?this._itHead:n._next;return t._next=o,t._prev=n,o===null?this._itTail=t:o._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Cb),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Cb),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},nR=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},rR=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Cb=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new rR,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,o=this.map.get(r);return o?o.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function TV(e,t,n){let r=e.previousIndex;if(r===null)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}function _V(){return new nk([new eR])}var nk=(()=>{class e{factories;static \u0275prov=He({token:e,providedIn:"root",factory:_V});constructor(n){this.factories=n}static create(n,r){if(r!=null){let o=r.factories.slice();n=n.concat(o)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||_V()),deps:[[e,new iR,new Db]]}}find(n){let r=this.factories.find(o=>o.supports(n));if(r!=null)return r;throw new Be(901,!1)}}return e})();function S6(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,o=Ime(r),i=[T6({}),{provide:ih,useExisting:wme},...n||[]],s=new bb({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1});return Cme({r3Injector:s.injector,platformInjector:o,rootComponent:t})}catch(t){return Promise.reject(t)}}var V1=new WeakSet,IV="",q1=[];function SV(e){return e.get(QB,Wle)}function D6(){let e=[{provide:QB,useFactory:()=>{let t=!0;{let n=fe(ph);t=!!window._ejsas?.[n]}return t&&cu("NgEventReplay"),t}}];return e.push({provide:nl,useValue:()=>{let t=fe(Ti),n=t.get(os);if(!V1.has(n)){let r=fe(eV);SV(t)&&ime((o,i,s)=>{cde(o,i,s),lde(o,r)})}},multi:!0},{provide:hl,useFactory:()=>{let t=fe(Ti),n=fe(os);return()=>{!SV(t)||V1.has(n)||(V1.add(n),n.onDestroy(()=>V1.delete(n)),n.whenStable().then(()=>{let r=t.get(fde);Rme(r,t);let o=t.get(eV);o.get(IV)?.forEach(dde),o.delete(IV);let i=r.instance;wde(t)?n.onDestroy(()=>i.cleanUp()):i.cleanUp()}))}},multi:!0}),e}var Rme=(e,t)=>{let n=t.get(ph),r=window._ejsas[n],o=e.instance=new kL(new R1(r.c));for(let a of r.et)o.addEvent(a);for(let a of r.etc)o.addEvent(a);let i=OL(n);o.replayEarlyEventInfos(i),ML(n);let s=new k1(a=>{kme(t,a,a.currentTarget)});RL(o,s)};function kme(e,t,n){let r=(n&&n.getAttribute(Ub))??"";/d\d+/.test(r)?Ome(r,e,t,n):t.eventPhase===zN.REPLAY&&nU(t,n)}function Ome(e,t,n,r){q1.push({event:n,currentTarget:r}),_he(t,e,Mme)}function Mme(e){let t=[...q1],n=new Set(e);q1=[];for(let{event:r,currentTarget:o}of t){let i=o.getAttribute(Ub);n.has(i)?nU(r,o):q1.push({event:r,currentTarget:o})}}var DV=!1;function Fme(){DV||(DV=!0,yde(),Yhe(),cme(),Jhe(),lhe(),Mpe(),ype(),yfe())}function Pme(e,t){return e.whenStable()}function N6(){let e=[{provide:M1,useFactory:()=>{let t=!0;return t=!!fe(Xd,{optional:!0})?.get(oU,null),t&&cu("NgHydration"),t}},{provide:nl,useValue:()=>{lpe(!1),fe(M1)&&($me(),Fme())},multi:!0}];return e.push({provide:ZB,useFactory:()=>fe(M1)},{provide:hl,useFactory:()=>{if(fe(M1)){let t=fe(os),n=fe(Ti);return()=>{Pme(t,n).then(()=>{QU(t)})}}return()=>{}},multi:!0}),Kd(e)}function $me(){let e=Pb(),t;for(let n of e.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===mde){t=n;break}if(!t)throw new Be(-507,!1)}function ef(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function ow(e,t){cu("NgSignals");let n=$4(e);return t?.equal&&(n[Qi].equal=t.equal),n}function yl(e){let t=Kt(null);try{return e()}finally{Kt(t)}}var NV=class{[Qi];constructor(t){this[Qi]=t}destroy(){this[Qi].destroy()}};function A6(e){let t=Ku(e);if(!t)return null;let n=new uh(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var $6=null;function sc(){return $6}function L6(e){$6??=e}var pw=class{};var Zo=new ke(""),pk=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>fe(Lme),providedIn:"platform"})}return e})(),V6=new ke(""),Lme=(()=>{class e extends pk{_location;_history;_doc=fe(Zo);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sc().getBaseHref(this._doc)}onPopState(n){let r=sc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=sc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function hk(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function R6(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function rc(e){return e&&e[0]!=="?"?"?"+e:e}var ac=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>fe(mk),providedIn:"root"})}return e})(),B6=new ke(""),mk=(()=>{class e extends ac{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??fe(Zo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return hk(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+rc(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+rc(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+rc(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(bt(pk),bt(B6,8))};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),U6=(()=>{class e extends ac{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=hk(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+rc(i));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+rc(i));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(bt(pk),bt(B6,8))};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})(),mh=(()=>{class e{_subject=new Sr;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Ume(R6(k6(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+rc(r))}normalize(n){return e.stripTrailingSlash(Bme(this._basePath,k6(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+rc(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+rc(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=rc;static joinWithSlash=hk;static stripTrailingSlash=R6;static \u0275fac=function(r){return new(r||e)(bt(ac))};static \u0275prov=He({token:e,factory:()=>Vme(),providedIn:"root"})}return e})();function Vme(){return new mh(bt(ac))}function Bme(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function k6(e){return e.replace(/\/index.html$/,"")}function Ume(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var G6=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}(G6||{});var Yo=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(Yo||{}),Dn=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(Dn||{}),ls=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(ls||{}),ds={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Gme(e){return cs(e)[fr.LocaleId]}function jme(e,t,n){let r=cs(e),o=[r[fr.DayPeriodsFormat],r[fr.DayPeriodsStandalone]],i=zs(o,t);return zs(i,n)}function zme(e,t,n){let r=cs(e),o=[r[fr.DaysFormat],r[fr.DaysStandalone]],i=zs(o,t);return zs(i,n)}function Hme(e,t,n){let r=cs(e),o=[r[fr.MonthsFormat],r[fr.MonthsStandalone]],i=zs(o,t);return zs(i,n)}function Wme(e,t){let r=cs(e)[fr.Eras];return zs(r,t)}function iw(e,t){let n=cs(e);return zs(n[fr.DateFormat],t)}function sw(e,t){let n=cs(e);return zs(n[fr.TimeFormat],t)}function aw(e,t){let r=cs(e)[fr.DateTimeFormat];return zs(r,t)}function oc(e,t){let n=cs(e),r=n[fr.NumberSymbols][t];if(typeof r>"u"){if(t===ds.CurrencyDecimal)return n[fr.NumberSymbols][ds.Decimal];if(t===ds.CurrencyGroup)return n[fr.NumberSymbols][ds.Group]}return r}function qme(e,t){return cs(e)[fr.NumberFormats][t]}function j6(e){if(!e[fr.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[fr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Kme(e){let t=cs(e);return j6(t),(t[fr.ExtraData][2]||[]).map(r=>typeof r=="string"?rk(r):[rk(r[0]),rk(r[1])])}function Xme(e,t,n){let r=cs(e);j6(r);let o=[r[fr.ExtraData][0],r[fr.ExtraData][1]],i=zs(o,t)||[];return zs(i,n)||[]}function zs(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function rk(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var Yme=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,uw={},Zme=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ic=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}(ic||{}),on=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}(on||{}),rn=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}(rn||{});function Qme(e,t,n,r){let o=age(e);t=nc(n,t)||t;let s=[],a;for(;t;)if(a=Zme.exec(t),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;t=d}else{s.push(t);break}let u=o.getTimezoneOffset();r&&(u=H6(r,u),o=sge(o,r,!0));let c="";return s.forEach(d=>{let f=oge(d);c+=f?f(o,n,u):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function hw(e,t,n){let r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function nc(e,t){let n=Gme(e);if(uw[n]??={},uw[n][t])return uw[n][t];let r="";switch(t){case"shortDate":r=iw(e,ls.Short);break;case"mediumDate":r=iw(e,ls.Medium);break;case"longDate":r=iw(e,ls.Long);break;case"fullDate":r=iw(e,ls.Full);break;case"shortTime":r=sw(e,ls.Short);break;case"mediumTime":r=sw(e,ls.Medium);break;case"longTime":r=sw(e,ls.Long);break;case"fullTime":r=sw(e,ls.Full);break;case"short":let o=nc(e,"shortTime"),i=nc(e,"shortDate");r=cw(aw(e,ls.Short),[o,i]);break;case"medium":let s=nc(e,"mediumTime"),a=nc(e,"mediumDate");r=cw(aw(e,ls.Medium),[s,a]);break;case"long":let u=nc(e,"longTime"),c=nc(e,"longDate");r=cw(aw(e,ls.Long),[u,c]);break;case"full":let d=nc(e,"fullTime"),f=nc(e,"fullDate");r=cw(aw(e,ls.Full),[d,f]);break}return r&&(uw[n][t]=r),r}function cw(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return t!=null&&r in t?t[r]:n})),e}function Ia(e,t,n="-",r,o){let i="";(e<0||o&&e<=0)&&(o?e=-e+1:(e=-e,i=n));let s=String(e);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),i+s}function Jme(e,t){return Ia(e,3).substring(0,t)}function Ar(e,t,n=0,r=!1,o=!1){return function(i,s){let a=ege(e,i);if((n>0||a>-n)&&(a+=n),e===on.Hours)a===0&&n===-12&&(a=12);else if(e===on.FractionalSeconds)return Jme(a,t);let u=oc(s,ds.MinusSign);return Ia(a,t,u,r,o)}}function ege(e,t){switch(e){case on.FullYear:return t.getFullYear();case on.Month:return t.getMonth();case on.Date:return t.getDate();case on.Hours:return t.getHours();case on.Minutes:return t.getMinutes();case on.Seconds:return t.getSeconds();case on.FractionalSeconds:return t.getMilliseconds();case on.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}function Mn(e,t,n=Yo.Format,r=!1){return function(o,i){return tge(o,i,e,t,n,r)}}function tge(e,t,n,r,o,i){switch(n){case rn.Months:return Hme(t,o,r)[e.getMonth()];case rn.Days:return zme(t,o,r)[e.getDay()];case rn.DayPeriods:let s=e.getHours(),a=e.getMinutes();if(i){let c=Kme(t),d=Xme(t,o,r),f=c.findIndex(h=>{if(Array.isArray(h)){let[m,v]=h,x=s>=m.hours&&a>=m.minutes,b=s<v.hours||s===v.hours&&a<v.minutes;if(m.hours<v.hours){if(x&&b)return!0}else if(x||b)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return jme(t,o,r)[s<12?0:1];case rn.Eras:return Wme(t,r)[e.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function lw(e){return function(t,n,r){let o=-1*r,i=oc(n,ds.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(e){case ic.Short:return(o>=0?"+":"")+Ia(s,2,i)+Ia(Math.abs(o%60),2,i);case ic.ShortGMT:return"GMT"+(o>=0?"+":"")+Ia(s,1,i);case ic.Long:return"GMT"+(o>=0?"+":"")+Ia(s,2,i)+":"+Ia(Math.abs(o%60),2,i);case ic.Extended:return r===0?"Z":(o>=0?"+":"")+Ia(s,2,i)+":"+Ia(Math.abs(o%60),2,i);default:throw new Error(`Unknown zone width "${e}"`)}}}var nge=0,fw=4;function rge(e){let t=hw(e,nge,1).getDay();return hw(e,0,1+(t<=fw?fw:fw+7)-t)}function z6(e){let t=e.getDay(),n=t===0?-3:fw-t;return hw(e.getFullYear(),e.getMonth(),e.getDate()+n)}function ok(e,t=!1){return function(n,r){let o;if(t){let i=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();o=1+Math.floor((s+i)/7)}else{let i=z6(n),s=rge(i.getFullYear()),a=i.getTime()-s.getTime();o=1+Math.round(a/6048e5)}return Ia(o,e,oc(r,ds.MinusSign))}}function dw(e,t=!1){return function(n,r){let i=z6(n).getFullYear();return Ia(i,e,oc(r,ds.MinusSign),t)}}var ik={};function oge(e){if(ik[e])return ik[e];let t;switch(e){case"G":case"GG":case"GGG":t=Mn(rn.Eras,Dn.Abbreviated);break;case"GGGG":t=Mn(rn.Eras,Dn.Wide);break;case"GGGGG":t=Mn(rn.Eras,Dn.Narrow);break;case"y":t=Ar(on.FullYear,1,0,!1,!0);break;case"yy":t=Ar(on.FullYear,2,0,!0,!0);break;case"yyy":t=Ar(on.FullYear,3,0,!1,!0);break;case"yyyy":t=Ar(on.FullYear,4,0,!1,!0);break;case"Y":t=dw(1);break;case"YY":t=dw(2,!0);break;case"YYY":t=dw(3);break;case"YYYY":t=dw(4);break;case"M":case"L":t=Ar(on.Month,1,1);break;case"MM":case"LL":t=Ar(on.Month,2,1);break;case"MMM":t=Mn(rn.Months,Dn.Abbreviated);break;case"MMMM":t=Mn(rn.Months,Dn.Wide);break;case"MMMMM":t=Mn(rn.Months,Dn.Narrow);break;case"LLL":t=Mn(rn.Months,Dn.Abbreviated,Yo.Standalone);break;case"LLLL":t=Mn(rn.Months,Dn.Wide,Yo.Standalone);break;case"LLLLL":t=Mn(rn.Months,Dn.Narrow,Yo.Standalone);break;case"w":t=ok(1);break;case"ww":t=ok(2);break;case"W":t=ok(1,!0);break;case"d":t=Ar(on.Date,1);break;case"dd":t=Ar(on.Date,2);break;case"c":case"cc":t=Ar(on.Day,1);break;case"ccc":t=Mn(rn.Days,Dn.Abbreviated,Yo.Standalone);break;case"cccc":t=Mn(rn.Days,Dn.Wide,Yo.Standalone);break;case"ccccc":t=Mn(rn.Days,Dn.Narrow,Yo.Standalone);break;case"cccccc":t=Mn(rn.Days,Dn.Short,Yo.Standalone);break;case"E":case"EE":case"EEE":t=Mn(rn.Days,Dn.Abbreviated);break;case"EEEE":t=Mn(rn.Days,Dn.Wide);break;case"EEEEE":t=Mn(rn.Days,Dn.Narrow);break;case"EEEEEE":t=Mn(rn.Days,Dn.Short);break;case"a":case"aa":case"aaa":t=Mn(rn.DayPeriods,Dn.Abbreviated);break;case"aaaa":t=Mn(rn.DayPeriods,Dn.Wide);break;case"aaaaa":t=Mn(rn.DayPeriods,Dn.Narrow);break;case"b":case"bb":case"bbb":t=Mn(rn.DayPeriods,Dn.Abbreviated,Yo.Standalone,!0);break;case"bbbb":t=Mn(rn.DayPeriods,Dn.Wide,Yo.Standalone,!0);break;case"bbbbb":t=Mn(rn.DayPeriods,Dn.Narrow,Yo.Standalone,!0);break;case"B":case"BB":case"BBB":t=Mn(rn.DayPeriods,Dn.Abbreviated,Yo.Format,!0);break;case"BBBB":t=Mn(rn.DayPeriods,Dn.Wide,Yo.Format,!0);break;case"BBBBB":t=Mn(rn.DayPeriods,Dn.Narrow,Yo.Format,!0);break;case"h":t=Ar(on.Hours,1,-12);break;case"hh":t=Ar(on.Hours,2,-12);break;case"H":t=Ar(on.Hours,1);break;case"HH":t=Ar(on.Hours,2);break;case"m":t=Ar(on.Minutes,1);break;case"mm":t=Ar(on.Minutes,2);break;case"s":t=Ar(on.Seconds,1);break;case"ss":t=Ar(on.Seconds,2);break;case"S":t=Ar(on.FractionalSeconds,1);break;case"SS":t=Ar(on.FractionalSeconds,2);break;case"SSS":t=Ar(on.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=lw(ic.Short);break;case"ZZZZZ":t=lw(ic.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=lw(ic.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=lw(ic.Long);break;default:return null}return ik[e]=t,t}function H6(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function ige(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function sge(e,t,n){let r=n?-1:1,o=e.getTimezoneOffset(),i=H6(t,o);return ige(e,r*(i-o))}function age(e){if(O6(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[o,i=1,s=1]=e.split("-").map(a=>+a);return hw(o,i-1,s)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(Yme))return uge(r)}let t=new Date(e);if(!O6(t))throw new Error(`Unable to convert "${e}" into a date`);return t}function uge(e){let t=new Date(0),n=0,r=0,o=e[8]?t.setUTCFullYear:t.setFullYear,i=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),o.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let s=Number(e[4]||0)-n,a=Number(e[5]||0)-r,u=Number(e[6]||0),c=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return i.call(t,s,a,u,c),t}function O6(e){return e instanceof Date&&!isNaN(e.valueOf())}var cge=/^(\d+)?\.((\d+)(-(\d+))?)?$/,M6=22,mw=".",Vy="0",lge=";",dge=",",sk="#";function fge(e,t,n,r,o,i,s=!1){let a="",u=!1;if(!isFinite(e))a=oc(n,ds.Infinity);else{let c=gge(e);s&&(c=mge(c));let d=t.minInt,f=t.minFrac,h=t.maxFrac;if(i){let S=i.match(cge);if(S===null)throw new Error(`${i} is not a valid digit info`);let O=S[1],F=S[3],B=S[5];O!=null&&(d=ak(O)),F!=null&&(f=ak(F)),B!=null?h=ak(B):F!=null&&f>h&&(h=f)}yge(c,f,h);let m=c.digits,v=c.integerLen,x=c.exponent,b=[];for(u=m.every(S=>!S);v<d;v++)m.unshift(0);for(;v<0;v++)m.unshift(0);v>0?b=m.splice(v,m.length):(b=m,m=[0]);let C=[];for(m.length>=t.lgSize&&C.unshift(m.splice(-t.lgSize,m.length).join(""));m.length>t.gSize;)C.unshift(m.splice(-t.gSize,m.length).join(""));m.length&&C.unshift(m.join("")),a=C.join(oc(n,r)),b.length&&(a+=oc(n,o)+b.join("")),x&&(a+=oc(n,ds.Exponential)+"+"+x)}return e<0&&!u?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function pge(e,t,n){let r=qme(t,G6.Decimal),o=hge(r,oc(t,ds.MinusSign));return fge(e,o,t,ds.Group,ds.Decimal,n)}function hge(e,t="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(lge),o=r[0],i=r[1],s=o.indexOf(mw)!==-1?o.split(mw):[o.substring(0,o.lastIndexOf(Vy)+1),o.substring(o.lastIndexOf(Vy)+1)],a=s[0],u=s[1]||"";n.posPre=a.substring(0,a.indexOf(sk));for(let d=0;d<u.length;d++){let f=u.charAt(d);f===Vy?n.minFrac=n.maxFrac=d+1:f===sk?n.maxFrac=d+1:n.posSuf+=f}let c=a.split(dge);if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,i){let d=o.length-n.posPre.length-n.posSuf.length,f=i.indexOf(sk);n.negPre=i.substring(0,f).replace(/'/g,""),n.negSuf=i.slice(f+d).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}function mge(e){if(e.digits[0]===0)return e;let t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(t===0?e.digits.push(0,0):t===1&&e.digits.push(0),e.integerLen+=2),e}function gge(e){let t=Math.abs(e)+"",n=0,r,o,i,s,a;for((o=t.indexOf(mw))>-1&&(t=t.replace(mw,"")),(i=t.search(/e/i))>0?(o<0&&(o=i),o+=+t.slice(i+1),t=t.substring(0,i)):o<0&&(o=t.length),i=0;t.charAt(i)===Vy;i++);if(i===(a=t.length))r=[0],o=1;else{for(a--;t.charAt(a)===Vy;)a--;for(o-=i,r=[],s=0;i<=a;i++,s++)r[s]=Number(t.charAt(i))}return o>M6&&(r=r.splice(0,M6-1),n=o-1,o=1),{digits:r,exponent:n,integerLen:o}}function yge(e,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let r=e.digits,o=r.length-e.integerLen,i=Math.min(Math.max(t,o),n),s=i+e.integerLen,a=r[s];if(s>0){r.splice(Math.max(e.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{o=Math.max(0,o),e.integerLen=1,r.length=Math.max(1,s=i+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[s-1]++;for(;o<Math.max(0,i);o++)r.push(0);let u=i!==0,c=t+e.integerLen,d=r.reduceRight(function(f,h,m,v){return h=h+f,v[m]=h<10?h:h-10,u&&(v[m]===0&&m>=c?v.pop():u=!1),h>=10?1:0},0);d&&(r.unshift(d),e.integerLen++)}function ak(e){let t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}function gk(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}var uk=class{$implicit;ngForOf;index;count;constructor(t,n,r,o){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gh=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((o,i,s)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new uk(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(i===null?void 0:i);else if(i!==null){let a=r.get(i);r.move(a,s),F6(a,o)}});for(let o=0,i=r.length;o<i;o++){let a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{let i=r.get(o.currentIndex);F6(i,o)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(lt(fl),lt(Hd),lt(nk))};static \u0275dir=as({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function F6(e,t){e.context.$implicit=t.item}var du=(()=>{class e{_viewContainer;_context=new ck;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){P6("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){P6("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(lt(fl),lt(Hd))};static \u0275dir=as({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),ck=class{$implicit=null;ngIf=null};function P6(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Xo(t)}'.`)}function W6(e,t){return new Be(2100,!1)}var vge="mediumDate",xge=new ke(""),bge=new ke(""),q6=(()=>{class e{locale;defaultTimezone;defaultOptions;constructor(n,r,o){this.locale=n,this.defaultTimezone=r,this.defaultOptions=o}transform(n,r,o,i){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??vge,a=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Qme(n,s,i||this.locale,a)}catch(s){throw W6(e,s.message)}}static \u0275fac=function(r){return new(r||e)(lt(Ly,16),lt(xge,24),lt(bge,24))};static \u0275pipe=XR({name:"date",type:e,pure:!0})}return e})();var K6=(()=>{class e{_locale;constructor(n){this._locale=n}transform(n,r,o){if(!wge(n))return null;o||=this._locale;try{let i=Ege(n);return pge(i,o,r)}catch(i){throw W6(e,i.message)}}static \u0275fac=function(r){return new(r||e)(lt(Ly,16))};static \u0275pipe=XR({name:"number",type:e,pure:!0})}return e})();function wge(e){return!(e==null||e===""||e!==e)}function Ege(e){if(typeof e=="string"&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if(typeof e!="number")throw new Error(`${e} is not a number`);return e}var Qo=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=pl({type:e});static \u0275inj=sl({})}return e})(),yk="browser",Cge="server";function vk(e){return e===yk}function By(e){return e===Cge}var X6=(()=>{class e{static \u0275prov=He({token:e,providedIn:"root",factory:()=>vk(fe(Gs))?new lk(fe(Zo),window):new dk})}return e})(),lk=class{document;window;offset=()=>[0,0];constructor(t,n){this.document=t,this.window=n}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let n=Tge(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}};function Tge(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(t)||i.querySelector(`[name="${t}"]`);if(s)return s}o=r.nextNode()}}return null}var dk=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},gw=class{};var vw=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let o=n.slice(0,r),i=n.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let o=(t.op==="a"?this.headers.get(n):void 0)||[];o.push(...r),this.headers.set(n,o);break;case"d":let i=t.value;if(!i)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),o=t.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(t,o)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var r5=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(r5||{}),xk=class{headers;status;statusText;url;ok;type;constructor(t,n=200,r="OK"){this.headers=t.headers||new vw,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var xw=class e extends xk{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=r5.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var _ge=new ke("");var Ige=new ke(""),Y6="b",Z6="h",Q6="s",J6="st",e5="u",t5="rt",yw=new ke(""),Sge=["GET","HEAD"];function Dge(e,t){let m=fe(yw),{isCacheActive:n}=m,r=A4(m,["isCacheActive"]),{transferCache:o,method:i}=e;if(!n||o===!1||i==="POST"&&!r.includePostRequests&&!o||i!=="POST"&&!Sge.includes(i)||!r.includeRequestsWithAuthHeaders&&Nge(e)||r.filter?.(e)===!1)return t(e);let s=fe(Xd),a=fe(Ige,{optional:!0}),u=By(fe(Gs));if(a&&!u)throw new Be(2803,!1);let c=u&&a?Oge(e.url,a):e.url,d=Rge(e,c),f=s.get(d,null),h=r.includeHeaders;if(typeof o=="object"&&o.includeHeaders&&(h=o.includeHeaders),f){let{[Y6]:v,[t5]:x,[Z6]:b,[Q6]:C,[J6]:S,[e5]:O}=f,F=v;switch(x){case"arraybuffer":F=new TextEncoder().encode(v).buffer;break;case"blob":F=new Blob([v]);break}let B=new vw(b);return st(new xw({body:F,headers:B,status:C,statusText:S,url:O}))}return t(e).pipe(Jn(v=>{v instanceof xw&&u&&s.set(d,{[Y6]:v.body,[Z6]:Age(v.headers,h),[Q6]:v.status,[J6]:v.statusText,[e5]:c,[t5]:e.responseType})}))}function Nge(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function Age(e,t){if(!t)return{};let n={};for(let r of t){let o=e.getAll(r);o!==null&&(n[r]=o)}return n}function n5(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function Rge(e,t){let{params:n,method:r,responseType:o}=e,i=n5(n),s=e.serializeBody();s instanceof URLSearchParams?s=n5(s):typeof s!="string"&&(s="");let a=[r,o,t,s,i].join("|"),u=kge(a);return u}function kge(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function o5(e){return[{provide:yw,useFactory:()=>(cu("NgHttpTransferCache"),xe({isCacheActive:!0},e))},{provide:_ge,useValue:Dge,multi:!0,deps:[Xd,yw]},{provide:hl,multi:!0,useFactory:()=>{let t=fe(os),n=fe(yw);return()=>{t.whenStable().then(()=>{n.isCacheActive=!1})}}}]}function Oge(e,t){let n=new URL(e,"resolve://").origin,r=t[n];return r?e.replace(n,r):e}var wk=class extends pw{supportsDOMEvents=!0},Ek=class e extends wk{static makeCurrent(){L6(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=Mge();return n==null?null:Fge(n)}resetBaseElement(){Uy=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return gk(document.cookie,t)}},Uy=null;function Mge(){return Uy=Uy||document.querySelector("base"),Uy?Uy.getAttribute("href"):null}function Fge(e){return new URL(e,document.baseURI).pathname}var Pge=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})(),Ck=new ke(""),l5=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new Be(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(bt(Ck),bt(er))};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})(),bw=class{_doc;constructor(t){this._doc=t}manager},Tk="ng-app-id";function i5(e){for(let t of e)t.remove()}function s5(e,t){let n=t.createElement("style");return n.textContent=e,n}function $ge(e,t,n){let r=e.head?.querySelectorAll(`style[${Tk}="${t}"]`);if(r)for(let o of r)o.textContent&&(o.removeAttribute(Tk),n.set(o.textContent,{usage:0,elements:[o]}))}function _k(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var d5=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,this.isServer=By(i),$ge(n,r,this.inline),this.hosts.add(n.head)}addStyles(n,r){for(let o of n)this.addUsage(o,this.inline,s5);r?.forEach(o=>this.addUsage(o,this.external,_k))}removeStyles(n,r){for(let o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,r){let o=r.get(n);o&&(o.usage--,o.usage<=0&&(i5(o.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])i5(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(n,s5(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(n,_k(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Tk,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(bt(Zo),bt(ph),bt(SR,8),bt(Gs))};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})(),bk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Sk=/%COMP%/g,f5="%COMP%",Lge=`_nghost-${f5}`,Vge=`_ngcontent-${f5}`,Bge=!0,Uge=new ke("",{providedIn:"root",factory:()=>Bge});function Gge(e){return Vge.replace(Sk,e)}function jge(e){return Lge.replace(Sk,e)}function p5(e,t){return t.map(n=>n.replace(Sk,e))}var a5=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,o,i,s,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=c,this.platformIsServer=By(a),this.defaultRenderer=new Gy(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===au.ShadowDom&&(r=vt(xe({},r),{encapsulation:au.Emulated}));let o=this.getOrCreateRenderer(n,r);return o instanceof ww?o.applyToHost(n):o instanceof jy&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case au.Emulated:i=new ww(u,c,r,this.appId,d,s,a,f);break;case au.ShadowDom:return new Ik(u,c,n,r,s,a,this.nonce,f);default:i=new jy(u,c,r,d,s,a,f);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(r){return new(r||e)(bt(l5),bt(d5),bt(ph),bt(Uge),bt(Zo),bt(Gs),bt(er),bt(SR))};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})(),Gy=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(bk[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(u5(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(u5(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new Be(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;let i=bk[o];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let o=bk[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(ec.DashCase|ec.Important)?t.style.setProperty(n,r,o&ec.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&ec.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=sc().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function u5(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Ik=class extends Gy{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,o,i,s,a,u){super(t,i,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=p5(o.id,o.styles);for(let f of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=o.getExternalStyles?.();if(d)for(let f of d){let h=_k(f,i);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},jy=class extends Gy{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,o,i,s,a,u){super(t,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=u?p5(u,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ww=class extends jy{contentAttr;hostAttr;constructor(t,n,r,o,i,s,a,u){let c=o+"-"+r.id;super(t,n,r,i,s,a,u,c),this.contentAttr=Gge(c),this.hostAttr=jge(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},zge=(()=>{class e extends bw{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}static \u0275fac=function(r){return new(r||e)(bt(Zo))};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})(),c5=["alt","control","meta","shift"],Hge={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wge={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},qge=(()=>{class e extends bw{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,o){let i=e.parseEventName(r),s=e.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sc().onAndCancel(n,i.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),c5.forEach(c=>{let d=r.indexOf(c);d>-1&&(r.splice(d,1),s+=c+".")}),s+=i,r.length!=0||i.length===0)return null;let u={};return u.domEventName=o,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let o=Hge[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),c5.forEach(s=>{if(s!==o){let a=Wge[s];a(n)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{e.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(bt(Zo))};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})();function h5(e,t){return S6(xe({rootComponent:e},Kge(t)))}function Kge(e){return{appProviders:[...Jge,...e?.providers??[]],platformProviders:Qge}}function Xge(){Ek.makeCurrent()}function Yge(){return new Ju}function Zge(){return HB(document),document}var Qge=[{provide:Gs,useValue:yk},{provide:IR,useValue:Xge,multi:!0},{provide:Zo,useFactory:Zge,deps:[]}];var Jge=[{provide:Nb,useValue:"root"},{provide:Ju,useFactory:Yge,deps:[]},{provide:Ck,useClass:zge,multi:!0,deps:[Zo,er,Gs]},{provide:Ck,useClass:qge,multi:!0,deps:[Zo]},a5,d5,l5,{provide:ah,useExisting:a5},{provide:gw,useClass:Pge,deps:[]},[]];var m5=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(bt(Zo))};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ew=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e[e.IncrementalHydration=4]="IncrementalHydration",e}(Ew||{});function eye(e,t=[],n={}){return{\u0275kind:e,\u0275providers:t}}function g5(){return eye(Ew.EventReplay,D6())}function y5(...e){let t=[],n=new Set,r=n.has(Ew.HttpTransferCacheOptions);for(let{\u0275providers:o,\u0275kind:i}of e)n.add(i),o.length&&t.push(o);return Kd([[],N6(),n.has(Ew.NoHttpTransferCache)||r?[]:o5({}),t])}var It="primary",ov=Symbol("RouteTitle"),kk=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Eh(e){return new kk(e)}function nye(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=e[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:o}}function rye(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!fu(e[n],t[n]))return!1;return!0}function fu(e,t){let n=e?Ok(e):void 0,r=t?Ok(t):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!D5(e[o],t[o]))return!1;return!0}function Ok(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function D5(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((o,i)=>r[i]===o)}else return e===t}function N5(e){return e.length>0?e[e.length-1]:null}function wl(e){return IN(e)?e:Yd(e)?Vn(Promise.resolve(e)):st(e)}var oye={exact:R5,subset:k5},A5={exact:iye,subset:sye,ignored:()=>!0};function v5(e,t,n){return oye[n.paths](e.root,t.root,n.matrixParams)&&A5[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function iye(e,t){return fu(e,t)}function R5(e,t,n){if(!nf(e.segments,t.segments)||!_w(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!R5(e.children[r],t.children[r],n))return!1;return!0}function sye(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>D5(e[n],t[n]))}function k5(e,t,n){return O5(e,t,t.segments,n)}function O5(e,t,n,r){if(e.segments.length>n.length){let o=e.segments.slice(0,n.length);return!(!nf(o,n)||t.hasChildren()||!_w(o,n,r))}else if(e.segments.length===n.length){if(!nf(e.segments,n)||!_w(e.segments,n,r))return!1;for(let o in t.children)if(!e.children[o]||!k5(e.children[o],t.children[o],r))return!1;return!0}else{let o=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!nf(e.segments,o)||!_w(e.segments,o,r)||!e.children[It]?!1:O5(e.children[It],t,i,r)}}function _w(e,t,n){return t.every((r,o)=>A5[n](e[o].parameters,r.parameters))}var cc=class{root;queryParams;fragment;_queryParamMap;constructor(t=new cn([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Eh(this.queryParams),this._queryParamMap}toString(){return cye.serialize(this)}},cn=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Iw(this)}},tf=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Eh(this.parameters),this._parameterMap}toString(){return F5(this)}};function aye(e,t){return nf(e,t)&&e.every((n,r)=>fu(n.parameters,t[r].parameters))}function nf(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function uye(e,t){let n=[];return Object.entries(e.children).forEach(([r,o])=>{r===It&&(n=n.concat(t(o,r)))}),Object.entries(e.children).forEach(([r,o])=>{r!==It&&(n=n.concat(t(o,r)))}),n}var iv=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>new Ch,providedIn:"root"})}return e})(),Ch=class{parse(t){let n=new Fk(t);return new cc(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${zy(t.root,!0)}`,r=fye(t.queryParams),o=typeof t.fragment=="string"?`#${lye(t.fragment)}`:"";return`${n}${r}${o}`}},cye=new Ch;function Iw(e){return e.segments.map(t=>F5(t)).join("/")}function zy(e,t){if(!e.hasChildren())return Iw(e);if(t){let n=e.children[It]?zy(e.children[It],!1):"",r=[];return Object.entries(e.children).forEach(([o,i])=>{o!==It&&r.push(`${o}:${zy(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=uye(e,(r,o)=>o===It?[zy(e.children[It],!1)]:[`${o}:${zy(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[It]!=null?`${Iw(e)}/${n[0]}`:`${Iw(e)}/(${n.join("//")})`}}function M5(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cw(e){return M5(e).replace(/%3B/gi,";")}function lye(e){return encodeURI(e)}function Mk(e){return M5(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sw(e){return decodeURIComponent(e)}function x5(e){return Sw(e.replace(/\+/g,"%20"))}function F5(e){return`${Mk(e.path)}${dye(e.parameters)}`}function dye(e){return Object.entries(e).map(([t,n])=>`;${Mk(t)}=${Mk(n)}`).join("")}function fye(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(o=>`${Cw(n)}=${Cw(o)}`).join("&"):`${Cw(n)}=${Cw(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var pye=/^[^\/()?;#]+/;function Dk(e){let t=e.match(pye);return t?t[0]:""}var hye=/^[^\/()?;=#]+/;function mye(e){let t=e.match(hye);return t?t[0]:""}var gye=/^[^=?&#]+/;function yye(e){let t=e.match(gye);return t?t[0]:""}var vye=/^[^&#]+/;function xye(e){let t=e.match(vye);return t?t[0]:""}var Fk=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new cn([],{}):new cn([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[It]=new cn(t,n)),r}parseSegment(){let t=Dk(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Be(4009,!1);return this.capture(t),new tf(Sw(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=mye(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Dk(this.remaining);o&&(r=o,this.capture(r))}t[Sw(n)]=Sw(r)}parseQueryParam(t){let n=yye(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=xye(this.remaining);s&&(r=s,this.capture(r))}let o=x5(n),i=x5(r);if(t.hasOwnProperty(o)){let s=t[o];Array.isArray(s)||(s=[s],t[o]=s),s.push(i)}else t[o]=i}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Dk(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new Be(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=It);let s=this.parseChildren();n[i]=Object.keys(s).length===1?s[It]:new cn([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Be(4011,!1)}};function P5(e){return e.segments.length>0?new cn([],{[It]:e}):e}function $5(e){let t={};for(let[r,o]of Object.entries(e.children)){let i=$5(o);if(r===It&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))t[s]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}let n=new cn(e.segments,t);return bye(n)}function bye(e){if(e.numberOfChildren===1&&e.children[It]){let t=e.children[It];return new cn(e.segments.concat(t.segments),t.children)}return e}function rf(e){return e instanceof cc}function wye(e,t,n=null,r=null){let o=L5(e);return V5(o,t,n,r)}function L5(e){let t;function n(i){let s={};for(let u of i.children){let c=n(u);s[u.outlet]=c}let a=new cn(i.url,s);return i===e&&(t=a),a}let r=n(e.root),o=P5(r);return t??o}function V5(e,t,n,r){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return Nk(o,o,o,n,r);let i=Eye(t);if(i.toRoot())return Nk(o,o,new cn([],{}),n,r);let s=Cye(i,o,e),a=s.processChildren?qy(s.segmentGroup,s.index,i.commands):U5(s.segmentGroup,s.index,i.commands);return Nk(o,s.segmentGroup,a,n,r)}function Dw(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Yy(e){return typeof e=="object"&&e!=null&&e.outlets}function Nk(e,t,n,r,o){let i={};r&&Object.entries(r).forEach(([u,c])=>{i[u]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let s;e===t?s=n:s=B5(e,t,n);let a=P5($5(s));return new cc(a,i,o)}function B5(e,t,n){let r={};return Object.entries(e.children).forEach(([o,i])=>{i===t?r[o]=n:r[o]=B5(i,t,n)}),new cn(e.segments,r)}var Nw=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Dw(r[0]))throw new Be(4003,!1);let o=r.find(Yy);if(o&&o!==N5(r))throw new Be(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Eye(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Nw(!0,0,e);let t=0,n=!1,r=e.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?t++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new Nw(n,t,r)}var xh=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function Cye(e,t,n){if(e.isAbsolute)return new xh(t,!0,0);if(!n)return new xh(t,!1,NaN);if(n.parent===null)return new xh(n,!0,0);let r=Dw(e.commands[0])?0:1,o=n.segments.length-1+r;return Tye(n,o,e.numberOfDoubleDots)}function Tye(e,t,n){let r=e,o=t,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new Be(4005,!1);o=r.segments.length}return new xh(r,!1,o-i)}function _ye(e){return Yy(e[0])?e[0].outlets:{[It]:e}}function U5(e,t,n){if(e??=new cn([],{}),e.segments.length===0&&e.hasChildren())return qy(e,t,n);let r=Iye(e,t,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let i=new cn(e.segments.slice(0,r.pathIndex),{});return i.children[It]=new cn(e.segments.slice(r.pathIndex),e.children),qy(i,0,o)}else return r.match&&o.length===0?new cn(e.segments,{}):r.match&&!e.hasChildren()?Pk(e,t,n):r.match?qy(e,0,o):Pk(e,t,n)}function qy(e,t,n){if(n.length===0)return new cn(e.segments,{});{let r=_ye(n),o={};if(Object.keys(r).some(i=>i!==It)&&e.children[It]&&e.numberOfChildren===1&&e.children[It].segments.length===0){let i=qy(e.children[It],t,n);return new cn(e.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=U5(e.children[i],t,s))}),Object.entries(e.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new cn(e.segments,o)}}function Iye(e,t,n){let r=0,o=t,i={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(r>=n.length)return i;let s=e.segments[o],a=n[r];if(Yy(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(o>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!w5(u,c,s))return i;r+=2}else{if(!w5(u,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function Pk(e,t,n){let r=e.segments.slice(0,t),o=0;for(;o<n.length;){let i=n[o];if(Yy(i)){let u=Sye(i.outlets);return new cn(r,u)}if(o===0&&Dw(n[0])){let u=e.segments[t];r.push(new tf(u.path,b5(n[0]))),o++;continue}let s=Yy(i)?i.outlets[It]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&Dw(a)?(r.push(new tf(s,b5(a))),o+=2):(r.push(new tf(s,{})),o++)}return new cn(r,{})}function Sye(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Pk(new cn([],{}),0,r))}),t}function b5(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function w5(e,t,n){return e==n.path&&fu(t,n.parameters)}var Ky="imperative",Qr=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Qr||{}),Hs=class{id;url;constructor(t,n){this.id=t,this.url=n}},Th=class extends Hs{type=Qr.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",o=null){super(t,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},hs=class extends Hs{urlAfterRedirects;type=Qr.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ps=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(ps||{}),Aw=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Aw||{}),uc=class extends Hs{reason;code;type=Qr.NavigationCancel;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},xl=class extends Hs{reason;code;type=Qr.NavigationSkipped;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}},Zy=class extends Hs{error;target;type=Qr.NavigationError;constructor(t,n,r,o){super(t,n),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Rw=class extends Hs{urlAfterRedirects;state;type=Qr.RoutesRecognized;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$k=class extends Hs{urlAfterRedirects;state;type=Qr.GuardsCheckStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lk=class extends Hs{urlAfterRedirects;state;shouldActivate;type=Qr.GuardsCheckEnd;constructor(t,n,r,o,i){super(t,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vk=class extends Hs{urlAfterRedirects;state;type=Qr.ResolveStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bk=class extends Hs{urlAfterRedirects;state;type=Qr.ResolveEnd;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uk=class{route;type=Qr.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Gk=class{route;type=Qr.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jk=class{snapshot;type=Qr.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zk=class{snapshot;type=Qr.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hk=class{snapshot;type=Qr.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wk=class{snapshot;type=Qr.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kw=class{routerEvent;position;anchor;type=Qr.Scroll;constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Qy=class{},_h=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function Dye(e,t){return e.providers&&!e._injector&&(e._injector=My(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Sa(e){return e.outlet||It}function Nye(e,t){let n=e.filter(r=>Sa(r)===t);return n.push(...e.filter(r=>Sa(r)!==t)),n}function sv(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var qk=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return sv(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new av(this.rootInjector)}},av=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new qk(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(bt(Ci))};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ow=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Kk(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Kk(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Xk(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return Xk(t,this._root).map(n=>n.value)}};function Kk(e,t){if(e===t.value)return t;for(let n of t.children){let r=Kk(e,n);if(r)return r}return null}function Xk(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Xk(e,n);if(r.length)return r.unshift(t),r}return[]}var fs=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function vh(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Mw=class extends Ow{snapshot;constructor(t,n){super(t),this.snapshot=n,oO(this,t)}toString(){return this.snapshot.toString()}};function G5(e){let t=Aye(e),n=new Br([new tf("",{})]),r=new Br({}),o=new Br({}),i=new Br({}),s=new Br(""),a=new bl(n,r,i,s,o,It,e,t.root);return a.snapshot=t.root,new Mw(new fs(a,[]),t)}function Aye(e){let t={},n={},r={},o="",i=new bh([],t,r,o,n,It,e,null,{});return new Pw("",new fs(i,[]))}var bl=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,o,i,s,a,u){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(xt(c=>c[ov]))??st(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(xt(t=>Eh(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(xt(t=>Eh(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Fw(e,t,n="emptyOnly"){let r,{routeConfig:o}=e;return t!==null&&(n==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:xe(xe({},t.params),e.params),data:xe(xe({},t.data),e.data),resolve:xe(xe(xe(xe({},e.data),t.data),o?.data),e._resolvedData)}:r={params:xe({},e.params),data:xe({},e.data),resolve:xe(xe({},e.data),e._resolvedData??{})},o&&z5(o)&&(r.resolve[ov]=o.title),r}var bh=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ov]}constructor(t,n,r,o,i,s,a,u,c){this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Eh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Eh(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Pw=class extends Ow{url;constructor(t,n){super(n),this.url=t,oO(this,n)}toString(){return j5(this._root)}};function oO(e,t){t.value._routerState=e,t.children.forEach(n=>oO(e,n))}function j5(e){let t=e.children.length>0?` { ${e.children.map(j5).join(", ")} } `:"";return`${e.value}${t}`}function Ak(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,fu(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),fu(t.params,n.params)||e.paramsSubject.next(n.params),rye(t.url,n.url)||e.urlSubject.next(n.url),fu(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Yk(e,t){let n=fu(e.params,t.params)&&aye(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Yk(e.parent,t.parent))}function z5(e){return typeof e.title=="string"||e.title===null}var Rye=new ke(""),iO=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=It;activateEvents=new dr;deactivateEvents=new dr;attachEvents=new dr;detachEvents=new dr;routerOutletData=$B(void 0);parentContexts=fe(av);location=fe(fl);changeDetector=fe(gl);inputBinder=fe(Uw,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Be(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Be(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Be(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Be(4013,!1);this._activatedRoute=n;let o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Zk(n,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=as({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[_a]})}return e})(),Zk=class e{route;childContexts;parent;outletData;__ngOutletInjector(t){return new e(this.route,this.childContexts,t,this.outletData)}constructor(t,n,r,o){this.route=t,this.childContexts=n,this.parent=r,this.outletData=o}get(t,n){return t===bl?this.route:t===av?this.childContexts:t===Rye?this.outletData:this.parent.get(t,n)}},Uw=new ke(""),E5=(()=>{class e{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,o=hy([r.queryParams,r.params,r.data]).pipe(Do(([i,s,a],u)=>(a=xe(xe(xe({},i),s),a),u===0?st(a):Promise.resolve(a)))).subscribe(i=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=A6(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,i[a])});this.outletDataSubscriptions.set(n,o)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})();function kye(e,t,n){let r=Jy(e,t._root,n?n._root:void 0);return new Mw(r,t)}function Jy(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let o=Oye(e,t,n);return new fs(r,o)}else{if(e.shouldAttach(t.value)){let i=e.retrieve(t.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Jy(e,a)),s}}let r=Mye(t.value),o=t.children.map(i=>Jy(e,i));return new fs(r,o)}}function Oye(e,t,n){return t.children.map(r=>{for(let o of n.children)if(e.shouldReuseRoute(r.value,o.value.snapshot))return Jy(e,r,o);return Jy(e,r)})}function Mye(e){return new bl(new Br(e.url),new Br(e.params),new Br(e.queryParams),new Br(e.fragment),new Br(e.data),e.outlet,e.component,e)}var ev=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},H5="ngNavigationCancelingError";function $w(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=rf(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=W5(!1,ps.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function W5(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[H5]=!0,n.cancellationCode=t,n}function Fye(e){return q5(e)&&rf(e.url)}function q5(e){return!!e&&e[H5]}var Pye=(e,t,n,r)=>xt(o=>(new Qk(t,o.targetRouterState,o.currentRouterState,n,r).activate(e),o)),Qk=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,o,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Ak(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let o=vh(n);t.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,n,r){let o=t.value,i=n?n.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=vh(t);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=vh(t);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let o=vh(n);t.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new Wk(i.value.snapshot))}),t.children.length&&this.forwardEvent(new zk(t.value.snapshot))}activateRoutes(t,n,r){let o=t.value,i=n?n.value:null;if(Ak(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ak(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},Lw=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},wh=class{component;route;constructor(t,n){this.component=t,this.route=n}};function $ye(e,t,n){let r=e._root,o=t?t._root:null;return Hy(r,o,n,[r.value])}function Lye(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Sh(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!FV(e)?e:t.get(e):r}function Hy(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=vh(t);return e.children.forEach(s=>{Vye(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>Xy(a,n.getContext(s),o)),o}function Vye(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let u=Bye(s,i,i.routeConfig.runGuardsAndResolvers);u?o.canActivateChecks.push(new Lw(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?Hy(e,t,a?a.children:null,r,o):Hy(e,t,n,r,o),u&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new wh(a.outlet.component,s))}else s&&Xy(t,a,o),o.canActivateChecks.push(new Lw(r)),i.component?Hy(e,null,a?a.children:null,r,o):Hy(e,null,n,r,o);return o}function Bye(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!nf(e.url,t.url);case"pathParamsOrQueryParamsChange":return!nf(e.url,t.url)||!fu(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yk(e,t)||!fu(e.queryParams,t.queryParams);case"paramsChange":default:return!Yk(e,t)}}function Xy(e,t,n){let r=vh(e),o=e.value;Object.entries(r).forEach(([i,s])=>{o.component?t?Xy(s,t.children.getContext(i),n):Xy(s,null,n):Xy(s,t,n)}),o.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new wh(t.outlet.component,o)):n.canDeactivateChecks.push(new wh(null,o)):n.canDeactivateChecks.push(new wh(null,o))}function uv(e){return typeof e=="function"}function Uye(e){return typeof e=="boolean"}function Gye(e){return e&&uv(e.canLoad)}function jye(e){return e&&uv(e.canActivate)}function zye(e){return e&&uv(e.canActivateChild)}function Hye(e){return e&&uv(e.canDeactivate)}function Wye(e){return e&&uv(e.canMatch)}function K5(e){return e instanceof Hu||e?.name==="EmptyError"}var Tw=Symbol("INITIAL_VALUE");function Ih(){return Do(e=>hy(e.map(t=>t.pipe(Wu(1),MN(Tw)))).pipe(xt(t=>{for(let n of t)if(n!==!0){if(n===Tw)return Tw;if(n===!1||qye(n))return n}return!0}),qo(t=>t!==Tw),Wu(1)))}function qye(e){return rf(e)||e instanceof ev}function Kye(e,t){return lr(n=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return s.length===0&&i.length===0?st(vt(xe({},n),{guardsResult:!0})):Xye(s,r,o,e).pipe(lr(a=>a&&Uye(a)?Yye(r,i,e,t):st(a)),xt(a=>vt(xe({},n),{guardsResult:a})))})}function Xye(e,t,n,r){return Vn(e).pipe(lr(o=>tve(o.component,o.route,n,t,r)),ru(o=>o!==!0,!0))}function Yye(e,t,n,r){return Vn(t).pipe(Zc(o=>zp(Qye(o.route.parent,r),Zye(o.route,r),eve(e,o.path,n),Jye(e,o.route,n))),ru(o=>o!==!0,!0))}function Zye(e,t){return e!==null&&t&&t(new Hk(e)),st(!0)}function Qye(e,t){return e!==null&&t&&t(new jk(e)),st(!0)}function Jye(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return st(!0);let o=r.map(i=>I1(()=>{let s=sv(t)??n,a=Sh(i,s),u=jye(a)?a.canActivate(t,e):is(s,()=>a(t,e));return wl(u).pipe(ru())}));return st(o).pipe(Ih())}function eve(e,t,n){let r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(s=>Lye(s)).filter(s=>s!==null).map(s=>I1(()=>{let a=s.guards.map(u=>{let c=sv(s.node)??n,d=Sh(u,c),f=zye(d)?d.canActivateChild(r,e):is(c,()=>d(r,e));return wl(f).pipe(ru())});return st(a).pipe(Ih())}));return st(i).pipe(Ih())}function tve(e,t,n,r,o){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return st(!0);let s=i.map(a=>{let u=sv(t)??o,c=Sh(a,u),d=Hye(c)?c.canDeactivate(e,t,n,r):is(u,()=>c(e,t,n,r));return wl(d).pipe(ru())});return st(s).pipe(Ih())}function nve(e,t,n,r){let o=t.canLoad;if(o===void 0||o.length===0)return st(!0);let i=o.map(s=>{let a=Sh(s,e),u=Gye(a)?a.canLoad(t,n):is(e,()=>a(t,n));return wl(u)});return st(i).pipe(Ih(),X5(r))}function X5(e){return bN(Jn(t=>{if(typeof t!="boolean")throw $w(e,t)}),xt(t=>t===!0))}function rve(e,t,n,r){let o=t.canMatch;if(!o||o.length===0)return st(!0);let i=o.map(s=>{let a=Sh(s,e),u=Wye(a)?a.canMatch(t,n):is(e,()=>a(t,n));return wl(u)});return st(i).pipe(Ih(),X5(r))}var tv=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},nv=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function yh(e){return Gp(new tv(e))}function ove(e){return Gp(new Be(4e3,!1))}function ive(e){return Gp(W5(!1,ps.GuardRejected))}var Jk=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return st(r);if(o.numberOfChildren>1||!o.children[It])return ove(`${t.redirectTo}`);o=o.children[It]}}applyRedirectCommands(t,n,r,o,i){if(typeof n!="string"){let a=n,{queryParams:u,fragment:c,routeConfig:d,url:f,outlet:h,params:m,data:v,title:x}=o,b=is(i,()=>a({params:m,data:v,queryParams:u,fragment:c,routeConfig:d,url:f,outlet:h,title:x}));if(b instanceof cc)throw new nv(b);n=b}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new nv(s);return s}applyRedirectCreateUrlTree(t,n,r,o){let i=this.createSegmentGroup(t,n.root,r,o);return new cc(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(t,n,r,o){let i=this.createSegments(t,n.segments,r,o),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(t,u,r,o)}),new cn(i,s)}createSegments(t,n,r,o){return n.map(i=>i.path[0]===":"?this.findPosParam(t,i,o):this.findOrReturn(i,r))}findPosParam(t,n,r){let o=r[n.path.substring(1)];if(!o)throw new Be(4001,!1);return o}findOrReturn(t,n){let r=0;for(let o of n){if(o.path===t.path)return n.splice(r),o;r++}return t}},eO={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sve(e,t,n,r,o){let i=Y5(e,t,n);return i.matched?(r=Dye(t,r),rve(r,t,n,o).pipe(xt(s=>s===!0?i:xe({},eO)))):st(i)}function Y5(e,t,n){if(t.path==="**")return ave(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?xe({},eO):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(t.matcher||nye)(n,e,t);if(!o)return xe({},eO);let i={};Object.entries(o.posParams??{}).forEach(([a,u])=>{i[a]=u.path});let s=o.consumed.length>0?xe(xe({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function ave(e){return{matched:!0,parameters:e.length>0?N5(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function C5(e,t,n,r){return n.length>0&&lve(e,n,r)?{segmentGroup:new cn(t,cve(r,new cn(n,e.children))),slicedSegments:[]}:n.length===0&&dve(e,n,r)?{segmentGroup:new cn(e.segments,uve(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new cn(e.segments,e.children),slicedSegments:n}}function uve(e,t,n,r){let o={};for(let i of n)if(Gw(e,t,i)&&!r[Sa(i)]){let s=new cn([],{});o[Sa(i)]=s}return xe(xe({},r),o)}function cve(e,t){let n={};n[It]=t;for(let r of e)if(r.path===""&&Sa(r)!==It){let o=new cn([],{});n[Sa(r)]=o}return n}function lve(e,t,n){return n.some(r=>Gw(e,t,r)&&Sa(r)!==It)}function dve(e,t,n){return n.some(r=>Gw(e,t,r))}function Gw(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function fve(e,t,n){return t.length===0&&!e.children[n]}var tO=class{};function pve(e,t,n,r,o,i,s="emptyOnly"){return new nO(e,t,n,r,o,s,i).recognize()}var hve=31,nO=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,o,i,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Jk(this.urlSerializer,this.urlTree)}noMatchError(t){return new Be(4002,`'${t.segmentGroup}'`)}recognize(){let t=C5(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(xt(({children:n,rootSnapshot:r})=>{let o=new fs(r,n),i=new Pw("",o),s=wye(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(t){let n=new bh([],Object.freeze({}),Object.freeze(xe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),It,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,It,n).pipe(xt(r=>({children:r,rootSnapshot:n})),Yc(r=>{if(r instanceof nv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof tv?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,i):this.processSegment(t,n,r,r.segments,o,!0,i).pipe(xt(s=>s instanceof fs?[s]:[]))}processChildren(t,n,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Vn(i).pipe(Zc(s=>{let a=r.children[s],u=Nye(n,s);return this.processSegmentGroup(t,u,a,s,o)}),kN((s,a)=>(s.push(...a),s)),Qc(null),RN(),lr(s=>{if(s===null)return yh(r);let a=Z5(s);return mve(a),st(a)}))}processSegment(t,n,r,o,i,s,a){return Vn(n).pipe(Zc(u=>this.processSegmentAgainstRoute(u._injector??t,n,u,r,o,i,s,a).pipe(Yc(c=>{if(c instanceof tv)return st(null);throw c}))),ru(u=>!!u),Yc(u=>{if(K5(u))return fve(r,o,i)?st(new tO):yh(r);throw u}))}processSegmentAgainstRoute(t,n,r,o,i,s,a,u){return Sa(r)!==s&&(s===It||!Gw(o,i,r))?yh(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,o,r,i,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,o,n,r,i,s,u):yh(o)}expandSegmentAgainstRouteUsingRedirect(t,n,r,o,i,s,a){let{matched:u,parameters:c,consumedSegments:d,positionalParamSegments:f,remainingSegments:h}=Y5(n,o,i);if(!u)return yh(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hve&&(this.allowRedirects=!1));let m=new bh(i,c,Object.freeze(xe({},this.urlTree.queryParams)),this.urlTree.fragment,T5(o),Sa(o),o.component??o._loadedComponent??null,o,_5(o)),v=Fw(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(v.params),m.data=Object.freeze(v.data);let x=this.applyRedirects.applyRedirectCommands(d,o.redirectTo,f,m,t);return this.applyRedirects.lineralizeSegments(o,x).pipe(lr(b=>this.processSegment(t,r,n,b.concat(h),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,o,i,s){let a=sve(n,r,o,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Do(u=>u.matched?(t=r._injector??t,this.getChildConfig(t,r,o).pipe(Do(({routes:c})=>{let d=r._loadedInjector??t,{parameters:f,consumedSegments:h,remainingSegments:m}=u,v=new bh(h,f,Object.freeze(xe({},this.urlTree.queryParams)),this.urlTree.fragment,T5(r),Sa(r),r.component??r._loadedComponent??null,r,_5(r)),x=Fw(v,s,this.paramsInheritanceStrategy);v.params=Object.freeze(x.params),v.data=Object.freeze(x.data);let{segmentGroup:b,slicedSegments:C}=C5(n,h,m,c);if(C.length===0&&b.hasChildren())return this.processChildren(d,c,b,v).pipe(xt(O=>new fs(v,O)));if(c.length===0&&C.length===0)return st(new fs(v,[]));let S=Sa(r)===i;return this.processSegment(d,c,b,C,S?It:i,!0,v).pipe(xt(O=>new fs(v,O instanceof fs?[O]:[])))}))):yh(n)))}getChildConfig(t,n,r){return n.children?st({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?st({routes:n._loadedRoutes,injector:n._loadedInjector}):nve(t,n,r,this.urlSerializer).pipe(lr(o=>o?this.configLoader.loadChildren(t,n).pipe(Jn(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):ive(n))):st({routes:[],injector:t})}};function mve(e){e.sort((t,n)=>t.value.outlet===It?-1:n.value.outlet===It?1:t.value.outlet.localeCompare(n.value.outlet))}function gve(e){let t=e.value.routeConfig;return t&&t.path===""}function Z5(e){let t=[],n=new Set;for(let r of e){if(!gve(r)){t.push(r);continue}let o=t.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):t.push(r)}for(let r of n){let o=Z5(r.children);t.push(new fs(r.value,o))}return t.filter(r=>!n.has(r))}function T5(e){return e.data||{}}function _5(e){return e.resolve||{}}function yve(e,t,n,r,o,i){return lr(s=>pve(e,t,n,r,s.extractedUrl,o,i).pipe(xt(({state:a,tree:u})=>vt(xe({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function vve(e,t){return lr(n=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return st(n);let i=new Set(o.map(u=>u.route)),s=new Set;for(let u of i)if(!s.has(u))for(let c of Q5(u))s.add(c);let a=0;return Vn(s).pipe(Zc(u=>i.has(u)?xve(u,r,e,t):(u.data=Fw(u,u.parent,e).resolve,st(void 0))),Jn(()=>a++),Wp(1),lr(u=>a===s.size?st(n):Ji))})}function Q5(e){let t=e.children.map(n=>Q5(n)).flat();return[e,...t]}function xve(e,t,n,r){let o=e.routeConfig,i=e._resolve;return o?.title!==void 0&&!z5(o)&&(i[ov]=o.title),bve(i,e,t,r).pipe(xt(s=>(e._resolvedData=s,e.data=Fw(e,e.parent,n).resolve,null)))}function bve(e,t,n,r){let o=Ok(e);if(o.length===0)return st({});let i={};return Vn(o).pipe(lr(s=>wve(e[s],t,n,r).pipe(ru(),Jn(a=>{if(a instanceof ev)throw $w(new Ch,a);i[s]=a}))),Wp(1),NN(i),Yc(s=>K5(s)?Ji:Gp(s)))}function wve(e,t,n,r){let o=sv(t)??r,i=Sh(e,o),s=i.resolve?i.resolve(t,n):is(o,()=>i(t,n));return wl(s)}function Rk(e){return Do(t=>{let n=e(t);return n?Vn(n).pipe(xt(()=>t)):st(t)})}var J5=(()=>{class e{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===It);return r}getResolvedTitleForRoute(n){return n.data[ov]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>fe(Eve),providedIn:"root"})}return e})(),Eve=(()=>{class e extends J5{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(bt(m5))};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),cv=new ke("",{providedIn:"root",factory:()=>({})}),Cve=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Dr({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,o){r&1&&Nr(0,"router-outlet")},dependencies:[iO],encapsulation:2})}return e})();function sO(e){let t=e.children&&e.children.map(sO),n=t?vt(xe({},e),{children:t}):xe({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==It&&(n.component=Cve),n}var rv=new ke(""),aO=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=fe(rw);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return st(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=wl(n.loadComponent()).pipe(xt(e8),Jn(i=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=i}),Hp(()=>{this.componentLoaders.delete(n)})),o=new Vp(r,()=>new Sr).pipe(Lp());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return st({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=Tve(r,this.compiler,n,this.onLoadEndListener).pipe(Hp(()=>{this.childrenLoaders.delete(r)})),s=new Vp(i,()=>new Sr).pipe(Lp());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Tve(e,t,n,r){return wl(e.loadChildren()).pipe(xt(e8),lr(o=>o instanceof Cy||Array.isArray(o)?st(o):Vn(t.compileModuleAsync(o))),xt(o=>{r&&r(e);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(n).injector,s=i.get(rv,[],{optional:!0,self:!0}).flat()),{routes:s.map(sO),injector:i}}))}function _ve(e){return e&&typeof e=="object"&&"default"in e}function e8(e){return _ve(e)?e.default:e}var uO=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>fe(Ive),providedIn:"root"})}return e})(),Ive=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),t8=new ke(""),n8=new ke("");function Sve(e,t,n){let r=e.get(n8),o=e.get(Zo);return e.get(er).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let i,s=new Promise(c=>{i=c}),a=o.startViewTransition(()=>(i(),Dve(e))),{onViewTransitionCreated:u}=r;return u&&is(e,()=>u({transition:a,from:t,to:n})),s})}function Dve(e){return new Promise(t=>{Lb({read:()=>setTimeout(t)},{injector:e})})}var r8=new ke(""),cO=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Sr;transitionAbortSubject=new Sr;configLoader=fe(aO);environmentInjector=fe(Ci);urlSerializer=fe(iv);rootContexts=fe(av);location=fe(mh);inputBindingEnabled=fe(Uw,{optional:!0})!==null;titleStrategy=fe(J5);options=fe(cv,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=fe(uO);createViewTransition=fe(t8,{optional:!0});navigationErrorHandler=fe(r8,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>st(void 0);rootComponentType=null;constructor(){let n=o=>this.events.next(new Uk(o)),r=o=>this.events.next(new Gk(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(vt(xe(xe({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,o){return this.transitions=new Br({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ky,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(qo(i=>i.id!==0),xt(i=>vt(xe({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Do(i=>{let s=!1,a=!1;return st(i).pipe(Do(u=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",ps.SupersededByNewNavigation),Ji;this.currentTransition=i,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?vt(xe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&d!=="reload"){let f="";return this.events.next(new xl(u.id,this.urlSerializer.serialize(u.rawUrl),f,Aw.IgnoredSameUrlNavigation)),u.resolve(!1),Ji}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return st(u).pipe(Do(f=>{let h=this.transitions?.getValue();return this.events.next(new Th(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?Ji:Promise.resolve(f)}),yve(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Jn(f=>{i.targetSnapshot=f.targetSnapshot,i.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=vt(xe({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new Rw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:h,source:m,restoredState:v,extras:x}=u,b=new Th(f,this.urlSerializer.serialize(h),m,v);this.events.next(b);let C=G5(this.rootComponentType).snapshot;return this.currentTransition=i=vt(xe({},u),{targetSnapshot:C,urlAfterRedirects:h,extras:vt(xe({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,st(i)}else{let f="";return this.events.next(new xl(u.id,this.urlSerializer.serialize(u.extractedUrl),f,Aw.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Ji}}),Jn(u=>{let c=new $k(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),xt(u=>(this.currentTransition=i=vt(xe({},u),{guards:$ye(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),i)),Kye(this.environmentInjector,u=>this.events.next(u)),Jn(u=>{if(i.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw $w(this.urlSerializer,u.guardsResult);let c=new Lk(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(c)}),qo(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",ps.GuardRejected),!1)),Rk(u=>{if(u.guards.canActivateChecks.length)return st(u).pipe(Jn(c=>{let d=new Vk(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),Do(c=>{let d=!1;return st(c).pipe(vve(this.paramsInheritanceStrategy,this.environmentInjector),Jn({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",ps.NoDataFromResolver)}}))}),Jn(c=>{let d=new Bk(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),Rk(u=>{let c=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Jn(h=>{d.component=h}),xt(()=>{})));for(let h of d.children)f.push(...c(h));return f};return hy(c(u.targetSnapshot.root)).pipe(Qc(null),Wu(1))}),Rk(()=>this.afterPreactivation()),Do(()=>{let{currentSnapshot:u,targetSnapshot:c}=i,d=this.createViewTransition?.(this.environmentInjector,u.root,c.root);return d?Vn(d).pipe(xt(()=>i)):st(i)}),xt(u=>{let c=kye(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=i=vt(xe({},u),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,i}),Jn(()=>{this.events.next(new Qy)}),Pye(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Wu(1),Jn({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new hs(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),FN(this.transitionAbortSubject.pipe(Jn(u=>{throw u}))),Hp(()=>{!s&&!a&&this.cancelNavigationTransition(i,"",ps.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Yc(u=>{if(a=!0,q5(u))this.events.next(new uc(i.id,this.urlSerializer.serialize(i.extractedUrl),u.message,u.cancellationCode)),Fye(u)?this.events.next(new _h(u.url,u.navigationBehaviorOptions)):i.resolve(!1);else{let c=new Zy(i.id,this.urlSerializer.serialize(i.extractedUrl),u,i.targetSnapshot??void 0);try{let d=is(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof ev){let{message:f,cancellationCode:h}=$w(this.urlSerializer,d);this.events.next(new uc(i.id,this.urlSerializer.serialize(i.extractedUrl),f,h)),this.events.next(new _h(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(c),u}catch(d){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(d)}}return Ji}))}))}cancelNavigationTransition(n,r,o){let i=new uc(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Nve(e){return e!==Ky}var Ave=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>fe(Rve),providedIn:"root"})}return e})(),rO=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},Rve=(()=>{class e extends rO{static \u0275fac=(()=>{let n;return function(o){return(n||(n=Ry(e)))(o||e)}})();static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),o8=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:()=>fe(kve),providedIn:"root"})}return e})(),kve=(()=>{class e extends o8{location=fe(mh);urlSerializer=fe(iv);options=fe(cv,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=fe(uO);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new cc;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=G5(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Th)this.stateMemento=this.createStateMemento();else if(n instanceof xl)this.rawUrlTree=r.initialUrl;else if(n instanceof Rw){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??o,r)}}else n instanceof Qy?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof uc&&(n.code===ps.GuardRejected||n.code===ps.NoDataFromResolver)?this.restoreHistory(r):n instanceof Zy?this.restoreHistory(r,!0):n instanceof hs&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let o=n instanceof cc?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let i=this.browserPageId,s=xe(xe({},r.extras.state),this.generateNgRouterState(r.id,i));this.location.replaceState(o,"",s)}else{let i=xe(xe({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",i)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.currentUrlTree===n.finalUrl&&i===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Ry(e)))(o||e)}})();static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Wy=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Wy||{});function i8(e,t){e.events.pipe(qo(n=>n instanceof hs||n instanceof uc||n instanceof Zy||n instanceof xl),xt(n=>n instanceof hs||n instanceof xl?Wy.COMPLETE:(n instanceof uc?n.code===ps.Redirect||n.code===ps.SupersededByNewNavigation:!1)?Wy.REDIRECTING:Wy.FAILED),qo(n=>n!==Wy.REDIRECTING),Wu(1)).subscribe(()=>{t()})}var Ove={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Mve={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ro=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=fe(Jb);stateManager=fe(o8);options=fe(cv,{optional:!0})||{};pendingTasks=fe(tc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=fe(cO);urlSerializer=fe(iv);location=fe(mh);urlHandlingStrategy=fe(uO);_events=new Sr;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=fe(Ave);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=fe(rv,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!fe(Uw,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ur;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof uc&&r.code!==ps.Redirect&&r.code!==ps.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof hs)this.navigated=!0;else if(r instanceof _h){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),u=xe({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Nve(o.source)},s);this.scheduleNavigation(a,Ky,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}Pve(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ky,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let u=xe({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(i.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(sO),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=xe(xe({},this.currentUrlTree.queryParams),i);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=i||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=o?o.snapshot:this.routerState.snapshot.root;f=L5(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return V5(f,n,d,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){let o=rf(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Ky,null,r)}navigate(n,r={skipLocationChange:!1}){return Fve(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=xe({},Ove):r===!1?o=xe({},Mve):o=r,rf(n))return v5(this.currentUrlTree,n,o);let i=this.parseUrl(n);return v5(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,u,c;s?(a=s.resolve,u=s.reject,c=s.promise):c=new Promise((f,h)=>{a=f,u=h});let d=this.pendingTasks.add();return i8(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Fve(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new Be(4008,!1)}function Pve(e){return!(e instanceof Qy)&&!(e instanceof _h)}var Vw=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Sr;constructor(n,r,o,i,s,a){this.router=n,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(c=>{c instanceof hs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(rf(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,o,i,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||o||i||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:cU(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let o=this.renderer,i=this.el.nativeElement;r!==null?o.setAttribute(i,n,r):o.removeAttribute(i,n)}get urlTree(){return this.routerLinkInput===null?null:rf(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(lt(Ro),lt(bl),ER("tabindex"),lt(lu),lt(_i),lt(ac))};static \u0275dir=as({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&ho("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&tw("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ef],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ef],replaceUrl:[2,"replaceUrl","replaceUrl",ef],routerLink:"routerLink"},features:[YR,_a]})}return e})(),s8=(()=>{class e{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new dr;constructor(n,r,o,i,s){this.router=n,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof hs&&this.update()})}ngAfterContentInit(){st(this.links.changes,st(null)).pipe(Xc()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Vn(n).pipe(Xc()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=$ve(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let i=o.urlTree;return i?n.isActive(i,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||e)(lt(Ro),lt(_i),lt(lu),lt(gl),lt(Vw,8))};static \u0275dir=as({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,o,i){if(r&1&&b6(i,Vw,5),r&2){let s;Zd(s=Qd())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[_a]})}return e})();function $ve(e){return!!e.paths}var Bw=class{};var Lve=(()=>{class e{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,o,i,s){this.router=n,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(qo(n=>n instanceof hs),Zc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let o=[];for(let i of r){i.providers&&!i._injector&&(i._injector=My(i.providers,n,`Route: ${i.path}`));let s=i._injector??n,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return Vn(o).pipe(Xc())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(n,r):o=st(null);let i=o.pipe(lr(s=>s===null?st(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Vn([i,s]).pipe(Xc())}else return i})}static \u0275fac=function(r){return new(r||e)(bt(Ro),bt(rw),bt(Ci),bt(Bw),bt(aO))};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),a8=new ke(""),Vve=(()=>{class e{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(n,r,o,i,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Th?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof hs?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof xl&&n.code===Aw.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof kw&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new kw(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){TU()};static \u0275prov=He({token:e,factory:e.\u0275fac})}return e})();function u8(e,...t){return Kd([{provide:rv,multi:!0,useValue:e},[],{provide:bl,useFactory:c8,deps:[Ro]},{provide:hl,multi:!0,useFactory:l8},t.map(n=>n.\u0275providers)])}function c8(e){return e.routerState.root}function lv(e,t){return{\u0275kind:e,\u0275providers:t}}function l8(){let e=fe(Ti);return t=>{let n=e.get(os);if(t!==n.components[0])return;let r=e.get(Ro),o=e.get(d8);e.get(lO)===1&&r.initialNavigation(),e.get(f8,null,At.Optional)?.setUpPreloading(),e.get(a8,null,At.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var d8=new ke("",{factory:()=>new Sr}),lO=new ke("",{providedIn:"root",factory:()=>1});function Bve(){return lv(2,[{provide:lO,useValue:0},{provide:ew,multi:!0,deps:[Ti],useFactory:t=>{let n=t.get(V6,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let o=t.get(Ro),i=t.get(d8);i8(o,()=>{r(!0)}),t.get(cO).afterPreactivation=()=>(r(!0),i.closed?st(void 0):i),o.initialNavigation()}))}}])}function Uve(){return lv(3,[{provide:ew,multi:!0,useFactory:()=>{let t=fe(Ro);return()=>{t.setUpLocationChangeListener()}}},{provide:lO,useValue:2}])}var f8=new ke("");function Gve(e){return lv(0,[{provide:f8,useExisting:Lve},{provide:Bw,useExisting:e}])}function jve(){return lv(8,[E5,{provide:Uw,useExisting:E5}])}function zve(e){let t=[{provide:t8,useValue:Sve},{provide:n8,useValue:xe({skipNextTransition:!!e?.skipInitialTransition},e)}];return lv(9,t)}var I5=new ke("ROUTER_FORROOT_GUARD"),Hve=[mh,{provide:iv,useClass:Ch},Ro,av,{provide:bl,useFactory:c8,deps:[Ro]},aO,[]],jw=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[Hve,[],{provide:rv,multi:!0,useValue:n},{provide:I5,useFactory:Xve,deps:[[Ro,new Db,new iR]]},r?.errorHandler?{provide:r8,useValue:r.errorHandler}:[],{provide:cv,useValue:r||{}},r?.useHash?qve():Kve(),Wve(),r?.preloadingStrategy?Gve(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Yve(r):[],r?.bindToComponentInputs?jve().\u0275providers:[],r?.enableViewTransitions?zve().\u0275providers:[],Zve()]}}static forChild(n){return{ngModule:e,providers:[{provide:rv,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||e)(bt(I5,8))};static \u0275mod=pl({type:e});static \u0275inj=sl({})}return e})();function Wve(){return{provide:a8,useFactory:()=>{let e=fe(X6),t=fe(er),n=fe(cv),r=fe(cO),o=fe(iv);return n.scrollOffset&&e.setOffset(n.scrollOffset),new Vve(o,r,e,t,n)}}}function qve(){return{provide:ac,useClass:U6}}function Kve(){return{provide:ac,useClass:mk}}function Xve(e){return"guarded"}function Yve(e){return[e.initialNavigation==="disabled"?Uve().\u0275providers:[],e.initialNavigation==="enabledBlocking"?Bve().\u0275providers:[]]}var S5=new ke("");function Zve(){return[{provide:S5,useFactory:l8},{provide:hl,multi:!0,useExisting:S5}]}var b8=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(lt(lu),lt(_i))};static \u0275dir=as({type:e})}return e})(),Qve=(()=>{class e extends b8{static \u0275fac=(()=>{let n;return function(o){return(n||(n=Ry(e)))(o||e)}})();static \u0275dir=as({type:e,features:[hh]})}return e})(),w8=new ke("");var Jve={provide:w8,useExisting:Iy(()=>Xw),multi:!0};function e0e(){let e=sc()?sc().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var t0e=new ke(""),Xw=(()=>{class e extends b8{_compositionMode;_composing=!1;constructor(n,r,o){super(n,r),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!e0e())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(lt(lu),lt(_i),lt(t0e,8))};static \u0275dir=as({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&ho("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[JR([Jve]),hh]})}return e})();var n0e=new ke(""),r0e=new ke("");function E8(e){return e!=null}function C8(e){return Yd(e)?Vn(e):e}function T8(e){let t={};return e.forEach(n=>{t=n!=null?xe(xe({},t),n):t}),Object.keys(t).length===0?null:t}function _8(e,t){return t.map(n=>n(e))}function o0e(e){return!e.validate}function I8(e){return e.map(t=>o0e(t)?t:n=>t.validate(n))}function i0e(e){if(!e)return null;let t=e.filter(E8);return t.length==0?null:function(n){return T8(_8(n,t))}}function S8(e){return e!=null?i0e(I8(e)):null}function s0e(e){if(!e)return null;let t=e.filter(E8);return t.length==0?null:function(n){let r=_8(n,t).map(C8);return SN(r).pipe(xt(T8))}}function D8(e){return e!=null?s0e(I8(e)):null}function p8(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function a0e(e){return e._rawValidators}function u0e(e){return e._rawAsyncValidators}function dO(e){return e?Array.isArray(e)?e:[e]:[]}function Ww(e,t){return Array.isArray(e)?e.includes(t):e===t}function h8(e,t){let n=dO(t);return dO(e).forEach(o=>{Ww(n,o)||n.push(o)}),n}function m8(e,t){return dO(t).filter(n=>!Ww(e,n))}var qw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=S8(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=D8(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},fO=class extends qw{name;get formDirective(){return null}get path(){return null}},mv=class extends qw{_parent=null;name=null;valueAccessor=null},pO=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},c0e={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},LVe=vt(xe({},c0e),{"[class.ng-submitted]":"isSubmitted"}),N8=(()=>{class e extends pO{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(lt(mv,2))};static \u0275dir=as({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&us("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[hh]})}return e})();var dv="VALID",Hw="INVALID",Dh="PENDING",fv="DISABLED",Ah=class{},Kw=class extends Ah{value;source;constructor(t,n){super(),this.value=t,this.source=n}},pv=class extends Ah{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},hv=class extends Ah{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},Nh=class extends Ah{status;source;constructor(t,n){super(),this.status=t,this.source=n}};function l0e(e){return(Yw(e)?e.validators:e)||null}function d0e(e){return Array.isArray(e)?S8(e):e||null}function f0e(e,t){return(Yw(t)?t.asyncValidators:e)||null}function p0e(e){return Array.isArray(e)?D8(e):e||null}function Yw(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var hO=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return yl(this.statusReactive)}set status(t){yl(()=>this.statusReactive.set(t))}_status=ow(()=>this.statusReactive());statusReactive=Qb(void 0);get valid(){return this.status===dv}get invalid(){return this.status===Hw}get pending(){return this.status==Dh}get disabled(){return this.status===fv}get enabled(){return this.status!==fv}errors;get pristine(){return yl(this.pristineReactive)}set pristine(t){yl(()=>this.pristineReactive.set(t))}_pristine=ow(()=>this.pristineReactive());pristineReactive=Qb(!0);get dirty(){return!this.pristine}get touched(){return yl(this.touchedReactive)}set touched(t){yl(()=>this.touchedReactive.set(t))}_touched=ow(()=>this.touchedReactive());touchedReactive=Qb(!1);get untouched(){return!this.touched}_events=new Sr;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(h8(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(h8(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(m8(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(m8(t,this._rawAsyncValidators))}hasValidator(t){return Ww(this._rawValidators,t)}hasAsyncValidator(t){return Ww(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(vt(xe({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new hv(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new hv(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(vt(xe({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new pv(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new pv(!0,r))}markAsPending(t={}){this.status=Dh;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Nh(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(vt(xe({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=fv,this.errors=null,this._forEachChild(o=>{o.disable(vt(xe({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Kw(this.value,r)),this._events.next(new Nh(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(vt(xe({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=dv,this._forEachChild(r=>{r.enable(vt(xe({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(vt(xe({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dv||this.status===Dh)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Kw(this.value,n)),this._events.next(new Nh(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(vt(xe({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fv:dv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Dh,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=C8(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,o)=>r&&r._find(o),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Nh(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new dr,this.statusChanges=new dr}_calculateStatus(){return this._allControlsDisabled()?fv:this.errors?Hw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dh)?Dh:this._anyControlsHaveStatus(Hw)?Hw:dv}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),o&&this._events.next(new pv(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new hv(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Yw(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=d0e(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=p0e(this._rawAsyncValidators)}};var A8=new ke("CallSetDisabledState",{providedIn:"root",factory:()=>mO}),mO="always";function h0e(e,t){return[...t.path,e]}function m0e(e,t,n=mO){y0e(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),v0e(e,t),b0e(e,t),x0e(e,t),g0e(e,t)}function g8(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function g0e(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function y0e(e,t){let n=a0e(e);t.validator!==null?e.setValidators(p8(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=u0e(e);t.asyncValidator!==null?e.setAsyncValidators(p8(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let o=()=>e.updateValueAndValidity();g8(t._rawValidators,o),g8(t._rawAsyncValidators,o)}function v0e(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&R8(e,t)})}function x0e(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&R8(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function R8(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function b0e(e,t){let n=(r,o)=>{t.valueAccessor.writeValue(r),o&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function w0e(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function E0e(e){return Object.getPrototypeOf(e.constructor)===Qve}function C0e(e,t){if(!t)return null;Array.isArray(t);let n,r,o;return t.forEach(i=>{i.constructor===Xw?n=i:E0e(i)?r=i:o=i}),o||r||n||null}function y8(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function v8(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var T0e=class extends hO{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(l0e(n),f0e(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yw(n)&&(n.nonNullable||n.initialValueIsDefault)&&(v8(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){y8(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){y8(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){v8(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var _0e={provide:mv,useExisting:Iy(()=>gO)},x8=Promise.resolve(),gO=(()=>{class e extends mv{_changeDetectorRef;callSetDisabledState;control=new T0e;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new dr;constructor(n,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=C0e(this,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),w0e(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){m0e(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){x8.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,o=r!==0&&ef(r);x8.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?h0e(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(lt(fO,9),lt(n0e,10),lt(r0e,10),lt(w8,10),lt(gl,8),lt(A8,8))};static \u0275dir=as({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[JR([_0e]),hh,_a]})}return e})();var I0e=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=pl({type:e});static \u0275inj=sl({})}return e})();var k8=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:A8,useValue:n.callSetDisabledState??mO}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=pl({type:e});static \u0275inj=sl({imports:[I0e]})}return e})();var Zw=class e{constructor(t){this.router=t}name;enterGame(){this.router.navigate(["/hello-friend"])}static \u0275fac=function(n){return new(n||e)(lt(Ro))};static \u0275cmp=Dr({type:e,selectors:[["app-welcome"]],decls:8,vars:4,consts:[[1,"glass-container"],["type","text","placeholder","Name",3,"ngModelChange","ngModel"],[3,"click","disabled"]],template:function(n,r){n&1&&(We(0,"div",0)(1,"h1"),Et(2,"Welcome"),Ke(),We(3,"p"),Et(4,"Welcome to join the 2024 IDPwD event. Please enter your name to continue."),Ke(),We(5,"input",1),QR("ngModelChange",function(i){return E6(r.name,i)||(r.name=i),i}),Ke(),We(6,"button",2),ho("click",function(){return r.enterGame()}),Et(7,"Continue"),Ke()()),n&2&&(un(5),ZR("ngModel",r.name),un(),us("disabled",!(r.name!=null&&r.name.length)),Sn("disabled",!(r.name!=null&&r.name.length)))},dependencies:[k8,Xw,N8,gO],encapsulation:2})};var of=class e{static ANCHOR_POINTS=[[0,0,0],[0,.1,0],[-.1,0,0],[-.1,-.1,0]];static fingerLookupIndices={thumb:[0,1,2,3,4],indexFinger:[0,5,6,7,8],middleFinger:[0,9,10,11,12],ringFinger:[0,13,14,15,16],pinky:[0,17,18,19,20]};static connections=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20]];static isHandSimilar(t,n,r=.005){if(t.handedness!==n.handedness)return!1;let o=e.calculateKeyPointsDifference(t.keypoints3D??[],n.keypoints3D??[]);return console.log("MAE",o),o<r}static calculateKeyPointsDifference(t,n){let r=[];return t.forEach((i,s)=>{r.push(this.calculatePointDIfference(i,n[s]))}),this.removeOutliers(r),r.reduce((i,s)=>i+s,0)/r.length}static calculatePointDIfference(t,n){let r=t.x&&n.x?Math.abs(t.x-n.x):0,o=t.y&&n.y?Math.abs(t.y-n.y):0,i=t.z&&n.z?Math.abs(t.z-n.z):0;return(r+o+i)/3}static removeOutliers(t){let n=t.indexOf(Math.max(...t));t.splice(n,1);let r=t.indexOf(Math.min(...t));t.splice(r,1)}static convertHandLandmarkResultToHand(t,n,r,o=!0){let i=[],{handedness:s,landmarks:a,worldLandmarks:u}=t,c=s.find(f=>f?.[0]?.categoryName==="Left"),d=s.find(f=>f?.[0]?.categoryName==="Right");if(c?.length){let f=c[0],h=f.index<t.landmarks.length?f.index:t.landmarks.length-1;i.push(this.convertHandnessToHand(f,t.landmarks[h],n,r,o))}if(d?.length){let f=d[0],h=f.index<t.landmarks.length?f.index:t.landmarks.length-1;i.push(this.convertHandnessToHand(f,t.landmarks[h],n,r,o))}return i}static convertHandnessToHand(t,n,r,o,i=!0){let s=i?n.map(u=>({x:(1-u.x)*r,y:u.y*o})):n.map(u=>({x:u.x*r,y:u.y*o})),a=i?n.map(u=>vt(xe({},u),{x:1-u.x,y:u.y})):n;return{handedness:t.categoryName,score:t.score,keypoints:s,keypoints3D:a}}static drawHandLandmarks(t,n,r=!1){let o=t.getContext("2d");if(!o)return;let{width:i,height:s}=t;for(let u=0;u<n.length;u++){let c=r?n[u].x*i:n[u].x,d=r?n[u].y*s:n[u].y;this.drawPoint(o,c,d,2,"#ff0000")}let a=Object.keys(e.fingerLookupIndices);for(let u=0;u<a.length;u++){let c=a[u],d=e.fingerLookupIndices[c].map(f=>n[f]);this.drawPath(t,d,!1,"#0014dc",r)}}static drawPoint(t,n,r,o,i){t.beginPath(),t.arc(n,r,o,0,2*Math.PI),t.fillStyle=i,t.fill()}static drawPath(t,n,r,o,i=!1){let s=t.getContext("2d");if(!s)return;s.strokeStyle=o||"#000000";let a=new Path2D,{width:u,height:c}=t,d=i?n[0].x*u:n[0].x,f=i?n[0].y*c:n[0].y;a.moveTo(d,f);for(let h=1;h<n.length;h++){let{x:m,y:v}=n[h];m=i?m*u:m,v=i?v*c:v,a.lineTo(m,v)}r&&a.closePath(),s.stroke(a)}static isContinuousGesture(t,n){if(t?.length!==n?.length)return!1;let r=!0;for(let o=0;o<t.length;o++)r&&=t[o].handedness===n[o].handedness,r&&=!!t[o].handpose,r&&=t[o].handpose===n[o].handpose;return r}static getMove3DVector(t,n){let r=t.keypoints3D?.[4],o=n.keypoints3D?.[4];if(!r||!o)return[0,0,0];let i=(o?.x||0)-(r?.x||0),s=(o?.y||0)-(r?.y||0),a=(o?.z||0)-(r?.z||0);return console.log(i,s,a),[i,s,a]}static getMove2DVector(t,n){let r=t.keypoints[4],o=n.keypoints[4],i=o.x-r.x,s=o.y-r.y;return[i,s]}};var ite=ya(O8()),ste=ya(Cl());var mo=ya(Cl());var lc=new mo.GestureDescription("point_to_other");for(let e of[mo.Finger.Thumb,mo.Finger.Index,mo.Finger.Middle,mo.Finger.Ring,mo.Finger.Pinky])lc.addCurl(e,mo.FingerCurl.NoCurl,1),lc.addDirection(e,mo.FingerDirection.VerticalUp,.8),lc.addDirection(e,mo.FingerDirection.VerticalDown,.8),lc.addDirection(e,mo.FingerDirection.DiagonalUpRight,.4),lc.addDirection(e,mo.FingerDirection.DiagonalUpLeft,.4),lc.addDirection(e,mo.FingerDirection.DiagonalDownRight,.4),lc.addDirection(e,mo.FingerDirection.DiagonalDownLeft,.4);var go=ya(Cl());var _l=new go.GestureDescription("thumbs_up");_l.addCurl(go.Finger.Thumb,go.FingerCurl.NoCurl,1);_l.addDirection(go.Finger.Thumb,go.FingerDirection.VerticalUp,1);_l.addCurl(go.Finger.Index,go.FingerCurl.FullCurl,1);_l.addCurl(go.Finger.Middle,go.FingerCurl.FullCurl,1);_l.addCurl(go.Finger.Ring,go.FingerCurl.FullCurl,1);_l.addCurl(go.Finger.Pinky,go.FingerCurl.FullCurl,1);var Er=ya(Cl());var pu=new Er.GestureDescription("half_thumb_up");pu.addCurl(Er.Finger.Thumb,Er.FingerCurl.NoCurl,.8);pu.addCurl(Er.Finger.Thumb,Er.FingerCurl.HalfCurl,1);pu.addCurl(Er.Finger.Thumb,Er.FingerCurl.FullCurl,1);pu.addDirection(Er.Finger.Thumb,Er.FingerDirection.VerticalUp,1);pu.addCurl(Er.Finger.Index,Er.FingerCurl.FullCurl,1);pu.addCurl(Er.Finger.Middle,Er.FingerCurl.FullCurl,1);pu.addCurl(Er.Finger.Ring,Er.FingerCurl.FullCurl,1);pu.addCurl(Er.Finger.Pinky,Er.FingerCurl.FullCurl,1);var Jr=ya(Cl());var dc=new Jr.GestureDescription("two_fingers");dc.addCurl(Jr.Finger.Thumb,Jr.FingerCurl.NoCurl,.7);dc.addCurl(Jr.Finger.Thumb,Jr.FingerCurl.HalfCurl,.7);dc.addCurl(Jr.Finger.Thumb,Jr.FingerCurl.FullCurl,.2);dc.addCurl(Jr.Finger.Index,Jr.FingerCurl.NoCurl,1);dc.addCurl(Jr.Finger.Middle,Jr.FingerCurl.NoCurl,1);dc.addCurl(Jr.Finger.Ring,Jr.FingerCurl.FullCurl,1);dc.addCurl(Jr.Finger.Pinky,Jr.FingerCurl.FullCurl,1);var ms=ya(Cl());var vv=new ms.GestureDescription("point_diagonal_up");for(let e of[ms.Finger.Thumb,ms.Finger.Index,ms.Finger.Middle,ms.Finger.Ring,ms.Finger.Pinky])vv.addCurl(e,ms.FingerCurl.NoCurl,1),vv.addDirection(e,ms.FingerDirection.DiagonalUpRight,.8),vv.addDirection(e,ms.FingerDirection.DiagonalUpLeft,.8);var gs=ya(Cl());var xv=new gs.GestureDescription("point_diagonal_down");for(let e of[gs.Finger.Thumb,gs.Finger.Index,gs.Finger.Middle,gs.Finger.Ring,gs.Finger.Pinky])xv.addCurl(e,gs.FingerCurl.NoCurl,1),xv.addDirection(e,gs.FingerDirection.DiagonalDownRight,1),xv.addDirection(e,gs.FingerDirection.DiagonalDownLeft,1);var df=typeof self<"u"?self:{};function RO(e,t){e:{for(var n=["CLOSURE_FLAGS"],r=df,o=0;o<n.length;o++)if((r=r[n[o]])==null){n=null;break e}n=r}return(e=n&&n[e])!=null?e:t}function sf(){throw Error("Invalid UTF8")}function M8(e,t){return t=String.fromCharCode.apply(null,t),e==null?t:e+t}var Qw,vO,D0e=typeof TextDecoder<"u",N0e,A0e=typeof TextEncoder<"u";function qG(e){if(A0e)e=(N0e||=new TextEncoder).encode(e);else{let n=0,r=new Uint8Array(3*e.length);for(let o=0;o<e.length;o++){var t=e.charCodeAt(o);if(t<128)r[n++]=t;else{if(t<2048)r[n++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&o<e.length){let i=e.charCodeAt(++o);if(i>=56320&&i<=57343){t=1024*(t-55296)+i-56320+65536,r[n++]=t>>18|240,r[n++]=t>>12&63|128,r[n++]=t>>6&63|128,r[n++]=63&t|128;continue}o--}t=65533}r[n++]=t>>12|224,r[n++]=t>>6&63|128}r[n++]=63&t|128}}e=n===r.length?r:r.subarray(0,n)}return e}var Rv,KG=RO(610401301,!1),R0e=RO(653718497,RO(1,!0)),F8=df.navigator;function kO(e){return!!KG&&!!Rv&&Rv.brands.some(({brand:t})=>t&&t.indexOf(e)!=-1)}function Xs(e){var t;return(t=df.navigator)&&(t=t.userAgent)||(t=""),t.indexOf(e)!=-1}function Dl(){return!!KG&&!!Rv&&Rv.brands.length>0}function xO(){return Dl()?kO("Chromium"):(Xs("Chrome")||Xs("CriOS"))&&!(!Dl()&&Xs("Edge"))||Xs("Silk")}function QO(e){return QO[" "](e),e}Rv=F8&&F8.userAgentData||null,QO[" "]=function(){};var k0e=!Dl()&&(Xs("Trident")||Xs("MSIE"));!Xs("Android")||xO(),xO(),Xs("Safari")&&(xO()||!Dl()&&Xs("Coast")||!Dl()&&Xs("Opera")||!Dl()&&Xs("Edge")||(Dl()?kO("Microsoft Edge"):Xs("Edg/"))||Dl()&&kO("Opera"));var XG={},Tv=null;function O0e(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):"=.".indexOf(e[t-1])!=-1&&(n="=.".indexOf(e[t-2])!=-1?n-2:n-1);var r=new Uint8Array(n),o=0;return function(i,s){function a(m){for(;u<i.length;){var v=i.charAt(u++),x=Tv[v];if(x!=null)return x;if(!/^[\s\xa0]*$/.test(v))throw Error("Unknown base64 encoding at char: "+v)}return m}YG();for(var u=0;;){var c=a(-1),d=a(0),f=a(64),h=a(64);if(h===64&&c===-1)break;s(c<<2|d>>4),f!=64&&(s(d<<4&240|f>>2),h!=64&&s(f<<6&192|h))}}(e,function(i){r[o++]=i}),o!==n?r.subarray(0,o):r}function YG(){if(!Tv){Tv={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++){var r=e.concat(t[n].split(""));XG[n]=r;for(var o=0;o<r.length;o++){var i=r[o];Tv[i]===void 0&&(Tv[i]=o)}}}}var ZG=typeof Uint8Array<"u",QG=!k0e&&typeof btoa=="function";function P8(e){if(!QG){var t;t===void 0&&(t=0),YG(),t=XG[t];var n=Array(Math.floor(e.length/3)),r=t[64]||"";let u=0,c=0;for(;u<e.length-2;u+=3){var o=e[u],i=e[u+1],s=e[u+2],a=t[o>>2];o=t[(3&o)<<4|i>>4],i=t[(15&i)<<2|s>>6],s=t[63&s],n[c++]=a+o+i+s}switch(a=0,s=r,e.length-u){case 2:s=t[(15&(a=e[u+1]))<<2]||r;case 1:e=e[u],n[c]=t[e>>2]+t[(3&e)<<4|a>>4]+s+r}return n.join("")}for(t="",n=0,r=e.length-10240;n<r;)t+=String.fromCharCode.apply(null,e.subarray(n,n+=10240));return t+=String.fromCharCode.apply(null,n?e.subarray(n):e),btoa(t)}var $8=/[-_.]/g,M0e={"-":"+",_:"/",".":"="};function F0e(e){return M0e[e]||""}function JG(e){if(!QG)return O0e(e);$8.test(e)&&(e=e.replace($8,F0e)),e=atob(e);let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function $v(e){return ZG&&e!=null&&e instanceof Uint8Array}var $h={},P0e;function ej(e){if(e!==$h)throw Error("illegal external caller")}function ff(){return P0e||=new gc(null,$h)}function JO(e){ej($h);var t=e.g;return(t=t==null||$v(t)?t:typeof t=="string"?JG(t):null)==null?t:e.g=t}var gc=class{constructor(e,t){if(ej(t),this.g=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}h(){return new Uint8Array(JO(this)||0)}};function tj(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}var $0e;function Lv(){let e=Error();tj(e,"incident"),function(t){df.setTimeout(()=>{throw t},0)}(e)}function OO(e){return tj(e=Error(e),"warning"),e}function eM(){return typeof BigInt=="function"}function bs(e){return Array.prototype.slice.call(e)}var Wh=typeof Symbol=="function"&&typeof Symbol()=="symbol";function Vv(e){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():e}var Bv=Vv(),L8=Vv("0di"),bO=Vv("2ex"),bv=Vv("1oa"),V8=Vv("0dg"),EE=Wh?(e,t)=>{e[Bv]|=t}:(e,t)=>{e.G!==void 0?e.G|=t:Object.defineProperties(e,{G:{value:t,configurable:!0,writable:!0,enumerable:!1}})},cE=Wh?(e,t)=>{e[Bv]&=~t}:(e,t)=>{e.G!==void 0&&(e.G&=~t)},rr=Wh?e=>0|e[Bv]:e=>0|e.G,mn=Wh?e=>e[Bv]:e=>e.G,nr=Wh?(e,t)=>{e[Bv]=t}:(e,t)=>{e.G!==void 0?e.G=t:Object.defineProperties(e,{G:{value:t,configurable:!0,writable:!0,enumerable:!1}})};function hf(e){return EE(e,34),e}function L0e(e,t){nr(t,-30975&(0|e))}function MO(e,t){nr(t,-30941&(34|e))}var tM,Uv={},nj={};function B8(e){return!(!e||typeof e!="object"||e.Ja!==nj)}function CE(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function nM(e,t,n){if(e!=null){if(typeof e=="string")e=e?new gc(e,$h):ff();else if(e.constructor!==gc)if($v(e))e=e.length?new gc(n?e:new Uint8Array(e),$h):ff();else{if(!t)throw Error();e=void 0}}return e}function lE(e){return!(!Array.isArray(e)||e.length)&&!!(1&rr(e))}var U8=[];function vc(e){if(2&e)throw Error()}nr(U8,55),tM=Object.freeze(U8);var dE=class e{constructor(t,n,r){this.l=0,this.g=t,this.h=n,this.m=r}next(){if(this.l<this.g.length){let t=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,t):t}}return{done:!0,value:void 0}}[Symbol.iterator](){return new e(this.g,this.h,this.m)}},Al;function rj(e,t){(t=Al?t[Al]:void 0)&&(e[Al]=bs(t))}var V0e=Object.freeze({}),B0e=Object.freeze({}),U0e=Object.freeze({});function TE(e){return e.Qa=!0,e}var G0e=TE(e=>typeof e=="number"),G8=TE(e=>typeof e=="string"),j0e=TE(e=>typeof e=="boolean"),_E=typeof df.BigInt=="function"&&typeof df.BigInt(0)=="bigint",FO=TE(e=>_E?e>=H0e&&e<=q0e:e[0]==="-"?j8(e,z0e):j8(e,W0e)),z0e=Number.MIN_SAFE_INTEGER.toString(),H0e=_E?BigInt(Number.MIN_SAFE_INTEGER):void 0,W0e=Number.MAX_SAFE_INTEGER.toString(),q0e=_E?BigInt(Number.MAX_SAFE_INTEGER):void 0;function j8(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let n=0;n<e.length;n++){let r=e[n],o=t[n];if(r>o)return!1;if(r<o)return!0}}var K0e=typeof Uint8Array.prototype.slice=="function",oj,Nn=0,hr=0;function z8(e){let t=e>>>0;Nn=t,hr=(e-t)/4294967296>>>0}function Lh(e){if(e<0){z8(-e);let[t,n]=sM(Nn,hr);Nn=t>>>0,hr=n>>>0}else z8(e)}function rM(e){let t=oj||=new DataView(new ArrayBuffer(8));t.setFloat32(0,+e,!0),hr=0,Nn=t.getUint32(0,!0)}function oM(e,t){return 4294967296*t+(e>>>0)}function iM(e,t){let n=2147483648&t;return n&&(t=~t>>>0,(e=1+~e>>>0)==0&&(t=t+1>>>0)),e=oM(e,t),n?-e:e}function fE(e,t){if(e>>>=0,(t>>>=0)<=2097151)var n=""+(4294967296*t+e);else eM()?n=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(n=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),n+=8147497*t,t*=2,e>=1e7&&(n+=e/1e7>>>0,e%=1e7),n>=1e7&&(t+=n/1e7>>>0,n%=1e7),n=t+H8(n)+H8(e));return n}function H8(e){return e=String(e),"0000000".slice(e.length)+e}function IE(e){if(e.length<16)Lh(Number(e));else if(eM())e=BigInt(e),Nn=Number(e&BigInt(4294967295))>>>0,hr=Number(e>>BigInt(32)&BigInt(4294967295));else{let t=+(e[0]==="-");hr=Nn=0;let n=e.length;for(let r=t,o=(n-t)%6+t;o<=n;r=o,o+=6){let i=Number(e.slice(r,o));hr*=1e6,Nn=1e6*Nn+i,Nn>=4294967296&&(hr+=Math.trunc(Nn/4294967296),hr>>>=0,Nn>>>=0)}if(t){let[r,o]=sM(Nn,hr);Nn=r,hr=o}}}function sM(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function Ll(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function ij(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}var X0e=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function SE(e){let t=typeof e;switch(t){case"bigint":return!0;case"number":return Number.isFinite(e)}return t==="string"&&X0e.test(e)}function qh(e){if(e==null)return e;if(typeof e=="string"){if(!e)return;e=+e}return typeof e=="number"&&Number.isFinite(e)?0|e:void 0}function Y0e(e){if(e==null)return e;if(typeof e=="string"){if(!e)return;e=+e}return typeof e=="number"&&Number.isFinite(e)?e>>>0:void 0}function W8(e){return e[0]!=="-"&&(e.length<20||e.length===20&&Number(e.substring(0,6))<184467)}function aM(e){return e=Math.trunc(e),Number.isSafeInteger(e)||(Lh(e),e=iM(Nn,hr)),e}function uM(e){var t=Math.trunc(Number(e));if(Number.isSafeInteger(t))return String(t);if((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),!(e[0]==="-"?e.length<20||e.length===20&&Number(e.substring(0,7))>-922337:e.length<19||e.length===19&&Number(e.substring(0,6))<922337))if(IE(e),e=Nn,2147483648&(t=hr))if(eM())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{let[n,r]=sM(e,t);e="-"+fE(n,r)}else e=fE(e,t);return e}function pE(e){return e==null?e:typeof e=="bigint"?(FO(e)?e=Number(e):(e=BigInt.asIntN(64,e),e=FO(e)?Number(e):String(e)),e):SE(e)?typeof e=="number"?aM(e):uM(e):void 0}function Z0e(e){if(e==null)return e;var t=typeof e;if(t==="bigint")return String(BigInt.asUintN(64,e));if(SE(e)){if(t==="string")return t=Math.trunc(Number(e)),Number.isSafeInteger(t)&&t>=0?e=String(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),W8(e)||(IE(e),e=fE(Nn,hr))),e;if(t==="number")return(e=Math.trunc(e))>=0&&Number.isSafeInteger(e)?e:function(n){if(n<0){Lh(n);let r=fE(Nn,hr);return n=Number(r),Number.isSafeInteger(n)?n:r}return W8(String(n))?n:(Lh(n),oM(Nn,hr))}(e)}}function sj(e){if(typeof e!="string")throw Error();return e}function Kh(e){if(e!=null&&typeof e!="string")throw Error();return e}function Rl(e){return e==null||typeof e=="string"?e:void 0}function cM(e,t,n,r){if(e!=null&&typeof e=="object"&&e.X===Uv)return e;if(!Array.isArray(e))return n?2&r?(e=t[L8])?t=e:(hf((e=new t).u),t=t[L8]=e):t=new t:t=void 0,t;let o=n=rr(e);return o===0&&(o|=32&r),o|=2&r,o!==n&&nr(e,o),new t(e)}function Q0e(e,t,n){if(t)e:{if(!SE(t=e))throw OO("int64");switch(typeof t){case"string":t=uM(t);break e;case"bigint":if(e=t=BigInt.asIntN(64,t),G8(e)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(e))throw Error(String(e))}else if(G0e(e)&&!Number.isSafeInteger(e))throw Error(String(e));t=_E?BigInt(t):j0e(t)?t?"1":"0":G8(t)?t.trim()||"0":String(t);break e;default:t=aM(t)}}else t=pE(e);return typeof(n=(e=t)==null?n?0:void 0:e)=="string"&&(t=+n,Number.isSafeInteger(t))?t:n}function aj(e){if(wv===void 0&&(wv=typeof Proxy=="function"?dj(Proxy):null),!wv||!lj())return e;let t=Vh?.get(e);return t||(Math.random()>.01?e:(function(n){if(wO===void 0){let r=new wv([],{});wO=Array.prototype.concat.call([],r).length===1}wO&&typeof Symbol=="function"&&Symbol.isConcatSpreadable&&(n[Symbol.isConcatSpreadable]=!0)}(e),t=new wv(e,{set:(n,r,o)=>(Lv(),n[r]=o,!0)}),function(n,r){(Vh||=new cf).set(n,r),(uj||=new cf).set(r,n)}(e,t),t))}var Vh,uj,wv,cf,wO,kv,hE,cj,J0e;function lj(){return cf===void 0&&(cf=typeof WeakMap=="function"?dj(WeakMap):null),cf}function dj(e){try{return e.toString().indexOf("[native code]")!==-1?e:null}catch{return null}}function lM(e,t,n){if(lj()){if(kv?.get(t)?.get(e)){if(n)return}else if(Math.random()>.01)return;var r=e.length;n={length:r};for(var o=0;o<Math.min(r,10);o++){if(r<=10)var i=o;else{i=r/10;let s=Math.floor(o*i);i=s+Math.floor(Math.random()*(Math.floor((o+1)*i)-s))}n[i]=e[i]}fj(e,n)?((o=(r=kv||=new cf).get(t))||(o=new cf,r.set(t,o)),o.set(e,n)):(Lv(),Ov(e,t))}}function mE(e,t){let n=kv?.get(t)?.get(e);n&&!fj(e,n)&&(Lv(),Ov(e,t))}function fj(e,t){if(e.length!==t.length)return!1;for(let o in t){var n,r=Number(o);if((n=Number.isInteger(r))&&(n=e[r],r=t[r],n=!(Number.isNaN(n)?Number.isNaN(r):n===r)),n)return!1}return!0}function DE(e){if(e&&kv?.has(e)){var t=e.u;if(t)for(let n=0;n<t.length;n++){let r=t[n];if(n===t.length-1&&CE(r))for(let o in r){let i=r[o];Array.isArray(i)&&mE(i,e)}else Array.isArray(r)&&mE(r,e)}}}function Ov(e,t){kv?.get(t)?.delete(e)}function kl(e,t,n){return e=pj(e,t[0],t[1],n?1:2),t!==cj&&n&&EE(e,16384),e}function pj(e,t,n,r){if(r=r??0,e==null&&(e=hE),hE=void 0,e==null){var o=96;n?(e=[n],o|=512):e=[],t&&(o=-33521665&o|(1023&t)<<15)}else{if(!Array.isArray(e))throw Error("narr");if(2048&(o=rr(e)))throw Error("farr");if(64&o)return e;if(r===1||r===2||(o|=64),n&&(o|=512,n!==e[0]))throw Error("mid");e:{if(r=(n=e).length){let i=r-1;if(CE(n[i])){if((t=i-(+!!(512&(o|=256))-1))>=1024)throw Error("pvtlmt");o=-33521665&o|(1023&t)<<15;break e}}if(t){if((t=Math.max(t,r-(+!!(512&o)-1)))>1024)throw Error("spvt");o=-33521665&o|(1023&t)<<15}}}return nr(e,o),e}var exe={},txe=function(){try{return QO(new class extends Map{constructor(){super()}}),!1}catch{return!0}}(),Iv=class{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,n){return this.g.set(t,n),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,n){return this.g.forEach(t,n)}[Symbol.iterator](){return this.entries()}},nxe=txe?(Object.setPrototypeOf(Iv.prototype,Map.prototype),Object.defineProperties(Iv.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),Iv):class extends Map{constructor(){super()}};function q8(e){return e}function EO(e){if(2&e.M)throw Error("Cannot mutate an immutable Map")}var Zs=class extends nxe{constructor(e,t,n=q8,r=q8){super();let o=rr(e);o|=64,nr(e,o),this.M=o,this.T=t,this.S=n,this.Z=this.T?rxe:r;for(let i=0;i<e.length;i++){let s=e[i],a=n(s[0],!1,!0),u=s[1];t?u===void 0&&(u=null):u=r(s[1],!1,!0,void 0,void 0,o),super.set(a,u)}}pa(e=K8){if(this.size!==0)return this.Y(e)}Y(e=K8){let t=[],n=super.entries();for(var r;!(r=n.next()).done;)(r=r.value)[0]=e(r[0]),r[1]=e(r[1]),t.push(r);return t}clear(){EO(this),super.clear()}delete(e){return EO(this),super.delete(this.S(e,!0,!1))}entries(){var e=this.oa();return new dE(e,oxe,this)}keys(){return this.Ia()}values(){var e=this.oa();return new dE(e,Zs.prototype.get,this)}forEach(e,t){super.forEach((n,r)=>{e.call(t,this.get(r),r,this)})}set(e,t){return EO(this),(e=this.S(e,!0,!1))==null?this:t==null?(super.delete(e),this):super.set(e,this.Z(t,!0,!0,this.T,!1,this.M))}Oa(e){let t=this.S(e[0],!1,!0);e=e[1],e=this.T?e===void 0?null:e:this.Z(e,!1,!0,void 0,!1,this.M),super.set(t,e)}has(e){return super.has(this.S(e,!1,!1))}get(e){e=this.S(e,!1,!1);let t=super.get(e);if(t!==void 0){var n=this.T;return n?((n=this.Z(t,!1,!0,n,this.ta,this.M))!==t&&super.set(e,n),n):t}}oa(){return Array.from(super.keys())}Ia(){return super.keys()}[Symbol.iterator](){return this.entries()}};function rxe(e,t,n,r,o,i){return e=cM(e,r,n,i),o&&(e=AE(e)),e}function K8(e){return e}function oxe(e){return[e,this.get(e)]}var ixe;function X8(){return ixe||=new Zs(hf([]),void 0,void 0,void 0,exe)}function dM(e,t,n,r,o){if(e!=null){if(Array.isArray(e))e=lE(e)?void 0:o&&2&rr(e)?e:NE(e,t,n,r!==void 0,o);else if(CE(e)){let i={};for(let s in e)i[s]=dM(e[s],t,n,r,o);e=i}else e=t(e,r);return e}}function NE(e,t,n,r,o){let i=r||n?rr(e):0;r=r?!!(32&i):void 0;let s=bs(e);for(let a=0;a<s.length;a++)s[a]=dM(s[a],t,n,r,o);return n&&(rj(s,e),n(i,s)),s}function sxe(e){return dM(e,fM,void 0,void 0,!1)}function fM(e){return e.X===Uv?e.toJSON():e instanceof Zs?e.pa(sxe):function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"bigint":return FO(t)?Number(t):String(t);case"boolean":return t?1:0;case"object":if(t)if(Array.isArray(t)){if(lE(t))return}else{if($v(t))return P8(t);if(t instanceof gc){let n=t.g;return n==null?"":typeof n=="string"?n:t.g=P8(n)}if(t instanceof Zs)return t.pa()}}return t}(e)}function PO(e,t,n=MO){if(e!=null){if(ZG&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var r=rr(e);return 2&r?e:(t&&=r===0||!!(32&r)&&!(64&r||!(16&r)),t?(nr(e,-12293&(34|r)),e):NE(e,PO,4&r?MO:n,!0,!0))}return e.X===Uv?(n=e.u,e=2&(r=mn(n))?e:pM(e,n,r,!0)):e instanceof Zs&&!(2&e.M)&&(n=hf(e.Y(PO)),e=new Zs(n,e.T,e.S,e.Z)),e}}function pM(e,t,n,r){return DE(e),e=e.constructor,hE=t=hj(t,n,r),t=new e(t),hE=void 0,t}function hj(e,t,n){let r=n||2&t?MO:L0e,o=!!(32&t);return e=function(i,s,a){let u=bs(i);var c=u.length;let d=256&s?u[c-1]:void 0;for(c+=d?-1:0,s=512&s?1:0;s<c;s++)u[s]=a(u[s]);if(d){s=u[s]={};for(let f in d)s[f]=a(d[f])}return rj(u,i),u}(e,t,i=>PO(i,o,r)),EE(e,32|(n?2:0)),e}function AE(e){let t=e.u,n=mn(t);return 2&n?pM(e,t,n,!1):e}function mj(e,t,n,r){return!(4&t)||n!=null&&(!r&&n===0&&(4096&t||8192&t)&&(e.constructor[V8]=1+(0|e.constructor[V8]))<5&&Lv(),n!==0&&!(n&t))}function Ol(e,t){return bu(e=e.u,mn(e),t)}function Y8(e,t,n,r){if(!((t=r+(+!!(512&t)-1))<0||t>=e.length||t>=n))return e[t]}function bu(e,t,n,r){if(n===-1)return null;let o=t>>15&1023||536870912;if(!(n>=o)){var i=e.length;return r&&256&t&&(r=e[i-1][n])!=null?(Y8(e,t,o,n)&&bO!=null&&((t=(e=$0e??={})[bO]||0)>=4||(e[bO]=t+1,Lv())),r):Y8(e,t,o,n)}return 256&t?e[e.length-1][n]:void 0}function Fn(e,t,n){let r=e.u,o=mn(r);return vc(o),Kn(r,o,t,n),e}function Kn(e,t,n,r){let o=t>>15&1023||536870912;if(n>=o){let i,s=t;if(256&t)i=e[e.length-1];else{if(r==null)return s;i=e[o+(+!!(512&t)-1)]={},s|=256}return i[n]=r,n<o&&(e[n+(+!!(512&t)-1)]=void 0),s!==t&&nr(e,s),s}return e[n+(+!!(512&t)-1)]=r,256&t&&n in(e=e[e.length-1])&&delete e[n],t}function Xh(e,t,n,r,o){var i=2&t;o=bu(e,t,n,o),Array.isArray(o)||(o=tM);let s=!(2&r);r=!(1&r);let a=!!(32&t),u=rr(o);return u!==0||!a||i||s?1&u||(u|=1,nr(o,u)):(u|=33,nr(o,u)),i?(e=!1,2&u||(hf(o),e=!!(4&u)),(r||e)&&Object.freeze(o)):(i=!!(2&u)||!!(2048&u),r&&i?(o=bs(o),i=1,a&&!s&&(i|=32),nr(o,i),Kn(e,t,n,o)):s&&32&u&&!i&&cE(o,32)),o}function rE(e,t){e=e.u;let n=mn(e),r=bu(e,n,t),o=Ll(r);return o!=null&&o!==r&&Kn(e,n,t,o),o}function gj(e){e=e.u;let t=mn(e),n=bu(e,t,1),r=nM(n,!0,!!(34&t));return r!=null&&r!==n&&Kn(e,t,1,r),r}function af(){return V0e===void 0?2:5}function uf(e,t,n,r,o,i){let s=e.u,a=mn(s);r=2&a?1:r,i=!!i,o=yj(s,a,t,o);var u=rr(o),c=o;if(mE(c,e),r!==2&&r!==1||Ov(c,e),mj(e,u,void 0,i)){4&u&&(o=bs(o),u=pf(u,a),a=Kn(s,a,t,o));let f=c=0;for(;c<o.length;c++){let h=n(o[c]);h!=null&&(o[f++]=h)}f<c&&(o.length=f),u=-4097&(20|(u=vj(u,a))),nr(o,u&=-8193),2&u&&Object.freeze(o)}let d;return r===1||r===4&&32&u?hc(u)||(e=u,(u|=2)!==e&&nr(o,u),Object.freeze(o)):(n=r===5&&(!!(32&u)||hc(u)||!!Vh?.get(o)),(r===2||n)&&hc(u)&&(o=bs(o),u=Bh(u=pf(u,a),a,i),nr(o,u),a=Kn(s,a,t,o)),hc(u)||(t=u,(u=Bh(u,a,i))!==t&&nr(o,u)),n?(d=aj(o),lM(o,e,!0)):r!==2||i||Vh?.delete(o)),d||o}function yj(e,t,n,r){return e=bu(e,t,n,r),Array.isArray(e)?e:tM}function vj(e,t){return e===0&&(e=pf(e,t)),1|e}function hc(e){return!!(2&e)&&!!(4&e)||!!(2048&e)}function xj(e){e=bs(e);for(let t=0;t<e.length;t++){let n=e[t]=bs(e[t]);Array.isArray(n[1])&&(n[1]=hf(n[1]))}return e}function $O(e,t,n,r){e=e.u;let o=mn(e);vc(o),Kn(e,o,t,(r==="0"?Number(n)===0:n===r)?void 0:n)}function CO(e,t){var n=az;return mM(hM(e=e.u),e,mn(e),n)===t?t:-1}function hM(e){if(Wh)return e[bv]??(e[bv]=new Map);if(bv in e)return e[bv];let t=new Map;return Object.defineProperty(e,bv,{value:t}),t}function bj(e,t,n,r){let o=hM(e),i=mM(o,e,t,n);return i!==r&&(i&&(t=Kn(e,t,i)),o.set(n,r)),t}function mM(e,t,n,r){let o=e.get(r);if(o!=null)return o;o=0;for(let i=0;i<r.length;i++){let s=r[i];bu(t,n,s)!=null&&(o!==0&&(n=Kn(t,n,o)),o=s)}return e.set(r,o),o}function gM(e,t,n,r){let o,i=mn(e);if((r=bu(e,i,n,r))!=null&&r.X===Uv)return(t=AE(r))!==r&&Kn(e,i,n,t),t.u;if(Array.isArray(r)){let s=rr(r);o=2&s?kl(hj(r,s,!1),t,!0):64&s?r:kl(o,t,!0)}else o=kl(void 0,t,!0);return o!==r&&Kn(e,i,n,o),o}function wj(e,t,n,r){e=e.u;let o=mn(e);return(t=cM(r=bu(e,o,n,r),t,!1,o))!==r&&t!=null&&Kn(e,o,n,t),t}function Xt(e,t,n,r=!1){if((t=wj(e,t,n,r))==null)return t;if(e=e.u,!(2&(r=mn(e)))){let o=AE(t);o!==t&&Kn(e,r,n,t=o)}return t}function Ej(e,t,n,r,o,i,s){let a=e.u;var u=!!(2&t);o=u?1:o,i=!!i,s&&=!u,u=yj(a,t,r);var c=rr(u),d=u;if(mE(d,e),o!==2&&o!==1||Ov(d,e),!(d=!!(4&c))){var f=u,h=t;let v=!!(2&(c=vj(c,t)));v&&(h|=2);let x=!v,b=!0,C=0,S=0;for(;C<f.length;C++){let O=cM(f[C],n,!1,h);if(O instanceof n){if(!v){let F=!!(2&rr(O.u));x&&=!F,b&&=F}f[S++]=O}}S<C&&(f.length=S),c|=4,c=b?16|c:-17&c,nr(f,c=x?8|c:-9&c),v&&Object.freeze(f)}if(s&&!(8&c||!u.length&&(o===1||o===4&&32&c))){for(hc(c)?(u=bs(u),c=pf(c,t),t=Kn(a,t,r,u)):Ov(u,e),n=u,s=c,f=0;f<n.length;f++)(c=n[f])!==(h=AE(c))&&(n[f]=h);s|=8,s=n.length?-17&s:16|s,nr(n,s),c=s}let m;return o===1||o===4&&32&c?hc(c)||(e=c,(c|=!u.length||16&c&&(!d||32&c)?2:2048)!==e&&nr(u,c),Object.freeze(u)):(d=o===5&&(!!(32&c)||hc(c)||!!Vh?.get(u)),(o===2||d)&&hc(c)&&(u=bs(u),c=Bh(c=pf(c,t),t,i),nr(u,c),t=Kn(a,t,r,u)),hc(c)||(r=c,(c=Bh(c,t,i))!==r&&nr(u,c)),d?(m=aj(u),lM(u,e,!0)):o!==2||i||Vh?.delete(u)),m||u}function yc(e,t,n){let r=mn(e.u);return Ej(e,r,t,n,af(),!1,!(2&r))}function Xe(e,t,n,r){return r==null&&(r=void 0),Fn(e,n,r)}function Sv(e,t,n,r){r==null&&(r=void 0);e:{e=e.u;let o=mn(e);if(vc(o),r==null){let i=hM(e);if(mM(i,e,o,n)!==t)break e;i.set(n,0)}else o=bj(e,o,n,t);Kn(e,o,t,r)}}function pf(e,t){return-2049&(e=32|(2&t?2|e:-3&e))}function Bh(e,t,n){return 32&t&&n||(e&=-33),e}function gE(e,t,n,r){let o=mn(e.u);vc(o),e=Ej(e,o,n,t,2,!0),r=r??new n,e.push(r),2&rr(r.u)?cE(e,8):cE(e,16)}function Da(e,t){return e??t}function Ys(e,t){return qh(Ol(e,t))}function Cr(e,t){return Da(rE(e,t),0)}function vu(e,t){return Da(Rl(Ol(e,t)),"")}function Mv(e,t,n){if(n!=null&&typeof n!="boolean")throw e=typeof n,Error(`Expected boolean but got ${e!="object"?e:n?Array.isArray(n)?"array":e:"null"}: ${n}`);Fn(e,t,n)}function xu(e,t,n){if(n!=null){if(typeof n!="number"||!Number.isFinite(n))throw OO("int32");n|=0}Fn(e,t,n)}function Ue(e,t,n){if(n!=null&&typeof n!="number")throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);Fn(e,t,n)}function yE(e,t,n){{let a=e.u,u=mn(a);if(vc(u),n==null)Kn(a,u,t);else{n=uj?.get(n)||n;var r,o=rr(n),i=o,s=!!(2&o)||Object.isFrozen(n);if((r=!s)&&((r=U0e===void 0)||(r=!!R0e&&B0e!==void 0)),mj(e,o)){o=21,s&&(n=bs(n),i=0,o=Bh(o=pf(o,u),u,!0));for(let c=0;c<n.length;c++)n[c]=sj(n[c])}r?(n=bs(n),i=0,o=Bh(o=pf(o,u),u,!0)):s||lM(n,e),o!==i&&nr(n,o),Kn(a,u,t,n)}}}function RE(e,t,n){vc(mn(e.u)),uf(e,t,Rl,2,void 0,!0).push(sj(n))}function Cj(e,t){return Error(`Invalid wire type: ${e} (at position ${t})`)}function yM(){return Error("Failed to read varint, encoding is invalid.")}function Tj(e,t){return Error(`Tried to read past the end of the data ${t} > ${e}`)}function vM(e){if(typeof e=="string")return{buffer:JG(e),O:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),O:!1};if(e.constructor===Uint8Array)return{buffer:e,O:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),O:!1};if(e.constructor===gc)return{buffer:JO(e)||new Uint8Array(0),O:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),O:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function xM(e,t){let n,r=0,o=0,i=0,s=e.h,a=e.g;do n=s[a++],r|=(127&n)<<i,i+=7;while(i<32&&128&n);for(i>32&&(o|=(127&n)>>4),i=3;i<32&&128&n;i+=7)n=s[a++],o|=(127&n)<<i;if(lf(e,a),n<128)return t(r>>>0,o>>>0);throw yM()}function bM(e){let t=0,n=e.g,r=n+10,o=e.h;for(;n<r;){let i=o[n++];if(t|=i,(128&i)==0)return lf(e,n),!!(127&t)}throw yM()}function Ml(e){let t=e.h,n=e.g,r=t[n++],o=127&r;if(128&r&&(r=t[n++],o|=(127&r)<<7,128&r&&(r=t[n++],o|=(127&r)<<14,128&r&&(r=t[n++],o|=(127&r)<<21,128&r&&(r=t[n++],o|=r<<28,128&r&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++])))))throw yM();return lf(e,n),o}function Fl(e){return Ml(e)>>>0}function LO(e){var t=e.h;let n=e.g,r=t[n],o=t[n+1],i=t[n+2];return t=t[n+3],lf(e,e.g+4),(r<<0|o<<8|i<<16|t<<24)>>>0}function VO(e){var t=LO(e);e=2*(t>>31)+1;let n=t>>>23&255;return t&=8388607,n==255?t?NaN:e*(1/0):n==0?1401298464324817e-60*e*t:e*Math.pow(2,n-150)*(t+8388608)}function axe(e){return Ml(e)}function TO(e,t,{ca:n=!1}={}){e.ca=n,t&&(t=vM(t),e.h=t.buffer,e.m=t.O,e.j=0,e.l=e.h.length,e.g=e.j)}function lf(e,t){if(e.g=t,t>e.l)throw Tj(e.l,t)}function _j(e,t){if(t<0)throw Error(`Tried to read a negative byte length: ${t}`);let n=e.g,r=n+t;if(r>e.l)throw Tj(t,e.l-n);return e.g=r,n}function Ij(e,t){if(t==0)return ff();var n=_j(e,t);return e.ca&&e.m?n=e.h.subarray(n,n+t):(e=e.h,n=n===(t=n+t)?new Uint8Array(0):K0e?e.slice(n,t):new Uint8Array(e.subarray(n,t))),n.length==0?ff():new gc(n,$h)}Zs.prototype.toJSON=void 0,Zs.prototype.Ja=nj;var Z8=[];function Sj(e){var t=e.g;if(t.g==t.l)return!1;e.l=e.g.g;var n=Fl(e.g);if(t=n>>>3,!((n&=7)>=0&&n<=5))throw Cj(n,e.l);if(t<1)throw Error(`Invalid field number: ${t} (at position ${e.l})`);return e.m=t,e.h=n,!0}function oE(e){switch(e.h){case 0:e.h!=0?oE(e):bM(e.g);break;case 1:lf(e=e.g,e.g+8);break;case 2:if(e.h!=2)oE(e);else{var t=Fl(e.g);lf(e=e.g,e.g+t)}break;case 5:lf(e=e.g,e.g+4);break;case 3:for(t=e.m;;){if(!Sj(e))throw Error("Unmatched start-group tag: stream EOF");if(e.h==4){if(e.m!=t)throw Error("Unmatched end-group tag");break}oE(e)}break;default:throw Cj(e.h,e.l)}}function Gv(e,t,n){let r=e.g.l,o=Fl(e.g),i=e.g.g+o,s=i-r;if(s<=0&&(e.g.l=i,n(t,e,void 0,void 0,void 0),s=i-e.g.g),s)throw Error(`Message parsing ended unexpectedly. Expected to read ${o} bytes, instead read ${o-s} bytes, either the data ended unexpectedly or the message misreported its own length`);return e.g.g=i,e.g.l=r,t}function wM(e){var t=Fl(e.g),n=_j(e=e.g,t);if(e=e.h,D0e){var r,o=e;(r=vO)||(r=vO=new TextDecoder("utf-8",{fatal:!0})),t=n+t,o=n===0&&t===o.length?o:o.subarray(n,t);try{var i=r.decode(o)}catch(a){if(Qw===void 0){try{r.decode(new Uint8Array([128]))}catch{}try{r.decode(new Uint8Array([97])),Qw=!0}catch{Qw=!1}}throw!Qw&&(vO=void 0),a}}else{t=(i=n)+t,n=[];let a,u=null;for(;i<t;){var s=e[i++];s<128?n.push(s):s<224?i>=t?sf():(a=e[i++],s<194||(192&a)!=128?(i--,sf()):n.push((31&s)<<6|63&a)):s<240?i>=t-1?sf():(a=e[i++],(192&a)!=128||s===224&&a<160||s===237&&a>=160||(192&(r=e[i++]))!=128?(i--,sf()):n.push((15&s)<<12|(63&a)<<6|63&r)):s<=244?i>=t-2?sf():(a=e[i++],(192&a)!=128||a-144+(s<<28)>>30||(192&(r=e[i++]))!=128||(192&(o=e[i++]))!=128?(i--,sf()):(s=(7&s)<<18|(63&a)<<12|(63&r)<<6|63&o,s-=65536,n.push(55296+(s>>10&1023),56320+(1023&s)))):sf(),n.length>=8192&&(u=M8(u,n),n.length=0)}i=M8(u,n)}return i}function Dj(e){let t=Fl(e.g);return Ij(e.g,t)}function kE(e,t,n){var r=Fl(e.g);for(r=e.g.g+r;e.g.g<r;)n.push(t(e.g))}var Jw=[],vE;function Aa(e,t,n){t.g?t.m(e,t.g,t.h,n,!0):t.m(e,t.h,n,!0)}var $e=class{constructor(e,t){this.u=pj(e,t)}toJSON(){return Nj(this)}l(){var e=Uxe;return e.g?e.l(this,e.g,e.h,!0):e.l(this,e.h,e.defaultValue,!0)}clone(){let e=this.u;return pM(this,e,mn(e),!1)}O(){return!!(2&rr(this.u))}};function Nj(e){DE(e),e=vE?e.u:NE(e.u,fM,void 0,void 0,!1);{var t=!vE;let c=e.length;if(c){var n=e[c-1],r=CE(n);r?c--:n=void 0;var o=e;if(r){e:{var i,s=n,a=!1;if(s)for(let d in s)isNaN(+d)?(i??={})[d]=s[d]:(r=s[d],Array.isArray(r)&&(lE(r)||B8(r)&&r.size===0)&&(r=null),r==null&&(a=!0),r!=null&&((i??={})[d]=r));if(a||(i=s),i)for(let d in i){a=i;break e}a=null}s=a==null?n!=null:a!==n}for(;c>0&&((i=o[c-1])==null||lE(i)||B8(i)&&i.size===0);c--)var u=!0;(o!==e||s||u)&&(t?(u||s||a)&&(o.length=c):o=Array.prototype.slice.call(o,0,c),a&&o.push(a)),u=o}else u=e}return u}function Q8(e){return e?/^\d+$/.test(e)?(IE(e),new BO(Nn,hr)):null:uxe||=new BO(0,0)}$e.prototype.X=Uv,$e.prototype.toString=function(){try{return vE=!0,Nj(this).toString()}finally{vE=!1}};var BO=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}},uxe;function J8(e){return e?/^-?\d+$/.test(e)?(IE(e),new UO(Nn,hr)):null:cxe||=new UO(0,0)}var UO=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}},cxe;function Fh(e,t,n){for(;n>0||t>127;)e.g.push(127&t|128),t=(t>>>7|n<<25)>>>0,n>>>=7;e.g.push(t)}function jv(e,t){for(;t>127;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function OE(e,t){if(t>=0)jv(e,t);else{for(let n=0;n<9;n++)e.g.push(127&t|128),t>>=7;e.g.push(1)}}function Fv(e,t){e.g.push(t>>>0&255),e.g.push(t>>>8&255),e.g.push(t>>>16&255),e.g.push(t>>>24&255)}function Uh(e,t){t.length!==0&&(e.l.push(t),e.h+=t.length)}function Qs(e,t,n){jv(e.g,8*t+n)}function EM(e,t){return Qs(e,t,2),t=e.g.end(),Uh(e,t),t.push(e.h),t}function CM(e,t){var n=t.pop();for(n=e.h+e.g.length()-n;n>127;)t.push(127&n|128),n>>>=7,e.h++;t.push(n),e.h++}function ME(e,t,n){Qs(e,t,2),jv(e.g,n.length),Uh(e,e.g.end()),Uh(e,n)}function xE(e,t,n,r){n!=null&&(t=EM(e,t),r(n,e),CM(e,t))}function Ra(){let e=class{constructor(){throw Error()}};return Object.setPrototypeOf(e,e.prototype),e}var TM=Ra(),Aj=Ra(),_M=Ra(),IM=Ra(),Rj=Ra(),SM=Ra(),kj=Ra(),Oj=Ra(),Yh=class{constructor(e,t,n){this.g=e,this.h=t,e=TM,this.l=!!e&&n===e||!1}};function FE(e,t){return new Yh(e,t,TM)}function Mj(e,t,n,r,o){xE(e,n,Lj(t,r),o)}var lxe=FE(function(e,t,n,r,o){return e.h===2&&(Gv(e,gM(t,r,n),o),!0)},Mj),dxe=FE(function(e,t,n,r,o){return e.h===2&&(Gv(e,gM(t,r,n,!0),o),!0)},Mj),PE=Symbol(),DM=Symbol(),eG=Symbol(),tG=Symbol(),Fj,Pj;function mf(e,t,n,r){var o=r[e];if(o)return o;(o={}).W=function(f){switch(typeof f){case"boolean":return cj||=[0,void 0,!0];case"number":return f>0?void 0:f===0?J0e||=[0,void 0]:[-f,void 0];case"string":return[0,f];case"object":return f}}(r[0]);var i=r[1];let s=1;i&&i.constructor===Object&&(o.ia=i,typeof(i=r[++s])=="function"&&(o.na=!0,Fj??=i,Pj??=r[s+1],i=r[s+=2]));let a={};for(;i&&Array.isArray(i)&&i.length&&typeof i[0]=="number"&&i[0]>0;){for(var u=0;u<i.length;u++)a[i[u]]=i;i=r[++s]}for(u=1;i!==void 0;){let f;typeof i=="number"&&(u+=i,i=r[++s]);var c=void 0;if(i instanceof Yh?f=i:(f=lxe,s--),f?.l){i=r[++s],c=r;var d=s;typeof i=="function"&&(i=i(),c[d]=i),c=i}for(d=u+1,typeof(i=r[++s])=="number"&&i<0&&(d-=i,i=r[++s]);u<d;u++){let h=a[u];c?n(o,u,f,c,h):t(o,u,f,h)}}return r[e]=o}function $j(e){return Array.isArray(e)?e[0]instanceof Yh?e:[dxe,e]:[e,void 0]}function Lj(e,t){return e instanceof $e?(DE(e),e.u):Array.isArray(e)?kl(e,t,!1):void 0}function NM(e,t,n,r){let o=n.g;e[t]=r?(i,s,a)=>o(i,s,a,r):o}function AM(e,t,n,r,o){let i=n.g,s,a;e[t]=(u,c,d)=>i(u,c,d,a||=mf(DM,NM,AM,r).W,s||=RM(r),o)}function RM(e){let t=e[eG];if(t!=null)return t;let n=mf(DM,NM,AM,e);return t=n.na?(r,o)=>Fj(r,o,n):(r,o)=>{let i=mn(r);for(;Sj(o)&&o.h!=4;){var s=o.m,a=n[s];if(a==null){var u=n.ia;u&&(u=u[s])&&(u=fxe(u))!=null&&(a=n[s]=u)}a!=null&&a(o,r,s)||(s=(a=o).l,oE(a),a.ha?a=void 0:(u=a.g.g-s,a.g.g=s,a=Ij(a.g,u)),s=r,a&&(Al||=Symbol(),(u=s[Al])?u.push(a):s[Al]=[a]))}return 16384&i&&hf(r),!0},e[eG]=t}function fxe(e){let t=(e=$j(e))[0].g;if(e=e[1]){let n=RM(e),r=mf(DM,NM,AM,e).W;return(o,i,s)=>t(o,i,s,r,n)}return t}function $E(e,t,n){e[t]=n.h}function LE(e,t,n,r){let o,i,s=n.h;e[t]=(a,u,c)=>s(a,u,c,i||=mf(PE,$E,LE,r).W,o||=Vj(r))}function Vj(e){let t=e[tG];if(!t){let n=mf(PE,$E,LE,e);t=(r,o)=>Bj(r,o,n),e[tG]=t}return t}function Bj(e,t,n){for(var r=rr(e),o=+!!(512&r)-1,i=e.length,s=512&r?1:0,a=i+(256&r?-1:0);s<a;s++){let u=e[s];if(u==null)continue;let c=s-o,d=nG(n,c);d&&d(t,u,c)}if(256&r){r=e[i-1];for(let u in r)o=+u,Number.isNaN(o)||(i=r[o])!=null&&(a=nG(n,o))&&a(t,i,o)}if(e=Al?e[Al]:void 0)for(Uh(t,t.g.end()),n=0;n<e.length;n++)Uh(t,JO(e[n])||new Uint8Array(0))}function nG(e,t){var n=e[t];if(n)return n;if((n=e.ia)&&(n=n[t])){var r=(n=$j(n))[0].h;if(n=n[1]){let o=Vj(n),i=mf(PE,$E,LE,n).W;n=e.na?Pj(i,o):(s,a,u)=>r(s,a,u,i,o)}else n=r;return e[t]=n}}function Zh(e,t){if(Array.isArray(t)){var n=rr(t);if(4&n)return t;for(var r=0,o=0;r<t.length;r++){let i=e(t[r]);i!=null&&(t[o++]=i)}return o<r&&(t.length=o),nr(t,-12289&(5|n)),2&n&&Object.freeze(t),t}}function Ai(e,t,n){return new Yh(e,t,n)}function Qh(e,t,n){return new Yh(e,t,n)}function Ri(e,t,n){Kn(e,mn(e),t,n)}var pxe=FE(function(e,t,n,r,o){return e.h===2&&(e=Gv(e,kl([void 0,void 0],r,!0),o),vc(r=mn(t)),(o=bu(t,r,n))instanceof Zs?2&o.M?((o=o.Y()).push(e),Kn(t,r,n,o)):o.Oa(e):Array.isArray(o)?(2&rr(o)&&Kn(t,r,n,o=xj(o)),o.push(e)):Kn(t,r,n,[e]),!0)},function(e,t,n,r,o){if(t instanceof Zs)t.forEach((i,s)=>{xE(e,n,kl([s,i],r,!1),o)});else if(Array.isArray(t))for(let i=0;i<t.length;i++){let s=t[i];Array.isArray(s)&&xE(e,n,kl(s,r,!1),o)}});function Uj(e,t,n){if(t=function(r){if(r==null)return r;let o=typeof r;if(o==="bigint")return String(BigInt.asIntN(64,r));if(SE(r)){if(o==="string")return uM(r);if(o==="number")return aM(r)}}(t),t!=null&&(typeof t=="string"&&J8(t),t!=null))switch(Qs(e,n,0),typeof t){case"number":e=e.g,Lh(t),Fh(e,Nn,hr);break;case"bigint":n=BigInt.asUintN(64,t),n=new UO(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),Fh(e.g,n.h,n.g);break;default:n=J8(t),Fh(e.g,n.h,n.g)}}function Gj(e,t,n){(t=qh(t))!=null&&t!=null&&(Qs(e,n,0),OE(e.g,t))}function jj(e,t,n){(t=ij(t))!=null&&(Qs(e,n,0),e.g.g.push(t?1:0))}function zj(e,t,n){(t=Rl(t))!=null&&ME(e,n,qG(t))}function Hj(e,t,n,r,o){xE(e,n,Lj(t,r),o)}function Wj(e,t,n){(t=t==null||typeof t=="string"||$v(t)||t instanceof gc?t:void 0)!=null&&ME(e,n,vM(t).buffer)}function qj(e,t,n){return(e.h===5||e.h===2)&&(t=Xh(t,mn(t),n,2,!1),e.h==2?kE(e,VO,t):t.push(VO(e.g)),!0)}var pc=Ai(function(e,t,n){if(e.h!==1)return!1;var r=e.g;e=LO(r);let o=LO(r);r=2*(o>>31)+1;let i=o>>>20&2047;return e=4294967296*(1048575&o)+e,Ri(t,n,i==2047?e?NaN:r*(1/0):i==0?5e-324*r*e:r*Math.pow(2,i-1075)*(e+4503599627370496)),!0},function(e,t,n){(t=Ll(t))!=null&&(Qs(e,n,1),e=e.g,(n=oj||=new DataView(new ArrayBuffer(8))).setFloat64(0,+t,!0),Nn=n.getUint32(0,!0),hr=n.getUint32(4,!0),Fv(e,Nn),Fv(e,hr))},Ra()),jr=Ai(function(e,t,n){return e.h===5&&(Ri(t,n,VO(e.g)),!0)},function(e,t,n){(t=Ll(t))!=null&&(Qs(e,n,5),e=e.g,rM(t),Fv(e,Nn))},SM),hxe=Qh(qj,function(e,t,n){if((t=Zh(Ll,t))!=null)for(let s=0;s<t.length;s++){var r=e,o=n,i=t[s];i!=null&&(Qs(r,o,5),r=r.g,rM(i),Fv(r,Nn))}},SM),kM=Qh(qj,function(e,t,n){if((t=Zh(Ll,t))!=null&&t.length){Qs(e,n,2),jv(e.g,4*t.length);for(let r=0;r<t.length;r++)n=e.g,rM(t[r]),Fv(n,Nn)}},SM),Pl=Ai(function(e,t,n){return e.h===0&&(Ri(t,n,xM(e.g,iM)),!0)},Uj,Rj),_O=Ai(function(e,t,n){return e.h===0&&(Ri(t,n,(e=xM(e.g,iM))===0?void 0:e),!0)},Uj,Rj),mxe=Ai(function(e,t,n){return e.h===0&&(Ri(t,n,xM(e.g,oM)),!0)},function(e,t,n){if((t=Z0e(t))!=null&&(typeof t=="string"&&Q8(t),t!=null))switch(Qs(e,n,0),typeof t){case"number":e=e.g,Lh(t),Fh(e,Nn,hr);break;case"bigint":n=BigInt.asUintN(64,t),n=new BO(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),Fh(e.g,n.h,n.g);break;default:n=Q8(t),Fh(e.g,n.h,n.g)}},Ra()),mr=Ai(function(e,t,n){return e.h===0&&(Ri(t,n,Ml(e.g)),!0)},Gj,IM),VE=Qh(function(e,t,n){return(e.h===0||e.h===2)&&(t=Xh(t,mn(t),n,2,!1),e.h==2?kE(e,Ml,t):t.push(Ml(e.g)),!0)},function(e,t,n){if((t=Zh(qh,t))!=null&&t.length){n=EM(e,n);for(let r=0;r<t.length;r++)OE(e.g,t[r]);CM(e,n)}},IM),Mh=Ai(function(e,t,n){return e.h===0&&(Ri(t,n,(e=Ml(e.g))===0?void 0:e),!0)},Gj,IM),tr=Ai(function(e,t,n){return e.h===0&&(Ri(t,n,bM(e.g)),!0)},jj,Aj),Dv=Ai(function(e,t,n){return e.h===0&&(Ri(t,n,(e=bM(e.g))===!1?void 0:e),!0)},jj,Aj),ko=Qh(function(e,t,n){if(e.h!==2)return!1;e=wM(e);let r=mn(t);return vc(r),Xh(t,r,n,2).push(e),!0},function(e,t,n){if((t=Zh(Rl,t))!=null)for(let s=0;s<t.length;s++){var r=e,o=n,i=t[s];i!=null&&ME(r,o,qG(i))}},_M),Nl=Ai(function(e,t,n){return e.h===2&&(Ri(t,n,(e=wM(e))===""?void 0:e),!0)},zj,_M),hn=Ai(function(e,t,n){return e.h===2&&(Ri(t,n,wM(e)),!0)},zj,_M),Gr=function(e,t,n=TM){return new Yh(e,t,n)}(function(e,t,n,r,o){if(e.h!==2)return!1;r=kl(void 0,r,!0);let i=mn(t);vc(i);let s=Xh(t,i,n,3);return i=mn(t),4&rr(s)&&(s=bs(s),nr(s,-2079&(1|rr(s))),Kn(t,i,n,s)),s.push(r),Gv(e,r,o),!0},function(e,t,n,r,o){if(Array.isArray(t))for(let i=0;i<t.length;i++)Hj(e,t[i],n,r,o)}),xn=FE(function(e,t,n,r,o,i){return e.h===2&&(bj(t,rr(t),i,n),Gv(e,t=gM(t,r,n),o),!0)},Hj),Kj=Ai(function(e,t,n){return e.h===2&&(Ri(t,n,Dj(e)),!0)},Wj,kj),gxe=Qh(function(e,t,n){return(e.h===0||e.h===2)&&(t=Xh(t,mn(t),n,2,!1),e.h==2?kE(e,Fl,t):t.push(Fl(e.g)),!0)},function(e,t,n){if((t=Zh(Y0e,t))!=null)for(let s=0;s<t.length;s++){var r=e,o=n,i=t[s];i!=null&&(Qs(r,o,0),jv(r.g,i))}},Ra()),Na=Ai(function(e,t,n){return e.h===0&&(Ri(t,n,Ml(e.g)),!0)},function(e,t,n){(t=qh(t))!=null&&(t=parseInt(t,10),Qs(e,n,0),OE(e.g,t))},Oj),GO=class{constructor(t,n){this.h=t,this.g=n,this.l=Xt,this.m=Xe,this.defaultValue=void 0}};function ka(e,t){return new GO(e,t)}function Vl(e,t){return(n,r)=>{if(Jw.length){let i=Jw.pop();i.o(r),TO(i.g,n,r),n=i}else n=new class{constructor(i,s){if(Z8.length){let a=Z8.pop();TO(a,i,s),i=a}else i=new class{constructor(a,u){this.h=null,this.m=!1,this.g=this.l=this.j=0,TO(this,a,u)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.ca=!1}}(i,s);this.g=i,this.l=this.g.g,this.h=this.m=-1,this.o(s)}o({ha:i=!1}={}){this.ha=i}}(n,r);try{let i=new e,s=i.u;RM(t)(s,n);var o=i}finally{n.g.clear(),n.m=-1,n.h=-1,Jw.length<100&&Jw.push(n)}return o}}function BE(e){return function(){DE(this);let t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){let s=this.g;return this.g=[],s}}}};Bj(this.u,t,mf(PE,$E,LE,e)),Uh(t,t.g.end());let n=new Uint8Array(t.h),r=t.l,o=r.length,i=0;for(let s=0;s<o;s++){let a=r[s];n.set(a,i),i+=a.length}return t.l=[n],n}}var rG=class extends $e{constructor(e){super(e)}},oG=[0,Nl,Ai(function(e,t,n){return e.h===2&&(Ri(t,n,(e=Dj(e))===ff()?void 0:e),!0)},function(e,t,n){if(t!=null){if(t instanceof $e){let r=t.Ra;return void(r&&(t=r(t),t!=null&&ME(e,n,vM(t).buffer)))}if(Array.isArray(t))return}Wj(e,t,n)},kj)],IO,iG=globalThis.trustedTypes;function sG(e){IO===void 0&&(IO=function(){let n=null;if(!iG)return n;try{let r=o=>o;n=iG.createPolicy("goog#html",{createHTML:r,createScript:r,createScriptURL:r})}catch{}return n}());var t=IO;return new class{constructor(n){this.g=n}toString(){return this.g+""}}(t?t.createScriptURL(e):e)}function yxe(e,...t){if(t.length===0)return sG(e[0]);let n=e[0];for(let r=0;r<t.length;r++)n+=encodeURIComponent(t[r])+e[r+1];return sG(n)}var Xj=[0,mr,Na,tr,-1,VE,Na,-1],vxe=class extends $e{constructor(){super()}},Yj=[0,tr,hn,tr,Na,-1,Qh(function(e,t,n){return(e.h===0||e.h===2)&&(t=Xh(t,mn(t),n,2,!1),e.h==2?kE(e,axe,t):t.push(Ml(e.g)),!0)},function(e,t,n){if((t=Zh(qh,t))!=null&&t.length){n=EM(e,n);for(let r=0;r<t.length;r++)OE(e.g,t[r]);CM(e,n)}},Oj),hn,-1,[0,tr,-1],Na,tr,-1],Zj=[0,hn,-2],aG=class extends $e{constructor(){super()}},Qj=[0],Jj=[0,mr,tr,1,tr,-3],ws=class extends $e{constructor(e){super(e,2)}},Rr={};Rr[336783863]=[0,hn,tr,-1,mr,[0,[1,2,3,4,5,6,7],xn,Qj,xn,Yj,xn,Zj,xn,Jj,xn,Xj,xn,[0,hn,-2],xn,[0,hn,Na]],[0,hn],tr,[0,[1,3],[2,4],xn,[0,VE],-1,xn,[0,ko],-1,Gr,[0,hn,-1]],hn];var uG=[0,_O,-1,Dv,-3,_O,VE,Nl,Mh,_O,-1,Dv,Mh,Dv,-2,Nl];function Es(e,t){$O(e,2,Kh(t),"")}function Pn(e,t){RE(e,3,t)}function zt(e,t){RE(e,4,t)}var ti=class extends $e{constructor(e){super(e,500)}o(e){return Xe(this,0,7,e)}},Nv=[-1,{}],cG=[0,hn,1,Nv],lG=[0,hn,ko,Nv];function Cs(e,t){gE(e,1,ti,t)}function Bn(e,t){RE(e,10,t)}function Qt(e,t){RE(e,15,t)}var ki=class extends $e{constructor(e){super(e,500)}o(e){return Xe(this,0,1001,e)}},ez=[-500,Gr,[-500,Nl,-1,ko,-3,[-2,Rr,tr],Gr,oG,Mh,-1,cG,lG,Gr,[0,Nl,Dv],Nl,uG,Mh,ko,987,ko],4,Gr,[-500,hn,-1,[-1,{}],998,hn],Gr,[-500,hn,ko,-1,[-2,{},tr],997,ko,-1],Mh,Gr,[-500,hn,ko,Nv,998,ko],ko,Mh,cG,lG,Gr,[0,Nl,-1,Nv],ko,-2,uG,Nl,-1,Dv,979,Nv,Gr,oG];ki.prototype.g=BE(ez);var xxe=Vl(ki,ez),bxe=class extends $e{constructor(e){super(e)}},tz=class extends $e{constructor(e){super(e)}g(){return yc(this,bxe,1)}},nz=[0,Gr,[0,mr,jr,hn,-1]],UE=Vl(tz,nz),wxe=class extends $e{constructor(e){super(e)}},Exe=class extends $e{constructor(e){super(e)}},SO=class extends $e{constructor(e){super(e)}h(){return Xt(this,wxe,2)}g(){return yc(this,Exe,5)}},rz=Vl(class extends $e{constructor(e){super(e)}},[0,ko,VE,kM,[0,Na,[0,mr,-3],[0,jr,-3],[0,mr,-1,[0,Gr,[0,mr,-2]]],Gr,[0,jr,-1,hn,jr]],hn,-1,Pl,Gr,[0,mr,jr],ko,Pl]),oz=class extends $e{constructor(e){super(e)}},Ph=Vl(class extends $e{constructor(e){super(e)}},[0,Gr,[0,jr,-4]]),iz=class extends $e{constructor(e){super(e)}},zv=Vl(class extends $e{constructor(e){super(e)}},[0,Gr,[0,jr,-4]]),Cxe=class extends $e{constructor(e){super(e)}},Txe=[0,mr,-1,kM,Na],sz=class extends $e{constructor(){super()}};sz.prototype.g=BE([0,jr,-4,Pl]);var _xe=class extends $e{constructor(e){super(e)}},Ixe=Vl(class extends $e{constructor(e){super(e)}},[0,Gr,[0,1,mr,hn,nz],Pl]),dG=class extends $e{constructor(e){super(e)}},Sxe=class extends $e{constructor(e){super(e)}qa(){let e=gj(this);return e??ff()}},Dxe=class extends $e{constructor(e){super(e)}},az=[1,2],Nxe=Vl(class extends $e{constructor(e){super(e)}},[0,Gr,[0,az,xn,[0,kM],xn,[0,Kj],mr,hn],Pl]),OM=class extends $e{constructor(e){super(e)}},uz=[0,hn,mr,jr,ko,-1],fG=class extends $e{constructor(e){super(e)}},Axe=[0,tr,-1],pG=class extends $e{constructor(e){super(e)}},iE=[1,2,3,4,5],bE=class extends $e{constructor(e){super(e)}g(){return gj(this)!=null}h(){return Rl(Ol(this,2))!=null}},Xn=class extends $e{constructor(e){super(e)}g(){return ij(Ol(this,2))??!1}},cz=[0,Kj,hn,[0,mr,Pl,-1],[0,mxe,Pl]],Tr=[0,cz,tr,[0,iE,xn,Jj,xn,Yj,xn,Xj,xn,Qj,xn,Zj],Na],GE=class extends $e{constructor(e){super(e)}},MM=[0,Tr,jr,-1,mr],Rxe=ka(502141897,GE);Rr[502141897]=MM;var kxe=Vl(class extends $e{constructor(e){super(e)}},[0,[0,Na,-1,hxe,gxe],Txe]),lz=class extends $e{constructor(e){super(e)}},dz=class extends $e{constructor(e){super(e)}},FM=[0,Tr,jr,[0,Tr],tr],fz=[0,Tr,MM,FM,jr,[0,[0,cz]]],Oxe=ka(508968150,dz);Rr[508968150]=fz,Rr[508968149]=FM;var pz=class extends $e{constructor(e){super(e)}},Mxe=ka(513916220,pz);Rr[513916220]=[0,Tr,fz,mr];var kh=class extends $e{constructor(e){super(e)}h(){return Xt(this,OM,2)}g(){Fn(this,2)}},hz=[0,Tr,uz];Rr[478825465]=hz;var Fxe=class extends $e{constructor(e){super(e)}},mz=class extends $e{constructor(e){super(e)}},PM=class extends $e{constructor(e){super(e)}},$M=class extends $e{constructor(e){super(e)}},gz=class extends $e{constructor(e){super(e)}},hG=[0,Tr,[0,Tr],hz,-1],yz=[0,Tr,jr,mr],LM=[0,Tr,jr],vz=[0,Tr,yz,LM,jr],Pxe=ka(479097054,gz);Rr[479097054]=[0,Tr,vz,hG],Rr[463370452]=hG,Rr[464864288]=yz;var $xe=ka(462713202,$M);Rr[462713202]=vz,Rr[474472470]=LM;var Lxe=class extends $e{constructor(e){super(e)}},xz=class extends $e{constructor(e){super(e)}},bz=class extends $e{constructor(e){super(e)}},wz=class extends $e{constructor(){super()}},VM=[0,Tr,jr,-1,mr],jO=[0,Tr,jr,tr];wz.prototype.g=BE([0,Tr,LM,[0,Tr],MM,FM,VM,jO]);var Ez=class extends $e{constructor(e){super(e)}},Vxe=ka(456383383,Ez);Rr[456383383]=[0,Tr,uz];var Cz=class extends $e{constructor(e){super(e)}},Bxe=ka(476348187,Cz);Rr[476348187]=[0,Tr,Axe];var Tz=class extends $e{constructor(e){super(e)}},mG=class extends $e{constructor(e){super(e)}},_z=[0,Na,-1],Uxe=ka(458105876,class extends $e{constructor(e){super(e)}g(){var e=this.u;let t=mn(e),n=2&t;return e=function(r,o,i){var s=mG;let a=2&o,u=!1;if(i==null){if(a)return X8();i=[]}else if(i.constructor===Zs){if(!(2&i.M)||a)return i;i=i.Y()}else Array.isArray(i)?u=!!(2&rr(i)):i=[];if(a){if(!i.length)return X8();u||(u=!0,hf(i))}else u&&(u=!1,i=xj(i));return u||(64&rr(i)?cE(i,32):32&o&&EE(i,32)),Kn(r,o,2,s=new Zs(i,s,Q0e,void 0)),s}(e,t,bu(e,t,2)),!n&&mG&&(e.ta=!0),e}});Rr[458105876]=[0,_z,pxe,[!0,Pl,[0,hn,-1,ko]]];var BM=class extends $e{constructor(e){super(e)}},Iz=ka(458105758,BM);Rr[458105758]=[0,Tr,hn,_z];var Sz=class extends $e{constructor(e){super(e)}},Gxe=ka(443442058,Sz);Rr[443442058]=[0,Tr,hn,mr,jr,ko,-1],Rr[514774813]=VM;var Dz=class extends $e{constructor(e){super(e)}},jxe=ka(516587230,Dz);function zO(e,t){return t=t?t.clone():new OM,e.displayNamesLocale!==void 0?Fn(t,1,Kh(e.displayNamesLocale)):e.displayNamesLocale===void 0&&Fn(t,1),e.maxResults!==void 0?xu(t,2,e.maxResults):"maxResults"in e&&Fn(t,2),e.scoreThreshold!==void 0?Ue(t,3,e.scoreThreshold):"scoreThreshold"in e&&Fn(t,3),e.categoryAllowlist!==void 0?yE(t,4,e.categoryAllowlist):"categoryAllowlist"in e&&Fn(t,4),e.categoryDenylist!==void 0?yE(t,5,e.categoryDenylist):"categoryDenylist"in e&&Fn(t,5),t}function UM(e,t=-1,n=""){return{categories:e.map(r=>({index:Da(Ys(r,1),0)??-1,score:Cr(r,2)??0,categoryName:vu(r,3)??"",displayName:vu(r,4)??""})),headIndex:t,headName:n}}function Nz(e){var t=uf(e,3,Ll,af()),n=uf(e,2,qh,af()),r=uf(e,1,Rl,af()),o=uf(e,9,Rl,af());let i={categories:[],keypoints:[]};for(let s=0;s<t.length;s++)i.categories.push({score:t[s],index:n[s]??-1,categoryName:r[s]??"",displayName:o[s]??""});if((t=Xt(e,SO,4)?.h())&&(i.boundingBox={originX:Ys(t,1)??0,originY:Ys(t,2)??0,width:Ys(t,3)??0,height:Ys(t,4)??0,angle:0}),Xt(e,SO,4)?.g().length)for(let s of Xt(e,SO,4).g())i.keypoints.push({x:rE(s,1)??0,y:rE(s,2)??0,score:rE(s,4)??0,label:Rl(Ol(s,3))??""});return i}function jE(e){let t=[];for(let n of yc(e,iz,1))t.push({x:Cr(n,1)??0,y:Cr(n,2)??0,z:Cr(n,3)??0,visibility:Cr(n,4)??0});return t}function Av(e){let t=[];for(let n of yc(e,oz,1))t.push({x:Cr(n,1)??0,y:Cr(n,2)??0,z:Cr(n,3)??0,visibility:Cr(n,4)??0});return t}function gG(e){return Array.from(e,t=>t>127?t-256:t)}function yG(e,t){if(e.length!==t.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);let n=0,r=0,o=0;for(let i=0;i<e.length;i++)n+=e[i]*t[i],r+=e[i]*e[i],o+=t[i]*t[i];if(r<=0||o<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(r*o)}var eE;Rr[516587230]=[0,Tr,VM,jO,jr],Rr[518928384]=jO;var zxe=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);function Az(){return ne(this,null,function*(){if(eE===void 0)try{yield WebAssembly.instantiate(zxe),eE=!0}catch{eE=!1}return eE})}function Ev(n){return ne(this,arguments,function*(e,t=yxe``){let r=(yield Az())?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${r}.js`,wasmBinaryPath:`${t}/${e}_${r}.wasm`}})}var Sl=class{};function Rz(){var e=navigator;return typeof OffscreenCanvas<"u"&&(!function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")}(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}function vG(e){return ne(this,null,function*(){if(typeof importScripts!="function"){let t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise((n,r)=>{t.addEventListener("load",()=>{n()},!1),t.addEventListener("error",o=>{r(o)},!1),document.body.appendChild(t)})}importScripts(e.toString())})}function kz(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function je(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(t=e.i.stringToNewUTF8(t)),e.i._free(t)}function xG(e,t,n){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(n?e.i._bindTextureToStream(n):e.i._bindTextureToCanvas(),!(n=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);let[r,o]=kz(t);return!e.l||r===e.i.canvas.width&&o===e.i.canvas.height||(e.i.canvas.width=r,e.i.canvas.height=o),[r,o]}function bG(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");let r=new Uint32Array(t.length);for(let o=0;o<t.length;o++)r[o]=e.i.stringToNewUTF8(t[o]);t=e.i._malloc(4*r.length),e.i.HEAPU32.set(r,t>>2),n(t);for(let o of r)e.i._free(o);e.i._free(t)}function hu(e,t,n){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=n}function Il(e,t,n){let r=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=(o,i,s)=>{i?(n(r,s),r=[]):r.push(o)}}Sl.forVisionTasks=function(e){return Ev("vision",e)},Sl.forTextTasks=function(e){return Ev("text",e)},Sl.forGenAiExperimentalTasks=function(e){return Ev("genai_experimental",e)},Sl.forGenAiTasks=function(e){return Ev("genai",e)},Sl.forAudioTasks=function(e){return Ev("audio",e)},Sl.isSimdSupported=function(){return Az()};function Hxe(e,t,n,r){return ne(this,null,function*(){return e=yield((o,i,s,a,u)=>ne(this,null,function*(){if(i&&(yield vG(i)),!self.ModuleFactory||s&&(yield vG(s),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&u&&((i=self.Module).locateFile=u.locateFile,u.mainScriptUrlOrBlob&&(i.mainScriptUrlOrBlob=u.mainScriptUrlOrBlob)),u=yield self.ModuleFactory(self.Module||u),self.ModuleFactory=self.Module=void 0,new o(u,a)}))(e,n.wasmLoaderPath,n.assetLoaderPath,t,{locateFile:o=>o.endsWith(".wasm")?n.wasmBinaryPath.toString():n.assetBinaryPath&&o.endsWith(".data")?n.assetBinaryPath.toString():o}),yield e.o(r),e})}function DO(e,t){let n=Xt(e.baseOptions,bE,1)||new bE;typeof t=="string"?(Fn(n,2,Kh(t)),Fn(n,1)):t instanceof Uint8Array&&(Fn(n,1,nM(t,!1,!1)),Fn(n,2)),Xe(e.baseOptions,0,1,n)}function wG(e){try{let t=e.H.length;if(t===1)throw Error(e.H[0].message);if(t>1)throw Error("Encountered multiple errors: "+e.H.map(n=>n.message).join(", "))}finally{e.H=[]}}function Re(e,t){e.B=Math.max(e.B,t)}function zE(e,t){e.A=new ti,Es(e.A,"PassThroughCalculator"),Pn(e.A,"free_memory"),zt(e.A,"free_memory_unused_out"),Bn(t,"free_memory"),Cs(t,e.A)}function Gh(e,t){Pn(e.A,t),zt(e.A,t+"_unused_out")}function HE(e){e.g.addBoolToStream(!0,"free_memory",e.B)}var sE=class{constructor(e){this.g=e,this.H=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(e,t=!0){if(t){let n=e.baseOptions||{};if(e.baseOptions?.modelAssetBuffer&&e.baseOptions?.modelAssetPath)throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(Xt(this.baseOptions,bE,1)?.g()||Xt(this.baseOptions,bE,1)?.h()||e.baseOptions?.modelAssetBuffer||e.baseOptions?.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(r,o){let i=Xt(r.baseOptions,pG,3);if(!i){var s=i=new pG,a=new aG;Sv(s,4,iE,a)}"delegate"in o&&(o.delegate==="GPU"?(o=i,s=new vxe,Sv(o,2,iE,s)):(o=i,s=new aG,Sv(o,4,iE,s))),Xe(r.baseOptions,0,3,i)}(this,n),n.modelAssetPath)return fetch(n.modelAssetPath.toString()).then(r=>{if(r.ok)return r.arrayBuffer();throw Error(`Failed to fetch model: ${n.modelAssetPath} (${r.status})`)}).then(r=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(r),!0,!1,!1),DO(this,"/model.dat"),this.m(),this.J()});if(n.modelAssetBuffer instanceof Uint8Array)DO(this,n.modelAssetBuffer);else if(n.modelAssetBuffer)return function(r){return ne(this,null,function*(){let o=[];for(var i=0;;){let{done:s,value:a}=yield r.read();if(s)break;o.push(a),i+=a.length}if(o.length===0)return new Uint8Array(0);if(o.length===1)return o[0];r=new Uint8Array(i),i=0;for(let s of o)r.set(s,i),i+=s.length;return r})}(n.modelAssetBuffer).then(r=>{DO(this,r),this.m(),this.J()})}return this.m(),this.J(),Promise.resolve()}J(){}ea(){let e;if(this.g.ea(t=>{e=xxe(t)}),!e)throw Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,t){this.g.attachErrorListener((n,r)=>{this.H.push(Error(r))}),this.g.Ma(),this.g.setGraph(e,t),this.A=void 0,wG(this)}finishProcessing(){this.g.finishProcessing(),wG(this)}close(){this.A=void 0,this.g.closeGraph()}};function ei(e,t){if(!e)throw Error(`Unable to obtain required WebGL resource: ${t}`);return e}sE.prototype.close=sE.prototype.close,function(e,t){e=e.split(".");var n,r=df;for((e[0]in r)||r.execScript===void 0||r.execScript("var "+e[0]);e.length&&(n=e.shift());)e.length||t===void 0?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}("TaskRunner",sE);var HO=class{constructor(t,n,r,o){this.g=t,this.h=n,this.m=r,this.l=o}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}};function EG(e,t,n){let r=e.g;if(n=ei(r.createShader(n),"Failed to create WebGL shader"),r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${r.getShaderInfoLog(n)}`);return r.attachShader(e.h,n),n}function CG(e,t){let n=e.g,r=ei(n.createVertexArray(),"Failed to create vertex array");n.bindVertexArray(r);let o=ei(n.createBuffer(),"Failed to create buffer");n.bindBuffer(n.ARRAY_BUFFER,o),n.enableVertexAttribArray(e.P),n.vertexAttribPointer(e.P,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW);let i=ei(n.createBuffer(),"Failed to create buffer");return n.bindBuffer(n.ARRAY_BUFFER,i),n.enableVertexAttribArray(e.J),n.vertexAttribPointer(e.J,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindVertexArray(null),new HO(n,r,o,i)}function GM(e,t){if(e.g){if(t!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=t}function Hv(e,t,n,r){return GM(e,t),e.h||(e.m(),e.C()),n?(e.s||(e.s=CG(e,!0)),n=e.s):(e.v||(e.v=CG(e,!1)),n=e.v),t.useProgram(e.h),n.bind(),e.l(),e=r(),n.g.bindVertexArray(null),e}function $l(e,t,n){return GM(e,t),e=ei(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n??t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n??t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),e}function WE(e,t,n){GM(e,t),e.A||(e.A=ei(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,e.A),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}function jM(e){e.g?.bindFramebuffer(e.g.FRAMEBUFFER,null)}var Jh=class{H(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){let e=this.g;if(this.h=ei(e.createProgram(),"Failed to create WebGL program"),this.ba=EG(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,e.VERTEX_SHADER),this.aa=EG(this,this.H(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);this.P=e.getAttribLocation(this.h,"aVertex"),this.J=e.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){let e=this.g;e.deleteProgram(this.h),e.deleteShader(this.ba),e.deleteShader(this.aa)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}},Wxe=class extends Jh{H(){return`
  precision mediump float;
  uniform sampler2D backgroundTexture;
  uniform sampler2D maskTexture;
  uniform sampler2D colorMappingTexture;
  varying vec2 vTex;
  void main() {
    vec4 backgroundColor = texture2D(backgroundTexture, vTex);
    float category = texture2D(maskTexture, vTex).r;
    vec4 categoryColor = texture2D(colorMappingTexture, vec2(category, 0.0));
    gl_FragColor = mix(backgroundColor, categoryColor, categoryColor.a);
  }
 `}C(){let e=this.g;e.activeTexture(e.TEXTURE1),this.B=$l(this,e,e.LINEAR),e.activeTexture(e.TEXTURE2),this.j=$l(this,e,e.NEAREST)}m(){super.m();let e=this.g;this.L=ei(e.getUniformLocation(this.h,"backgroundTexture"),"Uniform location"),this.U=ei(e.getUniformLocation(this.h,"colorMappingTexture"),"Uniform location"),this.K=ei(e.getUniformLocation(this.h,"maskTexture"),"Uniform location")}l(){super.l();let e=this.g;e.uniform1i(this.K,0),e.uniform1i(this.L,1),e.uniform1i(this.U,2)}close(){this.B&&this.g.deleteTexture(this.B),this.j&&this.g.deleteTexture(this.j),super.close()}},qxe=class extends Jh{H(){return`
  precision mediump float;
  uniform sampler2D maskTexture;
  uniform sampler2D defaultTexture;
  uniform sampler2D overlayTexture;
  varying vec2 vTex;
  void main() {
    float confidence = texture2D(maskTexture, vTex).r;
    vec4 defaultColor = texture2D(defaultTexture, vTex);
    vec4 overlayColor = texture2D(overlayTexture, vTex);
    // Apply the alpha from the overlay and merge in the default color
    overlayColor = mix(defaultColor, overlayColor, overlayColor.a);
    gl_FragColor = mix(defaultColor, overlayColor, confidence);
  }
 `}C(){let e=this.g;e.activeTexture(e.TEXTURE1),this.j=$l(this,e),e.activeTexture(e.TEXTURE2),this.B=$l(this,e)}m(){super.m();let e=this.g;this.K=ei(e.getUniformLocation(this.h,"defaultTexture"),"Uniform location"),this.L=ei(e.getUniformLocation(this.h,"overlayTexture"),"Uniform location"),this.I=ei(e.getUniformLocation(this.h,"maskTexture"),"Uniform location")}l(){super.l();let e=this.g;e.uniform1i(this.I,0),e.uniform1i(this.K,1),e.uniform1i(this.L,2)}close(){this.j&&this.g.deleteTexture(this.j),this.B&&this.g.deleteTexture(this.B),super.close()}};function mc(e,t){switch(t){case 0:return e.g.find(n=>n instanceof Uint8Array);case 1:return e.g.find(n=>n instanceof Float32Array);case 2:return e.g.find(n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture);default:throw Error(`Type is not supported: ${t}`)}}function WO(e){var t=mc(e,1);if(!t){if(t=mc(e,0))t=new Float32Array(t).map(r=>r/255);else{t=new Float32Array(e.width*e.height);let r=jh(e);var n=zM(e);if(WE(n,r,Oz(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){n=new Float32Array(e.width*e.height*4),r.readPixels(0,0,e.width,e.height,r.RGBA,r.FLOAT,n);for(let o=0,i=0;o<t.length;++o,i+=4)t[o]=n[i]}else r.readPixels(0,0,e.width,e.height,r.RED,r.FLOAT,t)}e.g.push(t)}return t}function Oz(e){let t=mc(e,2);if(!t){let n=jh(e);t=Fz(e);let r=WO(e),o=Mz(e);n.texImage2D(n.TEXTURE_2D,0,o,e.width,e.height,0,n.RED,n.FLOAT,r),qO(e)}return t}function jh(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=ei(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function Mz(e){if(e=jh(e),!tE)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))tE=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");tE=e.R16F}return tE}function zM(e){return e.l||(e.l=new Jh),e.l}function Fz(e){let t=jh(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=mc(e,2);return n||(n=$l(zM(e),t,e.m?t.LINEAR:t.NEAREST),e.g.push(n),e.j=!0),t.bindTexture(t.TEXTURE_2D,n),n}function qO(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var tE,Ur=class{constructor(e,t,n,r,o,i,s){this.g=e,this.m=t,this.j=n,this.canvas=r,this.l=o,this.width=i,this.height=s,this.j&&--TG===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Ha(){return!!mc(this,0)}la(){return!!mc(this,1)}R(){return!!mc(this,2)}ka(){return(t=mc(e=this,0))||(t=WO(e),t=new Uint8Array(t.map(n=>255*n)),e.g.push(t)),t;var e,t}ja(){return WO(this)}N(){return Oz(this)}clone(){let e=[];for(let t of this.g){let n;if(t instanceof Uint8Array)n=new Uint8Array(t);else if(t instanceof Float32Array)n=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error(`Type is not supported: ${t}`);{let r=jh(this),o=zM(this);r.activeTexture(r.TEXTURE1),n=$l(o,r,this.m?r.LINEAR:r.NEAREST),r.bindTexture(r.TEXTURE_2D,n);let i=Mz(this);r.texImage2D(r.TEXTURE_2D,0,i,this.width,this.height,0,r.RED,r.FLOAT,null),r.bindTexture(r.TEXTURE_2D,null),WE(o,r,n),Hv(o,r,!1,()=>{Fz(this),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),qO(this)}),jM(o),qO(this)}}e.push(n)}return new Ur(e,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&jh(this).deleteTexture(mc(this,2)),TG=-1}};Ur.prototype.close=Ur.prototype.close,Ur.prototype.clone=Ur.prototype.clone,Ur.prototype.getAsWebGLTexture=Ur.prototype.N,Ur.prototype.getAsFloat32Array=Ur.prototype.ja,Ur.prototype.getAsUint8Array=Ur.prototype.ka,Ur.prototype.hasWebGLTexture=Ur.prototype.R,Ur.prototype.hasFloat32Array=Ur.prototype.la,Ur.prototype.hasUint8Array=Ur.prototype.Ha;var TG=250,Kxe={color:"white",lineWidth:4,radius:6};function NO(e){return xe(vt(xe({},Kxe),{fillColor:(e=e||{}).color}),e)}function fc(e,t){return e instanceof Function?e(t):e}function _G(e,t,n){return Math.max(Math.min(t,n),Math.min(Math.max(t,n),e))}function Cv(e){if(!e.l)throw Error("CPU rendering requested but CanvasRenderingContext2D not provided.");return e.l}function Pv(e){if(!e.j)throw Error("GPU rendering requested but WebGL2RenderingContext not provided.");return e.j}function IG(e,t,n){if(t.R())n(t.N());else{let r=t.la()?t.ja():t.ka();e.m=e.m??new Jh;let o=Pv(e);n((e=new Ur([r],t.m,!1,o.canvas,e.m,t.width,t.height)).N()),e.close()}}function SG(e,t,n,r){let o=function(a){return a.g||(a.g=new Wxe),a.g}(e),i=Pv(e),s=Array.isArray(n)?new ImageData(new Uint8ClampedArray(n),1,1):n;Hv(o,i,!0,()=>{(function(u,c,d,f){let h=u.g;if(h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,c),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,u.B),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,d),u.I&&function(m,v){if(m!==v)return!1;m=m.entries(),v=v.entries();for(let[b,C]of m){m=b;let S=C;var x=v.next();if(x.done)return!1;let[O,F]=x.value;if(x=F,m!==O||S[0]!==x[0]||S[1]!==x[1]||S[2]!==x[2]||S[3]!==x[3])return!1}return!!v.next().done}(u.I,f))h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,u.j);else{u.I=f;let m=Array(1024).fill(0);f.forEach((v,x)=>{if(v.length!==4)throw Error(`Color at index ${x} is not a four-channel value.`);m[4*x]=v[0],m[4*x+1]=v[1],m[4*x+2]=v[2],m[4*x+3]=v[3]}),h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,u.j),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,256,1,0,h.RGBA,h.UNSIGNED_BYTE,new Uint8Array(m))}})(o,t,s,r),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4);let a=o.g;a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,null)})}function DG(e,t,n,r){let o=Pv(e),i=function(u){return u.h||(u.h=new qxe),u.h}(e),s=Array.isArray(n)?new ImageData(new Uint8ClampedArray(n),1,1):n,a=Array.isArray(r)?new ImageData(new Uint8ClampedArray(r),1,1):r;Hv(i,o,!0,()=>{var u=i.g;u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,t),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,i.j),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,s),u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,i.B),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,a),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.drawArrays(o.TRIANGLE_FAN,0,4),o.bindTexture(o.TEXTURE_2D,null),(u=i.g).activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,null),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,null),u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,null)})}var Si=class{constructor(e,t){e instanceof CanvasRenderingContext2D||e instanceof OffscreenCanvasRenderingContext2D?(this.l=e,this.j=t):this.j=e}Aa(e,t){if(e){var n=Cv(this);t=NO(t),n.save();var r=n.canvas,o=0;for(let i of e)n.fillStyle=fc(t.fillColor,{index:o,from:i}),n.strokeStyle=fc(t.color,{index:o,from:i}),n.lineWidth=fc(t.lineWidth,{index:o,from:i}),(e=new Path2D).arc(i.x*r.width,i.y*r.height,fc(t.radius,{index:o,from:i}),0,2*Math.PI),n.fill(e),n.stroke(e),++o;n.restore()}}za(e,t,n){if(e&&t){var r=Cv(this);n=NO(n),r.save();var o=r.canvas,i=0;for(let s of t){r.beginPath(),t=e[s.start];let a=e[s.end];t&&a&&(r.strokeStyle=fc(n.color,{index:i,from:t,to:a}),r.lineWidth=fc(n.lineWidth,{index:i,from:t,to:a}),r.moveTo(t.x*o.width,t.y*o.height),r.lineTo(a.x*o.width,a.y*o.height)),++i,r.stroke()}r.restore()}}wa(e,t){let n=Cv(this);t=NO(t),n.save(),n.beginPath(),n.lineWidth=fc(t.lineWidth,{}),n.strokeStyle=fc(t.color,{}),n.fillStyle=fc(t.fillColor,{}),n.moveTo(e.originX,e.originY),n.lineTo(e.originX+e.width,e.originY),n.lineTo(e.originX+e.width,e.originY+e.height),n.lineTo(e.originX,e.originY+e.height),n.lineTo(e.originX,e.originY),n.stroke(),n.fill(),n.restore()}xa(e,t,n=[0,0,0,255]){this.l?function(r,o,i,s){let a=Pv(r);IG(r,o,u=>{SG(r,u,i,s),(u=Cv(r)).drawImage(a.canvas,0,0,u.canvas.width,u.canvas.height)})}(this,e,n,t):SG(this,e.N(),n,t)}ya(e,t,n){this.l?function(r,o,i,s){let a=Pv(r);IG(r,o,u=>{DG(r,u,i,s),(u=Cv(r)).drawImage(a.canvas,0,0,u.canvas.width,u.canvas.height)})}(this,e,t,n):DG(this,e.N(),t,n)}close(){this.g?.close(),this.g=void 0,this.h?.close(),this.h=void 0,this.m?.close(),this.m=void 0}};function yu(e,t){switch(t){case 0:return e.g.find(n=>n instanceof ImageData);case 1:return e.g.find(n=>typeof ImageBitmap<"u"&&n instanceof ImageBitmap);case 2:return e.g.find(n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture);default:throw Error(`Type is not supported: ${t}`)}}function Pz(e){var t=yu(e,0);if(!t){t=zh(e);let n=qE(e),r=new Uint8Array(e.width*e.height*4);WE(n,t,aE(e)),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,r),jM(n),t=new ImageData(new Uint8ClampedArray(r.buffer),e.width,e.height),e.g.push(t)}return t}function aE(e){let t=yu(e,2);if(!t){let n=zh(e);t=uE(e);let r=yu(e,1)||Pz(e);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),_v(e)}return t}function zh(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return e.h||(e.h=ei(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function qE(e){return e.l||(e.l=new Jh),e.l}function uE(e){let t=zh(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=yu(e,2);return n||(n=$l(qE(e),t),e.g.push(n),e.m=!0),t.bindTexture(t.TEXTURE_2D,n),n}function _v(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}function NG(e){let t=zh(e);return Hv(qE(e),t,!0,()=>function(n,r){let o=n.canvas;if(o.width===n.width&&o.height===n.height)return r();let i=o.width,s=o.height;return o.width=n.width,o.height=n.height,n=r(),o.width=i,o.height=s,n}(e,()=>{if(t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),!(e.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return e.canvas.transferToImageBitmap()}))}Si.prototype.close=Si.prototype.close,Si.prototype.drawConfidenceMask=Si.prototype.ya,Si.prototype.drawCategoryMask=Si.prototype.xa,Si.prototype.drawBoundingBox=Si.prototype.wa,Si.prototype.drawConnectors=Si.prototype.za,Si.prototype.drawLandmarks=Si.prototype.Aa,Si.lerp=function(e,t,n,r,o){return _G(r*(1-(e-t)/(n-t))+o*(1-(n-e)/(n-t)),r,o)},Si.clamp=_G;var eo=class{constructor(e,t,n,r,o,i,s){this.g=e,this.j=t,this.m=n,this.canvas=r,this.l=o,this.width=i,this.height=s,(this.j||this.m)&&--AG===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ga(){return!!yu(this,0)}ma(){return!!yu(this,1)}R(){return!!yu(this,2)}Ea(){return Pz(this)}Da(){var e=yu(this,1);return e||(aE(this),uE(this),e=NG(this),_v(this),this.g.push(e),this.j=!0),e}N(){return aE(this)}clone(){let e=[];for(let t of this.g){let n;if(t instanceof ImageData)n=new ImageData(t.data,this.width,this.height);else if(t instanceof WebGLTexture){let r=zh(this),o=qE(this);r.activeTexture(r.TEXTURE1),n=$l(o,r),r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindTexture(r.TEXTURE_2D,null),WE(o,r,n),Hv(o,r,!1,()=>{uE(this),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),_v(this)}),jM(o),_v(this)}else{if(!(t instanceof ImageBitmap))throw Error(`Type is not supported: ${t}`);aE(this),uE(this),n=NG(this),_v(this)}e.push(n)}return new eo(e,this.ma(),this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&yu(this,1).close(),this.m&&zh(this).deleteTexture(yu(this,2)),AG=-1}};eo.prototype.close=eo.prototype.close,eo.prototype.clone=eo.prototype.clone,eo.prototype.getAsWebGLTexture=eo.prototype.N,eo.prototype.getAsImageBitmap=eo.prototype.Da,eo.prototype.getAsImageData=eo.prototype.Ea,eo.prototype.hasWebGLTexture=eo.prototype.R,eo.prototype.hasImageBitmap=eo.prototype.ma,eo.prototype.hasImageData=eo.prototype.Ga;var AG=250;function Oa(...e){return e.map(([t,n])=>({start:t,end:n}))}var Xxe=function(e){return class extends e{Ma(){this.i._registerModelResourcesGraphService()}}}((RG=class{constructor(e,t){this.l=!0,this.i=e,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",t!==void 0?this.i.canvas=t:Rz()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}initializeGraph(e){return ne(this,null,function*(){let t=yield(yield fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)})}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){let n=e.length,r=this.i._malloc(n);this.i.HEAPU8.set(e,r),t?this.i._changeBinaryGraph(n,r):this.i._changeTextGraph(n,r),this.i._free(r)}configureAudio(e,t,n,r,o){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),je(this,r||"input_audio",i=>{je(this,o=o||"audio_header",s=>{this.i._configureAudio(i,s,e,t??0,n)})})}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}ea(e){hu(this,"__graph_config__",t=>{e(t)}),je(this,"__graph_config__",t=>{this.i._getGraphConfig(t,void 0)}),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=t}addAudioToStream(e,t,n){this.addAudioToStreamWithShape(e,0,0,t,n)}addAudioToStreamWithShape(e,t,n,r,o){let i=4*e.length;this.h!==i&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(i),this.h=i),this.i.HEAPF32.set(e,this.g/4),je(this,r,s=>{this.i._addAudioToInputStream(this.g,t,n,s,o)})}addGpuBufferToStream(e,t,n){je(this,t,r=>{let[o,i]=xG(this,e,r);this.i._addBoundTextureToStream(r,o,i,n)})}addBoolToStream(e,t,n){je(this,t,r=>{this.i._addBoolToInputStream(e,r,n)})}addDoubleToStream(e,t,n){je(this,t,r=>{this.i._addDoubleToInputStream(e,r,n)})}addFloatToStream(e,t,n){je(this,t,r=>{this.i._addFloatToInputStream(e,r,n)})}addIntToStream(e,t,n){je(this,t,r=>{this.i._addIntToInputStream(e,r,n)})}addUintToStream(e,t,n){je(this,t,r=>{this.i._addUintToInputStream(e,r,n)})}addStringToStream(e,t,n){je(this,t,r=>{je(this,e,o=>{this.i._addStringToInputStream(o,r,n)})})}addStringRecordToStream(e,t,n){je(this,t,r=>{bG(this,Object.keys(e),o=>{bG(this,Object.values(e),i=>{this.i._addFlatHashMapToInputStream(o,i,Object.keys(e).length,r,n)})})})}addProtoToStream(e,t,n,r){je(this,n,o=>{je(this,t,i=>{let s=this.i._malloc(e.length);this.i.HEAPU8.set(e,s),this.i._addProtoToInputStream(s,e.length,i,o,r),this.i._free(s)})})}addEmptyPacketToStream(e,t){je(this,e,n=>{this.i._addEmptyPacketToInputStream(n,t)})}addBoolVectorToStream(e,t,n){je(this,t,r=>{let o=this.i._allocateBoolVector(e.length);if(!o)throw Error("Unable to allocate new bool vector on heap.");for(let i of e)this.i._addBoolVectorEntry(o,i);this.i._addBoolVectorToInputStream(o,r,n)})}addDoubleVectorToStream(e,t,n){je(this,t,r=>{let o=this.i._allocateDoubleVector(e.length);if(!o)throw Error("Unable to allocate new double vector on heap.");for(let i of e)this.i._addDoubleVectorEntry(o,i);this.i._addDoubleVectorToInputStream(o,r,n)})}addFloatVectorToStream(e,t,n){je(this,t,r=>{let o=this.i._allocateFloatVector(e.length);if(!o)throw Error("Unable to allocate new float vector on heap.");for(let i of e)this.i._addFloatVectorEntry(o,i);this.i._addFloatVectorToInputStream(o,r,n)})}addIntVectorToStream(e,t,n){je(this,t,r=>{let o=this.i._allocateIntVector(e.length);if(!o)throw Error("Unable to allocate new int vector on heap.");for(let i of e)this.i._addIntVectorEntry(o,i);this.i._addIntVectorToInputStream(o,r,n)})}addUintVectorToStream(e,t,n){je(this,t,r=>{let o=this.i._allocateUintVector(e.length);if(!o)throw Error("Unable to allocate new unsigned int vector on heap.");for(let i of e)this.i._addUintVectorEntry(o,i);this.i._addUintVectorToInputStream(o,r,n)})}addStringVectorToStream(e,t,n){je(this,t,r=>{let o=this.i._allocateStringVector(e.length);if(!o)throw Error("Unable to allocate new string vector on heap.");for(let i of e)je(this,i,s=>{this.i._addStringVectorEntry(o,s)});this.i._addStringVectorToInputStream(o,r,n)})}addBoolToInputSidePacket(e,t){je(this,t,n=>{this.i._addBoolToInputSidePacket(e,n)})}addDoubleToInputSidePacket(e,t){je(this,t,n=>{this.i._addDoubleToInputSidePacket(e,n)})}addFloatToInputSidePacket(e,t){je(this,t,n=>{this.i._addFloatToInputSidePacket(e,n)})}addIntToInputSidePacket(e,t){je(this,t,n=>{this.i._addIntToInputSidePacket(e,n)})}addUintToInputSidePacket(e,t){je(this,t,n=>{this.i._addUintToInputSidePacket(e,n)})}addStringToInputSidePacket(e,t){je(this,t,n=>{je(this,e,r=>{this.i._addStringToInputSidePacket(r,n)})})}addProtoToInputSidePacket(e,t,n){je(this,n,r=>{je(this,t,o=>{let i=this.i._malloc(e.length);this.i.HEAPU8.set(e,i),this.i._addProtoToInputSidePacket(i,e.length,o,r),this.i._free(i)})})}addBoolVectorToInputSidePacket(e,t){je(this,t,n=>{let r=this.i._allocateBoolVector(e.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(let o of e)this.i._addBoolVectorEntry(r,o);this.i._addBoolVectorToInputSidePacket(r,n)})}addDoubleVectorToInputSidePacket(e,t){je(this,t,n=>{let r=this.i._allocateDoubleVector(e.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(let o of e)this.i._addDoubleVectorEntry(r,o);this.i._addDoubleVectorToInputSidePacket(r,n)})}addFloatVectorToInputSidePacket(e,t){je(this,t,n=>{let r=this.i._allocateFloatVector(e.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(let o of e)this.i._addFloatVectorEntry(r,o);this.i._addFloatVectorToInputSidePacket(r,n)})}addIntVectorToInputSidePacket(e,t){je(this,t,n=>{let r=this.i._allocateIntVector(e.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(let o of e)this.i._addIntVectorEntry(r,o);this.i._addIntVectorToInputSidePacket(r,n)})}addUintVectorToInputSidePacket(e,t){je(this,t,n=>{let r=this.i._allocateUintVector(e.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(let o of e)this.i._addUintVectorEntry(r,o);this.i._addUintVectorToInputSidePacket(r,n)})}addStringVectorToInputSidePacket(e,t){je(this,t,n=>{let r=this.i._allocateStringVector(e.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(let o of e)je(this,o,i=>{this.i._addStringVectorEntry(r,i)});this.i._addStringVectorToInputSidePacket(r,n)})}attachBoolListener(e,t){hu(this,e,t),je(this,e,n=>{this.i._attachBoolListener(n)})}attachBoolVectorListener(e,t){Il(this,e,t),je(this,e,n=>{this.i._attachBoolVectorListener(n)})}attachIntListener(e,t){hu(this,e,t),je(this,e,n=>{this.i._attachIntListener(n)})}attachIntVectorListener(e,t){Il(this,e,t),je(this,e,n=>{this.i._attachIntVectorListener(n)})}attachUintListener(e,t){hu(this,e,t),je(this,e,n=>{this.i._attachUintListener(n)})}attachUintVectorListener(e,t){Il(this,e,t),je(this,e,n=>{this.i._attachUintVectorListener(n)})}attachDoubleListener(e,t){hu(this,e,t),je(this,e,n=>{this.i._attachDoubleListener(n)})}attachDoubleVectorListener(e,t){Il(this,e,t),je(this,e,n=>{this.i._attachDoubleVectorListener(n)})}attachFloatListener(e,t){hu(this,e,t),je(this,e,n=>{this.i._attachFloatListener(n)})}attachFloatVectorListener(e,t){Il(this,e,t),je(this,e,n=>{this.i._attachFloatVectorListener(n)})}attachStringListener(e,t){hu(this,e,t),je(this,e,n=>{this.i._attachStringListener(n)})}attachStringVectorListener(e,t){Il(this,e,t),je(this,e,n=>{this.i._attachStringVectorListener(n)})}attachProtoListener(e,t,n){hu(this,e,t),je(this,e,r=>{this.i._attachProtoListener(r,n||!1)})}attachProtoVectorListener(e,t,n){Il(this,e,t),je(this,e,r=>{this.i._attachProtoVectorListener(r,n||!1)})}attachAudioListener(e,t,n){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),hu(this,e,(r,o)=>{r=new Float32Array(r.buffer,r.byteOffset,r.length/4),t(r,o)}),je(this,e,r=>{this.i._attachAudioListener(r,n||!1)})}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends RG{get ga(){return this.i}sa(e,t,n){je(this,t,r=>{let[o,i]=xG(this,e,r);this.ga._addBoundTextureAsImageToStream(r,o,i,n)})}V(e,t){hu(this,e,t),je(this,e,n=>{this.ga._attachImageListener(n)})}da(e,t){Il(this,e,t),je(this,e,n=>{this.ga._attachImageVectorListener(n)})}})),RG,Js=class extends Xxe{};function Lt(e,t,n){return ne(this,null,function*(){return function(r,o,i,s){return ne(this,null,function*(){return Hxe(r,o,i,s)})}(e,n.canvas??(Rz()?void 0:document.createElement("canvas")),t,n)})}function $z(e,t,n,r){if(e.U){let i=new sz;if(n?.regionOfInterest){if(!e.ra)throw Error("This task doesn't support region-of-interest.");var o=n.regionOfInterest;if(o.left>=o.right||o.top>=o.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(o.left<0||o.top<0||o.right>1||o.bottom>1)throw Error("Expected RectF values to be in [0,1].");Ue(i,1,(o.left+o.right)/2),Ue(i,2,(o.top+o.bottom)/2),Ue(i,4,o.right-o.left),Ue(i,3,o.bottom-o.top)}else Ue(i,1,.5),Ue(i,2,.5),Ue(i,4,1),Ue(i,3,1);if(n?.rotationDegrees){if(n?.rotationDegrees%90!=0)throw Error("Expected rotation to be a multiple of 90\xB0.");if(Ue(i,5,-Math.PI*n.rotationDegrees/180),n?.rotationDegrees%180!=0){let[s,a]=kz(t);n=Cr(i,3)*a/s,o=Cr(i,4)*s/a,Ue(i,4,n),Ue(i,3,o)}}e.g.addProtoToStream(i.g(),"mediapipe.NormalizedRect",e.U,r)}e.g.sa(t,e.ba,r??performance.now()),e.finishProcessing()}function ea(e,t,n){if(e.baseOptions?.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");$z(e,t,n,e.B+1)}function wu(e,t,n,r){if(!e.baseOptions?.g())throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");$z(e,t,n,r)}function Hh(e,t,n,r){var o=t.data;let i=t.width,s=i*(t=t.height);if((o instanceof Uint8Array||o instanceof Float32Array)&&o.length!==s)throw Error("Unsupported channel count: "+o.length/s);return e=new Ur([o],n,!1,e.g.i.canvas,e.P,i,t),r?e.clone():e}var Ni=class extends sE{constructor(e,t,n,r){super(e),this.g=e,this.ba=t,this.U=n,this.ra=r,this.P=new Jh}l(e,t=!0){if("runningMode"in e&&Mv(this.baseOptions,2,!!e.runningMode&&e.runningMode!=="IMAGE"),e.canvas!==void 0&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,t)}close(){this.P.close(),super.close()}};Ni.prototype.close=Ni.prototype.close;var Ws=class extends Ni{constructor(e,t){super(new Js(e,t),"image_in","norm_rect_in",!1),this.j={detections:[]},Xe(e=this.h=new GE,0,1,t=new Xn),Ue(this.h,2,.5),Ue(this.h,3,.3)}get baseOptions(){return Xt(this.h,Xn,1)}set baseOptions(e){Xe(this.h,0,1,e)}o(e){return"minDetectionConfidence"in e&&Ue(this.h,2,e.minDetectionConfidence??.5),"minSuppressionThreshold"in e&&Ue(this.h,3,e.minSuppressionThreshold??.3),this.l(e)}D(e,t){return this.j={detections:[]},ea(this,e,t),this.j}F(e,t,n){return this.j={detections:[]},wu(this,e,n,t),this.j}m(){var e=new ki;Bn(e,"image_in"),Bn(e,"norm_rect_in"),Qt(e,"detections");let t=new ws;Aa(t,Rxe,this.h);let n=new ti;Es(n,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),Pn(n,"IMAGE:image_in"),Pn(n,"NORM_RECT:norm_rect_in"),zt(n,"DETECTIONS:detections"),n.o(t),Cs(e,n),this.g.attachProtoVectorListener("detections",(r,o)=>{for(let i of r)r=rz(i),this.j.detections.push(Nz(r));Re(this,o)}),this.g.attachEmptyPacketListener("detections",r=>{Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ws.prototype.detectForVideo=Ws.prototype.F,Ws.prototype.detect=Ws.prototype.D,Ws.prototype.setOptions=Ws.prototype.o,Ws.createFromModelPath=function(e,t){return ne(this,null,function*(){return Lt(Ws,e,{baseOptions:{modelAssetPath:t}})})},Ws.createFromModelBuffer=function(e,t){return Lt(Ws,e,{baseOptions:{modelAssetBuffer:t}})},Ws.createFromOptions=function(e,t){return Lt(Ws,e,t)};var HM=Oa([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),WM=Oa([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),qM=Oa([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),Lz=Oa([474,475],[475,476],[476,477],[477,474]),KM=Oa([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),XM=Oa([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),Vz=Oa([469,470],[470,471],[471,472],[472,469]),YM=Oa([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),Bz=[...HM,...WM,...qM,...KM,...XM,...YM],Uz=Oa([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function kG(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var pr=class extends Ni{constructor(e,t){super(new Js(e,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,Xe(e=this.h=new dz,0,1,t=new Xn),this.v=new lz,Xe(this.h,0,3,this.v),this.s=new GE,Xe(this.h,0,2,this.s),xu(this.s,4,1),Ue(this.s,2,.5),Ue(this.v,2,.5),Ue(this.h,4,.5)}get baseOptions(){return Xt(this.h,Xn,1)}set baseOptions(e){Xe(this.h,0,1,e)}o(e){return"numFaces"in e&&xu(this.s,4,e.numFaces??1),"minFaceDetectionConfidence"in e&&Ue(this.s,2,e.minFaceDetectionConfidence??.5),"minTrackingConfidence"in e&&Ue(this.h,4,e.minTrackingConfidence??.5),"minFacePresenceConfidence"in e&&Ue(this.v,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}D(e,t){return kG(this),ea(this,e,t),this.j}F(e,t,n){return kG(this),wu(this,e,n,t),this.j}m(){var e=new ki;Bn(e,"image_in"),Bn(e,"norm_rect"),Qt(e,"face_landmarks");let t=new ws;Aa(t,Oxe,this.h);let n=new ti;Es(n,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),Pn(n,"IMAGE:image_in"),Pn(n,"NORM_RECT:norm_rect"),zt(n,"NORM_LANDMARKS:face_landmarks"),n.o(t),Cs(e,n),this.g.attachProtoVectorListener("face_landmarks",(r,o)=>{for(let i of r)r=zv(i),this.j.faceLandmarks.push(jE(r));Re(this,o)}),this.g.attachEmptyPacketListener("face_landmarks",r=>{Re(this,r)}),this.outputFaceBlendshapes&&(Qt(e,"blendshapes"),zt(n,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",(r,o)=>{if(this.outputFaceBlendshapes)for(let i of r)r=UE(i),this.j.faceBlendshapes.push(UM(r.g()??[]));Re(this,o)}),this.g.attachEmptyPacketListener("blendshapes",r=>{Re(this,r)})),this.outputFacialTransformationMatrixes&&(Qt(e,"face_geometry"),zt(n,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",(r,o)=>{if(this.outputFacialTransformationMatrixes)for(let i of r)(r=Xt(kxe(i),Cxe,2))&&this.j.facialTransformationMatrixes.push({rows:Da(Ys(r,1),0)??0,columns:Da(Ys(r,2),0)??0,data:uf(r,3,Ll,af()).slice()??[]});Re(this,o)}),this.g.attachEmptyPacketListener("face_geometry",r=>{Re(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};pr.prototype.detectForVideo=pr.prototype.F,pr.prototype.detect=pr.prototype.D,pr.prototype.setOptions=pr.prototype.o,pr.createFromModelPath=function(e,t){return Lt(pr,e,{baseOptions:{modelAssetPath:t}})},pr.createFromModelBuffer=function(e,t){return Lt(pr,e,{baseOptions:{modelAssetBuffer:t}})},pr.createFromOptions=function(e,t){return Lt(pr,e,t)},pr.FACE_LANDMARKS_LIPS=HM,pr.FACE_LANDMARKS_LEFT_EYE=WM,pr.FACE_LANDMARKS_LEFT_EYEBROW=qM,pr.FACE_LANDMARKS_LEFT_IRIS=Lz,pr.FACE_LANDMARKS_RIGHT_EYE=KM,pr.FACE_LANDMARKS_RIGHT_EYEBROW=XM,pr.FACE_LANDMARKS_RIGHT_IRIS=Vz,pr.FACE_LANDMARKS_FACE_OVAL=YM,pr.FACE_LANDMARKS_CONTOURS=Bz,pr.FACE_LANDMARKS_TESSELATION=Uz;var mu=class extends Ni{constructor(e,t){super(new Js(e,t),"image_in","norm_rect",!0),Xe(e=this.j=new pz,0,1,t=new Xn)}get baseOptions(){return Xt(this.j,Xn,1)}set baseOptions(e){Xe(this.j,0,1,e)}o(e){return super.l(e)}Pa(e,t,n){let r=typeof t!="function"?t:{};if(this.h=typeof t=="function"?t:n,ea(this,e,r??{}),!this.h)return this.s}m(){var e=new ki;Bn(e,"image_in"),Bn(e,"norm_rect"),Qt(e,"stylized_image");let t=new ws;Aa(t,Mxe,this.j);let n=new ti;Es(n,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),Pn(n,"IMAGE:image_in"),Pn(n,"NORM_RECT:norm_rect"),zt(n,"STYLIZED_IMAGE:stylized_image"),n.o(t),Cs(e,n),this.g.V("stylized_image",(r,o)=>{var i=!this.h,s=r.data,a=r.width;let u=a*(r=r.height);if(s instanceof Uint8Array)if(s.length===3*u){let c=new Uint8ClampedArray(4*u);for(let d=0;d<u;++d)c[4*d]=s[3*d],c[4*d+1]=s[3*d+1],c[4*d+2]=s[3*d+2],c[4*d+3]=255;s=new ImageData(c,a,r)}else{if(s.length!==4*u)throw Error("Unsupported channel count: "+s.length/u);s=new ImageData(new Uint8ClampedArray(s.buffer,s.byteOffset,s.length),a,r)}else if(!(s instanceof WebGLTexture))throw Error(`Unsupported format: ${s.constructor.name}`);a=new eo([s],!1,!1,this.g.i.canvas,this.P,a,r),this.s=i=i?a.clone():a,this.h&&this.h(i),Re(this,o)}),this.g.attachEmptyPacketListener("stylized_image",r=>{this.s=null,this.h&&this.h(null),Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};mu.prototype.stylize=mu.prototype.Pa,mu.prototype.setOptions=mu.prototype.o,mu.createFromModelPath=function(e,t){return Lt(mu,e,{baseOptions:{modelAssetPath:t}})},mu.createFromModelBuffer=function(e,t){return Lt(mu,e,{baseOptions:{modelAssetBuffer:t}})},mu.createFromOptions=function(e,t){return Lt(mu,e,t)};var ZM=Oa([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function OG(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function MG(e){return e.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function FG(e,t=!0){let n=[];for(let o of e){var r=UE(o);e=[];for(let i of r.g())r=t&&Ys(i,1)!=null?Da(Ys(i,1),0):-1,e.push({score:Cr(i,2)??0,index:r,categoryName:vu(i,3)??"",displayName:vu(i,4)??""});n.push(e)}return n}var ys=class extends Ni{constructor(e,t){super(new Js(e,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Xe(e=this.j=new gz,0,1,t=new Xn),this.s=new $M,Xe(this.j,0,2,this.s),this.C=new PM,Xe(this.s,0,3,this.C),this.v=new mz,Xe(this.s,0,2,this.v),this.h=new Fxe,Xe(this.j,0,3,this.h),Ue(this.v,2,.5),Ue(this.s,4,.5),Ue(this.C,2,.5)}get baseOptions(){return Xt(this.j,Xn,1)}set baseOptions(e){Xe(this.j,0,1,e)}o(e){if(xu(this.v,3,e.numHands??1),"minHandDetectionConfidence"in e&&Ue(this.v,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&Ue(this.s,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&Ue(this.C,2,e.minHandPresenceConfidence??.5),e.cannedGesturesClassifierOptions){var t=new kh,n=t,r=zO(e.cannedGesturesClassifierOptions,Xt(this.h,kh,3)?.h());Xe(n,0,2,r),Xe(this.h,0,3,t)}else e.cannedGesturesClassifierOptions===void 0&&Xt(this.h,kh,3)?.g();return e.customGesturesClassifierOptions?(Xe(n=t=new kh,0,2,r=zO(e.customGesturesClassifierOptions,Xt(this.h,kh,4)?.h())),Xe(this.h,0,4,t)):e.customGesturesClassifierOptions===void 0&&Xt(this.h,kh,4)?.g(),this.l(e)}Ka(e,t){return OG(this),ea(this,e,t),MG(this)}La(e,t,n){return OG(this),wu(this,e,n,t),MG(this)}m(){var e=new ki;Bn(e,"image_in"),Bn(e,"norm_rect"),Qt(e,"hand_gestures"),Qt(e,"hand_landmarks"),Qt(e,"world_hand_landmarks"),Qt(e,"handedness");let t=new ws;Aa(t,Pxe,this.j);let n=new ti;Es(n,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),Pn(n,"IMAGE:image_in"),Pn(n,"NORM_RECT:norm_rect"),zt(n,"HAND_GESTURES:hand_gestures"),zt(n,"LANDMARKS:hand_landmarks"),zt(n,"WORLD_LANDMARKS:world_hand_landmarks"),zt(n,"HANDEDNESS:handedness"),n.o(t),Cs(e,n),this.g.attachProtoVectorListener("hand_landmarks",(r,o)=>{for(let i of r){r=zv(i);let s=[];for(let a of yc(r,iz,1))s.push({x:Cr(a,1)??0,y:Cr(a,2)??0,z:Cr(a,3)??0,visibility:Cr(a,4)??0});this.landmarks.push(s)}Re(this,o)}),this.g.attachEmptyPacketListener("hand_landmarks",r=>{Re(this,r)}),this.g.attachProtoVectorListener("world_hand_landmarks",(r,o)=>{for(let i of r){r=Ph(i);let s=[];for(let a of yc(r,oz,1))s.push({x:Cr(a,1)??0,y:Cr(a,2)??0,z:Cr(a,3)??0,visibility:Cr(a,4)??0});this.worldLandmarks.push(s)}Re(this,o)}),this.g.attachEmptyPacketListener("world_hand_landmarks",r=>{Re(this,r)}),this.g.attachProtoVectorListener("hand_gestures",(r,o)=>{this.gestures.push(...FG(r,!1)),Re(this,o)}),this.g.attachEmptyPacketListener("hand_gestures",r=>{Re(this,r)}),this.g.attachProtoVectorListener("handedness",(r,o)=>{this.handedness.push(...FG(r)),Re(this,o)}),this.g.attachEmptyPacketListener("handedness",r=>{Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function PG(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}ys.prototype.recognizeForVideo=ys.prototype.La,ys.prototype.recognize=ys.prototype.Ka,ys.prototype.setOptions=ys.prototype.o,ys.createFromModelPath=function(e,t){return Lt(ys,e,{baseOptions:{modelAssetPath:t}})},ys.createFromModelBuffer=function(e,t){return Lt(ys,e,{baseOptions:{modelAssetBuffer:t}})},ys.createFromOptions=function(e,t){return Lt(ys,e,t)},ys.HAND_CONNECTIONS=ZM;var Jo=class extends Ni{constructor(e,t){super(new Js(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Xe(e=this.h=new $M,0,1,t=new Xn),this.s=new PM,Xe(this.h,0,3,this.s),this.j=new mz,Xe(this.h,0,2,this.j),xu(this.j,3,1),Ue(this.j,2,.5),Ue(this.s,2,.5),Ue(this.h,4,.5)}get baseOptions(){return Xt(this.h,Xn,1)}set baseOptions(e){Xe(this.h,0,1,e)}o(e){return"numHands"in e&&xu(this.j,3,e.numHands??1),"minHandDetectionConfidence"in e&&Ue(this.j,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&Ue(this.h,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&Ue(this.s,2,e.minHandPresenceConfidence??.5),this.l(e)}D(e,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],ea(this,e,t),PG(this)}F(e,t,n){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],wu(this,e,n,t),PG(this)}m(){var e=new ki;Bn(e,"image_in"),Bn(e,"norm_rect"),Qt(e,"hand_landmarks"),Qt(e,"world_hand_landmarks"),Qt(e,"handedness");let t=new ws;Aa(t,$xe,this.h);let n=new ti;Es(n,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),Pn(n,"IMAGE:image_in"),Pn(n,"NORM_RECT:norm_rect"),zt(n,"LANDMARKS:hand_landmarks"),zt(n,"WORLD_LANDMARKS:world_hand_landmarks"),zt(n,"HANDEDNESS:handedness"),n.o(t),Cs(e,n),this.g.attachProtoVectorListener("hand_landmarks",(r,o)=>{for(let i of r)r=zv(i),this.landmarks.push(jE(r));Re(this,o)}),this.g.attachEmptyPacketListener("hand_landmarks",r=>{Re(this,r)}),this.g.attachProtoVectorListener("world_hand_landmarks",(r,o)=>{for(let i of r)r=Ph(i),this.worldLandmarks.push(Av(r));Re(this,o)}),this.g.attachEmptyPacketListener("world_hand_landmarks",r=>{Re(this,r)}),this.g.attachProtoVectorListener("handedness",(r,o)=>{var i=this.handedness,s=i.push;let a=[];for(let u of r){r=UE(u);let c=[];for(let d of r.g())c.push({score:Cr(d,2)??0,index:Da(Ys(d,1),0)??-1,categoryName:vu(d,3)??"",displayName:vu(d,4)??""});a.push(c)}s.call(i,...a),Re(this,o)}),this.g.attachEmptyPacketListener("handedness",r=>{Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Jo.prototype.detectForVideo=Jo.prototype.F,Jo.prototype.detect=Jo.prototype.D,Jo.prototype.setOptions=Jo.prototype.o,Jo.createFromModelPath=function(e,t){return Lt(Jo,e,{baseOptions:{modelAssetPath:t}})},Jo.createFromModelBuffer=function(e,t){return Lt(Jo,e,{baseOptions:{modelAssetBuffer:t}})},Jo.createFromOptions=function(e,t){return Lt(Jo,e,t)},Jo.HAND_CONNECTIONS=ZM;var Gz=Oa([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function $G(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function LG(e){try{if(!e.C)return e.h;e.C(e.h)}finally{HE(e)}}function nE(e,t){e=zv(e),t.push(jE(e))}var qn=class extends Ni{constructor(e,t){super(new Js(e,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,Xe(e=this.j=new wz,0,1,t=new Xn),this.K=new PM,Xe(this.j,0,2,this.K),this.aa=new Lxe,Xe(this.j,0,3,this.aa),this.s=new GE,Xe(this.j,0,4,this.s),this.I=new lz,Xe(this.j,0,5,this.I),this.v=new xz,Xe(this.j,0,6,this.v),this.L=new bz,Xe(this.j,0,7,this.L),Ue(this.s,2,.5),Ue(this.s,3,.3),Ue(this.I,2,.5),Ue(this.v,2,.5),Ue(this.v,3,.3),Ue(this.L,2,.5),Ue(this.K,2,.5)}get baseOptions(){return Xt(this.j,Xn,1)}set baseOptions(e){Xe(this.j,0,1,e)}o(e){return"minFaceDetectionConfidence"in e&&Ue(this.s,2,e.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in e&&Ue(this.s,3,e.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in e&&Ue(this.I,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&Ue(this.v,2,e.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in e&&Ue(this.v,3,e.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in e&&Ue(this.L,2,e.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&Ue(this.K,2,e.minHandLandmarksConfidence??.5),this.l(e)}D(e,t,n){let r=typeof t!="function"?t:{};return this.C=typeof t=="function"?t:n,$G(this),ea(this,e,r),LG(this)}F(e,t,n,r){let o=typeof n!="function"?n:{};return this.C=typeof n=="function"?n:r,$G(this),wu(this,e,o,t),LG(this)}m(){var e=new ki;Bn(e,"input_frames_image"),Qt(e,"pose_landmarks"),Qt(e,"pose_world_landmarks"),Qt(e,"face_landmarks"),Qt(e,"left_hand_landmarks"),Qt(e,"left_hand_world_landmarks"),Qt(e,"right_hand_landmarks"),Qt(e,"right_hand_world_landmarks");let t=new ws,n=new rG;$O(n,1,Kh("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),function(o,i){if(i!=null)if(Array.isArray(i))Fn(o,2,NE(i,fM,void 0,void 0,!1));else{if(!(typeof i=="string"||i instanceof gc||$v(i)))throw Error("invalid value in Any.value field: "+i+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");$O(o,2,nM(i,!1,!1),ff())}}(n,this.j.g());let r=new ti;Es(r,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),gE(r,8,rG,n),Pn(r,"IMAGE:input_frames_image"),zt(r,"POSE_LANDMARKS:pose_landmarks"),zt(r,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),zt(r,"FACE_LANDMARKS:face_landmarks"),zt(r,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),zt(r,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),zt(r,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),zt(r,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),r.o(t),Cs(e,r),zE(this,e),this.g.attachProtoListener("pose_landmarks",(o,i)=>{nE(o,this.h.poseLandmarks),Re(this,i)}),this.g.attachEmptyPacketListener("pose_landmarks",o=>{Re(this,o)}),this.g.attachProtoListener("pose_world_landmarks",(o,i)=>{var s=this.h.poseWorldLandmarks;o=Ph(o),s.push(Av(o)),Re(this,i)}),this.g.attachEmptyPacketListener("pose_world_landmarks",o=>{Re(this,o)}),this.outputPoseSegmentationMasks&&(zt(r,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),Gh(this,"pose_segmentation_mask"),this.g.V("pose_segmentation_mask",(o,i)=>{this.h.poseSegmentationMasks=[Hh(this,o,!0,!this.C)],Re(this,i)}),this.g.attachEmptyPacketListener("pose_segmentation_mask",o=>{this.h.poseSegmentationMasks=[],Re(this,o)})),this.g.attachProtoListener("face_landmarks",(o,i)=>{nE(o,this.h.faceLandmarks),Re(this,i)}),this.g.attachEmptyPacketListener("face_landmarks",o=>{Re(this,o)}),this.outputFaceBlendshapes&&(Qt(e,"extra_blendshapes"),zt(r,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",(o,i)=>{var s=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(o=UE(o),s.push(UM(o.g()??[]))),Re(this,i)}),this.g.attachEmptyPacketListener("extra_blendshapes",o=>{Re(this,o)})),this.g.attachProtoListener("left_hand_landmarks",(o,i)=>{nE(o,this.h.leftHandLandmarks),Re(this,i)}),this.g.attachEmptyPacketListener("left_hand_landmarks",o=>{Re(this,o)}),this.g.attachProtoListener("left_hand_world_landmarks",(o,i)=>{var s=this.h.leftHandWorldLandmarks;o=Ph(o),s.push(Av(o)),Re(this,i)}),this.g.attachEmptyPacketListener("left_hand_world_landmarks",o=>{Re(this,o)}),this.g.attachProtoListener("right_hand_landmarks",(o,i)=>{nE(o,this.h.rightHandLandmarks),Re(this,i)}),this.g.attachEmptyPacketListener("right_hand_landmarks",o=>{Re(this,o)}),this.g.attachProtoListener("right_hand_world_landmarks",(o,i)=>{var s=this.h.rightHandWorldLandmarks;o=Ph(o),s.push(Av(o)),Re(this,i)}),this.g.attachEmptyPacketListener("right_hand_world_landmarks",o=>{Re(this,o)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};qn.prototype.detectForVideo=qn.prototype.F,qn.prototype.detect=qn.prototype.D,qn.prototype.setOptions=qn.prototype.o,qn.createFromModelPath=function(e,t){return Lt(qn,e,{baseOptions:{modelAssetPath:t}})},qn.createFromModelBuffer=function(e,t){return Lt(qn,e,{baseOptions:{modelAssetBuffer:t}})},qn.createFromOptions=function(e,t){return Lt(qn,e,t)},qn.HAND_CONNECTIONS=ZM,qn.POSE_CONNECTIONS=Gz,qn.FACE_LANDMARKS_LIPS=HM,qn.FACE_LANDMARKS_LEFT_EYE=WM,qn.FACE_LANDMARKS_LEFT_EYEBROW=qM,qn.FACE_LANDMARKS_LEFT_IRIS=Lz,qn.FACE_LANDMARKS_RIGHT_EYE=KM,qn.FACE_LANDMARKS_RIGHT_EYEBROW=XM,qn.FACE_LANDMARKS_RIGHT_IRIS=Vz,qn.FACE_LANDMARKS_FACE_OVAL=YM,qn.FACE_LANDMARKS_CONTOURS=Bz,qn.FACE_LANDMARKS_TESSELATION=Uz;var qs=class extends Ni{constructor(e,t){super(new Js(e,t),"input_image","norm_rect",!0),this.j={classifications:[]},Xe(e=this.h=new Ez,0,1,t=new Xn)}get baseOptions(){return Xt(this.h,Xn,1)}set baseOptions(e){Xe(this.h,0,1,e)}o(e){return Xe(this.h,0,2,zO(e,Xt(this.h,OM,2))),this.l(e)}ua(e,t){return this.j={classifications:[]},ea(this,e,t),this.j}va(e,t,n){return this.j={classifications:[]},wu(this,e,n,t),this.j}m(){var e=new ki;Bn(e,"input_image"),Bn(e,"norm_rect"),Qt(e,"classifications");let t=new ws;Aa(t,Vxe,this.h);let n=new ti;Es(n,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),Pn(n,"IMAGE:input_image"),Pn(n,"NORM_RECT:norm_rect"),zt(n,"CLASSIFICATIONS:classifications"),n.o(t),Cs(e,n),this.g.attachProtoListener("classifications",(r,o)=>{this.j=function(i){let s={classifications:yc(i,_xe,1).map(a=>UM(Xt(a,tz,4)?.g()??[],Da(Ys(a,2),0),vu(a,3)))};return pE(Ol(i,2))!=null&&(s.timestampMs=Da(pE(Ol(i,2)),0)),s}(Ixe(r)),Re(this,o)}),this.g.attachEmptyPacketListener("classifications",r=>{Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};qs.prototype.classifyForVideo=qs.prototype.va,qs.prototype.classify=qs.prototype.ua,qs.prototype.setOptions=qs.prototype.o,qs.createFromModelPath=function(e,t){return Lt(qs,e,{baseOptions:{modelAssetPath:t}})},qs.createFromModelBuffer=function(e,t){return Lt(qs,e,{baseOptions:{modelAssetBuffer:t}})},qs.createFromOptions=function(e,t){return Lt(qs,e,t)};var vs=class extends Ni{constructor(e,t){super(new Js(e,t),"image_in","norm_rect",!0),this.h=new Cz,this.embeddings={embeddings:[]},Xe(e=this.h,0,1,t=new Xn)}get baseOptions(){return Xt(this.h,Xn,1)}set baseOptions(e){Xe(this.h,0,1,e)}o(e){var t=this.h,n=Xt(this.h,fG,2);return n=n?n.clone():new fG,e.l2Normalize!==void 0?Mv(n,1,e.l2Normalize):"l2Normalize"in e&&Fn(n,1),e.quantize!==void 0?Mv(n,2,e.quantize):"quantize"in e&&Fn(n,2),Xe(t,0,2,n),this.l(e)}Ba(e,t){return ea(this,e,t),this.embeddings}Ca(e,t,n){return wu(this,e,n,t),this.embeddings}m(){var e=new ki;Bn(e,"image_in"),Bn(e,"norm_rect"),Qt(e,"embeddings_out");let t=new ws;Aa(t,Bxe,this.h);let n=new ti;Es(n,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),Pn(n,"IMAGE:image_in"),Pn(n,"NORM_RECT:norm_rect"),zt(n,"EMBEDDINGS:embeddings_out"),n.o(t),Cs(e,n),this.g.attachProtoListener("embeddings_out",(r,o)=>{r=Nxe(r),this.embeddings=function(i){return{embeddings:yc(i,Dxe,1).map(s=>{let a={headIndex:Da(Ys(s,3),0)??-1,headName:vu(s,4)??""};if(wj(s,dG,CO(s,1))!==void 0)s=uf(s=Xt(s,dG,CO(s,1)),1,Ll,af()),a.floatEmbedding=s.slice();else{let u=new Uint8Array(0);a.quantizedEmbedding=Xt(s,Sxe,CO(s,2))?.qa()?.h()??u}return a}),timestampMs:Da(pE(Ol(i,2)),0)}}(r),Re(this,o)}),this.g.attachEmptyPacketListener("embeddings_out",r=>{Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};vs.cosineSimilarity=function(e,t){if(e.floatEmbedding&&t.floatEmbedding)e=yG(e.floatEmbedding,t.floatEmbedding);else{if(!e.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=yG(gG(e.quantizedEmbedding),gG(t.quantizedEmbedding))}return e},vs.prototype.embedForVideo=vs.prototype.Ca,vs.prototype.embed=vs.prototype.Ba,vs.prototype.setOptions=vs.prototype.o,vs.createFromModelPath=function(e,t){return Lt(vs,e,{baseOptions:{modelAssetPath:t}})},vs.createFromModelBuffer=function(e,t){return Lt(vs,e,{baseOptions:{modelAssetBuffer:t}})},vs.createFromOptions=function(e,t){return Lt(vs,e,t)};var KO=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){this.confidenceMasks?.forEach(e=>{e.close()}),this.categoryMask?.close()}};function VG(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function BG(e){try{let t=new KO(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return t;e.j(t)}finally{HE(e)}}KO.prototype.close=KO.prototype.close;var Di=class extends Ni{constructor(e,t){super(new Js(e,t),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new BM,this.v=new Tz,Xe(this.h,0,3,this.v),Xe(e=this.h,0,1,t=new Xn)}get baseOptions(){return Xt(this.h,Xn,1)}set baseOptions(e){Xe(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?Fn(this.h,2,Kh(e.displayNamesLocale)):"displayNamesLocale"in e&&Fn(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}J(){(function(e){let t=yc(e.ea(),ti,1).filter(n=>vu(n,1).includes("mediapipe.tasks.TensorsToSegmentationCalculator"));if(e.s=[],t.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");t.length===1&&(Xt(t[0],ws,7)?.l()?.g()??new Map).forEach((n,r)=>{e.s[Number(r)]=vu(n,1)})})(this)}fa(e,t,n){let r=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:n,VG(this),ea(this,e,r),BG(this)}Na(e,t,n,r){let o=typeof n!="function"?n:{};return this.j=typeof n=="function"?n:r,VG(this),wu(this,e,o,t),BG(this)}Fa(){return this.s}m(){var e=new ki;Bn(e,"image_in"),Bn(e,"norm_rect");let t=new ws;Aa(t,Iz,this.h);let n=new ti;Es(n,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),Pn(n,"IMAGE:image_in"),Pn(n,"NORM_RECT:norm_rect"),n.o(t),Cs(e,n),zE(this,e),this.outputConfidenceMasks&&(Qt(e,"confidence_masks"),zt(n,"CONFIDENCE_MASKS:confidence_masks"),Gh(this,"confidence_masks"),this.g.da("confidence_masks",(r,o)=>{this.confidenceMasks=r.map(i=>Hh(this,i,!0,!this.j)),Re(this,o)}),this.g.attachEmptyPacketListener("confidence_masks",r=>{this.confidenceMasks=[],Re(this,r)})),this.outputCategoryMask&&(Qt(e,"category_mask"),zt(n,"CATEGORY_MASK:category_mask"),Gh(this,"category_mask"),this.g.V("category_mask",(r,o)=>{this.categoryMask=Hh(this,r,!1,!this.j),Re(this,o)}),this.g.attachEmptyPacketListener("category_mask",r=>{this.categoryMask=void 0,Re(this,r)})),Qt(e,"quality_scores"),zt(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(r,o)=>{this.qualityScores=r,Re(this,o)}),this.g.attachEmptyPacketListener("quality_scores",r=>{this.categoryMask=void 0,Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Di.prototype.getLabels=Di.prototype.Fa,Di.prototype.segmentForVideo=Di.prototype.Na,Di.prototype.segment=Di.prototype.fa,Di.prototype.setOptions=Di.prototype.o,Di.createFromModelPath=function(e,t){return Lt(Di,e,{baseOptions:{modelAssetPath:t}})},Di.createFromModelBuffer=function(e,t){return Lt(Di,e,{baseOptions:{modelAssetBuffer:t}})},Di.createFromOptions=function(e,t){return Lt(Di,e,t)};var XO=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){this.confidenceMasks?.forEach(e=>{e.close()}),this.categoryMask?.close()}};XO.prototype.close=XO.prototype.close;var Yxe=class extends $e{constructor(e){super(e)}},Oh=[0,mr,-2],wE=[0,pc,-3,tr,pc,-1],UG=[0,wE],GG=[0,wE,mr,-1],AO=class extends $e{constructor(e){super(e)}},jG=[0,pc,-1,tr],Zxe=class extends $e{constructor(){super()}},zG=class extends $e{constructor(e){super(e)}},YO=[1,2,3,4,5,6,7,8,9,10,14,15],jz=class extends $e{constructor(){super()}};jz.prototype.g=BE([0,Gr,[0,YO,xn,wE,xn,[0,wE,Oh],xn,UG,xn,[0,UG,Oh],xn,jG,xn,[0,pc,-3,tr,Na],xn,[0,pc,-3,tr],xn,[0,hn,pc,-2,tr,mr,tr,-1,2,pc,Oh],xn,GG,xn,[0,GG,Oh],pc,Oh,hn,xn,[0,pc,-3,tr,Oh,-1],xn,[0,Gr,jG]],hn,[0,hn,mr,-1,tr]]);var gu=class extends Ni{constructor(e,t){super(new Js(e,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new BM,this.s=new Tz,Xe(this.h,0,3,this.s),Xe(e=this.h,0,1,t=new Xn)}get baseOptions(){return Xt(this.h,Xn,1)}set baseOptions(e){Xe(this.h,0,1,e)}o(e){return"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}fa(e,t,n,r){let o=typeof n!="function"?n:{};this.j=typeof n=="function"?n:r,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,n=this.B+1,r=new jz;let i=new zG;var s=new Yxe;if(xu(s,1,255),Xe(i,0,12,s),t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var a=new AO;Mv(a,3,!0),Ue(a,1,t.keypoint.x),Ue(a,2,t.keypoint.y),Sv(i,5,YO,a)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");for(a of(s=new Zxe,t.scribble))Mv(t=new AO,3,!0),Ue(t,1,a.x),Ue(t,2,a.y),gE(s,1,AO,t);Sv(i,15,YO,s)}gE(r,1,zG,i),this.g.addProtoToStream(r.g(),"drishti.RenderData","roi_in",n),ea(this,e,o);e:{try{let c=new XO(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var u=c;break e}this.j(c)}finally{HE(this)}u=void 0}return u}m(){var e=new ki;Bn(e,"image_in"),Bn(e,"roi_in"),Bn(e,"norm_rect_in");let t=new ws;Aa(t,Iz,this.h);let n=new ti;Es(n,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),Pn(n,"IMAGE:image_in"),Pn(n,"ROI:roi_in"),Pn(n,"NORM_RECT:norm_rect_in"),n.o(t),Cs(e,n),zE(this,e),this.outputConfidenceMasks&&(Qt(e,"confidence_masks"),zt(n,"CONFIDENCE_MASKS:confidence_masks"),Gh(this,"confidence_masks"),this.g.da("confidence_masks",(r,o)=>{this.confidenceMasks=r.map(i=>Hh(this,i,!0,!this.j)),Re(this,o)}),this.g.attachEmptyPacketListener("confidence_masks",r=>{this.confidenceMasks=[],Re(this,r)})),this.outputCategoryMask&&(Qt(e,"category_mask"),zt(n,"CATEGORY_MASK:category_mask"),Gh(this,"category_mask"),this.g.V("category_mask",(r,o)=>{this.categoryMask=Hh(this,r,!1,!this.j),Re(this,o)}),this.g.attachEmptyPacketListener("category_mask",r=>{this.categoryMask=void 0,Re(this,r)})),Qt(e,"quality_scores"),zt(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(r,o)=>{this.qualityScores=r,Re(this,o)}),this.g.attachEmptyPacketListener("quality_scores",r=>{this.categoryMask=void 0,Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};gu.prototype.segment=gu.prototype.fa,gu.prototype.setOptions=gu.prototype.o,gu.createFromModelPath=function(e,t){return Lt(gu,e,{baseOptions:{modelAssetPath:t}})},gu.createFromModelBuffer=function(e,t){return Lt(gu,e,{baseOptions:{modelAssetBuffer:t}})},gu.createFromOptions=function(e,t){return Lt(gu,e,t)};var Ks=class extends Ni{constructor(e,t){super(new Js(e,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},Xe(e=this.h=new Sz,0,1,t=new Xn)}get baseOptions(){return Xt(this.h,Xn,1)}set baseOptions(e){Xe(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?Fn(this.h,2,Kh(e.displayNamesLocale)):"displayNamesLocale"in e&&Fn(this.h,2),e.maxResults!==void 0?xu(this.h,3,e.maxResults):"maxResults"in e&&Fn(this.h,3),e.scoreThreshold!==void 0?Ue(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&Fn(this.h,4),e.categoryAllowlist!==void 0?yE(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&Fn(this.h,5),e.categoryDenylist!==void 0?yE(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&Fn(this.h,6),this.l(e)}D(e,t){return this.j={detections:[]},ea(this,e,t),this.j}F(e,t,n){return this.j={detections:[]},wu(this,e,n,t),this.j}m(){var e=new ki;Bn(e,"input_frame_gpu"),Bn(e,"norm_rect"),Qt(e,"detections");let t=new ws;Aa(t,Gxe,this.h);let n=new ti;Es(n,"mediapipe.tasks.vision.ObjectDetectorGraph"),Pn(n,"IMAGE:input_frame_gpu"),Pn(n,"NORM_RECT:norm_rect"),zt(n,"DETECTIONS:detections"),n.o(t),Cs(e,n),this.g.attachProtoVectorListener("detections",(r,o)=>{for(let i of r)r=rz(i),this.j.detections.push(Nz(r));Re(this,o)}),this.g.attachEmptyPacketListener("detections",r=>{Re(this,r)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ks.prototype.detectForVideo=Ks.prototype.F,Ks.prototype.detect=Ks.prototype.D,Ks.prototype.setOptions=Ks.prototype.o,Ks.createFromModelPath=function(e,t){return ne(this,null,function*(){return Lt(Ks,e,{baseOptions:{modelAssetPath:t}})})},Ks.createFromModelBuffer=function(e,t){return Lt(Ks,e,{baseOptions:{modelAssetBuffer:t}})},Ks.createFromOptions=function(e,t){return Lt(Ks,e,t)};var ZO=class{constructor(e,t,n){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=n}close(){this.segmentationMasks?.forEach(e=>{e.close()})}};function HG(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function WG(e){try{let t=new ZO(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.s)return t;e.s(t)}finally{HE(e)}}ZO.prototype.close=ZO.prototype.close;var xs=class extends Ni{constructor(e,t){super(new Js(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,Xe(e=this.h=new Dz,0,1,t=new Xn),this.v=new bz,Xe(this.h,0,3,this.v),this.j=new xz,Xe(this.h,0,2,this.j),xu(this.j,4,1),Ue(this.j,2,.5),Ue(this.v,2,.5),Ue(this.h,4,.5)}get baseOptions(){return Xt(this.h,Xn,1)}set baseOptions(e){Xe(this.h,0,1,e)}o(e){return"numPoses"in e&&xu(this.j,4,e.numPoses??1),"minPoseDetectionConfidence"in e&&Ue(this.j,2,e.minPoseDetectionConfidence??.5),"minTrackingConfidence"in e&&Ue(this.h,4,e.minTrackingConfidence??.5),"minPosePresenceConfidence"in e&&Ue(this.v,2,e.minPosePresenceConfidence??.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=e.outputSegmentationMasks??!1),this.l(e)}D(e,t,n){let r=typeof t!="function"?t:{};return this.s=typeof t=="function"?t:n,HG(this),ea(this,e,r),WG(this)}F(e,t,n,r){let o=typeof n!="function"?n:{};return this.s=typeof n=="function"?n:r,HG(this),wu(this,e,o,t),WG(this)}m(){var e=new ki;Bn(e,"image_in"),Bn(e,"norm_rect"),Qt(e,"normalized_landmarks"),Qt(e,"world_landmarks"),Qt(e,"segmentation_masks");let t=new ws;Aa(t,jxe,this.h);let n=new ti;Es(n,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),Pn(n,"IMAGE:image_in"),Pn(n,"NORM_RECT:norm_rect"),zt(n,"NORM_LANDMARKS:normalized_landmarks"),zt(n,"WORLD_LANDMARKS:world_landmarks"),n.o(t),Cs(e,n),zE(this,e),this.g.attachProtoVectorListener("normalized_landmarks",(r,o)=>{this.landmarks=[];for(let i of r)r=zv(i),this.landmarks.push(jE(r));Re(this,o)}),this.g.attachEmptyPacketListener("normalized_landmarks",r=>{this.landmarks=[],Re(this,r)}),this.g.attachProtoVectorListener("world_landmarks",(r,o)=>{this.worldLandmarks=[];for(let i of r)r=Ph(i),this.worldLandmarks.push(Av(r));Re(this,o)}),this.g.attachEmptyPacketListener("world_landmarks",r=>{this.worldLandmarks=[],Re(this,r)}),this.outputSegmentationMasks&&(zt(n,"SEGMENTATION_MASK:segmentation_masks"),Gh(this,"segmentation_masks"),this.g.da("segmentation_masks",(r,o)=>{this.segmentationMasks=r.map(i=>Hh(this,i,!0,!this.s)),Re(this,o)}),this.g.attachEmptyPacketListener("segmentation_masks",r=>{this.segmentationMasks=[],Re(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};xs.prototype.detectForVideo=xs.prototype.F,xs.prototype.detect=xs.prototype.D,xs.prototype.setOptions=xs.prototype.o,xs.createFromModelPath=function(e,t){return Lt(xs,e,{baseOptions:{modelAssetPath:t}})},xs.createFromModelBuffer=function(e,t){return Lt(xs,e,{baseOptions:{modelAssetBuffer:t}})},xs.createFromOptions=function(e,t){return Lt(xs,e,t)},xs.POSE_CONNECTIONS=Gz;var jK=ya(Hz());var Wv=class{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}},gf=class{refCount(t){return Oi("refCount")}incRef(t){return Oi("incRef")}timerAvailable(){return!0}time(t){return Oi("time")}read(t){return Oi("read")}readSync(t){return Oi("readSync")}readToGPU(t,n){return Oi("readToGPU")}numDataIds(){return Oi("numDataIds")}disposeData(t,n){return Oi("disposeData")}write(t,n,r){return Oi("write")}move(t,n,r,o,i){return Oi("move")}createTensorFromGPUData(t,n,r){return Oi("createTensorFromGPUData")}memory(){return Oi("memory")}floatPrecision(){return Oi("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Oi("dispose")}};function Oi(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function Wz(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,KE(e,t,n)}function Qxe(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,KE(e,n,r),KE(t,n,r)}function em(e,t,n){return Math.max(e,Math.min(t,n))}function Jxe(e){return e%2===0?e:e+1}function KE(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function e1e(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function t1e(e,t){let n=Math.random();return t*n+(1-n)*e}function n1e(e,t){let n=0;for(let r=0;r<e.length;r++){let o=Number(e[r])-Number(t[r]);n+=o*o}return n}function M(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Un(e,t,n=""){M(Mi(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function Ts(e){M(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function mt(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function r1e(e){return e.length===0}function QM(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==null&&t[n]!==null&&e[n]!==t[n])return!1;return!0}function Mi(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function xc(e){return e%1===0}function o1e(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function i1e(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function s1e(e){let t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return Wz(t),t}function vf(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function a1e(e,t=o=>0,n,r){return new Promise((o,i)=>{let s=0,a=()=>{if(e()){o();return}s++;let u=t(s);if(n!=null&&s>=n){i();return}r!=null?r(a,u):setTimeout(a,u)};a()})}function u1e(e,t){let n=1,r=-1;for(let i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(e[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(e[i]<0)throw Error(`Shapes can not be < 0. Found ${e[i]} at dim ${i}`);if(r===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);let o=e.slice();return o[r]=t/n,o}function Bl(e,t){let n=t.length;return e=e==null?t.map((r,o)=>o):[].concat(e),M(e.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),M(e.every(r=>xc(r)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(r=>r<0?n+r:r)}function JM(e,t){let n=[],r=[],o=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||o?null:Bl(t,e).sort(),s=0;for(let a=0;a<e.length;++a){if(i!=null){if(i[s]===a&&e[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${e[a]}' is not 1`);(i[s]==null||i[s]>a)&&e[a]===1&&(n.push(e[a]),r.push(a)),i[s]<=a&&s++}e[a]!==1&&(n.push(e[a]),r.push(a))}return{newShape:n,keptDims:r}}function eF(e,t){return XE(e,t)}function XE(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function tF(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function nF(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function c1e(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function tm(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function rF(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function nm(e){return typeof e=="string"||e instanceof String}function qz(e){return typeof e=="boolean"}function Kz(e){return typeof e=="number"}function Ul(e){return Array.isArray(e)?Ul(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Kz(e)?"float32":nm(e)?"string":qz(e)?"bool":"float32"}function rm(e){return!!(e&&e.constructor&&e.call&&e.apply)}function om(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Eu(e){let t=e.length;if(t<2)return[];let n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Xz(e,t,n,r=!1){let o=new Array;if(t.length===1){let i=t[0]*(r?2:1);for(let s=0;s<i;s++)o[s]=n[e+s]}else{let i=t[0],s=t.slice(1),a=s.reduce((u,c)=>u*c)*(r?2:1);for(let u=0;u<i;u++)o[u]=Xz(e+u*a,s,n,r)}return o}function yf(e,t,n=!1){if(e.length===0)return t[0];let r=e.reduce((o,i)=>o*i)*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return Xz(0,e,t,n)}function l1e(e,t){if(Array.isArray(e))return e;if(t==="float32")return e instanceof Float32Array?e:new Float32Array(e);if(t==="int32")return e instanceof Int32Array?e:new Int32Array(e);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}function qv(e,t){let n=im(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function im(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function d1e(e,t){let n=e.reduce((r,o)=>r*o,1);if(t==null||t==="float32")return yf(e,new Float32Array(n));if(t==="int32")return yf(e,new Int32Array(n));if(t==="bool")return yf(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function An(e){e.forEach(t=>{M(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function f1e(e,t,n){if(t===0)return 0;if(t===1)return e[0];let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function p1e(e,t,n){if(t===0)return[];if(t===1)return[e];let r=new Array(t);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}function xf(e){return e&&e.then&&typeof e.then=="function"}var Yz="tfjsflags",Kv=class{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=m1e,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(z().getBool("IS_TEST")||z().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){let o=this.urlFlags[t];z().getBool("IS_TEST")||z().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${o}.`),this.set(t,o)}}getAsync(t){return ne(this,null,function*(){return t in this.flags?this.flags[t]:(this.flags[t]=yield this.evaluateFlag(t),this.flags[t])})}get(t){if(t in this.flags)return this.flags[t];let n=this.evaluateFlag(t);if(xf(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let t=this.getQueryParams(this.global.location.search);Yz in t&&t[Yz].split(",").forEach(r=>{let[o,i]=r.split(":");this.urlFlags[o]=y1e(o,i)})}};function m1e(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(g1e(t,r[0],r[1]),r.join("="))),t}function g1e(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function y1e(e,t){let n=t.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:t}function z(){return oF}var oF=null;function Zz(e){oF=e}var iF;function sF(){if(iF==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");iF=e}return iF}function v1e(){let e=sF();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function Xv(e,t){let n=v1e();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}var Yv="Abs",YE="Acos",ZE="Acosh",Gl="Add",QE="AddN",JE="All",eC="Any",tC="ArgMax",nC="ArgMin",rC="Asin",oC="Asinh",iC="Atan",sC="Atanh",aC="Atan2",uC="AvgPool",Qz="AvgPoolGrad",cC="AvgPool3D",Jz="AvgPool3DGrad",lC="BatchMatMul",dC="BatchToSpaceND",fC="Bincount",sm="BitwiseAnd";var pC="BroadcastArgs",bf="Cast",am="Ceil",hC="ClipByValue",Zv="Complex",mC="ComplexAbs",gC="Concat",yC="Conv2D",vC="Conv2DBackpropFilter",xC="Conv2DBackpropInput",bC="Conv3D",eH="Conv3DBackpropFilterV2",wC="Conv3DBackpropInputV2",EC="Cos",CC="Cosh",TC="Cumprod",_C="Cumsum",IC="CropAndResize",SC="DenseBincount",DC="DepthToSpace",NC="DepthwiseConv2dNative",AC="DepthwiseConv2dNativeBackpropFilter",RC="DepthwiseConv2dNativeBackpropInput",kC="Diag",OC="Dilation2D";var aF="Draw",MC="RealDiv",FC="Einsum",PC="Elu",tH="EluGrad",$C="Erf",um="Equal",cm="Exp",LC="ExpandDims",lm="Expm1",VC="FFT",BC="Fill",UC="FlipLeftRight",dm="Floor",fm="FloorDiv",GC="FusedBatchNorm",jC="GatherV2",zC="GatherNd",pm="Greater",hm="GreaterEqual",wf="Identity",HC="IFFT",WC="Imag",qC="IsFinite",KC="IsInf",XC="IsNan",YC="LeakyRelu",mm="Less",gm="LessEqual",ZC="LinSpace",ym="Log",QC="Log1p",JC="LogicalAnd",eT="LogicalNot",tT="LogicalOr";var nT="LRN",nH="LRNGrad";var rT="Max",vm="Maximum",oT="MaxPool",rH="MaxPoolGrad",iT="MaxPool3D",oH="MaxPool3DGrad",sT="MaxPoolWithArgmax",aT="Mean",uT="Min",xm="Minimum",cT="MirrorPad",lT="Mod",dT="Multinomial",bm="Multiply",Qv="Neg",wm="NotEqual",fT="NonMaxSuppressionV3",pT="NonMaxSuppressionV4",hT="NonMaxSuppressionV5",mT="OnesLike",gT="OneHot",yT="Pack",vT="PadV2";var xT="Pow",bT="Prelu",Jv="Prod",wT="RaggedGather",ET="RaggedRange",CT="RaggedTensorToTensor",TT="Range",e0="Real",_T="Reciprocal",IT="Relu",ST="Reshape",DT="ResizeNearestNeighbor",iH="ResizeNearestNeighborGrad",NT="ResizeBilinear",sH="ResizeBilinearGrad",AT="Relu6",RT="Reverse",kT="Round",Em="Rsqrt",OT="ScatterNd",MT="TensorScatterUpdate",FT="SearchSorted",PT="Select",$T="Selu",t0="Slice",LT="Sin",VT="Sinh",BT="Sign",Cm="Sigmoid",UT="Softplus",Tm="Sqrt",GT="Sum",jT="SpaceToBatchND",zT="SplitV",HT="Softmax",WT="SparseFillEmptyRows",qT="SparseReshape",KT="SparseSegmentMean",XT="SparseSegmentSum",YT="SparseToDense",_m="SquaredDifference",aH="Square",Im="StaticRegexReplace",ZT="StridedSlice",QT="StringNGrams",JT="StringSplit",e_="StringToHashBucketFast",Sm="Sub",t_="Tan",n_="Tanh",Dm="Tile",r_="TopK",o_="Transform",Nm="Transpose",i_="Unique",s_="Unpack",a_="UnsortedSegmentSum";var u_="ZerosLike",c_="Step",n0="FromPixels",l_="RotateWithOffset",r0="_FusedMatMul",o0="FusedConv2D",i0="FusedDepthwiseConv2D";function bc(...e){z().getBool("IS_TEST")||z().getBool("PROD")||console.warn(...e)}function x1e(...e){z().getBool("IS_TEST")||z().getBool("PROD")||console.log(...e)}var d_=Xv("kernelRegistry",()=>new Map),b1e=Xv("gradRegistry",()=>new Map);function Am(e,t){let n=lH(e,t);return d_.get(n)}function uF(e){return b1e.get(e)}function cF(e){let t=d_.entries(),n=[];for(;;){let{done:r,value:o}=t.next();if(r)break;let[i,s]=o,[a]=i.split("_");a===e&&n.push(s)}return n}function cH(e){let{kernelName:t,backendName:n}=e,r=lH(t,n);d_.has(r)&&bc(`The kernel '${t}' for backend '${n}' is already registered`),d_.set(r,e)}function lH(e,t){return`${t}_${e}`}var N={};nn(N,{arraysEqual:()=>Mi,arraysEqualWithNull:()=>QM,assert:()=>M,assertNonNegativeIntegerDimensions:()=>An,assertNonNull:()=>Ts,assertShapesMatch:()=>Un,bytesFromStringArray:()=>rF,bytesPerElement:()=>tm,checkConversionForErrors:()=>tF,clamp:()=>em,computeStrides:()=>Eu,convertBackendValuesAndArrayBuffer:()=>l1e,createScalarValue:()=>S1e,createShuffledIndices:()=>s1e,decodeString:()=>Fm,distSquared:()=>n1e,encodeString:()=>Mm,fetch:()=>N1e,fingerPrint64:()=>I1e,flatten:()=>zl,getArrayFromDType:()=>XE,getTypedArrayFromDType:()=>eF,hasEncodingLoss:()=>c1e,hexToLong:()=>s0,indexToLoc:()=>p1e,inferDtype:()=>Ul,inferFromImplicitShape:()=>u1e,isBoolean:()=>qz,isFunction:()=>rm,isInt:()=>xc,isNumber:()=>Kz,isPromise:()=>xf,isScalarShape:()=>r1e,isString:()=>nm,isTypedArray:()=>yo,isValidDtype:()=>nF,locToIndex:()=>f1e,makeOnesTypedArray:()=>qv,makeZerosNestedTypedArray:()=>d1e,makeZerosTypedArray:()=>im,nearestDivisor:()=>om,nearestLargerEven:()=>Jxe,now:()=>If,parseAxisParam:()=>Bl,randUniform:()=>t1e,repeatedTry:()=>a1e,rightPad:()=>vf,shuffle:()=>Wz,shuffleCombo:()=>Qxe,sizeFromShape:()=>mt,sizeToSquarishShape:()=>i1e,squeezeShape:()=>JM,sum:()=>e1e,swap:()=>KE,tanh:()=>o1e,toNestedArray:()=>yf,toTypedArray:()=>Om});function f_(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var pF=ya(wH());var _f=pF.default||pF;function s0(e){return _f.fromString(e,!0,16)}var CH=s0("c3a5c85c97cb3127"),Tf=s0("b492b66fbe98f273"),Oo=s0("9ae16a3b2f90404f");function fF(e){return e.xor(e.shru(47))}function TH(e,t,n){let r=e.slice(t,t+n);return _f.fromBytes(Array.from(r),!0,!0)}function Rn(e,t){return TH(e,t,8)}function EH(e,t){return TH(e,t,4)}function zr(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function jl(e,t,n=s0("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let o=t.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function E1e(e,t,n,r,o,i){o=o.add(e),i=zr(i.add(o).add(r),21);let s=o;return o=o.add(t),o=o.add(n),i=i.add(zr(o,44)),[o.add(r),i.add(s)]}function h_(e,t,n,r){return E1e(Rn(e,t),Rn(e,t+8),Rn(e,t+16),Rn(e,t+24),n,r)}function C1e(e,t=e.length){if(t>=8){let n=Oo.add(t*2),r=Rn(e,0).add(Oo),o=Rn(e,t-8),i=zr(o,37).mul(n).add(r),s=zr(r,25).add(o).mul(n);return jl(i,s,n)}if(t>=4){let n=Oo.add(t*2),r=EH(e,0);return jl(r.shl(3).add(t),EH(e,t-4),n)}if(t>0){let n=e[0],r=e[t>>1],o=e[t-1],i=n+(r<<8),s=t+(o<<2);return fF(Oo.mul(i).xor(CH.mul(s))).mul(Oo)}return Oo}function T1e(e,t=e.length){let n=Oo.add(t*2),r=Rn(e,0).mul(Tf),o=Rn(e,8),i=Rn(e,t-8).mul(n),s=Rn(e,t-16).mul(Oo);return jl(zr(r.add(o),43).add(zr(i,30)).add(s),r.add(zr(o.add(Oo),18)).add(i),n)}function _1e(e,t=e.length){let n=Oo.add(t*2),r=Rn(e,0).mul(Oo),o=Rn(e,8),i=Rn(e,t-8).mul(n),s=Rn(e,t-16).mul(Oo),a=zr(r.add(o),43).add(zr(i,30)).add(s),u=jl(a,r.add(zr(o.add(Oo),18)).add(i),n),c=Rn(e,16).mul(n),d=Rn(e,24),f=a.add(Rn(e,t-32)).mul(n),h=u.add(Rn(e,t-24)).mul(n);return jl(zr(c.add(d),43).add(zr(f,30)).add(h),c.add(zr(d.add(r),18)).add(f),n)}function I1e(e,t=e.length){let n=_f.fromNumber(81,!0);if(t<=32)return t<=16?C1e(e,t):T1e(e,t);if(t<=64)return _1e(e,t);let r=n,o=n.mul(Tf).add(113),i=fF(o.mul(Oo).add(113)).mul(Oo),s=[_f.UZERO,_f.UZERO],a=[_f.UZERO,_f.UZERO];r=r.mul(Oo).add(Rn(e,0));let u=0,c=(t-1>>6)*64,d=c+(t-1&63)-63;do r=zr(r.add(o).add(s[0]).add(Rn(e,u+8)),37).mul(Tf),o=zr(o.add(s[1]).add(Rn(e,u+48)),42).mul(Tf),r=r.xor(a[1]),o=o.add(s[0]).add(Rn(e,u+40)),i=zr(i.add(a[0]),33).mul(Tf),s=h_(e,u,s[1].mul(Tf),r.add(a[0])),a=h_(e,u+32,i.add(a[1]),o.add(Rn(e,u+16))),[i,r]=[r,i],u+=64;while(u!==c);let f=Tf.add(i.and(255).shl(1));return u=d,a[0]=a[0].add(t-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),r=zr(r.add(o).add(s[0]).add(Rn(e,u+8)),37).mul(f),o=zr(o.add(s[1]).add(Rn(e,u+48)),42).mul(f),r=r.xor(a[1].mul(9)),o=o.add(s[0].mul(9).add(Rn(e,u+40))),i=zr(i.add(a[0]),33).mul(f),s=h_(e,u,s[1].mul(f),r.add(a[0])),a=h_(e,u+32,i.add(a[1]),o.add(Rn(e,u+16))),[i,r]=[r,i],jl(jl(s[0],a[0],f).add(fF(o).mul(CH)).add(i),jl(s[1],a[1],f).add(r),f)}function S1e(e,t){return t==="string"?Mm(e):Om([e],t)}function D1e(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function Om(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=zl(e)),z().getBool("DEBUG")&&tF(e,t),D1e(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){let n=new Uint8Array(e.length);for(let r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${t}`)}function If(){return z().platform.now()}function N1e(e,t){return z().platform.fetch(e,t)}function Mm(e,t="utf-8"){return t=t||"utf-8",z().platform.encode(e,t)}function Fm(e,t="utf-8"){return t=t||"utf-8",z().platform.decode(e,t)}function yo(e){return z().platform.isTypedArray!=null?z().platform.isTypedArray(e):f_(e)}function zl(e,t=[],n=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||xf(e)||e==null||yo(e)&&n)t.push(e);else if(Array.isArray(e)||yo(e))for(let r=0;r<e.length;++r)zl(e[r],t,n);else{let r=-1;for(let o of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)zl(e[o],t,n)}return t}var m_=class{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new hF)}profileKernel(t,n,r){let o,i=()=>{o=r()},s,a=If();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(let c of o)c.dataSync();s=Promise.resolve({kernelMs:If()-a})}if(z().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){let d=o[c];d.data().then(f=>{A1e(f,d.dtype,t)})}return{kernelName:t,outputs:o,inputs:n,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(t){let{kernelName:n,outputs:r,timeMs:o,inputs:i,extraInfo:s}=t;r.forEach(a=>{Promise.all([a.data(),o,s]).then(u=>{this.logger.logKernelProfile(n,a,u[0],u[1],i,u[2])})})}};function A1e(e,t,n){if(t!=="float32")return!1;for(let r=0;r<e.length;r++){let o=e[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}var hF=class{logKernelProfile(t,n,r,o,i,s){let a=typeof o=="number"?vf(`${o}ms`,9):o.error,u=vf(t,25),c=n.rank,d=n.size,f=vf(n.shape.toString(),14),h="";for(let m in i){let v=i[m];if(v!=null){let x=v.shape||n.shape,b=x.length;h+=`${m}: ${b}D ${b>0?x:""} `}}console.log(`%c${u}	%c${a}	%c${c}D ${f}	%c${d}	%c${h}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function _H(e,t,n){let r={},o={};for(let u=0;u<t.length;u++)r[t[u].id]=!0;for(let u=0;u<e.length;u++){let c=e[u],d=c.inputs;for(let f in d){let h=d[f],m=!1;for(let v=0;v<t.length;v++)if(r[h.id]){c.outputs.forEach(x=>r[x.id]=!0),m=!0,o[c.id]=!0;break}if(m)break}}let i={};i[n.id]=!0;let s={};for(let u=e.length-1;u>=0;u--){let c=e[u],d=c.inputs;for(let f=0;f<c.outputs.length;f++)if(i[c.outputs[f].id]){for(let h in d)i[d[h].id]=!0,s[c.id]=!0;break}}let a=[];for(let u=0;u<e.length;u++){let c=e[u];if(o[c.id]&&s[c.id]){let d={};for(let h in c.inputs){let m=c.inputs[h];r[m.id]&&(d[h]=m)}let f=Object.assign({},c);f.inputs=d,f.outputs=c.outputs,a.push(f)}}return a}function IH(e,t,n,r){for(let o=t.length-1;o>=0;o--){let i=t[o],s=[];if(i.outputs.forEach(u=>{let c=e[u.id];c!=null?s.push(c):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let a=i.gradient(s);for(let u in i.inputs){if(!(u in a))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(a)}.`);let c=n(()=>a[u]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${c.dtype}'`);let d=i.inputs[u];if(!Mi(c.shape,d.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${u}' has shape '${c.shape}', which does not match the shape of the input '${d.shape}'`);if(e[d.id]==null)e[d.id]=c;else{let f=e[d.id];e[d.id]=r(f,c),f.dispose()}}}}var SH=20,a0=3,mF=7;function DH(e,t,n,r){let o=Eu(t),i=R1e(e,t,n,o),s=t.length,a=g_(e,t,n,o,i),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${s}`),u.push(`  shape: [${t}]`),u.push("  values:")),u.push(a.map(c=>"    "+c).join(`
`)),u.join(`
`)}function R1e(e,t,n,r){let o=mt(t),i=r[r.length-1],s=new Array(i).fill(0),a=t.length,u=n==="complex64"?c0(e):e;if(a>1)for(let c=0;c<o/i;c++){let d=c*i;for(let f=0;f<i;f++)s[f]=Math.max(s[f],u0(u[d+f],0,n).length)}return s}function u0(e,t,n){let r;return Array.isArray(e)?r=`${parseFloat(e[0].toFixed(mF))} + ${parseFloat(e[1].toFixed(mF))}j`:nm(e)?r=`'${e}'`:n==="bool"?r=NH(e):r=parseFloat(e.toFixed(mF)).toString(),vf(r,t)}function NH(e){return e===0?"false":"true"}function g_(e,t,n,r,o,i=!0){let s=n==="complex64"?2:1,a=t[0],u=t.length;if(u===0){if(n==="complex64"){let x=c0(e);return[u0(x[0],0,n)]}return n==="bool"?[NH(e[0])]:[e[0].toString()]}if(u===1){if(a>SH){let b=a0*s,C=Array.from(e.slice(0,b)),S=Array.from(e.slice((a-a0)*s,a*s));return n==="complex64"&&(C=c0(C),S=c0(S)),["["+C.map((O,F)=>u0(O,o[F],n)).join(", ")+", ..., "+S.map((O,F)=>u0(O,o[a-a0+F],n)).join(", ")+"]"]}return["["+(n==="complex64"?c0(e):Array.from(e)).map((b,C)=>u0(b,o[C],n)).join(", ")+"]"]}let c=t.slice(1),d=r.slice(1),f=r[0]*s,h=[];if(a>SH){for(let x=0;x<a0;x++){let b=x*f,C=b+f;h.push(...g_(e.slice(b,C),c,n,d,o,!1))}h.push("...");for(let x=a-a0;x<a;x++){let b=x*f,C=b+f;h.push(...g_(e.slice(b,C),c,n,d,o,x===a-1))}}else for(let x=0;x<a;x++){let b=x*f,C=b+f;h.push(...g_(e.slice(b,C),c,n,d,o,x===a-1))}let m=u===2?",":"";h[0]="["+(a>0?h[0]+m:"");for(let x=1;x<h.length-1;x++)h[x]=" "+h[x]+m;let v=`,
`;for(let x=2;x<u;x++)v+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":v),h}function c0(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var _s=class{constructor(t,n,r){if(this.dtype=n,this.shape=t.slice(),this.size=mt(t),r!=null){let o=r.length;M(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||XE(n,this.size),this.strides=Eu(t)}set(t,...n){n.length===0&&(n=[0]),M(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);let r=this.locToIndex(n);this.values[r]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(let o of t){if(o<0||o>=this.shape[n]){let i=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=this.strides[o]*t[o];return this.values[r]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];let n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return Fa().makeTensor(this.values,this.shape,this.dtype)}},Fa=null,Pm=null,k1e=null;function AH(e){Fa=e}function RH(e){Pm=e}function kH(e){k1e=e}var Jt=class{constructor(t,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=mt(t),this.strides=Eu(t),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return ne(this,null,function*(){let t=yield this.data();return Pm.buffer(this.shape,this.dtype,t)})}bufferSync(){return Pm.buffer(this.shape,this.dtype,this.dataSync())}array(){return ne(this,null,function*(){let t=yield this.data();return yf(this.shape,t,this.dtype==="complex64")})}arraySync(){return yf(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return ne(this,null,function*(){this.throwIfDisposed();let t=Fa().read(this.dataId);if(this.dtype==="string"){let n=yield t;try{return n.map(r=>Fm(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t})}dataToGPU(t){return this.throwIfDisposed(),Fa().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();let t=Fa().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>Fm(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}bytes(){return ne(this,null,function*(){this.throwIfDisposed();let t=yield Fa().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Fa().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return Pm.print(this,t)}clone(){return this.throwIfDisposed(),Pm.clone(this)}toString(t=!1){let n=this.dataSync();return DH(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),Pm.cast(this,t)}variable(t=!0,n,r){return this.throwIfDisposed(),Fa().makeVariable(this,t,n,r)}};Object.defineProperty(Jt,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function gF(){return Xv("Tensor",()=>Jt)}gF();var wc=class extends Jt{constructor(t,n,r,o){super(t.shape,t.dtype,t.dataId,o),this.trainable=n,this.name=r}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!Mi(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);Fa().disposeTensor(this),this.dataId=t.dataId,Fa().incRef(this,null)}dispose(){Fa().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(wc,Symbol.hasInstance,{value:e=>e instanceof Jt&&e.assign!=null&&e.assign instanceof Function});var OH=function(e){return e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64",e}(OH||{}),MH=function(e){return e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64",e}(MH||{}),FH=function(e){return e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64",e}(FH||{}),PH=function(e){return e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64",e}(PH||{}),O1e={float32:FH,int32:OH,bool:MH,complex64:PH};function vo(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return O1e[e][t]}function Sf(e){return vo(e,"int32")}function y_(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function v_(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}function ft(e,t){if(e.dtype===t.dtype)return[e,t];let n=vo(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function $H(e,t){M(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function x_(e){let t=[];return LH(e,t,new Set),t}function LH(e,t,n){if(e==null)return;if(e instanceof Jt){t.push(e);return}if(!M1e(e))return;let r=e;for(let o in r){let i=r[o];n.has(i)||(n.add(i),LH(i,t,n))}}function M1e(e){return Array.isArray(e)||typeof e=="object"}function yF(e){return e.kernelName!=null}var b_=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(let t in this.registeredVariables)this.registeredVariables[t].dispose()}},F1e=(()=>{class e{constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new b_}ready(){return ne(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r];if(yield this.initializeBackend(o).success){yield this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:n,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry))if(n in this.registryFactory){let{asyncInit:r}=this.initializeBackend(n);if(r)return null}else return null;return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,r,o=1){return n in this.registryFactory?(bc(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:r,priority:o},!0)}setBackend(n){return ne(this,null,function*(){if(this.registryFactory[n]==null)throw new Error(`Backend name '${n}' not found in registry`);if(this.backendName=n,this.registry[n]==null){this.backendInstance=null;let{success:r,asyncInit:o}=this.initializeBackend(n);if(!(o?yield r:r))return!1}return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new m_(this.backendInstance),!0})}setupRegisteredKernels(){cF(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){cF(n).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[n])})}initializeBackend(n){let r=this.registryFactory[n];if(r==null)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{let o=r.factory();if(o&&!(o instanceof gf)&&typeof o.then=="function"){let i=++this.pendingBackendInitId,s=o.then(a=>i<this.pendingBackendInitId?!1:(this.registry[n]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,bc(`Initialization of backend ${n} failed`),bc(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[n]=o,{success:!0,asyncInit:!1}}catch(o){return bc(`Initialization of backend ${n} failed`),bc(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,r)=>this.registryFactory[r].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r],{success:i,asyncInit:s}=this.initializeBackend(o);if(s||i)return{name:o,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,r){let o=this.state.tensorInfo.get(r),i=o.backend,s=this.readSync(r),a=i.refCount(r);i.disposeData(r,!0),o.backend=n,n.move(r,s,o.shape,o.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,r){let o=null;if(r==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");r=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}let i;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(i),()=>(i=r(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(n,r,o){n();try{let i=o();return r(),i}catch(i){throw r(),i}}nextTensorId(){return e.nextTensorId++}nextVariableId(){return e.nextVariableId++}clone(n){let r=k.runKernel(wf,{x:n}),o={x:n},i=a=>({x:()=>{let u="float32",c={x:a},d={dtype:u};return k.runKernel(bf,c,d)}}),s=[];return this.addTapeNode(this.state.activeScope.name,o,[r],i,s,{}),r}runKernel(n,r,o){if(this.backendName==null&&this.backend,!(Am(n,this.backendName)!=null))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:r,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,r,o){let i=this.backend.numDataIds(),s=0;o.forEach(c=>{s+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=i-r-s-a;if(u>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${u} data ids) after running '${n}'`)}runKernelFunc(n){let r,o=[],i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let u;this.backendName==null&&this.backend;let c,d=yF(n)?n.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(yF(n)){let{kernelName:x,inputs:b,attrs:C}=n;this.backendName==null&&this.backend;let S=Am(x,this.backendName);M(S!=null,()=>`Cannot find registered kernel '${x}' for backend '${this.backendName}'`),u=()=>{let O=this.backend.numDataIds();c=S.kernelFunc({inputs:b,attrs:C,backend:this.backend});let F=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(x,O,F);let B=F.map(H=>H.rank!=null?H:this.makeTensorFromTensorInfo(H));if(i){let H=this.getTensorsForGradient(x,b,B);o=this.saveTensorsForBackwardMode(H)}return B}}else{let{forwardFunc:x}=n,b=C=>{i&&(o=C.map(S=>this.keep(this.clone(S))))};u=()=>{let C=this.backend.numDataIds();c=this.tidy(()=>x(this.backend,b));let S=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(d,C,S),S}}let{inputs:f,attrs:h}=n,m=yF(n)?null:n.backwardsFunc,v;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?r=u():(v=this.profiler.profileKernel(d,f,()=>u()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(v),r=v.outputs)}),i&&this.addTapeNode(d,f,r,m,o,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:d,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(f).map(x=>f[x]!=null?f[x].shape:null),outputShapes:r.map(x=>x.shape),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(c)?r:r[0]}saveTensorsForBackwardMode(n){return n.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(n,r,o){let i=uF(n);if(i!=null){let s=i.inputsToSave||[],a=i.outputsToSave||[],u;i.saveAllInputs?(M(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),u=Object.keys(r).map(d=>r[d])):u=s.map(d=>r[d]);let c=o.filter((d,f)=>a[f]);return u.concat(c)}return[]}makeTensor(n,r,o,i){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",i=i||this.backend;let s=n;o==="string"&&nm(n[0])&&(s=n.map(c=>Mm(c)));let a=i.write(s,r,o),u=new Jt(r,o,a,this.nextTensorId());if(this.trackTensor(u,i),o==="string"){let c=this.state.tensorInfo.get(a),d=rF(s);this.state.numBytes+=d-c.bytes,c.bytes=d}return u}makeTensorFromDataId(n,r,o,i){o=o||"float32";let s={dataId:n,shape:r,dtype:o};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(n,r){let{dataId:o,shape:i,dtype:s}=n,a=new Jt(i,s,o,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(n,r=!0,o,i){o=o||this.nextVariableId().toString(),i!=null&&i!==n.dtype&&(n=n.cast(i));let s=new wc(n,r,o,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(n,r){this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++;let o=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(o=n.size*tm(n.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:r||this.backend,dtype:n.dtype,shape:n.shape,bytes:o})),n instanceof wc||this.track(n)}incRef(n,r){this.trackTensor(n,r),this.backend.incRef(n.dataId)}removeDataId(n,r){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===r&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;let r=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,n.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),n.dtype!=="complex64"&&n.dtype!=="string"){let o=n.size*tm(n.dtype);this.state.numBytes-=o}r.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,r.backend)}disposeVariables(){for(let n in this.state.registeredVariables){let r=this.state.registeredVariables[n];this.disposeVariable(r)}}disposeVariable(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]}memory(){let n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}profile(n){return ne(this,null,function*(){this.state.profiling=!0;let r=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-o;for(let i of this.state.activeProfile.kernels)i.kernelTimeMs=yield i.kernelTimeMs,i.extraInfo=yield i.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(n,r,o,i,s,a){let u={id:this.state.nextTapeNodeId++,kernelName:n,inputs:r,outputs:o,saved:s},c=uF(n);c!=null&&(i=c.gradFunc),i!=null&&(u.gradient=d=>(d=d.map((f,h)=>{if(f==null){let m=o[h],v=im(m.size,m.dtype);return this.makeTensor(v,m.shape,m.dtype)}return f}),i(d.length>1?d:d[0],s,a))),this.state.activeTape.push(u)}keep(n){return n.kept=!0,n}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){let r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(r.name=n),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(n){let r=x_(n),o=new Set(r.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let a=this.state.activeScope.track[s];!a.kept&&!o.has(a.id)&&a.dispose()}let i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(n,r,o,i=!1){if(M(r.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${o.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));M(s instanceof Jt,()=>"The result y returned by f() must be a tensor.");let a=_H(this.state.activeTape,r,s);if(!i&&a.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let u={};u[s.id]=o??P1e(s.shape),IH(u,a,d=>this.tidy(d),$1e);let c=r.map(d=>u[d.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(d=>{for(let f of d.saved)f.dispose()}),this.state.activeTape=null),{value:s,grads:c}})}customGrad(n){return M(rm(n),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{M(r.every(u=>u instanceof Jt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o,i={};r.forEach((u,c)=>{i[c]=u});let s=(u,c)=>(o=n(...r,c),M(o.value instanceof Jt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),M(rm(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),a=(u,c)=>{let d=o.gradFunc(u,c),f=Array.isArray(d)?d:[d];M(f.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),M(f.every(m=>m instanceof Jt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let h={};return f.forEach((m,v)=>{h[v]=()=>m}),h};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,r){return this.state.tensorInfo.get(n).backend.readToGPU(n,r)}time(n){return ne(this,null,function*(){let r=If(),o=yield this.backend.time(n);return o.wallMs=If()-r,o})}track(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new b_;for(let n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return e.nextTensorId=0,e.nextVariableId=0,e})();function P1e(e){let t=qv(mt(e),"float32");return k.makeTensor(t,e,"float32")}function vF(){let e=sF();if(e._tfengine==null){let t=new Kv(e);e._tfengine=new F1e(t)}return Zz(e._tfengine.ENV),AH(()=>e._tfengine),e._tfengine}var k=vF();function $1e(e,t){let n={a:e,b:t};return k.runKernel(Gl,n)}var Hl={};nn(Hl,{isBrowser:()=>bF,isMobile:()=>B1e,mockIsMobile:()=>V1e});function L1e(){return typeof navigator<"u"&&navigator!=null}var xF;function V1e(e){xF=e}function B1e(e){if(xF!==void 0)return xF;if(e||L1e()){if(e||(e=navigator),e.product==="ReactNative")return!0;let t=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");if(!t){let n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function bF(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var ni=z();ni.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ni.registerFlag("IS_BROWSER",()=>bF());ni.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ni.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ni.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ni.registerFlag("PROD",()=>!1);ni.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ni.getBool("DEBUG"));ni.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ni.registerFlag("IS_TEST",()=>!1);ni.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ni.getBool("DEBUG"));ni.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ni.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ni.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function ri(e,t){let n=e;if(yo(e))return t==="string"?[]:[e.length];if(y_(e)){let o=e.channels||"RGBA";return[e.height,e.width*o.length]}else if(v_(e))return[e.buffer.size/(t==null?4:tm(t))];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||yo(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&z().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&BH(e,r,[]),r}function BH(e,t,n){if(n=n||[],!Array.isArray(e)&&!yo(e)){M(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}M(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),M(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);let r=t.slice(1);for(let o=0;o<e.length;++o)BH(e[o],r,n.concat(o))}function VH(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function _(e,t,n,r="numeric"){if(e instanceof gF())return VH(r,e.dtype,t,n),e;let o=Ul(e);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),VH(r,o,t,n),e==null||!yo(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){let u=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}let i=ri(e,o);!yo(e)&&!Array.isArray(e)&&(e=[e]);let a=o!=="string"?Om(e,o):zl(e,[],!0);return k.makeTensor(a,i,o)}function Df(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((i,s)=>_(i,`${t}[${s}]`,n,r))}var wF="__op";function D(e){let t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+wF;let o=(...i)=>{k.startScope(n);try{let s=r(...i);return xf(s)&&console.error("Cannot return a Promise inside of tidy."),k.endScope(s),s}catch(s){throw k.endScope(null),s}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}function U1e(e,t){let n=_(e,"real","complex"),r=_(t,"imag","complex");Un(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);let o={real:n,imag:r};return k.runKernel(Zv,o)}var oi=D({complex_:U1e});function Mo(e,t,n,r){if(r==null)r=Ul(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(v_(e)||y_(e)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return k.backend.createTensorFromGPUData(e,t||n,r)}if(!yo(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){An(t);let o=mt(t),i=mt(n);M(o===i,()=>`Based on the provided shape, [${t}], the tensor should have ${o} values but has ${i}`);for(let s=0;s<n.length;++s){let a=n[s],u=s===n.length-1?a!==mt(t.slice(s)):!0;M(n[s]===t[s]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!yo(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?Om(e,r):zl(e,[],!0),k.makeTensor(e,t,r)}function Fo(e,t,n){let r=ri(e,n);return Mo(e,t,r,n)}var Ec={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var to=class e{static join(t){return new e(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(r=>yo(r)?r.buffer:r),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let n=0;for(let r=0;r<t.length;r++){let o=t[r];r!==t.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=n+o.byteLength;this.shards.push({buffer:o,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);let r=this.findShardForByte(t);if(r===-1)throw new Error(`Could not find start shard for byte ${t}`);let o=n-t,i=new ArrayBuffer(o),s=new Uint8Array(i),a=0;for(let u=r;u<this.shards.length;u++){let c=this.shards[u],f=t+a-c.start,h=a,v=Math.min(n,c.end)-c.start,x=new Uint8Array(c.buffer,f,v-f);if(s.set(x,h),a+=x.length,n<c.end)break}return i}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(o){return t<o.start?-1:t>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=G1e(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function G1e(e,t){let n=0,r=e.length;for(;n<=r;){let o=Math.floor((r-n)/2)+n,i=t(e[o]);if(i===0)return o;i<0?r=o:n=o+1}return-1}function j1e(e){z().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}kH(j1e);function Cc(){return k}function ze(e,t){return k.tidy(e,t)}function Wt(e){x_(e).forEach(n=>n.dispose())}function ii(e){return k.keep(e)}function UH(){return k.backendName}function GH(e,t,n=1){return k.registerBackend(e,t,n)}function jH(){return k.backend}var Wl=4;function WH(e,t){return ne(this,null,function*(){let n=[],r=[],o=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);for(let s=0;s<o.length;++s){let a=o[s],u=Array.isArray(e)?e[s].tensor:e[a];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${u.dtype}`);let c={name:a,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){let d=new Promise(f=>ne(this,null,function*(){let h=yield u.bytes(),m=h.reduce((b,C)=>b+C.length,0)+Wl*h.length,v=new Uint8Array(m),x=0;for(let b=0;b<h.length;b++){let C=h[b],S=new Uint8Array(new Uint32Array([C.length]).buffer);v.set(S,x),x+=Wl,v.set(C,x),x+=C.length}f(v)}));r.push(d)}else r.push(u.data());t!=null&&(c.group=t),n.push(c)}let i=yield Promise.all(r);return{data:W1e(i),specs:n}})}function w_(e,t){let n=new to(e),r={},o=0;for(let i of t){let s=z1e(i,(a,u)=>n.slice(o+a,o+u));r[i.name]=qH(i,n.slice(o,o+s)),o+=s}return r}function z1e(e,t){let n=mt(e.shape),r;if("quantization"in e){let o=e.quantization;r=Ec[o.dtype]}else if(e.dtype==="string"){let o=0;for(let i=0;i<n;i++)o+=Wl+new Uint32Array(t(o,o+Wl))[0];return o}else r=Ec[e.dtype];return n*r}function H1e(e,t){return ne(this,null,function*(){let n=mt(e.shape),r;if("quantization"in e){let o=e.quantization;r=Ec[o.dtype]}else if(e.dtype==="string"){let o=0;for(let i=0;i<n;i++)o+=Wl+new Uint32Array(yield t(o,o+Wl))[0];return o}else r=Ec[e.dtype];return n*r})}function qH(e,t){let n=e.name,r=e.dtype,o=e.shape,i=mt(o),s,a=0;if("quantization"in e){let u=e.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${e.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${e.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${e.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=Ec[u.dtype],d=u.dtype==="uint8"?new Uint8Array(t):new Uint16Array(t);if(r==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){s=new Float32Array(d.length);for(let f=0;f<d.length;f++){let h=d[f];s[f]=h*u.scale+u.min}}else if(u.dtype==="float16")s=Y1e()(d);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(r==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);s=new Int32Array(d.length);for(let f=0;f<d.length;f++){let h=d[f];s[f]=Math.round(h*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*c}else if(r==="string"){let u=mt(e.shape);s=[];for(let c=0;c<u;c++){let d=new Uint32Array(t.slice(a,a+Wl))[0];a+=Wl;let f=new Uint8Array(t.slice(a,a+d));s.push(f),a+=d}}else{let u=Ec[r];if(r==="float32")s=new Float32Array(t);else if(r==="int32")s=new Int32Array(t);else if(r==="bool")s=new Uint8Array(t);else if(r==="complex64"){s=new Float32Array(t);let c=new Float32Array(s.length/2),d=new Float32Array(s.length/2);for(let v=0;v<c.length;v++)c[v]=s[v*2],d[v]=s[v*2+1];let f=Fo(c,o,"float32"),h=Fo(d,o,"float32"),m=oi(f,h);return f.dispose(),h.dispose(),m}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*u}return Fo(s,o,r)}function zH(e,t,n){return ne(this,null,function*(){let r=new Uint8Array(t);for(;r.byteLength<n;){let{done:o,value:i}=yield e.read();if(o&&i==null){let a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let s=new Uint8Array(r.length+i.byteLength);s.set(r,0),s.set(new Uint8Array(i),r.length),r=s}return r.buffer})}function E_(e,t){return ne(this,null,function*(){let n={},r=e.getReader(),o=new ArrayBuffer(0);for(let i of t){let s=yield H1e(i,(c,d)=>ne(this,null,function*(){return o=yield zH(r,o,d),o.slice(c,d)}));o=yield zH(r,o,s);let a=o.slice(0,s);o=o.slice(s);let u=qH(i,a);if(n[i.name]=u,UH()==="webgpu"){let c=jH();"uploadToGPU"in c&&mt(u.shape)>=z().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(u.dataId)}}return n})}function W1e(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0,n=[];e.forEach(i=>{if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});let r=new Uint8Array(t),o=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}var EF=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function HH(e){return EF?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function KH(e){if(EF)return Buffer.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let r=0,o=t.length;r<o;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function XH(e){if(EF){let r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function YH(e){return to.join(e)}function CF(e){let t="/";for(e=e.trim();e.endsWith(t);)e=e.slice(0,e.length-1);let n=e.split(t);return n[n.length-1]}function C_(e,t){let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function TF(e,t,n){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}function $m(e,t){return ne(this,null,function*(){let n,r;return e.weightsManifest!=null&&([n,r]=yield t(e.weightsManifest)),TF(e,n,r)})}function Cu(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:HH(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:HH(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new to(e.weightData).byteLength}}function l0(e){let t=[];for(let n of e)t.push(...n.weights);return t}function q1e(){let e=n=>{let r=n<<13,o=0;for(;!(r&8388608);)o-=8388608,r<<=1;return r&=-8388609,o+=947912704,r|o},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function K1e(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function X1e(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function Y1e(){let e=q1e(),t=K1e(),n=X1e();return r=>{let o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let s=0;s<r.length;s++){let a=r[s],u=e[n[a>>10]+(a&1023)]+t[a>>10];i[s]=u}return new Float32Array(o)}}var kr=class e{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return e.instance==null&&(e.instance=new e),e.instance}static registerSaveRouter(t){e.getInstance().saveRouters.push(t)}static registerLoadRouter(t){e.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return e.getHandlers(t,"save")}static getLoadHandlers(t,n){return e.getHandlers(t,"load",n)}static getHandlers(t,n,r){let o=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(s=>{let a=s(t,r);a!==null&&o.push(a)}),o}},ZH=e=>kr.registerSaveRouter(e),QH=e=>kr.registerLoadRouter(e),JH=e=>kr.getSaveHandlers(e),eW=(e,t)=>kr.getLoadHandlers(e,t);var _F="tensorflowjs",IF=1,Nf="models_store",ql="model_info_store";function tW(){if(!z().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function SF(e){let t=e.result;t.createObjectStore(Nf,{keyPath:"modelPath"}),t.createObjectStore(ql,{keyPath:"modelPath"})}var Af=(()=>{class e{constructor(n){if(this.indexedDB=tW(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}save(n){return ne(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,n)})}load(){return ne(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(n,r){return new Promise((o,i)=>{let s=this.indexedDB.open(_F,IF);s.onupgradeneeded=()=>SF(s),s.onsuccess=()=>{let a=s.result;if(r==null){let u=a.transaction(Nf,"readonly"),d=u.objectStore(Nf).get(this.modelPath);d.onsuccess=()=>{if(d.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(d.result.modelArtifacts)},d.onerror=f=>(a.close(),i(d.error)),u.oncomplete=()=>a.close()}else{r.weightData=to.join(r.weightData);let u=Cu(r),c=a.transaction(ql,"readwrite"),d=c.objectStore(ql),f;try{f=d.put({modelPath:this.modelPath,modelArtifactsInfo:u})}catch(m){return i(m)}let h;f.onsuccess=()=>{h=a.transaction(Nf,"readwrite");let m=h.objectStore(Nf),v;try{v=m.put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:u})}catch(x){return i(x)}v.onsuccess=()=>o({modelArtifactsInfo:u}),v.onerror=x=>{d=c.objectStore(ql);let b=d.delete(this.modelPath);b.onsuccess=()=>(a.close(),i(v.error)),b.onerror=C=>(a.close(),i(v.error))}},f.onerror=m=>(a.close(),i(f.error)),c.oncomplete=()=>{h==null?a.close():h.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}return e.URL_SCHEME="indexeddb://",e})();var nW=e=>z().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Af.URL_SCHEME)?Z1e(e.slice(Af.URL_SCHEME.length)):null;kr.registerSaveRouter(nW);kr.registerLoadRouter(nW);function Z1e(e){return new Af(e)}function Q1e(e){return e.startsWith(Af.URL_SCHEME)?e.slice(Af.URL_SCHEME.length):e}var T_=class{constructor(){this.indexedDB=tW()}listModels(){return ne(this,null,function*(){return new Promise((t,n)=>{let r=this.indexedDB.open(_F,IF);r.onupgradeneeded=()=>SF(r),r.onsuccess=()=>{let o=r.result,i=o.transaction(ql,"readonly"),a=i.objectStore(ql).getAll();a.onsuccess=()=>{let u={};for(let c of a.result)u[c.modelPath]=c.modelArtifactsInfo;t(u)},a.onerror=u=>(o.close(),n(a.error)),i.oncomplete=()=>o.close()},r.onerror=o=>n(r.error)})})}removeModel(t){return ne(this,null,function*(){return t=Q1e(t),new Promise((n,r)=>{let o=this.indexedDB.open(_F,IF);o.onupgradeneeded=()=>SF(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(ql,"readwrite"),a=s.objectStore(ql),u=a.get(t),c;u.onsuccess=()=>{if(u.result==null)return i.close(),r(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{let d=a.delete(t),f=()=>{c=i.transaction(Nf,"readwrite");let m=c.objectStore(Nf).delete(t);m.onsuccess=()=>n(u.result.modelArtifactsInfo),m.onerror=v=>r(u.error)};d.onsuccess=f,d.onerror=h=>(f(),i.close(),r(u.error))}},u.onerror=d=>(i.close(),r(u.error)),s.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},o.onerror=i=>r(o.error)})})}};var Tc="/",Lm="tensorflowjs_models",rW="info",J1e="model_topology",ebe="weight_specs",tbe="weight_data",nbe="model_metadata";function oW(e){return{info:[Lm,e,rW].join(Tc),topology:[Lm,e,J1e].join(Tc),weightSpecs:[Lm,e,ebe].join(Tc),weightData:[Lm,e,tbe].join(Tc),modelMetadata:[Lm,e,nbe].join(Tc)}}function iW(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}function rbe(e){let t=e.split(Tc);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(Tc)}function obe(e){return e.startsWith(Rf.URL_SCHEME)?e.slice(Rf.URL_SCHEME.length):e}var Rf=(()=>{class e{constructor(n){if(!z().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=oW(this.modelPath)}save(n){return ne(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let r=JSON.stringify(n.modelTopology),o=JSON.stringify(n.weightSpecs),i=Cu(n),s=to.join(n.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,KH(s));let a={format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,signature:n.signature!=null?n.signature:void 0,userDefinedMetadata:n.userDefinedMetadata!=null?n.userDefinedMetadata:void 0,modelInitializer:n.modelInitializer!=null?n.modelInitializer:void 0,initializerSignature:n.initializerSignature!=null?n.initializerSignature:void 0,trainingConfig:n.trainingConfig!=null?n.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw iW(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}})}load(){return ne(this,null,function*(){let n=JSON.parse(this.LS.getItem(this.keys.info));if(n==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let r={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=o;let i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=i;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let u=JSON.parse(s);r.format=u.format,r.generatedBy=u.generatedBy,r.convertedBy=u.convertedBy,u.signature!=null&&(r.signature=u.signature),u.userDefinedMetadata!=null&&(r.userDefinedMetadata=u.userDefinedMetadata),u.modelInitializer!=null&&(r.modelInitializer=u.modelInitializer),u.initializerSignature!=null&&(r.initializerSignature=u.initializerSignature),u.trainingConfig!=null&&(r.trainingConfig=u.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=XH(a),r})}}return e.URL_SCHEME="localstorage://",e})();var sW=e=>z().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Rf.URL_SCHEME)?ibe(e.slice(Rf.URL_SCHEME.length)):null;kr.registerSaveRouter(sW);kr.registerLoadRouter(sW);function ibe(e){return new Rf(e)}var __=class{constructor(){M(z().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),M(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return ne(this,null,function*(){let t={},n=Lm+Tc,r=Tc+rW;for(let o=0;o<this.LS.length;++o){let i=this.LS.key(o);if(i.startsWith(n)&&i.endsWith(r)){let s=rbe(i);t[s]=JSON.parse(this.LS.getItem(i))}}return t})}removeModel(t){return ne(this,null,function*(){t=obe(t);let n=oW(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);let r=JSON.parse(this.LS.getItem(n.info));return iW(n),r})}};var Vm="://",Pa=class e{constructor(){this.managers={}}static getInstance(){return e.instance==null&&(e.instance=new e),e.instance}static registerManager(t,n){M(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(Vm)&&(t=t.slice(0,t.indexOf(Vm))),M(t.length>0,()=>"scheme must not be an empty string.");let r=e.getInstance();M(r.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),r.managers[t]=n}static getManager(t){let n=e.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(e.getInstance().managers)}};function I_(e){if(e.indexOf(Vm)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Pa.getSchemes().join(",")}`);return{scheme:e.split(Vm)[0],path:e.split(Vm)[1]}}function aW(e,t,n=!1){return ne(this,null,function*(){M(e!==t,()=>`Old path and new path are the same: '${e}'`);let r=kr.getLoadHandlers(e);M(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),M(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);let o=r[0],i=kr.getSaveHandlers(t);M(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),M(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);let s=i[0],a=I_(e).scheme,u=I_(e).path,c=a===I_(e).scheme,d=yield o.load();n&&c&&(yield Pa.getManager(a).removeModel(u));let f=yield s.save(d);return n&&!c&&(yield Pa.getManager(a).removeModel(u)),f.modelArtifactsInfo})}function uW(){return ne(this,null,function*(){let e=Pa.getSchemes(),t={};for(let n of e){let r=yield Pa.getManager(n).listModels();for(let o in r){let i=n+Vm+o;t[i]=r[o]}}return t})}function cW(e){return ne(this,null,function*(){let t=I_(e);return Pa.getManager(t.scheme).removeModel(t.path)})}function lW(e,t){return ne(this,null,function*(){return aW(e,t,!1)})}function dW(e,t){return ne(this,null,function*(){return aW(e,t,!0)})}var DF=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}setTimeoutCustom(t,n){if(typeof window>"u"||!z().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,n);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();let o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return f_(t)}};if(z().get("IS_BROWSER")){z().setPlatform("browser",new DF);try{Pa.registerManager(Rf.URL_SCHEME,new __)}catch{}try{Pa.registerManager(Af.URL_SCHEME,new T_)}catch{}}var abe={importFetch:()=>pW()},NF;var AF=class{constructor(){this.util=hW(),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return z().global.fetch!=null?z().global.fetch(t,n):(NF==null&&(NF=abe.importFetch()),NF(t,n))}now(){let t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}};z().get("IS_NODE")&&!z().get("IS_BROWSER")&&z().setPlatform("node",new AF);function wt(e,t="float32",n){return t=t||"float32",An(e),new _s(e,t,n)}function ube(e,t){let n=_(e,"x","cast");if(!nF(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:n},o={dtype:t};return k.runKernel(bf,r,o)}var Ct=D({cast_:ube});function cbe(e){let n={x:_(e,"x","clone","string_or_numeric")};return k.runKernel(wf,n)}var $i=D({clone_:cbe});function S_(e,t=!1){console.log(e.toString(t))}vF();var lbe={buffer:wt,cast:Ct,clone:$i,print:S_};RH(lbe);function dbe(e,t){let n=_(e,"a","add"),r=_(t,"b","add");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(Gl,o)}var _e=D({add_:dbe});function fbe(e,t){let n=_(e,"a","floorDiv"),r=_(t,"b","floorDiv");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(fm,o)}var D_=D({floorDiv_:fbe});function pbe(e,t){let n=_(e,"a","div"),r=_(t,"b","div");if([n,r]=ft(n,r),n.dtype==="int32"&&r.dtype==="int32")return D_(n,r);let o={a:n,b:r},i={};return k.runKernel(MC,o,i)}var Ze=D({div_:pbe});function hbe(e,t){let n=_(e,"a","mul"),r=_(t,"b","mul");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(bm,o)}var le=D({mul_:hbe});function mbe(e){let t=_(e,"x","abs");if(t.dtype==="complex64"){let n={x:t};return k.runKernel(mC,n)}else{let n={x:t};return k.runKernel(Yv,n)}}var Hr=D({abs_:mbe});function gbe(e){let n={x:_(e,"x","acos")};return k.runKernel(YE,n)}var mW=D({acos_:gbe});function ybe(e){let n={x:_(e,"x","acosh")};return k.runKernel(ZE,n)}var gW=D({acosh_:ybe});function vbe(e){M(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),M(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);let t=e.map((o,i)=>_(o,`tensors${i}`,"addN")),n=t[0];t.forEach(o=>{if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(o=>{if(!Mi(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=t;return k.runKernel(QE,r)}var yW=D({addN_:vbe});function xbe(e,t=null,n=!1){let o={x:_(e,"x","all","bool")},i={axis:t,keepDims:n};return k.runKernel(JE,o,i)}var vW=D({all_:xbe});function bbe(e,t=null,n=!1){let o={x:_(e,"x","any","bool")},i={axis:t,keepDims:n};return k.runKernel(eC,o,i)}var xW=D({any_:bbe});function wbe(e,t=0){let r={x:_(e,"x","argMax")},o={axis:t};return k.runKernel(tC,r,o)}var bW=D({argMax_:wbe});function Ebe(e,t=0){let r={x:_(e,"x","argMin")},o={axis:t};return k.runKernel(nC,r,o)}var wW=D({argMin_:Ebe});function Cbe(e){let n={x:_(e,"x","asin")};return k.runKernel(rC,n)}var EW=D({asin_:Cbe});function Tbe(e){let n={x:_(e,"x","asinh")};return k.runKernel(oC,n)}var CW=D({asinh_:Tbe});function _be(e){let n={x:_(e,"x","atan")};return k.runKernel(iC,n)}var TW=D({atan_:_be});function Ibe(e,t){let n=_(e,"a","atan2"),r=_(t,"b","atan2");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(aC,o)}var _W=D({atan2_:Ibe});function Sbe(e){let n={x:_(e,"x","atanh")};return k.runKernel(sC,n)}var IW=D({atanh_:Sbe});function Dbe(e,t,n,r,o="NHWC",i){let s=e[3],a=[...t,s],u=DW(o);return Mf(e,a,n,i,r,null,null,u)}function kF(e,t,n,r,o,i,s="channelsLast"){let[a,u]=d0(t),c;if(s==="channelsLast")c=[a,u,e[3],e[3]];else if(s==="channelsFirst")c=[a,u,e[1],e[1]];else throw new Error(`Unknown dataFormat ${s}`);return Mf(e,c,n,r,o,i,!1,s)}function Nbe(e,t,n,r,o,i,s="NDHWC"){let[a,u,c]=RF(t),d,f;if(s==="NDHWC")f="channelsLast",d=[a,u,c,e[4],e[4]];else if(s==="NCDHW")f="channelsFirst",d=[a,u,c,e[1],e[1]];else throw new Error(`Unknown dataFormat ${s}`);return SW(e,d,n,r,o,!1,f,i)}function Mf(e,t,n,r,o,i,s=!1,a="channelsLast"){let[u,c,d,f]=[-1,-1,-1,-1];if(a==="channelsLast")[u,c,d,f]=e;else if(a==="channelsFirst")[u,f,c,d]=e;else throw new Error(`Unknown dataFormat ${a}`);let[h,m,,v]=t,[x,b]=d0(n),[C,S]=d0(r),O=Um(h,C),F=Um(m,S),{padInfo:B,outHeight:H,outWidth:X}=kbe(o,c,d,x,b,O,F,i,a),Z=s?v*f:v,te;return a==="channelsFirst"?te=[u,Z,H,X]:a==="channelsLast"&&(te=[u,H,X,Z]),{batchSize:u,dataFormat:a,inHeight:c,inWidth:d,inChannels:f,outHeight:H,outWidth:X,outChannels:Z,padInfo:B,strideHeight:x,strideWidth:b,filterHeight:h,filterWidth:m,effectiveFilterHeight:O,effectiveFilterWidth:F,dilationHeight:C,dilationWidth:S,inShape:e,outShape:te,filterShape:t}}function SW(e,t,n,r,o,i=!1,s="channelsLast",a){let[u,c,d,f,h]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[u,c,d,f,h]=e;else if(s==="channelsFirst")[u,h,c,d,f]=e;else throw new Error(`Unknown dataFormat ${s}`);let[m,v,x,,b]=t,[C,S,O]=RF(n),[F,B,H]=RF(r),X=Um(m,F),Z=Um(v,B),te=Um(x,H),{padInfo:J,outDepth:ae,outHeight:ye,outWidth:Oe}=Obe(o,c,d,f,C,S,O,X,Z,te,a),Ye=i?b*h:b,Fe;return s==="channelsFirst"?Fe=[u,Ye,ae,ye,Oe]:s==="channelsLast"&&(Fe=[u,ae,ye,Oe,Ye]),{batchSize:u,dataFormat:s,inDepth:c,inHeight:d,inWidth:f,inChannels:h,outDepth:ae,outHeight:ye,outWidth:Oe,outChannels:Ye,padInfo:J,strideDepth:C,strideHeight:S,strideWidth:O,filterDepth:m,filterHeight:v,filterWidth:x,effectiveFilterDepth:X,effectiveFilterHeight:Z,effectiveFilterWidth:te,dilationDepth:F,dilationHeight:B,dilationWidth:H,inShape:e,outShape:Fe,filterShape:t}}function Abe(e,t,n,r,o){r==null&&(r=OF(e,t,n));let i=e[0],s=e[1],a=f0((i-t+2*r)/n+1,o),u=f0((s-t+2*r)/n+1,o);return[a,u]}function Rbe(e,t,n,r,o,i){o==null&&(o=OF(e,t[0],r[0]));let s=[0,0,0,n];for(let a=0;a<3;a++)e[a]+2*o>=t[a]&&(s[a]=f0((e[a]-t[a]+2*o)/r[a]+1,i));return s}function OF(e,t,n,r=1){let o=Um(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function d0(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function RF(e){return typeof e=="number"?[e,e,e]:e}function Um(e,t){return t<=1?e:e+(e-1)*(t-1)}function kbe(e,t,n,r,o,i,s,a,u){let c,d,f;if(typeof e=="number"){c={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};let m=Abe([t,n],i,r,e,a);d=m[0],f=m[1]}else if(e==="same"){d=Math.ceil(t/r),f=Math.ceil(n/o);let h=Math.max(0,(d-1)*r+i-t),m=Math.max(0,(f-1)*o+s-n),v=Math.floor(h/2),x=h-v,b=Math.floor(m/2),C=m-b;c={top:v,bottom:x,left:b,right:C,type:"SAME"}}else if(e==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((t-i+1)/r),f=Math.ceil((n-s+1)/o);else if(typeof e=="object"){let h=u==="channelsLast"?e[1][0]:e[2][0],m=u==="channelsLast"?e[1][1]:e[2][1],v=u==="channelsLast"?e[2][0]:e[3][0],x=u==="channelsLast"?e[2][1]:e[3][1];c={top:h,bottom:m,left:v,right:x,type:h===0&&m===0&&v===0&&x===0?"VALID":"EXPLICIT"},d=f0((t-i+h+m)/r+1,a),f=f0((n-s+v+x)/o+1,a)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:c,outHeight:d,outWidth:f}}function Obe(e,t,n,r,o,i,s,a,u,c,d){let f,h,m,v;if(e==="valid"&&(e=0),typeof e=="number"){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};let b=Rbe([t,n,r,1],[a,u,c],1,[o,i,s],e,d);h=b[0],m=b[1],v=b[2]}else if(e==="same"){h=Math.ceil(t/o),m=Math.ceil(n/i),v=Math.ceil(r/s);let x=(h-1)*o+a-t,b=(m-1)*i+u-n,C=(v-1)*s+c-r,S=Math.floor(x/2),O=x-S,F=Math.floor(b/2),B=b-F,H=Math.floor(C/2),X=C-H;f={top:F,bottom:B,left:H,right:X,front:S,back:O,type:"SAME"}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:f,outDepth:h,outHeight:m,outWidth:v}}function f0(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function Of(e){let[t,n,r]=d0(e);return t===1&&n===1&&r===1}function xo(e,t){return Of(e)||Of(t)}function Tu(e){return d0(e).every(t=>t>0)}function DW(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function or(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")M(xc(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(r=>{r.forEach(o=>{M(xc(o),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}function Mbe(e,t){let r={x:_(e,"x","reshape","string_or_numeric")},o={shape:t};return k.runKernel(ST,r,o)}var Q=D({reshape_:Mbe});function Fbe(e,t,n,r,o){let i=_(e,"x","avgPool","float32"),s=1;M(xo(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let a=i,u=!1;i.rank===3&&(u=!0,a=Q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),M(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),or("avgPool",r,o);let c={x:a},d={filterSize:t,strides:n,pad:r,dimRoundingMode:o},f=k.runKernel(uC,c,d);return f=Ct(f,i.dtype),u?Q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var N_=D({avgPool_:Fbe});function Pbe(e,t,n,r,o,i="NDHWC"){let s=_(e,"x","avgPool3d","float32"),a=s,u=!1;s.rank===4&&(u=!0,a=Q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),M(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),M(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),M(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),or("avgPool3d",r,o);let c={x:a},d={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},f=k.runKernel(cC,c,d);return f=Ct(f,a.dtype),u?Q(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var NW=D({avgPool3d_:Pbe});function $be(e,t=0){M(e.length>=1,()=>"Pass at least one tensor to concat");let n=Df(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return $i(n[0]);let r=n,o={axis:t};return k.runKernel(gC,r,o)}var sn=D({concat_:$be});function Lbe(e,t,n=!1,r=!1){let o=_(e,"a","matMul"),i=_(t,"b","matMul");[o,i]=ft(o,i);let s={a:o,b:i},a={transposeA:n,transposeB:r};return k.runKernel(lC,s,a)}var Vt=D({matMul_:Lbe});function Vbe(e){let n={x:_(e,"x","sigmoid","float32")};return k.runKernel(Cm,n)}var oa=D({sigmoid_:Vbe});function Bbe(e,t,n){let r=_(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let o={x:r},i={begin:t,size:n};return k.runKernel(t0,o,i)}var qe=D({slice_:Bbe});function Ube(e){let n={x:_(e,"x","tanh","float32")};return k.runKernel(n_,n)}var p0=D({tanh_:Ube});function Gbe(e,t,n,r,o,i){let s=_(e,"forgetBias","basicLSTMCell"),a=_(t,"lstmKernel","basicLSTMCell"),u=_(n,"lstmBias","basicLSTMCell"),c=_(r,"data","basicLSTMCell"),d=_(o,"c","basicLSTMCell"),f=_(i,"h","basicLSTMCell"),h=sn([c,f],1),m=Vt(h,a),v=_e(m,u),x=v.shape[0],b=v.shape[1]/4,C=[x,b],S=qe(v,[0,0],C),O=qe(v,[0,b],C),F=qe(v,[0,b*2],C),B=qe(v,[0,b*3],C),H=_e(le(oa(S),p0(O)),le(d,oa(_e(s,F)))),X=le(p0(H),oa(B));return[H,X]}var AW=D({basicLSTMCell_:Gbe});function jbe(e,t,n){let r=_(e,"x","batchToSpaceND"),o=t.reduce((a,u)=>a*u);M(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),M(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),M(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`);let i={x:r},s={blockShape:t,crops:n};return k.runKernel(dC,i,s)}var A_=D({batchToSpaceND_:jbe});function RW(e){let t;return e.rank===0||e.rank===1?t=Q(e,[1,1,1,e.size]):e.rank===2?t=Q(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}function zbe(e,t,n,r,o,i){i==null&&(i=.001);let s=_(e,"x","batchNorm"),a=_(t,"mean","batchNorm"),u=_(n,"variance","batchNorm"),c;o!=null&&(c=_(o,"scale","batchNorm"));let d;r!=null&&(d=_(r,"offset","batchNorm")),M(a.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M(d==null||a.rank===d.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let h={x:RW(s),scale:c,offset:d,mean:a,variance:u},m={varianceEpsilon:i},v=k.runKernel(GC,h,m);return Q(v,s.shape)}var Kl=D({batchNorm_:zbe});function Hbe(e,t,n,r,o,i){let s=_(e,"x","batchNorm"),a=_(t,"mean","batchNorm"),u=_(n,"variance","batchNorm"),c;o!=null&&(c=_(o,"scale","batchNorm"));let d;return r!=null&&(d=_(r,"offset","batchNorm")),M(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),M(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),M(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&M(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),d!=null&&M(d.rank===2||d.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${d.rank}.`),Kl(s,a,u,d,c,i)}var kW=D({batchNorm2d_:Hbe});function Wbe(e,t,n,r,o,i){let s=_(e,"x","batchNorm"),a=_(t,"mean","batchNorm"),u=_(n,"variance","batchNorm"),c;o!=null&&(c=_(o,"scale","batchNorm"));let d;return r!=null&&(d=_(r,"offset","batchNorm")),M(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),M(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),M(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&M(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),d!=null&&M(d.rank===3||d.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${d.rank}.`),Kl(s,a,u,d,c,i)}var OW=D({batchNorm3d_:Wbe});function qbe(e,t,n,r,o,i){let s=_(e,"x","batchNorm"),a=_(t,"mean","batchNorm"),u=_(n,"variance","batchNorm"),c;o!=null&&(c=_(o,"scale","batchNorm"));let d;return r!=null&&(d=_(r,"offset","batchNorm")),M(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),M(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),M(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&M(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),d!=null&&M(d.rank===4||d.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${d.rank}.`),Kl(s,a,u,d,c,i)}var MW=D({batchNorm4d_:qbe});function Kbe(e,t,n){let r=_(e,"x","bincount"),o=_(t,"weights","bincount");M(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),M(n>=0,()=>`size must be non-negative, but got ${n}.`),M(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);let i={x:r,weights:o},s={size:n};return k.runKernel(fC,i,s)}var R_=D({bincount_:Kbe});function Xbe(e,t){let n=_(e,"x","bitwiseAnd"),r=_(t,"y","bitwiseAnd");if(!Mi(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);let o={a:n,b:r};return k.runKernel(sm,o)}var FW=D({bitwiseAnd_:Xbe});function Ybe(e,t){let n=_(e,"s0","broadcastArgs","int32"),r=_(t,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);let o={s0:n,s1:r};return k.runKernel(pC,o)}var PW=D({broadcastArgs_:Ybe});function Zbe(e,t){let n=_(e,"broadcastTo","x"),r=n.shape;if(An(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){let c=n.shape.slice();for(;c.length<t.length;)c.unshift(1);n=Q(n,c)}let o=n.shape,i=Array.from(t);for(let c=t.length-1;c>=0;c--)if(o[c]===t[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(i.map((c,d)=>c>1?d:-1).filter(c=>c>=0).length===0)return $i(n);let a={x:n},u={reps:i};return k.runKernel(Dm,a,u)}var Xl=D({broadcastTo_:Zbe});function Qbe(e){let n={x:_(e,"x","ceil","float32")};return k.runKernel(am,n)}var $W=D({ceil_:Qbe});function Iu(e,t,n){An(e),n=n||Ul(t);let r={shape:e,value:t,dtype:n};return k.runKernel(BC,{},r)}function Jbe(e,t,n){let r=_(e,"x","clipByValue");if(M(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)return Iu(r.shape,t,r.dtype);let o={x:r},i={clipValueMin:t,clipValueMax:n};return k.runKernel(hC,o,i)}var k_=D({clipByValue_:Jbe});function ewe(e){return sn(e,0)}var LW=D({concat1d_:ewe});function twe(e,t){return sn(e,t)}var VW=D({concat2d_:twe});function nwe(e,t){return sn(e,t)}var BW=D({concat3d_:nwe});function rwe(e,t){return sn(e,t)}var UW=D({concat4d_:rwe});function owe(e,t,n,r,o="NHWC",i=[1,1],s){let a=_(e,"x","conv2d","float32"),u=_(t,"filter","conv2d","float32"),c=a,d=!1;a.rank===3&&(d=!0,c=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),M(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),or("conv2d",r,s);let f=o==="NHWC"?c.shape[3]:c.shape[1];M(f===u.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${u.shape[2]}.`),M(xo(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),M(Tu(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),M(Tu(n),()=>"Error in conv2D: Strides should be larger than 0.");let h={x:c,filter:u},m={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},v=k.runKernel(yC,h,m);return d?Q(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var Yl=D({conv2d_:owe});function iwe(e,t,n,r,o="NWC",i=1,s){let a=_(e,"x","conv1d"),u=_(t,"filter","conv1d"),c=a,d=!1;a.rank===2&&(d=!0,c=Q(a,[1,a.shape[0],a.shape[1]])),M(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),M(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),or("conv1d",r,s),M(c.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${u.shape[1]}.`),M(xo(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),M(Tu(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),M(Tu(n),()=>"Error in conv1D: Stride should be larger than 0."),M(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);let f=Q(u,[1,u.shape[0],u.shape[1],u.shape[2]]),h=Q(c,[c.shape[0],1,c.shape[1],c.shape[2]]),b=Yl(h,f,[1,n],r,"NHWC",[1,i],s);return d?Q(b,[b.shape[2],b.shape[3]]):Q(b,[b.shape[0],b.shape[2],b.shape[3]])}var GW=D({conv1d_:iwe});function swe(e,t,n,r,o,i="NHWC",s){M(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let a=e,u=t,c=!1;t.rank===3&&(c=!0,u=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]]),a=[1,e[0],e[1],e[2]]),M(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),M(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),M(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let d=i==="NHWC"?a[3]:a[1],f=i==="NHWC"?u.shape[3]:u.shape[1];M(d===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${d}) must match input depth for filter ${n.shape[2]}.`),M(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),or("conv2dDerInput",o,s);let h={dy:u,filter:n},m={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,inputShape:a},v=k.runKernel(xC,h,m);return c?Q(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var O_=D({conv2DBackpropInput_:swe});function awe(e,t,n,r,o,i){let s=_(e,"x","conv2dTranspose"),a=_(t,"filter","conv2dTranspose");return O_(n,s,a,r,o,"NHWC",i)}var jW=D({conv2dTranspose_:awe});function uwe(e,t,n,r,o="NDHWC",i=[1,1,1]){let s=_(e,"x","conv3d"),a=_(t,"filter","conv3d"),u=s,c=!1;s.rank===4&&(c=!0,u=Q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),M(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),M(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),M(u.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${a.shape[3]}.`),M(xo(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),M(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),M(Tu(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),M(Tu(n),()=>"Error in conv3D: Strides should be larger than 0.");let d={x:u,filter:a},f={strides:n,pad:r,dataFormat:o,dilations:i},h=k.runKernel(bC,d,f);return c?Q(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var zW=D({conv3d_:uwe});function cwe(e,t,n,r,o){M(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let i=e,s=t,a=!1;t.rank===4&&(a=!0,s=Q(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);let u=i[4],c=s.shape[4];M(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),M(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),M(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),M(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),M(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);let d={dy:s,filter:n},f={pad:o,strides:r,inputShape:i},h=k.runKernel(wC,d,f);return a?Q(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var HW=D({conv3DBackpropInput_:cwe});function lwe(e,t,n,r,o){let i=_(e,"x","conv3dTranspose"),s=_(t,"filter","conv3dTranspose");return HW(n,i,s,r,o)}var WW=D({conv3dTranspose_:lwe});function dwe(e){let n={x:_(e,"x","cos","float32")};return k.runKernel(EC,n)}var qW=D({cos_:dwe});function fwe(e){let n={x:_(e,"x","cosh","float32")};return k.runKernel(CC,n)}var KW=D({cosh_:fwe});function pwe(e,t=0,n=!1,r=!1){let i={x:_(e,"x","cumprod")},s={axis:t,exclusive:n,reverse:r};return k.runKernel(TC,i,s)}var XW=D({cumprod_:pwe});function hwe(e,t=0,n=!1,r=!1){let i={x:_(e,"x","cumsum")},s={axis:t,exclusive:n,reverse:r};return k.runKernel(_C,i,s)}var YW=D({cumsum_:hwe});function mwe(e,t,n,r=!1){let o=_(e,"x","denseBincount"),i=_(t,"weights","denseBincount");M(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),M(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),M(n>=0,()=>`size must be non-negative, but got ${n}.`),M(i.size===o.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:n,binaryOutput:r};return k.runKernel(SC,s,a)}var ZW=D({denseBincount_:mwe});function gwe(e,t,n="NHWC"){let r=_(e,"x","depthToSpace","float32"),o=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];M(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),M(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t}  for depthToSpace with input shape
    ${r.shape}`),M(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${t} for depthToSpace with input shape
        ${r.shape}`),M(s%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${s} for depthToSpace with input shape ${r.shape}`);let a={x:r},u={blockSize:t,dataFormat:n};return k.runKernel(DC,a,u)}var QW=D({depthToSpace_:gwe});function ywe(e,t,n,r,o="NHWC",i=[1,1],s){let a=_(e,"x","depthwiseConv2d","float32"),u=_(t,"filter","depthwiseConv2d","float32"),c=a,d=!1;a.rank===3&&(d=!0,c=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),M(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);let f=o==="NHWC"?c.shape[3]:c.shape[1];M(f===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${u.shape[2]}.`),or("depthwiseConv2d",r,s);let h={x:c,filter:u},m={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},v=k.runKernel(NC,h,m);return d?Q(v,[v.shape[1],v.shape[2],v.shape[3]]):v}var Gm=D({depthwiseConv2d_:ywe});function vwe(e){let n={x:_(e,"x","diag")};return k.runKernel(kC,n)}var JW=D({diag_:vwe});function xwe(e,t,n,r,o=[1,1],i="NHWC"){let s=_(e,"x","dilation2d"),a=_(t,"filter","dilation2d");M(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),M(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),M(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let u=s,c=!1;s.rank===3&&(u=Q(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),M(u.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${a.shape[2]}`);let d={x:u,filter:a},f={strides:n,pad:r,dilations:o},h=k.runKernel(OC,d,f);return c?Q(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var e7=D({dilation2d_:xwe});var Zl={};nn(Zl,{assertAndGetBroadcastShape:()=>Ft,getBroadcastDims:()=>t7,getReductionAxes:()=>M_});function t7(e,t){let n=e.length,r=[];for(let o=0;o<n;o++){let i=n-1-o,s=e[i]||1;(t[t.length-1-o]||1)>1&&s===1&&r.unshift(i)}return r}function M_(e,t){let n=[];for(let r=0;r<t.length;r++){let o=e[e.length-r-1],i=t.length-r-1,s=t[i];(o==null||o===1&&s>1)&&n.unshift(i)}return n}function Ft(e,t){let n=Math.max(e.length,t.length),r=new Array(n);for(let o=0;o<n;o++){let i=e[e.length-o-1];i==null&&(i=1);let s=t[t.length-o-1];if(s==null&&(s=1),i===1)r[n-o-1]=s;else if(s===1)r[n-o-1]=i;else if(i!==s){let a=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(a)}else r[n-o-1]=i}return r}function bwe(e,t){let n=_(e,"a","equal","string_or_numeric"),r=_(t,"b","equal","string_or_numeric");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(um,o)}var F_=D({equal_:bwe});function wwe(e,t,n){let r=_(t,"a","where"),o=_(n,"b","where"),i=_(e,"condition","where","bool"),s=Ft(Ft(i.shape,r.shape),o.shape),a=Xl(i,s),u=Xl(r,s),c=Xl(o,s),d={condition:a,t:u,e:c};return k.runKernel(PT,d)}var Is=D({where_:wwe});function Ewe(e){let n={x:_(e,"x","zerosLike")};return k.runKernel(u_,n)}var _r=D({zerosLike_:Ewe});function Cwe(e,t){let n=_(e,"a","div"),r=_(t,"b","div");[n,r]=ft(n,r);let o=Ze(n,r),i=_r(o),s=F_(r,i);return Is(s,i,o)}var n7=D({divNoNan_:Cwe});function Twe(e,t){let n=_(e,"t1","dot"),r=_(t,"t2","dot");M((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let o=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(M(o===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${i}.`),n.rank===1&&r.rank===1){let s=Q(n,[1,-1]),a=Q(r,[-1,1]),u=Vt(s,a);return Q(u,[])}else if(n.rank===1&&r.rank===2){let s=Q(n,[1,-1]),a=Q(r,[r.shape[0],r.shape[1]]),u=Vt(s,a);return Q(u,[u.size])}else if(n.rank===2&&r.rank===1){let s=Q(r,[-1,1]),a=Vt(n,s);return Q(a,[a.size])}else{let s=Q(r,[r.shape[0],r.shape[1]]);return Vt(n,s)}}var r7=D({dot_:Twe});function _we(e,...t){let n=t.map((o,i)=>_(o,`tensors${i}`,"einsum")),r={equation:e};return k.runKernel(FC,n,r)}var Ql=D({einsum_:_we});function Iwe(e){let n={x:_(e,"x","elu","float32")};return k.runKernel(PC,n)}var P_=D({elu_:Iwe});function Swe(e,t){let n=_(e,"x","ensureShape","string_or_numeric");if(!QM(n.shape,t))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${t}`);return e}var o7=D({ensureShape_:Swe});function Dwe(e){let t=_(e,"x","erf");M(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=Ct(t,"float32"));let n={x:t};return k.runKernel($C,n)}var i7=D({erf_:Dwe});function MF(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function s7(e,t,n){let r=e.length+t.length,o=[],i=0,s=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?o.push(e[i++]):o.push(t[s++]);return o}function Nwe(e,t){let n=[],r=e.length;for(let i=0;i<r;i++)t.indexOf(i)===-1&&n.push(e[i]);let o=t.map(i=>e[i]);return[n,o]}function _c(e,t){let n=t.map(r=>1);return s7(e,n,t)}function Awe(e,t,n){M(MF(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function Rwe(e,t){if(MF(e,t))return null;let n=[];for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(r=>n.push(r)),n}function kwe(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function Owe(e,t){let n=[];for(let r=t-e;r<t;++r)n.push(r);return n}function Fwe(e,t=null,n=!1){let o={x:_(e,"x","max")},i={reductionIndices:t,keepDims:n};return k.runKernel(rT,o,i)}var Su=D({max_:Fwe});function Pwe(e,t=null,n=!1){let o={x:_(e,"x","min")},i={axis:t,keepDims:n};return k.runKernel(uT,o,i)}var h0=D({min_:Pwe});function $we(e,t){let n=_(e,"base","pow"),r=_(t,"exp","pow");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(xT,o)}var Ic=D({pow_:$we});function Ge(e,t){if((yo(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&yo(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Mo(e,[],[],t)}function Lwe(e){let n={x:_(e,"x","sqrt","float32")};return k.runKernel(Tm,n)}var si=D({sqrt_:Lwe});function Vwe(e){let t=_(e,"x","square"),n={};return k.runKernel("Square",{x:t},n)}var Wr=D({square_:Vwe});function Bwe(e,t=null,n=!1){let r=_(e,"x","sum");r.dtype==="bool"&&(r=Ct(r,"int32"));let o={x:r},i={axis:t,keepDims:n};return k.runKernel(GT,o,i)}var Bt=D({sum_:Bwe});function Uwe(e,t="euclidean",n=null,r=!1){e=_(e,"x","norm");let o=a7(e,t,n),i=o.shape;if(r){let s=Bl(n,e.shape);i=_c(o.shape,s)}return Q(o,i)}function a7(e,t,n=null){if(e.rank===0)return Hr(e);if(e.rank!==1&&n===null)return a7(Q(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Bt(Hr(e),n);if(t===1/0)return Su(Hr(e),n);if(t===-1/0)return h0(Hr(e),n);if(t==="euclidean"||t===2)return si(Bt(Ic(Hr(e),Ge(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return Su(Bt(Hr(e),n[0]),n[1]-1);if(t===1/0)return Su(Bt(Hr(e),n[1]),n[0]);if(t===-1/0)return h0(Bt(Hr(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return si(Bt(Wr(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var Ff=D({norm_:Uwe});function Gwe(e,t=null,n=!1){return Ff(e,"euclidean",t,n)}var u7=D({euclideanNorm_:Gwe});function jwe(e){let n={x:_(e,"x","exp")};return k.runKernel(cm,n)}var ai=D({exp_:jwe});function zwe(e,t=0){let n=_(e,"x","expandDims","string_or_numeric");M(t<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},o={dim:t};return k.runKernel(LC,r,o)}var Li=D({expandDims_:zwe});function Hwe(e){let n={x:_(e,"x","expm1")};return k.runKernel(lm,n)}var c7=D({expm1_:Hwe});function Wwe(e,t){let n=_(e,"x","tile","string_or_numeric");M(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);let r={x:n},o={reps:t};return k.runKernel(Dm,r,o)}var Jl=D({tile_:Wwe});function qwe(e,t,n,r="float32"){t==null&&(t=e);let o=wt([e,t],r),i=e<=t?e:t;for(let a=0;a<i;++a)o.set(1,a,a);let s=Q(o.toTensor(),[e,t]);if(n==null)return s;if(n.length===1)return Jl(Li(s,0),[n[0],1,1]);if(n.length===2)return Jl(Li(Li(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Jl(Li(Li(Li(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}var $_=D({eye_:qwe});function Kwe(e){let n={x:_(e,"x","floor","float32")};return k.runKernel(dm,n)}var L_=D({floor_:Kwe});function Xwe(e,t,n=0,r=0){let o=_(e,"x","gather"),i=_(t,"indices","gather","int32"),s={x:o,indices:i},a={axis:n,batchDims:r};return k.runKernel(jC,s,a)}var V_=D({gather_:Xwe});function Ywe(e,t){let n=_(e,"a","greater","string_or_numeric"),r=_(t,"b","greater","string_or_numeric");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(pm,o)}var Pf=D({greater_:Ywe});function Zwe(e,t){let n=_(e,"a","greaterEqual","string_or_numeric"),r=_(t,"b","greaterEqual","string_or_numeric");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(hm,o)}var B_=D({greaterEqual_:Zwe});function Qwe(e){let n={input:_(e,"input","imag")};return k.runKernel(WC,n)}var ed=D({imag_:Qwe});function Jwe(e){let n={x:_(e,"x","isFinite")};return k.runKernel(qC,n)}var l7=D({isFinite_:Jwe});function eEe(e){let n={x:_(e,"x","isInf")};return k.runKernel(KC,n)}var d7=D({isInf_:eEe});function tEe(e){let n={x:_(e,"x","isNaN")};return k.runKernel(XC,n)}var f7=D({isNaN_:tEe});function nEe(e,t=.2){let r={x:_(e,"x","leakyRelu")},o={alpha:t};return k.runKernel(YC,r,o)}var U_=D({leakyRelu_:nEe});function rEe(e,t){let n=_(e,"a","less","string_or_numeric"),r=_(t,"b","less","string_or_numeric");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(mm,o)}var m0=D({less_:rEe});function oEe(e,t){let n=_(e,"a","lessEqual","string_or_numeric"),r=_(t,"b","lessEqual","string_or_numeric");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(gm,o)}var jm=D({lessEqual_:oEe});function p7(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");let r={start:e,stop:t,num:n};return k.runKernel(ZC,{},r)}function iEe(e,t=5,n=1,r=1,o=.5){let i=_(e,"x","localResponseNormalization");M(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),M(xc(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let s=i,a=!1;i.rank===3&&(a=!0,s=Q(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let u={x:s},c={depthRadius:t,bias:n,alpha:r,beta:o},d=k.runKernel(nT,u,c);return a?Q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var h7=D({localResponseNormalization_:iEe});function sEe(e){let n={x:_(e,"x","log","float32")};return k.runKernel(ym,n)}var Sc=D({log_:sEe});function aEe(e){let n={x:_(e,"x","log1p")};return k.runKernel(QC,n)}var G_=D({log1p_:aEe});function m7(e,t){M(rm(e),()=>"The f passed in variableGrads(f) must be a function"),M(t==null||Array.isArray(t)&&t.every(c=>c instanceof wc),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=t!=null;if(!n){t=[];for(let c in k.registeredVariables)t.push(k.registeredVariables[c])}let r=n?t.filter(c=>!c.trainable):null,o=t.length;t=t.filter(c=>c.trainable),M(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);let i=!0,{value:s,grads:a}=k.gradients(e,t,null,i);M(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),M(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let u={};return t.forEach((c,d)=>{a[d]!=null&&(u[c.name]=a[d])}),r?.forEach(c=>u[c.name]=null),{value:s,grads:u}}function ui(e){return k.customGrad(e)}function uEe(e){let n={x:_(e,"x","neg")};return k.runKernel(Qv,n)}var no=D({neg_:uEe});function cEe(e){let n={x:_(e,"x","softplus")};return k.runKernel(UT,n)}var j_=D({softplus_:cEe});function lEe(e){let t=_(e,"x","logSigmoid");return ui(r=>({value:no(j_(no(r))),gradFunc:s=>le(s,oa(no(r)))}))(t)}var g7=D({logSigmoid_:lEe});function dEe(e,t){let n=_(e,"a","sub"),r=_(t,"b","sub");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(Sm,o)}var Le=D({sub_:dEe});function fEe(e,t=-1){let n=_(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return ui((o,i)=>{let a=Su(o,t,!0),u=Le(o,a),c=Le(Ct(u,"float32"),Sc(Bt(ai(u),t,!0)));return i([c]),{value:c,gradFunc:(f,h)=>{let[m]=h,v=!0,x=ai(m);return Le(f,le(Bt(f,t,v),x))}}})(n)}var y7=D({logSoftmax_:fEe});function pEe(e,t=null,n=!1){let r=_(e,"x","logSumExp"),o=Bl(t,r.shape),i=Su(r,o,!0),s=Le(r,i),a=ai(s),u=Bt(a,o),c=Sc(u),d=_e(Q(i,c.shape),c);if(n){let f=_c(d.shape,o);return Q(d,f)}return d}var z_=D({logSumExp_:pEe});function hEe(e,t){let n=_(e,"a","logicalAnd","bool"),r=_(t,"b","logicalAnd","bool");Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(JC,o)}var $f=D({logicalAnd_:hEe});function mEe(e){let n={x:_(e,"x","logicalNot","bool")};return k.runKernel(eT,n)}var H_=D({logicalNot_:mEe});function gEe(e,t){let n=_(e,"a","logicalOr","bool"),r=_(t,"b","logicalOr","bool");Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(tT,o)}var W_=D({logicalOr_:gEe});function yEe(e,t){let n=_(e,"a","logicalXor","bool"),r=_(t,"b","logicalXor","bool");return Ft(n.shape,r.shape),$f(W_(e,t),H_($f(e,t)))}var v7=D({logicalXor_:yEe});var q_=2147483648;function vEe(e,t,n="left"){let r=_(e,"sortedSequence","searchSorted"),o=_(t,"values","searchSorted"),i=r.shape[r.shape.length-1],s=o.shape[o.shape.length-1],a=Q(r,[-1,i]),u=Q(o,[-1,s]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(mt(u.shape)>=q_)throw new Error(`values tensor size must less than ${q_}`);if(a.shape[1]>=q_)throw new Error(`trailing dim_size must less than ${q_} for int32 output type, was ${a.shape[1]}`);let c={sortedSequence:a,values:u},d={side:n};return k.runKernel(FT,c,d)}var g0=D({searchSorted_:vEe});function x7(e,t){return g0(e,t,"left")}function xEe(e,t,n,r,o){let i=_(e,"x","maxPool"),s=1,a=i,u=!1;i.rank===3&&(u=!0,a=Q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),M(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),M(xo(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),or("maxPool",r,o);let c={x:a},d={filterSize:t,strides:n,pad:r,dimRoundingMode:o},f=k.runKernel(oT,c,d);return u?Q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var K_=D({maxPool_:xEe});function bEe(e,t=[1,1,1],n,r,o,i="NDHWC"){let s=_(e,"x","maxPool3d"),a=s,u=!1;s.rank===4&&(u=!0,a=Q(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),M(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),M(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),or("maxPool3d",r,o);let c={x:a},d={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},f=k.runKernel(iT,c,d);return u?Q(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var b7=D({maxPool3d_:bEe});function wEe(e,t,n,r,o=!1){let s={x:_(e,"x","maxPoolWithArgmax")},a={filterSize:t,strides:n,pad:r,includeBatchInIndex:o},u=k.runKernel(sT,s,a);return{result:u[0],indexes:u[1]}}var w7=D({maxPoolWithArgmax_:wEe});function EEe(e,t){let n=_(e,"a","maximum"),r=_(t,"b","maximum");[n,r]=ft(n,r),n.dtype==="bool"&&(n=Ct(n,"int32"),r=Ct(r,"int32")),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(vm,o)}var X_=D({maximum_:EEe});function CEe(e,t=null,n=!1){let o={x:_(e,"x","mean")},i={axis:t,keepDims:n};return k.runKernel(aT,o,i)}var Lf=D({mean_:CEe});function ia(e,t="float32"){if(An(e),t==="complex64"){let r=ia(e,"float32"),o=ia(e,"float32");return oi(r,o)}let n=im(mt(e),t);return k.makeTensor(n,e,t)}function Du(e,t="float32"){if(An(e),t==="complex64"){let r=Du(e,"float32"),o=ia(e,"float32");return oi(r,o)}let n=qv(mt(e),t);return k.makeTensor(n,e,t)}function E7(e,t,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(e===void 0)return[];let r=_(e,"x","meshgrid",e instanceof Jt?e.dtype:"float32");if(t===void 0)return[r];let o=_(t,"y","meshgrid",t instanceof Jt?t.dtype:"float32"),i=mt(r.shape),s=mt(o.shape);return n==="xy"?(r=Q(r,[1,-1]),o=Q(o,[-1,1]),[Vt(Du([s,1],r.dtype),r),Vt(o,Du([1,i],o.dtype))]):(r=Q(r,[-1,1]),o=Q(o,[1,-1]),[Vt(r,Du([1,s],r.dtype)),Vt(Du([i,1],o.dtype),o)])}function TEe(e,t){let n=_(e,"a","minimum"),r=_(t,"b","minimum");[n,r]=ft(n,r),n.dtype==="bool"&&(n=Ct(n,"int32"),r=Ct(r,"int32")),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(xm,o)}var Vf=D({minimum_:TEe});function _Ee(e,t,n){M(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=_(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");M(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);let o=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)M(t[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),M(t[a][0]>=0&&t[a][0]<=r.shape[a]-o&&t[a][1]>=0&&t[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);let i={paddings:t,mode:n},s={x:r};return k.runKernel(cT,s,i)}var C7=D({mirrorPad_:_Ee});function IEe(e,t){let n=_(e,"a","mod"),r=_(t,"b","mod");[n,r]=ft(n,r);let o={a:n,b:r};return k.runKernel(lT,o)}var T7=D({mod_:IEe});function SEe(e,t=null,n=!1){e=_(e,"x","moments");let r=Bl(t,e.shape),o=Lf(e,r,n),i=o.shape;n||(i=_c(o.shape,r));let s=Wr(Le(Ct(e,"float32"),Q(o,i))),a=Lf(s,r,n);return{mean:o,variance:a}}var _7=D({moments_:SEe});function DEe(e,t,n,r){let o=_(t,"data","multiRNNCell"),i=Df(n,"c","multiRNNCell"),s=Df(r,"h","multiRNNCell"),a=o,u=[];for(let f=0;f<e.length;f++){let h=e[f](a,i[f],s[f]);u.push(h[0]),u.push(h[1]),a=h[1]}let c=[],d=[];for(let f=0;f<u.length;f+=2)c.push(u[f]),d.push(u[f+1]);return[c,d]}var I7=D({multiRNNCell_:DEe});function NEe(e,t,n,r=!1){let o=_(e,"logits","multinomial"),i=o.size,s=o.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);n=n||Math.random();let u={logits:s===1?Q(o,[1,-1]):o},c={numSamples:t,seed:n,normalized:r},d=k.runKernel(dT,u,c);return s===1?Q(d,[d.size]):d}var S7=D({multinomial_:NEe});function AEe(e,t){let n=_(e,"a","notEqual","string_or_numeric"),r=_(t,"b","notEqual","string_or_numeric");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r};return k.runKernel(wm,o)}var Y_=D({notEqual_:AEe});function REe(e,t,n=1,r=0,o="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);let s={indices:_(e,"indices","oneHot","int32")},a={dtype:o,depth:t,onValue:n,offValue:r};return k.runKernel(gT,s,a)}var D7=D({oneHot_:REe});function kEe(e){let n={x:_(e,"x","onesLike")};return k.runKernel(mT,n)}var N7=D({onesLike_:kEe});function OEe(e,t){let n=_(e,"v1","outerProduct"),r=_(t,"v2","outerProduct");M(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let o=Q(n,[-1,1]),i=Q(r,[1,-1]);return Vt(o,i)}var A7=D({outerProduct_:OEe});function MEe(e,t,n=0){let r=_(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let o={paddings:t,constantValue:n},i={x:r};return k.runKernel(vT,i,o)}var Nu=D({pad_:MEe});function FEe(e,t,n=0){return M(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),Nu(e,[t],n)}var R7=D({pad1d_:FEe});function PEe(e,t,n=0){return M(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Nu(e,t,n)}var k7=D({pad2d_:PEe});function $Ee(e,t,n=0){return M(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Nu(e,t,n)}var O7=D({pad3d_:$Ee});function LEe(e,t,n=0){return M(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Nu(e,t,n)}var M7=D({pad4d_:LEe});function VEe(e,t,n){let r=_(e,"x","spaceToBatchND");M(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),M(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),M(r.shape.reduce((s,a,u)=>u>0&&u<=t.length?s&&(a+n[u-1][0]+n[u-1][1])%t[u-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);let o={x:r},i={blockShape:t,paddings:n};return k.runKernel(jT,o,i)}var Z_=D({spaceToBatchND_:VEe});function BEe(e,t,n,r,o,i,s){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");let a=_(e,"x","maxPool"),u=a,c=!1;a.rank===3&&(c=!0,u=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(xo(i,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`);let d=kF(u.shape,t,i,o,r),f=[d.dilationHeight,d.dilationWidth],h;r==="same"?h=GEe([d.filterHeight,d.filterWidth],f):h=[[0,0],[0,0]];let m=f[0]===1&&f[1]===1,[v,x]=UEe([d.inHeight,d.inWidth],f,h),b=m?r:"valid",C=m?u:Z_(u,f,v),O=(n==="avg"?()=>N_(C,t,i,b,s):()=>K_(C,t,i,b,s))(),F=m?O:A_(O,f,x);return c?Q(F,[F.shape[1],F.shape[2],F.shape[3]]):F}function UEe(e,t,n){let r=n.map(d=>d[0]),o=n.map(d=>d[1]),i=e.concat(r,o),s=t.map((d,f)=>(d-i[f]%d)%d),a=o.map((d,f)=>d+s[f]),u=t.map((d,f)=>[r[f],a[f]]),c=t.map((d,f)=>[0,s[f]]);return[u,c]}function GEe(e,t){let r=e.map((s,a)=>s+(s-1)*(t[a]-1)).map(s=>s-1),o=r.map(s=>Math.floor(s/2)),i=r.map((s,a)=>s-o[a]);return r.map((s,a)=>[o[a],i[a]])}var F7=D({pool_:BEe});function jEe(e,t){let n=_(e,"x","prelu"),r=_(t,"alpha","prelu"),o={x:n,alpha:r};return k.runKernel(bT,o)}var Q_=D({prelu_:jEe});function zEe(e,t=null,n=!1){let r=_(e,"x","prod");r.dtype==="bool"&&(r=Ct(r,"int32"));let o={x:r},i={axis:t,keepDims:n};return k.runKernel(Jv,o,i)}var P7=D({prod_:zEe});function HEe(e,t,n,r){let o=e.map((d,f)=>_(d,`tensors${f}`,"raggedGather","int32")),i=_(t,"paramsDenseValues","raggedGather"),s=_(n,"indices","raggedGather","int32"),a={paramsNestedSplits:o,paramsDenseValues:i,indices:s},u={outputRaggedRank:r},c=k.runKernel(wT,a,u);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var $7=D({raggedGather_:HEe});function WEe(e,t,n){let r=_(e,"starts","raggedRange"),o=_(t,"limits","raggedRange",r.dtype),i=_(n,"deltas","raggedRange",r.dtype),s={starts:r,limits:o,deltas:i},a=k.runKernel(ET,s);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}var L7=D({raggedRange_:WEe});function qEe(e,t,n,r,o){let i=_(e,"shape","raggedTensorToTensor","int32"),s=_(t,"values","raggedTensorToTensor"),a=_(n,"defaultValue","raggedTensorToTensor",s.dtype),u=r.map((f,h)=>_(f,`tensors${h}`,"raggedTensorToTensor","int32")),c={shape:i,values:s,defaultValue:a,rowPartitionTensors:u},d={rowPartitionTypes:o};return k.runKernel(CT,c,d)}var V7=D({raggedTensorToTensor_:qEe});function KEe(e,t,n){An(e);let r=mt(e),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else if(n==="bool")o=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)o[i]=t();return k.makeTensor(o,e,n)}var B7=D({rand_:KEe});var nI=ya(r9());var Uf=class{constructor(t,n,r,o,i){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=i||Math.random();this.random=nI.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let o=this.nextVal;return this.nextVal=NaN,o}let t,n,r=!1;for(;!r;){let o,i,s;do o=2*this.random()-1,i=2*this.random()-1,s=o*o+i*i;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}},eI=class{constructor(t,n,r,o){this.alpha=t,this.beta=1/n,this.dtype=r;let i=o||Math.random();this.randu=nI.alea(i.toString()),this.randn=new Uf(0,1,r,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,n,r,o,i,s;for(;;){do o=this.randn.nextValue(),s=1+this.c*o;while(s<=0);if(s*=s*s,t=o*o,n=1-.331*t*t,r=.5*t+this.d*(1-s+Math.log(s)),i=this.randu(),i<n||Math.log(i)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(t){return this.dtype==="float32"?t:Math.round(t)}},tI=class{constructor(t=0,n=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=nI.alea(o)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function tCe(e,t,n=1,r="float32",o){if(An(e),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);let i=new eI(t,n,r,o),s=wt(e,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var o9=D({randomGamma_:tCe});function nCe(e,t=0,n=1,r,o){if(An(e),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);let i=new Uf(t,n,r,!1,o),s=wt(e,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var rI=D({randomNormal_:nCe});function rCe(e,t,n){if(t!=null&&t==="bool")throw new Error(`Unsupported data type ${t}`);return rI(e,0,1,t,n)}var i9=D({randomStandardNormal_:rCe});function oCe(e,t=0,n=1,r="float32",o){An(e);let i=wt(e,r),s=new tI(t,n,null,o);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var zm=D({randomUniform_:oCe});function iCe(e,t,n,r){return zm(e,t,n,"int32",r)}var s9=D({randomUniformInt_:iCe});function td(e,t,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");let o={start:e,stop:t,step:n,dtype:r};return k.runKernel(TT,{},o)}function sCe(e){let n={input:_(e,"input","real")};return k.runKernel(e0,n)}var Dc=D({real_:sCe});function aCe(e){let n={x:_(e,"x","reciprocal")};return k.runKernel(_T,n)}var a9=D({reciprocal_:aCe});function uCe(e){let n={x:_(e,"x","relu")};return k.runKernel(IT,n)}var nd=D({relu_:uCe});function cCe(e){let n={x:_(e,"x","relu6")};return k.runKernel(AT,n)}var oI=D({relu6_:cCe});function lCe(e,t){let r={x:_(e,"x","reverse")},o={dims:t};return k.runKernel(RT,r,o)}var Ss=D({reverse_:lCe});function dCe(e){let t=_(e,"x","reverse");return M(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),Ss(t,0)}var u9=D({reverse1d_:dCe});function fCe(e,t){let n=_(e,"x","reverse");return M(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Ss(n,t)}var c9=D({reverse2d_:fCe});function pCe(e,t){let n=_(e,"x","reverse");return M(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Ss(n,t)}var l9=D({reverse3d_:pCe});function hCe(e,t){let n=_(e,"x","reverse");return M(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Ss(n,t)}var d9=D({reverse4d_:hCe});function mCe(e){let n={x:_(e,"x","round")};return k.runKernel(kT,n)}var iI=D({round_:mCe});function gCe(e){let n={x:_(e,"x","rsqrt","float32")};return k.runKernel(Em,n)}var f9=D({rsqrt_:gCe});function yCe(e){let n={x:_(e,"x","selu")};return k.runKernel($T,n)}var p9=D({selu_:yCe});function vCe(e,t,n,r,o,i=[1,1],s="NHWC"){let a=_(e,"x","separableConv2d"),u=_(t,"depthwiseFilter","separableConv2d"),c=_(n,"pointwiseFilter","separableConv2d"),d=a,f=!1;if(a.rank===3&&(f=!0,d=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");M(d.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${d.rank}.`),M(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),M(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),M(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),M(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let h=u.shape[2],m=u.shape[3];M(c.shape[2]===h*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*m}, but got ${c.shape[2]}.`);let v=Gm(d,u,r,o,s,i),b=Yl(v,c,1,"valid",s);return f?Q(b,[b.shape[1],b.shape[2],b.shape[3]]):b}var h9=D({separableConv2d_:vCe});function xCe(e,t){return ne(this,null,function*(){let n=_(e,"x","setdiff1d"),r=_(t,"y","setdiff1d");M(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),M(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),M(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);let o=yield n.data(),i=yield r.data(),s=new Set(i),a=0;for(let d=0;d<o.length;d++)s.has(o[d])||a++;let u=new _s([a],n.dtype),c=new _s([a],"int32");for(let d=0,f=0;d<o.length;d++)s.has(o[d])||(u.values[f]=o[d],c.values[f]=d,f++);return[u.toTensor(),c.toTensor()]})}var m9=xCe;function bCe(e){let n={x:_(e,"x","sign")};return k.runKernel(BT,n)}var g9=D({sign_:bCe});function wCe(e){let n={x:_(e,"x","sin","float32")};return k.runKernel(LT,n)}var y9=D({sin_:wCe});function ECe(e){let n={x:_(e,"x","sinh")};return k.runKernel(VT,n)}var v9=D({sinh_:ECe});function CCe(e,t,n){let r=_(e,"x","slice1d");return M(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),qe(r,[t],[n])}var x9=D({slice1d_:CCe});function TCe(e,t,n){let r=_(e,"x","slice2d");return M(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),qe(r,t,n)}var b9=D({slice2d_:TCe});function _Ce(e,t,n){let r=_(e,"x","slice3d");return M(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),qe(r,t,n)}var w9=D({slice3d_:_Ce});function ICe(e,t,n){let r=_(e,"x","slice4d");return M(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),qe(r,t,n)}var E9=D({slice4d_:ICe});function SCe(e,t=-1){let n=_(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);let r={logits:n},o={dim:t};return k.runKernel(HT,r,o)}var C9=D({softmax_:SCe});function DCe(e){M(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);let t={input:e};return k.runKernel(VC,t)}var Hm=D({fft_:DCe});function NCe(e){M(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);let t={input:e};return k.runKernel(HC,t)}var Gf=D({ifft_:NCe});function ACe(e){let t=e.shape[e.shape.length-1],n=e.size/t,r;if(t<=2){let o=Q(e,[n,t]);r=Gf(o)}else{let o=[n,2*(t-1)],i=Q(Dc(e),[n,t]),s=Q(ed(e),[n,t]),a=Ss(qe(i,[0,1],[n,t-2]),1),u=le(Ss(qe(s,[0,1],[n,t-2]),1),Ge(-1)),c=sn([i,a],1),d=sn([s,u],1),f=Q(oi(c,d),[o[0],o[1]]);r=Gf(f)}if(r=Dc(r),e.rank===3&&e.shape[0]!==0){let o=r,i=e.shape[0];r=Q(r,[i,r.shape[0]/i,r.shape[1]]),o.dispose()}return r}var sI=D({irfft_:ACe});function RCe(e,t,n=0){let o={x:_(e,"x","split")},i={numOrSizeSplits:t,axis:n};return k.runKernel(zT,o,i)}var Nc=D({split_:RCe});function kCe(e,t){M(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1],r=e.size/n,o;if(t!=null&&t<n){let v=e.shape.map(b=>0),x=e.shape.map(b=>b);x[e.shape.length-1]=t,o=qe(e,v,x),n=t}else if(t!=null&&t>n){let v=e.shape.map(x=>x);v[e.shape.length-1]=t-n,o=sn([e,ia(v)],e.shape.length-1),n=t}else o=e;let i=_r(o),s=Q(oi(o,i),[r,n]),a=Hm(s),u=Math.floor(n/2)+1,c=Dc(a),d=ed(a),f=Nc(c,[u,n-u],c.shape.length-1),h=Nc(d,[u,n-u],d.shape.length-1),m=o.shape.slice();return m[o.shape.length-1]=u,Q(oi(f[0],h[0]),m)}var Wm=D({rfft_:kCe});function OCe(e,t){let n=_(e,"a","squaredDifference"),r=_(t,"b","squaredDifference");[n,r]=ft(n,r),Ft(n.shape,r.shape);let o={a:n,b:r},i={};return k.runKernel(_m,o,i)}var aI=D({squaredDifference_:OCe});function MCe(e,t){let n=_(e,"x","squeeze","string_or_numeric");return Q(n,JM(n.shape,t).newShape)}var gr=D({squeeze_:MCe});function FCe(e,t=0){let n=Df(e,"tensors","stack","string_or_numeric");M(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&M(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,o={axis:t};return k.runKernel(yT,r,o)}var Po=D({stack_:FCe});function PCe(e,t=0){let r={x:_(e,"x","step")},o={alpha:t};return k.runKernel(c_,r,o)}var uI=D({step_:PCe});function $Ce(e,t,n,r,o=0,i=0,s=0,a=0,u=0){let d={x:_(e,"x","stridedSlice","string_or_numeric")},f={begin:t,end:n,strides:r,beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:u};return k.runKernel(ZT,d,f)}var T9=D({stridedSlice_:$Ce});function LCe(e){let n={x:_(e,"x","tan","float32")};return k.runKernel(t_,n)}var _9=D({tan_:LCe});function Gn(e,t){Ts(e);let n=ri(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Mo(e,null,n,t)}function $a(e,t,n){if(Ts(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=ri(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Mo(e,t,r,n)}function cI(e,t,n){if(Ts(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=ri(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Mo(e,t,r,n)}function I9(e,t,n){if(Ts(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=ri(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Mo(e,t,r,n)}function S9(e,t,n){if(Ts(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=ri(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Mo(e,t,r,n)}function D9(e,t,n){if(Ts(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=ri(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Mo(e,t,r,n)}function N9(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(i+` update.rank < ${o}. `);if(e.length<r+(n.rank-o))throw new Error(i+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+e.length-r)throw new Error(i+` update.rank != ${o+e.length-r}`);for(let s=0;s<o;++s)if(n.shape[s]!==t.shape[s])throw new Error(i+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${t.shape[s]}).`);for(let s=0;s<n.rank-o;++s)if(n.shape[s+o]!==e[s+r])throw new Error(i+` updates.shape[${s+o}] (${n.shape[s+o]}) != shape[${s+o}] (${e[s+o]})`)}function y0(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}N9(n,t,e)}function VCe(e,t,n){let r=t.shape.length,o=r>1?t.shape[r-1]:1,i=n.length,s=1;for(let f=o;f<i;++f)s*=n[f];let a=o<1?1:o,u=mt(t.shape)/a,c=[...Eu(n.slice(0,o)),1],d=mt(n);return{sliceRank:o,numUpdates:u,sliceSize:s,strides:c,outputSize:d}}function BCe(e,t,n){let r=_(e,"tensor","tensorScatterupdate"),o=_(t,"indices","tensorScatterupdate","int32"),i=_(n,"updates","tensorScatterupdate");if(y0(i,o,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);let s={tensor:r,indices:o,updates:i},a={};return k.runKernel(MT,s,a)}var R9=D({tensorScatterUpdate_:BCe});function UCe(e,t=1,n=!0){let r=_(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let o=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);let i={x:r},s={k:t,sorted:n},[a,u]=k.runKernel(r_,i,s);return{values:a,indices:u}}var k9=D({topk_:UCe});function GCe(e,t=0,n=1,r,o){if(An(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new Uf(t,n,r,!0,o),s=wt(e,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var O9=D({truncatedNormal_:GCe});function jCe(e,t=0){let n=_(e,"x","unique","string_or_numeric");M(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},o={axis:t},[i,s]=k.runKernel(i_,r,o);return{values:i,indices:s}}var M9=D({unique_:jCe});function zCe(e,t,n){let r=_(e,"x","unsortedSegmentSum"),o=_(t,"segmentIds","unsortedSegmentSum","int32");M(xc(n),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:o},s={numSegments:n};return k.runKernel(a_,i,s)}var F9=D({unsortedSegmentSum_:zCe});function HCe(e,t=0){let n=_(e,"x","unstack","string_or_numeric");M(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);let r={value:n},o={axis:t};return k.runKernel(s_,r,o)}var Ds=D({unstack_:HCe});function P9(e,t){return g0(e,t,"right")}function $9(e,t=!0,n,r){return k.makeVariable(e,t,n,r)}function lI(e,t){let n=[];for(let i=0;i<t.length;i++)t[i]&&n.push(i);let r=wt(e,"int32"),o=wt([n.length,e.length],"int32");for(let i=0;i<n.length;i++){let s=r.indexToLoc(n[i]),a=i*e.length;o.values.set(s,a)}return o.toTensor()}function WCe(e){return ne(this,null,function*(){let t=_(e,"condition","whereAsync","bool"),n=yield t.data(),r=lI(t.shape,n);return e!==t&&t.dispose(),r})}var dI=WCe;function qCe(e,t,n){return ne(this,null,function*(){let r=_(e,"tensor","boolMask"),o=_(t,"mask","boolMask","bool"),i=n??0,s=o.rank,a=r.shape;M(s>0,()=>"mask cannot be scalar"),Un(a.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let x=i;x<i+s;x++)u*=a[x];let c=a.slice(0,i).concat([u],a.slice(i+s)),d=Q(r,c),f=Q(o,[-1]),h=yield dI(f),m=gr(h,[1]),v=V_(d,m,i);return e!==r&&r.dispose(),t!==o&&o.dispose(),m.dispose(),d.dispose(),f.dispose(),h.dispose(),v})}var KCe=qCe;function XCe(e,t,n){let r=_(e,"x","transpose");if(t==null&&(t=r.shape.map((s,a)=>a).reverse()),M(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(s=>{M(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();let o={x:r},i={perm:t};return r.dtype==="complex64"?ze(()=>{let s=Dc(r),a=ed(r);return s=k.runKernel(Nm,{x:s},i),a=k.runKernel(Nm,{x:a},i),n&&(a=no(a)),oi(s,a)}):k.runKernel(Nm,o,i)}var fI=D({transpose_:XCe});function YCe(e,t,n,r,o=!0){let i=_(e,"v","movingAverage"),s=_(t,"x","movingAverage"),a=_(n,"decay","movingAverage");$H(i,s),M(Mi(i.shape,s.shape),()=>"Shape mismatch in v and x");let u=Ge(1),c=Le(u,a),d=le(Le(s,i),c);if(o){M(r!=null,()=>"When using zeroDebias: true, step is required.");let f=_(r,"step","movingAverage");d=Ze(d,Le(u,Ic(a,f)))}return _e(i,d)}var ZCe=D({movingAverage_:YCe});function QCe(e,t,n){An(n);let r=_(e,"indices","scatterND","int32"),o=_(t,"updates","scatterND");y0(o,r,n);let i={indices:r,updates:o},s={shape:n};return k.runKernel(OT,i,s)}var JCe=D({scatterND_:QCe});function L9(e,t,n,r){if(e.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);let o=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);let s=t.size;if(!(t.rank===0||t.rank===1&&s===o))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${o}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function tTe(e,t,n,r=0){An(n);let o=_(e,"sparseIndices","sparseToDense","int32"),i=_(t,"sparseValues","sparseToDense","string_or_numeric"),s=_(r,"defaultValue","sparseToDense",i.dtype);L9(o,i,n,s);let a={sparseIndices:o,sparseValues:i,defaultValue:s},u={outputShape:n};return k.runKernel(YT,a,u)}var nTe=D({sparseToDense_:tTe});function rTe(e,t){let n=_(t,"indices","gatherND","int32"),o={params:_(e,"x","gatherND","string_or_numeric"),indices:n};return k.runKernel(zC,o)}var oTe=D({gatherND_:rTe});function V9(e,t){if(t==null)return e.shape.slice();if(Mi(e.shape,t))return t;if(e.shape.length===t.length){let n=[];for(let r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}function iTe(e,t,n,r){let o=_(e,"x","dropout");if(M(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),M(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof Jt?o.clone():o;let i=V9(o,n),s=1-t,a=Ze(L_(_e(zm(i,0,1,"float32",r),s)),s);return le(o,a)}var sTe=D({dropout_:iTe});function UF(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function v0(e,t,n){let r=1-e%2,o=new Float32Array(e);for(let i=0;i<e;++i){let s=2*Math.PI*i/(e+r-1);o[i]=t-n*Math.cos(s)}return Gn(o,"float32")}function aTe(e,t,n=1){return ne(this,null,function*(){let r=_(e,"predictions","inTopK"),o=_(t,"targets","inTopK");M(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),M(r.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`),Un(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];M(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);let s=yield r.data(),a=yield o.data(),[u,c]=[s.length/i,i],d=eF("bool",u);for(let f=0;f<u;f++){let h=f*c,m=s.subarray(h,h+c),v=[];for(let x=0;x<m.length;x++)v.push({value:m[x],index:x});v.sort((x,b)=>b.value-x.value),d[f]=0;for(let x=0;x<n;x++)if(v[x].index===a[f]){d[f]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),Fo(d,o.shape,"bool")})}var uTe=aTe;var GF={};nn(GF,{conv2d:()=>U9,depthwiseConv2d:()=>z9,matMul:()=>H9});function cTe(e,t,n,r,o,i="NHWC",s){let a=e;e.rank===3&&(a=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;u.rank===3&&(u=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]])),M(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),M(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),M(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let c=i==="NHWC"?a.shape[3]:a.shape[1],d=i==="NHWC"?u.shape[3]:u.shape[1];M(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),M(d===n[3],()=>`Error in conv2dDerFilter: depth of dy (${d}) must match output depth for filter (${n[3]}).`),or("conv2dDerFilter",o,s);let f={x:a,dy:u},h={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,filterShape:n};return k.runKernel(vC,f,h)}var B9=D({conv2DBackpropFilter_:cTe});function jf(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return le(e,uI(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function zf(e,t){let n=t,r=M_(e.shape,t.shape);return r.length>0&&(n=Bt(n,r)),Q(n,e.shape)}function Hf(e,t,n,r){if(t==="linear")return e;if(t==="relu")return nd(e);if(t==="elu")return P_(e);if(t==="relu6")return oI(e);if(t==="prelu")return Q_(e,n);if(t==="leakyrelu")return U_(e,r);if(t==="sigmoid")return oa(e);throw new Error(`Unknown fused activation ${t}.`)}var Wf=(e,t)=>!(e>0)||t==="linear";function lTe({x:e,filter:t,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:d}){if(u=u||"linear",Wf(k.state.gradientDepth,u)===!1){M(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let H=Yl(e,t,n,r,o,i,s);return a!=null&&(H=_e(H,a)),Hf(H,u,c,d)}let f=_(e,"x","conv2d","float32"),h=_(t,"filter","conv2d","float32"),m=f,v=!1;f.rank===3&&(v=!0,m=Q(f,[1,f.shape[0],f.shape[1],f.shape[2]])),M(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),M(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),or("fused conv2d",r,s);let x=o==="NHWC"?m.shape[3]:m.shape[1];M(h.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${h.shape[2]}.`),M(xo(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let b=Mf(m.shape,h.shape,n,i,r,s),C;a!=null&&(C=_(a,"bias","fused conv2d"),[C]=ft(C,f),o==="NHWC"?Ft(b.outShape,C.shape):(M(C.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${C.shape.length}.`),M(C.shape.length===0||C.shape[0]===b.outChannels||C.shape[0]===1,()=>`Error in fused conv2d: bias shape (${C.shape}) is not compatible with the number of output channels (${b.outChannels})`)));let S;if(c!=null){let H=c.shape;if(M(H.length<=1||H.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${H.length}.`),H.length===1)M(H[0]===1||H[0]===b.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${H}) is not compatible with the number of output channels (${b.outChannels}).`);else if(H.length===3)try{Ft(H,b.outShape)}catch{let Z=`Error in fused conv2d: PReLU activation weights (${H}) is not compatible with the output shape of the conv2d (${b.outShape}).`;throw Error(Z)}S=_(c,"prelu weights","fused conv2d")}let O=(H,X)=>{M(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);let[Z,te,J,ae]=X,ye=jf(H,J,u);M(Of(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let Oe=O_(te.shape,ye,Z,n,r),Ye=B9(te,ye,Z.shape,n,r),Fe=[Oe,Ye];if(ae!=null){let Dt=zf(ae,ye);Fe.push(Dt)}return Fe},F={x:m,filter:h,bias:C,preluActivationWeights:S},B={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:d};return a==null?ui((X,Z,te)=>{let J=k.runKernel(o0,F,B);return te([Z,X,J]),v&&(J=Q(J,[J.shape[1],J.shape[2],J.shape[3]])),{value:J,gradFunc:O}})(m,h):ui((X,Z,te,J)=>{let ae=k.runKernel(o0,F,B);return J([Z,X,ae,te]),v&&(ae=Q(ae,[ae.shape[1],ae.shape[2],ae.shape[3]])),{value:ae,gradFunc:O}})(m,h,C)}var U9=D({fusedConv2d_:lTe});function dTe(e,t,n,r,o,i=[1,1],s){let a=e;e.rank===3&&(a=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;u.rank===3&&(u=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c={x:a,dy:u},d={strides:r,pad:o,dimRoundingMode:s,dilations:i,filterShape:n};return k.runKernel(AC,c,d)}var G9=D({depthwiseConv2dNativeBackpropFilter_:dTe});function fTe(e,t,n,r,o,i=[1,1],s){let a=t,u=!1;t.rank===3&&(u=!0,a=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c={dy:a,filter:n},d={strides:r,pad:o,dimRoundingMode:s,dilations:i,inputShape:e},f=k.runKernel(RC,c,d);return u?Q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var j9=D({depthwiseConv2dNativeBackpropInput_:fTe});function pTe({x:e,filter:t,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:d}){if(Wf(k.state.gradientDepth,u)===!1){let B=Gm(e,t,n,r,o,i,s);return a!=null&&(B=_e(B,a)),Hf(B,u,c,d)}let f=_(e,"x","depthwiseConv2d","float32"),h=_(t,"filter","depthwiseConv2d","float32"),m=f,v=!1;f.rank===3&&(v=!0,m=Q(f,[1,f.shape[0],f.shape[1],f.shape[2]])),M(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),M(h.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),M(m.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),i==null&&(i=[1,1]),M(xo(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),or("fused depthwiseConv2d",r,s);let x=Mf(m.shape,h.shape,n,i,r,s,!0),b;a!=null&&(b=_(a,"bias","fused conv2d"),[b]=ft(b,f),Ft(x.outShape,b.shape));let C;c!=null&&(C=_(c,"prelu weights","fused depthwiseConv2d"));let S=(B,H)=>{M(Of(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);let[X,Z,te,J]=H,ae=jf(B,te,u),ye=j9(Z.shape,ae,X,n,r,i,s),Oe=G9(Z,ae,X.shape,n,r,i,s);if(J!=null){let Ye=zf(b,ae);return[ye,Oe,Ye]}return[ye,Oe]},O={x:m,filter:h,bias:b,preluActivationWeights:C},F={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:d};return a==null?ui((H,X,Z)=>{let te=k.runKernel(i0,O,F);return Z([X,H,te]),v&&(te=Q(te,[te.shape[1],te.shape[2],te.shape[3]])),{value:te,gradFunc:S}})(m,h):ui((H,X,Z,te)=>{let J=k.runKernel(i0,O,F);return te([X,H,J,Z]),v&&(J=Q(J,[J.shape[1],J.shape[2],J.shape[3]])),{value:J,gradFunc:S}})(m,h,b)}var z9=D({fusedDepthwiseConv2d_:pTe});function hTe({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(Wf(k.state.gradientDepth,i)===!1){let ae=Vt(e,t,n,r);return o!=null&&(ae=_e(ae,o)),Hf(ae,i,s,a)}let u=_(e,"a","fused matMul"),c=_(t,"b","fused matMul");[u,c]=ft(u,c);let d=n?u.shape[u.rank-2]:u.shape[u.rank-1],f=r?c.shape[c.rank-1]:c.shape[c.rank-2],h=n?u.shape[u.rank-1]:u.shape[u.rank-2],m=r?c.shape[c.rank-2]:c.shape[c.rank-1],v=u.shape.slice(0,-2),x=c.shape.slice(0,-2),b=mt(v),C=mt(x);M(d===f,()=>`Error in fused matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);let O=Ft(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([h,m]),F=n?Q(u,[b,d,h]):Q(u,[b,h,d]),B=r?Q(c,[C,m,f]):Q(c,[C,f,m]),H;o!=null&&(H=_(o,"bias","fused matMul"),[H]=ft(H,u),Ft(O,H.shape));let X;s!=null&&(X=_(s,"prelu weights","fused matMul"));let Z=(ae,ye)=>{let[Oe,Ye,Fe,Dt]=ye,oe=jf(Q(ae,Fe.shape),Fe,i),pe,ie;if(!n&&!r?(pe=Vt(oe,Ye,!1,!0),ie=Vt(Oe,oe,!0,!1)):!n&&r?(pe=Vt(oe,Ye,!1,!1),ie=Vt(oe,Oe,!0,!1)):n&&!r?(pe=Vt(Ye,oe,!1,!0),ie=Vt(Oe,oe,!1,!1)):(pe=Vt(Ye,oe,!0,!0),ie=Vt(oe,Oe,!0,!0)),o!=null){let Ce=zf(Dt,oe);return[pe,ie,Ce]}else return[pe,ie]},te={a:F,b:B,bias:H,preluActivationWeights:X},J={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return o==null?ui((ye,Oe,Ye)=>{let Fe=k.runKernel(r0,te,J);return Ye([ye,Oe,Fe]),{value:Q(Fe,O),gradFunc:Z}})(F,B):ui((ye,Oe,Ye,Fe)=>{let Dt=k.runKernel(r0,te,J);return Fe([ye,Oe,Dt,Ye]),{value:Q(Dt,O),gradFunc:Z}})(F,B,H)}var H9=D({fusedMatMul_:hTe});function mTe(e){return v0(e,.54,.46)}var W9=D({hammingWindow_:mTe});function gTe(e){return v0(e,.5,.5)}var pI=D({hannWindow_:gTe});function yTe(e,t,n,r=!1,o=0){let i=0,s=[];for(;i+t<=e.size;)s.push(qe(e,i,t)),i+=n;if(r)for(;i<e.size;){let a=i+t-e.size,u=sn([qe(e,i,t-a),Iu([a],o)]);s.push(u),i+=n}return s.length===0?$a([],[0,t]):Q(sn(s),[s.length,t])}var hI=D({frame_:yTe});function vTe(e,t,n,r,o=pI){r==null&&(r=UF(t));let i=hI(e,t,n),s=le(i,o(t));return Wm(s,r)}var q9=D({stft_:vTe});function xTe(e,t,n,r,o="bilinear",i=0){let s=_(e,"image","cropAndResize"),a=_(t,"boxes","cropAndResize","float32"),u=_(n,"boxInd","cropAndResize","int32"),c=a.shape[0];M(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),M(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),M(u.rank===1&&u.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),M(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),M(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),M(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);let d={image:s,boxes:a,boxInd:u},f={method:o,extrapolationValue:i,cropSize:r};return k.runKernel(IC,d,f)}var K9=D({cropAndResize_:xTe});function bTe(e){let t=_(e,"image","flipLeftRight","float32");M(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);let n={image:t};return k.runKernel(UC,n,{})}var X9=D({flipLeftRight_:bTe});function wTe(e){let t=_(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];M(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),M(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,Jl(t,o)}var Y9=D({grayscaleToRGB_:wTe});function ETe(e){let t=_(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];M(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),M(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let o=t.dtype,i=Ct(t,"float32"),s=Gn([.2989,.587,.114]),a;switch(t.rank){case 2:a=Ql("ij,j->i",i,s);break;case 3:a=Ql("ijk,k->ij",i,s);break;case 4:a=Ql("ijkl,l->ijk",i,s);break;case 5:a=Ql("ijklm,m->ijkl",i,s);break;case 6:a=Ql("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return a=Li(a,-1),Ct(a,o)}var Z9=D({rgbToGrayscale_:ETe});function CTe(e,t,n=0,r=.5){let o=_(e,"image","rotateWithOffset","float32");M(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);let i={image:o},s={radians:t,fillValue:n,center:r};return k.runKernel(l_,i,s)}var Q9=D({rotateWithOffset_:CTe});function sa(e,t,n,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=e.shape[0];return n=Math.min(n,s),M(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),M(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),M(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),M(t.rank===1,()=>"scores must be a 1D tensor"),M(t.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${t.shape[0]}`),M(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}function TTe(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY){let i=_(e,"boxes","nonMaxSuppression","float32"),s=_(t,"scores","nonMaxSuppression","float32"),a=sa(i,s,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return k.runKernel(fT,{boxes:i,scores:s},u)}var J9=D({nonMaxSuppression_:TTe});function eq(e,t,n){let r=_Te(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function _Te(e,t,n){return STe(e,t,n||ITe)}function ITe(e,t){return e>t?1:e<t?-1:0}function STe(e,t,n){let r=0,o=e.length,i=0,s=!1;for(;r<o;){i=r+(o-r>>>1);let a=n(t,e[i]);a>0?r=i+1:(o=i,s=!a)}return s?r:-r-1}function mI(e,t,n,r,o){return jF(e,t,n,r,o,0)}function gI(e,t,n,r,o,i){return jF(e,t,n,r,o,0,!1,i,!0)}function yI(e,t,n,r,o,i){return jF(e,t,n,r,o,i,!0)}function jF(e,t,n,r,o,i,s=!1,a=!1,u=!1){let c=[];for(let b=0;b<t.length;b++)t[b]>o&&c.push({score:t[b],boxIndex:b,suppressBeginIndex:0});c.sort(tq);let d=i>0?-.5/i:0,f=[],h=[];for(;f.length<n&&c.length>0;){let b=c.pop(),{score:C,boxIndex:S,suppressBeginIndex:O}=b;if(C<o)break;let F=!1;for(let B=f.length-1;B>=O;--B){let H=DTe(e,S,f[B]);if(H>=r){F=!0;break}if(b.score=b.score*NTe(r,d,H),b.score<=o)break}b.suppressBeginIndex=f.length,F||(b.score===C?(f.push(S),h.push(b.score)):b.score>o&&eq(c,b,tq))}let m=f.length,v=n-m;a&&v>0&&(f.push(...new Array(v).fill(0)),h.push(...new Array(v).fill(0)));let x={selectedIndices:f};return s&&(x.selectedScores=h),u&&(x.validOutputs=m),x}function DTe(e,t,n){let r=e.subarray(t*4,t*4+4),o=e.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),d=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),m=(a-i)*(u-s),v=(f-c)*(h-d);if(m<=0||v<=0)return 0;let x=Math.max(i,c),b=Math.max(s,d),C=Math.min(a,f),S=Math.min(u,h),O=Math.max(C-x,0)*Math.max(S-b,0);return O/(m+v-O)}function NTe(e,t,n){let r=Math.exp(t*n*n);return n<=e?r:0}function tq(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function ATe(i,s,a){return ne(this,arguments,function*(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY){let u=_(e,"boxes","nonMaxSuppressionAsync"),c=_(t,"scores","nonMaxSuppressionAsync"),d=sa(u,c,n,r,o);n=d.maxOutputSize,r=d.iouThreshold,o=d.scoreThreshold;let f=yield Promise.all([u.data(),c.data()]),h=f[0],m=f[1],{selectedIndices:v}=mI(h,m,n,r,o);return u!==e&&u.dispose(),c!==t&&c.dispose(),Gn(v,"int32")})}var nq=ATe;function RTe(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=_(e,"boxes","nonMaxSuppression"),a=_(t,"scores","nonMaxSuppression"),u=sa(s,a,n,r,o,i);n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,i=u.softNmsSigma;let c={boxes:s,scores:a},d={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i},f=k.runKernel(hT,c,d);return{selectedIndices:f[0],selectedScores:f[1]}}var rq=D({nonMaxSuppressionWithScore_:RTe});function kTe(s,a,u){return ne(this,arguments,function*(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let c=_(e,"boxes","nonMaxSuppressionAsync"),d=_(t,"scores","nonMaxSuppressionAsync"),f=sa(c,d,n,r,o,i);n=f.maxOutputSize,r=f.iouThreshold,o=f.scoreThreshold,i=f.softNmsSigma;let h=yield Promise.all([c.data(),d.data()]),m=h[0],v=h[1],{selectedIndices:x,selectedScores:b}=yI(m,v,n,r,o,i);return c!==e&&c.dispose(),d!==t&&d.dispose(),{selectedIndices:Gn(x,"int32"),selectedScores:Gn(b)}})}var oq=kTe;function OTe(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=_(e,"boxes","nonMaxSuppression"),a=_(t,"scores","nonMaxSuppression"),u=sa(s,a,n,r,o,null),c=u.maxOutputSize,d=u.iouThreshold,f=u.scoreThreshold,h={boxes:s,scores:a},m={maxOutputSize:c,iouThreshold:d,scoreThreshold:f,padToMaxOutputSize:i},v=k.runKernel(pT,h,m);return{selectedIndices:v[0],validOutputs:v[1]}}var iq=D({nonMaxSuppressionPadded_:OTe});function MTe(s,a,u){return ne(this,arguments,function*(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let c=_(e,"boxes","nonMaxSuppressionAsync"),d=_(t,"scores","nonMaxSuppressionAsync"),f=sa(c,d,n,r,o,null),h=f.maxOutputSize,m=f.iouThreshold,v=f.scoreThreshold,[x,b]=yield Promise.all([c.data(),d.data()]),{selectedIndices:C,validOutputs:S}=gI(x,b,h,m,v,i);return c!==e&&c.dispose(),d!==t&&d.dispose(),{selectedIndices:Gn(C,"int32"),validOutputs:Ge(S,"int32")}})}var sq=MTe;function FTe(e,t,n=!1,r=!1){let o=_(e,"images","resizeBilinear");M(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),M(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),M(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=Q(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=t,a={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=k.runKernel(NT,a,u);return s?Q(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var aq=D({resizeBilinear_:FTe});function PTe(e,t,n=!1,r=!1){let o=_(e,"images","resizeNearestNeighbor");M(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),M(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),M(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),M(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=Q(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=t,a={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=k.runKernel(DT,a,u);return s?Q(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var uq=D({resizeNearestNeighbor_:PTe});function $Te(e,t="binary",n=!1,r=.5){let o=_(e,"image","threshold"),i=.2989,s=.587,a=.114,u=o.shape[0]*o.shape[1],c=le(Gn([r]),255),d,f,h,m;if(M(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),M(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),M(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),M(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),o.shape[2]===3){[d,f,h]=Nc(o,[1,1,1],-1);let b=le(d,i),C=le(f,s),S=le(h,a);m=_e(_e(b,C),S)}else m=e;if(t==="otsu"){let b=R_(Ct(iI(m),"int32"),Fo([]),256);c=LTe(b,u)}let v=n?jm(m,c):Pf(m,c);return Ct(le(v,255),"int32")}function LTe(e,t){let n=Gn([-1]),r=Gn([0]),o=Gn([0]),i,s,a,u,c,d;for(let f=0;f<e.size-1;f++){i=qe(e,0,f+1),s=qe(e,f+1),c=Ze(Bt(i),t),d=Ze(Bt(s),t);let h=Bt(le(i,td(0,i.size)));a=Ze(h,Bt(i));let m=Iu(s.shape,i.size),v=_e(td(0,s.size),m),x=le(s,v);u=Ze(Bt(x),Bt(s));let b=Le(a,u),C=Le(a,u),S=le(c,d);o=le(le(S,b),C);let O=Pf(o,r);r=Is(O,o,r),n=Is(O,Gn([f]),n)}return n}var cq=D({threshold_:$Te});function VTe(e,t,n="nearest",r="constant",o=0,i){let s=_(e,"image","transform","float32"),a=_(t,"transforms","transform","float32");M(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),M(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),M(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);let u={image:s,transforms:a},c={interpolation:n,fillMode:r,fillValue:o,outputShape:i};return k.runKernel(o_,u,c)}var lq=D({transform_:VTe});function BTe(e,t,n){let r=_(e,"a","bandPart");M(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let o=r.shape,[i,s]=r.shape.slice(-2),a,u;typeof t=="number"?(M(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),M(t<=i,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${i}).`),a=_(t<0?i:t,"numLower","bandPart")):(M(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Is(m0(t,0),i,Vf(t,i))),typeof n=="number"?(M(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),M(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),u=_(n<0?s:n,"numUpper","bandPart")):(M(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=Is(m0(n,0),s,Vf(n,s)));let c=Q(td(0,i,1,"int32"),[-1,1]),d=td(0,s,1,"int32"),f=Le(c,d),h=$f(jm(f,a),B_(f,no(u))),m=ia([i,s],r.dtype);return Q(Po(Ds(Q(r,[-1,i,s])).map(v=>Is(h,v,m))),o)}var dq=D({bandPart_:BTe});function UTe(e){let t;if(Array.isArray(e)){t=!1,M(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let o=e[0].shape[0];for(let i=1;i<e.length;++i)M(e[i].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[i].shape[0]} vs. ${o})`)}else t=!0,e=Nc(e,e.shape[0],0).map(o=>gr(o,[0]));M(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);let n=[],r=e;for(let o=0;o<e.length;++o)n.push(k.tidy(()=>{let i=r[o];if(o>0)for(let s=0;s<o;++s){let a=le(Bt(le(n[s],i)),n[s]);i=Le(i,a)}return Ze(i,Ff(i,"euclidean"))}));return t?Po(n,0):n}var fq=D({gramSchmidt_:UTe});function GTe(e,t=!1){if(M(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return pq(e,t);{let n=e.shape.slice(0,e.shape.length-2).reduce((u,c)=>u*c),r=Ds(Q(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],i=[];r.forEach(u=>{let[c,d]=pq(u,t);o.push(c),i.push(d)});let s=Q(Po(o,0),e.shape),a=Q(Po(i,0),e.shape);return[s,a]}}function pq(e,t=!1){return k.tidy(()=>{M(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);let n=e.shape[0],r=e.shape[1],o=$_(n),i=$i(e),s=$a([[1]],[1,1]),a=$i(s),u=n>=r?r:n;for(let c=0;c<u;++c){let d=i,f=a,h=o;[a,i,o]=k.tidy(()=>{let m=qe(i,[c,c],[n-c,1]),v=Ff(m),x=qe(i,[c,c],[1,1]),b=Is(Pf(x,0),$a([[-1]]),$a([[1]])),C=Le(x,le(b,v)),S=Ze(m,C);S.shape[0]===1?a=$i(s):a=sn([s,qe(S,[1,0],[S.shape[0]-1,S.shape[1]])],0);let O=no(Ze(Vt(b,C),v)),F=qe(i,[c,0],[n-c,r]),B=le(O,a),H=fI(a);if(c===0)i=Le(F,Vt(B,Vt(H,F)));else{let te=Le(F,Vt(B,Vt(H,F)));i=sn([qe(i,[0,0],[c,r]),te],0)}let X=fI(B),Z=qe(o,[0,c],[n,o.shape[1]-c]);if(c===0)o=Le(Z,Vt(Vt(Z,a),X));else{let te=Le(Z,Vt(Vt(Z,a),X));o=sn([qe(o,[0,0],[n,c]),te],1)}return[a,i,o]}),Wt([d,f,h])}return!t&&n>r&&(o=qe(o,[0,0],[n,r]),i=qe(i,[0,0],[r,r])),[o,i]})}var hq=D({qr_:GTe});var ir=function(e){return e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",e}(ir||{});function jTe(e,t,n=ir.SUM_BY_NONZERO_WEIGHTS){let r=_(e,"losses","computeWeightedLoss"),o=null;t!=null&&(o=_(t,"weights","computeWeightedLoss"));let i=o==null?r:le(r,o);if(n===ir.NONE)return i;if(n===ir.SUM)return Bt(i);if(n===ir.MEAN){if(o==null)return Lf(i);{let s=r.size/o.size,a=Ze(Bt(i),Bt(o));return s>1?Ze(a,Ge(s)):a}}if(n===ir.SUM_BY_NONZERO_WEIGHTS){if(o==null)return Ze(Bt(i),Ge(r.size));{let s=le(o,Du(r.shape)),a=Ct(Bt(Y_(s,Ge(0))),"float32");return Ze(Bt(i),a)}}throw Error(`Unknown reduction: ${n}`)}var ro=D({computeWeightedLoss_:jTe});function zTe(e,t,n,r=ir.SUM_BY_NONZERO_WEIGHTS){let o=_(e,"labels","absoluteDifference"),i=_(t,"predictions","absoluteDifference"),s=null;n!=null&&(s=_(n,"weights","absoluteDifference")),Un(o.shape,i.shape,"Error in absoluteDifference: ");let a=Hr(Le(o,i));return ro(a,s,r)}var mq=D({absoluteDifference_:zTe});function HTe(e,t,n,r,o=ir.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"labels","cosineDistance"),s=_(t,"predictions","cosineDistance"),a=null;r!=null&&(a=_(r,"weights","cosineDistance")),Un(i.shape,s.shape,"Error in cosineDistance: ");let u=Ge(1),c=Le(u,Bt(le(i,s),n,!0));return ro(c,a,o)}var gq=D({cosineDistance_:HTe});function WTe(e,t,n,r=ir.SUM_BY_NONZERO_WEIGHTS){let o=_(e,"labels","hingeLoss"),i=_(t,"predictions","hingeLoss"),s=null;n!=null&&(s=_(n,"weights","hingeLoss")),Un(o.shape,i.shape,"Error in hingeLoss: ");let a=Ge(1);o=Le(le(Ge(2),o),a);let u=nd(Le(a,le(o,i)));return ro(u,s,r)}var yq=D({hingeLoss_:WTe});function qTe(e,t,n,r=1,o=ir.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"labels","huberLoss"),s=_(t,"predictions","huberLoss"),a=null;n!=null&&(a=_(n,"weights","huberLoss")),Un(i.shape,s.shape,"Error in huberLoss: ");let u=Ge(r),c=Hr(Le(s,i)),d=Vf(c,u),f=Le(c,d),h=_e(le(Ge(.5),Wr(d)),le(u,f));return ro(h,a,o)}var vq=D({huberLoss_:qTe});function KTe(e,t,n,r=1e-7,o=ir.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"labels","logLoss"),s=_(t,"predictions","logLoss"),a=null;n!=null&&(a=_(n,"weights","logLoss")),Un(i.shape,s.shape,"Error in logLoss: ");let u=Ge(1),c=Ge(r),d=no(le(i,Sc(_e(s,c)))),f=le(Le(u,i),Sc(_e(Le(u,s),c))),h=Le(d,f);return ro(h,a,o)}var xq=D({logLoss_:KTe});function XTe(e,t,n,r=ir.SUM_BY_NONZERO_WEIGHTS){let o=_(e,"labels","meanSquaredError"),i=_(t,"predictions","meanSquaredError"),s=null;n!=null&&(s=_(n,"weights","meanSquaredError")),Un(o.shape,i.shape,"Error in meanSquaredError: ");let a=aI(o,i);return ro(a,s,r)}var bq=D({meanSquaredError_:XTe});function YTe(e,t){let n=_(e,"labels","sigmoidCrossEntropyWithLogits"),r=_(t,"logits","sigmoidCrossEntropyWithLogits");Un(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=nd(r),i=le(r,n),s=G_(ai(no(Hr(r))));return _e(Le(o,i),s)}function ZTe(e,t,n,r=0,o=ir.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"multiClassLabels","sigmoidCrossEntropy"),s=_(t,"logits","sigmoidCrossEntropy"),a=null;if(n!=null&&(a=_(n,"weights","sigmoidCrossEntropy")),Un(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=Ge(r),d=Ge(1),f=Ge(.5);i=_e(le(i,Le(d,c)),le(f,c))}let u=YTe(i,s);return ro(u,a,o)}var wq=D({sigmoidCrossEntropy_:ZTe});function QTe(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return ui((o,i,s)=>{let u=z_(i,[n],!0),c=Le(Ct(i,"float32"),u);s([o,c]);let d=no(le(c,o));return{value:Bt(d,[n]),gradFunc:(m,v)=>{let[x,b]=v,C=_c(m.shape,[n]);return[le(Q(m,C),Le(Ct(x,"float32"),ai(b))),le(Q(m,C),Le(ai(b),Ct(x,"float32")))]}}})(e,t)}function JTe(e,t,n,r=0,o=ir.SUM_BY_NONZERO_WEIGHTS){let i=_(e,"onehotLabels","softmaxCrossEntropy"),s=_(t,"logits","softmaxCrossEntropy"),a=null;if(n!=null&&(a=_(n,"weights","softmaxCrossEntropy")),Un(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let c=Ge(r),d=Ge(1),f=Ge(i.shape[1]);i=_e(le(i,Le(d,c)),Ze(c,f))}let u=QTe(i,s);return ro(u,a,o)}var Eq=D({softmaxCrossEntropy_:JTe});function e_e(e,t,n,r){let o=_(e,"indices","sparseFillEmptyRows","int32"),i=_(t,"values","sparseFillEmptyRows"),s=_(n,"denseShape","sparseFillEmptyRows","int32"),a=_(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);let u={indices:o,values:i,denseShape:s,defaultValue:a},c=k.runKernel(WT,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var Cq=D({sparseFillEmptyRows_:e_e});function t_e(e,t,n){let r=_(e,"inputIndices","sparseReshape","int32"),o=_(t,"inputShape","sparseReshape","int32"),i=_(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);let s={inputIndices:r,inputShape:o,newShape:i},a=k.runKernel(qT,s);return{outputIndices:a[0],outputShape:a[1]}}var Tq=D({sparseReshape_:t_e});function n_e(e,t,n){let r=_(e,"data","sparseSegmentMean"),o=_(t,"indices","sparseSegmentMean","int32"),i=_(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return k.runKernel(KT,s)}var _q=D({sparseSegmentMean_:n_e});function r_e(e,t,n){let r=_(e,"data","sparseSegmentSum"),o=_(t,"indices","sparseSegmentSum","int32"),i=_(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return k.runKernel(XT,s)}var Iq=D({sparseSegmentSum_:r_e});function o_e(e,t,n,r,o,i,s,a){let u=_(e,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);let c=_(t,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let d={separator:n,nGramWidths:r,leftPad:o,rightPad:i,padWidth:s,preserveShortSequences:a},f={data:u,dataSplits:c},h=k.runKernel(QT,f,d);return{nGrams:h[0],nGramsSplits:h[1]}}var Sq=D({stringNGrams_:o_e});function i_e(e,t,n=!0){let r=_(e,"input","stringSplit","string"),o=_(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);let i={skipEmpty:n},s={input:r,delimiter:o},a=k.runKernel(JT,s,i);return{indices:a[0],values:a[1],shape:a[2]}}var Dq=D({stringSplit_:i_e});function s_e(e,t){let n=_(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");let o={input:n};return k.runKernel(e_,o,r)}var Nq=D({stringToHashBucketFast_:s_e});function a_e(e,t,n,r=!0){let o=_(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return k.runKernel(Im,{x:o},i)}var Aq=D({staticRegexReplace_:a_e});var u_e={fft:Hm,ifft:Gf,rfft:Wm,irfft:sI},c_e={hammingWindow:W9,hannWindow:pI,frame:hI,stft:q9},x0={flipLeftRight:X9,grayscaleToRGB:Y9,resizeNearestNeighbor:uq,resizeBilinear:aq,rgbToGrayscale:Z9,rotateWithOffset:Q9,cropAndResize:K9,nonMaxSuppression:J9,nonMaxSuppressionAsync:nq,nonMaxSuppressionWithScore:rq,nonMaxSuppressionWithScoreAsync:oq,nonMaxSuppressionPadded:iq,nonMaxSuppressionPaddedAsync:sq,threshold:cq,transform:lq},l_e={bandPart:dq,gramSchmidt:fq,qr:hq},d_e={absoluteDifference:mq,computeWeightedLoss:ro,cosineDistance:gq,hingeLoss:yq,huberLoss:vq,logLoss:xq,meanSquaredError:bq,sigmoidCrossEntropy:wq,softmaxCrossEntropy:Eq},f_e={sparseFillEmptyRows:Cq,sparseReshape:Tq,sparseSegmentMean:_q,sparseSegmentSum:Iq},p_e={stringNGrams:Sq,stringSplit:Dq,stringToHashBucketFast:Nq,staticRegexReplace:Aq};var h_e=new Map,m_e=new Map,vI=class{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}},zF=class e{constructor(){this.classNameMap={}}static getMap(){return e.instance==null&&(e.instance=new e),e.instance}static register(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}};function Rq(e,t,n){M(e.className!=null,()=>"Class being registered does not have the static className property defined."),M(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),M(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof n>"u"&&(n=e.className);let r=n,o=t+">"+r;return zF.register(e),h_e.set(o,e),m_e.set(e,o),e}var ci=class extends vI{minimize(t,n=!1,r){let{value:o,grads:i}=this.computeGradients(t,r);if(r!=null){let s=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(s)}else this.applyGradients(i);return Wt(i),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return m7(t,n)}dispose(){this.iterations_!=null&&Wt(this.iterations_)}saveIterations(){return ne(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ge(this.iterations_,"int32")}})}getWeights(){return ne(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(t){return ne(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(t){return ne(this,null,function*(){return this.iterations_=(yield t[0].tensor.data())[0],t.slice(1)})}};Object.defineProperty(ci,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});var xI=class extends ci{static get className(){return"Adadelta"}constructor(t,n,r=null){super(),this.learningRate=t,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=k.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=k.registeredVariables[r],s=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:ze(()=>_r(i).variable(s))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:ze(()=>_r(i).variable(s))});let a=Array.isArray(t)?t[o].tensor:t[r];if(a==null)return;let u=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;ze(()=>{let d=_e(le(u,this.rho),le(Wr(a),1-this.rho)),f=le(Ze(si(_e(c,this.epsilon)),si(_e(u,this.epsilon))),a),h=_e(le(c,this.rho),le(Wr(f),1-this.rho));u.assign(d),c.assign(h);let m=_e(le(f,-this.learningRate),i);i.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Wt(this.accumulatedGrads.map(t=>t.variable)),Wt(this.accumulatedUpdates.map(t=>t.variable)))}getWeights(){return ne(this,null,function*(){let t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(t){return ne(this,null,function*(){t=yield this.extractIterations(t);let n=t.length/2,r=!1;this.accumulatedGrads=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}};var bI=class extends ci{static get className(){return"Adagrad"}constructor(t,n=.1){super(),this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=k.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:ze(()=>Iu(i.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(t)?t[o].tensor:t[r];if(s==null)return;let a=this.accumulatedGrads[o].variable;ze(()=>{let u=_e(a,Wr(s));a.assign(u);let c=_e(le(Ze(s,si(_e(u,k.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Wt(this.accumulatedGrads.map(t=>t.variable))}getWeights(){return ne(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))})}setWeights(t){return ne(this,null,function*(){t=yield this.extractIterations(t);let n=!1;this.accumulatedGrads=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}};var wI=class extends ci{static get className(){return"Adam"}constructor(t,n,r,o=null){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ze(()=>{this.accBeta1=Ge(n).variable(),this.accBeta2=Ge(r).variable()}),o==null&&(this.epsilon=k.backend.epsilon())}applyGradients(t){let n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);ze(()=>{let r=Le(1,this.accBeta1),o=Le(1,this.accBeta2);n.forEach((i,s)=>{let a=k.registeredVariables[i],u=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:ze(()=>_r(a).variable(u))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:ze(()=>_r(a).variable(u))});let c=Array.isArray(t)?t[s].tensor:t[i];if(c==null)return;let d=this.accumulatedFirstMoment[s].variable,f=this.accumulatedSecondMoment[s].variable,h=_e(le(d,this.beta1),le(c,1-this.beta1)),m=_e(le(f,this.beta2),le(Wr(c),1-this.beta2)),v=Ze(h,r),x=Ze(m,o);d.assign(h),f.assign(m);let b=_e(le(Ze(v,_e(si(x),this.epsilon)),-this.learningRate),a);a.assign(b)}),this.accBeta1.assign(le(this.accBeta1,this.beta1)),this.accBeta2.assign(le(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Wt(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&Wt(this.accumulatedSecondMoment.map(t=>t.variable))}getWeights(){return ne(this,null,function*(){let t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(t){return ne(this,null,function*(){t=yield this.extractIterations(t),ze(()=>{this.accBeta1.assign(Ic(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ic(this.beta2,this.iterations_+1))});let n=t.length/2,r=!1;this.accumulatedFirstMoment=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}};var EI=class extends ci{static get className(){return"Adamax"}constructor(t,n,r,o=null,i=0){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=o,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ze(()=>{this.iteration=Ge(0).variable(),this.accBeta1=Ge(n).variable()}),o==null&&(this.epsilon=k.backend.epsilon())}applyGradients(t){let n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);ze(()=>{let r=Le(1,this.accBeta1),o=Ze(-this.learningRate,_e(le(this.iteration,this.decay),1));n.forEach((i,s)=>{let a=k.registeredVariables[i],u=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:_r(a).variable(u)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:_r(a).variable(u)});let c=Array.isArray(t)?t[s].tensor:t[i];if(c==null)return;let d=this.accumulatedFirstMoment[s].variable,f=this.accumulatedWeightedInfNorm[s].variable,h=_e(le(d,this.beta1),le(c,1-this.beta1)),m=le(f,this.beta2),v=Hr(c),x=X_(m,v);d.assign(h),f.assign(x);let b=_e(le(Ze(o,r),Ze(h,_e(x,this.epsilon))),a);a.assign(b)}),this.iteration.assign(_e(this.iteration,1)),this.accBeta1.assign(le(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Wt(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&Wt(this.accumulatedWeightedInfNorm.map(t=>t.variable))}getWeights(){return ne(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(t){return ne(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}};var qm=class extends ci{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=Array.isArray(t)?t[o].tensor:t[r];if(i==null)return;let s=k.registeredVariables[r];ze(()=>{let a=_e(le(this.c,i),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=ii(Ge(-t))}dispose(){this.c.dispose()}getWeights(){return ne(this,null,function*(){return[yield this.saveIterations()]})}setWeights(t){return ne(this,null,function*(){if(t=yield this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}};var CI=class extends qm{static get className(){return"Momentum"}constructor(t,n,r=!1){super(t),this.learningRate=t,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Ge(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=k.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:ze(()=>_r(i).variable(!1))});let s=this.accumulations[o].variable,a=Array.isArray(t)?t[o].tensor:t[r];a!=null&&ze(()=>{let u,c=_e(le(this.m,s),a);this.useNesterov?u=_e(le(this.c,_e(a,le(c,this.m))),i):u=_e(le(this.c,c),i),s.assign(c),i.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Wt(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}getWeights(){return ne(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))})}setWeights(t){return ne(this,null,function*(){t=yield this.extractIterations(t);let n=!1;this.accumulations=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}};var TI=class extends ci{static get className(){return"RMSProp"}constructor(t,n=.9,r=0,o=null,i=!1){if(super(),this.learningRate=t,this.decay=n,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,o==null&&(this.epsilon=k.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=k.registeredVariables[r],s=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:ze(()=>_r(i).variable(s))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:ze(()=>_r(i).variable(s))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:ze(()=>_r(i).variable(s))});let a=Array.isArray(t)?t[o].tensor:t[r];if(a==null)return;let u=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;ze(()=>{let d=_e(le(u,this.decay),le(Wr(a),1-this.decay));if(this.centered){let f=this.accumulatedMeanGrads[o].variable,h=_e(le(f,this.decay),le(a,1-this.decay)),m=Ze(le(a,this.learningRate),si(Le(d,_e(Wr(h),this.epsilon)))),v=_e(le(c,this.momentum),m);u.assign(d),f.assign(h),c.assign(v);let x=Le(i,v);i.assign(x)}else{let f=_e(le(u,this.decay),le(Wr(a),1-this.decay)),h=_e(le(c,this.momentum),Ze(le(a,this.learningRate),si(_e(f,this.epsilon))));u.assign(f),c.assign(h);let m=Le(i,h);i.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Wt(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Wt(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&Wt(this.accumulatedMoments.map(t=>t.variable))}getWeights(){return ne(this,null,function*(){let t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(t){return ne(this,null,function*(){t=yield this.extractIterations(t);let n=this.centered?t.length/3:t.length/2,r=!1;this.accumulatedMeanSquares=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}};var g_e=[xI,bI,wI,EI,CI,TI,qm];function kq(){for(let e of g_e)Rq(e)}var w0={};nn(w0,{CompositeArrayBuffer:()=>to,browserFiles:()=>Mq,browserHTTPRequest:()=>Vq,concatenateArrayBuffers:()=>YH,copyModel:()=>lW,decodeWeights:()=>w_,decodeWeightsStream:()=>E_,encodeWeights:()=>WH,fromMemory:()=>Bq,fromMemorySync:()=>ZF,getLoadHandlers:()=>eW,getModelArtifactsForJSON:()=>$m,getModelArtifactsForJSONSync:()=>TF,getModelArtifactsInfoForJSON:()=>Cu,getSaveHandlers:()=>JH,getWeightSpecs:()=>l0,http:()=>II,isHTTPScheme:()=>_I,listModels:()=>uW,loadWeights:()=>Pq,moveModel:()=>dW,registerLoadRouter:()=>QH,registerSaveRouter:()=>ZH,removeModel:()=>cW,weightsLoaderFactory:()=>XF,withSaveHandler:()=>Uq,withSaveHandlerSync:()=>Gq});var y_e="model",v_e=".json",x_e=".weights.bin";function Oq(e){return new Promise(t=>setTimeout(t)).then(e)}var HF=(()=>{class e{constructor(n){if(!z().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(e.URL_SCHEME)&&(n=n.slice(e.URL_SCHEME.length)),(n==null||n.length===0)&&(n=y_e),this.modelJsonFileName=n+v_e,this.weightDataFileName=n+x_e}save(n){return ne(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=to.join(n.weightData),o=window.URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let i=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],s=C_(n,i),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),u=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(u.download=this.modelJsonFileName,u.href=a,yield Oq(()=>u.dispatchEvent(new MouseEvent("click"))),n.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=o,yield Oq(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Cu(n)}}})}}return e.URL_SCHEME="downloads://",e})();var WF=class{constructor(t){if(t==null||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}load(){return ne(this,null,function*(){return new Promise((t,n)=>{let r=new FileReader;r.onload=o=>{let i=JSON.parse(o.target.result),s=i.modelTopology;if(s==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){t({modelTopology:s});return}let u=$m(i,c=>this.loadWeights(c));t(u)},r.onerror=o=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})})}loadWeights(t){let n=[],r=[];for(let s of t)n.push(...s.weights),r.push(...s.paths);let o=this.checkManifestAndWeightFiles(t),i=r.map(s=>this.loadWeightsFile(s,o[s]));return Promise.all(i).then(s=>[n,s])}loadWeightsFile(t,n){return new Promise((r,o)=>{let i=new FileReader;i.onload=s=>{let a=s.target.result;r(a)},i.onerror=s=>o(`Failed to weights data from file of path '${t}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(t){let n=[],r=this.weightsFiles.map(i=>CF(i.name)),o={};for(let i of t)i.paths.forEach(s=>{let a=CF(s);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);o[s]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}},b_e=e=>z().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(HF.URL_SCHEME)?w_e(e.slice(HF.URL_SCHEME.length)):null;kr.registerSaveRouter(b_e);function w_e(e="model"){return new HF(e)}function Mq(e){return new WF(e)}function qF(e,t,n,r){s(e),n=n??0,r=r??1,a(n,r);let o=0,i=u=>(u.then(c=>{let d=n+ ++o/e.length*(r-n);return t(d),c}),u);function s(u){M(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function a(u,c){M(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),M(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),M(c>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${c}`)}return Promise.all(e.map(i))}function KF(e,t){return ne(this,null,function*(){t==null&&(t={});let n=t.fetchFunc==null?z().platform.fetch:t.fetchFunc,r=e.map(f=>n(f,t.requestInit,{isBinary:!0})),a=(t.onProgress==null?yield Promise.all(r):yield qF(r,t.onProgress,0,.5)).map(f=>f.arrayBuffer());return t.onProgress==null?yield Promise.all(a):yield qF(a,t.onProgress,.5,1)})}function Fq(e,t){var n;let r=t.fetchFunc==null?z().platform.fetch:t.fetchFunc,o=0,i;return(n=t.onProgress)===null||n===void 0||n.call(t,0),new ReadableStream({pull:s=>ne(this,null,function*(){for(var a;o<e.length;){i||(i=(yield r(e[o],t.requestInit,{isBinary:!0})).body.getReader());let{done:u,value:c}=yield i.read();if(u){o++,i=void 0,(a=t.onProgress)===null||a===void 0||a.call(t,o/e.length);continue}s.enqueue(c);return}s.close()})})}function Pq(e,t="",n,r){return ne(this,null,function*(){return XF(s=>KF(s,{requestInit:r}))(e,t,n)})}function XF(e){return(t,n="",r)=>ne(this,null,function*(){let o=t.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],a=[];if(t.forEach((m,v)=>{let x=0;m.weights.forEach(b=>{let C="quantization"in b?b.quantization.dtype:b.dtype,S=Ec[C]*mt(b.shape),O=()=>{o[v]=!0,i[v]==null&&(i[v]=[]),i[v].push({manifestEntry:b,groupOffset:x,sizeBytes:S})};r!=null?r.forEach((F,B)=>{F===b.name&&(O(),s[B]=!0)}):O(),a.push(b.name),x+=S})}),!s.every(m=>m)){let m=r.filter((v,x)=>!s[x]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let u=o.reduce((m,v,x)=>(v&&m.push(x),m),[]),c=[];u.forEach(m=>{t[m].paths.forEach(v=>{let x=n+(n.endsWith("/")?"":"/")+v;c.push(x)})});let d=yield e(c),f={},h=0;return u.forEach(m=>{let v=t[m].paths.length,x=new to(d.slice(h,h+v));i[m].forEach(C=>{let S=x.slice(C.groupOffset,C.groupOffset+C.sizeBytes),O=w_(S,[C.manifestEntry]);for(let F in O)f[F]=O[F]}),h+=v}),f})}var E_e="application/octet-stream",C_e="application/json",$q=(()=>{class e{constructor(n,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(M(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=z().platform.fetch,M(n!=null&&n.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(n)&&M(n.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${n.length}).`),this.path=n,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{},this.loadOptions=r}save(n){return ne(this,null,function*(){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;let o=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i=C_(n,o);if(r.body.append("model.json",new Blob([JSON.stringify(i)],{type:C_e}),"model.json"),n.weightData!=null){let a=to.join(n.weightData);r.body.append("model.weights.bin",new Blob([a],{type:E_e}),"model.weights.bin")}let s=yield this.fetch(this.path,r);if(s.ok)return{modelArtifactsInfo:Cu(n),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)})}loadModelJSON(){return ne(this,null,function*(){let n=yield this.fetch(this.path,this.requestInit);if(!n.ok)throw new Error(`Request to ${this.path} failed with status code ${n.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=yield n.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let o=r.modelTopology,i=r.weightsManifest;if(o==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return r})}load(){return ne(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let n=yield this.loadModelJSON();return $m(n,r=>this.loadWeights(r))})}loadStream(){return ne(this,null,function*(){let n=yield this.loadModelJSON(),r=yield this.getWeightUrls(n.weightsManifest),o=l0(n.weightsManifest),i=()=>Fq(r,this.loadOptions);return Object.assign(Object.assign({},n),{weightSpecs:o,getWeightStream:i})})}getWeightUrls(n){return ne(this,null,function*(){let r=Array.isArray(this.path)?this.path[1]:this.path,[o,i]=T_e(r),s=this.weightPathPrefix||o,a=[],u=[];for(let c of n)for(let d of c.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(d)):a.push(s+d+i);return this.weightUrlConverter&&a.push(...yield Promise.all(u)),a})}loadWeights(n){return ne(this,null,function*(){let r=yield this.getWeightUrls(n),o=l0(n),i=yield KF(r,this.loadOptions);return[o,i]})}}return e.URL_SCHEME_REGEX=/^https?:\/\//,e})();function T_e(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),o=n>t?e.substring(n):"";return[r+"/",o]}function _I(e){return e.match($q.URL_SCHEME_REGEX)!=null}var Lq=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(r=>_I(r)):n=_I(e),n)return II(e,t)}return null};kr.registerSaveRouter(Lq);kr.registerLoadRouter(Lq);function II(e,t){return new $q(e,t)}function Vq(e,t){return II(e,t)}var b0=class{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}},SI=class{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}},YF=class{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=n=>Promise.resolve(t.save(n)))}};function Bq(e,t,n,r){let o=arguments;return new YF(ZF(...o))}function ZF(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new b0(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new b0({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new b0({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function Uq(e){return new SI(e)}function Gq(e){return new SI(e)}var E0={};nn(E0,{draw:()=>k_e,fromPixels:()=>O_e,fromPixelsAsync:()=>N_e,toPixels:()=>R_e});var qf,jq=!1;function zq(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,o=!1,i=!1,s=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else if(e.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&e instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);if(Am(n0,k.backendName)!=null){let v={pixels:e},x={numChannels:t};return k.runKernel(n0,v,x)}let[c,d]=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],f;if(s)f=e.getContext("2d").getImageData(0,0,c,d).data;else if(r||n)f=e.data;else if(i||o||a){if(qf==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")qf=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else qf=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});qf.canvas.width=c,qf.canvas.height=d,qf.drawImage(e,0,0,c,d),f=qf.getImageData(0,0,c,d).data}let h;if(t===4)h=new Int32Array(f);else{let v=c*d;h=new Int32Array(v*t);for(let x=0;x<v;x++)for(let b=0;b<t;++b)h[x*t+b]=f[x*4+b]}return cI(h,[d,c,t],"int32")}function __e(e){return e!=null&&e.data instanceof Uint8Array}function I_e(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function S_e(e){return e!=null&&e.width!==0&&e.height!==0}function D_e(e){return I_e()&&!(e instanceof ImageBitmap)&&S_e(e)&&!__e(e)}function N_e(e,t=3){return ne(this,null,function*(){let n=null;if(z().getBool("WRAP_TO_IMAGEBITMAP")&&D_e(e)){let r;try{r=yield createImageBitmap(e,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===e.width&&r.height===e.height?n=r:n=e}else n=e;return zq(n,t)})}function Hq(e){if(e.rank!==2&&e.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);let t=e.rank===2?1:e.shape[2];if(t>4||t===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if(e.dtype!=="float32"&&e.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}function A_e(e){let t=e?.alpha||1;if(t>1||t<0)throw new Error(`Alpha value ${t} is suppoed to be in range [0 - 1].`)}function R_e(e,t){return ne(this,null,function*(){let n=_(e,"img","toPixels");if(!(e instanceof Jt)){let c=n;n=Ct(c,"int32"),c.dispose()}Hq(n);let[r,o]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],s=yield n.data(),a=n.dtype==="float32"?255:1,u=new Uint8ClampedArray(o*r*4);for(let c=0;c<r*o;++c){let d=[0,0,0,255];for(let h=0;h<i;h++){let m=s[c*i+h];if(n.dtype==="float32"){if(m<0||m>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${m}.`)}else if(n.dtype==="int32"&&(m<0||m>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${m}.`);i===1?(d[0]=m*a,d[1]=m*a,d[2]=m*a):d[h]=m*a}let f=c*4;u[f+0]=Math.round(d[0]),u[f+1]=Math.round(d[1]),u[f+2]=Math.round(d[2]),u[f+3]=Math.round(d[3])}if(t!=null){jq||Am(aF,k.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),jq=!0),t.width=o,t.height=r;let c=t.getContext("2d"),d=new ImageData(u,o,r);c.putImageData(d,0,0)}return n!==e&&n.dispose(),u})}function k_e(e,t,n){let r=_(e,"img","draw");if(!(e instanceof Jt)){let s=r;r=Ct(s,"int32"),s.dispose()}Hq(r),A_e(n?.imageOptions);let o={image:r},i={canvas:t,options:n};k.runKernel(aF,o,i)}var O_e=D({fromPixels_:zq});function M_e(e,t){let n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(mt(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);let o=t.shape,i=o[o.length-1],s=1;for(let f=0;f<o.length-1;++f)s*=o[f];let a=e.shape,u=o.slice();u.pop();let c=1;for(let f=i;f<n;++f)c*=a[f],u.push(a[f]);let d=[...Eu(e.shape).map(f=>f/c),1].slice(0,i);return[u,s,c,d]}var li={};nn(li,{assertParamsValid:()=>P_e,computeFlatOffset:()=>U_e,computeOutShape:()=>L_e,getNormalizedAxes:()=>V_e,isSliceContinous:()=>B_e,maskToAxes:()=>$_e,parseSliceParams:()=>G_e,sliceInfo:()=>j_e,startForAxis:()=>Jq,startIndicesWithElidedDims:()=>Yq,stopForAxis:()=>eK,stopIndicesWithElidedDims:()=>Zq,stridesForAxis:()=>Qq,stridesWithElidedDims:()=>qq});var QF=-2,F_e=-1;function P_e(e,t,n){let r=e.shape.length;M(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),M(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)M(t[o]+n[o]<=e.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${t[o]+n[o]}) would overflow input.shape[${o}] (${e.shape[o]})`)}function $_e(e){let t=[],n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function L_e(e,t,n){let r=[];for(let o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function qq(e,t,n,r){let o=[...e];for(let i=o.length;i<r.length;i++)o.push(1);for(let i=0;i<n;i++)i===0?o[t]=1:(o.splice(t,0,1),o.pop());return o}function Kq(e,t,n){return n<=e?n:n-(t-1)}function Xq(e,t){let n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function V_e(e,t,n,r,o,i,s,a,u){let c=e.length,d=new Array(c),f=new Array(c),h=new Array(c);if(t.length&&n>0){let m=t[0],v=n+1;d=Yq(s,m,v,r,e),f=Zq(a,m,v,o,e),h=qq(i,m,v,e)}else for(let m=0;m<c;m++)d[m]=Jq(s,r,i,e,m,u),f[m]=eK(a,o,i,e,m,u),h[m]=Qq(i,m,u);return{begin:d,end:f,strides:h}}function Yq(e,t,n,r,o){let i=[...o],s=Xq(n,t);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=0;else{let u=Kq(t,n,a),c=r[u];e&1<<u&&(c=0),i[a]=c}return i}function Zq(e,t,n,r,o){let i=[...o],s=Xq(n,t);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{let u=Kq(t,n,a),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){let u=o[a];i[a]<0&&(i[a]+=u),i[a]=em(0,i[a],o[a])}return i}function Qq(e,t,n){let r=e[t];return(n&1<<t||r==null)&&(r=1),r}function Jq(e,t,n,r,o,i){let s=t[o],a=n[o]||1;(e&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let u=r[o];return s<0&&(s+=u),s=em(0,s,u-1),s}function eK(e,t,n,r,o,i){let s=t[o],a=n[o]||1;(e&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let u=r[o];return s<0&&(s+=u),a>0?s=em(0,s,u):s=em(-1,s,u-1),s}function B_e(e,t,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function U_e(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function G_e(e,t,n){let r,o=e.shape.length;typeof t=="number"?r=[t,...new Array(o-1).fill(0)]:t.length<o?r=t.concat(new Array(o-t.length).fill(0)):r=t.slice(),r.forEach(s=>{M(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(o).fill(-1):typeof n=="number"?i=[n,...new Array(o-1).fill(-1)]:n.length<o?i=n.concat(new Array(o-n.length).fill(-1)):i=n,i=i.map((s,a)=>s>=0?s:(M(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),e.shape[a]-r[a])),[r,i]}function j_e(e,t,n,r,o,i,s,a,u){let c;if(r==null?(c=new Array(t.length),c.fill(1)):c=r,s!=null&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let d=!1,f={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:u};for(let O=0;O<f.dims;O++)d&&1<<O&a&&f.numAddAxisAfterEllipsis++,1<<O&s&&(d=!0);d||(f.ellipsisMask|=1<<f.dims,f.dims++);let h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};z_e(f,h);let m=!0,v=!0,x=!0,b=[],C=[];for(let O=0;O<e.length;++O){if(h.strides[O]===0)throw Error(`strides[${O}] must be non-zero`);let F=!!(h.shrinkAxisMask&1<<O),B=e[O];if(B===-1){b.push(F?1:-1);continue}let H=[h.beginMask&1<<O,h.endMask&1<<O],X=[h.strides[O]>0?0:-1,h.strides[O]>0?B:B-1];if(F&&h.strides[O]<=0)throw Error("only stride 1 allowed on non-range indexing.");x=x&&h.strides[O]===1;let Z=!!(h.beginMask&1<<O&&h.endMask&1<<O);if(h.beginValid&&h.endValid){if(F){let ye=h.begin[O]<0?B+h.begin[O]:h.begin[O];if(h.begin[O]=ye,h.end[O]=h.begin[O]+1,ye<0||ye>=B)throw Error(`slice index ${h.begin[O]} of dimension ${O} out of bounds.`)}else h.begin[O]=Wq(h.begin[O],0,h.strides[O],B,H,X),h.end[O]=Wq(h.end[O],1,h.strides[O],B,H,X);let ae=h.strides[O]===1&&h.begin[O]===0&&h.end[O]===B;m=m&&ae,v=v&&(O===0&&h.strides[O]===1||ae)}else m=m&&h.strides[O]===1&&Z,v=v&&(O===0&&h.strides[O]===1||Z);let te,J=!1;if(h.beginValid&&h.endValid?(te=h.end[O]-h.begin[O],J=!0):F?(te=1,J=!0):Z&&B>=0&&(h.strides[O]<0?te=-B:te=B,J=!0),J){let ae;te===0||te<0!=h.strides[O]<0?ae=0:ae=Math.trunc(te/h.strides[O])+(te%h.strides[O]!==0?1:0),b.push(ae)}else b.push(-1)}for(let O=0;O<h.finalShapeGatherIndices.length;++O){let F=h.finalShapeGatherIndices[O];F>=0?C.push(b[F]):F===QF&&C.push(1)}return{finalShapeSparse:C.filter((O,F)=>h.finalShapeGatherIndices[F]!==QF),finalShape:C,isIdentity:m,sliceDim0:v,isSimpleSlice:x,begin:h.begin,end:h.end,strides:h.strides}}function z_e(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){let o=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(QF),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[r]),e.end!=null&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(F_e),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function Wq(e,t,n,r,o,i){if(o[t])return n>0?i[t]:i[t+1&1];{let s=e<0?r+e:e;return s<i[0]?i[0]:s>i[1]?i[1]:s}}var H_e=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:e=>e();function JF(){return new Promise(e=>H_e(()=>e()))}var U={};nn(U,{ERF_A1:()=>uIe,ERF_A2:()=>cIe,ERF_A3:()=>lIe,ERF_A4:()=>dIe,ERF_A5:()=>fIe,ERF_P:()=>aIe,PARALLELIZE_THRESHOLD:()=>DI,RowPartitionType:()=>Ac,SELU_SCALE:()=>sIe,SELU_SCALEALPHA:()=>iIe,applyActivation:()=>Hf,assertAndGetBroadcastShape:()=>Ft,assertAxesAreInnerMostDims:()=>Awe,assertParamsConsistent:()=>W_e,assignToTypedArray:()=>vIe,axesAreInnerMostDims:()=>MF,calculateShapes:()=>VCe,checkEinsumDimSizes:()=>TIe,checkPadOnDimRoundingMode:()=>or,combineLocations:()=>s7,combineRaggedTensorToTensorShapes:()=>K_e,complexWithEvenIndex:()=>mIe,complexWithOddIndex:()=>gIe,computeConv2DInfo:()=>Mf,computeConv3DInfo:()=>SW,computeDefaultPad:()=>OF,computeDilation2DInfo:()=>Dbe,computeOptimalWindowSize:()=>Q_e,computeOutAndReduceShapes:()=>Nwe,computeOutShape:()=>q_e,computePool2DInfo:()=>kF,computePool3DInfo:()=>Nbe,convertConv2DDataFormat:()=>DW,decodeEinsumEquation:()=>EIe,eitherStridesOrDilationsAreOne:()=>xo,expandShapeToKeepDim:()=>_c,exponent:()=>bIe,exponents:()=>xIe,fromStringArrayToUint8:()=>HIe,fromUint8ToStringArray:()=>zIe,getAxesPermutation:()=>Rwe,getBroadcastDims:()=>t7,getComplexWithIndex:()=>yIe,getEinsumComputePath:()=>_Ie,getEinsumPermutation:()=>CIe,getFusedBiasGradient:()=>zf,getFusedDyActivation:()=>jf,getImageCenter:()=>J_e,getInnerMostAxes:()=>Owe,getPermuted:()=>tIe,getRaggedRank:()=>Y_e,getReductionAxes:()=>M_,getReshaped:()=>eIe,getReshapedPermuted:()=>nIe,getRowPartitionTypesHelper:()=>X_e,getSliceBeginCoords:()=>rIe,getSliceSize:()=>oIe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>NIe,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>AIe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>RIe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>MIe,getSparseReshapeInputOutputMismatchErrorMessage:()=>PIe,getSparseReshapeInputOutputMultipleErrorMessage:()=>FIe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>kIe,getSparseReshapeNegativeOutputDimErrorMessage:()=>OIe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>BIe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>$Ie,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>LIe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>VIe,getUndoAxesPermutation:()=>kwe,isIdentityPermutation:()=>IIe,log:()=>x1e,mergeRealAndImagArrays:()=>pIe,prepareAndValidate:()=>M_e,prepareSplitSize:()=>DIe,segment_util:()=>t3,shouldFuse:()=>Wf,slice_util:()=>li,splitRealAndImagArrays:()=>hIe,stridesOrDilationsArePositive:()=>Tu,tupleValuesAreOne:()=>Of,upcastType:()=>vo,validateDefaultValueShape:()=>Z_e,validateInput:()=>y0,validateUpdateShape:()=>N9,warn:()=>bc});function W_e(e,t){let n=e[0].length;e.forEach((o,i)=>{M(o.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),M(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=e[0];e.forEach((o,i)=>{for(let s=0;s<n;s++)M(s===t||o[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function q_e(e,t){let n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var Ac=function(e){return e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS",e}(Ac||{});function K_e(e,t,n){let r=new Array;if(n==null&&t==null)return r;if(t==null)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(n==null)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){let i=n[o],s=r[r.length-n.length+o],a=r[s];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${o+e}] = ${i} but shape[${o+e}] = ${a}`)}else r[s]=i}return r}function X_e(e){let t={FIRST_DIM_SIZE:Ac.FIRST_DIM_SIZE,VALUE_ROWIDS:Ac.VALUE_ROWIDS,ROW_LENGTHS:Ac.ROW_LENGTHS,ROW_SPLITS:Ac.ROW_SPLITS,ROW_LIMITS:Ac.ROW_LIMITS,ROW_STARTS:Ac.ROW_STARTS},n=[];for(let r of e)if(r in t)n.push(t[r]);else break;return n}function Y_e(e){return e.length===0?0:e[0]===Ac.FIRST_DIM_SIZE?e.length-1:e.length}function Z_e(e,t){if(e==null||t==null)return;let n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){let i=e[o],s=t[o+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${o-e.length}] = ${i} but ragged tensor input.flatValues.shape[${o-e.length}] = ${s}`)}}var DI=30;function Q_e(e){return e<=DI?e:om(e,Math.floor(Math.sqrt(e)))}function J_e(e,t,n){let r=n*(typeof e=="number"?e:e[0]),o=t*(typeof e=="number"?e:e[1]);return[r,o]}function eIe(e,t,n,r=!0){let o=[];if(r)o=o.concat(t.slice(0)),o.push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);let i=t.length;for(let s=0;s<i;++s)o=o.concat([e[s+1]/t[s],t[s]]);o=o.concat(e.slice(i+1))}return o}function tIe(e,t,n=!0){let r=[];if(n){r.push(t);for(let o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{let o=[],i=[];for(let s=1;s<e;++s)s>=t*2+1||s%2===1?i.push(s):o.push(s);r.push(...o),r.push(0),r.push(...i)}return r}function nIe(e,t,n,r=!0){let o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(let i=1;i<e.length;++i)i<=t.length?r?o.push(t[i-1]*e[i]):o.push(e[i]/t[i-1]):o.push(e[i]);return o}function rIe(e,t){let n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function oIe(e,t,n){let r=e.slice(0,1);for(let o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}var iIe=1.7580993408473768,sIe=1.0507009873554805;var aIe=.3275911,uIe=.254829592,cIe=-.284496736,lIe=1.421413741,dIe=-1.453152027,fIe=1.061405429;function pIe(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);let n=new Float32Array(e.length*2);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function hIe(e){let t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function mIe(e){let t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function gIe(e){let t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function yIe(e,t){let n=e[t*2],r=e[t*2+1];return{real:n,imag:r}}function vIe(e,t,n,r){e[r*2]=t,e[r*2+1]=n}function xIe(e,t){let n=new Float32Array(e/2),r=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){let i=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}function bIe(e,t,n){let r=(n?2:-2)*Math.PI*(e/t),o=Math.cos(r),i=Math.sin(r);return{real:o,imag:i}}var e3="->",wIe=/->/g,tK=",",nK="...";function EIe(e,t){e=e.replace(/\s/g,"");let n=(e.length-e.replace(wIe,"").length)/e3.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${e3}").`);let[r,o]=e.split(e3);M(r.indexOf(nK)===-1,()=>`The ellipsis notation ("${nK}") is not supported yet.`);let i=r.split(tK),s=i.length;if(t!==s)throw new Error(`Expected ${s} input tensors, received ${t}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let h=0;h<o.length;++h){let m=o[h];if(!i.some(v=>v.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);a.indexOf(m)===-1&&a.push(m)}for(let h=0;h<r.length;++h){let m=r[h];a.indexOf(m)===-1&&m!==tK&&a.push(m)}let u=new Array(i.length);for(let h=0;h<s;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error(`Found duplicate axes in input component ${i[h]}. Support for duplicate axes in input is not implemented yet.`);u[h]=[];for(let m=0;m<i[h].length;++m)u[h].push(a.indexOf(i[h][m]))}let c=a.length,d=o.length,f=[];for(let h=d;h<c;++h)f.push(h);return{allDims:a,summedDims:f,idDims:u}}function CIe(e,t){let n=new Array(e);n.fill(-1);for(let o=0;o<t.length;++o)n[t[o]]=o;let r=[];for(let o=0;o<e;++o)n[o]===-1&&r.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:r}}function TIe(e,t,n){let r=new Array(e);for(let o=0;o<n.length;++o){let i=n[o].shape;for(let s=0;s<t[o].length;++s)r[t[o][s]]===void 0?r[t[o][s]]=i[s]:M(r[t[o][s]]===i[s],()=>`Expected dimension ${r[t[o][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function _Ie(e,t){let n=e,r=[],o=0;e.length===0&&n.push(-1),o=e.length+1;for(let s=0;s<o;++s)r.push([]);let i=[];for(let s=0;s<n.length;++s){let a=n[s],u=SIe(t,a);for(let c of u)i.indexOf(c)===-1&&(r[s].push(c),i.push(c))}return{path:n,steps:r}}function IIe(e){return e.every((t,n)=>t===n)}function SIe(e,t){let n=[];for(let r=0;r<e.length;++r)(e[r].length===0||e[r].indexOf(t)!==-1||t===-1)&&n.push(r);return n}function DIe(e,t,n=0){let r=[];if(typeof t=="number")M(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{let o=t.reduce((s,a)=>(a===-1&&(s+=1),s),0);M(o<=1,()=>"There should be only one negative value in split array.");let i=t.indexOf(-1);if(i!==-1){let s=t.reduce((a,u)=>u>0?a+u:a);t[i]=e.shape[n]-s}M(e.shape[n]===t.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function NIe(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function AIe(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function RIe(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function kIe(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function OIe(e,t){return`size ${e} must be non-negative, not ${t}`}function MIe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function FIe(e,t){let n=mt(e),r=mt(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${e} outputShape= ${t}`}function PIe(e,t){let n=mt(e),r=mt(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${e} outputShape=${t}`}function $Ie(){return"segment ids must be >= 0"}function LIe(){return"segment ids are not increasing"}function VIe(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function BIe(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}var t3={};nn(t3,{collectGatherOpShapeInfo:()=>jIe,computeOutShape:()=>GIe,segOpComputeOptimalWindowSize:()=>UIe});function UIe(e,t){let n=!1,r;for(e<=DI?(r=e,n=!0):r=om(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=om(e,r+1);return r}function GIe(e,t,n){let r=[],o=e.length;for(let i=0;i<o;i++)i!==t?r.push(e[i]):r.push(n);return r}function jIe(e,t,n,r){let o=t.shape.length,i=e.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(e.shape[f]!==t.shape[f])throw new Error(`x.shape[${f}]: ${e.shape[f]} should be equal to indices.shape[${f}]: ${t.shape[f]}.`);let s=e.shape[n],a=[],u=1,c=1,d=1;for(let f=0;f<r;++f)a.push(e.shape[f]),u*=e.shape[f];for(let f=r;f<n;f++)a.push(e.shape[f]),c*=e.shape[f];for(let f=r;f<o;f++)a.push(t.shape[f]);for(let f=n+1;f<i;f++)a.push(e.shape[f]),d*=e.shape[f];return{batchSize:u,sliceSize:d,outerSize:c,dimSize:s,outputShape:a}}function zIe(e){try{return e.map(t=>Fm(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function HIe(e){return e.map(t=>Mm(t))}var Au={};nn(Au,{nonMaxSuppressionV3Impl:()=>mI,nonMaxSuppressionV4Impl:()=>gI,nonMaxSuppressionV5Impl:()=>yI,whereImpl:()=>lI});kq();var WIe=z();WIe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var Vi=function(e){return e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF",e}(Vi||{}),oK;(function(e){let t;(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(oK||(oK={}));var KIe={};function NI(e){return KIe[e]}function T(e,t,n,r,o){let i=t.inputParams[e];if(i&&i.inputIndexStart!==void 0){let a=i.inputIndexStart,u=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?t.inputNames.length+a:a;if(i.type==="tensor")return sr(t.inputNames[c],n,r,o);if(i.type==="tensors"){let h=t.inputs.slice(a,u);return t.inputNames.slice(a,u).filter((v,x)=>{var b;return((b=h[x])===null||b===void 0?void 0:b.op)!=="NoOp"}).map(v=>sr(v,n,r,o))}let d=sr(t.inputNames[c],n,r,o),f=d.dataSync();return i.type==="number"?f[0]:N.toNestedArray(d.shape,f)}let s=t.attrParams[e];return s&&s.value}function sr(e,t,n,r){let[o,i]=$o(e,n);if(r!=null){let a=r.getHashTableHandleByName(o);if(a!=null)return a}let s=n.currentContextIds.find(a=>!!t[AI(o,a)]);return s!==void 0?t[AI(o,s)][i]:void 0}function n3(e,t,n){return t[AI(e,n.currentContextId)]}function La(e,t){let[n,r,o]=$o(e,t);return[AI(n,t&&t.currentContextId),r,o]}function AI(e,t){return t?`${e}-${t}`:e}function $o(e,t){if(e==="")return["",0,void 0];let n=t!=null&&t.parseNodeNameCache!=null;if(n){let i=t.parseNodeNameCache.get(e);if(i!=null)return i}let r=e.split(":"),o;if(r.length===1)o=[e,0,void 0];else{let i=r[0],s=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);o=[i,a,s]}return n&&t.parseNodeNameCache.set(e,o),o}function C0(e,t,n){let r=T("pad",e,t,n);if(r==="explicit"){r=T("explicitPaddings",e,t,n);let o=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)o[i][0]=r[i*2],o[i][1]=r[i*2+1];return o}return r}function Va(e){return e.kept?e:$i(e)}var r3={};nn(r3,{json:()=>XIe});var XIe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var o3={};nn(o3,{json:()=>YIe});var YIe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var i3={};nn(i3,{json:()=>ZIe});var ZIe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}];var s3={};nn(s3,{json:()=>QIe});var QIe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];var a3={};nn(a3,{json:()=>JIe});var JIe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];var u3={};nn(u3,{json:()=>eSe});var eSe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var c3={};nn(c3,{json:()=>tSe});var tSe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];var l3={};nn(l3,{json:()=>nSe});var nSe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];var d3={};nn(d3,{json:()=>rSe});var rSe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var f3={};nn(f3,{json:()=>oSe});var oSe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}];var p3={};nn(p3,{json:()=>iSe});var iSe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}];var h3={};nn(h3,{json:()=>sSe});var sSe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}];var m3={};nn(m3,{json:()=>aSe});var aSe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}];var g3={};nn(g3,{json:()=>uSe});var uSe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];var y3={};nn(y3,{json:()=>cSe});var cSe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var v3={};nn(v3,{json:()=>lSe});var lSe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}];var x3={};nn(x3,{json:()=>dSe});var dSe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];var b3={};nn(b3,{json:()=>fSe});var fSe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}];var w3={};nn(w3,{json:()=>pSe});var pSe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];var T0=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let t=[r3,o3,i3,s3,a3,u3,c3,l3,d3,f3,p3,h3,m3,g3,y3,v3,x3,b3,w3],n=[].concat(...t.map(r=>r.json));this.opMappers=n.reduce((r,o)=>(r[o.tfOpName]=o,r),{})}transformGraph(t,n={}){let r=t.node,o=[],i=[],s=[],a=r.reduce((x,b)=>(x[b.name]=this.mapNode(b),b.op.startsWith("Placeholder")?o.push(x[b.name]):b.op==="Const"?i.push(x[b.name]):(b.input==null||b.input.length===0)&&s.push(x[b.name]),x),{}),u=[],c=[],d={},f={};n!=null&&(d=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));let h=Object.keys(a);h.forEach(x=>{let b=a[x];b.inputNames.forEach((C,S)=>{let[O,,F]=La(C),B=a[O];if(B.outputs!=null){let H=B.outputs.indexOf(F);if(H!==-1){let X=`${O}:${H}`;b.inputNames[S]=X}}b.inputs.push(B),B.children.push(b)})}),Object.keys(f).length===0?h.forEach(x=>{let b=a[x];b.children.length===0&&c.push(b)}):Object.keys(f).forEach(x=>{let[b]=La(x),C=a[b];C!=null&&(C.signatureKey=f[x],c.push(C))}),Object.keys(d).length>0?Object.keys(d).forEach(x=>{let[b]=La(x),C=a[b];C&&(C.signatureKey=d[x],u.push(C))}):u=o;let m={};t.library!=null&&t.library.function!=null&&(m=t.library.function.reduce((x,b)=>(x[b.signature.name]=this.mapFunction(b),x),{}));let v={nodes:a,inputs:u,outputs:c,weights:i,placeholders:o,signature:n,functions:m};return s.length>0&&(v.initNodes=s),v}mapSignatureEntries(t){return Object.keys(t||{}).reduce((n,r)=>(n[t[r].name]=r,n),{})}mapNode(t){let n=NI(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});let r={name:t.name,op:t.op,category:n.category,inputNames:(t.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((o,i)=>(o[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},o),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((o,i)=>{let s=i.type,a;switch(i.type){case"string":a=RI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=RI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=LI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=LI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=OI(t.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=OI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=$I(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=$I(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=kI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=kI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=BI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=BI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=PI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=PI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=VI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=VI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=MI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=MI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=FI(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=FI(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=iK(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=iK(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${t.op}`)}return o[i.name]={value:a,type:s},o},{})),r}mapFunction(t){let n=t.nodeDef,r=[],o=[],i={};n!=null&&(i=n.reduce((f,h)=>(f[h.name]=this.mapNode(h),h.op==="Const"&&o.push(f[h.name]),f),{}));let s=[],a=[];t.signature.inputArg.forEach(f=>{let[h]=La(f.name),m={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:E3(f.type),type:"dtype"}},children:[]};m.signatureKey=f.name,s.push(m),i[h]=m}),Object.keys(i).forEach(f=>{let h=i[f];h.inputNames.forEach((m,v)=>{let[x,,b]=La(m),C=i[x];if(C.outputs!=null){let S=C.outputs.indexOf(b);if(S!==-1){let O=`${x}:${S}`;h.inputNames[v]=O}}h.inputs.push(C),C.children.push(h)})});let c=t.ret;t.signature.outputArg.forEach(f=>{let[h,m]=La(c[f.name]),v=i[h];v!=null&&(v.defaultOutput=m,a.push(v))});let d=this.mapArgsToSignature(t);return{nodes:i,inputs:s,outputs:a,weights:o,placeholders:r,signature:d}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:t.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,t.ret),n),{})}}mapArgToTensorInfo(t,n){let r=t.name;return n!=null&&(r=n[r]),{name:r,dtype:t.type}}};function hSe(e){let t=z().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function sK(e,t){let n=Array.isArray(e)?String.fromCharCode.apply(null,e):hSe(e);return t?n:n.toLowerCase()}function RI(e,t,n,r=!1){let o=e[t];return o!=null?sK(o.s,r):n}function kI(e,t,n){let r=e[t];return r?r.b:n}function OI(e,t,n){let r=e[t]||{},o=r.i!=null?r.i:r.f!=null?r.f:n;return typeof o=="number"?o:parseInt(o,10)}function E3(e){switch(typeof e=="string"&&(e=Vi[e]),e){case Vi.DT_FLOAT:case Vi.DT_HALF:return"float32";case Vi.DT_INT32:case Vi.DT_INT64:case Vi.DT_INT8:case Vi.DT_UINT8:return"int32";case Vi.DT_BOOL:return"bool";case Vi.DT_DOUBLE:return"float32";case Vi.DT_STRING:return"string";case Vi.DT_COMPLEX64:case Vi.DT_COMPLEX128:return"complex64";default:return null}}function iK(e,t,n){let r=e[t];return r&&r.func?r.func.name:n}function MI(e,t,n){let r=e[t];return r&&r.type?E3(r.type):n}function FI(e,t,n){let r=e[t];return r&&r.list&&r.list.type?r.list.type.map(o=>E3(o)):n}function aK(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function PI(e,t,n){let r=e[t];return r&&r.shape?aK(r.shape):n}function $I(e,t,n){let r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):n}function LI(e,t,n,r=!1){let o=e[t];return o&&o.list&&o.list.s?o.list.s.map(i=>sK(i,r)):n}function VI(e,t,n){let r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(o=>aK(o)):n}function BI(e,t,n){let r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var UI=class{constructor(t,n,r){this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(o=>this.getInput(o)),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce((o,i)=>(o[i]=this.getAttr(i),o),{}))}getInput(t){return sr(t,this.tensorMap,this.context)}getAttr(t,n){let r=this.node.rawAttrs[t];if(r.tensor!=null)return sr(t,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return OI(this.node.rawAttrs,t,n);if(r.s!=null)return RI(this.node.rawAttrs,t,n);if(r.b!=null)return kI(this.node.rawAttrs,t,n);if(r.shape!=null)return PI(this.node.rawAttrs,t,n);if(r.type!=null)return MI(this.node.rawAttrs,t,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return $I(this.node.rawAttrs,t,n);if(r.list.s!=null)return LI(this.node.rawAttrs,t,n);if(r.list.shape!=null)return VI(this.node.rawAttrs,t,n);if(r.list.b!=null)return BI(this.node.rawAttrs,t,n);if(r.list.type!=null)return FI(this.node.rawAttrs,t,n)}return n}};var Ot={};nn(Ot,{OP_SCOPE_SUFFIX:()=>wF,abs:()=>Hr,acos:()=>mW,acosh:()=>gW,add:()=>_e,addN:()=>yW,all:()=>vW,any:()=>xW,argMax:()=>bW,argMin:()=>wW,asin:()=>EW,asinh:()=>CW,atan:()=>TW,atan2:()=>_W,atanh:()=>IW,avgPool:()=>N_,avgPool3d:()=>NW,basicLSTMCell:()=>AW,batchNorm:()=>Kl,batchNorm2d:()=>kW,batchNorm3d:()=>OW,batchNorm4d:()=>MW,batchToSpaceND:()=>A_,bincount:()=>R_,bitwiseAnd:()=>FW,booleanMaskAsync:()=>KCe,broadcastArgs:()=>PW,broadcastTo:()=>Xl,buffer:()=>wt,cast:()=>Ct,ceil:()=>$W,clipByValue:()=>k_,clone:()=>$i,complex:()=>oi,concat:()=>sn,concat1d:()=>LW,concat2d:()=>VW,concat3d:()=>BW,concat4d:()=>UW,conv1d:()=>GW,conv2d:()=>Yl,conv2dTranspose:()=>jW,conv3d:()=>zW,conv3dTranspose:()=>WW,cos:()=>qW,cosh:()=>KW,cosineWindow:()=>v0,cumprod:()=>XW,cumsum:()=>YW,denseBincount:()=>ZW,depthToSpace:()=>QW,depthwiseConv2d:()=>Gm,diag:()=>JW,dilation2d:()=>e7,div:()=>Ze,divNoNan:()=>n7,dot:()=>r7,dropout:()=>sTe,einsum:()=>Ql,elu:()=>P_,enclosingPowerOfTwo:()=>UF,ensureShape:()=>o7,equal:()=>F_,erf:()=>i7,euclideanNorm:()=>u7,exp:()=>ai,expandDims:()=>Li,expm1:()=>c7,eye:()=>$_,fft:()=>Hm,fill:()=>Iu,floor:()=>L_,floorDiv:()=>D_,fused:()=>GF,gather:()=>V_,gatherND:()=>oTe,greater:()=>Pf,greaterEqual:()=>B_,ifft:()=>Gf,imag:()=>ed,image:()=>x0,inTopKAsync:()=>uTe,irfft:()=>sI,isFinite:()=>l7,isInf:()=>d7,isNaN:()=>f7,leakyRelu:()=>U_,less:()=>m0,lessEqual:()=>jm,linalg:()=>l_e,linspace:()=>p7,localResponseNormalization:()=>h7,log:()=>Sc,log1p:()=>G_,logSigmoid:()=>g7,logSoftmax:()=>y7,logSumExp:()=>z_,logicalAnd:()=>$f,logicalNot:()=>H_,logicalOr:()=>W_,logicalXor:()=>v7,losses:()=>d_e,lowerBound:()=>x7,matMul:()=>Vt,max:()=>Su,maxPool:()=>K_,maxPool3d:()=>b7,maxPoolWithArgmax:()=>w7,maximum:()=>X_,mean:()=>Lf,meshgrid:()=>E7,min:()=>h0,minimum:()=>Vf,mirrorPad:()=>C7,mod:()=>T7,moments:()=>_7,movingAverage:()=>ZCe,mul:()=>le,multiRNNCell:()=>I7,multinomial:()=>S7,neg:()=>no,norm:()=>Ff,notEqual:()=>Y_,oneHot:()=>D7,ones:()=>Du,onesLike:()=>N7,op:()=>D,outerProduct:()=>A7,pad:()=>Nu,pad1d:()=>R7,pad2d:()=>k7,pad3d:()=>O7,pad4d:()=>M7,pool:()=>F7,pow:()=>Ic,prelu:()=>Q_,print:()=>S_,prod:()=>P7,raggedGather:()=>$7,raggedRange:()=>L7,raggedTensorToTensor:()=>V7,rand:()=>B7,randomGamma:()=>o9,randomNormal:()=>rI,randomStandardNormal:()=>i9,randomUniform:()=>zm,randomUniformInt:()=>s9,range:()=>td,real:()=>Dc,reciprocal:()=>a9,relu:()=>nd,relu6:()=>oI,reshape:()=>Q,reverse:()=>Ss,reverse1d:()=>u9,reverse2d:()=>c9,reverse3d:()=>l9,reverse4d:()=>d9,rfft:()=>Wm,round:()=>iI,rsqrt:()=>f9,scalar:()=>Ge,scatterND:()=>JCe,searchSorted:()=>g0,selu:()=>p9,separableConv2d:()=>h9,setdiff1dAsync:()=>m9,sigmoid:()=>oa,sign:()=>g9,signal:()=>c_e,sin:()=>y9,sinh:()=>v9,slice:()=>qe,slice1d:()=>x9,slice2d:()=>b9,slice3d:()=>w9,slice4d:()=>E9,softmax:()=>C9,softplus:()=>j_,spaceToBatchND:()=>Z_,sparse:()=>f_e,sparseToDense:()=>nTe,spectral:()=>u_e,split:()=>Nc,sqrt:()=>si,square:()=>Wr,squaredDifference:()=>aI,squeeze:()=>gr,stack:()=>Po,step:()=>uI,stridedSlice:()=>T9,string:()=>p_e,sub:()=>Le,sum:()=>Bt,tan:()=>_9,tanh:()=>p0,tensor:()=>Fo,tensor1d:()=>Gn,tensor2d:()=>$a,tensor3d:()=>cI,tensor4d:()=>I9,tensor5d:()=>S9,tensor6d:()=>D9,tensorScatterUpdate:()=>R9,tile:()=>Jl,topk:()=>k9,transpose:()=>fI,truncatedNormal:()=>O9,unique:()=>M9,unsortedSegmentSum:()=>F9,unstack:()=>Ds,upperBound:()=>P9,variable:()=>$9,where:()=>Is,whereAsync:()=>dI,zeros:()=>ia,zerosLike:()=>_r});var uK=(e,t,n,r=Ot)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(T("a",e,t,n),T("b",e,t,n))];case"AddN":return[r.addN(T("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(T("a",e,t,n),T("b",e,t,n))];case"Mul":return[r.mul(T("a",e,t,n),T("b",e,t,n))];case"RealDiv":case"Div":return[r.div(T("a",e,t,n),T("b",e,t,n))];case"DivNoNan":return[r.divNoNan(T("a",e,t,n),T("b",e,t,n))];case"FloorDiv":return[r.floorDiv(T("a",e,t,n),T("b",e,t,n))];case"Sub":return[r.sub(T("a",e,t,n),T("b",e,t,n))];case"Minimum":return[r.minimum(T("a",e,t,n),T("b",e,t,n))];case"Maximum":return[r.maximum(T("a",e,t,n),T("b",e,t,n))];case"Pow":return[r.pow(T("a",e,t,n),T("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(T("a",e,t,n),T("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var cK=(e,t,n,r=Ot)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(T("x",e,t,n))];case"Acos":return[r.acos(T("x",e,t,n))];case"Acosh":return[r.acosh(T("x",e,t,n))];case"Asin":return[r.asin(T("x",e,t,n))];case"Asinh":return[r.asinh(T("x",e,t,n))];case"Atan":return[r.atan(T("x",e,t,n))];case"Atan2":return[r.atan2(T("x",e,t,n),T("y",e,t,n))];case"Atanh":return[r.atanh(T("x",e,t,n))];case"Ceil":return[r.ceil(T("x",e,t,n))];case"Complex":return[r.complex(T("real",e,t,n),T("imag",e,t,n))];case"Cos":return[r.cos(T("x",e,t,n))];case"Cosh":return[r.cosh(T("x",e,t,n))];case"Elu":return[r.elu(T("x",e,t,n))];case"Erf":return[r.erf(T("x",e,t,n))];case"Exp":return[r.exp(T("x",e,t,n))];case"Expm1":return[r.expm1(T("x",e,t,n))];case"Floor":return[r.floor(T("x",e,t,n))];case"Log":return[r.log(T("x",e,t,n))];case"Log1p":return[r.log1p(T("x",e,t,n))];case"Imag":return[r.imag(T("x",e,t,n))];case"Neg":return[r.neg(T("x",e,t,n))];case"Reciprocal":return[r.reciprocal(T("x",e,t,n))];case"Real":return[r.real(T("x",e,t,n))];case"Relu":return[r.relu(T("x",e,t,n))];case"Round":return[r.round(T("x",e,t,n))];case"Selu":return[r.selu(T("x",e,t,n))];case"Sigmoid":return[r.sigmoid(T("x",e,t,n))];case"Sin":return[r.sin(T("x",e,t,n))];case"Sign":return[r.sign(T("x",e,t,n))];case"Sinh":return[r.sinh(T("x",e,t,n))];case"Softplus":return[r.softplus(T("x",e,t,n))];case"Sqrt":return[r.sqrt(T("x",e,t,n))];case"Square":return[r.square(T("x",e,t,n))];case"Tanh":return[r.tanh(T("x",e,t,n))];case"Tan":return[r.tan(T("x",e,t,n))];case"ClipByValue":return[r.clipByValue(T("x",e,t,n),T("clipValueMin",e,t,n),T("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(T("x",e,t,n))];case"Rsqrt":return[r.rsqrt(sr(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(T("x",e,t,n),T("alpha",e,t,n))];case"Prelu":return[r.prelu(T("x",e,t,n),T("alpha",e,t,n))];case"IsNan":return[r.isNaN(sr(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(sr(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(sr(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function Bi(e,t,n=""){if(!(typeof e=="number"||typeof t=="number")){N.assert(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){let o=e[r],i=t[r];N.assert(o<0||i<0||o===i,()=>n+` Shapes ${e} and ${t} must match`)}}}function lK(e){return!(typeof e=="number"||e.some(t=>t<0))}function Km(e,t,n){let r=GI(e,n),o=!lK(r);if(o&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&t.forEach(i=>{r=GI(i.shape,r)}),!lK(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function GI(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);let n=[];for(let r=0;r<e.length;++r){let o=e[r],i=t[r];if(o>=0&&i>=0&&o!==i)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=o>=0?o:i}return n}var jI=class{constructor(t,n,r,o,i,s,a){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Ge(0),ii(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);let n=this.tensors[t];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(t){return t.map(n=>this.read(n))}write(t,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[t]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Bi(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);r.tensor=n,ii(n),r.written=!0,this.tensors[t]=r}writeMany(t,n){if(t.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${n.length}.`);t.forEach((r,o)=>this.write(r,n[o]))}gather(t,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(t)t=t.slice(0,this.size());else{t=[];for(let o=0;o<this.size();o++)t.push(o)}if(t.length===0)return Fo([],[0].concat(this.elementShape));let r=this.readMany(t);return Bi(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Po(r,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(this.size()===0)return Fo([],[0].concat(this.elementShape));let n=[];for(let o=0;o<this.size();o++)n.push(o);let r=this.readMany(n);return Bi(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),sn(r,0)}scatter(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(t.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${n.shape[0]}`);let r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,Ds(n,0))}split(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0,o=t.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);let i=r===0?0:n.size/r,s=[];ze(()=>{n=Q(n,[1,r,i]);for(let u=0;u<t.length;++u){let d=[0,u===0?0:o[u-1],0],f=[1,t[u],i];s[u]=Q(qe(n,d,f),this.elementShape)}return s});let a=[];for(let u=0;u<t.length;u++)a[u]=u;this.writeMany(a,s)}};var Xm=class e{get id(){return this.idTensor.id}constructor(t,n,r,o=-1){this.tensors=t,this.elementShape=n,this.elementDtype=r,t?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);Bi(n,i.shape,"TensorList shape mismatch: "),ii(i)}),this.idTensor=Ge(0),this.maxNumElements=o,ii(this.idTensor)}copy(){return new e([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Bi(t,this.elementShape,"TensorList shape mismatch: ");let o=Km(this.elementShape,this.tensors,t);return ze(()=>{let i=this.tensors.map(s=>Q(s,o));return Po(i,0)})}popBack(t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=Km(this.elementShape,this.tensors,t),o=this.tensors.pop();return o.kept=!1,Bi(o.shape,t,"TensorList shape mismatch: "),Q(o,r)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(Bi(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");ii(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);let n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(let r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}getItem(t,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);Bi(this.tensors[t].shape,n,"TensorList shape mismatch: ");let o=Km(this.elementShape,this.tensors,n);return Q(this.tensors[t],o)}setItem(t,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);Bi(this.elementShape,n.shape,"TensorList shape mismatch: "),ii(n),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=n}gather(t,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Bi(this.elementShape,r,"TensorList shape mismatch: "),t=t.slice(0,this.size());let o=Km(this.elementShape,this.tensors,r);return t.length===0?Fo([],[0].concat(o)):ze(()=>{let i=t.map(s=>Q(this.tensors[s],o));return Po(i,0)})}concat(t,n){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);Bi(this.elementShape,n,"TensorList shape mismatch: ");let r=Km(this.elementShape,this.tensors,n);return this.size()===0?Fo([],[0].concat(r)):ze(()=>{let o=this.tensors.map(i=>Q(i,r));return sn(o,0)})}};function dK(e,t,n){let r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);let o=e.shape.slice(1);Bi(o,t,"TensorList shape mismatch: ");let i=Ds(e);return new Xm(i,t,r)}function fK(e,t,n,r){return new Xm([],e,t,r)}function pK(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);let o=Math.max(...t);if(r!=null&&r!==-1&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);let i=new Xm([],n,e.dtype,r),s=Ds(e,0);return t.forEach((a,u)=>{i.setItem(a,s[u])}),i}function hK(e,t,n){let r=0,o=t.map(d=>(r+=d,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);let i=e.shape.slice(1),s=GI(i,n),a=r===0?0:e.size/r,u=ze(()=>{let d=[];e=Q(e,[1,r,a]);for(let f=0;f<t.length;++f){let m=[0,f===0?0:o[f-1],0],v=[1,t[f],a];d[f]=Q(qe(e,m,v),s)}return e.dispose(),d}),c=new Xm([],n,e.dtype,t.length);for(let d=0;d<u.length;d++)c.setItem(d,u[d]);return c}var mK=(e,t,n)=>ne(void 0,null,function*(){switch(e.op){case"If":case"StatelessIf":{let r=T("thenBranch",e,t,n),o=T("elseBranch",e,t,n),i=T("cond",e,t,n),s=T("args",e,t,n);return(yield i.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=T("body",e,t,n),o=T("cond",e,t,n),i=T("args",e,t,n),s=yield n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(d=>d.id),u=yield s[0].data();s.forEach(d=>{!d.kept&&a.indexOf(d.id)===-1&&d.dispose()});let c=i;for(;u[0];){let d=c;c=yield n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);let f=c.map(m=>m.id);d.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&f.indexOf(m.id)===-1&&m.dispose()});let h=yield n.functionMap[o].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);u=yield h[0].data(),h.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&f.indexOf(m.id)===-1&&m.dispose()})}return c}case"LoopCond":{let r=T("pred",e,t,n);return[Va(r)]}case"Switch":{let r=T("pred",e,t,n),o=T("data",e,t,n);return o.kept||(o=Va(o)),(yield r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{let r=e.inputNames.find(o=>sr(o,t,n)!==void 0);if(r){let o=sr(r,t,n);return[Va(o)]}return}case"Enter":{let r=T("frameName",e,t,n),o=T("tensor",e,t,n);return n.enterFrame(r),[Va(o)]}case"Exit":{let r=T("tensor",e,t,n);return n.exitFrame(),[Va(r)]}case"NextIteration":{let r=T("tensor",e,t,n);return n.nextIteration(),[Va(r)]}case"TensorArrayV3":{let r=T("size",e,t,n),o=T("dtype",e,t,n),i=T("elementShape",e,t,n),s=T("dynamicSize",e,t,n),a=T("clearAfterRead",e,t,n),u=T("identicalElementShapes",e,t,n),c=T("name",e,t,n),d=new jI(c,o,r,i,u,s,a);return n.addTensorArray(d),[d.idTensor,Ge(1)]}case"TensorArrayWriteV3":{let r=T("tensorArrayId",e,t,n),o=T("index",e,t,n),i=T("tensor",e,t,n),s=n.getTensorArray(r.id);return s.write(o,i),[s.idTensor]}case"TensorArrayReadV3":{let r=T("tensorArrayId",e,t,n),o=T("index",e,t,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{let r=T("tensorArrayId",e,t,n),o=T("indices",e,t,n),i=T("dtype",e,t,n);return[n.getTensorArray(r.id).gather(o,i)]}case"TensorArrayScatterV3":{let r=T("tensorArrayId",e,t,n),o=T("indices",e,t,n),i=T("tensor",e,t,n),s=n.getTensorArray(r.id);return s.scatter(o,i),[s.idTensor]}case"TensorArrayConcatV3":{let r=T("tensorArrayId",e,t,n),o=n.getTensorArray(r.id),i=T("dtype",e,t,n);return[o.concat(i)]}case"TensorArraySplitV3":{let r=T("tensorArrayId",e,t,n),o=T("tensor",e,t,n),i=T("lengths",e,t,n),s=n.getTensorArray(r.id);return s.split(i,o),[s.idTensor]}case"TensorArraySizeV3":{let r=T("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return[Ge(o.size(),"int32")]}case"TensorArrayCloseV3":{let r=T("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{let r=T("tensorListId",e,t,n),o=T("index",e,t,n),i=T("tensor",e,t,n),s=n.getTensorList(r.id);return s.setItem(o,i),[s.idTensor]}case"TensorListGetItem":{let r=T("tensorListId",e,t,n),o=T("index",e,t,n),i=T("elementShape",e,t,n),s=T("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(o,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=T("indices",e,t,n),o=T("tensor",e,t,n),i=T("elementShape",e,t,n),s=T("numElements",e,t,n),a=pK(o,r,i,s);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=T("elementShape",e,t,n),o=T("elementDType",e,t,n),i;e.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=T(i,e,t,n),a=e.op==="TensorListReserve"?-1:s,u=fK(r,o,s,a);return n.addTensorList(u),[u.idTensor]}case"TensorListGather":{let r=T("tensorListId",e,t,n),o=T("indices",e,t,n),i=T("elementShape",e,t,n),s=T("elementDType",e,t,n);return[n.getTensorList(r.id).gather(o,s,i)]}case"TensorListStack":{let r=T("tensorListId",e,t,n),o=T("elementShape",e,t,n),i=T("elementDType",e,t,n),s=T("numElements",e,t,n);return[n.getTensorList(r.id).stack(o,i,s)]}case"TensorListFromTensor":{let r=T("tensor",e,t,n),o=T("elementShape",e,t,n),i=T("elementDType",e,t,n),s=dK(r,o,i);return n.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=T("tensorListId",e,t,n),o=n.getTensorList(r.id),i=T("dtype",e,t,n),s=T("elementShape",e,t,n);return[o.concat(i,s)]}case"TensorListPushBack":{let r=T("tensorListId",e,t,n),o=T("tensor",e,t,n),i=n.getTensorList(r.id);return i.pushBack(o),[i.idTensor]}case"TensorListPopBack":{let r=T("tensorListId",e,t,n),o=T("elementShape",e,t,n),i=T("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(o,i)]}case"TensorListSplit":{let r=T("tensor",e,t,n),o=T("elementShape",e,t,n),i=T("lengths",e,t,n),s=hK(r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=T("tensorListId",e,t,n),o=n.getTensorList(r.id);return[Ge(o.size(),"int32")]}case"TensorListResize":{let r=T("tensorListId",e,t,n),o=T("size",e,t,n),s=n.getTensorList(r.id).resize(o);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}});function gK(e,t,n){let[r,o]=T("fusedOps",e,t,n),i=r==="biasadd",s=!i,a=o==="prelu",u=r==="fusedbatchnorm",c=T("numArgs",e,t,n);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let d=T("strides",e,t,n),f=C0(e,t,n),h=T("dataFormat",e,t,n).toUpperCase(),m=T("dilations",e,t,n),[v,x]=T("args",e,t,n);s&&(x=v,v=void 0);let b=T("leakyreluAlpha",e,t,n);return{stride:d,pad:f,dataFormat:h,dilations:m,biasArg:v,preluArg:x,activationFunc:o,leakyreluAlpha:b}}var yK=(e,t,n,r=Ot)=>{switch(e.op){case"Conv1D":{let o=T("stride",e,t,n),i=T("pad",e,t,n),s=T("dataFormat",e,t,n).toUpperCase(),a=T("dilation",e,t,n);return[r.conv1d(T("x",e,t,n),T("filter",e,t,n),o,i,s,a)]}case"Conv2D":{let o=T("strides",e,t,n),i=C0(e,t,n),s=T("dataFormat",e,t,n).toUpperCase(),a=T("dilations",e,t,n);return[r.conv2d(T("x",e,t,n),T("filter",e,t,n),[o[1],o[2]],i,s,[a[1],a[2]])]}case"_FusedConv2D":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:u,preluArg:c,activationFunc:d,leakyreluAlpha:f}=gK(e,t,n);return[r.fused.conv2d({x:T("x",e,t,n),filter:T("filter",e,t,n),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:u,activation:d,preluActivationWeights:c,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:u,preluArg:c,activationFunc:d,leakyreluAlpha:f}=gK(e,t,n);return[r.fused.depthwiseConv2d({x:T("x",e,t,n),filter:T("filter",e,t,n),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:u,activation:d,preluActivationWeights:c,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let o=T("outputShape",e,t,n),i=T("strides",e,t,n),s=C0(e,t,n);return[r.conv2dTranspose(T("x",e,t,n),T("filter",e,t,n),o,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let o=T("strides",e,t,n),i=C0(e,t,n),s=T("dilations",e,t,n),a=T("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(T("input",e,t,n),T("filter",e,t,n),[o[1],o[2]],i,a,[s[1],s[2]])]}case"Conv3D":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("dataFormat",e,t,n).toUpperCase(),a=T("dilations",e,t,n);return[r.conv3d(T("x",e,t,n),T("filter",e,t,n),[o[1],o[2],o[3]],i,s,[a[1],a[2],a[3]])]}case"AvgPool":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("kernelSize",e,t,n);return[r.avgPool(T("x",e,t,n),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPool":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("kernelSize",e,t,n);return[r.maxPool(T("x",e,t,n),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPoolWithArgmax":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("kernelSize",e,t,n),a=T("includeBatchInIndex",e,t,n),{result:u,indexes:c}=r.maxPoolWithArgmax(T("x",e,t,n),[s[1],s[2]],[o[1],o[2]],i,a);return[u,c]}case"AvgPool3D":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("kernelSize",e,t,n);return[r.avgPool3d(T("x",e,t,n),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"MaxPool3D":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("kernelSize",e,t,n);return[r.maxPool3d(T("x",e,t,n),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"Dilation2D":{let o=T("strides",e,t,n),i=T("pad",e,t,n),s=T("dilations",e,t,n),a=o[1],u=o[2],c=s[1],d=s[2];return[r.dilation2d(T("x",e,t,n),T("filter",e,t,n),[a,u],i,[c,d],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var vK=(e,t,n,r=Ot)=>{switch(e.op){case"Fill":{let o=T("shape",e,t,n),i=T("dtype",e,t,n),s=T("value",e,t,n);return[r.fill(o,s,i)]}case"LinSpace":{let o=T("start",e,t,n),i=T("stop",e,t,n),s=T("num",e,t,n);return[r.linspace(o,i,s)]}case"Multinomial":{let o=T("logits",e,t,n),i=T("numSamples",e,t,n),s=T("seed",e,t,n);return[r.multinomial(o,i,s)]}case"OneHot":{let o=T("indices",e,t,n),i=T("depth",e,t,n),s=T("onValue",e,t,n),a=T("offValue",e,t,n),u=T("dtype",e,t,n);return[r.oneHot(o,i,s,a,u)]}case"Ones":return[r.ones(T("shape",e,t,n),T("dtype",e,t,n))];case"OnesLike":return[r.onesLike(T("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(T("shape",e,t,n),T("dtype",e,t,n),T("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(T("shape",e,t,n),T("minval",e,t,n),T("maxval",e,t,n),T("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(T("shape",e,t,n),T("minval",e,t,n),T("maxval",e,t,n),T("seed",e,t,n))];case"Range":{let o=T("start",e,t,n),i=T("stop",e,t,n),s=T("step",e,t,n);return[r.range(o,i,s,T("dtype",e,t,n))]}case"TruncatedNormal":{let o=T("shape",e,t,n),i=T("mean",e,t,n),s=T("stdDev",e,t,n),a=T("seed",e,t,n);return[r.truncatedNormal(o,i,s,T("dtype",e,t,n),a)]}case"Zeros":return[r.zeros(T("shape",e,t,n),T("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(T("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function C3(e,t,n){let r=T("boxes",e,t,n),o=T("scores",e,t,n),i=T("maxOutputSize",e,t,n),s=T("iouThreshold",e,t,n),a=T("scoreThreshold",e,t,n),u=T("softNmsSigma",e,t,n);return{boxes:r,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a,softNmsSigma:u}}var xK=(i,s,a,u,...c)=>ne(void 0,[i,s,a,u,...c],function*(e,t,n,r,o=Ot){switch(e.op){case"NonMaxSuppressionV5":{let{boxes:d,scores:f,maxOutputSize:h,iouThreshold:m,scoreThreshold:v,softNmsSigma:x}=C3(e,t,n),b=yield o.image.nonMaxSuppressionWithScoreAsync(d,f,h,m,v,x);return[b.selectedIndices,b.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:d,scores:f,maxOutputSize:h,iouThreshold:m,scoreThreshold:v}=C3(e,t,n),x=T("padToMaxOutputSize",e,t,n),b=yield o.image.nonMaxSuppressionPaddedAsync(d,f,h,m,v,x);return[b.selectedIndices,b.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:d,scores:f,maxOutputSize:h,iouThreshold:m,scoreThreshold:v}=C3(e,t,n);return[yield o.image.nonMaxSuppressionAsync(d,f,h,m,v)]}case"Where":{let d=o.cast(T("condition",e,t,n),"bool"),f=[yield o.whereAsync(d)];return d.dispose(),f}case"ListDiff":return o.setdiff1dAsync(T("x",e,t,n),T("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}});var bK=(e,t,n,r=Ot)=>{switch(e.op){case"LowerBound":{let o=T("sortedSequence",e,t,n),i=T("values",e,t,n);return[r.lowerBound(o,i)]}case"TopKV2":{let o=T("x",e,t,n),i=T("k",e,t,n),s=T("sorted",e,t,n),a=r.topk(o,i,s);return[a.values,a.indices]}case"UpperBound":{let o=T("sortedSequence",e,t,n),i=T("values",e,t,n);return[r.upperBound(o,i)]}case"Unique":{let o=T("x",e,t,n),i=r.unique(o);return[i.values,i.indices]}case"UniqueV2":{let o=T("x",e,t,n),i=T("axis",e,t,n),s=r.unique(o,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var wK=(e,t,n,r=Ot)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let o=T("default",e,t,n);return[sr(e.name,t,n)||o];case"Placeholder":return[sr(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let d=T("x",e,t,n);return[Va(d)]}case"IdentityN":return T("x",e,t,n).map(d=>Va(d));case"Snapshot":let i=T("x",e,t,n);return[Va(i)];case"Shape":return[r.tensor1d(T("x",e,t,n).shape,"int32")];case"ShapeN":return T("x",e,t,n).map(d=>r.tensor1d(d.shape));case"Size":return[r.scalar(T("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(T("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=T("x",e,t,n),a=T("data",e,t,n),u=T("message",e,t,n),c=T("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let d=0;d<a.length;d++)console.log(Array.prototype.slice.call(a[d].dataSync()).slice(0,c));return[s];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var zI=class{get id(){return this.handle.id}constructor(t,n){this.keyDType=t,this.valueDType=n,this.handle=Ge(0),this.tensorMap=new Map,ii(this.handle)}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ge(this.size(),"int32")}import(t,n){return ne(this,null,function*(){this.checkKeyAndValueTensor(t,n);let r=yield t.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),ze(()=>{let o=Ds(n),i=r.length,s=o.length;N.assert(i===s,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${s} elements.`);for(let a=0;a<i;a++){let u=r[a],c=o[a];ii(c),this.tensorMap.set(u,c)}return this.handle})})}find(t,n){return ne(this,null,function*(){this.checkKeyAndValueTensor(t,n);let r=yield t.data();return ze(()=>{let o=[];for(let i=0;i<r.length;i++){let s=r[i],a=this.findWithDefault(s,n);o.push(a)}return Po(o)})})}findWithDefault(t,n){let r=this.tensorMap.get(t);return r??n}checkKeyAndValueTensor(t,n){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}};var EK=(e,t,n,r)=>ne(void 0,null,function*(){switch(e.op){case"HashTable":case"HashTableV2":{let o=r.getHashTableHandleByName(e.name);if(o!=null)return[o];{let i=T("keyDType",e,t,n),s=T("valueDType",e,t,n),a=new zI(i,s);return r.addHashTable(e.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let o=T("tableHandle",e,t,n,r),i=T("keys",e,t,n),s=T("values",e,t,n);return[yield r.getHashTableById(o.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let o=T("tableHandle",e,t,n,r),i=T("keys",e,t,n),s=T("defaultValue",e,t,n);return[yield r.getHashTableById(o.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let o=T("tableHandle",e,t,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}});var CK=(e,t,n,r=Ot)=>{switch(e.op){case"ResizeBilinear":{let o=T("images",e,t,n),i=T("size",e,t,n),s=T("alignCorners",e,t,n),a=T("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(o,[i[0],i[1]],s,a)]}case"ResizeNearestNeighbor":{let o=T("images",e,t,n),i=T("size",e,t,n),s=T("alignCorners",e,t,n),a=T("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(o,[i[0],i[1]],s,a)]}case"CropAndResize":{let o=T("image",e,t,n),i=T("boxes",e,t,n),s=T("boxInd",e,t,n),a=T("cropSize",e,t,n),u=T("method",e,t,n),c=T("extrapolationValue",e,t,n);return[r.image.cropAndResize(o,i,s,a,u,c)]}case"ImageProjectiveTransformV3":{let o=T("images",e,t,n),i=T("transforms",e,t,n),s=T("outputShape",e,t,n),a=T("fillValue",e,t,n),u=T("interpolation",e,t,n),c=T("fillMode",e,t,n);return[r.image.transform(o,i,u.toLowerCase(),c.toLowerCase(),a,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var TK=(e,t,n,r=Ot)=>{switch(e.op){case"Equal":return[r.equal(T("a",e,t,n),T("b",e,t,n))];case"NotEqual":return[r.notEqual(T("a",e,t,n),T("b",e,t,n))];case"Greater":return[r.greater(T("a",e,t,n),T("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(T("a",e,t,n),T("b",e,t,n))];case"Less":return[r.less(T("a",e,t,n),T("b",e,t,n))];case"LessEqual":return[r.lessEqual(T("a",e,t,n),T("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(T("a",e,t,n),T("b",e,t,n))];case"LogicalNot":return[r.logicalNot(T("a",e,t,n))];case"LogicalOr":return[r.logicalOr(T("a",e,t,n),T("b",e,t,n))];case"Select":case"SelectV2":return[r.where(T("condition",e,t,n),T("a",e,t,n),T("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(T("a",e,t,n),T("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var _K=(e,t,n,r=Ot)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(T("a",e,t,n),T("b",e,t,n),T("transposeA",e,t,n),T("transposeB",e,t,n))];case"Einsum":return[r.einsum(T("equation",e,t,n),...T("tensors",e,t,n))];case"Transpose":return[r.transpose(T("x",e,t,n),T("perm",e,t,n))];case"_FusedMatMul":let[o,i]=T("fusedOps",e,t,n),s=o==="biasadd",a=i==="prelu",u=T("numArgs",e,t,n),c=T("leakyreluAlpha",e,t,n);if(s){if(a&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[d,f]=T("args",e,t,n);return[r.fused.matMul({a:T("a",e,t,n),b:T("b",e,t,n),transposeA:T("transposeA",e,t,n),transposeB:T("transposeB",e,t,n),bias:d,activation:i,preluActivationWeights:f,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(T("a",e,t,n),T("numLower",e,t,n),T("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var IK=(e,t,n,r=Ot)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(T("x",e,t,n),T("axis",e,t,n),T("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(T("x",e,t,n),T("mean",e,t,n),T("variance",e,t,n),T("offset",e,t,n),T("scale",e,t,n),T("epsilon",e,t,n))];case"FusedBatchNormV3":return[r.batchNorm(T("x",e,t,n),T("mean",e,t,n),T("variance",e,t,n),T("offset",e,t,n),T("scale",e,t,n),T("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(T("x",e,t,n),T("radius",e,t,n),T("bias",e,t,n),T("alpha",e,t,n),T("beta",e,t,n))];case"Softmax":return[r.softmax(T("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(T("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var SK=(e,t,n,r=Ot)=>{switch(e.op){case"RaggedGather":{let{outputNestedSplits:o,outputDenseValues:i}=r.raggedGather(T("paramsNestedSplits",e,t,n),T("paramsDenseValues",e,t,n),T("indices",e,t,n),T("outputRaggedRank",e,t,n));return o.concat(i)}case"RaggedRange":{let{rtNestedSplits:o,rtDenseValues:i}=r.raggedRange(T("starts",e,t,n),T("limits",e,t,n),T("splits",e,t,n));return[o,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(T("shape",e,t,n),T("values",e,t,n),T("defaultValue",e,t,n),T("rowPartitionTensors",e,t,n),T("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var DK=(e,t,n,r=Ot)=>{switch(e.op){case"Max":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.max(T("x",e,t,n),a,u)]}case"Mean":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.mean(T("x",e,t,n),a,u)]}case"Min":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.min(T("x",e,t,n),a,u)]}case"Sum":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.sum(T("x",e,t,n),a,u)]}case"All":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.all(T("x",e,t,n),a,u)]}case"Any":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.any(T("x",e,t,n),a,u)]}case"ArgMax":{let a=T("axis",e,t,n);return[r.argMax(T("x",e,t,n),a)]}case"ArgMin":{let a=T("axis",e,t,n);return[r.argMin(T("x",e,t,n),a)]}case"Prod":{let a=T("axis",e,t,n),u=T("keepDims",e,t,n);return[r.prod(T("x",e,t,n),a,u)]}case"Cumprod":{let a=T("axis",e,t,n),u=T("exclusive",e,t,n),c=T("reverse",e,t,n);return[r.cumprod(T("x",e,t,n),a,u,c)]}case"Cumsum":{let a=T("axis",e,t,n),u=T("exclusive",e,t,n),c=T("reverse",e,t,n);return[r.cumsum(T("x",e,t,n),a,u,c)]}case"Bincount":let o=T("x",e,t,n),i=T("weights",e,t,n),s=T("size",e,t,n);return[r.bincount(o,i,s)];case"DenseBincount":{let a=T("x",e,t,n),u=T("weights",e,t,n),c=T("size",e,t,n),d=T("binaryOutput",e,t,n);return[r.denseBincount(a,u,c,d)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var NK=(e,t,n,r=Ot)=>{switch(e.op){case"ConcatV2":case"Concat":{let o=T("n",e,t,n),i=T("axis",e,t,n),s=T("tensors",e,t,n);return s=s.slice(0,o),[r.concat(s,i)]}case"Gather":{let o=T("x",e,t,n),i=T("indices",e,t,n);return[r.gather(o,r.cast(i,"int32"),0)]}case"GatherV2":{let o=T("axis",e,t,n),i=T("batchDims",e,t,n),s=T("x",e,t,n),a=T("indices",e,t,n);return[r.gather(s,r.cast(a,"int32"),o,i)]}case"Reverse":{let o=T("dims",e,t,n),i=[];for(let a=0;a<o.length;a++)o[a]&&i.push(a);let s=T("x",e,t,n);return[r.reverse(s,i)]}case"ReverseV2":{let o=T("axis",e,t,n),i=T("x",e,t,n);return[r.reverse(i,o)]}case"Slice":{let o=T("begin",e,t,n),i=T("size",e,t,n);return[r.slice(T("x",e,t,n),o,i)]}case"StridedSlice":{let o=T("begin",e,t,n),i=T("end",e,t,n),s=T("strides",e,t,n),a=T("beginMask",e,t,n),u=T("endMask",e,t,n),c=T("ellipsisMask",e,t,n),d=T("newAxisMask",e,t,n),f=T("shrinkAxisMask",e,t,n),h=T("x",e,t,n);return[r.stridedSlice(h,o,i,s,a,u,c,d,f)]}case"Pack":return ze(()=>{let o=T("axis",e,t,n),i=T("tensors",e,t,n),s=i[0].shape,a=r.squeeze(i[0]).shape,u=i.map(c=>{let d=N.arraysEqual(c.shape,s);if(!d&&!N.arraysEqual(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return d?c:r.reshape(c,s)});return[r.stack(u,o)]});case"Unpack":{let o=T("axis",e,t,n),i=T("tensor",e,t,n);return r.unstack(i,o)}case"Tile":{let o=T("reps",e,t,n);return[r.tile(T("x",e,t,n),o)]}case"Split":case"SplitV":{let o=T("axis",e,t,n),i=T("numOrSizeSplits",e,t,n),s=T("x",e,t,n);return r.split(s,i,o)}case"ScatterNd":{let o=T("indices",e,t,n),i=T("values",e,t,n),s=T("shape",e,t,n);return[r.scatterND(o,i,s)]}case"GatherNd":{let o=T("x",e,t,n),i=T("indices",e,t,n);return[r.gatherND(o,i)]}case"SparseToDense":{let o=T("sparseIndices",e,t,n),i=T("outputShape",e,t,n),s=T("sparseValues",e,t,n),a=T("defaultValue",e,t,n);return[r.sparseToDense(o,s,i,s.dtype===a.dtype?a:r.cast(a,s.dtype))]}case"TensorScatterUpdate":{let o=T("indices",e,t,n),i=T("values",e,t,n),s=T("tensor",e,t,n);return[r.tensorScatterUpdate(s,o,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var AK=(e,t,n,r=Ot)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:o,outputValues:i,emptyRowIndicator:s,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(T("indices",e,t,n),T("values",e,t,n),T("denseShape",e,t,n),T("defaultValue",e,t,n));return[o,i,s,a]}case"SparseReshape":{let{outputIndices:o,outputShape:i}=r.sparse.sparseReshape(T("inputIndices",e,t,n),T("inputShape",e,t,n),T("newShape",e,t,n));return[o,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(T("data",e,t,n),T("indices",e,t,n),T("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(T("data",e,t,n),T("indices",e,t,n),T("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var RK=(e,t,n,r=Ot)=>{switch(e.op){case"FFT":return[r.fft(T("x",e,t,n))];case"IFFT":return[r.ifft(T("x",e,t,n))];case"RFFT":return[r.rfft(T("x",e,t,n))];case"IRFFT":return[r.irfft(T("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var kK=(e,t,n,r=Ot)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(T("input",e,t,n),T("pattern",e,t,n),T("rewrite",e,t,n),T("replaceGlobal",e,t,n))];case"StringNGrams":{let{nGrams:o,nGramsSplits:i}=r.string.stringNGrams(T("data",e,t,n),T("dataSplits",e,t,n),T("separator",e,t,n),T("nGramWidths",e,t,n),T("leftPad",e,t,n),T("rightPad",e,t,n),T("padWidth",e,t,n),T("preserveShortSequences",e,t,n));return[o,i]}case"StringSplit":{let{indices:o,values:i,shape:s}=r.string.stringSplit(T("input",e,t,n),T("delimiter",e,t,n),T("skipEmpty",e,t,n));return[o,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(T("input",e,t,n),T("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var OK=(e,t,n,r=Ot)=>{switch(e.op){case"Cast":return[r.cast(T("x",e,t,n),T("dtype",e,t,n))];case"ExpandDims":{let o=T("axis",e,t,n);return[r.expandDims(T("x",e,t,n),o)]}case"Squeeze":{let o=T("axis",e,t,n);return[r.squeeze(T("x",e,t,n),o)]}case"Reshape":return[r.reshape(T("x",e,t,n),T("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(T("x",e,t,n),T("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(T("x",e,t,n),T("padding",e,t,n),T("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(T("x",e,t,n),T("padding",e,t,n),T("constantValue",e,t,n))];case"SpaceToBatchND":{let o=T("blockShape",e,t,n),i=T("paddings",e,t,n);return[r.spaceToBatchND(T("x",e,t,n),o,i)]}case"BatchToSpaceND":{let o=T("blockShape",e,t,n),i=T("crops",e,t,n);return[r.batchToSpaceND(T("x",e,t,n),o,i)]}case"DepthToSpace":{let o=T("blockSize",e,t,n),i=T("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(T("x",e,t,n),o,i)]}case"BroadcastTo":return[r.broadcastTo(T("x",e,t,n),T("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(T("s0",e,t,n),T("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function T3(e,t,n,r,o=ze){let i=((s,a,u)=>{switch(s.category){case"arithmetic":return o(()=>uK(s,a,u));case"basic_math":return o(()=>cK(s,a,u));case"control":return mK(s,a,u);case"convolution":return o(()=>yK(s,a,u));case"creation":return o(()=>vK(s,a,u));case"dynamic":return xK(s,a,u);case"evaluation":return o(()=>bK(s,a,u));case"image":return o(()=>CK(s,a,u));case"graph":return o(()=>wK(s,a,u));case"logical":return o(()=>TK(s,a,u));case"matrices":return o(()=>_K(s,a,u));case"normalization":return o(()=>IK(s,a,u));case"ragged":return o(()=>SK(s,a,u));case"reduction":return o(()=>DK(s,a,u));case"slice_join":return o(()=>NK(s,a,u));case"sparse":return o(()=>AK(s,a,u));case"spectral":return o(()=>RK(s,a,u));case"string":return o(()=>kK(s,a,u));case"transformation":return o(()=>OK(s,a,u));case"hash_table":return EK(s,a,u,r);case"custom":let c=NI(s.op);if(c&&c.customExecutor)return c.customExecutor(new UI(s,a,u));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return N.isPromise(i)?i.then(s=>[].concat(s)):[].concat(i)}var _0=class{constructor(t={},n={},r={},o={},i){this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=o,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,n){return{id:t,frameName:n,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let t=[];for(let n=0;n<this.contexts.length-1;n++){let r=this.contexts.slice(0,this.contexts.length-n);t.push(this.contextIdforContexts(r))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(let n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(t);for(let n in this.tensorListMap)this.tensorListMap[n].clearAndClose(t)}};function _3(e,t,n,r){let o=new Set,i=[],s=null,a=null,u=new Set,c=new Set(Object.keys(e).map(h=>$o(h)[0]));r=r||[];let d=new Set(r.map(h=>$o(h.name)[0])),f=[...t];for(;f.length>0;){let h=f.pop();if((rd(h)||BSe(h)||USe(h))&&s==null&&(s=h,a=s.children.map(m=>m.name).filter(m=>o.has(m))),o.add(h.name),n[h.name]==null&&!c.has(h.name)&&!d.has(h.name)){if(h.inputs.length===0){i.push(h.name);continue}h.inputs.forEach(m=>{u.has(m.name)||(u.add(m.name),f.push(m))})}}return{inputs:e,outputs:t,usedNodes:o,missingInputs:i,dynamicNode:s,syncInputs:a}}function MK(e,t){let{usedNodes:n,inputs:r}=t,o=Object.keys(r).map(b=>$o(b)[0]).map(b=>e.nodes[b]),i=e.initNodes||[],s=b=>n.has(typeof b=="string"?b:b.name);function a(b){return[...new Map(b.map(C=>[C.name,C])).values()]}let u=a([...o,...e.weights,...i]).filter(s),c=a([...u,...Object.values(e.nodes)]).filter(s),d=new Map(c.map(b=>[b.name,b])),f={};for(let b of c){f[b.name]=f[b.name]||0;for(let C of b.children)s(C)||(f[C.name]=Number.POSITIVE_INFINITY),f[C.name]=(f[C.name]||0)+1}let h=Object.entries(f).filter(([,b])=>b===0).map(([b])=>b),m=[...h];for(;h.length>0;){let b=h.pop(),C=d.get(b);for(let S of C.children.filter(s))--f[S.name]===0&&(m.push(S.name),h.push(S.name))}let v=m.map(b=>d.get(b)),x=FSe(v,u);return PSe(x,u),x}function FSe(e,t){let n=new Map(e.map(s=>[s.name,s])),r=t.map(s=>s.name),o=new Set(r);for(;r.length>0;){let s=r.pop(),a=n.get(s);for(let u of a.children)!n.has(u.name)||o.has(u.name)||(o.add(u.name),r.push(u.name))}return e.filter(s=>o.has(s.name))}var Ym=class extends Error{constructor(t){super(`NodesExecutionOrderError: ${t}`)}};function PSe(e,t){let n=new Map(e.map((a,u)=>[a.name,u])),r=new Set(t.map(a=>a.name)),o=a=>r.has(typeof a=="string"?a:a.name),i=new Set(e.map(a=>a.name)),s=a=>i.has(typeof a=="string"?a:a.name);for(let a of e){for(let u of a.children.filter(s)){if(!n.has(u.name))throw new Ym(`Child ${u.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(u.name))throw new Ym(`Node ${a.name} is scheduled to run after its child ${u.name}.`)}if(!o(a))for(let u of a.inputs){if(!n.has(u.name))throw new Ym(`Input ${u.name} of node ${a.name} is unreachable.`);if(n.get(u.name)>n.get(a.name))throw new Ym(`Node ${a.name} is scheduled to run before its input ${u.name}.`)}}}function FK(e){let t=new Map(e.map((a,u)=>[a.name,u])),n=Number.MAX_SAFE_INTEGER,r=e.map((a,u)=>rd(a)?n:u),o=a=>{let u=r[t.get(a.name)];return u??-1},i=e.map((a,u)=>a.children.map(o).reduce((c,d)=>Math.max(c,d),r[u])),s=new Map;for(let a=0;a<e.length;++a){let u=i[a];if(u===n)continue;let c=e[a],d=e[u];s.has(d.name)||s.set(d.name,[]),s.get(d.name).push(c)}return s}var $Se=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),LSe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),VSe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function rd(e){return $Se.has(e.op)}function BSe(e){return LSe.has(e.op)}function USe(e){return VSe.has(e.op)}var I0=class e{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){let n=Object.keys(t).map(r=>t[r].map(o=>o.id));this._weightIds=[].concat(...n),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{let n=t.signatureKey||t.name;return t.defaultOutput?`${n}:${t.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((t,n)=>(t[n]=this._functions[n].signature,t),{})}constructor(t,n){this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(r=>{this._functionExecutorMap[r]=new e(t.functions[r],this)})}getCompilationKey(t,n){let r=t.map(i=>i.name).sort(),o=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(t,n){let r=_3(t,n,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:i,syncInputs:s}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(o.length>0){let c=n.map(f=>f.name),d=Object.keys(t);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${d}]. Missing the following inputs: [${o}]`)}let a=MK(this.graph,r),u=FK(a);return{orderedNodes:a,nodeLiveUntilMap:u}}cloneAndKeepTensor(t){if(t==null)return null;let n=t.clone();return ii(n),n}cloneTensorList(t){return t?t.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(t,n){this.disposeIntermediateTensors(),t=this.mapInputs(t);let r=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n);let o=r.map(h=>this.graph.nodes[$o(h)[0]]),i=n.map(h=>$o(h)[0]),s=new Set(i),a=i.map(h=>this.graph.nodes[h]);a.length===0&&(a=this._outputs);let u=this.getCompilationKey(o,a),c=this.compiledMap.get(u);c==null&&(c=this.compile(t,a),this.compiledMap.set(u,c));try{this.keepIntermediateTensors=z().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}let d={},f={};return ze(()=>{let h=new _0(this.weightMap,d,f,this.functionExecutorMap,this.parseNodeNameCache),m=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(C=>{let[S,O]=$o(C,h),F=[];F[O]=t[C],m[S]=F,this.keepIntermediateTensors&&(this.clonedTensorsMap[S]=this.cloneTensorList(F))});let v=this.getFrozenTensorIds(m),{orderedNodes:x,nodeLiveUntilMap:b}=c;for(let C of x){if(m[C.name])continue;let S=T3(C,m,h,this._resourceManager);if(N.isPromise(S))throw new Error(`The execution of the op '${C.op}' returned a promise. Please use model.executeAsync() instead.`);m[C.name]=S,this.keepIntermediateTensors&&(this.clonedTensorsMap[C.name]=this.cloneTensorList(S)),this.checkTensorForDisposalWithNodeLiveUntilInfo(C,m,h,v,s,b.get(C.name))}return this.parent==null&&h.dispose(v),n.map(C=>sr(C,m,h))})}getFrozenTensorIds(t){let n=[].concat.apply([],Object.keys(t).map(r=>t[r]).map(r=>r.map(o=>o.id)));return new Set(n)}checkTensorForDisposal(t,n,r,o,i,s,a){if(!(rd(n)||s.has(t))){for(let u of r[t])u!=null&&(a[u.id]=(a[u.id]||0)+n.children.length);for(let u of n.inputs){if(rd(u))continue;let c=n3(u.name,r,o);if(c!=null)for(let d of c){if(!d||d.kept||i.has(d.id))continue;let f=a[d.id];f===1?(d.dispose(),delete a[d.id]):f!=null&&a[d.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,n,r,o,i,s){function a(u){return rd(u)||i.has(u.name)}if(!(rd(t)||s==null))for(let u of s){if(a(u))continue;let c=n3(u.name,n,r);for(let d of c)!d||d.kept||o.has(d.id)||d.dispose()}}executeAsync(t,n){return ne(this,null,function*(){return this._executeAsync(t,n)})}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(let n of t)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(s,a){return ne(this,arguments,function*(t,n,r=!1,o={},i={}){this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=z().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(v){this.keepIntermediateTensors=!1,console.warn(v.message)}let u=new _0(this.weightMap,o,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let c=yield this.executeWithControlFlow(t,u,n,r),d=n.map(v=>sr(v,c,u)),f=d.map(v=>v.id),h=Object.keys(t).map(v=>t[v].id),m=new Set([...f,...h,...this.weightIds]);return Object.values(c).forEach(v=>{v.forEach(x=>{x&&!x.isDisposed&&!m.has(x.id)&&x.dispose()})}),this.parent==null&&u.dispose(m),d})}executeFunctionAsync(t,n,r){return ne(this,null,function*(){let o=t.reduce((i,s,a)=>(i[this.inputs[a].name]=s,i),{});return this._executeAsync(o,this.outputNodes,!0,n,r)})}executeWithControlFlow(t,n,r,o){return ne(this,null,function*(){let i=Object.keys(t),s=i.map(F=>this.graph.nodes[$o(F)[0]]),a=r.map(F=>$o(F)[0]),u=new Set(a),c=a.map(F=>this.graph.nodes[F]);c.length===0&&(c=this._outputs);let{usedNodes:d,missingInputs:f,dynamicNode:h,syncInputs:m}=_3(t,c,this.weightMap,this._initNodes),v=[...s,...this.graph.weights,...this._initNodes||[]].map(F=>({node:F,contexts:n.currentContext})),x=Object.assign({},this.weightMap);Object.keys(t).forEach(F=>{let[B,H]=$o(F),X=[];X[H]=t[F],x[B]=X});let b={},C=this.getFrozenTensorIds(x),S={};for(;v.length>0;){let F=this.processStack(s,v,n,x,S,C,u,b,d);yield Promise.all(F)}h==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let O=c.filter(F=>!rd(F)&&!sr(F.name,x,n)).map(F=>F.name);if(O.length>0){let F="";throw h!=null&&(F=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${m}]`),new Error(`Cannot compute the outputs [${O}] from the provided inputs [${i}]. Consider providing the following inputs: [${f}]. ${F}`)}return x})}processStack(t,n,r,o,i,s,a,u,c){let d=[];for(;n.length>0;){let f=n.pop();r.currentContext=f.contexts;let h="";if(f.node.op==="Enter"&&T("isConstant",f.node,o,r)&&([h]=La(f.node.name,r)),o[f.node.name]==null){let m=T3(f.node,o,r,this._resourceManager);h||([h]=La(f.node.name,r));let v=r.currentContext;N.isPromise(m)?d.push(m.then(x=>(o[h]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(x)),r.currentContext=v,this.checkTensorForDisposal(h,f.node,o,r,s,a,u),this.processChildNodes(f.node,n,r,o,i,c),x))):(o[h]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(m)),this.checkTensorForDisposal(h,f.node,o,r,s,a,u),this.processChildNodes(f.node,n,r,o,i,c))}else this.processChildNodes(f.node,n,r,o,i,c)}return d}processChildNodes(t,n,r,o,i,s){t.children.forEach(a=>{let[u]=La(a.name,r);i[u]||!s.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!sr(c,o,r))&&(i[u]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!sr(c,o,r))&&(i[u]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(n=>n.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(n=>{let r=t[n],[o]=$o(n),i=this.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){let s=i.attrParams.shape.value,a=s.length===r.shape.length&&r.shape.every((u,c)=>s[c]===-1||s[c]===u);N.assert(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&N.assert(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(t){var n,r;let o={};for(let i in t){let s=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];s!=null?o[s.name]=t[i]:o[i]=t[i]}return o}checkInputs(t){let n=Object.keys(t).filter(r=>{let[o]=$o(r);return this.graph.nodes[o]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(t){return t.map(n=>{var r,o;let i=(o=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||o===void 0?void 0:o[n];return i!=null?i.name:n},{})}checkOutputs(t){t.forEach(n=>{let[r]=$o(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}};var HI=class{constructor(t={},n={}){this.hashTableNameToHandle=t,this.hashTableMap=n}addHashTable(t,n){this.hashTableNameToHandle[t]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(let t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(let t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}};var GSe="?tfjs-format=file",jSe="model.json",WI=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,n={},r=w0){this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new HI}findIOHandler(){let t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{let n=this.io.getLoadHandlers(t,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[t]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let t=this.handler.load();return N.isPromise(t)?t.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(t)}loadSync(t){let n=this.io.decodeWeights(t.weightData,t.weightSpecs);return this.loadWithWeightMap(t,n)}loadStreaming(t){return ne(this,null,function*(){if(t.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let n=yield E_(t.getWeightStream(),t.weightSpecs);return this.loadWithWeightMap(t,n)})}loadWithWeightMap(t,n){this.artifacts=t;let r=this.artifacts.modelTopology,o=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let i=this.artifacts.userDefinedMetadata;i.signature!=null&&(o=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=o,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new I0(T0.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){let i=T0.Instance.transformGraph(t.modelInitializer);this.initializer=new I0(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}save(t,n){return ne(this,null,function*(){if(typeof t=="string"){let r=this.io.getSaveHandlers(t);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${t}'`);t=r[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)})}addStructuredOutputNames(t){if(this.structuredOutputKeys){let n=t instanceof Jt?[t]:t,r={};return n.forEach((o,i)=>r[this.structuredOutputKeys[i]]=o),r}return t}predict(t,n){let r=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(r)}predictAsync(t,n){return ne(this,null,function*(){let r=yield this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(r)})}normalizeInputs(t){var n;if(!(t instanceof Jt)&&!Array.isArray(t)){let i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(let s in i){let a=i[s];a.resourceId!=null&&(t[s]=this.resourceIdToCapturedInput[a.resourceId])}return t}t=Array.isArray(t)?t:[t];let r=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${t.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((i,s)=>{var a,u,c;let d=(c=(u=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||u===void 0?void 0:u[s])===null||c===void 0?void 0:c.resourceId;return d!=null?i[s]=this.resourceIdToCapturedInput[d]:i[s]=t[o++],i},{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){return ne(this,null,function*(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))})}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){let n=this.initializerSignature.outputs,r=Object.keys(n);for(let o=0;o<r.length;o++){let i=r[o],s=n[i];this.resourceIdToCapturedInput[s.resourceId]=t[o]}}}execute(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);let r=this.executor.execute(t,n);return r.length>1?r:r[0]}executeAsync(t,n){return ne(this,null,function*(){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(yield this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);let r=yield this.executor.executeAsync(t,n);return r.length>1?r:r[0]})}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((n,r)=>(n[r]=[t[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Wt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};function qI(r){return ne(this,arguments,function*(e,t={},n=w0){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=zSe(e));let o=new WI(e,t,n);return yield o.load(),o})}function zSe(e){return e.endsWith("/")||(e=e+"/"),`${e}${jSe}${GSe}`}var Lo=function(){return Lo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Lo.apply(this,arguments)};function Ba(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(c){try{u(r.next(c))}catch(d){i(d)}}function a(c){try{u(r.throw(c))}catch(d){i(d)}}function u(c){var d;c.done?o(c.value):(d=c.value,d instanceof n?d:new n(function(f){f(d)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function Ua(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(u){return function(c){return function(d){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&d[0]?r.return:d[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,d[1])).done)return o;switch(r=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,r=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!((o=o.length>0&&o[o.length-1])||d[0]!==6&&d[0]!==2)){s=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){s.label=d[1];break}if(d[0]===6&&s.label<o[1]){s.label=o[1],o=d;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(d);break}o[2]&&s.ops.pop(),s.trys.pop();continue}d=t.call(e,s)}catch(f){d=[6,f],r=0}finally{n=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([u,c])}}}var KI=["wrist","thumb_cmc","thumb_mcp","thumb_ip","thumb_tip","index_finger_mcp","index_finger_pip","index_finger_dip","index_finger_tip","middle_finger_mcp","middle_finger_pip","middle_finger_dip","middle_finger_tip","ring_finger_mcp","ring_finger_pip","ring_finger_dip","ring_finger_tip","pinky_finger_mcp","pinky_finger_pip","pinky_finger_dip","pinky_finger_tip"],I3={runtime:"mediapipe",maxHands:2,modelType:"full"},HSe=function(){function e(t){var n,r=this;this.width=0,this.height=0,this.selfieMode=!1,this.handsSolution=new jK.Hands({locateFile:function(o,i){return t.solutionPath?t.solutionPath.replace(/\/+$/,"")+"/"+o:i+"/"+o}}),t.modelType==="lite"?n=0:n=1,this.handsSolution.setOptions({modelComplexity:n,selfieMode:this.selfieMode,maxNumHands:t.maxHands}),this.handsSolution.onResults(function(o){if(r.height=o.image.height,r.width=o.image.width,r.hands=[],o.multiHandLandmarks!==null)for(var i=o.multiHandedness,s=o.multiHandLandmarks,a=o.multiHandWorldLandmarks,u=0;u<i.length;u++)r.hands.push(Lo(Lo({},r.translateOutput(s[u],a[u])),{score:i[u].score,handedness:i[u].label}))})}return e.prototype.translateOutput=function(t,n){var r=this;return{keypoints:t.map(function(o,i){return{x:o.x*r.width,y:o.y*r.height,score:o.visibility,name:KI[i]}}),keypoints3D:n.map(function(o,i){return{x:o.x,y:o.y,z:o.z,score:o.visibility,name:KI[i]}})}},e.prototype.estimateHands=function(t,n){return Ba(this,void 0,void 0,function(){var r,o;return Ua(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.handsSolution.setOptions({selfieMode:this.selfieMode})),t instanceof Jt?(o=ImageData.bind,[4,E0.toPixels(t)]):[3,2];case 1:return r=new(o.apply(ImageData,[void 0,i.sent(),t.shape[1],t.shape[0]])),[3,3];case 2:r=t,i.label=3;case 3:return t=r,[4,this.handsSolution.send({image:t})];case 4:return i.sent(),[2,this.hands]}})})},e.prototype.dispose=function(){this.handsSolution.close()},e.prototype.reset=function(){this.handsSolution.reset(),this.width=0,this.height=0,this.hands=null,this.selfieMode=!1},e.prototype.initialize=function(){return this.handsSolution.initialize()},e}();function WSe(e){return Ba(this,void 0,void 0,function(){var t,n;return Ua(this,function(r){switch(r.label){case 0:return t=function(o){if(o==null)return Lo({},I3);var i=Lo({},o);return i.runtime="mediapipe",i.maxHands==null&&(i.maxHands=I3.maxHands),i.modelType==null&&(i.modelType=I3.modelType),i}(e),[4,(n=new HSe(t)).initialize()];case 1:return r.sent(),[2,n]}})})}function S3(e){return e.width*e.height}function PK(e){var t=e.xCenter-e.width/2,n=t+e.width,r=e.yCenter-e.height/2;return{xMin:t,xMax:n,yMin:r,yMax:r+e.height,width:e.width,height:e.height}}function qSe(e,t){var n=PK(e),r=PK(t);if(!function(s,a){return!(s.xMax<a.xMin||a.xMax<s.xMin||s.yMax<a.yMin||a.yMax<s.yMin)}(n,r))return 0;var o=S3(function(s,a){var u=Math.max(s.xMin,a.xMin),c=Math.min(s.xMax,a.xMax),d=Math.max(s.yMin,a.yMin),f=Math.min(s.yMax,a.yMax);return{xMin:u,xMax:c,yMin:d,yMax:f,width:Math.max(c-u,0),height:Math.max(f-d,0)}}(n,r)),i=S3(n)+S3(r)-o;return i>0?o/i:0}function KSe(e,t,n,r){var o=e.width,i=e.height,s=r?-1:1,a=Math.cos(e.rotation),u=Math.sin(e.rotation),c=e.xCenter,d=e.yCenter,f=1/t,h=1/n,m=new Array(16);return m[0]=o*a*s*f,m[1]=-i*u*f,m[2]=0,m[3]=(-.5*o*a*s+.5*i*u+c)*f,m[4]=o*u*s*h,m[5]=i*a*h,m[6]=0,m[7]=(-.5*i*a-.5*o*u*s+d)*h,m[8]=0,m[9]=0,m[10]=o*f,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,function(v){if(v.length!==16)throw new Error("Array length must be 16 but got "+v.length);return[[v[0],v[1],v[2],v[3]],[v[4],v[5],v[6],v[7]],[v[8],v[9],v[10],v[11]],[v[12],v[13],v[14],v[15]]]}(m)}function zK(e){return e instanceof Jt?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function XI(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}function HK(e){return e instanceof Jt?e:E0.fromPixels(e)}function D3(e,t){N.assert(e.width!==0,function(){return t+" width cannot be 0."}),N.assert(e.height!==0,function(){return t+" height cannot be 0."})}function XSe(e,t){var n=function(r,o,i,s){var a=o-r,u=s-i;if(a===0)throw new Error("Original min and max are both "+r+", range cannot be 0.");var c=u/a;return{scale:c,offset:i-r*c}}(0,255,t[0],t[1]);return ze(function(){return _e(le(e,n.scale),n.offset)})}function $K(e,t,n){var r=t.outputTensorSize,o=t.keepAspectRatio,i=t.borderMode,s=t.outputTensorFloatRange,a=zK(e),u=function(h,m){return m?{xCenter:m.xCenter*h.width,yCenter:m.yCenter*h.height,width:m.width*h.width,height:m.height*h.height,rotation:m.rotation}:{xCenter:.5*h.width,yCenter:.5*h.height,width:h.width,height:h.height,rotation:0}}(a,n),c=function(h,m,v){if(v===void 0&&(v=!1),!v)return{top:0,left:0,right:0,bottom:0};var x=m.height,b=m.width;D3(m,"targetSize"),D3(h,"roi");var C,S,O=x/b,F=h.height/h.width,B=0,H=0;return O>F?(C=h.width,S=h.width*O,H=(1-F/O)/2):(C=h.height/O,S=h.height,B=(1-O/F)/2),h.width=C,h.height=S,{top:H,left:B,right:B,bottom:H}}(u,r,o),d=KSe(u,a.width,a.height,!1),f=ze(function(){var h=HK(e),m=$a(function(b,C,S){return D3(S,"inputResolution"),[1/S.width*b[0][0]*C.width,1/S.height*b[0][1]*C.width,b[0][3]*C.width,1/S.width*b[1][0]*C.height,1/S.height*b[1][1]*C.height,b[1][3]*C.height,0,0]}(d,a,r),[1,8]),v=i==="zero"?"constant":"nearest",x=x0.transform(Li(Ct(h,"float32")),m,"bilinear",v,0,[r.height,r.width]);return s!=null?XSe(x,s):x});return{imageTensor:f,padding:c,transformationMatrix:d}}function LK(e,t,n,r){return r===1?.5*(e+t):e+(t-e)*n/(r-1)}function VK(e){return{xCenter:e.xMin+e.width/2,yCenter:e.yMin+e.height/2,width:e.width,height:e.height}}function BK(e){var t=e.relativeKeypoints;if(t.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,i=Number.MIN_VALUE;return t.forEach(function(s){n=Math.min(n,s.x),o=Math.max(o,s.x),r=Math.min(r,s.y),i=Math.max(i,s.y)}),{xCenter:(n+o)/2,yCenter:(r+i)/2,width:o-n,height:i-r}}function YSe(e,t,n,r,o){var i=n==="rect"?function(s,a,u){var c,d=s.locationData;if(a==="boundingbox")c=VK(d.boundingBox);else{c=BK(d);var f=u.width,h=u.height;c.xCenter=Math.round(c.xCenter*f),c.yCenter=Math.round(c.yCenter*h),c.width=Math.round(c.width*f),c.height=Math.round(c.height*h)}return c}(e,t,r):function(s,a){var u=s.locationData;return a==="boundingbox"?VK(u.relativeBoundingBox):BK(u)}(e,t);return o&&(i.rotation=function(s,a,u){var c,d=s.locationData,f=u.rotationVectorStartKeypointIndex,h=u.rotationVectorEndKeypointIndex;c=u.rotationVectorTargetAngle?u.rotationVectorTargetAngle:Math.PI*u.rotationVectorTargetAngleDegree/180;var m=d.relativeKeypoints[f].x*a.width,v=d.relativeKeypoints[f].y*a.height,x=d.relativeKeypoints[h].x*a.width,b=d.relativeKeypoints[h].y*a.height;return XI(c-Math.atan2(-(b-v),x-m))}(e,r,o)),i}function ZSe(e){return ze(function(){var t=function(o){return ze(function(){return[qe(o,[0,0,0],[1,-1,1]),qe(o,[0,0,1],[1,-1,-1])]})}(e),n=t[0],r=t[1];return{boxes:gr(r),logits:gr(n)}})}function QSe(e,t,n,r){return Ba(this,void 0,void 0,function(){var o,i,s,a,u;return Ua(this,function(c){switch(c.label){case 0:return e.sort(function(d,f){return Math.max.apply(Math,f.score)-Math.max.apply(Math,d.score)}),o=$a(e.map(function(d){return[d.locationData.relativeBoundingBox.yMin,d.locationData.relativeBoundingBox.xMin,d.locationData.relativeBoundingBox.yMax,d.locationData.relativeBoundingBox.xMax]})),i=Gn(e.map(function(d){return d.score[0]})),[4,x0.nonMaxSuppressionAsync(o,i,t,n)];case 1:return[4,(s=c.sent()).array()];case 2:return a=c.sent(),u=e.filter(function(d,f){return a.indexOf(f)>-1}),Wt([o,i,s]),[2,u]}})})}function JSe(e,t){return e.map(function(n){var r=Lo(Lo({},n),{x:n.x*t.width,y:n.y*t.height});return n.z!=null&&(r.z=n.z*t.width),r})}function e2e(e,t,n){return Ba(this,void 0,void 0,function(){var r,o,i,s,a;return Ua(this,function(u){switch(u.label){case 0:return r=e[0],o=e[1],i=function(c,d,f){return ze(function(){var h,m,v,x;f.reverseOutputOrder?(m=gr(qe(c,[0,f.boxCoordOffset+0],[-1,1])),h=gr(qe(c,[0,f.boxCoordOffset+1],[-1,1])),x=gr(qe(c,[0,f.boxCoordOffset+2],[-1,1])),v=gr(qe(c,[0,f.boxCoordOffset+3],[-1,1]))):(h=gr(qe(c,[0,f.boxCoordOffset+0],[-1,1])),m=gr(qe(c,[0,f.boxCoordOffset+1],[-1,1])),v=gr(qe(c,[0,f.boxCoordOffset+2],[-1,1])),x=gr(qe(c,[0,f.boxCoordOffset+3],[-1,1]))),m=_e(le(Ze(m,f.xScale),d.w),d.x),h=_e(le(Ze(h,f.yScale),d.h),d.y),f.applyExponentialOnBoxSize?(v=le(ai(Ze(v,f.hScale)),d.h),x=le(ai(Ze(x,f.wScale)),d.w)):(v=le(Ze(v,f.hScale),d.h),x=le(Ze(x,f.wScale),d.h));var b=Le(h,Ze(v,2)),C=Le(m,Ze(x,2)),S=_e(h,Ze(v,2)),O=_e(m,Ze(x,2)),F=sn([Q(b,[f.numBoxes,1]),Q(C,[f.numBoxes,1]),Q(S,[f.numBoxes,1]),Q(O,[f.numBoxes,1])],1);if(f.numKeypoints)for(var B=0;B<f.numKeypoints;++B){var H=f.keypointCoordOffset+B*f.numValuesPerKeypoint,X=void 0,Z=void 0;f.reverseOutputOrder?(X=gr(qe(c,[0,H],[-1,1])),Z=gr(qe(c,[0,H+1],[-1,1]))):(Z=gr(qe(c,[0,H],[-1,1])),X=gr(qe(c,[0,H+1],[-1,1])));var te=_e(le(Ze(X,f.xScale),d.w),d.x),J=_e(le(Ze(Z,f.yScale),d.h),d.y);F=sn([F,Q(te,[f.numBoxes,1]),Q(J,[f.numBoxes,1])],1)}return F})}(o,t,n),s=ze(function(){var c=r;return n.sigmoidScore?(n.scoreClippingThresh!=null&&(c=k_(r,-n.scoreClippingThresh,n.scoreClippingThresh)),c=oa(c)):c}),[4,t2e(i,s,n)];case 1:return a=u.sent(),Wt([i,s]),[2,a]}})})}function t2e(e,t,n){return Ba(this,void 0,void 0,function(){var r,o,i,s,a,u,c,d,f,h,m,v;return Ua(this,function(x){switch(x.label){case 0:return r=[],[4,e.data()];case 1:return o=x.sent(),[4,t.data()];case 2:for(i=x.sent(),s=0;s<n.numBoxes;++s)if(!(n.minScoreThresh!=null&&i[s]<n.minScoreThresh||(a=s*n.numCoords,u=n2e(o[a+0],o[a+1],o[a+2],o[a+3],i[s],n.flipVertically,s),(c=u.locationData.relativeBoundingBox).width<0||c.height<0))){if(n.numKeypoints>0)for((d=u.locationData).relativeKeypoints=[],f=n.numKeypoints*n.numValuesPerKeypoint,h=0;h<f;h+=n.numValuesPerKeypoint)m=a+n.keypointCoordOffset+h,v={x:o[m+0],y:n.flipVertically?1-o[m+1]:o[m+1]},d.relativeKeypoints.push(v);r.push(u)}return[2,r]}})})}function n2e(e,t,n,r,o,i,s){return{score:[o],ind:s,locationData:{relativeBoundingBox:{xMin:t,yMin:i?1-n:e,xMax:r,yMax:i?1-e:n,width:r-t,height:n-e}}}}function r2e(e,t){return e==="none"?t:function(n){return 1/(1+Math.exp(-n))}(t)}function UK(e,t,n,r){return Ba(this,void 0,void 0,function(){var o,i,s,a,u,c,d,f;return Ua(this,function(h){switch(h.label){case 0:return n=n||t.flipHorizontally||!1,r=r||t.flipVertically||!1,o=e.size,i=o/t.numLandmarks,[4,e.data()];case 1:for(s=h.sent(),a=[],u=0;u<t.numLandmarks;++u)c=u*i,(f={x:0,y:0}).x=n?t.inputImageWidth-s[c]:s[c],i>1&&(f.y=r?t.inputImageHeight-s[c+1]:s[c+1]),i>2&&(f.z=s[c+2]),i>3&&(f.score=r2e(t.visibilityActivation,s[c+3])),a.push(f);for(d=0;d<a.length;++d)(f=a[d]).x=f.x/t.inputImageWidth,f.y=f.y/t.inputImageHeight,f.z=f.z/t.inputImageWidth/(t.normalizeZ||1);return[2,a]}})})}function GK(e,t,n){var r=e.width,o=e.height,i=e.rotation;if(n.rotation==null&&n.rotationDegree==null||(i=function(d,f){return f.rotation!=null?d+=f.rotation:f.rotationDegree!=null&&(d+=Math.PI*f.rotationDegree/180),XI(d)}(i,n)),i===0)e.xCenter=e.xCenter+r*n.shiftX,e.yCenter=e.yCenter+o*n.shiftY;else{var s=(t.width*r*n.shiftX*Math.cos(i)-t.height*o*n.shiftY*Math.sin(i))/t.width,a=(t.width*r*n.shiftX*Math.sin(i)+t.height*o*n.shiftY*Math.cos(i))/t.height;e.xCenter=e.xCenter+s,e.yCenter=e.yCenter+a}if(n.squareLong){var u=Math.max(r*t.width,o*t.height);r=u/t.width,o=u/t.height}else if(n.squareShort){var c=Math.min(r*t.width,o*t.height);r=c/t.width,o=c/t.height}return e.width=r*n.scaleX,e.height=o*n.scaleY,e}function o2e(e,t){for(var n=function(ae,ye){var Oe=ae[0].x*ye.width,Ye=ae[0].y*ye.height,Fe=(ae[4].x+ae[8].x)/2,Dt=(ae[4].y+ae[8].y)/2;return Fe=(Fe+ae[6].x)/2*ye.width,Dt=(Dt+ae[6].y)/2*ye.height,XI(Math.PI/2-Math.atan2(-(Dt-Ye),Fe-Oe))}(e,t),r=XI(-n),o=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,u=0,c=e;u<c.length;u++){var d=(b=c[u]).x,f=b.y;o=Math.min(o,d),i=Math.max(i,d),s=Math.min(s,f),a=Math.max(a,f)}var h=(i+o)/2,m=(a+s)/2;o=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(var v=0,x=e;v<x.length;v++){var b,C=((b=x[v]).x-h)*t.width,S=(b.y-m)*t.height,O=C*Math.cos(r)-S*Math.sin(r),F=C*Math.sin(r)+S*Math.cos(r);o=Math.min(o,O),i=Math.max(i,O),s=Math.min(s,F),a=Math.max(a,F)}var B=(i+o)/2,H=(a+s)/2,X=B*Math.cos(n)-H*Math.sin(n)+t.width*h,Z=B*Math.sin(n)+H*Math.cos(n)+t.height*m,te=(i-o)/t.width,J=(a-s)/t.height;return{xCenter:X/t.width,yCenter:Z/t.height,width:te,height:J,rotation:n}}var i2e={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},N3={runtime:"tfjs",modelType:"full",maxHands:2,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"},A3={flipHorizontal:!1,staticImageMode:!1},s2e={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2016,numCoords:18,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:7,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.5},a2e=.3,u2e={shiftX:0,shiftY:-.5,scaleX:2.6,scaleY:2.6,squareLong:!0},c2e={shiftX:0,shiftY:-.1,scaleX:2,scaleY:2,squareLong:!0},l2e={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},d2e={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},f2e={numLandmarks:21,inputImageWidth:224,inputImageHeight:224,normalizeZ:.4,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},p2e={numLandmarks:21,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},S0,h2e=function(){function e(t,n,r){this.detectorModel=t,this.landmarkModel=n,this.maxHands=r,this.prevHandRectsFromLandmarks=null,this.anchors=function(u){u.reduceBoxesInLowestLayer==null&&(u.reduceBoxesInLowestLayer=!1),u.interpolatedScaleAspectRatio==null&&(u.interpolatedScaleAspectRatio=1),u.fixedAnchorSize==null&&(u.fixedAnchorSize=!1);for(var c=[],d=0;d<u.numLayers;){for(var f=[],h=[],m=[],v=[],x=d;x<u.strides.length&&u.strides[x]===u.strides[d];){var b=LK(u.minScale,u.maxScale,x,u.strides.length);if(x===0&&u.reduceBoxesInLowestLayer)m.push(1),m.push(2),m.push(.5),v.push(.1),v.push(b),v.push(b);else{for(var C=0;C<u.aspectRatios.length;++C)m.push(u.aspectRatios[C]),v.push(b);if(u.interpolatedScaleAspectRatio>0){var S=x===u.strides.length-1?1:LK(u.minScale,u.maxScale,x+1,u.strides.length);v.push(Math.sqrt(b*S)),m.push(u.interpolatedScaleAspectRatio)}}x++}for(var O=0;O<m.length;++O){var F=Math.sqrt(m[O]);f.push(v[O]/F),h.push(v[O]*F)}var B=0,H=0;if(u.featureMapHeight.length>0)B=u.featureMapHeight[d],H=u.featureMapWidth[d];else{var X=u.strides[d];B=Math.ceil(u.inputSizeHeight/X),H=Math.ceil(u.inputSizeWidth/X)}for(var Z=0;Z<B;++Z)for(var te=0;te<H;++te)for(var J=0;J<f.length;++J){var ae={xCenter:(te+u.anchorOffsetX)/H,yCenter:(Z+u.anchorOffsetY)/B,width:0,height:0};u.fixedAnchorSize?(ae.width=1,ae.height=1):(ae.width=h[J],ae.height=f[J]),c.push(ae)}d=x}return c}(i2e);var o=Gn(this.anchors.map(function(u){return u.width})),i=Gn(this.anchors.map(function(u){return u.height})),s=Gn(this.anchors.map(function(u){return u.xCenter})),a=Gn(this.anchors.map(function(u){return u.yCenter}));this.anchorTensor={x:s,y:a,w:o,h:i}}return e.prototype.estimateHands=function(t,n){return Ba(this,void 0,void 0,function(){var r,o,i,s,a,u,c,d,f,h,m,v,x,b,C,S,O,F,B=this;return Ua(this,function(H){switch(H.label){case 0:return r=function(te){if(te==null)return Lo({},A3);var J=Lo({},te);return J.flipHorizontal==null&&(J.flipHorizontal=A3.flipHorizontal),J.staticImageMode==null&&(J.staticImageMode=A3.staticImageMode),J}(n),t==null?(this.reset(),[2,[]]):(o=zK(t),i=ze(function(){var te=Ct(HK(t),"float32");return r.flipHorizontal&&(te=gr(x0.flipLeftRight(Li(te,0)),[0])),te}),s=this.prevHandRectsFromLandmarks,r.staticImageMode||s==null||s.length<this.maxHands?[4,this.detectPalm(i)]:[3,2]);case 1:return(u=H.sent()).length===0?(this.reset(),i.dispose(),[2,[]]):(c=u.map(function(te){return B.palmDetectionToRoi(te,o)}),a=c,[3,3]);case 2:a=s,H.label=3;case 3:return X=.5,Z=[],[a].forEach(function(te){return te.forEach(function(J){(Z=Z.filter(function(ae){return qSe(J,ae)<=X})).push(J)})}),a=Z,[4,Promise.all(a.map(function(te){return B.handLandmarks(te,i)}))];case 4:for(d=H.sent(),f=[],this.prevHandRectsFromLandmarks=[],h=0,m=d;h<m.length;h++)(v=m[h])!=null&&(x=v.landmarks,b=v.worldLandmarks,C=v.handScore,S=v.handedness,this.prevHandRectsFromLandmarks.push(this.handLandmarksToRoi(x,o)),(O=JSe(x,o))!=null&&O.forEach(function(te,J){delete te.z,te.name=KI[J]}),(F=b)!=null&&F.forEach(function(te,J){te.name=KI[J]}),f.push({keypoints:O,keypoints3D:F,handedness:S,score:C}));return i.dispose(),[2,f]}var X,Z})})},e.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),Wt([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},e.prototype.reset=function(){this.prevHandRectsFromLandmarks=null},e.prototype.detectPalm=function(t){return Ba(this,void 0,void 0,function(){var n,r,o,i,s,a,u,c,d,f;return Ua(this,function(h){switch(h.label){case 0:return n=$K(t,l2e),r=n.imageTensor,o=n.padding,i=this.detectorModel.predict(r),s=ZSe(i),a=s.boxes,[4,e2e([u=s.logits,a],this.anchorTensor,s2e)];case 1:return(c=h.sent()).length===0?(Wt([r,i,u,a]),[2,c]):[4,QSe(c,this.maxHands,a2e)];case 2:return d=h.sent(),f=function(m,v){m===void 0&&(m=[]);for(var x=v.left,b=v.top,C=v.left+v.right,S=v.top+v.bottom,O=0;O<m.length;O++){var F=m[O],B=F.locationData.relativeBoundingBox,H=(B.xMin-x)/(1-C),X=(B.yMin-b)/(1-S),Z=B.width/(1-C),te=B.height/(1-S);B.xMin=H,B.yMin=X,B.width=Z,B.height=te,B.xMax=H+Z,B.yMax=X+te;var J=F.locationData.relativeKeypoints;J&&J.forEach(function(ae){var ye=(ae.x-x)/(1-C),Oe=(ae.y-b)/(1-S);ae.x=ye,ae.y=Oe})}return m}(d,o),Wt([r,i,u,a]),[2,f]}})})},e.prototype.palmDetectionToRoi=function(t,n){return GK(YSe(t,"boundingbox","normRect",n,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:2,rotationVectorTargetAngleDegree:90}),n,u2e)},e.prototype.handLandmarks=function(t,n){return Ba(this,void 0,void 0,function(){var r,o,i,s,a,u,c,d,f,h,m,v,x,b,C,S;return Ua(this,function(O){switch(O.label){case 0:return r=$K(n,d2e,t),o=r.imageTensor,i=r.padding,s=this.landmarkModel.execute(o,["Identity_2:0","Identity_1:0","Identity:0","Identity_3:0"]),a=s[0],u=s[1],c=s[2],d=s[3],[4,u.data()];case 1:return(f=O.sent()[0])<.5?(Wt(s),Wt(o),[2,null]):[4,c.data()];case 2:return h=O.sent()[0],m=h>=.5?"Left":"Right",[4,UK(a,f2e)];case 3:return v=O.sent(),[4,UK(d,p2e)];case 4:return x=O.sent(),b=function(F,B){var H=B.left,X=B.top,Z=B.left+B.right,te=B.top+B.bottom;return F.map(function(J){return Lo(Lo({},J),{x:(J.x-H)/(1-Z),y:(J.y-X)/(1-te),z:J.z/(1-Z)})})}(v,i),C=function(F,B,H){H===void 0&&(H={ignoreRotation:!1});for(var X=[],Z=0,te=F;Z<te.length;Z++){var J=te[Z],ae=J.x-.5,ye=J.y-.5,Oe=H.ignoreRotation?0:B.rotation,Ye=Math.cos(Oe)*ae-Math.sin(Oe)*ye,Fe=Math.sin(Oe)*ae+Math.cos(Oe)*ye;Ye=Ye*B.width+B.xCenter,Fe=Fe*B.height+B.yCenter;var Dt=J.z*B.width,oe=Lo({},J);oe.x=Ye,oe.y=Fe,oe.z=Dt,X.push(oe)}return X}(b,t),S=function(F,B){for(var H=[],X=0,Z=F;X<Z.length;X++){var te=Z[X],J=te.x,ae=te.y,ye=B.rotation,Oe=Math.cos(ye)*J-Math.sin(ye)*ae,Ye=Math.sin(ye)*J+Math.cos(ye)*ae,Fe=Lo({},te);Fe.x=Oe,Fe.y=Ye,H.push(Fe)}return H}(x,t),Wt(s),Wt(o),[2,{landmarks:C,worldLandmarks:S,handScore:f,handedness:m}]}})})},e.prototype.handLandmarksToRoi=function(t,n){return GK(o2e([].concat(t.slice(0,4),t.slice(5,7),t.slice(9,11),t.slice(13,15),t.slice(17,19)),n),n,c2e)},e}();function m2e(e){return Ba(this,void 0,void 0,function(){var t,n,r,o,i,s;return Ua(this,function(a){switch(a.label){case 0:return t=function(u){if(u==null)return Lo({},N3);var c=Lo({},u);if(c.runtime="tfjs",c.maxHands==null&&(c.maxHands=N3.maxHands),c.modelType==null&&(c.modelType=N3.modelType),c.modelType!=="lite"&&c.modelType!=="full")throw new Error("Model type must be one of lite or full, but got "+c.modelType);return c.detectorModelUrl==null&&(c.modelType==="lite"?c.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/lite/1":c.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1"),c.landmarkModelUrl==null&&(c.modelType==="lite"?c.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/lite/1":c.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"),c}(e),n=t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,r=t.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([qI(t.detectorModelUrl,{fromTFHub:n}),qI(t.landmarkModelUrl,{fromTFHub:r})])];case 1:return o=a.sent(),i=o[0],s=o[1],[2,new h2e(i,s,t.maxHands)]}})})}function WK(e,t){return Ba(this,void 0,void 0,function(){var n,r;return Ua(this,function(o){if(e===S0.MediaPipeHands){if(r=void 0,(n=t)!=null){if(n.runtime==="tfjs")return[2,m2e(n)];if(n.runtime==="mediapipe")return[2,WSe(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(e+" is not a supported model name.")})})}(function(e){e.MediaPipeHands="MediaPipeHands"})(S0||(S0={}));var Kf={},YI={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function qK(e,t){Kf[e]=t}function Ui(e,t){if(!(e in Kf)||t!=null){let r=v2e(e,t);if(r!==null)Kf[e]=r;else return console.log("Could not get context for WebGL version",e),null}let n=Kf[e];return n==null||n.isContextLost()?(delete Kf[e],Ui(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Kf[e])}function y2e(e){if(!z().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&e===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function v2e(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=t??y2e(e);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Kf[e]},!1),z().getBool("SOFTWARE_WEBGL_ENABLED")&&(YI.failIfMajorPerformanceCaveat=!1),e===1?n.getContext("webgl",YI)||n.getContext("experimental-webgl",YI):n.getContext("webgl2",YI)}var Xf=function(e){return e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH",e}(Xf||{}),bo=function(e){return e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD",e}(bo||{}),oo=function(e){return e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",e}(oo||{});function Yf(e,t){return[t,e]}function KK(e,t){return e*t}function D0(e){let t=N.sizeFromShape(e),n=Math.ceil(t/4);return N.sizeToSquarishShape(n)}function Ru(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function XK(e,t){let[n,r]=Ru(e,t);return n*r*4}function N0(e,t){let n=e,r,o,i,s,a,u,c,d,f,h;return z().getNumber("WEBGL_VERSION")===2?(r=n.R32F,o=n.R16F,i=n.RGBA16F,s=n.RGBA32F,a=n.RED,c=4,d=1,f=n.HALF_FLOAT,h=n.FLOAT,u=n.RGBA8):(r=e.RGBA,o=e.RGBA,i=e.RGBA,s=n.RGBA,a=e.RGBA,c=4,d=4,f=t!=null?t.HALF_FLOAT_OES:null,h=e.FLOAT,u=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:a,downloadTextureFormat:u,downloadUnpackNumChannels:c,defaultNumChannels:d,textureTypeHalfFloat:f,textureTypeFloat:h}}function Ee(e,t){let n=t();return z().getBool("DEBUG")&&x2e(e),n}function x2e(e){let t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+E2e(e,t))}var b2e=596e-10,w2e=65504;function YK(e){return!!(z().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||b2e<Math.abs(e)&&Math.abs(e)<w2e)}function E2e(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function A0(e,t){return Rc(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function ZK(e,t){let n=Rc(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Ee(e,()=>e.shaderSource(n,t)),Ee(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function QK(e,t){let n=Rc(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Ee(e,()=>e.shaderSource(n,t)),Ee(e,()=>e.compileShader(n)),z().get("ENGINE_COMPILE_ONLY"))return n;if(e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw F3(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var C2e=/ERROR: [0-9]+:([0-9]+):/g;function F3(e,t){let n=C2e.exec(t);if(n==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}let r=+n[1],o=e.split(`
`),i=o.length.toString().length+2,s=o.map((f,h)=>N.rightPad((h+1).toString(),i)+f),a=0;for(let f=0;f<s.length;f++)a=Math.max(s[f].length,a);let u=s.slice(0,r-1),c=s.slice(r-1,r),d=s.slice(r);console.log(u.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${N.rightPad(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join(`
`))}function JK(e){return Rc(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function eX(e,t){if(Ee(e,()=>e.linkProgram(t)),!z().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function QI(e,t){if(Ee(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function tX(e,t){let n=Rc(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Ee(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),Ee(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function nX(e,t){let n=Rc(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Ee(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),Ee(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function rX(e){return Rc(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function oX(e,t){let n=z().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){let r=`[${e}x${t}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){let r=`[${e}x${t}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}function iX(e){return Rc(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function P3(e,t,n,r,o,i,s){let a=e.getAttribLocation(t,n);return a===-1?!1:(Ee(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),Ee(e,()=>e.vertexAttribPointer(a,o,e.FLOAT,!1,i,s)),Ee(e,()=>e.enableVertexAttribArray(a)),!0)}function T2e(e,t,n){I2e(e,n),Ee(e,()=>e.activeTexture(e.TEXTURE0+n)),Ee(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function sX(e,t,n){return Rc(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function aX(e,t,n){return e.getUniformLocation(t,n)}function uX(e,t,n,r){Ee(e,()=>T2e(e,t,r)),Ee(e,()=>e.uniform1i(n,r))}function JI(e,t,n){Ee(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),Ee(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function $3(e,t){Ee(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),Ee(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function R0(e){let t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+_2e(e,t))}function _2e(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function Rc(e,t,n){let r=Ee(e,()=>t());if(r==null)throw new Error(n);return r}function I2e(e,t){let n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){let o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function od(e,t=2){return N.sizeFromShape(e.slice(0,e.length-t))}function id(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function k0(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[od(e),...id(e)]),t}function cX(e,t=!1){let n=z().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=z().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&z().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n=n*2,r=r*2,e=e.map((a,u)=>u>=e.length-2?N.nearestLargerEven(e[u]):e[u]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=N.squeezeShape(e).newShape);let o=N.sizeFromShape(e),i=null;e.length<=1&&o<=n?i=[1,o]:e.length===2&&e[0]<=n&&e[1]<=n?i=e:e.length===3&&e[0]*e[1]<=n&&e[2]<=n?i=[e[0]*e[1],e[2]]:e.length===3&&e[0]<=n&&e[1]*e[2]<=n?i=[e[0],e[1]*e[2]]:e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n?i=[e[0]*e[1]*e[2],e[3]]:e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(i=[e[0],e[1]*e[2]*e[3]]);let s=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(t?2:1)&&Math.min(...i)>0;if(i==null||s)if(t){let a=od(e),u=2,c=2;e.length&&([u,c]=id(e)),o=a*(u/2)*(c/2),i=N.sizeToSquarishShape(o).map(d=>d*2)}else i=N.sizeToSquarishShape(o);return i}function ZI(e){return e%2===0}function Zf(e,t){if(e=e.slice(-2),t=t.slice(-2),N.arraysEqual(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){let n=e[e.length-1],r=t[t.length-1];if(n===r||ZI(n)&&ZI(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&ZI(e[0])&&ZI(t[0])}var k3,O3;function lX(e){if(k3==null){let t=Ui(e);k3=t.getParameter(t.MAX_TEXTURE_SIZE)}return k3}function dX(e){if(O3==null){let t=Ui(e);O3=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,O3)}function fX(e){if(e===0)return 0;let t,n=Ui(e);return Ns(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:Ns(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function Ns(e,t){return e.getExtension(t)!=null}function L3(e){try{if(Ui(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function pX(e){if(e===0)return!1;let t=Ui(e);if(e===1){if(!Ns(t,"OES_texture_float"))return!1}else if(!Ns(t,"EXT_color_buffer_float"))return!1;return M3(t)}function hX(e){if(e===0)return!1;let t=Ui(e);if(e===1){if(!Ns(t,"OES_texture_float")||!Ns(t,"WEBGL_color_buffer_float"))return!1}else{if(Ns(t,"EXT_color_buffer_float"))return M3(t);let r="EXT_color_buffer_half_float";if(Ns(t,r)){let o=t.getExtension(r);return S2e(t,o)}return!1}return M3(t)}function M3(e){let t=N0(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);let i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);let s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(i),s}function S2e(e,t){let n=N0(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);let a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(s),a}function mX(e){return e!==2?!1:Ui(e).fenceSync!=null}function ku(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&N.assert(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}var Me=z();Me.registerFlag("HAS_WEBGL",()=>Me.getNumber("WEBGL_VERSION")>0);Me.registerFlag("WEBGL_VERSION",()=>L3(2)?2:L3(1)?1:0);Me.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Me.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Me.get("WEBGL_VERSION")===2);Me.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Me.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Me.registerFlag("WEBGL_PACK",()=>Me.getBool("HAS_WEBGL"));Me.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Me.getBool("WEBGL_PACK"));Me.registerFlag("WEBGL_PACK_CLIP",()=>Me.getBool("WEBGL_PACK"));Me.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Me.getBool("WEBGL_PACK"));Me.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Me.getBool("WEBGL_PACK"));Me.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Me.getBool("WEBGL_PACK"));Me.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Me.getBool("WEBGL_PACK"));Me.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Me.getBool("WEBGL_PACK"));Me.registerFlag("WEBGL_PACK_REDUCE",()=>Me.getBool("WEBGL_PACK"));Me.registerFlag("WEBGL_LAZILY_UNPACK",()=>Me.getBool("WEBGL_PACK"));Me.registerFlag("WEBGL_CONV_IM2COL",()=>Me.getBool("WEBGL_PACK"));Me.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Me.getBool("WEBGL_PACK"));Me.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>lX(Me.getNumber("WEBGL_VERSION")));Me.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>dX(Me.getNumber("WEBGL_VERSION")));Me.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let e=Me.getNumber("WEBGL_VERSION");return e===0?0:fX(e)});Me.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Me.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Hl.isMobile());Me.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>pX(Me.getNumber("WEBGL_VERSION")));Me.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Me.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Me.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Me.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>hX(Me.getNumber("WEBGL_VERSION")));Me.registerFlag("WEBGL_FENCE_API_ENABLED",()=>mX(Me.getNumber("WEBGL_VERSION")));Me.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Me.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Me.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});Me.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Hl.isMobile()?1:-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});Me.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Me.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Me.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Me.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Me.registerFlag("WEBGL_EXP_CONV",()=>!1);Me.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Me.getBool("IS_TEST"));Me.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Me.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Me.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Me.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function kn(){let e,t,n,r,o,i,s,a,u,c;return z().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",o="texture",i="outputColor",s="out vec4 outputColor;",a=z().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:u,defineRound:c}}function Ga(e,t,n="index"){let r=N.computeStrides(t);return r.map((o,i)=>{let s=`int ${e[i]} = ${n} / ${o}`,a=i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${o}`:`index -= ${e[i]} * ${o}`;return`${s}; ${a};`}).join("")}function Qf(e,t,n="index"){let r=N.computeStrides(t);return r.map((o,i)=>{let s=`int ${e[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * outShapeStrides[${i}]`:`index -= ${e[i]} * outShapeStrides[${i}]`;return`${s}; ${a};`}).join("")}function D2e(e,t){let n=e.length,r=e.map(i=>`${t}[${i}]`),o=new Array(n-1);o[n-2]=r[n-1];for(let i=n-3;i>=0;--i)o[i]=`(${o[i+1]} * ${r[i+1]})`;return o}function gX(e,t,n="index"){let r=e.map((i,s)=>s),o=D2e(r,t);return o.map((i,s)=>{let a=`int ${e[s]} = ${n} / ${o[s]}`,u=s===o.length-1?`int ${e[s+1]} = ${n} - ${e[s]} * ${o[s]}`:`index -= ${e[s]} * ${o[s]}`;return`${a}; ${u};`}).join("")}function Zm(e){let t=N.computeStrides(e).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function Qm(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var tS=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var{getBroadcastDims:yX}=U;function vX(e,t,n){let r=[];if(e.forEach(m=>{let v=N.sizeFromShape(m.shapeInfo.logicalShape);if(m.shapeInfo.isUniform?r.push(`uniform float ${m.name}${v>1?`[${v}]`:""};`):(r.push(`uniform sampler2D ${m.name};`),r.push(`uniform int offset${m.name};`)),n.enableShapeUniforms){let{uniformShape:x}=nS(n.packedInputs,m.shapeInfo.logicalShape,m.shapeInfo.texShape);switch(x.length){case 1:r.push(`uniform int ${m.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${m.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${m.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${m.name}Shape;`);break;default:break}r.push(`uniform ivec2 ${m.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break;default:break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(m=>{r.push(`uniform ${m.type} ${m.name}${m.arrayIndex?`[${m.arrayIndex}]`:""};`)});let o=r.join(`
`),i=e.map(m=>N2e(m,t,n.packedInputs,n.enableShapeUniforms)).join(`
`),s=t.texShape,a=kn(),u=k2e(a),c,d,f=F2e(a);return t.isPacked?(c=A2e(t.logicalShape,s,n.enableShapeUniforms),d=M2e(a)):(c=R2e(t.logicalShape,s,n.enableShapeUniforms),d=O2e(a)),n.packedInputs&&(f+=V2e),[f,u,d,o,c,i,n.userCode].join(`
`)}function eg(e,t=!1){let n=e.shapeInfo.logicalShape;switch(n.length){case 0:return Z2e(e,t);case 1:return J2e(e,t);case 2:return tDe(e,t);case 3:return rDe(e,t);case 4:return iDe(e,t);case 5:return sDe(e);case 6:return aDe(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function xX(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return Y2e(e);case 1:return Q2e(e,t);case 2:return eDe(e,t);case 3:return nDe(e,t);default:return oDe(e,t)}}function N2e(e,t,n=!1,r){let o="";n?o+=xX(e,r):o+=eg(e,r);let i=e.shapeInfo.logicalShape,s=t.logicalShape;return i.length<=s.length&&(n?o+=uDe(e,t):o+=cDe(e,t)),o}function A2e(e,t,n){switch(e.length){case 0:return bX();case 1:return B2e(e,t,n);case 2:return K2e(e,t,n);case 3:return G2e(e,t,n);default:return z2e(e,t,n)}}function R2e(e,t,n){switch(e.length){case 0:return bX();case 1:return U2e(e,t,n);case 2:return X2e(e,t,n);case 3:return j2e(e,t,n);case 4:return H2e(e,t,n);case 5:return W2e(e,t);case 6:return q2e(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function k2e(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function O2e(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function M2e(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function F2e(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${P2e}
    ${$2e}
    ${L2e}
  `}var P2e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$2e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,L2e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,V2e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function bX(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function B2e(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function U2e(e,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function G2e(e,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),i=o*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function j2e(e,t,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Qf(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;let r=Ga(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function z2e(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),i=o*Math.ceil(e[e.length-2]/2),s=i,a="",u="b, r, c";for(let c=2;c<e.length-1;c++)s*=e[e.length-c-1],a=`
      int b${c} = index / ${s};
      index -= b${c} * ${s};
    `+a,u=`b${c}, `+u;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${e.length}(${u});
    }
  `}function H2e(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Qf(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;let r=Ga(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function W2e(e,t){let n=Ga(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function q2e(e,t){let n=Ga(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function K2e(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(N.arraysEqual(e,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;let o=Math.ceil(e[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function X2e(e,t,n){return N.arraysEqual(e,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function Jf(e){return`offset${e}`}function Y2e(e){let t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=kn();return`
    vec4 ${n}() {
      return ${r.texture2D}(${t}, halfCR);
    }
  `}function Z2e(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;let[o,i]=e.shapeInfo.texShape;if(o===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;let s=Jf(n);if(t)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${s});
      return sampleTexture(${n}, uv);
    }
  `;let[a,u]=e.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${u}, ${s});
      return sampleTexture(${n}, uv);
    }
  `}function Q2e(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,i=kn();if(t)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;let s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function J2e(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${tg(e)}
      }
    `;let o=e.shapeInfo.texShape,i=o[0],s=o[1];if(s===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;let a=Jf(n);return s===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:t?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${s}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function eDe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=i[0],a=i[1],u=kn();if(i!=null&&N.arraysEqual(n,i))return t?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${u.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${s}.0);

        return ${u.texture2D}(${r}, uv);
      }
    `;if(t)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `;let c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],d=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${d}, ${c[0]}, ${c[1]}, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function tDe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(i!=null&&N.arraysEqual(n,i)){if(t)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;let h=i[0],m=i[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${m}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}let{newShape:s,keptDims:a}=N.squeezeShape(n),u=s;if(u.length<n.length){let h=ng(e,u),m=["row","col"];return`
      ${eg(h,t)}
      float ${o}(int row, int col) {
        return ${o}(${rg(m,a)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${tg(e)}
      }
    `;let c=i[0],d=i[1],f=Jf(r);return d===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${d}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:t?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${c}, ${d}, index);
    return sampleTexture(${r}, uv);
  }
`}function nDe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){let h=n.slice(1),m=[1,2],v=ng(e,h),x=["b","row","col"];return`
        ${xX(v,t)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${rg(x,m)});
        }
      `}let a=kn();if(t)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;let u=s[0],c=s[1],d=Math.ceil(n[2]/2),f=d*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${c}, ${f}, ${d}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function rDe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],s=n[2],{newShape:a,keptDims:u}=N.squeezeShape(n),c=a;if(c.length<n.length){let x=ng(e,c),b=["row","col","depth"];return`
        ${eg(x,t)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${rg(b,u)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${s}, 1)));
        ${tg(e)}
      }
    `;let d=e.shapeInfo.texShape,f=d[0],h=d[1],m=e.shapeInfo.flatOffset;if(h===i&&m==null)return t?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===s&&m==null)return t?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;let v=Jf(r);return t?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${v};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${s} + depth + ${v};
        vec2 uv = uvFromFlat(${f}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function oDe(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=kn();if(t)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;let i=e.shapeInfo.logicalShape,s=i.length,a=e.shapeInfo.texShape,u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=u[0],d=u[1],f=Math.ceil(i[s-1]/2),h=f*Math.ceil(i[s-2]/2),m="int b, int row, int col",v=`b * ${h} + (row / 2) * ${f} + (col / 2)`;for(let x=2;x<s-1;x++)m=`int b${x}, `+m,h*=i[s-x-1],v=`b${x} * ${h} + `+v;return`
    vec4 ${r}(${m}) {
      int index = ${v};
      int texR = index / ${d};
      int texC = index - texR * ${d};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}, ${c});
      return ${o.texture2D}(${n}, uv);
    }
  `}function iDe(e,t){let n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],s=n[2]*i,a=n[1]*s,{newShape:u,keptDims:c}=N.squeezeShape(n);if(u.length<n.length){let S=ng(e,u),O=["row","col","depth","depth2"];return`
      ${eg(S,t)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${rg(O,c)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${s}, ${i}, 1)));
        ${tg(e)}
      }
    `;let d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],m=f[1],v=`int stride2 = ${r}Shape[3];`,x=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(m===a&&d==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${v}
        ${x}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(m===i&&d==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;let C=Jf(r);return t?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${v}
      ${x}
      ${b}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${C});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${h}, ${m}, index + ${C});
      return sampleTexture(${r}, uv);
    }
  `}function sDe(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],i=t[3]*o,s=t[2]*i,a=t[1]*s,{newShape:u,keptDims:c}=N.squeezeShape(t);if(u.length<t.length){let x=ng(e,u),b=["row","col","depth","depth2","depth3"];return`
      ${eg(x)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${rg(b,c)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${s}, ${i}, ${o})) +
          depth3;
        ${tg(e)}
      }
    `;let d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],m=f[1];if(m===a&&d==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${i}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===o&&d==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;let v=Jf(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} + depth * ${i} +
          depth2 * ${o} + depth3 + ${v};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function aDe(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:i}=N.squeezeShape(t);if(o.length<t.length){let b=ng(e,o),C=["row","col","depth","depth2","depth3","depth4"];return`
      ${eg(b)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${rg(C,i)});
      }
    `}let s=t[5],a=t[4]*s,u=t[3]*a,c=t[2]*u,d=t[1]*c;if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${d}, ${c}, ${u}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${tg(e)}
      }
    `;let f=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,m=h[0],v=h[1];if(v===d&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${u}, ${a}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${v}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(v===s&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${v}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;let x=Jf(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${d} + col * ${c} + depth * ${u} +
          depth2 * ${a} + depth3 * ${s} + depth4 + ${x};
      vec2 uv = uvFromFlat(${m}, ${v}, index);
      return sampleTexture(${n}, uv);
    }
  `}function tg(e){let t=e.name,n=N.sizeFromShape(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function uDe(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,a=yX(e.shapeInfo.logicalShape,t.logicalShape),u=et(s),c=s-i,d,f=["x","y","z","w","u","v"];i===0?d="":s<2&&a.length>=1?d="coords = 0;":d=a.map(S=>`coords.${f[S+c]} = 0;`).join(`
`);let h="";s<2&&i>0?h="coords":h=e.shapeInfo.logicalShape.map((S,O)=>`coords.${f[O+c]}`).join(", ");let m="return outputValue;",x=N.sizeFromShape(e.shapeInfo.logicalShape)===1,C=N.sizeFromShape(t.logicalShape)===1;if(i===1&&!x&&!C)m=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(x&&!C)s===1?m=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:m=`
        return vec4(outputValue.x);
      `;else if(a.length){let S=i-2,O=i-1;a.indexOf(S)>-1&&a.indexOf(O)>-1?m="return vec4(outputValue.x);":a.indexOf(S)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(O)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${u} coords = getOutputCoords();
      ${d}
      vec4 outputValue = get${r}(${h});
      ${m}
    }
  `}function cDe(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=t.texShape,s=e.shapeInfo.texShape,a=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&a===u&&e.shapeInfo.flatOffset==null&&N.arraysEqual(s,i))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;let c=et(u),d=yX(e.shapeInfo.logicalShape,t.logicalShape),f=u-a,h,m=["x","y","z","w","u","v"];a===0?h="":u<2&&d.length>=1?h="coords = 0;":h=d.map(x=>`coords.${m[x+f]} = 0;`).join(`
`);let v="";return u<2&&a>0?v="coords":v=e.shapeInfo.logicalShape.map((x,b)=>`coords.${m[b+f]}`).join(", "),`
    float ${o}() {
      ${c} coords = getOutputCoords();
      ${h}
      return get${r}(${v});
    }
  `}function et(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function nS(e,t,n){let{newShape:r,keptDims:o}=N.squeezeShape(t),i=t.length,s=e&&i===3&&t[0]===1,a=s?t.slice(1):r,u=!e&&i>1&&!N.arraysEqual(t,n)&&r.length<i||s;return{useSqueezeShape:u,uniformShape:u?a:t,keptDims:o}}function ng(e,t){let n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function rg(e,t){return t.map(n=>e[n]).join(", ")}function EX(e,t,n,r){let o=n.map((d,f)=>{let h={logicalShape:d.shape,texShape:d.isUniform?null:d.texData.texShape,isUniform:d.isUniform,isPacked:d.isUniform?!1:d.texData.isPacked,flatOffset:null};return d.texData!=null&&d.texData.slice!=null&&d.texData.slice.flatOffset>0&&(h.flatOffset=d.texData.slice.flatOffset),{name:t.variableNames[f],shapeInfo:h}}),i=o.map(d=>d.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=vX(o,s,t),u=QK(e.gl,a),c=e.createProgram(u);return z().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:u,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:s},V3(e,t,c)))}function V3(e,t,n){let r=[],o=[],i,s,a,u=null,c=null;c=e.getUniformLocation(n,"NAN",!1),z().getNumber("WEBGL_VERSION")===1&&(u=e.getUniformLocation(n,"INFINITY",!1));let d=!1;for(let f of t.variableNames){let h={name:f,uniform:e.getUniformLocation(n,f,d),offset:e.getUniformLocation(n,`offset${f}`,d)};t.enableShapeUniforms&&(h.shape=e.getUniformLocation(n,`${f}Shape`,d),h.texShape=e.getUniformLocation(n,`${f}TexShape`,d)),r.push(h)}if(t.enableShapeUniforms&&(i=e.getUniformLocation(n,"outShape",d),a=e.getUniformLocation(n,"outShapeStrides",d),s=e.getUniformLocation(n,"outTexShape",d)),t.customUniforms)for(let f of t.customUniforms)o.push(e.getUniformLocation(n,f.name,d));return{variablesLocations:r,customUniformLocations:o,infLoc:u,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:s}}function wX(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((n,r)=>{let o=n.logicalShape,i=t[r],s=i.shape;if(!N.arraysEqual(o,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${s} must match`);if(n.isUniform&&i.isUniform)return;let a=n.texShape,u=i.isUniform?null:i.texData.texShape;if(!N.arraysEqual(a,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${u} must match`)})}function CX(e,t,n,r,o){t.program.enableShapeUniforms||(wX(t.inShapeInfos,n),wX([t.outShapeInfo],[r]));let i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):e.setOutputMatrixTexture(i.texture,s[0],s[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),z().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN);for(let u=0;u<n.length;++u){let c=n[u],{uniform:d,offset:f,shape:h,texShape:m}=t.variablesLocations[u];if(h){let{uniformShape:v}=nS(t.program.packedInputs,c.shape,c.texData.texShape);switch(v.length){case 1:e.gl.uniform1iv(h,new Int32Array(v));break;case 2:e.gl.uniform2iv(h,new Int32Array(v));break;case 3:e.gl.uniform3iv(h,new Int32Array(v));break;case 4:e.gl.uniform4iv(h,new Int32Array(v));break;default:break}}if(m&&e.gl.uniform2i(m,c.texData.texShape[0],c.texData.texShape[1]),d!=null){if(c.isUniform){if(N.sizeFromShape(c.shape)<2)e.gl.uniform1f(d,c.uniformValues[0]);else{let v=c.uniformValues;v instanceof Float32Array||(v=new Float32Array(v)),e.gl.uniform1fv(d,v)}continue}c.texData.slice!=null&&f!=null&&e.gl.uniform1i(f,c.texData.slice.flatOffset),e.setInputMatrixTexture(c.texData.texture.texture,d,u)}}let a=t.outShapeLocation;if(a)switch(r.shape.length){case 1:e.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(a,new Int32Array(r.shape));break;default:break}if(t.outShapeStridesLocation){let u=N.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u));break;default:break}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&o)for(let u=0;u<t.program.customUniforms.length;++u){let c=t.program.customUniforms[u],d=t.customUniformLocations[u],f=o[u];if(c.type==="float")e.gl.uniform1fv(d,f);else if(c.type==="vec2")e.gl.uniform2fv(d,f);else if(c.type==="vec3")e.gl.uniform3fv(d,f);else if(c.type==="vec4")e.gl.uniform4fv(d,f);else if(c.type==="int")e.gl.uniform1iv(d,f);else if(c.type==="ivec2")e.gl.uniform2iv(d,f);else if(c.type==="ivec3")e.gl.uniform3iv(d,f);else if(c.type==="ivec4")e.gl.uniform4iv(d,f);else throw Error(`uniform type ${c.type} is not supported yet.`)}e.executeProgram()}function TX(e,t,n){let r="";t.concat(n).forEach(s=>{let a=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!s.isUniform){let u=s.texData.texShape,{useSqueezeShape:c,uniformShape:d,keptDims:f}=nS(e.packedInputs,s.shape,u),h="",m="",v="";if(d.length===1&&e.packedInputs){let B=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];h=`${B[0]>1}_${B[1]>1}`}else if(d.length===2&&!e.packedInputs)m=`${d[0]>1}_${d[1]>1}`;else if(d.length>2&&!e.packedInputs){let B=N.computeStrides(d);v=`${B[0]===u[1]}_${B[B.length-1]===u[1]}`}let x=s.shape.length,b=d.length===2&&N.arraysEqual(s.shape,u),C=N.sizeFromShape(s.shape)===1,S=U.getBroadcastDims(s.shape,n.shape),O=!e.packedInputs&&x===n.shape.length&&N.arraysEqual(u,n.texData.texShape),F=e.packedInputs||d.length>2?"":`${u[0]>1}_${u[1]>1}`;r+=`${x}_${O}_${c?f:""}_${d.length}_${C}_${S}_${b}_${h}_${m}_${v}_${F}_${a}`}else{let u=s.isUniform?"uniform":s.texData.texShape;r+=`${s.shape}_${u}_${a}`}});let o=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+o+`${z().getNumber("WEBGL_VERSION")}`,i}function qt(e){return z().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var rS=class{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Xf.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=kn();this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Qf(["r","c","d"],t):Ga(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}};var oS=class{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Xf.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=kn();this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Qf(["r","c","d"],t):Ga(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}};var iS=class{constructor(t){this.variableNames=["A"],this.outTexUsage=bo.DOWNLOAD;let n=kn();this.outputShape=t,this.userCode=`
      ${tS}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}};var sS=class{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=bo.DOWNLOAD;let n=kn();this.outputShape=t,this.userCode=`
      ${tS}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}};var fDe={R:0,G:1,B:2,A:3},O0=class{constructor(t,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let o=kn();this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let s="";for(let a=0;a<r.length;a++){let u=r[a];s+=`
          if(offset == ${a}) {
            result = values[${fDe[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?Qm():Zm(t)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${s}
        }
        ${o.output} = vec4(${i}, 0., 0., 0.);
      }
    `}};var aS=class{constructor(t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=kn();this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length);let o="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let a=0;a<=1;a++){let u=s*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?Qm():Zm(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${r.output} = ${i};
        }
    `}};function _X(e){let t=kn(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return ZK(e,n)}function IX(e){let t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return tX(e,t)}function SX(e){let t=new Uint16Array([0,1,2,2,1,3]);return nX(e,t)}function M0(e,t,n,r,o,i){oX(t,n);let s=rX(e),a=e.TEXTURE_2D;return Ee(e,()=>e.bindTexture(a,s)),Ee(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),Ee(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),Ee(e,()=>e.texParameteri(a,e.TEXTURE_MIN_FILTER,e.NEAREST)),Ee(e,()=>e.texParameteri(a,e.TEXTURE_MAG_FILTER,e.NEAREST)),z().getNumber("WEBGL_VERSION")===1?Ee(e,()=>e.texImage2D(a,0,r,t,n,0,o,i,null)):Ee(e,()=>e.texStorage2D(a,1,r,t,n)),Ee(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:s,texShape:[n,t]}}function B3(e){return e.internalFormatFloat}function DX(e,t,n,r){let[o,i]=Yf(t,n);return M0(e,o,i,B3(r),r.textureFormatFloat,e.FLOAT)}function U3(e){return e.internalFormatHalfFloat}function NX(e,t,n,r){let[o,i]=Yf(t,n);return M0(e,o,i,U3(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function G3(e){return e.downloadTextureFormat}function AX(e,t,n,r){let[o,i]=Yf(t,n);return M0(e,o,i,G3(r),e.RGBA,e.UNSIGNED_BYTE)}function j3(e){return e.internalFormatPackedFloat}function RX(e,t,n,r){let[o,i]=Ru(t,n);return M0(e,o,i,j3(r),e.RGBA,e.FLOAT)}function z3(e){return e.internalFormatPackedHalfFloat}function kX(e,t,n,r){let[o,i]=Ru(t,n);return M0(e,o,i,z3(r),e.RGBA,r.textureTypeHalfFloat)}function OX(e,t,n){return Ee(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),P3(e,t,"clipSpacePos",n,3,20,0)&&P3(e,t,"uv",n,2,20,12)}function MX(e,t,n,r,o,i){Ee(e,()=>e.bindTexture(e.TEXTURE_2D,t));let s,a,u;o instanceof Uint8Array?(s=new Uint8Array(n*r*4),a=e.UNSIGNED_BYTE,u=e.RGBA):(s=new Float32Array(n*r*4),a=e.FLOAT,u=i.internalFormatPackedFloat),s.set(o),z().getNumber("WEBGL_VERSION")===2?Ee(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,a,s)):Ee(e,()=>e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,a,s)),Ee(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function FX(e,t,n){Ee(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?z().getNumber("WEBGL_VERSION")===2?Ee(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):Ee(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):z().getNumber("WEBGL_VERSION")===2?Ee(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):Ee(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),Ee(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function PX(e,t,n,r){let o=e.createBuffer();Ee(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o));let a=4*4*t*n;return Ee(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),Ee(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),Ee(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),o}function $X(e,t,n){let r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function LX(e,t,n,r){let[o,i]=Yf(t,n),s=4,a=new Uint8Array(KK(t*n,s));return Ee(e,()=>e.readPixels(0,0,o,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function VX(e,t,n,r,o,i,s,a){let u=e,c=new Float32Array(XK(i,s));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function BX(e,t,n){let r=new Float32Array(t*n*4);return Ee(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}var og=class{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let n=z().getNumber("WEBGL_VERSION");if(t!=null?(this.gl=t,qK(n,t)):this.gl=Ui(n),t=this.gl,z().getNumber("WEBGL_VERSION")===2){let i=t;this.createVertexArray=()=>Ee(i,()=>i.createVertexArray()),this.bindVertexArray=s=>Ee(i,()=>i.bindVertexArray(s)),this.deleteVertexArray=s=>Ee(i,()=>i.deleteVertexArray(s)),this.getVertexArray=()=>Ee(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(t!=null){let i=t.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Ee(t,()=>i.createVertexArrayOES()),this.bindVertexArray=s=>Ee(t,()=>i.bindVertexArrayOES(s)),this.deleteVertexArray=s=>Ee(t,()=>i.deleteVertexArrayOES(s)),this.getVertexArray=()=>Ee(t,()=>t.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float",o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),z().getNumber("WEBGL_VERSION")===1){let i="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=A0(this.gl,i),Ns(this.gl,s))this.textureHalfFloatExtension=A0(this.gl,s);else if(z().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Ns(this.gl,o))this.colorBufferHalfFloatExtension=A0(this.gl,o);else if(z().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Ns(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Ns(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=IX(this.gl),this.indexBuffer=SX(this.gl),this.framebuffer=iX(this.gl),this.textureConfig=N0(this.gl,this.textureHalfFloatExtension)}get debug(){return z().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let t=this.gl;Ee(t,()=>t.finish()),Ee(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Ee(t,()=>t.deleteFramebuffer(this.framebuffer)),Ee(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),Ee(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),Ee(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,n){return this.throwIfDisposed(),DX(this.gl,t,n,this.textureConfig)}createFloat16MatrixTexture(t,n){return this.throwIfDisposed(),NX(this.gl,t,n,this.textureConfig)}createUnsignedBytesMatrixTexture(t,n){return this.throwIfDisposed(),AX(this.gl,t,n,this.textureConfig)}uploadPixelDataToTexture(t,n){this.throwIfDisposed(),FX(this.gl,t,n)}uploadDenseMatrixToTexture(t,n,r,o){this.throwIfDisposed(),MX(this.gl,t,n,r,o,this.textureConfig)}createFloat16PackedMatrixTexture(t,n){return this.throwIfDisposed(),kX(this.gl,t,n,this.textureConfig)}createPackedMatrixTexture(t,n){return this.throwIfDisposed(),RX(this.gl,t,n,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&($3(this.gl,this.framebuffer),this.outputTexture=null),Ee(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,n,r){return this.downloadMatrixDriver(t,()=>LX(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(t,n,r,o,i,s){return VX(this.gl,t,n,r,o,i,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,n){return $X(this.gl,t,n)}createBufferFromTexture(t,n,r){this.bindTextureToFrameBuffer(t);let o=PX(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){let t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let n,r;if(z().getBool("WEBGL_FENCE_API_ENABLED")){let o=t,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=()=>{let s=o.clientWaitSync(i,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},n=i}else z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(t,n,r){return this.downloadMatrixDriver(t,()=>BX(this.gl,n,r))}createProgram(t){this.throwIfDisposed();let n=this.gl;this.vertexShader==null&&(this.vertexShader=_X(n));let r=JK(n);Ee(n,()=>n.attachShader(r,this.vertexShader)),Ee(n,()=>n.attachShader(r,t)),eX(n,r);let o=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&QI(n,o),o}buildVao(t){this.setProgram(t),this.bindVertexArray(t.vao);let n=this.gl;Ee(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),OX(n,t,this.vertexBuffer)}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&(Ee(this.gl,()=>this.gl.deleteProgram(t)),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&QI(this.gl,this.program),Ee(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,n,r=!0){return this.throwIfDisposed(),r?sX(this.gl,t,n):aX(this.gl,t,n)}getAttributeLocation(t,n){return this.throwIfDisposed(),Ee(this.gl,()=>this.gl.getAttribLocation(t,n))}getUniformLocationNoThrow(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)}setInputMatrixTexture(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),uX(this.gl,t,n,r)}setOutputMatrixTexture(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)}setOutputPackedMatrixTexture(t,n,r){this.throwIfDisposed();let[o,i]=Ru(n,r);this.setOutputMatrixTextureDriver(t,o,i)}setOutputMatrixWriteRegion(t,n,r,o){this.setOutputMatrixWriteRegionDriver(r,t,o,n)}setOutputPackedMatrixWriteRegion(t,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&QI(this.gl,this.program),R0(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let t=this.gl;if(this.debug){let n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Ee(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ee(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=A0(this.gl,z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(o.TIME_ELAPSED_EXT,i),i}let t=this.getQueryTimerExtensionWebGL1(),n=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,n),n}endQuery(){if(z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}let t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(t){return ne(this,null,function*(){return yield N.repeatedTry(()=>this.disposed||this.isQueryAvailable(t,z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})}getQueryTime(t,n){if(n===0)return null;if(n===2){let r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}else{let r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,n){if(n===0)return!0;if(n===2){let r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{let r=this.getQueryTimerExtensionWebGL1(),o=r.getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(t){return new Promise(n=>{this.addItemToPoll(()=>t.isFencePassed(),()=>n())})}pollItems(){let t=hDe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=t;++n){let{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,n){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in z().platform&&(r=z().platform.setTimeoutCustom.bind(z().platform)),N.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),JI(this.gl,t,this.framebuffer),this.debug&&R0(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(JI(this.gl,this.outputTexture,this.framebuffer),this.debug&&R0(this.gl)):$3(this.gl,this.framebuffer)}downloadMatrixDriver(t,n){this.bindTextureToFrameBuffer(t);let r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(t,n,r){this.throwIfDisposed();let o=this.gl;JI(o,t,this.framebuffer),this.debug&&R0(o),this.outputTexture=t,Ee(o,()=>o.viewport(0,0,n,r)),Ee(o,()=>o.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(t,n,r,o){this.throwIfDisposed(),Ee(this.gl,()=>this.gl.scissor(t,n,r,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function hDe(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}var mP={};nn(mP,{addImpl:()=>q3,bincountImpl:()=>jX,bincountReduceImpl:()=>zX,bitwiseAndImpl:()=>K3,castImpl:()=>W3,ceilImpl:()=>X3,concatImpl:()=>HX,equalImpl:()=>Y3,expImpl:()=>Z3,expm1Impl:()=>Q3,floorDivImpl:()=>eP,floorImpl:()=>J3,gatherNdImpl:()=>WX,gatherV2Impl:()=>qX,greaterEqualImpl:()=>nP,greaterImpl:()=>tP,lessEqualImpl:()=>oP,lessImpl:()=>rP,linSpaceImpl:()=>KX,logImpl:()=>iP,maxImpl:()=>XX,maximumImpl:()=>sP,minimumImpl:()=>aP,multiplyImpl:()=>P0,negImpl:()=>YX,notEqualImpl:()=>uP,prodImpl:()=>QX,raggedGatherImpl:()=>eY,raggedRangeImpl:()=>nY,raggedTensorToTensorImpl:()=>iY,rangeImpl:()=>sY,rsqrtImpl:()=>lP,scatterImpl:()=>aY,sigmoidImpl:()=>uY,simpleAbsImpl:()=>UX,sliceImpl:()=>cY,sparseFillEmptyRowsImpl:()=>lY,sparseReshapeImpl:()=>dY,sparseSegmentReductionImpl:()=>fY,sqrtImpl:()=>pY,squaredDifferenceImpl:()=>dP,staticRegexReplaceImpl:()=>fP,stridedSliceImpl:()=>hY,stringNGramsImpl:()=>mY,stringSplitImpl:()=>gY,stringToHashBucketFastImpl:()=>yY,subImpl:()=>hP,tileImpl:()=>vY,topKImpl:()=>bY,transposeImpl:()=>ZX,uniqueImpl:()=>wY});function uS(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&N.assert(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}function UX(e){let t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}function ln(e){return(t,n,r,o,i)=>{let s=U.assertAndGetBroadcastShape(t,n),a=s.length,u=N.computeStrides(s),c=N.sizeFromShape(s),d=N.getTypedArrayFromDType(i,c),f=t.length,h=n.length,m=N.computeStrides(t),v=N.computeStrides(n),x=U.getBroadcastDims(t,s),b=U.getBroadcastDims(n,s);if(x.length+b.length===0)for(let C=0;C<d.length;++C)d[C]=e(r[C%r.length],o[C%o.length]);else for(let C=0;C<d.length;++C){let S=N.indexToLoc(C,a,u),O=S.slice(-f);x.forEach(X=>O[X]=0);let F=N.locToIndex(O,f,m),B=S.slice(-h);b.forEach(X=>B[X]=0);let H=N.locToIndex(B,h,v);d[C]=e(r[F],o[H])}return[d,s]}}function ig(e){let{inputs:t,backend:n}=e,{real:r,imag:o}=t,i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(a.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(o.shape,"float32",s)},a}function cS(e,t,n="float32"){if(n==="complex64"){let o=cS(e,t,"float32"),i=cS(e,t,"float32");return ig({inputs:{real:o,imag:i},backend:e})}let r=N.makeZerosTypedArray(N.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function H3(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function GX(e){let{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,i)}function W3(e,t,n,r){if(r==="int32"){let o=Int32Array.from(e);return[t,"int32",o]}if(r==="bool"){let o=N.toTypedArray([0],n),[i,s]=ln((a,u)=>a!==u?1:0)(t,[],e,o,"bool");return[s,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function F0(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dtype:i}=r;if(i==="complex64"){if(o.dtype==="complex64")return H3({inputs:{x:o},backend:n});let d=cS(n,o.shape,o.dtype),f=F0({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),h=ig({inputs:{real:f,imag:d},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),h}if(o.dtype==="complex64"){let d=GX({inputs:{input:o},backend:n}),f=F0({inputs:{x:d},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(d),f}if(!N.hasEncodingLoss(o.dtype,i)){let d=H3({inputs:{x:o},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:i}}let s=n.data.get(o.dataId).values,[a,u,c]=W3(s,o.shape,o.dtype,i);return n.makeTensorInfo(a,u,c)}function bn(e,t,n,r){return n==null?({inputs:o,backend:i})=>{let{a:s,b:a}=o,u=i;uS([s,a],e);let c=u.data.get(s.dataId).values,d=u.data.get(a.dataId).values,f=s.dtype==="string"?U.fromUint8ToStringArray(c):c,h=s.dtype==="string"?U.fromUint8ToStringArray(d):d,m=r||s.dtype,[v,x]=t(s.shape,a.shape,f,h,m);return u.makeTensorInfo(x,m,v)}:({inputs:o,backend:i})=>{let{a:s,b:a}=o,u=i;if(s.dtype==="complex64"||a.dtype==="complex64"){let c=F0({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),d=u.data.get(c.dataId),f=d.complexTensorInfos.real,h=d.complexTensorInfos.imag,m=u.data.get(f.dataId).values,v=u.data.get(h.dataId).values,x=F0({inputs:{x:a},backend:u,attrs:{dtype:"complex64"}}),b=u.data.get(x.dataId),C=b.complexTensorInfos.real,S=b.complexTensorInfos.imag,O=u.data.get(C.dataId).values,F=u.data.get(S.dataId).values,[B,H,X]=n(s.shape,a.shape,m,v,O,F),Z=u.makeTensorInfo(X,"float32",B),te=u.makeTensorInfo(X,"float32",H),J=ig({inputs:{real:Z,imag:te},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(x),u.disposeIntermediateTensorInfo(Z),u.disposeIntermediateTensorInfo(te),J}else{let c=u.data.get(s.dataId).values,d=u.data.get(a.dataId).values,f=r||s.dtype,[h,m]=t(s.shape,a.shape,c,d,f);return u.makeTensorInfo(m,f,h)}}}function sg(e){return(t,n,r,o,i,s)=>{let a=U.assertAndGetBroadcastShape(t,n),u=N.sizeFromShape(a),c=a.length,d=N.computeStrides(a),f=N.getTypedArrayFromDType("float32",u),h=N.getTypedArrayFromDType("float32",u),m=U.getBroadcastDims(t,a),v=U.getBroadcastDims(n,a),x=U.mergeRealAndImagArrays(r,o),b=U.mergeRealAndImagArrays(i,s),C=t.length,S=N.computeStrides(t),O=n.length,F=N.computeStrides(n);if(m.length+v.length===0)for(let B=0;B<f.length;B++){let H=B%x.length,X=B%b.length,Z=e(x[H*2],x[H*2+1],b[X*2],b[X*2+1]);f[B]=Z.real,h[B]=Z.imag}else for(let B=0;B<f.length;B++){let H=N.indexToLoc(B,c,d),X=H.slice(-C);m.forEach(ye=>X[ye]=0);let Z=N.locToIndex(X,C,S),te=H.slice(-O);v.forEach(ye=>te[ye]=0);let J=N.locToIndex(te,O,F),ae=e(x[Z*2],x[Z*2+1],b[J*2],b[J*2+1]);f[B]=ae.real,h[B]=ae.imag}return[f,h,a]}}var q3=ln((e,t)=>e+t),mDe=sg((e,t,n,r)=>({real:e+n,imag:t+r})),NEt=bn(Gl,q3,mDe);function jX(e,t,n,r,o){let i=N.sizeFromShape(r),s=N.makeZerosTypedArray(o,n);for(let a=0;a<e.length;a++){let u=e[a];if(u<0)throw new Error("Input x must be non-negative!");u>=o||(i>0?s[u]+=t[a]:s[u]+=1)}return s}function zX(e,t,n,r=!1){let o=e.shape[0],i=e.shape[1],s=wt([o,n],t.dtype);for(let a=0;a<o;a++)for(let u=0;u<i;u++){let c=e.get(a,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?s.set(1,a,c):t.size>0?s.set(s.get(a,c)+t.get(a,u),a,c):s.set(s.get(a,c)+1,a,c))}return s}var K3=ln((e,t)=>e&t),PEt=bn(sm,K3);function Or(e){return(t,n,r)=>{let o=N.getArrayFromDType(n,t.length);for(let i=0;i<t.length;++i)o[i]=e(t[i],r);return o}}function lS(e,t,n){let r=Or(t);return di(e,r,n)}function di(e,t,n){return({inputs:r,attrs:o,backend:i})=>{let{x:s}=r;uS(s,e);let a=i,u=a.data.get(s.dataId).values,c;if(s.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");c=U.fromUint8ToStringArray(u)}else c=u;let d=n||s.dtype,f=t(c,d,o);return a.makeTensorInfo(s.shape,d,f)}}var X3=Or(e=>Math.ceil(e)),qEt=di(am,X3);function HX(e,t,n,r){let o=N.getArrayFromDType(n,N.sizeFromShape(t));if(r&&n!=="string"){let i=0;e.forEach(s=>{let a=N.sizeFromShape(s.shape);o.set(s.vals,i),i+=a})}else{let i=0;e.forEach(s=>{let a=n==="string"?U.fromUint8ToStringArray(s.vals):s.vals,u=0;for(let c=0;c<s.shape[0];++c){let d=c*t[1]+i;for(let f=0;f<s.shape[1];++f)o[d+f]=a[u++]}i+=s.shape[1]})}return o}var Y3=ln((e,t)=>e===t?1:0),eCt=bn(um,Y3,null,"bool");var Z3=Or(e=>Math.exp(e)),iCt=di(cm,Z3,"float32");var Q3=Or(e=>Math.expm1(e)),lCt=di(lm,Q3);var J3=Or(e=>Math.floor(e)),mCt=di(dm,J3);var eP=ln((e,t)=>Math.floor(e/t)),bCt=bn(fm,eP,null,"int32");function WX(e,t,n,r,o,i,s,a,u){let c=wt([r,i],n);for(let d=0;d<r;d++){let f=[],h=0;for(let m=0;m<o;m++){let v=e[d*o+m];h+=v*s[m],f.push(v)}if(h<0||h>=u/i)throw new Error(`Invalid indices: ${f} does not index into ${a}`);for(let m=0;m<i;m++)c.values[d*i+m]=t.get(...t.indexToLoc(h*i+m))}return c}function qX(e,t,n){let r=wt(n,e.dtype);for(let o=0;o<r.size;++o){let s=r.indexToLoc(o).slice(),a=s[0],u=s[2],c=t.locToIndex([a,u]);s[2]=t.values[c];let d=e.locToIndex(s);0<=d&&d<e.values.length&&(r.values[o]=e.values[d])}return r}var tP=ln((e,t)=>e>t?1:0),NCt=bn(pm,tP,null,"bool");var nP=ln((e,t)=>e>=t?1:0),MCt=bn(hm,nP,null,"bool");var rP=ln((e,t)=>e<t?1:0),VCt=bn(mm,rP,null,"bool");var oP=ln((e,t)=>e<=t?1:0),zCt=bn(gm,oP,null,"bool");function KX(e,t,n){let r=(t-e)/(n-1),o=N.makeZerosTypedArray(n,"float32");o[0]=e;for(let i=1;i<o.length;i++)o[i]=o[i-1]+r;return o}var iP=Or(e=>Math.log(e)),ZCt=di(ym,iP);function XX(e,t,n,r){let o=N.getTypedArrayFromDType(r,N.sizeFromShape(n));for(let i=0;i<o.length;++i){let s=i*t,a=e[s];for(let u=0;u<t;++u){let c=e[s+u];(Number.isNaN(c)||c>a)&&(a=c)}o[i]=a}return o}var sP=ln((e,t)=>Math.max(e,t)),oTt=bn(vm,sP);var aP=ln((e,t)=>Math.min(e,t)),cTt=bn(xm,aP);var P0=ln((e,t)=>e*t),gDe=sg((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),hTt=bn(bm,P0,gDe);function YX(e,t,n){let r=N.createScalarValue(-1,n);return P0([],t,r,e,n)}var uP=ln((e,t)=>e!==t?1:0),ETt=bn(wm,uP,null,"bool");function ZX(e,t,n,r,o){let i=t.length,s=N.sizeFromShape(t),a=N.computeStrides(t),u=N.computeStrides(o),c=N.getTypedArrayFromDType(n,N.sizeFromShape(o));for(let d=0;d<s;++d){let f=N.indexToLoc(d,i,a),h=new Array(f.length);for(let v=0;v<h.length;v++)h[v]=f[r[v]];let m=N.locToIndex(h,i,u);c[m]=e[d]}return c}function QX(e,t,n,r){let[o,i]=U.computeOutAndReduceShapes(e,r),s=vo(t,"int32"),a=N.makeZerosTypedArray(N.sizeFromShape(o),s),u=N.sizeFromShape(i);for(let c=0;c<a.length;++c){let d=c*u,f=1;for(let h=0;h<u;++h)f*=n[d+h];a[c]=f}return{outVals:a,outShape:o,outDtype:s}}function yDe(e,t,n){e.forEach((r,o)=>{if(r<0||r>=n){let i=N.indexToLoc(o,t.length,N.computeStrides(t)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function vDe(e,t){for(let n=0;n<e.length;++n){let r=e[n],o=n===e.length-1?t:e[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function xDe(e,t,n,r){let o=[],i=0,s=t.length-1+n.length,a=new Array(s).fill(null).map(()=>[0]);vDe(n,r);let u=1;for(let c=0;c<t.length-1;++c){u*=t[c];let d=t[c+1];for(let f=1;f<u+1;++f)a[c].push(f*d)}for(let c=0;c<e.length;++c){let d=e[c],f=e[c]+1;for(let h=0;h<n.length;++h){let m=n[h],v=h+t.length-1;if(v>=0){let x=a[v],b=x[x.length-1]-m[d];for(let C=d;C<f;++C)a[v].push(m[C+1]+b)}d=m[d],f=m[f]}f!==d&&(o.push([d,f]),i+=f-d)}return{outSplits:a,valueSlices:o,numValues:i}}function bDe(e){let t=[];for(let n=0;n<e.length;++n){let r=e[n].length,o=N.getArrayFromDType("int32",r);t.push(o),e[n].forEach((i,s)=>o[s]=i)}return t}function JX(e,t){let n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function wDe(e,t,n,r,o,i){let s=JX(t,2)[1],a=JX(i,2)[1],u=0;for(let c of n)for(let d=c[0];d<c[1];++d){for(let f=0;f<r;++f)o[u*a+f]=e[d*s+f];++u}}function EDe(e,t,n,r,o){let i=t.slice();i[0]=o;let s=N.getArrayFromDType(n,N.sizeFromShape(i)),a=e.length,u=a===0?0:a/t[0];return wDe(e,t,r,u,s,i),[s,i]}function eY(e,t,n,r,o,i,s,a){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");let u=t[0][0]-1;if(yDe(i,s,u),r.length===0)throw new Error("params.rank must be nonzero");let c=r[0],{outSplits:d,valueSlices:f,numValues:h}=xDe(i,s,e,c),m=bDe(d),v=EDe(n,r,o,f,h);return[m,v[0],v[1]]}var tY=2147483647;function nY(e,t,n,r,o,i,s){if(t.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");let a=t.length===0,u=o.length===0,c=s.length===0,d=[];a||d.push(t[0]),u||d.push(o[0]),c||d.push(s[0]);for(let b=1;b<d.length;++b)if(d[b]!==d[b-1])throw new Error("starts, limits, and deltas must have the same shape");let f=d.length===0?1:d[0],h=N.getArrayFromDType("int32",f+1);h[0]=0;for(let b=0;b<f;++b){let C=a?e[0]:e[b],S=u?r[0]:r[b],O=c?i[0]:i[b];if(O===0)throw new Error("Requires delta != 0");let F;if(O>0&&S<C||O<0&&S>C)F=0;else if(F=Math.ceil(Math.abs((S-C)/O)),F>tY)throw new Error(`Requires ((limit - start) / delta) <= ${tY}`);h[b+1]=h[b]+F}let m=h[f],v=N.getArrayFromDType(n,m),x=0;for(let b=0;b<f;++b){let C=h[b+1]-h[b],S=a?e[0]:e[b],O=c?i[0]:i[b];for(let F=0;F<C;++F)v[x++]=S,S+=O}return[h,v]}var aa=U.RowPartitionType,cP=class e{constructor(t,n,r,o,i,s,a,u,c,d){this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=o,this.valuesDType=i,this.defaultValue=s,this.defaultValueShape=a,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=U.getRowPartitionTypesHelper(d),this.raggedRank=U.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===aa.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===aa.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){let n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case aa.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case aa.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${aa[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){let n=t.length;if(n===0||n===1)return 0;let r=0;for(let o=0;o<n-1;++o){let i=t[o+1]-t[o];i>r&&(r=i)}return r}static getMaxWidthValueRowID(t){let n=t.length;if(n===0)return 0;let r=0,o=t[0],i=0;for(let s=1;s<n;++s){let a=t[s];a!==o&&(o=a,i=Math.max(s-r,i),r=s)}return Math.max(n-r,i)}tensorShapeFromTensor(t,n,r=!0){if(n.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return oY(t,r)}calculateOutputSize(t){let n=this.valuesShape,r=this.defaultValueShape;U.validateDefaultValueShape(r,n);let o=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=U.combineRaggedTensorToTensorShapes(this.raggedRank,o,n);s[0]<0&&(s[0]=t);for(let a=1;a<=this.raggedRank;++a)s[a]<0&&(s[a]=this.getMaxWidth(a));return s}calculateFirstParentOutputIndex(t,n,r){let o=Math.min(t,r),i=[],s=0;for(let a=0;a<o;++a,s+=n)i.push(s);for(let a=o;a<t;++a)i.push(-1);return N.assert(i.length===t,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(t,n,r,o){let i=t.length,s=[];for(let a=0;a<i-1;++a){let u=t[a+1]-t[a],c=Math.min(o,u),d=n[a];d===-1&&(c=0);for(let f=0;f<c;++f)s.push(d),d+=r;for(let f=0;f<u-c;++f)s.push(-1)}if(i>0&&s.length!==t[i-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(t,n,r,o){let i=t.length,s=[];if(i===0)return[];let a=0,u=t[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let c=n[u];s.push(c);for(let d=1;d<i;++d){let f=t[d];if(f===u)c>=0&&(++a,a<o?c+=r:c=-1);else{if(a=0,u=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);c=n[f]}s.push(c)}if(s.length!==t.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(t,n,r,o){let i=this.getRowPartitionTensor(t),s=this.getRowPartitionTypeByDimension(t);switch(s){case aa.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,o);case aa.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,o);default:throw new Error(`Unsupported partition type: ${aa[s]}`)}}getFirstDimensionSize(){let t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let n=this.rowPartitionTypes[0];switch(n){case aa.FIRST_DIM_SIZE:return t[0];case aa.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case aa.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${aa[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let u=o.length-2;u>=0;--u)o[u]=o[u+1]*r[u+1];let i=oY(r,!1),s=N.getArrayFromDType(this.valuesDType,N.sizeFromShape(i));if(o[0]*r[0]>0){let u=this.calculateFirstParentOutputIndex(n,o[0],r[0]);for(let c=1;c<=this.raggedRank;++c)u=this.calculateOutputIndex(c-1,u,o[c],r[c]);this.setOutput(this.raggedRank,u,s,i)}return[i,s]}setOutput(t,n,r,o){if(r.length===0)return;let i=this.values,s=r,a=o.slice();a=a.slice(t+1);let u=N.sizeFromShape(a),c=n.length,d=this.defaultValue;if(d.length!==u&&d.length!==1){let v=this.defaultValueShape;ze(()=>{let x=Q(d,v);d=Xl(x,a).dataSync()})}let f=0,h=0,m=0;for(let v=0;v<=c;++v){let x=v<c?n[v]:-1;if(x===m){++m;continue}if(h<m){let b=i.subarray(f*u),C=s.subarray(h*u),S=(m-h)*u;rY(C,b,S)}if(v>=c){let b=r.length;x=Math.floor(b/u)}if(x>m)if(this.defaultValue.length===1)s.subarray(m*u,x*u).fill(this.defaultValue[0]),m=x;else for(;x>m;){let b=s.slice(m*u);rY(b,d,u),++m}x<0?(f=v+1,h=m):(f=v,h=m,m=h+1)}}};function rY(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function oY(e,t){let n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function iY(e,t,n,r,o,i,s,a,u,c){return new cP(e,t,n,r,o,i,s,a,u,c).compute()}function sY(e,t,n,r){let o=e===t,i=e<t&&n<0,s=t<e&&n>1;if(o||i||s)return N.makeZerosTypedArray(0,r);let a=Math.abs(Math.ceil((t-e)/n)),u=N.makeZerosTypedArray(a,r);t<e&&n===1&&(n=-1),u[0]=e;for(let c=1;c<u.length;c++)u[c]=u[c-1]+n;return u}var lP=Or(e=>1/Math.sqrt(e)),VTt=di(Em,lP);function aY(e,t,n,r,o,i,s,a,u,c){let d=[r/o,o],f=e.values,h=t.values;if(r===0)return wt(n,t.dtype);let m=u instanceof _s?u:wt(d,t.dtype);typeof u=="string"||typeof u=="number"?m.values.fill(u):typeof u=="boolean"&&m.values.fill(+u);for(let v=0;v<i;v++){let x=[],b=0;for(let C=0;C<s;C++){let S=f[v*s+C];x.push(S),b+=S*a[C]}if(b<0||b>=r/o)throw new Error(`Invalid indices: ${x} does not index into ${n}`);for(let C=0;C<o;C++)c?m.values[b*o+C]+=h[v*o+C]:m.values[b*o+C]=t.rank===0?h[0]:h[v*o+C]}return m}var uY=Or(e=>1/(1+Math.exp(-e))),WTt=lS(Cm,e=>1/(1+Math.exp(-e)));function cY(e,t,n,r,o){let i=li.isSliceContinous(r,t,n),s=N.sizeFromShape(n),a=N.computeStrides(r);if(i){let f=li.computeFlatOffset(t,a);return o==="string"?e.slice(f,f+s):e.subarray(f,f+s)}let u=o==="string"?U.fromUint8ToStringArray(e):e,c=wt(r,o,u),d=wt(n,o);for(let f=0;f<d.size;++f){let h=d.indexToLoc(f),m=h.map((v,x)=>v+t[x]);d.set(c.get(...m),...h)}return o==="string"?U.fromStringArrayToUint8(d.values):d.values}function lY(e,t,n,r,o,i,s){let a=t[0],u=i[0],c=new Array(u),d=new Array(a),f=t[1];if(u===0){if(a!==0)throw new Error(U.getSparseFillEmptyRowsIndicesDenseShapeMismatch(a));let b=N.getArrayFromDType(n,0),C=N.getArrayFromDType(o,0);return[b,[0,f],C,c,d]}let h=!0,m=0,v=new Array(u).fill(0);for(let b=0;b<a;++b){let C=e[b*f];if(C<0)throw new Error(U.getSparseFillEmptyRowsNegativeIndexErrorMessage(b,C));if(C>=u)throw new Error(U.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(b,C,u));++v[C],h=h&&C>=m,m=C}let x=!0;for(let b=0;b<u;++b){let C=v[b]===0;c[b]=C,x=x&&!C,v[b]=Math.max(v[b],1),b>0&&(v[b]+=v[b-1])}if(x&&h){let b=e,C=r;for(let S=0;S<a;++S)d[S]=S;return[b,[a,f],C,c,d]}else{let b=v[u-1],C=N.getArrayFromDType(n,b*f),S=N.getArrayFromDType(o,b),O=new Array(u).fill(0);for(let F=0;F<a;++F){let B=e[F*f],H=O[B],X=(B===0?0:v[B-1])+H;O[B]++;for(let Z=0;Z<f;++Z)C[X*f+Z]=e[F*f+Z];S[X]=r[F],d[F]=X}for(let F=0;F<u;++F)if(O[F]===0){let H=F===0?0:v[F-1];C[H*f+0]=F;for(let X=1;X<f;++X)C[H*f+X]=0;S[H]=s}return[C,[b,f],S,c,d]}}function dY(e,t,n,r,o){let i=N.sizeFromShape(r),s=t[0],a=o.length,u=[],c=1,d=-1;for(let b=0;b<a;++b){let C=o[b];if(C===-1){if(d!==-1)throw new Error(U.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(d,b));d=b,u.push(1)}else{if(C<0)throw new Error(U.getSparseReshapeNegativeOutputDimErrorMessage(b,C));c*=C,u.push(C)}}if(d!==-1){if(c<=0)throw new Error(U.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let b=Math.trunc(i/c);if(c*b!==i)throw new Error(U.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[d]=b}if(N.sizeFromShape(u)!==i)throw new Error(U.getSparseReshapeInputOutputMismatchErrorMessage(r,u));let h=r.length,m=[];if(h>0){m[h-1]=1;for(let b=h-2;b>=0;--b)m[b]=m[b+1]*r[b+1]}let v=[];if(a>0){v[a-1]=1;for(let b=a-2;b>=0;--b)v[b]=v[b+1]*u[b+1]}let x=N.getArrayFromDType(n,s*a);for(let b=0;b<s;++b){let C=0;for(let S=0;S<h;++S)C+=e[b*h+S]*m[S];for(let S=0;S<a;++S)x[b*a+S]=Math.trunc(C/v[S]),C%=v[S]}return[x,[s,a],u]}function fY(e,t,n,r,o,i=!1,s=0){let a=r.length,u=[t[0],e.length/t[0]],c=u[1],f=a>0?o[a-1]+1:0;if(f<0)throw new Error(U.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let h=t.slice();h[0]=f;let m=h.reduce((O,F)=>O*F,1),v=N.getArrayFromDType(n,m);if(a===0)return f>0&&v.fill(s),[v,h];if(f<=0)throw new Error(U.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let x=0,b=1,C=0,S=o[x];for(;;){let O=0;if(b<a){if(O=o[b],S===O){++b;continue}if(S>=O)throw new Error(U.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(S<0||S>=f)throw new Error(U.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(S,f));S>C&&v.fill(s,C*c,S*c);for(let F=x;F<b;++F){let B=r[F];if(B<0||B>=u[0])throw new Error(U.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(F,r[F],u[0]));for(let H=0;H<c;H++)v[S*c+H]+=e[B*c+H]}if(i)for(let F=0;F<c;F++)v[S*c+F]/=b-x;if(x=b,++b,C=S+1,S=O,b>a)break}return C<f&&v.fill(s,C*c,f*c),[v,h]}var pY=Or(e=>Math.sqrt(e)),i_t=lS(Tm,e=>Math.sqrt(e));var dP=ln((e,t)=>{let n=e-t;return n*n}),l_t=bn(_m,dP);var fP=Or((e,t)=>{let{pattern:n,replaceGlobal:r,rewrite:o}=t;return e.replace(new RegExp(n,r?"g":""),o)}),m_t=di(Im,fP);function hY(e,t,n,r){let o=wt(e,t.dtype);for(let i=0;i<o.size;i++){let s=o.indexToLoc(i),a=new Array(s.length);for(let u=0;u<a.length;u++)a[u]=s[u]*n[u]+r[u];o.set(t.get(...a),...s)}return o}var pP=class{constructor(t,n,r,o,i,s){this.separator=N.encodeString(t),this.nGramWidths=n,this.leftPad=N.encodeString(r),this.rightPad=N.encodeString(o),this.padWidth=i,this.preserveShort=s}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,n){let r=this.getPadWidth(n);return Math.max(0,t+2*r-n+1)}createNGrams(t,n,r,o,i,s){for(let a=0;a<i;++a){let u=this.getPadWidth(s),c=Math.max(0,u-a),d=Math.max(0,u-(i-(a+1))),f=s-(c+d),h=n+(c>0?0:a-u),m=0;m+=c*this.leftPad.length;for(let S=0;S<f;++S)m+=t[h+S].length;m+=d*this.rightPad.length;let v=c+d+f-1;m+=v*this.separator.length,r[o+a]=new Uint8Array(m);let x=r[o+a],b=0,C=S=>S.forEach(O=>x[b++]=O);for(let S=0;S<c;++S)C(this.leftPad),C(this.separator);for(let S=0;S<f-1;++S)C(t[h+S]),C(this.separator);if(f>0){C(t[h+f-1]);for(let S=0;S<d;++S)C(this.separator),C(this.rightPad)}else{for(let S=0;S<d-1;++S)C(this.rightPad),C(this.separator);C(this.rightPad)}}}compute(t,n){let r=t.length,o=n.length;if(o>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let c=1;c<o;++c){let d=n[c]>=u;if(d=d&&n[c]<=r,!d)throw new Error(`Invalid split value ${n[c]}, must be in [${u}, ${r}]`);u=n[c]}if(u!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${u}`)}let i=o-1,s=N.getArrayFromDType("int32",o);if(r===0||o===0){let u=new Array(r);for(let c=0;c<=i;++c)s[c]=0;return[u,s]}s[0]=0;for(let u=1;u<=i;++u){let c=n[u]-n[u-1],d=0;this.nGramWidths.forEach(f=>{d+=this.getNumNGrams(c,f)}),this.preserveShort&&c>0&&d===0&&(d=1),s[u]=s[u-1]+d}let a=new Array(s[i]);for(let u=0;u<i;++u){let c=n[u],d=s[u];if(this.nGramWidths.forEach(f=>{let h=n[u+1]-n[u],m=this.getNumNGrams(h,f);this.createNGrams(t,c,a,d,m,f),d+=m}),this.preserveShort&&d===s[u]){let f=n[u+1]-n[u];if(f===0)continue;let h=f+2*this.padWidth;this.createNGrams(t,c,a,d,1,h)}}return[a,s]}};function mY(e,t,n,r,o,i,s,a){return new pP(n,r,o,i,s,a).compute(e,t)}function CDe(e,t,n,r){if(!e.length)return;if(t.length===0){for(let i=0;i<e.length;++i)r.push(e.subarray(i,i+1));return}if(t.length===1){let i=t[0],s=e.indexOf(i);for(;s!==-1;){let a=e.subarray(0,s);(!n||a.length!==0)&&r.push(a),e=e.subarray(s+1),s=e.indexOf(i)}(!n||e.length!==0)&&r.push(e);return}let o=0;for(let i=0;i<e.length+1;i++)if(i===e.length||t.indexOf(e[i])!==-1){let s=e.subarray(o,i);(!n||s.length!==0)&&r.push(s),o=i+1}}function gY(e,t,n){let r=e.length,o=[],i=0,s=0,a=new Array(r);for(let h=0;h<r;++h){let m=o.length;CDe(e[h],t,n,o);let v=o.length-m;a[h]=v,i+=v,s=Math.max(s,v)}let u=N.getArrayFromDType("int32",i*2),c=new Array(i),d=[r,s],f=0;for(let h=0;h<r;++h)for(let m=0;m<a[h];++m)u[f*2]=h,u[f*2+1]=m,c[f]=o[f],++f;return[u,c,d]}function yY(e,t){let n=N.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=N.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var hP=ln((e,t)=>e-t),TDe=sg((e,t,n,r)=>({real:e-n,imag:t-r})),D_t=bn(Sm,hP,TDe);function vY(e,t){let n=new Array(e.rank);for(let o=0;o<n.length;o++)n[o]=e.shape[o]*t[o];let r=wt(n,e.dtype);for(let o=0;o<r.values.length;++o){let i=r.indexToLoc(o),s=new Array(e.rank);for(let u=0;u<s.length;u++)s[u]=i[u]%e.shape[u];let a=e.locToIndex(s);r.values[o]=e.values[a]}return r}var $0=(e,t)=>{let n=t.value-e.value;return n===0?e.index-t.index:n};function xY(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){let a=r-n+1,u=t-n+1,c=Math.log(a),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(a-d)/a)*Math.sign(u-a/2),h=Math.max(n,Math.floor(t-u*d/a+f)),m=Math.min(r,Math.floor(t+(a-u)*d/a+f));xY(e,t,h,m)}let o=e[t],i=n,s=r;for(N.swap(e,n,t),$0(e[r],o)>0&&N.swap(e,n,r);i<s;){for(N.swap(e,i,s),i++,s--;$0(e[i],o)<0;)i=i+1;for(;$0(e[s],o)>0;)s=s-1}$0(e[n],o)===0?N.swap(e,n,s):(s=s+1,N.swap(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}}function bY(e,t,n,r,o){let i=t[t.length-1],[s,a]=[e.length/i,i],u=N.getTypedArrayFromDType(n,s*r),c=N.getTypedArrayFromDType("int32",s*r);for(let f=0;f<s;f++){let h=f*a,m=e.subarray(h,h+a),v=new Array(m.length);m.forEach((S,O)=>v[O]={value:S,index:O}),r<v.length&&(xY(v,r),v=v.slice(0,r)),o&&v.sort($0);let x=f*r,b=u.subarray(x,x+r),C=c.subarray(x,x+r);for(let S=0;S<r;S++)b[S]=v[S].value,C[S]=v[S].index}let d=t.slice();return d[d.length-1]=r,[wt(d,n,u),wt(d,"int32",c)]}function wY(e,t,n,r){let o=N.parseAxisParam(t,n)[0],i=[1,n[0],1];for(let v=0;v<o;v++)i[0]*=n[v];i[1]=n[o];for(let v=o+1;v<n.length;v++)i[2]*=n[v];let s=new Map,a=new Int32Array(n[o]),u=new _s(i,r,e),c=[],d=i[0]===1&&i[2]===1;for(let v=0;v<n[o];v++){let x;if(d)x=e[v].toString();else{let C=[];for(let S=0;S<i[0];S++)for(let O=0;O<i[2];O++)C.push(u.get(S,v,O));x=C.join(",")}let b=s.get(x);if(b!=null)a[v]=b;else{let C=s.size;s.set(x,C),a[v]=C,c.push(v)}}let f=i.slice();f[1]=s.size;let h=new _s(f,r);c.forEach((v,x)=>{for(let b=0;b<i[0];b++)for(let C=0;C<i[2];C++)h.set(u.get(b,v,C),b,x,C)});let m=n.slice();return m[o]=f[1],{outputValues:h.values,outputShape:m,indices:a}}var{addImpl:EY,bincountImpl:dS,bincountReduceImpl:CY,bitwiseAndImpl:TY,castImpl:_Y,ceilImpl:IY,concatImpl:SY,equalImpl:DY,expImpl:NY,expm1Impl:AY,floorImpl:RY,gatherNdImpl:kY,gatherV2Impl:OY,greaterImpl:MY,greaterEqualImpl:FY,lessImpl:PY,lessEqualImpl:$Y,linSpaceImpl:LY,logImpl:VY,maxImpl:BY,maximumImpl:UY,minimumImpl:GY,multiplyImpl:jY,negImpl:zY,notEqualImpl:HY,prodImpl:WY,raggedGatherImpl:qY,raggedRangeImpl:KY,raggedTensorToTensorImpl:XY,rangeImpl:YY,rsqrtImpl:ZY,scatterImpl:QY,sigmoidImpl:JY,simpleAbsImpl:fS,sliceImpl:eZ,sparseFillEmptyRowsImpl:tZ,sparseReshapeImpl:nZ,sparseSegmentReductionImpl:pS,sqrtImpl:rZ,staticRegexReplaceImpl:oZ,stridedSliceImpl:iZ,stringNGramsImpl:sZ,stringSplitImpl:aZ,stringToHashBucketFastImpl:uZ,subImpl:cZ,tileImpl:lZ,topKImpl:dZ,transposeImpl:ep,uniqueImpl:fZ}=mP;function gP(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>`${e}.${n}`)}function jn(e,t){return t===1?[e]:gP(e,t)}function pZ(e,t){if(e===1)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}var hS=class{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=qt(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let n=jn("rc",this.rank),r=et(this.rank),o=this.getOutOfBoundsCondition(n),i=this.getSetup(n),s=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(t){let n=[];for(let r=0;r<=1;r++)for(let o=0;o<=1;o++){let i=`${r===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)i=`${t[t.length-1-s]},`+i;n.push(i)}return n}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${t[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(t){if(this.rank===1)return"";let n=t.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${o};
    `}getOutput(t){let n=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}};var ag=class{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length);let r="";for(let o=0;o<4;o++){let i="thisRC = rc;";o%2===1&&(i+="thisRC.z += 1;"),o>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${_De(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?Qm():Zm(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${r}

        setOutput(result);
      }
    `}};function _De(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?gX(["r","c","d"],"inputShape"):Ga(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}var mS=class{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(t,n,r){let o=mZ(n,r),i=gZ(t,o,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);let s=hZ(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();let u=this.freeTextures[i].pop();return this.usedTextures[i].push(u),u}let a;return o===oo.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===oo.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===oo.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===oo.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===oo.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),a}releaseTexture(t,n,r,o){if(this.freeTextures==null)return;let i=mZ(r,o),s=gZ(n,i,o);s in this.freeTextures||(this.freeTextures[s]=[]);let a=hZ(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,o),u=z().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=a):(this.freeTextures[s].push(t),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;let c=this.usedTextures[s],d=c&&c.indexOf(t);if(d==null||d<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[d]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;let t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);let n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let t in this.freeTextures)this.freeTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(let t in this.usedTextures)this.usedTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function IDe(e,t){let n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function hZ(e,t,n,r,o){let i=SDe(t,r),s;if(o){let[u,c]=Ru(e[0],e[1]);s=u*c}else{let[u,c]=Yf(e[0],e[1]);s=u*c}let a=IDe(n,i);return s*a}function SDe(e,t){switch(e){case oo.PACKED_2X2_FLOAT32:return j3(t);case oo.PACKED_2X2_FLOAT16:return z3(t);case oo.UNPACKED_FLOAT32:return B3(t);case oo.UNPACKED_FLOAT16:return U3(t);case oo.PACKED_4X1_UNSIGNED_BYTE:return G3(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function DDe(e){return z().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?oo.PACKED_2X2_FLOAT32:oo.UNPACKED_FLOAT32:e?oo.PACKED_2X2_FLOAT16:oo.UNPACKED_FLOAT16}function mZ(e,t){if(e===bo.UPLOAD)return oo.PACKED_2X2_FLOAT32;if(e===bo.RENDER||e==null)return DDe(t);if(e===bo.DOWNLOAD||e===bo.PIXELS)return oo.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function gZ(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}var qr=class{constructor(t,n){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},yr="if (isnan(x)) return x;",yZ="return x;",yP="return abs(x);";var vZ="return (x >= 0.0) ? x : (exp(x) - 1.0);",xZ=yr+`
  return (x < 0.0) ? 0.0 : x;
`,bZ=yr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ou="return x;",wZ="return 1.0 / (1.0 + exp(-1.0 * x));";var CZ="return x;",TZ=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,_Z=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,IZ=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,SZ="return 1.0 / (1.0 + exp(-1.0 * x));",fi=class{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};var gS=class{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length);let n=t.length,r=jn("rc",n),o=et(n),i=pZ(n,r),s=r.slice(-2),a=n<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}};var ADe=Au.whereImpl,RDe=1e-7,kDe=1e-4,yS={};function ODe(e){return e in yS||(yS[e]={}),yS[e]}var MDe=z().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),FDe=600;function PDe(){return z().global.screen==null?1024:z().global.screen.height*z().global.screen.width*window.devicePixelRatio*FDe/1024/1024}var DZ=(()=>{class e extends gf{nextDataId(){return e.nextDataId++}constructor(n){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!z().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let r;if(n!=null){if(n instanceof og)r=n;else{let o=Ui(z().getNumber("WEBGL_VERSION"),n);r=new og(o)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let o=Ui(z().getNumber("WEBGL_VERSION"));r=new og(o),this.binaryCache=ODe(z().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=r,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new mS(this.gpgpu),this.numMBBeforeWarning=PDe(),this.texData=new Wv(this,Cc())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(n,r,o,i,s,a){let u=this.makeTensorInfo(r,o),c=this.texData.get(u.dataId);c.isPacked=!1,c.texture={texture:n,texShape:[i,s]},c.texShape=[i,s];let d=k0(r),f=new O0(d,!1,a),h=this.runWebGLProgram(f,[u],o,[[i,s]]);return h.shape=r,c.texture=null,this.disposeIntermediateTensorInfo(u),h.dataId}write(n,r,o){if((z().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||z().getBool("DEBUG"))&&this.checkNumericalProblems(n),o==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let i={id:this.nextDataId()};return this.texData.set(i,{shape:r,dtype:o,values:n,usage:bo.UPLOAD,refCount:1}),i}refCount(n){return this.texData.has(n)?this.texData.get(n).refCount:0}incRef(n){let r=this.texData.get(n);r.refCount++}decRef(n){if(this.texData.has(n)){let r=this.texData.get(n);r.refCount--}}move(n,r,o,i,s){if(z().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:o,dtype:i,values:r,usage:bo.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(n){this.disposeData(n.dataId)}readSync(n){let r=this.texData.get(n),{values:o,dtype:i,complexTensorInfos:s,slice:a,shape:u,isPacked:c}=r;if(a!=null){let m;c?m=new fi(u,Ou):m=new qr(u,Ou);let v=this.runWebGLProgram(m,[{dataId:n,shape:u,dtype:i}],i),x=this.readSync(v.dataId);return this.disposeIntermediateTensorInfo(v),x}if(o!=null)return this.convertAndCacheOnCPU(n);if(i==="string")return o;let d=this.activeTimers!=null,f;d&&(f=N.now());let h;if(i==="complex64"){let m=this.readSync(s.real.dataId),v=this.readSync(s.imag.dataId);h=U.mergeRealAndImagArrays(m,v)}else h=this.getValuesFromTexture(n);return d&&(this.downloadWaitMs+=N.now()-f),this.convertAndCacheOnCPU(n,h)}read(n){return ne(this,null,function*(){if(this.pendingRead.has(n)){let x=this.pendingRead.get(n);return new Promise(b=>x.push(b))}let r=this.texData.get(n),{values:o,shape:i,slice:s,dtype:a,complexTensorInfos:u,isPacked:c}=r;if(s!=null){let x;c?x=new fi(i,Ou):x=new qr(i,Ou);let b=this.runWebGLProgram(x,[{dataId:n,shape:i,dtype:a}],a),C=this.read(b.dataId);return this.disposeIntermediateTensorInfo(b),C}if(o!=null)return this.convertAndCacheOnCPU(n);if(z().getBool("DEBUG")&&!z().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&z().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let d=null,f;if(a!=="complex64"&&z().get("WEBGL_BUFFER_SUPPORTED")){f=this.decode(n);let x=this.texData.get(f.dataId);d=this.gpgpu.createBufferFromTexture(x.texture.texture,...D0(i))}this.pendingRead.set(n,[]),a!=="complex64"&&(yield this.gpgpu.createAndWaitForFence());let h;if(a==="complex64"){let x=yield Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]),b=x[0],C=x[1];h=U.mergeRealAndImagArrays(b,C)}else if(d==null)h=this.getValuesFromTexture(n);else{let x=N.sizeFromShape(i);h=this.gpgpu.downloadFloat32MatrixFromBuffer(d,x)}if(f!=null&&this.disposeIntermediateTensorInfo(f),d!=null){let x=this.gpgpu.gl;Ee(x,()=>x.deleteBuffer(d))}let m=this.convertAndCacheOnCPU(n,h),v=this.pendingRead.get(n);return this.pendingRead.delete(n),v.forEach(x=>x(m)),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n)&&Cc().removeDataId(n,this),this.pendingDeletes--),m})}readToGPU(n,r={}){let o=this.texData.get(n),{values:i,shape:s,slice:a,dtype:u,isPacked:c,texture:d}=o;if(u==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let v;c?v=new fi(s,Ou):v=new qr(s,Ou);let x=this.runWebGLProgram(v,[{dataId:n,shape:s,dtype:u}],u),b=this.readToGPU(x,r);return this.disposeIntermediateTensorInfo(x),b}if(d==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let f=this.decode(n,r.customTexShape),h=Cc().makeTensorFromTensorInfo(f),m=this.texData.get(f.dataId);return Object.assign({tensorRef:h},m.texture)}bufferSync(n){let r=this.readSync(n.dataId);if(n.dtype==="string")try{let o=r.map(i=>N.decodeString(i));return wt(n.shape,n.dtype,o)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return wt(n.shape,n.dtype,r)}checkNumericalProblems(n){if(n!=null)for(let r=0;r<n.length;r++){let o=n[r];if(!YK(o))throw z().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${o} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${o} cannot be represented on this device.`)}}getValuesFromTexture(n){let{shape:r,dtype:o,isPacked:i}=this.texData.get(n),s=N.sizeFromShape(r);if(z().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let m=this.decode(n),v=this.texData.get(m.dataId),x=this.gpgpu.downloadMatrixFromPackedTexture(v.texture.texture,...D0(r)).subarray(0,s);return this.disposeIntermediateTensorInfo(m),x}let a=z().getBool("WEBGL_PACK")&&i===!0,u=a?k0(r):r,c=a?new sS(u):new iS(u),d=this.runWebGLProgram(c,[{shape:u,dtype:o,dataId:n}],"float32"),f=this.texData.get(d.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(f.texture.texture,f.texShape[0],f.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(d),h}timerAvailable(){return z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(n){let r=this.activeTimers,o=[],i=!1;this.programTimersStack==null?(this.programTimersStack=o,i=!0):this.activeTimers.push(o),this.activeTimers=o,n();let s=N.flatten(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),a=N.flatten(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=r,i&&(this.programTimersStack=null);let u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return ne(this,null,function*(){if(z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(s);u.kernelMs=N.sum(c),u.getExtraProfileInfo=()=>c.map((d,f)=>({name:a[f],ms:d})).map(d=>`${d.name}: ${d.ms}`).join(", ")}else u.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,u})}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:N.now(),endMs:null}}endTimer(n){return z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=N.now(),n)}getQueryTime(n){return ne(this,null,function*(){if(z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(n);let r=n;return r.endMs-r.startMs})}disposeData(n,r=!1){if(this.pendingDisposal.has(n))return!1;if(!this.texData.has(n))return!0;if(r?this.texData.get(n).refCount=0:this.texData.get(n).refCount--,!r&&this.texData.get(n).refCount>0)return!1;if(this.pendingRead.has(n))return this.pendingDisposal.add(n),this.pendingDeletes++,!1;this.releaseGPUData(n);let{complexTensorInfos:o}=this.texData.get(n);return o!=null&&(this.disposeData(o.real.dataId,r),this.disposeData(o.imag.dataId,r)),this.texData.delete(n),!0}releaseGPUData(n){let{texture:r,dtype:o,texShape:i,usage:s,isPacked:a,slice:u}=this.texData.get(n),c=u&&u.origDataId||n,d=this.dataRefCount.get(c);d>1?this.dataRefCount.set(c,d-1):(this.dataRefCount.delete(c),r!=null&&(this.numBytesInGPU-=this.computeBytes(i,o),this.textureManager.releaseTexture(r,i,s,a)));let f=this.texData.get(n);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null}getTexture(n){return this.uploadToGPU(n),this.texData.get(n).texture.texture}getDataInfo(n){return this.texData.get(n)}shouldExecuteOnCPU(n,r=MDe){return z().getBool("WEBGL_CPU_FORWARD")&&n.every(o=>this.texData.get(o.dataId).texture==null&&N.sizeFromShape(o.shape)<r)}getGPGPUContext(){return this.gpgpu}where(n){U.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let r=n.dataSync();return ADe(n.shape,r)}packedUnaryOp(n,r,o){let i=new fi(n.shape,r),s=this.compileAndRun(i,[n],o);return Cc().makeTensorFromTensorInfo(s)}abs(n){if(this.shouldExecuteOnCPU([n])&&n.dtype!=="complex64"){let i=fS(this.texData.get(n.dataId).values);return this.makeOutput(n.shape,n.dtype,i)}if(z().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,yP,n.dtype);let r=new qr(n.shape,yP),o=this.compileAndRun(r,[n]);return Cc().makeTensorFromTensorInfo(o)}makeTensorInfo(n,r,o){let i;if(r==="string"&&o!=null&&o.length>0&&N.isString(o[0])){let s=o.map(a=>N.encodeString(a));i=this.write(s,n,r)}else i=this.write(o,n,r);return this.texData.get(i).usage=null,{dataId:i,shape:n,dtype:r}}makeOutput(n,r,o){return Cc().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,o),this)}unpackTensor(n){let r=new gS(n.shape);return this.runWebGLProgram(r,[n],n.dtype)}packTensor(n){let r=new hS(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)}packedReshape(n,r){let o=[od(n.shape),...id(n.shape)],i={dtype:n.dtype,shape:o,dataId:n.dataId},s=[od(r),...id(r)],a=new ag(s,o),u=!0,c=[o],d=this.runWebGLProgram(a,[i],n.dtype,c,u);return{dataId:d.dataId,shape:r,dtype:d.dtype}}decode(n,r){let o=this.texData.get(n),{isPacked:i,shape:s,dtype:a}=o;if(r!=null){let m=N.sizeFromShape(s),v=r[0]*r[1]*4;N.assert(m<=v,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let u=k0(s),c;i?c=new oS(u):c=new rS(u);let d=!0,f=[r??D0(u)],h=this.runWebGLProgram(c,[{shape:u,dtype:a,dataId:n}],a,f,d,r);return{dtype:a,shape:s,dataId:h.dataId}}runWebGLProgram(n,r,o,i,s=!1,a){let u=this.makeTensorInfo(n.outputShape,o),c=this.texData.get(u.dataId);if(n.packedOutput&&(c.isPacked=!0),n.outPackingScheme===Xf.DENSE){let S=a??D0(n.outputShape);c.texShape=S.map(O=>O*2)}if(n.outTexUsage!=null&&(c.usage=n.outTexUsage),N.sizeFromShape(u.shape)===0)return c.values=N.getTypedArrayFromDType(u.dtype,0),u;let d=[],f=r.map(S=>{if(S.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let O=this.texData.get(S.dataId);if(O.texture==null){if(!n.packedInputs&&N.sizeFromShape(S.shape)<=z().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:S.shape,texData:null,isUniform:!0,uniformValues:O.values};n.packedInputs&&(O.isPacked=!0,O.shape=S.shape)}if(this.uploadToGPU(S.dataId),!!O.isPacked!=!!n.packedInputs)S=O.isPacked?this.unpackTensor(S):this.packTensor(S),d.push(S),O=this.texData.get(S.dataId);else if(O.isPacked&&!Zf(O.shape,S.shape)){let F=S,B=S.shape;S.shape=O.shape,S=this.packedReshape(S,B),d.push(S),O=this.texData.get(S.dataId),F.shape=B}return{shape:S.shape,texData:O,isUniform:!1}});this.uploadToGPU(u.dataId);let h={shape:u.shape,texData:c,isUniform:!1},m=TX(n,f,h),v=this.getAndSaveBinary(m,()=>EX(this.gpgpu,n,f,h)),x=this.activeTimers!=null,b;x&&(b=this.startTimer()),z().get("ENGINE_COMPILE_ONLY")||CX(this.gpgpu,v,f,h,i),d.forEach(S=>this.disposeIntermediateTensorInfo(S)),x&&(b=this.endTimer(b),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(b)}));let C=z().getNumber("WEBGL_FLUSH_THRESHOLD");if(C>0){let S=N.now();S-this.lastGlFlushTime>C&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=S)}if(!z().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&s===!1){let S=this.unpackTensor(u);return this.disposeIntermediateTensorInfo(u),S}return u}compileAndRun(n,r,o,i,s=!1){return o=o||r[0].dtype,this.runWebGLProgram(n,r,o,i,s)}getAndSaveBinary(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(z().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(r=>{this.gpgpu.deleteProgram(this.binaryCache[r].webGLProgram),delete this.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ze(()=>{if(!z().get("WEBGL_RENDER_FLOAT32_ENABLED")){let n=z().getBool("DEBUG");z().set("DEBUG",!1);let r=this.abs(Ge(1e-8)).dataSync()[0];if(z().set("DEBUG",n),r>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?RDe:kDe}uploadToGPU(n){let r=this.texData.get(n),{shape:o,dtype:i,values:s,texture:a,usage:u,isPacked:c}=r;if(a!=null)return;let d=this.activeTimers!=null,f;d&&(f=N.now());let h=r.texShape;if(h==null&&(h=cX(o,c),r.texShape=h),s!=null){let m=k0(o),v,x=h[1],b=h[0],C=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(c||!C)&&([x,b]=Ru(h[0],h[1])),c?v=new aS(m,C):v=new O0(m,C);let S=C?[b,x]:h,O=this.makeTensorInfo(S,i),F=this.texData.get(O.dataId);C?F.usage=bo.PIXELS:F.usage=bo.UPLOAD,F.texShape=S,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(O.dataId),x,b,s);let B=[[b,x]],X=this.runWebGLProgram(v,[O],i,B,!0),Z=this.texData.get(X.dataId);r.texShape=Z.texShape,r.isPacked=Z.isPacked,r.usage=Z.usage,z().get("ENGINE_COMPILE_ONLY")?this.disposeData(X.dataId):(r.texture=Z.texture,r.values=null,this.texData.delete(X.dataId)),this.disposeIntermediateTensorInfo(O),d&&(this.uploadWaitMs+=N.now()-f)}else{let m=this.acquireTexture(h,u,i,c);r.texture=m}}convertAndCacheOnCPU(n,r){let o=this.texData.get(n),{dtype:i}=o;return r!=null&&(o.values=$De(r,i)),o.values}acquireTexture(n,r,o,i){if(this.numBytesInGPU+=this.computeBytes(n,o),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(n,r,i)}computeBytes(n,r){return n[0]*n[1]*N.bytesPerElement(r)}checkCompileCompletion(){for(let[,n]of Object.entries(this.binaryCache))this.checkCompletion_(n)}checkCompileCompletionAsync(){return ne(this,null,function*(){let n=[];if(this.gpgpu.parallelCompilationExtension){for(let[,r]of Object.entries(this.binaryCache))n.push(this.checkCompletionAsync_(r));return Promise.all(n)}else{for(let[,r]of Object.entries(this.binaryCache)){let o=new Promise(i=>{try{this.checkCompletion_(r),i(!0)}catch(s){throw s}});n.push(o)}return Promise.all(n)}})}checkCompletionAsync_(n){return ne(this,null,function*(){return this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(n):(yield JF(),this.checkCompletionAsync_(n))})}checkCompletion_(n){if(this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(n.webGLProgram)),this.gpgpu.gl.getShaderParameter(n.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(F3(n.source,this.gpgpu.gl.getShaderInfoLog(n.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let n of Object.values(this.binaryCache)){this.gpgpu.buildVao(n.webGLProgram);let{variablesLocations:r,customUniformLocations:o,infLoc:i,nanLoc:s,outShapeLocation:a,outShapeStridesLocation:u,outTexShapeLocation:c}=V3(this.gpgpu,n.program,n.webGLProgram);n.variablesLocations=r,n.customUniformLocations=o,n.infLoc=i,n.nanLoc=s,n.outShapeLocation=a,n.outShapeStridesLocation=u,n.outTexShapeLocation=c}}createTensorFromGPUData(n,r,o){n.channels=n.channels||"RGBA";let{texture:i,height:s,width:a,channels:u}=n,c=Cc().backend;if(!c.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let d=c.writeTexture(i,r,o,s,a,u);return Cc().makeTensorFromDataId(d,r,o,c)}}return e.nextDataId=0,e})();function $De(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){let n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}else throw new Error(`Unknown dtype ${t}`)}Hl.isBrowser()&&GH("webgl",()=>new DZ,2);var ug=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var pi=class{constructor(t,n,r){this.variableNames=["A","B"],this.outputShape=U.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=qt(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};var ji=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;var Gi=class{constructor(t,n,r,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=U.assertAndGetBroadcastShape(n,r);let i=this.outputShape.length;this.enableShapeUniforms=qt(i);let s="";if(o)if(i===0||N.sizeFromShape(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${et(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let u=jn("coords",i);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${u[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${u[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${u[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${u[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}};function zn(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var NZ={kernelName:wf,backendName:"webgl",kernelFunc:zn};function hi(e){let{inputs:t,backend:n}=e,{real:r,imag:o}=t,i=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(i.dataId),a=zn({inputs:{x:r},backend:n}),u=zn({inputs:{x:o},backend:n});return s.complexTensorInfos={real:a,imag:u},i}var AZ={kernelName:Zv,backendName:"webgl",kernelFunc:hi};var vP="return (a < 0.) ? b * a : a;",xP=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function LDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:i}=r,s=n.makeTensorInfo([],"float32",N.createScalarValue(i,"float32")),a=z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Gi(xP,o.shape,s.shape):new pi(vP,o.shape,s.shape),u=n.runWebGLProgram(a,[o,s],"float32");return n.disposeIntermediateTensorInfo(s),u}var RZ={kernelName:YC,backendName:"webgl",kernelFunc:LDe};var bP="return (a < 0.) ? b * a : a;",wP=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function VDe(e){let{inputs:t,backend:n}=e,{x:r,alpha:o}=t,i=z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Gi(wP,r.shape,o.shape):new pi(bP,r.shape,o.shape);return n.runWebGLProgram(i,[r,o],"float32")}var kZ={kernelName:bT,backendName:"webgl",kernelFunc:VDe};var ua="if (isnan(x)) return x;";function Ne({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:o,backend:i})=>{let{x:s}=o,a=i,u=r||s.dtype;if(a.shouldExecuteOnCPU([s])&&n!=null){let f=a.texData.get(s.dataId),h=n(f.values,u);return a.makeTensorInfo(s.shape,u,h)}let c=z().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null,d;return c?d=new fi(s.shape,t):d=new qr(s.shape,e),a.runWebGLProgram(d,[s],u)}}function Ut({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:i}){return({inputs:s,backend:a})=>{let{a:u,b:c}=s,d=a;if(r&&u.dtype==="complex64"){let v=d.texData.get(u.dataId),x=d.texData.get(c.dataId),[b,C]=[[v.complexTensorInfos.real,x.complexTensorInfos.real],[v.complexTensorInfos.imag,x.complexTensorInfos.imag]].map(O=>{let[F,B]=O,H={dataId:F.dataId,dtype:F.dtype,shape:u.shape},X={dataId:B.dataId,dtype:B.dtype,shape:c.shape},Z=new pi(e,u.shape,c.shape);return d.runWebGLProgram(Z,[H,X],vo(F.dtype,B.dtype))}),S=hi({inputs:{real:b,imag:C},backend:d});return d.disposeIntermediateTensorInfo(b),d.disposeIntermediateTensorInfo(C),S}let f=i||vo(u.dtype,c.dtype);if((u.dtype==="string"||c.dtype==="string"||d.shouldExecuteOnCPU([u,c]))&&o!=null){let v=d.texData.get(u.dataId).values,x=d.texData.get(c.dataId).values,b=u.dtype==="string"?U.fromUint8ToStringArray(v):v,C=u.dtype==="string"?U.fromUint8ToStringArray(x):x,[S,O]=o(u.shape,c.shape,b,C,f),F=d.makeTensorInfo(O,f),B=d.texData.get(F.dataId);return B.values=S,F}let h=z().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null,m;return h?m=new Gi(t,u.shape,c.shape,n):m=new pi(e,u.shape,c.shape),d.runWebGLProgram(m,[u,c],f)}}function kc(e,t=!1){if(e==="linear")return t?CZ:yZ;if(e==="relu")return t?_Z:xZ;if(e==="elu")return t?TZ:vZ;if(e==="relu6")return t?IZ:bZ;if(e==="prelu")return t?wP:bP;if(e==="leakyrelu")return t?xP:vP;if(e==="sigmoid")return t?SZ:wZ;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}var cg=class{constructor(t,n,r,o=!1,i=!1,s=!1,a=null,u=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=qt(this.outputShape.length);let d=o?t[1]:t[2],f=Math.ceil(d/2),h=o?"i * 2, rc.y":"rc.y, i * 2",m=i?"rc.z, i * 2":"i * 2, rc.z",v=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],x=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],b="",C="";a&&(u?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:b=`vec4 activation(vec4 x) {
          ${a}
        }`,C="result = activation(result);");let S=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let O="rc.x",F="rc.x";t[0]<n[0]?O=`imod(rc.x, ${t[0]})`:n[0]<t[0]&&(F=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${b}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${O};
        int batchB = ${F};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${m});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${v[0]} * ${x[0]});
          result += (${v[1]} * ${x[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${S}

        ${C}

        setOutput(result);
      }
    `}};var EP={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},L0=class{constructor(t,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=U.assertAndGetBroadcastShape(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var OZ="return a * b;";function V0(e){let{inputs:t,backend:n}=e,{a:r,b:o}=t,i=U.upcastType(r.dtype,o.dtype);if(r.dtype==="complex64"){let a=n.texData.get(r.dataId),u=n.texData.get(o.dataId),c=new L0(EP.REAL,r.shape,o.shape),d=new L0(EP.IMAG,r.shape,o.shape),f=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:o.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:o.shape}],h=n.runWebGLProgram(c,f,"float32"),m=n.runWebGLProgram(d,f,"float32"),v=hi({inputs:{real:h,imag:m},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}if(n.shouldExecuteOnCPU([r,o])){let a=n.texData.get(r.dataId),u=n.texData.get(o.dataId),[c,d]=jY(r.shape,o.shape,a.values,u.values,i),f=n.makeTensorInfo(d,i),h=n.texData.get(f.dataId);return h.values=c,f}let s;return z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new Gi(OZ,r.shape,o.shape):s=new pi(OZ,r.shape,o.shape),n.runWebGLProgram(s,[r,o],i)}var MZ={kernelName:bm,backendName:"webgl",kernelFunc:V0};function FZ(e,t,n){let r=[od(e.shape),...id(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},i=[od(t),...id(t)],s=new ag(i,r),a=!0,u=[r],c=n.runWebGLProgram(s,[o],e.dtype,u,a);return{dataId:c.dataId,shape:t,dtype:c.dtype}}function de(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:i}=r,s=n,a=N.sizeFromShape(o.shape),u=N.inferFromImplicitShape(i,a),c=N.sizeFromShape(u);N.assert(a===c,()=>`The new shape (${u}) has ${c} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);let d=s.texData.get(o.dataId);return d.isPacked&&!Zf(o.shape,u)&&!(d.texture!==null&&Zf(d.shape,u))?FZ(o,u,s):(s.incRef(o.dataId),{dataId:o.dataId,shape:u,dtype:o.dtype})}var PZ={kernelName:ST,backendName:"webgl",kernelFunc:de};var B0=class{constructor(t,n){this.variableNames=["x"];let{windowSize:r,batchSize:o,inSize:i,outSize:s}=t;this.outputShape=[o,s];let a=Math.floor(r/4)*4,u=r%4,c="sumValue += dot(values, ones);";if(n!=null){let f=1/n;c=`sumValue += dot(values * ${N.isInt(f)?f.toPrecision(2):f}, ones);`}let d="";i%r>0&&(d=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${d}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}};var vS=class{constructor(t,n){this.variableNames=["x"];let{windowSize:r,batchSize:o,inSize:i,outSize:s}=t;this.outputShape=[o,s];let a="0.0",u="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",u="min"):n==="max"&&(a="-1.0 / 1e-20",u="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");let d=Math.floor(r/4)*4,f=r%4,h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,m="vec4";n==="all"?(a="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):n==="any"&&(a="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");let v="";i%r>0&&(v=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${v}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${d}; i += 4) {
          int inIdx = inOffset + i;
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${d};
        if (${f===1}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${f===2}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${f===3}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${c});
      }
    `}};function UDe(e){let t=[];for(;t.length===0||t[t.length-1].outSize!==1;){let n=t.length?t[t.length-1].outSize:e[1],r=U.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}function zi(e,t,n,r){let o=UDe(e.shape),i=e;for(let s=0;s<o.length;s++){let{inSize:a,windowSize:u,outSize:c}=o[s],d,f;n==="mean"?d=s===0?new B0({windowSize:u,inSize:a,batchSize:e.shape[0],outSize:c},a):new B0({windowSize:u,inSize:a,batchSize:e.shape[0],outSize:c}):d=new vS({windowSize:u,inSize:a,batchSize:e.shape[0],outSize:c},n),f=i,i=r.runWebGLProgram(d,[i],t),f.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(f)}return i}var xS=class{constructor(t,n){this.variableNames=["A"];let r=new Array(t.length);for(let s=0;s<r.length;s++)r[s]=t[n[s]];this.outputShape=r,this.rank=r.length;let o=et(this.rank),i=GDe(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}};function GDe(e){let t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}var bS=class{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let r=new Array(t.length);for(let d=0;d<r.length;d++)r[d]=t[n[d]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let o=et(this.rank),i=gP("rc",this.rank),s=new Array(this.rank);for(let d=0;d<n.length;d++)s[n[d]]=i[d];let a=`vec2(${s.slice(-2).join()})`,u=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${s.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${u}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${u}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}};function sd(e,t,n){let r=z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bS(e.shape,t):new xS(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function $Z(e,t,n,r){let o=t,i=e.shape.length,s=N.parseAxisParam(o,e.shape),a=s,u=U.getAxesPermutation(a,i),c=u!=null,d=e;c&&(d=sd(e,u,r),a=U.getInnerMostAxes(a.length,i)),U.assertAxesAreInnerMostDims("sum",a,i);let[f,h]=U.computeOutAndReduceShapes(d.shape,a),m=f;n&&(m=U.expandShapeToKeepDim(f,s));let v=N.sizeFromShape(h),b=N.sizeFromShape(e.shape)/v,C=de({inputs:{x:d},attrs:{shape:[b,v]},backend:r}),S=Sf(e.dtype),O=zi(C,S,"sum",r),F=de({inputs:{x:O},attrs:{shape:m},backend:r});return r.disposeIntermediateTensorInfo(C),r.disposeIntermediateTensorInfo(O),c&&r.disposeIntermediateTensorInfo(d),F}function tp(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:s}=r;return $Z(o,i,s,n)}var LZ={kernelName:GT,backendName:"webgl",kernelFunc:tp};function wn(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{perm:i}=r,s=n,a=o.shape.length,u=new Array(a);for(let d=0;d<u.length;d++)u[d]=o.shape[i[d]];let c;if(s.shouldExecuteOnCPU([o])){let f=s.texData.get(o.dataId).values,h=ep(f,o.shape,o.dtype,i,u);c=s.makeTensorInfo(u,o.dtype);let m=s.texData.get(c.dataId);m.values=h}else c=sd(o,i,s);return c}var VZ={kernelName:Nm,backendName:"webgl",kernelFunc:wn};var CP=1e3;function np({a:e,b:t,transposeA:n,transposeB:r,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:u=null}){let c=e.shape.length,d=t.shape.length,f=n?e.shape[c-2]:e.shape[c-1],h=r?t.shape[d-1]:t.shape[d-2],m=n?e.shape[c-1]:e.shape[c-2],v=r?t.shape[d-2]:t.shape[d-1],x=e.shape.slice(0,-2),b=t.shape.slice(0,-2),C=N.sizeFromShape(x),S=N.sizeFromShape(b),F=Zl.assertAndGetBroadcastShape(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([m,v]);N.assert(f===h,()=>`Error in matMul: inner shapes (${f}) and (${h}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);let B=n?[C,f,m]:[C,m,f],H=r?[S,v,h]:[S,h,v],X=de({inputs:{x:e},backend:o,attrs:{shape:B}}),Z=de({inputs:{x:t},backend:o,attrs:{shape:H}}),te=[X,Z],J=Math.max(C,S),ae=n?X.shape[1]:X.shape[2],ye=i!=null,Oe=s!=null,Ye=u==="leakyrelu",Fe=u!=null?kc(u,!0):null,Dt=ye||Oe||Ye||Fe!=null,oe;if((m===1||v===1)&&ae>CP&&Dt===!1){let ie=X,Ce=Z;n&&(ie=wn({inputs:{x:X},backend:o,attrs:{perm:[0,2,1]}}),te.push(ie)),r&&(Ce=wn({inputs:{x:Z},backend:o,attrs:{perm:[0,2,1]}}),te.push(Ce));let ve=v!==1,De=v===1,Te=ie;ve&&(Te=de({inputs:{x:ie},backend:o,attrs:{shape:[J,ae,1]}}),te.push(Te));let ut=v===1?2:1,be=Ce;De&&(be=de({inputs:{x:Ce},backend:o,attrs:{shape:[J,1,ae]}}),te.push(be));let dt=V0({inputs:{a:Te,b:be},backend:o});oe=tp({inputs:{x:dt},backend:o,attrs:{axis:ut,keepDims:!0}}),te.push(dt)}else{let ie=vo(e.dtype,t.dtype),Ce=new cg(B,H,[J,m,v],n,r,ye,Fe,Oe,Ye),ve=[X,Z];if(i!=null&&ve.push(i),Oe&&ve.push(s),Ye){let De=o.makeTensorInfo([],"float32",N.createScalarValue(a,"float32"));ve.push(De),te.push(De)}oe=o.runWebGLProgram(Ce,ve,ie)}let pe=de({inputs:{x:oe},backend:o,attrs:{shape:F}});te.push(oe);for(let ie of te)o.disposeIntermediateTensorInfo(ie);return pe}function jDe(e){let{inputs:t,backend:n,attrs:r}=e,{a:o,b:i,bias:s,preluActivationWeights:a}=t,{transposeA:u,transposeB:c,activation:d,leakyreluAlpha:f}=r;return np({a:o,b:i,transposeA:u,transposeB:c,backend:n,bias:s,preluActivationWeights:a,leakyreluAlpha:f,activation:d})}var BZ={kernelName:r0,backendName:"webgl",kernelFunc:jDe};var UZ="return abs(x);";function zDe(e){let{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){let i=n.texData.get(r.dataId),s=fS(i.values);return n.makeTensorInfo(r.shape,r.dtype,s)}let o;return z().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new fi(r.shape,UZ):o=new qr(r.shape,UZ),n.runWebGLProgram(o,[r],r.dtype)}var GZ={kernelName:Yv,backendName:"webgl",kernelFunc:zDe};var HDe=yr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,WDe=Ne({opSnippet:HDe}),jZ={kernelName:YE,backendName:"webgl",kernelFunc:WDe};var qDe=yr+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,KDe=Ne({opSnippet:qDe}),zZ={kernelName:ZE,backendName:"webgl",kernelFunc:KDe};var HZ="return a + b;",XDe=Ut({opSnippet:HZ,packedOpSnippet:HZ,supportsComplex:!0,cpuKernelImpl:EY}),WZ={kernelName:Gl,backendName:"webgl",kernelFunc:XDe};var wS=class{constructor(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map((i,s)=>`T${s}`);let r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});let o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}};var ES=class{constructor(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((i,s)=>`T${s}`);let r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});let o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}};function CS(e){let{inputs:t,backend:n}=e,r=t;if(r.length===1)return zn({inputs:{x:r[0]},backend:n});if(r.length>z().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let u=Math.floor(r.length/2),c=CS({inputs:r.slice(0,u),backend:n}),d=CS({inputs:r.slice(u),backend:n});return CS({inputs:[c,d],backend:n})}let o=r.map(u=>u.dtype).reduce((u,c)=>vo(u,c)),i=r.map(u=>u.shape),a=z().getBool("WEBGL_PACK")?new ES(r[0].shape,i):new wS(r[0].shape,i);return n.runWebGLProgram(a,r,o)}var qZ={kernelName:QE,backendName:"webgl",kernelFunc:CS};function YDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:s}=r,a=o.shape.length,u=N.parseAxisParam(i,o.shape),c=u,d=U.getAxesPermutation(c,a),f=o;d!=null&&(f=wn({inputs:{x:o},backend:n,attrs:{perm:d}}),c=U.getInnerMostAxes(c.length,a)),U.assertAxesAreInnerMostDims("all",c,a);let[h,m]=U.computeOutAndReduceShapes(f.shape,c),v=N.sizeFromShape(m),x=de({inputs:{x:f},backend:n,attrs:{shape:[-1,v]}}),b=zi(x,x.dtype,"all",n),C;if(s){let S=U.expandShapeToKeepDim(h,u);C=de({inputs:{x:b},backend:n,attrs:{shape:S}})}else C=de({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),d!=null&&n.disposeIntermediateTensorInfo(f),C}var KZ={kernelName:JE,backendName:"webgl",kernelFunc:YDe};function ZDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:s}=r,a=o.shape.length,u=N.parseAxisParam(i,o.shape),c=u,d=U.getAxesPermutation(c,a),f=o;d!=null&&(f=wn({inputs:{x:o},backend:n,attrs:{perm:d}}),c=U.getInnerMostAxes(c.length,a)),U.assertAxesAreInnerMostDims("any",c,a);let[h,m]=U.computeOutAndReduceShapes(f.shape,c),v=N.sizeFromShape(m),x=de({inputs:{x:f},backend:n,attrs:{shape:[-1,v]}}),b=zi(x,x.dtype,"any",n),C;if(s){let S=U.expandShapeToKeepDim(h,u);C=de({inputs:{x:b},backend:n,attrs:{shape:S}})}else C=de({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),d!=null&&n.disposeIntermediateTensorInfo(f),C}var XZ={kernelName:eC,backendName:"webgl",kernelFunc:ZDe};var TS=class{constructor(t,n,r){this.variableNames=["A"];let{windowSize:o,batchSize:i,outSize:s}=t;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];let a=n==="max"?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};var _S=class{constructor(t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,N.assert(t.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);let i=t[t.length-1],s=Math.ceil(i/n);this.outputShape=t.slice(0,-1),s>1&&this.outputShape.push(s),o||this.variableNames.push("bestIndicesA");let a=this.outputShape,u=a.length,c=et(u),d=jn("coords",u),f,h;if(s===1){h=u+1;let Z=et(h);f=`
        ${Z} sourceLocR = ${Z}(${d.join()}, 0);
        ++${d[u-1]};
        ${Z} sourceLocG = ${Z}(${d.join()}, 0);
        ++${d[u-2]};
        ${Z} sourceLocA = ${Z}(${d.join()}, 0);
        --${d[u-1]};
        ${Z} sourceLocB = ${Z}(${d.join()}, 0);
        --${d[u-2]};`}else h=u,f=`
        ${c} sourceLocR = coords;
        ++${d[u-1]};
        ${c} sourceLocG = coords;
        ++${d[u-2]};
        ${c} sourceLocA = coords;
        --${d[u-1]};
        ${c} sourceLocB = coords;
        --${d[u-2]};`;let m=["x","y","z","w","u","v"].slice(0,h),v="."+m[h-1],x=m.map(Z=>"int "+Z),b=jn("sourceLocR",h-1).concat("inIdx.r"),C=jn("sourceLocG",h-1).concat("inIdx.g"),S=jn("sourceLocB",h-1).concat("inIdx.b"),O=jn("sourceLocA",h-1).concat("inIdx.a"),F=r==="max"?"greaterThan":"lessThan",B=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${C.join()}),
                             getBestIndicesAChannel(${S.join()}),
                             getBestIndicesAChannel(${O.join()})));`,H=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${C.join()}) : 0.,
            hasNextRow ? getAChannel(${S.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${O.join()}) : 0.)`,X=o?"":`
      float getBestIndicesAChannel(${x.join()}) {
        return getChannel(getBestIndicesA(${m.join()}),
                                          vec2(${m.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${x.join()}) {
        return getChannel(getA(${m.join()}),
                               vec2(${m.slice(-2).join()}));
      }
      ${X}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${d[u-1]} < ${a[u-1]-1};
        bool hasNextRow = ${d[u-2]} < ${a[u-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${v}, sourceLocG${v},
          sourceLocB${v}, sourceLocA${v}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${H};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${B}
          vec4 candidate = ${H};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${F}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function YZ(e,t,n,r=null){let o=t.shape[0],i=t.shape[1];r!=null&&(o=r.shape[0],i=r.shape[1]);let s=U.computeOptimalWindowSize(i),a={windowSize:s,inSize:i,batchSize:o,outSize:Math.ceil(i/s)},u=new TS(a,n,r==null),c=[t];r!=null&&c.push(r);let d=e.runWebGLProgram(u,c,"int32");if(d.shape[1]===1)return d;let f=YZ(e,t,n,d);return e.disposeIntermediateTensorInfo(d),f}function ZZ(e,t,n,r=null){let o=r!=null?r.shape:t.shape,i=o[o.length-1],s=U.computeOptimalWindowSize(i),a=new _S(o,s,n,r==null),u=r==null?[t]:[t,r],c=e.runWebGLProgram(a,u,"int32");if(c.shape.length===t.shape.length){let d=ZZ(e,t,n,c);return e.disposeIntermediateTensorInfo(c),d}return c}function IS(e,t,n,r){let o=[n];if(U.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!z().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){let i=[],s=e.texData.get(t.dataId),a=s!==null&&s.isPacked,u=t;a&&(u=e.unpackTensor(t),i.push(u));let[c,d]=U.computeOutAndReduceShapes(u.shape,o),f=N.sizeFromShape(d),h=de({inputs:{x:u},backend:e,attrs:{shape:[-1,f]}});i.push(h);let m=YZ(e,h,r);i.push(m);let v=de({inputs:{x:m},backend:e,attrs:{shape:c}});return i.forEach(x=>e.disposeIntermediateTensorInfo(x)),v}return ZZ(e,t,r)}function QDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i}=r,s=N.parseAxisParam(i,o.shape),a=U.getAxesPermutation(s,o.shape.length),u=o,c=[];a!=null&&(u=wn({inputs:{x:o},backend:n,attrs:{perm:a}}),c.push(u),s=U.getInnerMostAxes(s.length,u.shape.length)),U.assertAxesAreInnerMostDims("argMax",[s[0]],u.shape.length);let d=IS(n,u,s[0],"max");return c.forEach(f=>n.disposeIntermediateTensorInfo(f)),d}var QZ={kernelName:tC,backendName:"webgl",kernelFunc:QDe};function JDe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i}=r,s=N.parseAxisParam(i,o.shape),a=U.getAxesPermutation(s,o.shape.length),u=o,c=[];a!=null&&(u=wn({inputs:{x:o},backend:n,attrs:{perm:a}}),c.push(u),s=U.getInnerMostAxes(s.length,u.shape.length)),U.assertAxesAreInnerMostDims("argMin",[s[0]],u.shape.length);let d=IS(n,u,s[0],"min");return c.forEach(f=>n.disposeIntermediateTensorInfo(f)),d}var JZ={kernelName:nC,backendName:"webgl",kernelFunc:JDe};var eNe=yr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,tNe=Ne({opSnippet:eNe}),eQ={kernelName:rC,backendName:"webgl",kernelFunc:tNe};var nNe=yr+"return log(x + sqrt(x * x + 1.0));",rNe=Ne({opSnippet:nNe}),tQ={kernelName:oC,backendName:"webgl",kernelFunc:rNe};var oNe=yr+`
  return atan(x);
`,iNe=Ne({opSnippet:oNe}),nQ={kernelName:iC,backendName:"webgl",kernelFunc:iNe};var sNe=ug+`
  return atan(a, b);
`,aNe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+ji+`
  return result;
`,uNe=Ut({opSnippet:sNe,packedOpSnippet:aNe}),rQ={kernelName:aC,backendName:"webgl",kernelFunc:uNe};var cNe=yr+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,lNe=Ne({opSnippet:cNe}),oQ={kernelName:sC,backendName:"webgl",kernelFunc:lNe};var ja=class{constructor(t,n,r,o=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let s=t.filterWidth,a=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,m=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;let x=n==="avg",b=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,C=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`,S="0.0";if(x||(S="-1.0 / 1e-20"),r){let Z=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${u});
        const ivec2 pads = ivec2(${m}, ${v});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${d}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${Z} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?i?b:C:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let O="max",F=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(F="avgValue / max(count, 1.0)");let B=Math.floor(s/4)*4,H=s%4,X=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${O}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${u});
      const ivec2 pads = ivec2(${m}, ${v});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${B}; wC += 4) {
            int xC = xCCorner + wC * ${d};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              getValue(batch, xR, xC + 2 * ${d}, d),
              getValue(batch, xR, xC + 3 * ${d}, d)
            );

            ${X}
          }

          int xC = xCCorner + ${B};
          if (${H===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${X}
          } else if (${H===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              initializationValue,
              initializationValue
            );

            ${X}
          } else if (${H===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              getValue(batch, xR, xC + 2 * ${d}, d),
              initializationValue
            );

            ${X}
          }
        }
        setOutput(${F});
      }
    `}},ad=class{constructor(t,n,r,o=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let s=t.filterWidth,a=t.strideDepth,u=t.strideHeight,c=t.strideWidth,d=t.dilationDepth,f=t.dilationHeight,h=t.dilationWidth,m=t.effectiveFilterDepth,v=t.effectiveFilterHeight,x=t.effectiveFilterWidth,b=t.padInfo.front,C=t.padInfo.top,S=t.padInfo.left;this.outputShape=t.outShape;let O=n==="avg",F="0.0";if(O||(F="-1.0 / 1e-20"),r){let J=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${u}, ${c});
        const ivec3 pads = ivec3(${b}, ${C}, ${S});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${m};
              wD += ${d}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${v};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${x};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${J} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?i?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${v} * ${x} +
                      wR * ${x} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let B="max",H=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(H="avgValue / max(count, 1.0)");let X=Math.floor(s/4)*4,Z=s%4,te=`
      if (${O}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${B}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${u}, ${c});
      const ivec3 pads = ivec3(${b}, ${C}, ${S});
      const float initializationValue = ${F};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${F});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${m};
            wD += ${d}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${v};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${X}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${te}
            }

            int xC = xCCorner + ${X};
            if (${Z===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${te}
            } else if (${Z===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${te}
            } else if (${Z===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${te}
            }
          }
        }
        setOutput(${H});
      }
    `}};function dNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t;ku(o,"avgPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:u}=r,c=1;N.assert(U.eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let d=U.computePool2DInfo(o.shape,i,s,c,a,u);if(d.filterWidth===1&&d.filterHeight===1&&N.arraysEqual(d.inShape,d.outShape))return zn({inputs:{x:o},backend:n});let f=new ja(d,"avg",!1);return n.runWebGLProgram(f,[o],"float32")}var iQ={kernelName:uC,backendName:"webgl",kernelFunc:dNe};function fNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:i,strides:s,pad:a,dimRoundingMode:u,dataFormat:c}=r,d=[1,1,1],f=U.computePool3DInfo(o.shape,i,s,d,a,u,c),h=new ad(f,"avg",!1);return n.runWebGLProgram(h,[o],"float32")}var sQ={kernelName:cC,backendName:"webgl",kernelFunc:fNe};var SS=class{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;let n=t.filterHeight,r=t.filterWidth,o=t.strideHeight,i=t.strideWidth,s=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=u-1-t.padInfo.top,f=c-1-t.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${d}, ${f});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},DS=class{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;let n=t.filterDepth,r=t.filterHeight,o=t.filterWidth,i=t.strideDepth,s=t.strideHeight,a=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,d=t.dilationWidth,f=t.effectiveFilterDepth,h=t.effectiveFilterHeight,m=t.effectiveFilterWidth,v=f-1-t.padInfo.front,x=h-1-t.padInfo.top,b=m-1-t.padInfo.left,C=1/(n*r*o);this.userCode=`
      const ivec3 pads = ivec3(${v}, ${x}, ${b});
      const float avgMultiplier = float(${C});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${m};
                wC += ${d}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function pNe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,s=i,{filterSize:a,strides:u,pad:c,dimRoundingMode:d}=r,f=[1,1,1],h=U.computePool3DInfo(s.shape,a,u,f,c,d),m=new DS(h);return n.runWebGLProgram(m,[o],s.dtype)}var aQ={kernelName:Jz,backendName:"webgl",kernelFunc:pNe};function hNe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,s=i;ku([o,i],"avgPoolGrad");let{filterSize:a,strides:u,pad:c}=r,d=U.computePool2DInfo(s.shape,a,u,1,c),f=new SS(d);return n.runWebGLProgram(f,[o],s.dtype)}var uQ={kernelName:Qz,backendName:"webgl",kernelFunc:hNe};function mNe(e){let{inputs:t,backend:n,attrs:r}=e,{a:o,b:i}=t,{transposeA:s,transposeB:a}=r;return np({a:o,b:i,transposeA:s,transposeB:a,backend:n})}var cQ={kernelName:lC,backendName:"webgl",kernelFunc:mNe};var NS=class{constructor(t,n,r,o,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],U.assertAndGetBroadcastShape(t,n),U.assertAndGetBroadcastShape(t,r);let a="0.0";o!=null&&(U.assertAndGetBroadcastShape(t,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let u="1.0";i!=null&&(U.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};var AS=class{constructor(t,n,r,o,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],U.assertAndGetBroadcastShape(t,n),U.assertAndGetBroadcastShape(t,r);let a="vec4(0.0)";o!=null&&(U.assertAndGetBroadcastShape(t,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let u="vec4(1.0)";i!=null&&(U.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var gNe=({inputs:e,backend:t,attrs:n})=>{let{x:r,mean:o,variance:i,offset:s,scale:a}=e;N.assert(o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),N.assert(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),N.assert(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);let c=[r,o,i],d=null;s!=null&&(d=s.shape,c.push(s));let f=null;a!=null&&(f=a.shape,c.push(a));let h=z().getBool("WEBGL_PACK_NORMALIZATION")?new AS(r.shape,o.shape,i.shape,d,f,u):new NS(r.shape,o.shape,i.shape,d,f,u);return t.runWebGLProgram(h,c,c[0].dtype)},lQ={kernelName:GC,backendName:"webgl",kernelFunc:gNe};var RS=class{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;let n=et(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let r=yNe(this.rank),o,i=t.map((s,a)=>`sourceLoc.${TP[a]} = start[${a}] + coords.${TP[a]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${r}));
      }
    `}},TP=["x","y","z","w","u","v"];function yNe(e){if(e===1)return"sourceLoc";if(e<=6)return TP.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}var kS=class{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let n=et(this.rank),r=jn("coords",this.rank),o=jn("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,s=`getChannel(getSource(${o.join()}), ${i})`,a=`
      result.x = ${s};
      if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${s};
        --${o[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${t[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${s};
        if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${s};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${t.map((d,f)=>`start[${f}]`).join()});`:t.map((d,f)=>`${o[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${u}
        setOutput(result);
      }
    `}};function vNe(e,t,n,r){let o=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),s=r.texData.get(i.dataId);Object.assign(s,o),s.refCount=1,s.shape=n,s.dtype=e.dtype;let a=li.computeFlatOffset(t,N.computeStrides(e.shape));o.slice&&(a+=o.slice.flatOffset),s.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||e.dataId};let u=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,u+1),i}function za(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:i,size:s}=r,[a,u]=li.parseSliceParams(o,i,s);if(li.assertParamsValid(o,a,u),N.sizeFromShape(u)===0)return n.makeTensorInfo(u,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){let f=n.texData.get(o.dataId),h=eZ(f.values,a,u,o.shape,o.dtype);return n.makeTensorInfo(u,o.dtype,h)}let{isPacked:c}=n.texData.get(o.dataId),d=li.isSliceContinous(o.shape,a,u);if(c||!d){let f=z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kS(u):new RS(u),h=[a];return n.runWebGLProgram(f,[o],o.dtype,h)}return n.uploadToGPU(o.dataId),vNe(o,a,u,n)}var dQ={kernelName:t0,backendName:"webgl",kernelFunc:za};var xNe=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:i,crops:s}=r;N.assert(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let a=i.reduce((S,O)=>S*O),u=U.getReshaped(o.shape,i,a),c=U.getPermuted(u.length,i.length),d=U.getReshapedPermuted(o.shape,i,a),f=U.getSliceBeginCoords(s,i.length),h=U.getSliceSize(d,s,i.length),m=[],v=de({inputs:{x:o},backend:n,attrs:{shape:u}}),x=wn({inputs:{x:v},backend:n,attrs:{perm:c}}),b=de({inputs:{x},backend:n,attrs:{shape:d}}),C=za({inputs:{x:b},backend:n,attrs:{begin:f,size:h}});return m.push(v),m.push(x),m.push(b),m.forEach(S=>n.disposeIntermediateTensorInfo(S)),C},fQ={kernelName:dC,backendName:"webgl",kernelFunc:xNe};function bNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,weights:i}=t,{size:s}=r,a=n.readSync(o.dataId),u=n.readSync(i.dataId),c=dS(a,u,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}var pQ={kernelName:fC,backendName:"webgl",kernelFunc:bNe};var wNe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,ENe=`
  return float(int(a.r) & int(b.r));
`;function CNe(e){let{inputs:t,backend:n}=e,{a:r,b:o}=t,i=z().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=z().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,o])||s===1){let u=n.texData.get(r.dataId).values,c=n.texData.get(o.dataId).values,[d,f]=TY(r.shape,o.shape,u,c,r.dtype),h=n.makeTensorInfo(f,r.dtype),m=n.texData.get(h.dataId);return m.values=d,h}let a;return i?a=new Gi(wNe,r.shape,o.shape,!1):a=new pi(ENe,r.shape,o.shape),n.runWebGLProgram(a,[r,o],r.dtype)}var hQ={kernelName:sm,backendName:"webgl",kernelFunc:CNe};function TNe(e){let{inputs:t,backend:n}=e,{s0:r,s1:o}=t,i=n.readSync(r.dataId),s=n.readSync(o.dataId),a=U.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var mQ={kernelName:pC,backendName:"webgl",kernelFunc:TNe};var _Ne="return float(a != b);",_P=Ut({opSnippet:_Ne,cpuKernelImpl:HY,dtype:"bool"}),gQ={kernelName:wm,backendName:"webgl",kernelFunc:_P};function Oc(e){let{inputs:t,backend:n}=e,{input:r}=t,o=n.texData.get(r.dataId);return zn({inputs:{x:o.complexTensorInfos.real},backend:n})}var yQ={kernelName:e0,backendName:"webgl",kernelFunc:Oc};var INe="return float(int(x));";function vQ(e,t){let n=new qr(e.shape,INe),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function IP(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dtype:i}=r;if(i==="complex64"){if(o.dtype==="complex64")return zn({inputs:{x:o},backend:n});let s=ia(o.shape),a=IP({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),u=hi({inputs:{real:a,imag:s},backend:n});return s.dispose(),n.disposeIntermediateTensorInfo(a),u}if(o.dtype==="complex64"){let s=Oc({inputs:{input:o},backend:n}),a=IP({inputs:{x:s},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(s),a}if(!N.hasEncodingLoss(o.dtype,i)){let s=zn({inputs:{x:o},backend:n});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(n.shouldExecuteOnCPU([o])){let s=n.texData.get(o.dataId).values,[a,u,c]=_Y(s,o.shape,o.dtype,i);return n.makeTensorInfo(a,u,c)}if(i==="int32")return vQ(o,n);if(i==="bool"){let s=n.makeTensorInfo([],"bool",N.getTypedArrayFromDType("bool",1)),u=_P({inputs:{a:o,b:s},backend:n});return n.disposeIntermediateTensorInfo(s),u}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${i}`)}var xQ={kernelName:bf,backendName:"webgl",kernelFunc:IP};var bQ="return ceil(x);",SNe=Ne({opSnippet:bQ,packedOpSnippet:bQ,cpuKernelImpl:IY}),wQ={kernelName:am,backendName:"webgl",kernelFunc:SNe};var OS=class{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};var MS=class{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function DNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{clipValueMin:i,clipValueMax:s}=r,a;z().getBool("WEBGL_PACK_CLIP")?a=new MS(o.shape):a=new OS(o.shape);let u=[[i],[s]];return n.runWebGLProgram(a,[o],o.dtype,u)}var EQ={kernelName:hC,backendName:"webgl",kernelFunc:DNe};var FS=class{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function CQ(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function NNe(e){let{inputs:t,backend:n}=e,{x:r}=t,o=n.texData.get(r.dataId),i=new FS(r.shape),s=[CQ(r,o.complexTensorInfos.real),CQ(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(i,s,s[0].dtype)}var TQ={kernelName:mC,backendName:"webgl",kernelFunc:NNe};var PS=class{constructor(t){this.outputShape=[],this.outputShape=U.computeOutShape(t,1),this.variableNames=t.map((s,a)=>`T${a}`);let n=new Array(t.length-1);n[0]=t[0][1];for(let s=1;s<n.length;s++)n[s]=n[s-1]+t[s][1];let r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<n.length;s++){let a=n[s-1];r.push(`else if (yC < ${n[s]}) setOutput(getT${s}(yR, yC-${a}));`)}let o=n.length,i=n[n.length-1];r.push(`else setOutput(getT${o}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}};var LS=class{constructor(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=U.computeOutShape(t,n);let r=this.outputShape,o=r.length,i=et(o),s=jn("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=t.map((x,b)=>`T${b}`);let u=new Array(t.length-1);u[0]=t[0][n];for(let x=1;x<u.length;x++)u[x]=u[x-1]+t[x][n];let c=a[n],d=a.slice(-2),f=a.join(),h=`if (${c} < ${u[0]}) {
        return getChannel(
            getT0(${f}), vec2(${d.join()}));
        }`;for(let x=1;x<u.length;x++){let b=u[x-1];h+=`
        if (${c} < ${u[x]}  && ${c} >= ${u[x-1]}) {
          return getChannel(
            getT${x}(${$S(a,c,b)}),
            vec2(${$S(d,c,b)}));
        }`}let m=u.length,v=u[u.length-1];h+=`
        return getChannel(
          getT${m}(${$S(a,c,v)}),
          vec2(${$S(d,c,v)}));`,this.userCode=`
      float getValue(${a.map(x=>"int "+x)}) {
        ${h}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[o-1]} = ${s[o-1]} + 1;
        if (${s[o-1]} < ${r[o-1]}) {
          result.g = getValue(${s});
        }

        ${s[o-2]} = ${s[o-2]} + 1;
        if (${s[o-2]} < ${r[o-2]}) {
          result.a = getValue(${s});
        }

        ${s[o-1]} = ${s[o-1]} - 1;
        if (${s[o-2]} < ${r[o-2]} &&
            ${s[o-1]} < ${r[o-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}};function $S(e,t,n){let r=e.indexOf(t);return e.map((i,s)=>s===r?`${i} - ${n}`:i).join()}function rp(e){let{inputs:t,backend:n}=e,{input:r}=t,o=n.texData.get(r.dataId);return zn({inputs:{x:o.complexTensorInfos.imag},backend:n})}var _Q={kernelName:WC,backendName:"webgl",kernelFunc:rp};function lg(e,t,n){let r=e[0].dtype;if(r==="complex64"){let m=e.map(S=>Oc({inputs:{input:S},backend:n})),v=e.map(S=>rp({inputs:{input:S},backend:n})),x=lg(m,t,n),b=lg(v,t,n),C=hi({inputs:{real:x,imag:b},backend:n});return m.forEach(S=>n.disposeIntermediateTensorInfo(S)),v.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),C}let o=n.shouldExecuteOnCPU(e);if(r==="string"&&(o=!0),o){let m=e.map(F=>{let H=[-1,N.sizeFromShape(F.shape.slice(t))];return de({inputs:{x:F},backend:n,attrs:{shape:H}})}),v=m.map(F=>({vals:n.readSync(F.dataId),shape:F.shape})),x=U.computeOutShape(m.map(F=>F.shape),1),b=m[0].shape[0]===1,C=SY(v,x,r,b),S=U.computeOutShape(e.map(F=>F.shape),t),O=n.makeTensorInfo(S,r,C);return m.forEach(F=>n.disposeIntermediateTensorInfo(F)),O}let i=e.filter(m=>N.sizeFromShape(m.shape)>0),s=z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){let m=s?new qr(e[0].shape,Ou):new fi(e[0].shape,Ou);return n.runWebGLProgram(m,e,r)}let a=z().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){let m=[];for(let x=0;x<i.length;x+=a){let b=i.slice(x,x+a);m.push(lg(b,t,n))}let v=lg(m,t,n);for(let x of m)n.disposeIntermediateTensorInfo(x);return v}if(s){let m=new LS(i.map(v=>v.shape),t);return n.runWebGLProgram(m,i,r)}let{tensors2D:u,outShape:c}=ANe(i,t,n),d=new PS(u.map(m=>m.shape)),f=n.runWebGLProgram(d,u,r);u.forEach(m=>n.disposeIntermediateTensorInfo(m));let h=de({inputs:{x:f},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(f),h}function ANe(e,t,n){let r=U.computeOutShape(e.map(i=>i.shape),t);return{tensors2D:e.map(i=>de({inputs:{x:i},attrs:{shape:[-1,N.sizeFromShape(i.shape.slice(t))]},backend:n})),outShape:r}}function SP(e){let{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,i=N.parseAxisParam(o,t[0].shape)[0],s=t.map(c=>c.shape);U.assertParamsConsistent(s,i);let a=U.computeOutShape(t.map(c=>c.shape),i);if(N.sizeFromShape(a)===0)return n.makeTensorInfo(a,t[0].dtype,[]);let u=t.filter(c=>N.sizeFromShape(c.shape)>0);return u.length===1?zn({inputs:{x:u[0]},backend:n}):lg(u,i,n)}var IQ={kernelName:gC,backendName:"webgl",kernelFunc:SP};var dg=class{constructor(t,n=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;let s=t.padInfo.top,a=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,d=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,m=t.filterWidth,v=Math.floor(t.inChannels/4)*4,x=t.inChannels%4,b=t.dataFormat==="channelsLast",C=b?1:2,S=b?2:3,O=b?3:1,F="",B="";r&&(o?F=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?F=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:F=`
          float activation(float x) {
            ${r}
          }
        `,B="result = activation(result);");let H=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${F}

      const ivec2 strides = ivec2(${u}, ${c});
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${O}];

        ivec2 xRCCorner =
            ivec2(coords[${C}], coords[${S}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${d};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${m}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${v}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${x===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${v}) *
                    getW(wR, wC, ${v}, d2);
              } else {
                dotProd +=
                    getX(batch, ${v}, xR, xC) *
                    getW(wR, wC, ${v}, d2);
              }

            } else if (${x===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${v}, d2),
                getW(wR, wC, ${v} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${v}),
                  getX(batch, xR, xC, ${v} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${v}, xR, xC),
                  getX(batch, ${v} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${x===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${v}, d2),
                getW(wR, wC, ${v} + 1, d2),
                getW(wR, wC, ${v} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${v}),
                  getX(batch, xR, xC, ${v} + 1),
                  getX(batch, xR, xC, ${v} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${v}, xR, xC),
                  getX(batch, ${v} + 1, xR, xC),
                  getX(batch, ${v} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${H}
        ${B}
        setOutput(result);
      }
    `}},VS=class{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;let n=t.padInfo.front,r=t.padInfo.top,o=t.padInfo.left,i=t.strideDepth,s=t.strideHeight,a=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,d=t.dilationWidth,f=t.filterDepth,h=t.filterHeight,m=t.filterWidth,v=Math.floor(t.inChannels/4)*4,x=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${s}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${m}; wC++) {
              int xC = xCCorner + wC * ${d};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${v}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${x===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${v}) *
                  getW(wF, wR, wC, ${v}, d2);
              } else if (${x===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${v}),
                  getX(batch, xF, xR, xC, ${v} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${v}, d2),
                  getW(wF, wR, wC, ${v} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${x===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${v}),
                  getX(batch, xF, xR, xC, ${v} + 1),
                  getX(batch, xF, xR, xC, ${v} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${v}, d2),
                  getW(wF, wR, wC, ${v} + 1, d2),
                  getW(wF, wR, wC, ${v} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};var fg=class{constructor(t,n=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=qt(this.outputShape.length);let s=t.padInfo.left,a=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,f=d,h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<d;b++)h+=`
           vec4 xTexelC${b*2};
           int xTexelC${b*2}Ready;
           vec4 xTexelC${b*2+1};
           int xTexelC${b*2+1}Ready;
           vec4 xC${b};`;h+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${t.inChannels}; d1 += 2) {
       `;for(let b=0;b<d;b++)h+=`
           xTexelC${b*2} = vec4(0.0);
           xTexelC${b*2}Ready = 0;
           xTexelC${b*2+1} = vec4(0.0);
           xTexelC${b*2+1}Ready = 0;
           xC${b} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let b=0;b<(f+1)/2;b++){let C=b*2;if(h+=`
           xC = xCCorner + ${C*u};
           `,a===1){if(C<d&&(s%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                   xTexelC${C} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${C}.zw = vec2(0.0);
                   }
                   xTexelC${C}Ready = 1;
                 }
               `,u===1&&C>0?h+=`
                 xC${C} = vec4(xTexelC${C-2}.zw, xTexelC${C}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${C} = vec4(previous.zw, xTexelC${C}.xy);
                   } else {
                     xC${C} = vec4(0.0, 0.0, xTexelC${C}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                   xTexelC${C} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${C}.zw = vec2(0.0);
                   }
                   xTexelC${C}Ready = 1;
                 }

                 xC${C} = xTexelC${C};
                 `,C+1<d)){let S=s%2===0?N.nearestLargerEven(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${S};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                     xTexelC${C+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${C+1}.zw = vec2(0.0);
                     }
                     xTexelC${C+1}Ready = 1;
                   }
                   `,u>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${C+1} = vec4(previous.zw, xTexelC${C+1}.xy);
                     } else {
                      xC${C+1} = vec4(0.0, 0.0, xTexelC${C+1}.xy);
                     }
                     `:h+=`
                     xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.xy);
                     `):S===1?h+=`
                     xC${C+1} = xTexelC${C};
                     `:h+=`
                     xCOffset = xC + ${S};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                       xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${C+1}.zw = vec2(0.0);
                       }
                       xTexelC${C+1}Ready = 1;
                     }

                     xC${C+1} = xTexelC${C+1};
                     `}}else C<d&&(s%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                   xTexelC${C} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${C}.zw = vec2(0.0);
                   }
                   xTexelC${C}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${C+1}Ready == 0) {
                   xTexelC${C+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${C+1}.zw = vec2(0.0);
                   }
                   xTexelC${C+1}Ready = 1;
                 }

                 xC${C} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
               `,C+1<d&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${C+1} = vec4(xTexelC${C+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                   xTexelC${C} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${C}.zw = vec2(0.0);
                   }
                   xTexelC${C}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                   xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${C+1}.zw = vec2(0.);
                   }
                   xTexelC${C+1}Ready = 1;
                 }

                 xC${C} = vec4(
                   xTexelC${C}.xy, xTexelC${C+1}.xy);
               `,C+1<d&&(h+=`
                   xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
                 `)));C<d&&(h+=`
             wTexel = getW(r, ${C}, d1, d2);
             dotProd += xC${C}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${t.inChannels}) {
               dotProd += xC${C}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,C+1<d&&(h+=`
               wTexel = getW(r, ${C+1}, d1, d2);
               dotProd += xC${C+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${t.inChannels}) {
                 dotProd += xC${C+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let m="",v="";r&&(o?m=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?m=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:m=`vec4 activation(vec4 x) {
           ${r}
         }`,v="result = activation(result);");let x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${m}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${x}
         ${v}
         setOutput(result);
       }
     `}};var BS=class{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=qt(this.outputShape.length);let{dataFormat:r}=n,o=kn(),i=r==="channelsLast",s=i?1:2,a=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`,c="";for(let d=0;d<=1;d++)for(let f=0;f<=1;f++)c+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${d};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${d*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${d*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${o.output} = result;
      }
    `}};function US(e,t){let n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&n===1&&e[0]>1?[e[0],1]:null}function GS({x:e,filter:t,convInfo:n,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){let u=e.shape,c=r.texData.get(e.dataId),d=n.inChannels,f=u[0]*u[1]*u[2],h=n.outChannels,m=n.dataFormat==="channelsLast",v=!1,x=!1,b,C=[];if(i!=null){let F=US(i.shape,m);F!=null&&(i=de({inputs:{x:i},backend:r,attrs:{shape:F}}),C.push(i))}if(o!=null){let F=US(o.shape,m);F!=null&&(o=de({inputs:{x:o},backend:r,attrs:{shape:F}}),C.push(o))}if(!((f===1||h===1)&&d>CP)&&c.isPacked&&m&&c.texture!=null&&u[2]%2!==0&&N.arraysEqual(c.shape.slice(-3),u.slice(-3))){let F=u[0]*u[1]*(u[2]+1),B={dataId:e.dataId,shape:[1,F,n.inChannels],dtype:e.dtype},H=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,N.assert(Zf(c.shape,B.shape),()=>`packed reshape ${c.shape} to ${B.shape} isn't free`);let X=de({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});C.push(X);let Z=np({a:B,b:X,backend:r,transposeA:v,transposeB:x,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s}),te=r.texData.get(Z.dataId);N.assert(te.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=H,te.shape=n.outShape,b=zn({inputs:{x:Z},backend:r}),b.shape=n.outShape,C.push(Z)}else{let F=n.outHeight*n.outWidth,B=de({inputs:{x:e},backend:r,attrs:{shape:m?[n.batchSize,F,n.inChannels]:[n.batchSize,n.inChannels,F]}}),H=de({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),X=np({a:m?B:H,b:m?H:B,transposeA:!m,transposeB:x,backend:r,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s});b=de({inputs:{x:X},backend:r,attrs:{shape:n.outShape}}),C.push(B),C.push(H),C.push(X)}for(let F of C)r.disposeIntermediateTensorInfo(F);return b}function jS({x:e,filter:t,convInfo:n,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){let{filterWidth:u,filterHeight:c,inChannels:d,outWidth:f,outHeight:h,dataFormat:m}=n,v=m==="channelsLast",x=u*c*d,b=h*f,C=[n.batchSize,x,b],S=!0,O=!1,F=[];if(i!=null){let pe=US(i.shape,v);pe!=null&&(i=de({inputs:{x:i},backend:r,attrs:{shape:pe}}),F.push(i))}if(o!=null){let pe=US(o.shape,v);pe!=null&&(o=de({inputs:{x:o},backend:r,attrs:{shape:pe}}),F.push(o))}let B=de({inputs:{x:t},backend:r,attrs:{shape:[1,x,N.sizeFromShape(t.shape)/x]}});F.push(B);let H=new BS(C,n),X=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],Z=r.runWebGLProgram(H,[e],"float32",X),te=de({inputs:{x:Z},backend:r,attrs:{shape:C}});F.push(Z),F.push(te);let J=o!=null,ae=i!=null,ye=a==="leakyrelu",Oe=a?kc(a,!0):null,Ye=new cg(v?te.shape:B.shape,v?B.shape:te.shape,v?[n.batchSize,b,n.outChannels]:[n.batchSize,n.outChannels,b],S,O,J,Oe,ae,ye),Fe=v?[te,B]:[B,te];if(o&&Fe.push(o),ae&&Fe.push(i),ye){let pe=r.makeTensorInfo([],"float32",N.createScalarValue(s,"float32"));Fe.push(pe),F.push(pe)}let Dt=r.runWebGLProgram(Ye,Fe,"float32"),oe=de({inputs:{x:Dt},backend:r,attrs:{shape:n.outShape}});F.push(Dt);for(let pe of F)r.disposeIntermediateTensorInfo(pe);return oe}function RNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:s,pad:a,dataFormat:u,dilations:c,dimRoundingMode:d}=r,f=U.convertConv2DDataFormat(u),h=U.computeConv2DInfo(o.shape,i.shape,s,c,a,d,!1,f),m;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))m=GS({x:o,filter:i,convInfo:h,backend:n});else if(h.strideWidth<=2&&f==="channelsLast"&&z().getBool("WEBGL_EXP_CONV")){let x=new fg(h),b=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];m=n.runWebGLProgram(x,[o,i],"float32",b)}else if(z().getBool("WEBGL_CONV_IM2COL"))m=jS({x:o,filter:i,convInfo:h,backend:n});else{let x=new dg(h);m=n.runWebGLProgram(x,[o,i],"float32")}let v=de({inputs:{x:m},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(m),v}var SQ={kernelName:yC,backendName:"webgl",kernelFunc:RNe};var zS=class{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;let n=t.strideHeight,r=t.strideWidth,o=t.padInfo.top,i=t.padInfo.left,s=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},HS=class{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;let n=t.filterHeight,r=t.filterWidth,o=t.strideHeight,i=t.strideWidth,s=t.dataFormat==="channelsLast",a=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=s?1:2,d=s?2:3,f=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${d}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},WS=class{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;let n=t.strideDepth,r=t.strideHeight,o=t.strideWidth,i=t.padInfo.front,s=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${s};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},qS=class{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;let n=t.filterDepth,r=t.filterHeight,o=t.filterWidth,i=t.strideDepth,s=t.strideHeight,a=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,d=o-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${c}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function kNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:s,pad:a,dataFormat:u,dimRoundingMode:c,filterShape:d}=r,f=U.convertConv2DDataFormat(u),h=U.computeConv2DInfo(o.shape,d,s,1,a,c,!1,f),m=new zS(h);return n.runWebGLProgram(m,[o,i],"float32")}var DQ={kernelName:vC,backendName:"webgl",kernelFunc:kNe};var KS=class{constructor(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=qt(this.outputShape.length);let n=t.filterHeight,r=t.filterWidth,o=n-1-t.padInfo.top,i=r-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${t.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${t.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function ONe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{inputShape:s,strides:a,pad:u,dataFormat:c,dimRoundingMode:d}=r,f=U.convertConv2DDataFormat(c),h=U.computeConv2DInfo(s,i.shape,a,1,u,d,!1,f);if(z().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){let m=[[h.strideHeight,h.strideWidth]],v=new KS(h);return n.runWebGLProgram(v,[o,i],"float32",m)}else{let m=new HS(h);return n.runWebGLProgram(m,[o,i],"float32")}}var NQ={kernelName:xC,backendName:"webgl",kernelFunc:ONe};function MNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:s,pad:a,dilations:u}=r,c=U.computeConv3DInfo(o.shape,i.shape,s,u,a),d=new VS(c);return n.runWebGLProgram(d,[o,i],"float32")}var AQ={kernelName:bC,backendName:"webgl",kernelFunc:MNe};function FNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:s,pad:a,filterShape:u}=r,c=U.computeConv3DInfo(o.shape,u,s,1,a),d=new WS(c);return n.runWebGLProgram(d,[o,i],"float32")}var RQ={kernelName:eH,backendName:"webgl",kernelFunc:FNe};function PNe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{pad:s,strides:a,inputShape:u}=r,c=U.computeConv3DInfo(u,i.shape,a,1,s),d=new qS(c);return n.runWebGLProgram(d,[o,i],"float32")}var kQ={kernelName:wC,backendName:"webgl",kernelFunc:PNe};var $Ne=ua+`
  return cos(x);
`,LNe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${ji}
  return result;
`,VNe=Ne({opSnippet:$Ne,packedOpSnippet:LNe}),OQ={kernelName:EC,backendName:"webgl",kernelFunc:VNe};var BNe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,UNe=Ne({opSnippet:BNe}),MQ={kernelName:CC,backendName:"webgl",kernelFunc:UNe};var XS=class{constructor(t,n,r,o,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[s,a,u,c]=t,[d]=n,[f,h]=r;this.outputShape=[d,f,h,c];let m=o==="bilinear"?1:0,[v,x]=[`${a-1}.0`,`${u-1}.0`],[b,C,S]=f>1?[`${(a-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${v} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${v}`],[O,F,B]=h>1?[`${(u-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${x} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${x}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${O});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${C};
        float width_scale = ${F};

        float in_y = ${S};
        if( in_y < 0.0 || in_y > ${v} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${B};
        if( in_x < 0.0 || in_x > ${x} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${m} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var GNe=e=>{let{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:i,boxInd:s}=t,{cropSize:a,method:u,extrapolationValue:c}=r,d=new XS(o.shape,i.shape,a,u,c);return n.runWebGLProgram(d,[o,i,s],"float32")},FQ={kernelName:IC,backendName:"webgl",kernelFunc:GNe};var pg=function(e){return e.Prod="*",e.Sum="+",e}(pg||{}),U0=class{constructor(t,n,r,o){this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let i=this.outputShape.length,s=this.op===pg.Prod?"1.0":"0.0",a=r?s:`getX(${PQ(i,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1],c="",d="";r?(c=o?`end != ${u-1}`:"end != 0",d=o?"end + 1":"end - 1"):(c=o?`end + pow2 < ${u}`:"end >= pow2",d=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${et(i)} coords = getOutputCoords();
        int end = ${$Q(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${d};
          ${$Q(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${PQ(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function PQ(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function $Q(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function YS(e,t,n,r,o,i){let s=t.shape.length,a=U.getAxesPermutation([r],s),u=t;a!=null&&(u=wn({inputs:{x:t},backend:n,attrs:{perm:a}}));let c=U.getInnerMostAxes(1,s)[0];if(c!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);let d=u.shape[c],f=zn({inputs:{x:u},backend:n});for(let h=0;h<=Math.ceil(Math.log2(d))-1;h++){let m=new U0(e,u.shape,!1,i),v=[[h]],x=f;f=n.runWebGLProgram(m,[f],f.dtype,v),n.disposeIntermediateTensorInfo(x)}if(o){let h=new U0(e,u.shape,o,i),m=f;f=n.runWebGLProgram(h,[f],f.dtype),n.disposeIntermediateTensorInfo(m)}if(a!=null){let h=U.getUndoAxesPermutation(a),m=wn({inputs:{x:f},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),m}return f}function jNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,exclusive:s,reverse:a}=r;return YS(pg.Prod,o,n,i,s,a)}var LQ={kernelName:TC,backendName:"webgl",kernelFunc:jNe};function zNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,exclusive:s,reverse:a}=r;return YS(pg.Sum,o,n,i,s,a)}var VQ={kernelName:_C,backendName:"webgl",kernelFunc:zNe};function HNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,weights:i}=t,{size:s,binaryOutput:a}=r;if(o.shape.length===1){let u=n.readSync(o.dataId),c=n.readSync(i.dataId),d=dS(u,c,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,d)}else if(o.shape.length===2){let u=n.bufferSync(o),c=n.bufferSync(i),d=CY(u,c,s,a);return n.makeTensorInfo(d.shape,i.dtype,d.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}var BQ={kernelName:SC,backendName:"webgl",kernelFunc:HNe};var ZS=class{constructor(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function WNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:i,dataFormat:s}=r,a=o.shape[0],u=s==="NHWC"?o.shape[1]:o.shape[2],c=s==="NHWC"?o.shape[2]:o.shape[3],d=s==="NHWC"?o.shape[3]:o.shape[1],f=u*i,h=c*i,m=d/(i*i),v=s==="NHWC"?[a,f,h,m]:[a,m,f,h],x=new ZS(v,i,s);return n.runWebGLProgram(x,[o],o.dtype)}var UQ={kernelName:DC,backendName:"webgl",kernelFunc:WNe};var hg=class{constructor(t,n=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=qt(this.outputShape.length);let s=t.filterHeight,a=t.filterWidth,u=t.outChannels/t.inChannels,c="",d="";r&&(o?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,d="result = activation(result);");let f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${d}
        setOutput(result);
      }
    `}};var mg=class{constructor(t,n=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=qt(this.outputShape.length);let s=t.outChannels/t.inChannels,a=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,d=t.filterHeight,f=t.filterWidth,h=f,m=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let C=0;C<f;C++)m+=`
          vec4 xTexelC${C*2};
          int xTexelC${C*2}Ready;
          vec4 xTexelC${C*2+1};
          int xTexelC${C*2+1}Ready;
          vec4 xC${C};`;m+=`
    for (int r = 0; r < ${d}; r++) {
      `;for(let C=0;C<f;C++)m+=`
          xTexelC${C*2} = vec4(0.0);
          xTexelC${C*2}Ready = 0;
          xTexelC${C*2+1} = vec4(0.0);
          xTexelC${C*2+1}Ready = 0;
          xC${C} = vec4(0.0);`;m+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let C=0;C<(h+1)/2;C++){let S=C*2;if(m+=`
          xC = xCCorner + ${S*c};
          `,u===1){if(S<f&&(a%2===1?(m+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }
              `,c===1&&S>0?m+=`
                xC${S} = vec4(xTexelC${S-2}.zw, xTexelC${S}.xy);
                `:m+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${S} = vec4(previous.zw, xTexelC${S}.xy);
                  } else {
                    xC${S} = vec4(0.0, 0.0, xTexelC${S}.xy);
                  }
                  `):m+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xC${S} = xTexelC${S};
                `,S+1<f)){let O=a%2===0?N.nearestLargerEven(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(m+=`
                  xCOffset = xC + imod(pads[1], 2) + ${O};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                    xTexelC${S+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${S+1}.zw = vec2(0.0);
                    }
                    xTexelC${S+1}Ready = 1;
                  }
                  `,c>1?m+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${S+1} = vec4(previous.zw, xTexelC${S+1}.xy);
                    } else {
                     xC${S+1} = vec4(0.0, 0.0, xTexelC${S+1}.xy);
                    }
                    `:m+=`
                    xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.xy);
                    `):O===1?m+=`
                    xC${S+1} = xTexelC${S};
                    `:m+=`
                    xCOffset = xC + ${O};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                      xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${S+1}.zw = vec2(0.0);
                      }
                      xTexelC${S+1}Ready = 1;
                    }

                    xC${S+1} = xTexelC${S+1};
                    `}}else S<f&&(a%2===1?(m+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.0);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
              `,S+1<f&&(m+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${S+1} = vec4(xTexelC${S+1}.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                  xTexelC${S} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${S}.zw = vec2(0.0);
                  }
                  xTexelC${S}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                  xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${S+1}.zw = vec2(0.);
                  }
                  xTexelC${S+1}Ready = 1;
                }

                xC${S} = vec4(
                  xTexelC${S}.xy, xTexelC${S+1}.xy);
              `,S+1<f&&(m+=`
                  xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
                `)));S<f&&(m+=`
            wTexel = getW(r, ${S}, d1, q);
            dotProd += xC${S} * vec4(wTexel.xz, wTexel.xz);
          `,S+1<f&&(m+=`
              wTexel = getW(r, ${S+1}, d1, q);
              dotProd += xC${S+1} * vec4(wTexel.xz, wTexel.xz);
            `))}m+=`
    }
  `,m+=`
      }
    `;let v="",x="";r&&(o?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:v=`vec4 activation(vec4 x) {
          ${r}
        }`,x="result = activation(result);");let b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${v}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${m}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${b}
        ${x}
        setOutput(result);
      }
    `}};function qNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:s,pad:a,dilations:u,dimRoundingMode:c}=r,d=u;d==null&&(d=[1,1]),N.assert(U.eitherStridesOrDilationsAreOne(s,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${d}'`);let f=U.computeConv2DInfo(o.shape,i.shape,s,d,a,c,!0),h;z().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?h=new mg(f):h=new hg(f);let m=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(h,[o,i],"float32",m)}var GQ={kernelName:NC,backendName:"webgl",kernelFunc:qNe};var QS=class{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;let n=t.strideHeight,r=t.strideWidth,o=t.padInfo.top,i=t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},JS=class{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;let n=t.filterHeight,r=t.filterWidth,o=t.strideHeight,i=t.strideWidth,s=n-1-t.padInfo.top,a=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function KNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,dy:i}=t,{strides:s,dilations:a,pad:u,dimRoundingMode:c,filterShape:d}=r,f=U.computeConv2DInfo(o.shape,d,s,a,u,c,!0),h=new QS(f);return n.runWebGLProgram(h,[o,i],"float32")}var jQ={kernelName:AC,backendName:"webgl",kernelFunc:KNe};function XNe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:i}=t,{strides:s,dilations:a,pad:u,dimRoundingMode:c,inputShape:d}=r,f=U.computeConv2DInfo(d,i.shape,s,a,u,c,!0),h=new JS(f);return n.runWebGLProgram(h,[o,i],"float32")}var zQ={kernelName:RC,backendName:"webgl",kernelFunc:XNe};var e2=class{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function YNe(e){let{inputs:t,backend:n}=e,{x:r}=t,o=[...r.shape,...r.shape],i=N.sizeFromShape(r.shape),s=de({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new e2(i),u=n.runWebGLProgram(a,[s],s.dtype),c=de({inputs:{x:u},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}var HQ={kernelName:kC,backendName:"webgl",kernelFunc:YNe};var t2=class{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;let{inHeight:n,inWidth:r,padInfo:o,strideHeight:i,strideWidth:s,filterHeight:a,filterWidth:u,dilationHeight:c,dilationWidth:d}=t,{top:f,left:h}=o;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${s});
      const ivec2 pads = ivec2(${f}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${d};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function ZNe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i}=t,{strides:s,pad:a,dilations:u}=r,c=U.computeDilation2DInfo(o.shape,i.shape,s,a,"NHWC",u),d,f=new t2(c);d=n.runWebGLProgram(f,[o,i],"float32");let h=de({inputs:{x:d},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(d),h}var WQ={kernelName:OC,backendName:"webgl",kernelFunc:ZNe};function QNe(e){let{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,i=t,{allDims:s,summedDims:a,idDims:u}=U.decodeEinsumEquation(o,i.length);U.checkEinsumDimSizes(s.length,u,i);let{path:c,steps:d}=U.getEinsumComputePath(a,u),f=d.length,h=null,m=s.length,v=[];for(let x=0;x<f;++x){for(let b of d[x]){let{permutationIndices:C,expandDims:S}=U.getEinsumPermutation(m,u[b]),O;U.isIdentityPermutation(C)?O=i[b]:(O=wn({inputs:{x:i[b]},backend:n,attrs:{perm:C}}),v.push(O));let F=O.shape.slice();for(let B=0;B<S.length;++B)F.splice(S[B],0,1);N.arraysEqual(O.shape,F)||(O=de({inputs:{x:O},backend:n,attrs:{shape:F}}),v.push(O)),h===null?h=O:(h=V0({inputs:{a:O,b:h},backend:n}),v.push(h))}x<f-1&&(c[x]>=0&&(h=tp({inputs:{x:h},backend:n,attrs:{axis:c[x]-(s.length-m),keepDims:!1}}),v.push(h)),m--)}for(let x of v)x!==h&&n.disposeIntermediateTensorInfo(x);return h}var qQ={kernelName:FC,backendName:"webgl",kernelFunc:QNe};var JNe="return (x >= 0.0) ? x : (exp(x) - 1.0);",eAe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,tAe=Ne({opSnippet:JNe,packedOpSnippet:eAe}),KQ={kernelName:PC,backendName:"webgl",kernelFunc:tAe};var nAe="return (b >= 0.0) ? a : a * (b + 1.0);",rAe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,oAe=e=>{let{inputs:t,backend:n}=e,{dy:r,y:o}=t,i=z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Gi(rAe,r.shape,o.shape):new pi(nAe,r.shape,o.shape);return n.runWebGLProgram(i,[r,o],r.dtype)},XQ={kernelName:tH,backendName:"webgl",kernelFunc:oAe};var iAe=`
  return vec4(equal(a, b));
`,sAe="return float(a == b);",aAe=Ut({opSnippet:sAe,packedOpSnippet:iAe,dtype:"bool",cpuKernelImpl:DY}),YQ={kernelName:um,backendName:"webgl",kernelFunc:aAe};var uAe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${U.ERF_P};
  float a1 = ${U.ERF_A1};
  float a2 = ${U.ERF_A2};
  float a3 = ${U.ERF_A3};
  float a4 = ${U.ERF_A4};
  float a5 = ${U.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,cAe=Ne({opSnippet:uAe}),ZQ={kernelName:$C,backendName:"webgl",kernelFunc:cAe};var lAe=ua+`
  return exp(x);
`,dAe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,DP=Ne({opSnippet:lAe,packedOpSnippet:dAe,cpuKernelImpl:NY,dtype:"float32"}),QQ={kernelName:cm,backendName:"webgl",kernelFunc:DP};function n2(e){let{inputs:t,attrs:n,backend:r}=e,{dim:o}=n,{input:i}=t,s=i.shape.length,a=i.shape.slice(),u=o;return o<0&&(N.assert(-(s+1)<=o,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),u=s+o+1),a.splice(u,0,1),de({inputs:{x:i},backend:r,attrs:{shape:a}})}var JQ={kernelName:LC,backendName:"webgl",kernelFunc:n2};var eJ="return exp(x) - 1.0;",fAe=Ne({opSnippet:eJ,packedOpSnippet:eJ,cpuKernelImpl:AY}),tJ={kernelName:lm,backendName:"webgl",kernelFunc:fAe};var G0=class{constructor(t,n,r){this.variableNames=["real","imag"];let o=n[1];this.outputShape=n;let i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=r?`${o}.0`:"1.0",a;if(t==="real")a="return real * expR - imag * expI;";else if(t==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function r2(e,t,n){let r=n.texData.get(e.dataId),o=N.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],s=o/i,a=de({inputs:{x:e},backend:n,attrs:{shape:[s,i]}}),u=a.shape,c=new G0("real",u,t),d=new G0("imag",u,t),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],h=n.runWebGLProgram(c,f,"float32"),m=n.runWebGLProgram(d,f,"float32"),v=hi({inputs:{real:h,imag:m},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m);let x=de({inputs:{x:v},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(v),x}function pAe(e){let{inputs:t,backend:n}=e,{input:r}=t;return r2(r,!1,n)}var nJ={kernelName:VC,backendName:"webgl",kernelFunc:pAe};var o2=class{constructor(t,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function Mc(e){let{backend:t,attrs:n}=e,{shape:r,value:o}=n,{dtype:i}=n;if(i=i||N.inferDtype(o),i==="string"){let s=N.getArrayFromDType(i,N.sizeFromShape(r));return s.fill(o),t.makeTensorInfo(r,i,s)}else{let s=new o2(r,o),a=[[o]];return t.runWebGLProgram(s,[],i,a)}}var rJ={kernelName:BC,backendName:"webgl",kernelFunc:Mc};var i2=class{constructor(t){this.variableNames=["Image"],this.outputShape=[];let n=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var oJ={kernelName:UC,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{let{image:n}=e,r=t,o=new i2(n.shape);return r.runWebGLProgram(o,[n],n.dtype)}};var iJ="return floor(x);",hAe=Ne({opSnippet:iJ,packedOpSnippet:iJ,cpuKernelImpl:RY}),sJ={kernelName:dm,backendName:"webgl",kernelFunc:hAe};var mAe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,gAe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,yAe=Ut({opSnippet:mAe,packedOpSnippet:gAe,dtype:"int32"}),aJ={kernelName:fm,backendName:"webgl",kernelFunc:yAe};var s2=class{constructor(t){this.variableNames=["A"];let n=kn(),[r,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};var a2=class{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let n=kn(),[r,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}};var uJ={kernelName:n0,backendName:"webgl",kernelFunc:vAe},gg,NP=z().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function vAe(e){let{inputs:t,backend:n,attrs:r}=e,{pixels:o}=t,{numChannels:i}=r,s=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[u,c]=s?[o.videoWidth,o.videoHeight]:[o.width,o.height],d=[c,u],f=[c,u,i];if(a||s){let x=z().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(gg==null||x!==NP)&&(NP=x,gg=document.createElement("canvas").getContext("2d",{willReadFrequently:NP})),gg.canvas.width=u,gg.canvas.height=c,gg.drawImage(o,0,0,u,c),o=gg.canvas}let h=n.makeTensorInfo(d,"int32");n.texData.get(h.dataId).usage=bo.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);let m=z().getBool("WEBGL_PACK")?new a2(f):new s2(f),v=n.runWebGLProgram(m,[h],"int32");return n.disposeData(h.dataId),v}function xAe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i,bias:s,preluActivationWeights:a}=t,{strides:u,pad:c,dataFormat:d,dilations:f,dimRoundingMode:h,activation:m,leakyreluAlpha:v}=r,x=U.convertConv2DDataFormat(d),b=U.computeConv2DInfo(o.shape,i.shape,u,f,c,h,!1,x),C,S=[],O=s!=null,F=a!=null,B=m==="leakyrelu",H=()=>{let Z=[o,i],te=(J,ae)=>{if(ae==="NCHW"&&J.shape.length===1&&J.shape[0]!==1){let ye=de({inputs:{x:J},backend:n,attrs:{shape:[J.shape[0],1,1]}});return S.push(ye),ye}return J};if(O&&Z.push(te(s,d)),F&&Z.push(te(a,d)),B){let J=n.makeTensorInfo([],"float32",N.createScalarValue(v,"float32"));Z.push(J),S.push(J)}return Z};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))C=GS({x:o,filter:i,convInfo:b,backend:n,bias:s,activation:m,preluActivationWeights:a,leakyreluAlpha:v});else if(b.strideWidth<=2&&x==="channelsLast"&&z().getBool("WEBGL_EXP_CONV")){let Z=m?kc(m,!0):null,te=new fg(b,O,Z,F,B),J=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],ae=H();C=n.runWebGLProgram(te,ae,"float32",J)}else if(z().getBool("WEBGL_CONV_IM2COL"))C=jS({x:o,filter:i,convInfo:b,backend:n,bias:s,activation:m,preluActivationWeights:a,leakyreluAlpha:v});else{let Z=m?kc(m,!1):null,te=new dg(b,O,Z,F,B),J=H();C=n.runWebGLProgram(te,J,"float32")}let X=de({inputs:{x:C},backend:n,attrs:{shape:b.outShape}});return S.push(C),S.forEach(Z=>n.disposeIntermediateTensorInfo(Z)),X}var cJ={kernelName:o0,backendName:"webgl",kernelFunc:xAe};function bAe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,filter:i,bias:s,preluActivationWeights:a}=t,{strides:u,pad:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:m}=r,v=[],x=d;x==null&&(x=[1,1]),N.assert(U.eitherStridesOrDilationsAreOne(u,x),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${x}'`);let b=U.computeConv2DInfo(o.shape,i.shape,u,x,c,f,!0),C=z().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,S=h?kc(h,C):null,O=[o,i],F=s!=null,B=a!=null,H=h==="leakyrelu";if(F&&O.push(s),B&&O.push(a),H){let J=n.makeTensorInfo([],"float32",N.createScalarValue(m,"float32"));O.push(J),v.push(J)}let X;C?X=new mg(b,F,S,B,H):X=new hg(b,F,S,B,H);let Z=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],te=n.runWebGLProgram(X,O,"float32",Z);return v.forEach(J=>n.disposeIntermediateTensorInfo(J)),te}var lJ={kernelName:i0,backendName:"webgl",kernelFunc:bAe};var u2=class{constructor(t,n,r,o){this.sliceDim=t,this.strides=n,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=r;let i=et(r.length),s=`
    int index;`;for(let a=0;a<this.sliceDim;a++)s+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function wAe(e){let{inputs:t,backend:n}=e,{params:r,indices:o}=t,i=o.shape,s=i[i.length-1],a=N.sizeFromShape(r.shape),[u,c,d,f]=U.prepareAndValidate(r,o),h=de({inputs:{x:o},backend:n,attrs:{shape:[c,s]}}),m=de({inputs:{x:r},backend:n,attrs:{shape:[N.sizeFromShape(r.shape)/d,d]}});if(n.shouldExecuteOnCPU([r,o])||r.dtype==="string"){let C=n.readSync(o.dataId),S=n.bufferSync(r),O=kY(C,S,r.dtype,c,s,d,f,r.shape,a);return n.makeTensorInfo(u,r.dtype,O.values)}let v=new u2(s,f,[c,d],r.shape),x=n.runWebGLProgram(v,[m,h],m.dtype),b=de({inputs:{x},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),b}var dJ={kernelName:zC,backendName:"webgl",kernelFunc:wAe};var c2=class{constructor(t,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;let r=et(this.rank),o=EAe(t,2);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}};function EAe(e,t){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<e.length;o++)o===2?r.push("index"):r.push(`${n[o]}`);return r.join()}function AP(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,indices:i}=t,{axis:s,batchDims:a}=r,u=N.parseAxisParam(s,o.shape)[0];if(z().get("DEBUG")){let S=n.readSync(i.dataId),O=o.shape[u];for(let F=0;F<S.length;++F){let B=S[F];N.assert(B<=O-1&&B>=0,()=>`GatherV2: the index value ${B} is not in [0, ${O-1}]`)}}let c=U.segment_util.collectGatherOpShapeInfo(o,i,u,a),d=N.sizeFromShape(i.shape),f=[],h=de({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),m=de({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,d/c.batchSize]}});f.push(h),f.push(m);let v=[c.batchSize,c.outerSize,d/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([o,i])||o.dtype==="string"){let S=n.bufferSync(m),O=n.bufferSync(h),F=OY(O,S,v);return f.forEach(B=>n.disposeIntermediateTensorInfo(B)),n.makeTensorInfo(c.outputShape,F.dtype,F.values)}let x=new c2(h.shape,v),b=n.runWebGLProgram(x,[h,m],h.dtype);f.push(b);let C=de({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return f.forEach(S=>n.disposeIntermediateTensorInfo(S)),C}var fJ={kernelName:jC,backendName:"webgl",kernelFunc:AP};var CAe="return float(a > b);",TAe=`
  return vec4(greaterThan(a, b));
`,_Ae=Ut({opSnippet:CAe,packedOpSnippet:TAe,cpuKernelImpl:MY,dtype:"bool"}),pJ={kernelName:pm,backendName:"webgl",kernelFunc:_Ae};var IAe="return float(a >= b);",SAe=`
  return vec4(greaterThanEqual(a, b));
`,DAe=Ut({opSnippet:IAe,packedOpSnippet:SAe,dtype:"bool",cpuKernelImpl:FY}),hJ={kernelName:hm,backendName:"webgl",kernelFunc:DAe};function NAe(e){let{inputs:t,backend:n}=e,{input:r}=t;return r2(r,!0,n)}var mJ={kernelName:HC,backendName:"webgl",kernelFunc:NAe};var AAe="return float(!isnan(x) && !isinf(x));",RAe=Ne({opSnippet:AAe,dtype:"bool"}),gJ={kernelName:qC,backendName:"webgl",kernelFunc:RAe};var kAe="return float(isinf(x));",OAe=Ne({opSnippet:kAe,dtype:"bool"}),yJ={kernelName:KC,backendName:"webgl",kernelFunc:OAe};var MAe="return float(isnan(x));",FAe=Ne({opSnippet:MAe,dtype:"bool"}),vJ={kernelName:XC,backendName:"webgl",kernelFunc:FAe};var PAe="return float(a < b);",$Ae=`
  return vec4(lessThan(a, b));
`,LAe=Ut({opSnippet:PAe,packedOpSnippet:$Ae,cpuKernelImpl:PY,dtype:"bool"}),xJ={kernelName:mm,backendName:"webgl",kernelFunc:LAe};var VAe="return float(a <= b);",BAe=`
  return vec4(lessThanEqual(a, b));
`,UAe=Ut({opSnippet:VAe,packedOpSnippet:BAe,cpuKernelImpl:$Y,dtype:"bool"}),bJ={kernelName:gm,backendName:"webgl",kernelFunc:UAe};function GAe(e){let{backend:t,attrs:n}=e,{start:r,stop:o,num:i}=n,s=LY(r,o,i);return t.makeTensorInfo([s.length],"float32",s)}var wJ={kernelName:ZC,backendName:"webgl",kernelFunc:GAe};var jAe=ua+`
  return x < 0.0 ? 0./0. : log(x);
`,zAe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,HAe=Ne({opSnippet:jAe,packedOpSnippet:zAe,cpuKernelImpl:VY}),EJ={kernelName:ym,backendName:"webgl",kernelFunc:HAe};var WAe=ua+`
  return log(1.0 + x);
`,qAe=Ne({opSnippet:WAe}),CJ={kernelName:QC,backendName:"webgl",kernelFunc:qAe};var KAe="return float(a >= 1.0 && b >= 1.0);",XAe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,YAe=Ut({opSnippet:KAe,packedOpSnippet:XAe,dtype:"bool"}),TJ={kernelName:JC,backendName:"webgl",kernelFunc:YAe};var ZAe="return float(!(x >= 1.0));",QAe=Ne({opSnippet:ZAe}),_J={kernelName:eT,backendName:"webgl",kernelFunc:QAe};var JAe="return float(a >= 1.0 || b >= 1.0);",eRe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,tRe=Ut({opSnippet:JAe,packedOpSnippet:eRe,dtype:"bool"}),IJ={kernelName:tT,backendName:"webgl",kernelFunc:tRe};var l2=class{constructor(t,n,r,o,i){this.variableNames=["x"],this.outputShape=[];let s=n,a=t[3]-1;this.outputShape=t;let u,c=`float(${r}) + float(${o}) * sum`;i===.5?u=`inversesqrt(${c})`:i===1?u=`1.0/(${c})`:u=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}};var d2=class{constructor(t,n,r,o,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let s=n,a=t[3]-1;this.outputShape=t;let u,c=`float(${r}) + float(${o}) * sum`;i===.5?u=`inversesqrt(${c})`:i===1?u=`1.0/(${c})`:u=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}};var nRe=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:i,bias:s,alpha:a,beta:u}=r,c=z().getBool("WEBGL_PACK_NORMALIZATION")?new d2(o.shape,i,s,a,u):new l2(o.shape,i,s,a,u);return n.runWebGLProgram(c,[o],o.dtype)},SJ={kernelName:nT,backendName:"webgl",kernelFunc:nRe};var f2=class{constructor(t,n,r,o,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=o,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var rRe=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:o,y:i,dy:s}=t,{depthRadius:a,bias:u,alpha:c,beta:d}=r,f=new f2(o.shape,a,u,c,d);return n.runWebGLProgram(f,[o,i,s],o.dtype)},DJ={kernelName:nH,backendName:"webgl",kernelFunc:rRe};function NJ(e,t,n,r){let o=N.sizeFromShape(t),s=N.sizeFromShape(e.shape)/o,a=de({inputs:{x:e},attrs:{shape:[s,o]},backend:r}),u=zi(a,e.dtype,"max",r),c=de({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(u),c}function RP(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:i,keepDims:s}=r,a=o.shape.length,u=N.parseAxisParam(i,o.shape),c=u,d=U.getAxesPermutation(c,a),f=d!=null,h=n.shouldExecuteOnCPU([o]),m=o;if(f){if(h){let O=n.texData.get(m.dataId).values,F=new Array(a);for(let X=0;X<F.length;X++)F[X]=o.shape[d[X]];let B=ep(O,o.shape,o.dtype,d,F);m=n.makeTensorInfo(F,o.dtype);let H=n.texData.get(m.dataId);H.values=B}else m=sd(o,d,n);c=U.getInnerMostAxes(c.length,a)}U.assertAxesAreInnerMostDims("max",c,a);let[v,x]=U.computeOutAndReduceShapes(m.shape,c),b=v;s&&(b=U.expandShapeToKeepDim(v,u));let C;if(h){let O=n.texData.get(m.dataId).values,F=BY(O,N.sizeFromShape(x),b,o.dtype);C=n.makeTensorInfo(b,o.dtype);let B=n.texData.get(C.dataId);B.values=F}else C=NJ(m,x,b,n);return f&&n.disposeIntermediateTensorInfo(m),C}var AJ={kernelName:rT,backendName:"webgl",kernelFunc:RP};var oRe=ug+`
  return max(a, b);
`,iRe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+ji+`
  return result;
`,sRe=Ut({opSnippet:oRe,packedOpSnippet:iRe,cpuKernelImpl:UY}),RJ={kernelName:vm,backendName:"webgl",kernelFunc:sRe};function aRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t;ku(o,"maxPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:u}=r,c=1;N.assert(U.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let d=U.computePool2DInfo(o.shape,i,s,c,a,u);if(d.filterWidth===1&&d.filterHeight===1&&N.arraysEqual(d.inShape,d.outShape))return zn({inputs:{x:o},backend:n});let f=new ja(d,"max",!1);return n.runWebGLProgram(f,[o],o.dtype)}var kJ={kernelName:oT,backendName:"webgl",kernelFunc:aRe};function uRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:i,strides:s,pad:a,dataFormat:u,dimRoundingMode:c}=r,d=[1,1,1],f=U.computePool3DInfo(o.shape,i,s,d,a,c,u),h=new ad(f,"max",!1);return n.runWebGLProgram(h,[o],o.dtype)}var OJ={kernelName:iT,backendName:"webgl",kernelFunc:uRe};var p2=class{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;let n=t.strideHeight,r=t.strideWidth,o=t.dilationHeight,i=t.effectiveFilterHeight,s=t.effectiveFilterWidth,a=i-1-t.padInfo.top,u=s-1-t.padInfo.left,c=i*s-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},h2=class{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;let n=t.strideDepth,r=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=u-1-t.padInfo.front,h=c-1-t.padInfo.top,m=d-1-t.padInfo.left,v=u*c*d-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${h}, ${m});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${v} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${d} +
                  wR * ${d} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function cRe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i}=t,s=i,{filterSize:a,strides:u,pad:c,dimRoundingMode:d}=r,f=[1,1,1],h=U.computePool3DInfo(s.shape,a,u,f,c,d),m=new ad(h,"max",!0),v=n.runWebGLProgram(m,[s],s.dtype),x=new h2(h),b=n.runWebGLProgram(x,[o,v],s.dtype);return n.disposeIntermediateTensorInfo(v),b}var MJ={kernelName:oH,backendName:"webgl",kernelFunc:cRe};function lRe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:o,input:i,output:s}=t,a=i;ku([i,s],"maxPoolGrad");let{filterSize:u,strides:c,pad:d,dimRoundingMode:f}=r,h=U.computePool2DInfo(a.shape,u,c,1,d,f),m=!0,v=new ja(h,"max",m),x=n.runWebGLProgram(v,[a],a.dtype),b=new p2(h),C=n.runWebGLProgram(b,[o,x],a.dtype);return n.disposeIntermediateTensorInfo(x),C}var FJ={kernelName:rH,backendName:"webgl",kernelFunc:lRe};function PJ(e,t,n,r){let o=new ja(n,"max",!1),i=r.runWebGLProgram(o,[e],"float32");o=new ja(n,"max",!0,!0,t);let s=r.runWebGLProgram(o,[e],"float32");return[i,s]}var $J={kernelName:sT,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:o,strides:i,pad:s,includeBatchInIndex:a}=t,u=n;N.assert(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);let c=[1,1];N.assert(U.eitherStridesOrDilationsAreOne(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);let d=U.computePool2DInfo(r.shape,o,i,c,s),[f,h]=PJ(r,a,d,u);return[f,h]}};function LJ(e,t,n,r){let o=N.sizeFromShape(t),s=N.sizeFromShape(e.shape)/o,a=de({inputs:{x:e},attrs:{shape:[s,o]},backend:r}),u=zi(a,"float32","mean",r),c=de({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(u),c}var VJ={kernelName:aT,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{keepDims:o,axis:i}=t,s=n,a=r.shape.length,u=N.parseAxisParam(i,r.shape),c=u,d=U.getAxesPermutation(c,a),f=d!=null,h=s.shouldExecuteOnCPU([r]),m=[],v=r;if(f){if(h){let F=s.texData.get(v.dataId).values,B=new Array(a);for(let Z=0;Z<B.length;Z++)B[Z]=r.shape[d[Z]];let H=ep(F,r.shape,r.dtype,d,B);v=s.makeTensorInfo(B,r.dtype);let X=s.texData.get(v.dataId);X.values=H}else v=sd(r,d,s);m.push(v),c=U.getInnerMostAxes(c.length,a)}U.assertAxesAreInnerMostDims("sum",c,a);let[x,b]=U.computeOutAndReduceShapes(v.shape,c),C=x;o&&(C=U.expandShapeToKeepDim(x,u));let S=LJ(v,b,C,s);for(let O of m)s.disposeIntermediateTensorInfo(O);return S}};function dRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:s}=r,a=o.shape.length,u=N.parseAxisParam(i,o.shape),c=u,d=U.getAxesPermutation(c,a),f=o;d!=null&&(f=wn({inputs:{x:o},backend:n,attrs:{perm:d}}),c=U.getInnerMostAxes(c.length,o.shape.length)),U.assertAxesAreInnerMostDims("min",c,a);let[h,m]=U.computeOutAndReduceShapes(f.shape,c),v=N.sizeFromShape(m),x=de({inputs:{x:f},backend:n,attrs:{shape:[-1,v]}}),b=zi(x,x.dtype,"min",n),C;if(s){let S=U.expandShapeToKeepDim(h,u);C=de({inputs:{x:b},backend:n,attrs:{shape:S}})}else C=de({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),d!=null&&n.disposeIntermediateTensorInfo(f),C}var BJ={kernelName:uT,backendName:"webgl",kernelFunc:dRe};var fRe=ug+`
  return min(a, b);
`,pRe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+ji+`
  return result;
`,hRe=Ut({opSnippet:fRe,packedOpSnippet:pRe,cpuKernelImpl:GY}),UJ={kernelName:xm,backendName:"webgl",kernelFunc:hRe};var m2=class{constructor(t,n,r){this.variableNames=["x"],this.outputShape=n.map((d,f)=>d[0]+t[f]+d[1]);let o=t.length,i=et(o),s=n.map(d=>d[0]).join(","),a=n.map((d,f)=>d[0]+t[f]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),c=r==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}};var g2=class{constructor(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((v,x)=>v[0]+t[x]+v[1]);let o=t.length,i=et(o),s=n.map(v=>v[0]).join(","),a=n.map((v,x)=>v[0]+t[x]).join(","),u=jn("rc",o),c=jn("source",o),d=`${u[o-1]} < ${this.outputShape[o-1]}`,f=o===1?"source":`vec2(${c.slice(-2).join()})`,h=r==="reflect"?0:1,m="";if(o===1){let v=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;m=`
        ${i} rc = outputLoc;
        ${v}
        result[0] = getChannel(getX(${c.join()}), ${f});
        ${u[o-1]} += 1;
        if(${d}) {
          ${v}
          result[1] = getChannel(getX(${c.join()}), ${f});
        }
      `}else{let v=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;m=`
        ${i} rc = outputLoc;
        ${v}
        result[0] = getChannel(getX(${c.join()}), ${f});
        ${u[o-1]} += 1;
        if(${d}) {
          ${v}
          result[1] = getChannel(getX(${c.join()}), ${f});
        }
        rc = outputLoc;
        ${u[o-2]} += 1;
        if(${u[o-2]} < ${this.outputShape[o-2]}) {
          ${v}
          result[2] = getChannel(getX(${c.join()}), ${f});
          ${u[o-1]} += 1;
          if(${d}) {
            ${v}
            result[3] = getChannel(getX(${c.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}};var mRe=({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{paddings:o,mode:i}=n,s=z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new g2(r.shape,o,i):new m2(r.shape,o,i);return t.runWebGLProgram(s,[r],r.dtype)},GJ={kernelName:cT,backendName:"webgl",kernelFunc:mRe};var gRe=`if (b == 0.0) return NAN;
  return mod(a, b);`,yRe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+ji+`
  return result;
`,vRe=Ut({opSnippet:gRe,packedOpSnippet:yRe}),jJ={kernelName:lT,backendName:"webgl",kernelFunc:vRe};var y2=class{constructor(t,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}};var xRe=`
if (a == b) {
  return 1.0;
};
return a / b;`,bRe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,kP=Ut({opSnippet:xRe,packedOpSnippet:bRe,checkOutOfBounds:!0}),zJ={kernelName:MC,backendName:"webgl",kernelFunc:kP};var HJ="return a - b;",OP=Ut({opSnippet:HJ,packedOpSnippet:HJ,supportsComplex:!0,cpuKernelImpl:cZ}),WJ={kernelName:Sm,backendName:"webgl",kernelFunc:OP};function MP(e){let{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:i}=r,s=N.parseAxisParam([i],o.shape),a=RP({inputs:{x:o},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),u=U.expandShapeToKeepDim(a.shape,s),c=de({inputs:{x:a},backend:n,attrs:{shape:u}}),d=OP({inputs:{a:o,b:c},backend:n}),f=DP({inputs:{x:d},backend:n}),h=tp({inputs:{x:f},backend:n,attrs:{axis:s,keepDims:!1}}),m=de({inputs:{x:h},backend:n,attrs:{shape:u}}),v=kP({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}var qJ={kernelName:HT,backendName:"webgl",kernelFunc:MP};function wRe(e){let{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:i,seed:s,normalized:a}=r,u=a?o:MP({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),c=u.shape[0],d=u.shape[1],f=new y2(c,d,i),h=[[s]],m=n.runWebGLProgram(f,[u],"int32",h);return a||n.disposeIntermediateTensorInfo(u),m}var KJ={kernelName:dT,backendName:"webgl",kernelFunc:wRe};var ERe=yr+`
  return -x;
`,CRe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function TRe(e){let{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){let i=n.texData.get(r.dataId),[s,a]=zY(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,s)}let o;return z().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new fi(r.shape,CRe):o=new qr(r.shape,ERe),n.runWebGLProgram(o,[r],r.dtype)}var XJ={kernelName:Qv,backendName:"webgl",kernelFunc:TRe};var _Re=Au.nonMaxSuppressionV3Impl;function IRe(e){U.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:s,iouThreshold:a,scoreThreshold:u}=r,c=n.readSync(o.dataId),d=n.readSync(i.dataId),{selectedIndices:f}=_Re(c,d,s,a,u);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}var YJ={kernelName:fT,backendName:"webgl",kernelFunc:IRe};var SRe=Au.nonMaxSuppressionV4Impl;function DRe(e){U.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:s,iouThreshold:a,scoreThreshold:u,padToMaxOutputSize:c}=r,d=n.readSync(o.dataId),f=n.readSync(i.dataId),{selectedIndices:h,validOutputs:m}=SRe(d,f,s,a,u,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}var ZJ={kernelName:pT,backendName:"webgl",kernelFunc:DRe};var NRe=Au.nonMaxSuppressionV5Impl;function ARe(e){U.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:i}=t,{maxOutputSize:s,iouThreshold:a,scoreThreshold:u,softNmsSigma:c}=r,d=n.readSync(o.dataId),f=n.readSync(i.dataId),h=s,m=a,v=u,x=c,{selectedIndices:b,selectedScores:C}=NRe(d,f,h,m,v,x);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([C.length],"float32",new Float32Array(C))]}var QJ={kernelName:hT,backendName:"webgl",kernelFunc:ARe};var v2=class{constructor(t,n,r,o){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${r}),
                      float(index == coords.y)));
      }
    `}};var RRe=e=>{let{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{dtype:i,depth:s,onValue:a,offValue:u}=r,c=N.sizeFromShape(o.shape),d=new v2(c,s,a,u),f=de({inputs:{x:o},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(d,[f],i);n.disposeIntermediateTensorInfo(f);let m=[...o.shape,s],v=de({inputs:{x:h},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(h),v},JJ={kernelName:gT,backendName:"webgl",kernelFunc:RRe};function j0(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="complex64"){let o=Oc({inputs:{input:r},backend:n}),i=j0({inputs:{x:o},backend:n}),s=rp({inputs:{input:r},backend:n}),a=j0({inputs:{x:s},backend:n}),u=hi({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),u}else return Mc({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}var eee={kernelName:u_,backendName:"webgl",kernelFunc:j0};function tee(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){let o=Oc({inputs:{input:r},backend:n}),i=tee({inputs:{x:o},backend:n}),s=rp({inputs:{input:r},backend:n}),a=j0({inputs:{x:s},backend:n}),u=hi({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),u}else return Mc({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}var nee={kernelName:mT,backendName:"webgl",kernelFunc:tee};function kRe(e){let{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(t.length===1)return n2({inputs:{input:t[0]},backend:n,attrs:{dim:o}});let i=t[0].shape,s=t[0].dtype;t.forEach(d=>{N.assertShapesMatch(i,d.shape,"All tensors passed to stack must have matching shapes"),N.assert(s===d.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],u=t.map(d=>{let f=n2({inputs:{input:d},backend:n,attrs:{dim:o}});return a.push(f),f}),c=SP({inputs:u,backend:n,attrs:{axis:o}});return a.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}var ree={kernelName:yT,backendName:"webgl",kernelFunc:kRe};var x2=class{constructor(t,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,d)=>c[0]+t[d]+c[1]);let o=t.length,i=et(o),s=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+t[d]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}};var b2=class{constructor(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((x,b)=>x[0]+t[b]+x[1]);let o=t.length,i=et(o),s=n.map(x=>x[0]).join(","),a=n.map((x,b)=>x[0]+t[b]).join(","),u=jn("rc",o),c=jn("source",o),d=`${u[o-1]} < ${this.outputShape[o-1]}`,f=o===1?"source":`vec2(${c.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${u[o-1]} += 1;
       if(${d}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${u[o-2]} += 1;
       if(${u[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${u[o-1]} += 1;
         if(${d}) {`],m=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",v="";for(let x=0,b=o===1?2:4;x<b;x++)v+=`
        ${h[x]}
        if (${m}) {
          result[${x}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${x}] = getChannel(getX(${c.join()}), ${f});
        }
      `;v+=o===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${v}
        setOutput(result);
      }
    `}};var FP=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:i,constantValue:s}=r;if(N.sizeFromShape(o.shape)===0){let c=i.map((d,f)=>d[0]+o.shape[f]+d[1]);return Mc({backend:n,attrs:{shape:c,value:s,dtype:o.dtype}})}let a=z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new b2(o.shape,i,s):new x2(o.shape,i,s),u=[[s]];return n.runWebGLProgram(a,[o],o.dtype,u)},oee={kernelName:vT,backendName:"webgl",kernelFunc:FP};var ORe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,MRe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+ji+`
  return result;
`,FRe=Ut({opSnippet:ORe,packedOpSnippet:MRe}),iee={kernelName:xT,backendName:"webgl",kernelFunc:FRe};function PRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:i,keepDims:s}=r,a=o.shape.length,u=[],c=N.parseAxisParam(i,o.shape),d=c,f=U.getAxesPermutation(d,a),h=o;f!=null&&(h=wn({inputs:{x:o},backend:n,attrs:{perm:f}}),d=U.getInnerMostAxes(d.length,a),u.push(h)),U.assertAxesAreInnerMostDims("prod",d,a);let m;if(n.shouldExecuteOnCPU([h])){let v=n.texData.get(h.dataId).values,{outVals:x,outShape:b,outDtype:C}=WY(h.shape,h.dtype,v,d);m=n.makeTensorInfo(b,C,x)}else{let[v,x]=U.computeOutAndReduceShapes(h.shape,d),b=N.sizeFromShape(x),C=de({inputs:{x:h},backend:n,attrs:{shape:[-1,b]}}),S=Sf(o.dtype),O=zi(C,S,"prod",n);m=de({inputs:{x:O},backend:n,attrs:{shape:v}}),u.push(C),u.push(O)}if(s){u.push(m);let v=U.expandShapeToKeepDim(m.shape,c);m=de({inputs:{x:m},backend:n,attrs:{shape:v}})}return u.forEach(v=>n.disposeIntermediateTensorInfo(v)),m}var see={kernelName:Jv,backendName:"webgl",kernelFunc:PRe};function $Re(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:o,paramsDenseValues:i,indices:s}=t,{outputRaggedRank:a}=r,u=o.map(C=>n.readSync(C.dataId)),c=o.map(C=>C.shape),d=n.readSync(i.dataId),f=n.readSync(s.dataId),[h,m,v]=qY(u,c,d,i.shape,i.dtype,f,s.shape,a),x=h.map(C=>n.makeTensorInfo([C.length],"int32",C)),b=n.makeTensorInfo(v,i.dtype,m);return x.concat([b])}var aee={kernelName:wT,backendName:"webgl",kernelFunc:$Re};function LRe(e){let{inputs:t,backend:n}=e,{starts:r,limits:o,deltas:i}=t,s=n.readSync(r.dataId),a=n.readSync(o.dataId),u=n.readSync(i.dataId),[c,d]=KY(s,r.shape,r.dtype,a,o.shape,u,i.shape),f=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([d.length],r.dtype,d);return[f,h]}var uee={kernelName:ET,backendName:"webgl",kernelFunc:LRe};function VRe(e){let{inputs:t,backend:n,attrs:r}=e,{shape:o,values:i,defaultValue:s,rowPartitionTensors:a}=t,{rowPartitionTypes:u}=r,c=n.readSync(o.dataId),d=n.readSync(i.dataId),f=n.readSync(s.dataId),h=a.map(b=>n.readSync(b.dataId)),m=a.map(b=>b.shape),[v,x]=XY(c,o.shape,d,i.shape,i.dtype,f,s.shape,h,m,u);return n.makeTensorInfo(v,i.dtype,x)}var cee={kernelName:CT,backendName:"webgl",kernelFunc:VRe};var PP=e=>{let{backend:t,attrs:n}=e,{start:r,stop:o,step:i,dtype:s}=n,a=YY(r,o,i,s);return t.makeTensorInfo([a.length],s,a)},lee={kernelName:TT,backendName:"webgl",kernelFunc:PP};var BRe="return 1.0 / x;",URe=Ne({opSnippet:BRe}),dee={kernelName:_T,backendName:"webgl",kernelFunc:URe};var GRe=yr+`
  return (x < 0.0) ? 0.0 : x;
`,jRe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,zRe=Ne({opSnippet:GRe,packedOpSnippet:jRe}),fee={kernelName:IT,backendName:"webgl",kernelFunc:zRe};var HRe=yr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,WRe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,qRe=Ne({opSnippet:HRe,packedOpSnippet:WRe}),pee={kernelName:AT,backendName:"webgl",kernelFunc:qRe};var w2=class{constructor(t,n,r,o,i){this.variableNames=["A"],this.outputShape=[];let[s,a,u,c]=t;this.outputShape=[s,n,r,c];let d=[o&&n>1?a-1:a,o&&r>1?u-1:u],f=[o&&n>1?n-1:n,o&&r>1?r-1:r],h;i?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${d[0]/f[0]},
          ${d[1]/f[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};var E2=class{constructor(t,n,r,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,u,c]=t;this.outputShape=[s,n,r,c];let d=[o&&n>1?a-1:a,o&&r>1?u-1:u],f=[o&&n>1?n-1:n,o&&r>1?r-1:r],h;i?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${d[0]/f[0]},
          ${d[1]/f[1]},
          ${d[1]/f[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function KRe(e){let{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:i,halfPixelCenters:s,size:a}=r,[u,c]=a,d=z().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new E2(o.shape,u,c,i,s):new w2(o.shape,u,c,i,s);return n.runWebGLProgram(d,[o],"float32")}var hee={kernelName:NT,backendName:"webgl",kernelFunc:KRe};var C2=class{constructor(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,o,i]=n,[,s,a]=t,u=[r&&s>1?o-1:o,r&&a>1?i-1:i],c=[r&&s>1?s-1:s,r&&a>1?a-1:a],d=u[0]/c[0],f=u[1]/c[1],h=1/d,m=1/f,v=Math.ceil(h)*2+2,x=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${d});
        const float widthScale = float(${f});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${m});

        const int winHeight = int(${v});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function XRe(e){let{inputs:t,backend:n,attrs:r}=e,{images:o,dy:i}=t,{alignCorners:s}=r,a=new C2(i.shape,o.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}var mee={kernelName:sH,backendName:"webgl",kernelFunc:XRe};var T2=class{constructor(t,n,r,o,i){this.variableNames=["A"],this.outputShape=[];let[s,a,u,c]=t;this.outputShape=[s,n,r,c];let d=[o&&n>1?a-1:a,o&&r>1?u-1:u],f=[o&&n>1?n-1:n,o&&r>1?r-1:r],h=o?"0.5":"0.0",m;i?m="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":m="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${d[0]/f[0]},
          ${d[1]/f[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};var _2=class{constructor(t,n,r,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,u,c]=t;this.outputShape=[s,n,r,c];let d=[o&&n>1?a-1:a,o&&r>1?u-1:u],f=[o&&n>1?n-1:n,o&&r>1?r-1:r],h=o?"0.5":"0.0",m;i?m="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":m="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${d[0]/f[0]},
          ${d[1]/f[1]},
          ${d[1]/f[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function YRe(e){let{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:i,halfPixelCenters:s,size:a}=r,[u,c]=a,d=z().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new _2(o.shape,u,c,i,s):new T2(o.shape,u,c,i,s);return n.runWebGLProgram(d,[o],o.dtype)}var gee={kernelName:DT,backendName:"webgl",kernelFunc:YRe};var I2=class{constructor(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,o,i]=n,[,s,a]=t,u=[r&&s>1?o-1:o,r&&a>1?i-1:i],c=[r&&s>1?s-1:s,r&&a>1?a-1:a],d=u[0]/c[0],f=u[1]/c[1],h=1/d,m=1/f,v=Math.ceil(h)*2+2,x=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${d});
        const float widthScale = float(${f});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${m});

        const int winHeight = int(${v});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function ZRe(e){let{inputs:t,backend:n,attrs:r}=e,{images:o,dy:i}=t,{alignCorners:s}=r,a=new I2(i.shape,o.shape,s);return n.runWebGLProgram(a,[i],i.dtype)}var yee={kernelName:iH,backendName:"webgl",kernelFunc:ZRe};var S2=class{constructor(t,n){this.variableNames=["x"];let r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=t,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}let o=a=>n.indexOf(a)!==-1&&t[a]!==1?`${t[a]} - coords[${a}] - 1`:`coords[${a}]`,i=t.map((a,u)=>o(u)).join(","),s=et(r);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}};var D2=class{constructor(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=t;let o=jn("rc",r),i=`${o[r-1]} + 1 < ${this.outputShape[r-1]}`,s=`${o[r-2]} + 1 < ${this.outputShape[r-2]}`,a=et(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(o.slice())};
          if(${i}){
            result.g = ${c(o.slice())};
          }
          if(${s}) {
            result.b = ${d(o.slice())};
            if(${i}) {
              result.a = ${f(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(v){return h(v)}function c(v){return v[r-1]="("+v[r-1]+" + 1)",h(v)}function d(v){return v[r-2]="("+v[r-2]+" + 1)",h(v)}function f(v){return v[r-1]="("+v[r-1]+" + 1)",v[r-2]="("+v[r-2]+" + 1)",h(v)}function h(v){let x=t.map((S,O)=>m(O,v)),b=x.join(","),C=x.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${C}))`}function m(v,x){return n.indexOf(v)!==-1&&t[v]!==1?`${t[v]} - ${x[v]} - 1`:`${x[v]}`}}};function QRe(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:i}=r,s=o.shape.length,a=N.parseAxisParam(i,o.shape);if(s===0)return zn({inputs:{x:o},backend:n});let u=z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new D2(o.shape,a):new S2(o.shape,a);return n.runWebGLProgram(u,[o],o.dtype)}var vee={kernelName:RT,backendName:"webgl",kernelFunc:QRe};var N2=class{constructor(t,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let r=t[1],o=t[2];this.outputShape=t;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var xee={kernelName:l_,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:o,fillValue:i,center:s}=t,a=n,u=new N2(r.shape,i),[c,d]=U.getImageCenter(s,r.shape[1],r.shape[2]),f=[[c,d,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(u,[r],r.dtype,f)}};var JRe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,eke=Ne({opSnippet:JRe}),bee={kernelName:kT,backendName:"webgl",kernelFunc:eke};var tke="return inversesqrt(x);",nke=Ne({opSnippet:tke,cpuKernelImpl:ZY}),wee={kernelName:Em,backendName:"webgl",kernelFunc:nke};var ud=class{constructor(t,n,r,o,i,s,a=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;let c=et(i.length),d=et(s.length),f="";r===1?f="i":r===2&&(f="i, j");let h=`getIndices(${f})`,m="";o===1?m="i":o===2&&(m="i, coords[1]");let v=`getUpdates(${m})`,x="";u&&(x="coords[0], coords[1]");let b=`getDefaultValue(${x})`,C=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${d} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${C};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${v};
              found = true;
            }
          }
          setOutput(mix(${b}, sum, float(found)));
        }
      `}};var A2=class{constructor(t,n,r,o,i,s,a=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;let c=et(i.length),d=et(s.length),f="";r===1?f="i":r===2&&(f="i, j");let h=`getIndices(${f})`,m="";o===1?m="i":o===2&&(m="i, coords[1]");let v=`getUpdates(${m})`,x="";u&&(x="coords[0], coords[1]");let b=`getDefaultValue(${x})`,C=n>1?"strides[j]":"strides",S=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${d} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${t}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${C};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${S};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${v};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${b}, sum, found));
        }
      `}};function rke(e){let{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:i}=t,{shape:s}=r,{sliceRank:a,numUpdates:u,sliceSize:c,strides:d,outputSize:f}=U.calculateShapes(i,o,s),h=[f/c,c];if(f===0)return n.makeTensorInfo(s,o.dtype);let m=de({inputs:{x:o},backend:n,attrs:{shape:[u,a]}}),v=de({inputs:{x:i},backend:n,attrs:{shape:[u,c]}}),x=n.makeTensorInfo([],"float32",new Float32Array([0])),b;z().getBool("WEBGL_PACK")?b=new A2(u,a,m.shape.length,v.shape.length,d,h):b=new ud(u,a,m.shape.length,v.shape.length,d,h);let C=n.runWebGLProgram(b,[v,m,x],v.dtype),S=de({inputs:{x:C},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(x),S}var Eee={kernelName:OT,backendName:"webgl",kernelFunc:rke};var R2=class{constructor(t,n,r,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];let i="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=z().getNumber("WEBGL_VERSION")===2?i:s,u=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function oke(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:o,values:i}=t,{side:s}=r,a=new R2(o.shape[0],o.shape[1],i.shape[1],s),u=[[o.shape[1]]];return n.runWebGLProgram(a,[o,i],"int32",u)}var Cee={kernelName:FT,backendName:"webgl",kernelFunc:oke};var k2=class{constructor(t,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let o,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",o="resRC";else{let a=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],c=[];for(let d=0;d<n.length;d++)c.push(`${a[d]}`),d<t&&u.push(`${a[d]}`);o=u.join(),i=c.join()}let s=et(r);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}};function ike(e){let{inputs:t,backend:n}=e,{condition:r,t:o,e:i}=t,s=new k2(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(s,[r,o,i],vo(o.dtype,i.dtype))}var Tee={kernelName:PT,backendName:"webgl",kernelFunc:ike};var ske=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${U.SELU_SCALEALPHA};
  float scale = ${U.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,ake=Ne({opSnippet:ske}),_ee={kernelName:$T,backendName:"webgl",kernelFunc:ake};var uke=ua+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,cke=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,lke=Ne({opSnippet:uke,packedOpSnippet:cke,cpuKernelImpl:JY}),Iee={kernelName:Cm,backendName:"webgl",kernelFunc:lke};var dke=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,fke=Ne({opSnippet:dke}),See={kernelName:BT,backendName:"webgl",kernelFunc:fke};var pke=ua+`
  return sin(x);
`,hke=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${ji}
  return result;
`,mke=Ne({opSnippet:pke,packedOpSnippet:hke}),Dee={kernelName:LT,backendName:"webgl",kernelFunc:mke};var gke=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,yke=Ne({opSnippet:gke}),Nee={kernelName:VT,backendName:"webgl",kernelFunc:yke};var vke=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,xke=Ne({opSnippet:vke}),Aee={kernelName:UT,backendName:"webgl",kernelFunc:xke};var bke=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:i,paddings:s}=r;N.assert(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let a=i.reduce((C,S)=>C*S),u=[[0,0]];u.push(...s);for(let C=1+i.length;C<o.shape.length;++C)u.push([0,0]);let c=[],d=FP({inputs:{x:o},backend:n,attrs:{paddings:u,constantValue:0}}),f=U.getReshaped(d.shape,i,a,!1),h=U.getPermuted(f.length,i.length,!1),m=U.getReshapedPermuted(d.shape,i,a,!1),v=de({inputs:{x:d},backend:n,attrs:{shape:f}}),x=wn({inputs:{x:v},backend:n,attrs:{perm:h}}),b=de({inputs:{x},backend:n,attrs:{shape:m}});return c.push(d),c.push(v),c.push(x),c.forEach(C=>n.disposeIntermediateTensorInfo(C)),b},Ree={kernelName:jT,backendName:"webgl",kernelFunc:bke};function wke(e){let{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:i,defaultValue:s}=t;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let a=n.readSync(r.dataId),u=n.readSync(o.dataId),c=n.readSync(i.dataId),d=n.readSync(s.dataId)[0],[f,h,m,v,x]=tZ(a,r.shape,r.dtype,u,o.dtype,c,d);return[n.makeTensorInfo(h,r.dtype,f),n.makeTensorInfo([h[0]],o.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map(b=>Number(b)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}var kee={kernelName:WT,backendName:"webgl",kernelFunc:wke};function Eke(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:i}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);let s=Array.from(n.readSync(o.dataId)),a=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),[c,d,f]=nZ(a,r.shape,r.dtype,s,u);return[n.makeTensorInfo(d,r.dtype,c),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}var Oee={kernelName:qT,backendName:"webgl",kernelFunc:Eke};function Cke(e){let{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);let s=n.readSync(r.dataId),a=n.readSync(o.dataId),u=n.readSync(i.dataId),[c,d]=pS(s,r.shape,r.dtype,a,u,!0);return n.makeTensorInfo(d,r.dtype,c)}var Mee={kernelName:KT,backendName:"webgl",kernelFunc:Cke};function Tke(e){let{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);let s=n.readSync(r.dataId),a=n.readSync(o.dataId),u=n.readSync(i.dataId),[c,d]=pS(s,r.shape,r.dtype,a,u);return n.makeTensorInfo(d,r.dtype,c)}var Fee={kernelName:XT,backendName:"webgl",kernelFunc:Tke};function _ke(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:i,defaultValue:s}=t,{outputShape:a}=r,{sliceRank:u,numUpdates:c,sliceSize:d,strides:f,outputSize:h}=U.calculateShapes(i,o,a),m=!1;if(i.dtype==="string"){let C=n.bufferSync(o),S=n.bufferSync(i),O=N.decodeString(n.readSync(s.dataId)[0]),F=QY(C,S,a,h,d,c,u,f,O,m);return n.makeTensorInfo(a,F.dtype,F.values)}let v=new ud(c,u,o.shape.length,i.shape.length,f,[h,1],m),x=n.runWebGLProgram(v,[i,o,s],i.dtype),b=de({inputs:{x},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(x),b}var Pee={kernelName:YT,backendName:"webgl",kernelFunc:_ke};function Ike(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:i,axis:s}=r,a=N.parseAxisParam(s,o.shape)[0],u=U.prepareSplitSize(o,i,a),c=o.shape.length,d=new Array(c).fill(0),f=o.shape.slice();return u.map(h=>{let m=[...f];m[a]=h;let v=za({inputs:{x:o},backend:n,attrs:{begin:d,size:m}});return d[a]+=h,v})}var $ee={kernelName:zT,backendName:"webgl",kernelFunc:Ike};var Lee="return sqrt(x);",Ske=Ne({opSnippet:Lee,packedOpSnippet:Lee,cpuKernelImpl:rZ}),Vee={kernelName:Tm,backendName:"webgl",kernelFunc:Ske};var Dke="return x * x;",Nke=Ne({opSnippet:Dke}),Bee={kernelName:aH,backendName:"webgl",kernelFunc:Nke};var Uee="return (a - b) * (a - b);",Ake=Ut({opSnippet:Uee,packedOpSnippet:Uee}),Gee={kernelName:_m,backendName:"webgl",kernelFunc:Ake};function Rke(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t;if(o.dtype!=="string")throw new Error("Input must be of datatype string");let i=n.readSync(o.dataId),s=U.fromUint8ToStringArray(i),a=oZ(s,"string",r);return n.makeTensorInfo(o.shape,"string",a)}var jee={kernelName:Im,backendName:"webgl",kernelFunc:Rke};function kke({inputs:e,attrs:t,backend:n}){let{x:r}=e,o=yr+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,i=new qr(r.shape,o);return n.runWebGLProgram(i,[r],r.dtype)}var zee={kernelName:c_,backendName:"webgl",kernelFunc:kke};var O2=class{constructor(t,n,r){this.variableNames=["x"],this.outputShape=r;let o=r.length,i=et(r.length),s=et(r.length),a="";if(o===1)a="coords * strides + begin";else{let u=0;a=r.map((c,d)=>(u++,r.length===1?`coords * strides[${d}] + begin[${d}]`:`coords[${u-1}] * strides[${d}] + begin[${d}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${t});
      ${i} strides = ${i}(${n});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}};function Oke(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:i,end:s,strides:a,beginMask:u,endMask:c,ellipsisMask:d,newAxisMask:f,shrinkAxisMask:h}=r,{finalShapeSparse:m,finalShape:v,isIdentity:x,sliceDim0:b,isSimpleSlice:C,begin:S,end:O,strides:F}=li.sliceInfo(o.shape,i,s,a,u,c,d,f,h),B;if(x)B=de({inputs:{x:o},backend:n,attrs:{shape:v}});else if(b||C){N.assert(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);let X=li.computeOutShape(S,O,F),Z=za({inputs:{x:o},backend:n,attrs:{begin:S,size:X}});B=de({inputs:{x:Z},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(Z)}else if(n.shouldExecuteOnCPU([o])){let Z=n.readSync(o.dataId),te=wt(o.shape,o.dtype,Z),J=iZ(m,te,F,S);B=n.makeTensorInfo(v,o.dtype,J.values)}else{let Z=new O2(S,F,m);B=n.runWebGLProgram(Z,[o],o.dtype)}let H=de({inputs:{x:B},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(B),H}var Hee={kernelName:ZT,backendName:"webgl",kernelFunc:Oke};function Mke(e){let{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:i,leftPad:s,rightPad:a,padWidth:u,preserveShortSequences:c}=r,{data:d,dataSplits:f}=t,h=n.readSync(d.dataId),m=n.readSync(f.dataId),[v,x]=sZ(h,m,o,i,s,a,u,c);return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(f.shape,"int32",x)]}var Wee={kernelName:QT,backendName:"webgl",kernelFunc:Mke};function Fke(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:i,delimiter:s}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let a=n.readSync(i.dataId),u=n.readSync(s.dataId)[0],[c,d,f]=aZ(a,u,o),h=d.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(f))]}var qee={kernelName:JT,backendName:"webgl",kernelFunc:Fke};function Pke(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");let s=n.readSync(i.dataId),a=uZ(s,o);return n.makeTensorInfo(i.shape,"int32",a)}var Kee={kernelName:e_,backendName:"webgl",kernelFunc:Pke};var $ke="return tan(x);",Lke=Ne({opSnippet:$ke}),Xee={kernelName:t_,backendName:"webgl",kernelFunc:Lke};var Vke=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,Bke=Ne({opSnippet:Vke}),Yee={kernelName:n_,backendName:"webgl",kernelFunc:Bke};function Uke(e){let{inputs:t,backend:n,attrs:r}=e,{tensor:o,indices:i,updates:s}=t,{}=r,{sliceRank:a,numUpdates:u,sliceSize:c,strides:d,outputSize:f}=U.calculateShapes(s,i,o.shape),h=[f/c,c];if(f===0)return n.makeTensorInfo(o.shape,i.dtype);let m=de({inputs:{x:i},backend:n,attrs:{shape:[u,a]}}),v=de({inputs:{x:s},backend:n,attrs:{shape:[u,c]}}),x=de({inputs:{x:o},backend:n,attrs:{shape:h}}),b=new ud(u,a,m.shape.length,v.shape.length,d,h,!1,!0),C=n.runWebGLProgram(b,[v,m,x],x.dtype),S=de({inputs:{x:C},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(C),S}var Zee={kernelName:MT,backendName:"webgl",kernelFunc:Uke};var M2=class{constructor(t,n){this.variableNames=["A"];let r=new Array(t.length);for(let s=0;s<r.length;s++)r[s]=t[s]*n[s];this.outputShape=r,this.rank=r.length;let o=et(this.rank),i=Gke(t);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}};function Gke(e){let t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<e.length;o++)r.push(`imod(${n[o]}, ${e[o]})`);return r.join()}function $P(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:i}=r;if(o.dtype==="string"||o.shape.length>5){let u=n.readSync(o.dataId),c=o.dtype==="string"?u.map(h=>N.decodeString(h)):u,d=wt(o.shape,o.dtype,c),f=lZ(d,i);return n.makeTensorInfo(f.shape,f.dtype,f.values)}let s=new M2(o.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}var Qee={kernelName:Dm,backendName:"webgl",kernelFunc:$P};var F2=class{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},P2=class{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function op(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function Jee(e){let t=1;for(;t<e;)t*=2;return t}function jke(e){let{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:i,sorted:s}=r,a=z().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=z().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=o.shape,d=c[c.length-1];if(n.shouldExecuteOnCPU([o])||d<a||i>u){let J=n.readSync(o.dataId),[ae,ye]=dZ(J,c,o.dtype,i,s);return[n.makeTensorInfo(ae.shape,ae.dtype,ae.values),n.makeTensorInfo(ye.shape,ye.dtype,ye.values)]}if(i===0)return c[c.length-1]=0,[n.makeTensorInfo(c,o.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(d===1)return[o,Mc({attrs:{shape:c,dtype:"int32",value:0},backend:n})];let f=n.texData.get(o.dataId),h=f!==null&&f.isPacked,m=h?n.unpackTensor(o):o,x=N.sizeFromShape(c)/d,b=de({inputs:{x:m},attrs:{shape:[x,d]},backend:n});h&&op(n,m);let C=Jee(i),S=Jee(d),O=null,F=()=>O===null?[b,b]:[b,O],B=(J,ae,ye)=>{let Oe=F(),Ye=new F2(ye),Dt=[[d],[O===null?1:0],[Number.NEGATIVE_INFINITY],[J],[ae]],oe=O;O=n.runWebGLProgram(Ye,Oe,"int32",Dt),op(n,oe)};for(let J=1;J<C;J*=2){let ae=J*2;for(let ye=J;ye>=1;ye/=2)B(ae,ye,[x,S])}for(let J=S;J>C;J/=2){let ae=F(),ye=new P2([x,J/2]),Ye=[[d],[O===null?1:0],[C]],Fe=O;O=n.runWebGLProgram(ye,ae,"int32",Ye),op(n,Fe);let Dt=C/2,oe=Dt*2;for(let pe=Dt;pe>=1;pe/=2)B(oe,pe,O.shape)}let H=O;O=za({inputs:{x:O},backend:n,attrs:{begin:0,size:[x,i]}}),op(n,H);let X=AP({inputs:{x:b,indices:O},backend:n,attrs:{axis:1,batchDims:1}});op(n,b);let Z=c.slice(0,-1);Z.push(i),H=O,O=de({inputs:{x:O},attrs:{shape:Z},backend:n}),op(n,H);let te=X;return X=de({inputs:{x:X},attrs:{shape:Z},backend:n}),op(n,te),[X,O]}var ete={kernelName:r_,backendName:"webgl",kernelFunc:jke};var $2=class{constructor(t,n,r,o,i,s){this.variableNames=["Image","Transforms"],this.outputShape=s;let a=r==="nearest"?1:2,u;switch(o){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${t}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function zke(e){let{inputs:t,backend:n,attrs:r}=e,{image:o,transforms:i}=t,{interpolation:s,fillMode:a,fillValue:u,outputShape:c}=r,[d,f,h,m]=o.shape,[v,x]=c??[f,h],b=[d,v,x,m],C=new $2(f,h,s,a,u,b);return n.runWebGLProgram(C,[o,i],"float32")}var tte={kernelName:o_,backendName:"webgl",kernelFunc:zke};function Hke(e){let{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:i}=t;ku(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=r.readSync(i.dataId),{outputValues:a,outputShape:u,indices:c}=fZ(s,o,i.shape,i.dtype);return[r.makeTensorInfo(u,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}var nte={kernelName:i_,backendName:"webgl",kernelFunc:Hke};function Wke(e){let{inputs:t,backend:n,attrs:r}=e,{value:o}=t,{axis:i}=r;i<0&&(i+=o.shape.length);let s=o,a=s.shape.length,u=o.shape[i],c=new Array(a-1),d=0;for(let x=0;x<a;x++)x!==i&&(c[d++]=s.shape[x]);let f=[],h=new Array(a).fill(0),m=s.shape.slice();m[i]=1;let v=new Array(u);for(let x=0;x<v.length;x++){h[i]=x;let b=za({inputs:{x:s},backend:n,attrs:{begin:h,size:m}}),C=de({inputs:{x:b},backend:n,attrs:{shape:c}});v[x]=C,f.push(b)}return f.forEach(x=>n.disposeIntermediateTensorInfo(x)),v}var rte={kernelName:s_,backendName:"webgl",kernelFunc:Wke};var L2=class{constructor(t,n){this.variableNames=["x","segmentIds"];let r=t.windowSize,o=t.batchSize,i=t.inSize,s=t.numSegments,a=s*Math.ceil(i/r);this.outputShape=[o,a];let u="0.0",c="sumValue",d=Math.floor(r/4)*4,f=r%4,h=`
        sumValue += dot(values, segFilter);
    `,m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let v="";i%r>0&&(v=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${v}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${d}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${d};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${c});
      }
    `}};function qke(e){let{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:i}=t,{numSegments:s}=r,a=o.shape.length,u=[],c=0,d=U.getAxesPermutation([c],a),f=o;d!=null&&(f=wn({inputs:{x:o},backend:n,attrs:{perm:d}}),u.push(f),c=U.getInnerMostAxes(1,a)[0]);let h=U.segment_util.computeOutShape(f.shape,c,s),m=N.sizeFromShape([f.shape[c]]),v=de({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}});u.push(v);let x=Sf(o.dtype),b=(F,B,H,X,Z)=>{let te=F.shape[0],J=F.shape[1],ae=U.segment_util.segOpComputeOptimalWindowSize(J,Z),ye={windowSize:ae,inSize:J,batchSize:te,numSegments:Z},Oe=new L2(ye,B),Ye=n.compileAndRun(Oe,[F,H],X);if(u.push(Ye),Ye.shape[1]===Z)return Ye;let Fe=PP({backend:n,attrs:{start:0,stop:Z,step:1,dtype:"float32"}}),Dt=$P({inputs:{x:Fe},backend:n,attrs:{reps:[J/ae]}});return u.push(Fe),u.push(Dt),b(Ye,B,Dt,X,Z)},C=b(v,"unsortedSegmentSum",i,x,s),S=de({inputs:{x:C},backend:n,attrs:{shape:h}}),O=S;if(d!=null){u.push(S);let F=U.getUndoAxesPermutation(d);O=wn({inputs:{x:O},backend:n,attrs:{perm:F}})}return u.forEach(F=>n.disposeIntermediateTensorInfo(F)),O}var ote={kernelName:a_,backendName:"webgl",kernelFunc:qke};var Kke=[BZ,GZ,jZ,zZ,WZ,qZ,KZ,XZ,QZ,JZ,eQ,tQ,nQ,rQ,oQ,iQ,sQ,aQ,uQ,cQ,lQ,fQ,pQ,hQ,mQ,xQ,wQ,EQ,AZ,TQ,IQ,SQ,DQ,NQ,AQ,RQ,kQ,OQ,MQ,FQ,LQ,VQ,BQ,UQ,GQ,jQ,zQ,HQ,WQ,qQ,KQ,XQ,YQ,ZQ,QQ,JQ,tJ,nJ,rJ,oJ,sJ,aJ,uJ,cJ,lJ,dJ,fJ,pJ,hJ,NZ,mJ,_Q,gJ,yJ,vJ,RZ,xJ,bJ,wJ,EJ,CJ,TJ,_J,IJ,SJ,DJ,AJ,RJ,kJ,OJ,MJ,FJ,$J,VJ,BJ,UJ,GJ,jJ,KJ,MZ,XJ,YJ,ZJ,QJ,gQ,JJ,nee,ree,oee,iee,kZ,see,aee,uee,cee,lee,yQ,zJ,dee,fee,pee,PZ,hee,mee,gee,yee,vee,xee,bee,wee,Eee,Cee,Tee,_ee,Iee,See,Dee,Nee,dQ,qJ,Aee,Ree,kee,Oee,Mee,Fee,Pee,$ee,Vee,Bee,Gee,jee,zee,Hee,Wee,qee,Kee,WJ,LZ,Xee,Yee,Zee,Qee,ete,tte,VZ,nte,rte,ote,eee];for(let e of Kke)cH(e);var V2=class e{detector;handLandmarker;constructor(){this.initHandposeV2()}initHandpose(){return ne(this,null,function*(){try{let t=S0.MediaPipeHands,n={runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/hands",modelType:"full",maxHands:2};this.detector=yield WK(t,n),console.log("Handpose model loaded successfully")}catch(t){console.error("Error initializing handpose model:",t)}})}initHandposeV2(){return ne(this,null,function*(){let t=yield Sl.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.18/wasm");this.handLandmarker=yield Jo.createFromOptions(t,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",numHands:2,minHandDetectionConfidence:.66,minHandPresenceConfidence:.66,minTrackingConfidence:.66})})}detect(t){return ne(this,null,function*(){if(!this.detector)return null;try{return yield this.detector.estimateHands(t,{flipHorizontal:!0,staticImageMode:!1})}catch(n){return console.error("Error detecting hands:",n),null}})}setCanvasForV2(t){this.handLandmarker&&this.handLandmarker.setOptions({canvas:t})}detectV2(t){return ne(this,null,function*(){if(!this.handLandmarker)return null;try{return yield this.handLandmarker.detectForVideo(t,performance.now())}catch(n){return console.error("Error detecting hands:",n),null}})}static \u0275fac=function(n){return new(n||e)};static \u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"})};var Yke=["video"],Zke=["canvas"],z0=class e{constructor(t){this.handposeService=t}width=320;widthRatio=4;heightRatio=3;height=this.width/this.widthRatio*this.heightRatio;video;canvas;ctx=null;gestureEstimator;handposes$$=new Br([]);handpose$=this.handposes$$.asObservable();videoStream$;gestureDetected=new dr;ngOnInit(){this.gestureEstimator=new ste.GestureEstimator([lc,_l,pu,dc,vv,xv]),this.ctx=this.canvas.nativeElement.getContext("2d")}ngOnChanges(t){t.width&&(this.width=t.width.currentValue,this.height=this.width/this.widthRatio*this.heightRatio)}ngAfterViewInit(){this.initializeVideoStream()}ngOnDestroy(){this.videoStream$&&this.videoStream$.unsubscribe()}processHandsNoise(){let t=[];this.handpose$=this.handposes$$.pipe(ON(1),xt(n=>!t[0]||!t[1]?(t[0]=n.find(r=>r.handedness==="Left"),t[1]=n.find(r=>r.handedness==="Right"),n):(["Left","Right"].forEach((r,o)=>{let i=t[o],s=n.findIndex(u=>u.handedness===r),a=n[s];!i||!a||(of.isHandSimilar(i,a)?n[s]=i:t[o]=a)}),n)),Jn(n=>{this.drawHands(n),console.log(n)}))}initializeVideoStream(){let t={audio:!1,video:{width:this.width,height:this.height,frameRate:{ideal:30}}};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia(t).then(n=>{this.video.nativeElement.srcObject=n,this.video.nativeElement.play(),this.videoStream$=my(this.video.nativeElement,"play").pipe(Do(()=>DN(100)),Jn(()=>{this.handposeService.detectV2(this.video.nativeElement).then(r=>{r?this.handleV2Result(r):console.error("No hand result detected")}).catch(r=>console.error("Error for video stream V2"))})).subscribe()}).catch(n=>{console.error("Error accessing video stream:",n)})}handleResults(t){this.drawVideo();let n=[];for(let r of t){if(r.score<.85){console.log("hand",r.score,r);return}of.drawHandLandmarks(this.canvas.nativeElement,r.keypoints);let o=this.estimateFingerpose(r);if(!o)return;n.push(xe({handpose:o},r))}this.handposes$$.next(n)}handleV2Result(t){if(this.drawVideo(),!t.handedness.length)return;let n=of.convertHandLandmarkResultToHand(t,this.width,this.height);this.drawHands(n);let r=this.estimateGestures(n);r?.length&&this.handposes$$.next(r)}drawVideo(){this.ctx&&(this.ctx.clearRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height),this.ctx.save(),this.ctx.scale(-1,1),this.ctx.drawImage(this.video.nativeElement,-this.width,0,this.width,this.height),this.ctx.restore())}drawHands(t){if(t?.length)for(let n of t)of.drawHandLandmarks(this.canvas.nativeElement,n.keypoints)}estimateGestures(t){if(!t?.length)return;let n=[];for(let r of t){let o=this.estimateFingerpose(r);o&&n.push(vt(xe({},r),{handpose:o}))}return n}estimateFingerpose(t){if(!t.keypoints3D)return;let n=t.keypoints3D.map(o=>{let{x:i,y:s,z:a,name:u}=o;return[i,s,a]}),r=this.gestureEstimator?.estimate(n,9);if(r.gestures?.length){let o=(0,ite.maxBy)(r.gestures,i=>i?.score);return console.log("Gesture detected",o?.name,o?.score),o?.name}}static \u0275fac=function(n){return new(n||e)(lt(V2))};static \u0275cmp=Dr({type:e,selectors:[["app-hand-gestures"]],viewQuery:function(n,r){if(n&1&&(Py(Yke,7),Py(Zke,7)),n&2){let o;Zd(o=Qd())&&(r.video=o.first),Zd(o=Qd())&&(r.canvas=o.first)}},inputs:{width:"width"},outputs:{gestureDetected:"gestureDetected"},features:[_a],decls:4,vars:4,consts:[["video",""],["canvas",""],["autoplay","",2,"display","none",3,"width","height"],[3,"width","height"]],template:function(n,r){n&1&&Nr(0,"video",2,0)(2,"canvas",3,1),n&2&&(Sn("width",r.width)("height",r.height),un(2),Sn("width",r.width)("height",r.height))},encapsulation:2})};function Qke(e,t){if(e&1){let n=ml();We(0,"div",2)(1,"h2"),Et(2,"Congratulations"),Ke(),We(3,"p"),Et(4,"You have won!"),Ke(),We(5,"button",3),ho("click",function(){ul(n);let o=js();return cl(o.nextLevel())}),Et(6,"Next"),Ke()()}}var cd=class e{constructor(t){this.router=t}handGesturesComponent;gameSetting;progress=0;isWon=!1;ngOnChanges(t){console.log(t)}ngAfterViewInit(){this.handGesturesComponent?.handpose$?.pipe(xt(t=>t.map(n=>n.handpose))).pipe(AN()).subscribe(t=>{if(!this.gameSetting.requiredGestures.length||this.isWon)return;let n=this.gameSetting.requiredGestures[this.progress];t.some(r=>n.gestures.includes(r))&&(this.progress++,console.log(this.progress)),this.progress===this.gameSetting.requiredGestures.length&&(this.isWon=!0)})}nextLevel(){this.gameSetting.nextStepLink&&this.router.navigate([this.gameSetting.nextStepLink])}static \u0275fac=function(n){return new(n||e)(lt(Ro))};static \u0275cmp=Dr({type:e,selectors:[["app-sign-language-game"]],viewQuery:function(n,r){if(n&1&&Py(z0,5),n&2){let o;Zd(o=Qd())&&(r.handGesturesComponent=o.first)}},inputs:{gameSetting:"gameSetting"},features:[_a],decls:2,vars:2,consts:[[3,"width"],["class","glass fixed-in-center won-container",4,"ngIf"],[1,"glass","fixed-in-center","won-container"],[3,"click"]],template:function(n,r){n&1&&(Nr(0,"app-hand-gestures",0),Ao(1,Qke,7,0,"div",1)),n&2&&(Sn("width",640),un(),Sn("ngIf",r.isWon))},dependencies:[Qo,du,z0],styles:[".fixed-in-center[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}.won-container[_ngcontent-%COMP%]{width:640px;height:480px;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}"]})};function Jke(e,t){if(e&1){let n=ml();We(0,"div",3)(1,"h1"),Et(2,'"Hello Friend"'),Ke(),We(3,"p"),Et(4,"This level focuses on daily friendly greetings, using sign language to take the first step in \u201Cconversation\u201D with the deaf community and convey kindness."),Ke(),We(5,"button",4),ho("click",function(){ul(n);let o=js();return cl(o.startGame())}),Et(6,"Start"),Ke()()}}var B2=class e{isEntered=!1;gameSetting={levelTitle:"Hello Friend",nextStepLink:"/thank-you",requiredGestures:[{gestures:["point_to_other"],word:"Ni"},{gestures:["thumbs_up"],word:"Hao"}]};startGame(){this.isEntered=!0}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Dr({type:e,selectors:[["app-hello-friend"]],decls:3,vars:4,consts:[["class","glass-container",4,"ngIf"],[1,"game-container"],[3,"gameSetting"],[1,"glass-container"],[3,"click"]],template:function(n,r){n&1&&(Ao(0,Jke,7,0,"div",0),We(1,"div",1),Nr(2,"app-sign-language-game",2),Ke()),n&2&&(Sn("ngIf",!r.isEntered),un(),us("hide",!r.isEntered),un(),Sn("gameSetting",r.gameSetting))},dependencies:[cd,Qo,du],encapsulation:2})};function eOe(e,t){if(e&1){let n=ml();We(0,"div",3)(1,"h1"),Et(2,'"Thank You"'),Ke(),We(3,"p"),Et(4,"This is designed to guide players to learn to express gratitude and understand the importance of being grateful for others' help in communicating with the deaf."),Ke(),We(5,"button",4),ho("click",function(){ul(n);let o=js();return cl(o.startGame())}),Et(6,"Start"),Ke()()}}var U2=class e{isEntered=!1;gameSetting={levelTitle:"Thank You",nextStepLink:"/come-together",requiredGestures:[{gestures:["thumbs_up"],word:"Xie"},{gestures:["half_thumb_up"],word:"Xie"},{gestures:["thumbs_up"],word:"Xie"},{gestures:["half_thumb_up"],word:"Xie"}]};startGame(){this.isEntered=!0}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Dr({type:e,selectors:[["app-thank-you"]],decls:3,vars:4,consts:[["class","glass-container",4,"ngIf"],[1,"game-container"],[3,"gameSetting"],[1,"glass-container"],[3,"click"]],template:function(n,r){n&1&&(Ao(0,eOe,7,0,"div",0),We(1,"div",1),Nr(2,"app-sign-language-game",2),Ke()),n&2&&(Sn("ngIf",!r.isEntered),un(),us("hide",!r.isEntered),un(),Sn("gameSetting",r.gameSetting))},dependencies:[cd,Qo,du],encapsulation:2})};function tOe(e,t){if(e&1){let n=ml();We(0,"div",3)(1,"h1"),Et(2,'"Come Together"'),Ke(),We(3,"p"),Et(4,"This level conveys positive energy and the willingness to move forward together, showing support and encouragement for the deaf community."),Ke(),We(5,"button",4),ho("click",function(){ul(n);let o=js();return cl(o.startGame())}),Et(6,"Start"),Ke()()}}var G2=class e{isEntered=!1;gameSetting={levelTitle:"Come Together",nextStepLink:"/leaderboard",requiredGestures:[{gestures:["point_to_other"],word:"Ni"},{gestures:["two_fingers"],word:"Chi"},{gestures:["two_fingers"],word:"Fan"},{gestures:["point_diagonal_up"],word:"le"},{gestures:["point_diagonal_down"],word:"ma"},{gestures:["point_diagonal_up"],word:"le"},{gestures:["point_diagonal_down"],word:"ma"}]};startGame(){this.isEntered=!0}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Dr({type:e,selectors:[["app-come-together"]],decls:3,vars:4,consts:[["class","glass-container",4,"ngIf"],[1,"game-container"],[3,"gameSetting"],[1,"glass-container"],[3,"click"]],template:function(n,r){n&1&&(Ao(0,tOe,7,0,"div",0),We(1,"div",1),Nr(2,"app-sign-language-game",2),Ke()),n&2&&(Sn("ngIf",!r.isEntered),un(),us("hide",!r.isEntered),un(),Sn("gameSetting",r.gameSetting))},dependencies:[cd,Qo,du],encapsulation:2})};function nOe(e,t){if(e&1&&(We(0,"tr")(1,"td"),Et(2),Ke(),We(3,"td"),Et(4),ek(5,"number"),Ke(),We(6,"td"),Et(7),ek(8,"date"),Ke()()),e&2){let n=t.$implicit,r=t.index;un(2),$y("#",r+1,""),un(2),$y("",tk(5,3,n.time,"1.1-1"),"s"),un(3),Jd(tk(8,6,n.date,"short"))}}function rOe(e,t){e&1&&(We(0,"tr")(1,"td",6),Et(2,"No records yet"),Ke()())}function oOe(e,t){if(e&1&&(We(0,"div",3)(1,"h2"),Et(2),Ke(),We(3,"table")(4,"thead")(5,"tr")(6,"th"),Et(7,"Rank"),Ke(),We(8,"th"),Et(9,"Time"),Ke(),We(10,"th"),Et(11,"Date"),Ke()()(),We(12,"tbody"),Ao(13,nOe,9,9,"tr",4)(14,rOe,3,0,"tr",5),Ke()()()),e&2){let n=t.$implicit,r=js();un(2),Jd(n),un(11),Sn("ngForOf",r.leaderboard[n]),un(),Sn("ngIf",!(r.leaderboard[n]!=null&&r.leaderboard[n].length))}}var j2=class e{leaderboard={};levels=[];ngOnInit(){for(let t=0;t<localStorage.length;t++){let n=localStorage.key(t);if(n?.startsWith("leaderboard_")){let r=n.replace("leaderboard_",""),o=JSON.parse(localStorage.getItem(n)||"[]");this.leaderboard[r]=o.map(i=>vt(xe({},i),{date:new Date(i.date)})),this.levels.push(r)}}}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Dr({type:e,selectors:[["app-leaderboard"]],decls:5,vars:1,consts:[[1,"leaderboard-container"],[1,"level-boards"],["class","level-board",4,"ngFor","ngForOf"],[1,"level-board"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","3"]],template:function(n,r){n&1&&(We(0,"div",0)(1,"h1"),Et(2,"Leaderboard"),Ke(),We(3,"div",1),Ao(4,oOe,15,3,"div",2),Ke()()),n&2&&(un(4),Sn("ngForOf",r.levels))},dependencies:[Qo,gh,du,K6,q6],styles:[".leaderboard-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.leaderboard-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.level-boards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.level-board[_ngcontent-%COMP%]{background:#ffffff1a;border-radius:8px;padding:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.level-board[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:1.5em}.level-board[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.level-board[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .level-board[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:center;border-bottom:1px solid rgba(255,255,255,.1)}.level-board[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;background:#ffffff0d}.level-board[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.level-board[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#ffffff0d}@media (max-width: 768px){.level-boards[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var ate=[{path:"",redirectTo:"welcome",pathMatch:"full"},{path:"welcome",component:Zw},{path:"hello-friend",component:B2},{path:"thank-you",component:U2},{path:"come-together",component:G2},{path:"leaderboard",component:j2}];var ute={providers:[_6({eventCoalescing:!0}),u8(ate),y5(g5())]};var iOe=()=>({exact:!0});function sOe(e,t){if(e&1&&(We(0,"li",2)(1,"div",3)(2,"div",4),Nr(3,"div",5),We(4,"span",6),Et(5),Ke()(),We(6,"span",7),Et(7),Ke()()()),e&2){let n=t.$implicit;Sn("routerLink",n.route)("routerLinkActiveOptions",nw(4,iOe)),un(5),Jd(n.number),un(2),Jd(n.text)}}var z2=class e{navigationClicked=new dr;navItems=[{number:1,text:"Welcome",route:"/welcome"},{number:2,text:'"Hello, Friend"',route:"/hello-friend"},{number:3,text:'"Thank you"',route:"/thank-you"},{number:4,text:'"Come on, Together"',route:"/come-together"},{number:5,text:"Leaderboard",route:"/leaderboard"}];static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Dr({type:e,selectors:[["app-navigation"]],outputs:{navigationClicked:"navigationClicked"},decls:3,vars:1,consts:[[1,"space-nav"],["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngFor","ngForOf"],["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],[1,"nav-item"],[1,"marker"],[1,"diamond"],[1,"number"],[1,"text"]],template:function(n,r){n&1&&(We(0,"nav",0)(1,"ul"),Ao(2,sOe,8,5,"li",1),Ke()()),n&2&&(un(2),Sn("ngForOf",r.navItems))},dependencies:[Qo,gh,jw,Vw,s8],styles:['.space-nav[_ngcontent-%COMP%]{position:fixed;left:40px;top:50%;transform:translateY(-50%);z-index:100;padding:10px}.space-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;position:relative}.space-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:after{content:"";position:absolute;left:22px;top:-20px;bottom:-20px;width:0;border-left:1px dashed rgba(0,0,0,.2);z-index:-1}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:45px 0;position:relative}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;cursor:pointer;transition:all .3s ease}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{position:relative;width:45px;height:45px;display:flex;align-items:center;justify-content:center;z-index:1}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid rgba(0,0,0,.5);transform:rotate(45deg);transition:all .3s ease;position:relative}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]:after{content:"";position:absolute;width:8px;height:8px;background:#00000080;top:50%;left:50%;transform:translate(-50%,-50%);transition:all .3s ease}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:14px;color:#000000b3;letter-spacing:1px;transition:all .3s ease;white-space:nowrap;opacity:0;visibility:hidden;transform:translate(-20px);position:absolute;left:45px}.space-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{position:absolute;font-size:13px;color:#000000b3;transition:all .3s ease;opacity:0;visibility:hidden;z-index:2}.space-nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#8a2be2}.space-nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]{border-color:#8a2be2;background:transparent}.space-nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .diamond[_ngcontent-%COMP%]:after{background:#8a2be2}.space-nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{color:#8a2be2}.space-nav[_ngcontent-%COMP%]:hover   li[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translate(0)}.space-nav[_ngcontent-%COMP%]:hover   li[_ngcontent-%COMP%]:hover   .diamond[_ngcontent-%COMP%]{border-color:#8a2be2;background:transparent}.space-nav[_ngcontent-%COMP%]:hover   li[_ngcontent-%COMP%]:hover   .diamond[_ngcontent-%COMP%]:after{background:transparent;visibility:hidden}.space-nav[_ngcontent-%COMP%]:hover   li[_ngcontent-%COMP%]:hover   .number[_ngcontent-%COMP%]{opacity:1;visibility:visible;color:#8a2be2}@media (max-width: 768px){.space-nav[_ngcontent-%COMP%]{left:20px}.space-nav[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px}}']})};var aOe=()=>[1,2,3,4,5,6,7];function uOe(e,t){if(e&1&&Nr(0,"div",13),e&2){let n=js();us("animate",n.isAnimating)}}var H2=class e{constructor(t,n,r,o){this.el=t;this.renderer=n;this.platformId=r;this.router=o;this.router.events.subscribe(i=>{i instanceof hs&&this.startAnimation()}),vk(this.platformId)&&(this.element=this.el.nativeElement.querySelector(".glass-container"),this.renderer.listen("document","mousemove",i=>{window.requestAnimationFrame(()=>{this.transformElement(i.clientX,i.clientY)})}),this.renderer.listen("document","mouseleave",()=>{this.element&&this.renderer.setStyle(this.element,"transform","rotateX(0) rotateY(0)")}))}isAnimating=!1;name;multiple=25;element;startAnimation(){this.isAnimating=!0,setTimeout(()=>{this.isAnimating=!1},2e3)}transformElement(t,n){if(!this.element)return;let r=this.element.getBoundingClientRect(),o=-(n-r.y-r.height/2)/this.multiple,i=(t-r.x-r.width/2)/this.multiple;o=o>10?10:o,i=i>10?10:i,o=o<-10?-10:o,i=i<-10?-10:i,this.renderer.setStyle(this.element,"transform",`rotateX(${o}deg) rotateY(${i}deg)`)}static \u0275fac=function(n){return new(n||e)(lt(_i),lt(lu),lt(Gs),lt(Ro))};static \u0275cmp=Dr({type:e,selectors:[["app-root"]],decls:28,vars:2,consts:[[1,"container"],[3,"navigationClicked"],[1,"logo"],["src","assets/slb_logo.svg","alt","SLB Logo"],[1,"header"],[1,"hashtags"],[1,"main-content"],[1,"circles-container"],[1,"dripping-circles"],["class","circle",3,"animate",4,"ngFor","ngForOf"],[1,"footer-text"],[1,"highlight"],[1,"badge"],[1,"circle"]],template:function(n,r){n&1&&(We(0,"div",0)(1,"app-navigation",1),ho("navigationClicked",function(){return r.startAnimation()}),Ke(),We(2,"div",2),Nr(3,"img",3),Ke(),We(4,"div",4)(5,"h1"),Et(6,"International Day of Persons with Disabilities"),Ke(),We(7,"div",5)(8,"p"),Et(9,"#WeAreInclusive"),Ke(),We(10,"p"),Et(11,"#WeAreSlb"),Ke()()(),We(12,"div",6),Nr(13,"router-outlet"),Ke(),We(14,"div",7)(15,"div",8),Ao(16,uOe,1,2,"div",9),Ke()(),We(17,"div",10)(18,"p"),Et(19,"Here, we support each other"),Ke(),We(20,"p"),Et(21,"Here, we can all thrive"),Ke(),We(22,"p",11),Et(23,"Here, is SLB"),Ke()(),We(24,"div",12),Et(25," From Awareness"),Nr(26,"br"),Et(27,"to Acceptance "),Ke()()),n&2&&(un(16),Sn("ngForOf",nw(1,aOe)))},dependencies:[Qo,gh,jw,iO,z2],styles:[".container[_ngcontent-%COMP%]{background-color:#f0e6ff;height:98vh;width:100%;position:relative;overflow:hidden;display:flex;flex-direction:column;align-items:center;box-sizing:border-box;margin:0}.logo[_ngcontent-%COMP%]{position:absolute;top:min(2rem,4vh);left:min(2rem,4vh)}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:min(120px,15vw)}.header[_ngcontent-%COMP%]{position:absolute;top:min(2rem,4vh);right:min(2rem,4vh);text-align:right;max-width:50vw}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#00f;margin-bottom:.5rem;font-size:clamp(1rem,2vw,1.5rem)}.header[_ngcontent-%COMP%]   .hashtags[_ngcontent-%COMP%]{color:#00f;font-size:clamp(.8rem,1.5vw,1.2rem)}.header[_ngcontent-%COMP%]   .hashtags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:1rem}.circles-container[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;width:100%}.dripping-circles[_ngcontent-%COMP%]{position:relative;width:min(100vh,100vw);height:min(100vh,100vw)}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:#8000ff1a;top:50%;left:50%;transform:translate(-50%,-50%)}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(1){width:180%;height:180%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(1).animate{animation:_ngcontent-%COMP%_drip1 2s}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(2){width:160%;height:160%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(2).animate{animation:_ngcontent-%COMP%_drip2 2s}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(3){width:140%;height:140%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(3).animate{animation:_ngcontent-%COMP%_drip3 2s}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(4){width:120%;height:120%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(4).animate{animation:_ngcontent-%COMP%_drip4 2s}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(5){width:100%;height:100%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(5).animate{animation:_ngcontent-%COMP%_drip5 2s}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(6){width:80%;height:80%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(6).animate{animation:_ngcontent-%COMP%_drip6 2s}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(7){width:60%;height:60%}.dripping-circles[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]:nth-child(7).animate{animation:_ngcontent-%COMP%_drip7 2s}@keyframes _ngcontent-%COMP%_drip1{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_drip2{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_drip3{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_drip4{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_drip5{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_drip6{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}@keyframes _ngcontent-%COMP%_drip7{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.2)}to{transform:translate(-50%,-50%) scale(1)}}.footer-text[_ngcontent-%COMP%]{position:absolute;bottom:min(2rem,4vh);left:min(2rem,4vh);color:#00f}.footer-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:clamp(1rem,2vw,1.5rem)}.footer-text[_ngcontent-%COMP%]   p.highlight[_ngcontent-%COMP%]{font-weight:700}.badge[_ngcontent-%COMP%]{position:absolute;bottom:min(2rem,4vh);right:min(2rem,4vh);background:#00f;color:#fff;padding:clamp(.5rem,1.5vw,1rem);border-radius:15px;text-align:center;font-size:clamp(.8rem,1.5vw,1rem)}@media (max-width: 768px){.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem}.header[_ngcontent-%COMP%]   .hashtags[_ngcontent-%COMP%]{font-size:.9rem}.footer-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.badge[_ngcontent-%COMP%]{font-size:.9rem;padding:.8rem}}.main-content[_ngcontent-%COMP%]{position:absolute;z-index:1;width:100%;max-width:90vw;margin:5vh auto;padding:2rem;display:flex;justify-content:center;align-items:center}"]})};h5(H2,ute).catch(e=>console.error(e));
